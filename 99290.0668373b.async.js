!(function(){"use strict";var qm=Object.defineProperty;var eg=(Q,k,p)=>k in Q?qm(Q,k,{enumerable:!0,configurable:!0,writable:!0,value:p}):Q[k]=p;var bt=(Q,k,p)=>eg(Q,typeof k!="symbol"?k+"":k,p);var H=(Q,k,p)=>new Promise((g,I)=>{var R=E=>{try{b(p.next(E))}catch(A){I(A)}},O=E=>{try{b(p.throw(E))}catch(A){I(A)}},b=E=>E.done?g(E.value):Promise.resolve(E.value).then(R,O);b((p=p.apply(Q,k)).next())});(self.webpackChunk_yuntijs_ui=self.webpackChunk_yuntijs_ui||[]).push([[99290],{16213:function(Q,k,p){var g;g={value:!0},k.AU=k.Ts=void 0;const I=p(52647),R=p(36261),O=p(38711);var b;(function(S){S.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:O.Event.None}),S.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:O.Event.None});function U(Z){const Y=Z;return Y&&(Y===S.None||Y===S.Cancelled||R.boolean(Y.isCancellationRequested)&&!!Y.onCancellationRequested)}S.is=U})(b||(k.Ts=b={}));const E=Object.freeze(function(S,U){const Z=(0,I.default)().timer.setTimeout(S.bind(U),0);return{dispose(){Z.dispose()}}});class A{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?E:(this._emitter||(this._emitter=new O.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class N{get token(){return this._token||(this._token=new A),this._token}cancel(){this._token?this._token.cancel():this._token=b.Cancelled}dispose(){this._token?this._token instanceof A&&this._token.dispose():this._token=b.None}}k.AU=N},38711:function(Q,k,p){Object.defineProperty(k,"__esModule",{value:!0}),k.Emitter=k.Event=void 0;const g=p(52647);var I;(function(b){const E={dispose(){}};b.None=function(){return E}})(I||(k.Event=I={}));class R{add(E,A=null,N){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(E),this._contexts.push(A),Array.isArray(N)&&N.push({dispose:()=>this.remove(E,A)})}remove(E,A=null){if(!this._callbacks)return;let N=!1;for(let S=0,U=this._callbacks.length;S<U;S++)if(this._callbacks[S]===E)if(this._contexts[S]===A){this._callbacks.splice(S,1),this._contexts.splice(S,1);return}else N=!0;if(N)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...E){if(!this._callbacks)return[];const A=[],N=this._callbacks.slice(0),S=this._contexts.slice(0);for(let U=0,Z=N.length;U<Z;U++)try{A.push(N[U].apply(S[U],E))}catch(Y){(0,g.default)().console.error(Y)}return A}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class O{constructor(E){this._options=E}get event(){return this._event||(this._event=(E,A,N)=>{this._callbacks||(this._callbacks=new R),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(E,A);const S={dispose:()=>{this._callbacks&&(this._callbacks.remove(E,A),S.dispose=O._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(N)&&N.push(S),S}),this._event}fire(E){this._callbacks&&this._callbacks.invoke.call(this._callbacks,E)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}k.Emitter=O,O._noop=function(){}},36261:function(Q,k){Object.defineProperty(k,"__esModule",{value:!0}),k.stringArray=k.array=k.func=k.error=k.number=k.string=k.boolean=void 0;function p(A){return A===!0||A===!1}k.boolean=p;function g(A){return typeof A=="string"||A instanceof String}k.string=g;function I(A){return typeof A=="number"||A instanceof Number}k.number=I;function R(A){return A instanceof Error}k.error=R;function O(A){return typeof A=="function"}k.func=O;function b(A){return Array.isArray(A)}k.array=b;function E(A){return b(A)&&A.every(N=>g(N))}k.stringArray=E},52647:function(Q,k){Object.defineProperty(k,"__esModule",{value:!0});let p;function g(){if(p===void 0)throw new Error("No runtime abstraction layer installed");return p}(function(I){function R(O){if(O===void 0)throw new Error("No runtime abstraction layer provided");p=O}I.install=R})(g||(g={})),k.default=g},28239:function(Q,k,p){var E;p.d(k,{M:function(){return b}});var g=p(84018),I=p(45231),R=(E=class extends g.T7{constructor(){super(["info","showInfo"])}},(0,g.eW)(E,"InfoTokenBuilder"),E),O={parser:{TokenBuilder:(0,g.eW)(()=>new R,"TokenBuilder"),ValueConverter:(0,g.eW)(()=>new g.nr,"ValueConverter")}};function b(A=I.uZ){const N=(0,I.f3)((0,I.Jr)(A),g.GS),S=(0,I.f3)((0,I.Q)({shared:N}),g.F_,O);return N.ServiceRegistry.register(S),{shared:N,Info:S}}(0,g.eW)(b,"createInfoServices")},68851:function(Q,k,p){var A,N;p.d(k,{l:function(){return E}});var g=p(84018),I=p(45231),R=(A=class extends g.T7{constructor(){super(["pie","showData"])}},(0,g.eW)(A,"PieTokenBuilder"),A),O=(N=class extends g.kb{runCustomConverter(U,Z,Y){if(U.name==="PIE_SECTION_LABEL")return Z.replace(/"/g,"").trim()}},(0,g.eW)(N,"PieValueConverter"),N),b={parser:{TokenBuilder:(0,g.eW)(()=>new R,"TokenBuilder"),ValueConverter:(0,g.eW)(()=>new O,"ValueConverter")}};function E(S=I.uZ){const U=(0,I.f3)((0,I.Jr)(S),g.GS),Z=(0,I.f3)((0,I.Q)({shared:U}),g.WH,b);return U.ServiceRegistry.register(Z),{shared:U,Pie:Z}}(0,g.eW)(E,"createPieServices")},86750:function(Q,k,p){var E;p.d(k,{g:function(){return b}});var g=p(84018),I=p(45231),R=(E=class extends g.T7{constructor(){super(["packet-beta"])}},(0,g.eW)(E,"PacketTokenBuilder"),E),O={parser:{TokenBuilder:(0,g.eW)(()=>new R,"TokenBuilder"),ValueConverter:(0,g.eW)(()=>new g.nr,"ValueConverter")}};function b(A=I.uZ){const N=(0,I.f3)((0,I.Jr)(A),g.GS),S=(0,I.f3)((0,I.Q)({shared:N}),g.bb,O);return N.ServiceRegistry.register(S),{shared:N,Packet:S}}(0,g.eW)(b,"createPacketServices")},20460:function(Q,k,p){var A,N;p.d(k,{i:function(){return E}});var g=p(84018),I=p(45231),R=(A=class extends g.T7{constructor(){super(["architecture"])}},(0,g.eW)(A,"ArchitectureTokenBuilder"),A),O=(N=class extends g.kb{runCustomConverter(U,Z,Y){if(U.name==="ARCH_ICON")return Z.replace(/[()]/g,"").trim();if(U.name==="ARCH_TEXT_ICON")return Z.replace(/["()]/g,"");if(U.name==="ARCH_TITLE")return Z.replace(/[[\]]/g,"").trim()}},(0,g.eW)(N,"ArchitectureValueConverter"),N),b={parser:{TokenBuilder:(0,g.eW)(()=>new R,"TokenBuilder"),ValueConverter:(0,g.eW)(()=>new O,"ValueConverter")}};function E(S=I.uZ){const U=(0,I.f3)((0,I.Jr)(S),g.GS),Z=(0,I.f3)((0,I.Q)({shared:U}),g.Qr,b);return U.ServiceRegistry.register(Z),{shared:U,Architecture:Z}}(0,g.eW)(E,"createArchitectureServices")},48614:function(Q,k,p){var E;p.d(k,{z:function(){return b}});var g=p(84018),I=p(45231),R=(E=class extends g.T7{constructor(){super(["gitGraph"])}},(0,g.eW)(E,"GitGraphTokenBuilder"),E),O={parser:{TokenBuilder:(0,g.eW)(()=>new R,"TokenBuilder"),ValueConverter:(0,g.eW)(()=>new g.nr,"ValueConverter")}};function b(A=I.uZ){const N=(0,I.f3)((0,I.Jr)(A),g.GS),S=(0,I.f3)((0,I.Q)({shared:N}),g.vn,O);return N.ServiceRegistry.register(S),{shared:N,GitGraph:S}}(0,g.eW)(b,"createGitGraphServices")},84018:function(Q,k,p){var dt,It,ft,kt,ht;p.d(k,{F_:function(){return Jr},GS:function(){return As},Qr:function(){return Rn},T7:function(){return kn},WH:function(){return Rs},bb:function(){return Yn},eW:function(){return R},kb:function(){return In},nr:function(){return _s},vn:function(){return Is}});var g=p(45231),I=Object.defineProperty,R=(ce,de)=>I(ce,"name",{value:de,configurable:!0}),O="Statement",b="Architecture";function E(ce){return be.isInstance(ce,b)}R(E,"isArchitecture");var A="Branch";function N(ce){return be.isInstance(ce,A)}R(N,"isBranch");var S="Checkout",U="CherryPicking",Z="Commit";function Y(ce){return be.isInstance(ce,Z)}R(Y,"isCommit");var z="Common";function j(ce){return be.isInstance(ce,z)}R(j,"isCommon");var te="GitGraph";function re(ce){return be.isInstance(ce,te)}R(re,"isGitGraph");var ie="Info";function st(ce){return be.isInstance(ce,ie)}R(st,"isInfo");var at="Merge";function G(ce){return be.isInstance(ce,at)}R(G,"isMerge");var Ie="Packet";function Ge(ce){return be.isInstance(ce,Ie)}R(Ge,"isPacket");var zr="PacketBlock";function Yr(ce){return be.isInstance(ce,zr)}R(Yr,"isPacketBlock");var jn="Pie";function ms(ce){return be.isInstance(ce,jn)}R(ms,"isPie");var Xr="PieSection";function Kn(ce){return be.isInstance(ce,Xr)}R(Kn,"isPieSection");var Vn="Direction",Hn=(dt=class extends g.$v{getAllTypes(){return["Architecture","Branch","Checkout","CherryPicking","Commit","Common","Direction","Edge","GitGraph","Group","Info","Junction","Merge","Packet","PacketBlock","Pie","PieSection","Service","Statement"]}computeIsSubtype(de,Ne){switch(de){case A:case S:case U:case Z:case at:return this.isSubtype(O,Ne);case Vn:return this.isSubtype(te,Ne);default:return!1}}getReferenceType(de){const Ne=`${de.container.$type}:${de.property}`;switch(Ne){default:throw new Error(`${Ne} is not a valid reference id.`)}}getTypeMetaData(de){switch(de){case"Architecture":return{name:"Architecture",properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]};case"Branch":return{name:"Branch",properties:[{name:"name"},{name:"order"}]};case"Checkout":return{name:"Checkout",properties:[{name:"branch"}]};case"CherryPicking":return{name:"CherryPicking",properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]};case"Commit":return{name:"Commit",properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Common":return{name:"Common",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Edge":return{name:"Edge",properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]};case"GitGraph":return{name:"GitGraph",properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]};case"Group":return{name:"Group",properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]};case"Info":return{name:"Info",properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]};case"Junction":return{name:"Junction",properties:[{name:"id"},{name:"in"}]};case"Merge":return{name:"Merge",properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]};case"Packet":return{name:"Packet",properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]};case"PacketBlock":return{name:"PacketBlock",properties:[{name:"end"},{name:"label"},{name:"start"}]};case"Pie":return{name:"Pie",properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]};case"PieSection":return{name:"PieSection",properties:[{name:"label"},{name:"value"}]};case"Service":return{name:"Service",properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]};case"Direction":return{name:"Direction",properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]};default:return{name:de,properties:[]}}}},R(dt,"MermaidAstReflection"),dt),be=new Hn,Xt,gs=R(()=>Xt!=null?Xt:Xt=(0,g.sC)('{"$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"$type":"ParserRule","name":"Info","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"info"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"Keyword","value":"showInfo"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'),"InfoGrammar"),En,ys=R(()=>En!=null?En:En=(0,g.sC)(`{"$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"$type":"ParserRule","name":"Packet","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"packet-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PacketBlock","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"start","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"end","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"?"},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/0|[1-9][0-9]*/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}`),"PacketGrammar"),Jt,zn=R(()=>Jt!=null?Jt:Jt=(0,g.sC)('{"$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"$type":"ParserRule","name":"Pie","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"pie"},{"$type":"Assignment","feature":"showData","operator":"?=","terminal":{"$type":"Keyword","value":"showData"},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"*"}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"Assignment","feature":"sections","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]},"cardinality":"+"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"PieSection","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"label","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}},{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"value","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"PIE_SECTION_LABEL","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]+\\"/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"PIE_SECTION_VALUE","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/(0|[1-9][0-9]*)(\\\\.[0-9]+)?/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'),"PieGrammar"),Mt,Qt=R(()=>Mt!=null?Mt:Mt=(0,g.sC)('{"$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"$type":"ParserRule","name":"Architecture","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"Keyword","value":"architecture-beta"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]}]},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[],"cardinality":"*"}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","fragment":true,"definition":{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"groups","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}},{"$type":"Assignment","feature":"services","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@6"},"arguments":[]}},{"$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@7"},"arguments":[]}},{"$type":"Assignment","feature":"edges","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"LeftPort","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Keyword","value":":"},{"$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"RightPort","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@9"},"arguments":[]}},{"$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Arrow","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]},{"$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"--"},{"$type":"Group","elements":[{"$type":"Keyword","value":"-"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]}},{"$type":"Keyword","value":"-"}]}]},{"$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Group","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"group"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Service","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"service"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"iconText","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"Assignment","feature":"icon","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]}}],"cardinality":"?"},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},"cardinality":"?"},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Junction","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"junction"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"in"},{"$type":"Assignment","feature":"in","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Edge","definition":{"$type":"Group","elements":[{"$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]},{"$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@10"},"arguments":[]}},{"$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"TerminalAlternatives","elements":[{"$type":"CharacterRange","left":{"$type":"Keyword","value":"L"}},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"R"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"T"}}]},{"$type":"CharacterRange","left":{"$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ID","definition":{"$type":"RegexToken","regex":"/[\\\\w]+/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TEXT_ICON","definition":{"$type":"RegexToken","regex":"/\\\\(\\"[^\\"]+\\"\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_ICON","definition":{"$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARCH_TITLE","definition":{"$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_GROUP","definition":{"$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ARROW_INTO","definition":{"$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@21"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"types":[],"usedGrammars":[]}'),"ArchitectureGrammar"),vn,qt=R(()=>vn!=null?vn:vn=(0,g.sC)(`{"$type":"Grammar","isDeclared":true,"name":"GitGraph","interfaces":[{"$type":"Interface","name":"Common","attributes":[{"$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}},{"$type":"TypeAttribute","name":"title","isOptional":true,"type":{"$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"rules":[{"$type":"ParserRule","name":"TitleAndAccessibilities","fragment":true,"definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@3"},"arguments":[]}},{"$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@4"},"arguments":[]}},{"$type":"Assignment","feature":"title","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@5"},"arguments":[]}}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"EOL","fragment":true,"dataType":"string","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"+"},{"$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"NEWLINE","definition":{"$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_DESCR","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ACC_TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"TITLE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"$type":"ParserRule","name":"GitGraph","entry":true,"definition":{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"Keyword","value":":"}]},{"$type":"Keyword","value":"gitGraph:"},{"$type":"Group","elements":[{"$type":"Keyword","value":"gitGraph"},{"$type":"RuleCall","rule":{"$ref":"#/rules@12"},"arguments":[]},{"$type":"Keyword","value":":"}]}]},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Group","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[],"cardinality":"*"},{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@0"},"arguments":[]},{"$type":"Assignment","feature":"statements","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@11"},"arguments":[]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@2"},"arguments":[]}],"cardinality":"*"}]}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Statement","definition":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@13"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@14"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@15"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@16"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Direction","definition":{"$type":"Assignment","feature":"dir","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"LR"},{"$type":"Keyword","value":"TB"},{"$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Commit","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"commit"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"msg:","cardinality":"?"},{"$type":"Assignment","feature":"message","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Branch","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"branch"},{"$type":"Assignment","feature":"name","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Group","elements":[{"$type":"Keyword","value":"order:"},{"$type":"Assignment","feature":"order","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@18"},"arguments":[]}}],"cardinality":"?"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Merge","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"merge"},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"type:"},{"$type":"Assignment","feature":"type","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"NORMAL"},{"$type":"Keyword","value":"REVERSE"},{"$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"Checkout","definition":{"$type":"Group","elements":[{"$type":"Alternatives","elements":[{"$type":"Keyword","value":"checkout"},{"$type":"Keyword","value":"switch"}]},{"$type":"Assignment","feature":"branch","operator":"=","terminal":{"$type":"Alternatives","elements":[{"$type":"RuleCall","rule":{"$ref":"#/rules@19"},"arguments":[]},{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}]}},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"ParserRule","name":"CherryPicking","definition":{"$type":"Group","elements":[{"$type":"Keyword","value":"cherry-pick"},{"$type":"Alternatives","elements":[{"$type":"Group","elements":[{"$type":"Keyword","value":"id:"},{"$type":"Assignment","feature":"id","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"tag:"},{"$type":"Assignment","feature":"tags","operator":"+=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]},{"$type":"Group","elements":[{"$type":"Keyword","value":"parent:"},{"$type":"Assignment","feature":"parent","operator":"=","terminal":{"$type":"RuleCall","rule":{"$ref":"#/rules@20"},"arguments":[]}}]}],"cardinality":"*"},{"$type":"RuleCall","rule":{"$ref":"#/rules@1"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"$type":"TerminalRule","name":"INT","type":{"$type":"ReturnType","name":"number"},"definition":{"$type":"RegexToken","regex":"/[0-9]+(?=\\\\s)/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"ID","type":{"$type":"ReturnType","name":"string"},"definition":{"$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false},{"$type":"TerminalRule","name":"STRING","definition":{"$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[]}`),"GitGraphGrammar"),Ts={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},en={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},Es={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},An={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},vs={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1},As={AstReflection:R(()=>new Hn,"AstReflection")},Jr={Grammar:R(()=>gs(),"Grammar"),LanguageMetaData:R(()=>Ts,"LanguageMetaData"),parser:{}},Yn={Grammar:R(()=>ys(),"Grammar"),LanguageMetaData:R(()=>en,"LanguageMetaData"),parser:{}},Rs={Grammar:R(()=>zn(),"Grammar"),LanguageMetaData:R(()=>Es,"LanguageMetaData"),parser:{}},Rn={Grammar:R(()=>Qt(),"Grammar"),LanguageMetaData:R(()=>An,"LanguageMetaData"),parser:{}},Is={Grammar:R(()=>qt(),"Grammar"),LanguageMetaData:R(()=>vs,"LanguageMetaData"),parser:{}},Xn=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/,Qr=/accTitle[\t ]*:([^\n\r]*)/,Jn=/title([\t ][^\n\r]*|)/,ks={ACC_DESCR:Xn,ACC_TITLE:Qr,TITLE:Jn},In=(It=class extends g.tI{runConverter(de,Ne,ot){let Be=this.runCommonConverter(de,Ne,ot);return Be===void 0&&(Be=this.runCustomConverter(de,Ne,ot)),Be===void 0?super.runConverter(de,Ne,ot):Be}runCommonConverter(de,Ne,ot){const Be=ks[de.name];if(Be===void 0)return;const We=Be.exec(Ne);if(We!==null){if(We[1]!==void 0)return We[1].trim().replace(/[\t ]{2,}/gm," ");if(We[2]!==void 0)return We[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,`
`)}}},R(It,"AbstractMermaidValueConverter"),It),_s=(ft=class extends In{runCustomConverter(de,Ne,ot){}},R(ft,"CommonValueConverter"),ft),kn=(kt=class extends g.PH{constructor(de){super(),this.keywords=new Set(de)}buildKeywordTokens(de,Ne,ot){const Be=super.buildKeywordTokens(de,Ne,ot);return Be.forEach(We=>{this.keywords.has(We.name)&&We.PATTERN!==void 0&&(We.PATTERN=new RegExp(We.PATTERN.toString()+"(?:(?=%%)|(?!\\S))"))}),Be}},R(kt,"AbstractMermaidTokenBuilder"),kt),Cs=(ht=class extends kn{},R(ht,"CommonTokenBuilder"),ht)},99290:function(Q,k,p){var Z;p.d(k,{Qc:function(){return S}});var g=p(48614),I=p(28239),R=p(86750),O=p(68851),b=p(20460),E=p(84018),A={},N={info:(0,E.eW)(()=>H(this,null,function*(){const{createInfoServices:Y}=yield p.e(36755).then(p.bind(p,36755)),z=Y().Info.parser.LangiumParser;A.info=z}),"info"),packet:(0,E.eW)(()=>H(this,null,function*(){const{createPacketServices:Y}=yield p.e(13219).then(p.bind(p,13219)),z=Y().Packet.parser.LangiumParser;A.packet=z}),"packet"),pie:(0,E.eW)(()=>H(this,null,function*(){const{createPieServices:Y}=yield p.e(82750).then(p.bind(p,82750)),z=Y().Pie.parser.LangiumParser;A.pie=z}),"pie"),architecture:(0,E.eW)(()=>H(this,null,function*(){const{createArchitectureServices:Y}=yield p.e(50192).then(p.bind(p,50192)),z=Y().Architecture.parser.LangiumParser;A.architecture=z}),"architecture"),gitGraph:(0,E.eW)(()=>H(this,null,function*(){const{createGitGraphServices:Y}=yield p.e(57787).then(p.bind(p,57787)),z=Y().GitGraph.parser.LangiumParser;A.gitGraph=z}),"gitGraph")};function S(Y,z){return H(this,null,function*(){const j=N[Y];if(!j)throw new Error(`Unknown diagram type: ${Y}`);A[Y]||(yield j());const re=A[Y].parse(z);if(re.lexerErrors.length>0||re.parserErrors.length>0)throw new U(re);return re.value})}(0,E.eW)(S,"parse");var U=(Z=class extends Error{constructor(z){const j=z.lexerErrors.map(re=>re.message).join(`
`),te=z.parserErrors.map(re=>re.message).join(`
`);super(`Parsing failed: ${j} ${te}`),this.result=z}},(0,E.eW)(Z,"MermaidParseError"),Z)},45231:function(Q,k,p){p.d(k,{$v:function(){return b},PH:function(){return ll},tI:function(){return ul},uZ:function(){return Dl},Q:function(){return wl},Jr:function(){return Ol},f3:function(){return fs},sC:function(){return Jm}});function g(n){return typeof n=="object"&&n!==null&&typeof n.$type=="string"}function I(n){return typeof n=="object"&&n!==null&&typeof n.$refText=="string"}function R(n){return typeof n=="object"&&n!==null&&typeof n.name=="string"&&typeof n.type=="string"&&typeof n.path=="string"}function O(n){return typeof n=="object"&&n!==null&&g(n.container)&&I(n.reference)&&typeof n.message=="string"}class b{constructor(){this.subtypes={},this.allSubtypes={}}isInstance(e,t){return g(e)&&this.isSubtype(e.$type,t)}isSubtype(e,t){if(e===t)return!0;let r=this.subtypes[e];r||(r=this.subtypes[e]={});const i=r[t];if(i!==void 0)return i;{const s=this.computeIsSubtype(e,t);return r[t]=s,s}}getAllSubTypes(e){const t=this.allSubtypes[e];if(t)return t;{const r=this.getAllTypes(),i=[];for(const s of r)this.isSubtype(s,e)&&i.push(s);return this.allSubtypes[e]=i,i}}}function E(n){return typeof n=="object"&&n!==null&&Array.isArray(n.content)}function A(n){return typeof n=="object"&&n!==null&&typeof n.tokenType=="object"}function N(n){return E(n)&&typeof n.fullText=="string"}class S{constructor(e,t){this.startFn=e,this.nextFn=t}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){return!!this.iterator().next().done}count(){const e=this.iterator();let t=0,r=e.next();for(;!r.done;)t++,r=e.next();return t}toArray(){const e=[],t=this.iterator();let r;do r=t.next(),r.value!==void 0&&e.push(r.value);while(!r.done);return e}toSet(){return new Set(this)}toMap(e,t){const r=this.map(i=>[e?e(i):i,t?t(i):i]);return new Map(r)}toString(){return this.join()}concat(e){const t=e[Symbol.iterator]();return new S(()=>({first:this.startFn(),firstDone:!1}),r=>{let i;if(!r.firstDone){do if(i=this.nextFn(r.first),!i.done)return i;while(!i.done);r.firstDone=!0}do if(i=t.next(),!i.done)return i;while(!i.done);return z})}join(e=","){const t=this.iterator();let r="",i,s=!1;do i=t.next(),i.done||(s&&(r+=e),r+=U(i.value)),s=!0;while(!i.done);return r}indexOf(e,t=0){const r=this.iterator();let i=0,s=r.next();for(;!s.done;){if(i>=t&&s.value===e)return i;s=r.next(),i++}return-1}every(e){const t=this.iterator();let r=t.next();for(;!r.done;){if(!e(r.value))return!1;r=t.next()}return!0}some(e){const t=this.iterator();let r=t.next();for(;!r.done;){if(e(r.value))return!0;r=t.next()}return!1}forEach(e){const t=this.iterator();let r=0,i=t.next();for(;!i.done;)e(i.value,r),i=t.next(),r++}map(e){return new S(this.startFn,t=>{const{done:r,value:i}=this.nextFn(t);return r?z:{done:!1,value:e(i)}})}filter(e){return new S(this.startFn,t=>{let r;do if(r=this.nextFn(t),!r.done&&e(r.value))return r;while(!r.done);return z})}nonNullable(){return this.filter(e=>e!=null)}reduce(e,t){const r=this.iterator();let i=t,s=r.next();for(;!s.done;)i===void 0?i=s.value:i=e(i,s.value),s=r.next();return i}reduceRight(e,t){return this.recursiveReduce(this.iterator(),e,t)}recursiveReduce(e,t,r){const i=e.next();if(i.done)return r;const s=this.recursiveReduce(e,t,r);return s===void 0?i.value:t(s,i.value)}find(e){const t=this.iterator();let r=t.next();for(;!r.done;){if(e(r.value))return r.value;r=t.next()}}findIndex(e){const t=this.iterator();let r=0,i=t.next();for(;!i.done;){if(e(i.value))return r;i=t.next(),r++}return-1}includes(e){const t=this.iterator();let r=t.next();for(;!r.done;){if(r.value===e)return!0;r=t.next()}return!1}flatMap(e){return new S(()=>({this:this.startFn()}),t=>{do{if(t.iterator){const s=t.iterator.next();if(s.done)t.iterator=void 0;else return s}const{done:r,value:i}=this.nextFn(t.this);if(!r){const s=e(i);if(Z(s))t.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}}while(t.iterator);return z})}flat(e){if(e===void 0&&(e=1),e<=0)return this;const t=e>1?this.flat(e-1):this;return new S(()=>({this:t.startFn()}),r=>{do{if(r.iterator){const a=r.iterator.next();if(a.done)r.iterator=void 0;else return a}const{done:i,value:s}=t.nextFn(r.this);if(!i)if(Z(s))r.iterator=s[Symbol.iterator]();else return{done:!1,value:s}}while(r.iterator);return z})}head(){const t=this.iterator().next();if(!t.done)return t.value}tail(e=1){return new S(()=>{const t=this.startFn();for(let r=0;r<e;r++)if(this.nextFn(t).done)return t;return t},this.nextFn)}limit(e){return new S(()=>({size:0,state:this.startFn()}),t=>(t.size++,t.size>e?z:this.nextFn(t.state)))}distinct(e){const t=new Set;return this.filter(r=>{const i=e?e(r):r;return t.has(i)?!1:(t.add(i),!0)})}exclude(e,t){const r=new Set;for(const i of e){const s=t?t(i):i;r.add(s)}return this.filter(i=>{const s=t?t(i):i;return!r.has(s)})}}function U(n){return typeof n=="string"?n:typeof n=="undefined"?"undefined":typeof n.toString=="function"?n.toString():Object.prototype.toString.call(n)}function Z(n){return!!n&&typeof n[Symbol.iterator]=="function"}const Y=new S(()=>{},()=>z),z=Object.freeze({done:!0,value:void 0});function j(...n){if(n.length===1){const e=n[0];if(e instanceof S)return e;if(Z(e))return new S(()=>e[Symbol.iterator](),t=>t.next());if(typeof e.length=="number")return new S(()=>({index:0}),t=>t.index<e.length?{done:!1,value:e[t.index++]}:z)}return n.length>1?new S(()=>({collIndex:0,arrIndex:0}),e=>{do{if(e.iterator){const t=e.iterator.next();if(!t.done)return t;e.iterator=void 0}if(e.array){if(e.arrIndex<e.array.length)return{done:!1,value:e.array[e.arrIndex++]};e.array=void 0,e.arrIndex=0}if(e.collIndex<n.length){const t=n[e.collIndex++];Z(t)?e.iterator=t[Symbol.iterator]():t&&typeof t.length=="number"&&(e.array=t)}}while(e.iterator||e.array||e.collIndex<n.length);return z}):Y}class te extends S{constructor(e,t,r){super(()=>({iterators:r!=null&&r.includeRoot?[[e][Symbol.iterator]()]:[t(e)[Symbol.iterator]()],pruned:!1}),i=>{for(i.pruned&&(i.iterators.pop(),i.pruned=!1);i.iterators.length>0;){const a=i.iterators[i.iterators.length-1].next();if(a.done)i.iterators.pop();else return i.iterators.push(t(a.value)[Symbol.iterator]()),a}return z})}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}}var re;(function(n){function e(s){return s.reduce((a,o)=>a+o,0)}n.sum=e;function t(s){return s.reduce((a,o)=>a*o,0)}n.product=t;function r(s){return s.reduce((a,o)=>Math.min(a,o))}n.min=r;function i(s){return s.reduce((a,o)=>Math.max(a,o))}n.max=i})(re||(re={}));function ie(n){return new te(n,e=>E(e)?e.content:[],{includeRoot:!0})}function st(n){return ie(n).filter(isLeafCstNode)}function at(n,e){for(;n.container;)if(n=n.container,n===e)return!0;return!1}function G(n){return{start:{character:n.startColumn-1,line:n.startLine-1},end:{character:n.endColumn,line:n.endLine-1}}}function Ie(n){if(!n)return;const{offset:e,end:t,range:r}=n;return{range:r,offset:e,end:t,length:t-e}}var Ge;(function(n){n[n.Before=0]="Before",n[n.After=1]="After",n[n.OverlapFront=2]="OverlapFront",n[n.OverlapBack=3]="OverlapBack",n[n.Inside=4]="Inside"})(Ge||(Ge={}));function zr(n,e){if(n.end.line<e.start.line||n.end.line===e.start.line&&n.end.character<n.start.character)return Ge.Before;if(n.start.line>e.end.line||n.start.line===e.end.line&&n.start.character>e.end.character)return Ge.After;const t=n.start.line>e.start.line||n.start.line===e.start.line&&n.start.character>=e.start.character,r=n.end.line<e.end.line||n.end.line===e.end.line&&n.end.character<=e.end.character;return t&&r?Ge.Inside:t?Ge.OverlapBack:Ge.OverlapFront}function Yr(n,e){return zr(n,e)>Ge.After}const jn=/^[\w\p{L}]$/u;function ms(n,e,t=jn){if(n){if(e>0){const r=e-n.offset,i=n.text.charAt(r);t.test(i)||e--}return Vn(n,e)}}function Xr(n,e){if(n){const t=Xt(n,!0);if(t&&Kn(t,e))return t;if(N(n)){const r=n.content.findIndex(i=>!i.hidden);for(let i=r-1;i>=0;i--){const s=n.content[i];if(Kn(s,e))return s}}}}function Kn(n,e){return A(n)&&e.includes(n.tokenType.name)}function Vn(n,e){if(isLeafCstNode(n))return n;if(isCompositeCstNode(n)){const t=be(n,e,!1);if(t)return Vn(t,e)}}function Hn(n,e){if(isLeafCstNode(n))return n;if(isCompositeCstNode(n)){const t=be(n,e,!0);if(t)return Hn(t,e)}}function be(n,e,t){let r=0,i=n.content.length-1,s;for(;r<=i;){const a=Math.floor((r+i)/2),o=n.content[a];if(o.offset<=e&&o.end>e)return o;o.end<=e?(s=t?o:void 0,r=a+1):i=a-1}return s}function Xt(n,e=!0){for(;n.container;){const t=n.container;let r=t.content.indexOf(n);for(;r>0;){r--;const i=t.content[r];if(e||!i.hidden)return i}n=t}}function gs(n,e=!0){for(;n.container;){const t=n.container;let r=t.content.indexOf(n);const i=t.content.length-1;for(;r<i;){r++;const s=t.content[r];if(e||!s.hidden)return s}n=t}}function En(n){if(n.range.start.character===0)return n;const e=n.range.start.line;let t=n,r;for(;n.container;){const i=n.container,s=r!=null?r:i.content.indexOf(n);if(s===0?(n=i,r=void 0):(r=s-1,n=i.content[r]),n.range.start.line!==e)break;t=n}return t}function ys(n,e){const t=Jt(n,e);return t?t.parent.content.slice(t.a+1,t.b):[]}function Jt(n,e){const t=zn(n),r=zn(e);let i;for(let s=0;s<t.length&&s<r.length;s++){const a=t[s],o=r[s];if(a.parent===o.parent)i={parent:a.parent,a:a.index,b:o.index};else break}return i}function zn(n){const e=[];for(;n.container;){const t=n.container,r=t.content.indexOf(n);e.push({parent:t,index:r}),n=t}return e.reverse()}class Mt extends Error{constructor(e,t){super(e?`${t} at ${e.range.start.line}:${e.range.start.character}`:t)}}function Qt(n){throw new Error("Error! The input value was not handled.")}const vn={ID:/\^?[_a-zA-Z][\w_]*/,STRING:/"(\\.|[^"\\])*"|'(\\.|[^'\\])*'/,NUMBER:/NaN|-?((\d*\.\d+|\d+)([Ee][+-]?\d+)?|Infinity)/,RegexLiteral:/\/(?![*+?])(?:[^\r\n\[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*\])+\/[a-z]*/,WS:/\s+/,ML_COMMENT:/\/\*[\s\S]*?\*\//,SL_COMMENT:/\/\/[^\n\r]*/},qt="AbstractRule";function Ts(n){return W.isInstance(n,qt)}const en="AbstractType";function Es(n){return W.isInstance(n,en)}const An="Condition";function vs(n){return W.isInstance(n,An)}function As(n){return Jr(n)||n==="current"||n==="entry"||n==="extends"||n==="false"||n==="fragment"||n==="grammar"||n==="hidden"||n==="import"||n==="interface"||n==="returns"||n==="terminal"||n==="true"||n==="type"||n==="infer"||n==="infers"||n==="with"||typeof n=="string"&&/\^?[_a-zA-Z][\w_]*/.test(n)}function Jr(n){return n==="string"||n==="number"||n==="boolean"||n==="Date"||n==="bigint"}const Yn="TypeDefinition";function Rs(n){return W.isInstance(n,Yn)}const Rn="ValueLiteral";function Is(n){return W.isInstance(n,Rn)}const Xn="AbstractElement";function Qr(n){return W.isInstance(n,Xn)}const Jn="ArrayLiteral";function ks(n){return W.isInstance(n,Jn)}const In="ArrayType";function _s(n){return W.isInstance(n,In)}const kn="BooleanLiteral";function Cs(n){return W.isInstance(n,kn)}const dt="Conjunction";function It(n){return W.isInstance(n,dt)}const ft="Disjunction";function kt(n){return W.isInstance(n,ft)}const ht="Grammar";function ce(n){return W.isInstance(n,ht)}const de="GrammarImport";function Ne(n){return W.isInstance(n,de)}const ot="InferredType";function Be(n){return W.isInstance(n,ot)}const We="Interface";function Ss(n){return W.isInstance(n,We)}const Bl="NamedArgument";function tg(n){return W.isInstance(n,Bl)}const Ns="Negation";function Wl(n){return W.isInstance(n,Ns)}const xs="NumberLiteral";function ng(n){return W.isInstance(n,xs)}const Ls="Parameter";function rg(n){return W.isInstance(n,Ls)}const ws="ParameterReference";function jl(n){return W.isInstance(n,ws)}const Os="ParserRule";function Xe(n){return W.isInstance(n,Os)}const Ps="ReferenceType";function ig(n){return W.isInstance(n,Ps)}const Kl="ReturnType";function Vl(n){return W.isInstance(n,Kl)}const $s="SimpleType";function Hl(n){return W.isInstance(n,$s)}const bs="StringLiteral";function sg(n){return W.isInstance(n,bs)}const qr="TerminalRule";function Dt(n){return W.isInstance(n,qr)}const Ms="Type";function Ds(n){return W.isInstance(n,Ms)}const zl="TypeAttribute";function ag(n){return W.isInstance(n,zl)}const Zs="UnionType";function og(n){return W.isInstance(n,Zs)}const Fs="Action";function Qn(n){return W.isInstance(n,Fs)}const Us="Alternatives";function Gs(n){return W.isInstance(n,Us)}const Bs="Assignment";function Zt(n){return W.isInstance(n,Bs)}const Ws="CharacterRange";function Yl(n){return W.isInstance(n,Ws)}const js="CrossReference";function ei(n){return W.isInstance(n,js)}const Ks="EndOfFile";function Xl(n){return W.isInstance(n,Ks)}const Vs="Group";function ti(n){return W.isInstance(n,Vs)}const Hs="Keyword";function Ft(n){return W.isInstance(n,Hs)}const zs="NegatedToken";function Jl(n){return W.isInstance(n,zs)}const Ys="RegexToken";function Ql(n){return W.isInstance(n,Ys)}const Xs="RuleCall";function Ut(n){return W.isInstance(n,Xs)}const Js="TerminalAlternatives";function ql(n){return W.isInstance(n,Js)}const Qs="TerminalGroup";function eu(n){return W.isInstance(n,Qs)}const qs="TerminalRuleCall";function ea(n){return W.isInstance(n,qs)}const ta="UnorderedGroup";function na(n){return W.isInstance(n,ta)}const ra="UntilToken";function tu(n){return W.isInstance(n,ra)}const ia="Wildcard";function nu(n){return W.isInstance(n,ia)}class sa extends b{getAllTypes(){return["AbstractElement","AbstractRule","AbstractType","Action","Alternatives","ArrayLiteral","ArrayType","Assignment","BooleanLiteral","CharacterRange","Condition","Conjunction","CrossReference","Disjunction","EndOfFile","Grammar","GrammarImport","Group","InferredType","Interface","Keyword","NamedArgument","NegatedToken","Negation","NumberLiteral","Parameter","ParameterReference","ParserRule","ReferenceType","RegexToken","ReturnType","RuleCall","SimpleType","StringLiteral","TerminalAlternatives","TerminalGroup","TerminalRule","TerminalRuleCall","Type","TypeAttribute","TypeDefinition","UnionType","UnorderedGroup","UntilToken","ValueLiteral","Wildcard"]}computeIsSubtype(e,t){switch(e){case Fs:case Us:case Bs:case Ws:case js:case Ks:case Vs:case Hs:case zs:case Ys:case Xs:case Js:case Qs:case qs:case ta:case ra:case ia:return this.isSubtype(Xn,t);case Jn:case xs:case bs:return this.isSubtype(Rn,t);case In:case Ps:case $s:case Zs:return this.isSubtype(Yn,t);case kn:return this.isSubtype(An,t)||this.isSubtype(Rn,t);case dt:case ft:case Ns:case ws:return this.isSubtype(An,t);case ot:case We:case Ms:return this.isSubtype(en,t);case Os:return this.isSubtype(qt,t)||this.isSubtype(en,t);case qr:return this.isSubtype(qt,t);default:return!1}}getReferenceType(e){const t=`${e.container.$type}:${e.property}`;switch(t){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return en;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return qt;case"Grammar:usedGrammars":return ht;case"NamedArgument:parameter":case"ParameterReference:parameter":return Ls;case"TerminalRuleCall:rule":return qr;default:throw new Error(`${t} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case"AbstractElement":return{name:"AbstractElement",properties:[{name:"cardinality"},{name:"lookahead"}]};case"ArrayLiteral":return{name:"ArrayLiteral",properties:[{name:"elements",defaultValue:[]}]};case"ArrayType":return{name:"ArrayType",properties:[{name:"elementType"}]};case"BooleanLiteral":return{name:"BooleanLiteral",properties:[{name:"true",defaultValue:!1}]};case"Conjunction":return{name:"Conjunction",properties:[{name:"left"},{name:"right"}]};case"Disjunction":return{name:"Disjunction",properties:[{name:"left"},{name:"right"}]};case"Grammar":return{name:"Grammar",properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case"GrammarImport":return{name:"GrammarImport",properties:[{name:"path"}]};case"InferredType":return{name:"InferredType",properties:[{name:"name"}]};case"Interface":return{name:"Interface",properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case"NamedArgument":return{name:"NamedArgument",properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case"Negation":return{name:"Negation",properties:[{name:"value"}]};case"NumberLiteral":return{name:"NumberLiteral",properties:[{name:"value"}]};case"Parameter":return{name:"Parameter",properties:[{name:"name"}]};case"ParameterReference":return{name:"ParameterReference",properties:[{name:"parameter"}]};case"ParserRule":return{name:"ParserRule",properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case"ReferenceType":return{name:"ReferenceType",properties:[{name:"referenceType"}]};case"ReturnType":return{name:"ReturnType",properties:[{name:"name"}]};case"SimpleType":return{name:"SimpleType",properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case"StringLiteral":return{name:"StringLiteral",properties:[{name:"value"}]};case"TerminalRule":return{name:"TerminalRule",properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case"Type":return{name:"Type",properties:[{name:"name"},{name:"type"}]};case"TypeAttribute":return{name:"TypeAttribute",properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case"UnionType":return{name:"UnionType",properties:[{name:"types",defaultValue:[]}]};case"Action":return{name:"Action",properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case"Alternatives":return{name:"Alternatives",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"Assignment":return{name:"Assignment",properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case"CharacterRange":return{name:"CharacterRange",properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case"CrossReference":return{name:"CrossReference",properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case"EndOfFile":return{name:"EndOfFile",properties:[{name:"cardinality"},{name:"lookahead"}]};case"Group":return{name:"Group",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case"Keyword":return{name:"Keyword",properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case"NegatedToken":return{name:"NegatedToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case"RegexToken":return{name:"RegexToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case"RuleCall":return{name:"RuleCall",properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case"TerminalAlternatives":return{name:"TerminalAlternatives",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"TerminalGroup":return{name:"TerminalGroup",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"TerminalRuleCall":return{name:"TerminalRuleCall",properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case"UnorderedGroup":return{name:"UnorderedGroup",properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case"UntilToken":return{name:"UntilToken",properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case"Wildcard":return{name:"Wildcard",properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:e,properties:[]}}}}const W=new sa;function aa(n){for(const[e,t]of Object.entries(n))e.startsWith("$")||(Array.isArray(t)?t.forEach((r,i)=>{g(r)&&(r.$container=n,r.$containerProperty=e,r.$containerIndex=i)}):g(t)&&(t.$container=n,t.$containerProperty=e))}function qn(n,e){let t=n;for(;t;){if(e(t))return t;t=t.$container}}function cg(n,e){let t=n;for(;t;){if(e(t))return!0;t=t.$container}return!1}function qe(n){const t=ru(n).$document;if(!t)throw new Error("AST node has no document.");return t}function ru(n){for(;n.$container;)n=n.$container;return n}function ni(n,e){if(!n)throw new Error("Node must be an AstNode.");const t=e==null?void 0:e.range;return new S(()=>({keys:Object.keys(n),keyIndex:0,arrayIndex:0}),r=>{for(;r.keyIndex<r.keys.length;){const i=r.keys[r.keyIndex];if(!i.startsWith("$")){const s=n[i];if(g(s)){if(r.keyIndex++,ri(s,t))return{done:!1,value:s}}else if(Array.isArray(s)){for(;r.arrayIndex<s.length;){const a=r.arrayIndex++,o=s[a];if(g(o)&&ri(o,t))return{done:!1,value:o}}r.arrayIndex=0}}r.keyIndex++}return z})}function _n(n,e){if(!n)throw new Error("Root node must be an AstNode.");return new te(n,t=>ni(t,e))}function Gt(n,e){if(n){if(e!=null&&e.range&&!ri(n,e.range))return new te(n,()=>[])}else throw new Error("Root node must be an AstNode.");return new te(n,t=>ni(t,e),{includeRoot:!0})}function ri(n,e){var t;if(!e)return!0;const r=(t=n.$cstNode)===null||t===void 0?void 0:t.range;return r?Yr(r,e):!1}function ii(n){return new S(()=>({keys:Object.keys(n),keyIndex:0,arrayIndex:0}),e=>{for(;e.keyIndex<e.keys.length;){const t=e.keys[e.keyIndex];if(!t.startsWith("$")){const r=n[t];if(I(r))return e.keyIndex++,{done:!1,value:{reference:r,container:n,property:t}};if(Array.isArray(r)){for(;e.arrayIndex<r.length;){const i=e.arrayIndex++,s=r[i];if(I(s))return{done:!1,value:{reference:s,container:n,property:t,index:i}}}e.arrayIndex=0}}e.keyIndex++}return z})}function lg(n,e=qe(n).parseResult.value){const t=[];return Gt(e).forEach(r=>{ii(r).forEach(i=>{i.reference.ref===n&&t.push(i.reference)})}),stream(t)}function iu(n,e){const t=n.getTypeMetaData(e.$type),r=e;for(const i of t.properties)i.defaultValue!==void 0&&r[i.name]===void 0&&(r[i.name]=oa(i.defaultValue))}function oa(n){return Array.isArray(n)?[...n.map(oa)]:n}function ca(n,e){const t={$type:n.$type};for(const[r,i]of Object.entries(n))if(!r.startsWith("$"))if(isAstNode(i))t[r]=ca(i,e);else if(isReference(i))t[r]=e(t,r,i.$refNode,i.$refText);else if(Array.isArray(i)){const s=[];for(const a of i)isAstNode(a)?s.push(ca(a,e)):isReference(a)?s.push(e(t,r,a.$refNode,a.$refText)):s.push(a);t[r]=s}else t[r]=i;return aa(t),t}function B(n){return n.charCodeAt(0)}function si(n,e){Array.isArray(n)?n.forEach(function(t){e.push(t)}):e.push(n)}function Cn(n,e){if(n[e]===!0)throw"duplicate flag "+e;const t=n[e];n[e]=!0}function tn(n){if(n===void 0)throw Error("Internal Error - Should never get here!");return!0}function er(){throw Error("Internal Error - Should never get here!")}function la(n){return n.type==="Character"}const tr=[];for(let n=B("0");n<=B("9");n++)tr.push(n);const nr=[B("_")].concat(tr);for(let n=B("a");n<=B("z");n++)nr.push(n);for(let n=B("A");n<=B("Z");n++)nr.push(n);const ua=[B(" "),B("\f"),B(`
`),B("\r"),B("	"),B("\v"),B("	"),B("\xA0"),B("\u1680"),B("\u2000"),B("\u2001"),B("\u2002"),B("\u2003"),B("\u2004"),B("\u2005"),B("\u2006"),B("\u2007"),B("\u2008"),B("\u2009"),B("\u200A"),B("\u2028"),B("\u2029"),B("\u202F"),B("\u205F"),B("\u3000"),B("\uFEFF")],su=/[0-9a-fA-F]/,rr=/[0-9]/,au=/[1-9]/;class da{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Cn(r,"global");break;case"i":Cn(r,"ignoreCase");break;case"m":Cn(r,"multiLine");break;case"u":Cn(r,"unicode");break;case"y":Cn(r,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:r,value:t,loc:this.loc(0)}}disjunction(){const e=[],t=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break}tn(t);const r=this.disjunction();return this.consumeChar(")"),{type:t,value:r,loc:this.loc(e)}}return er()}quantifier(e=!1){let t;const r=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":const i=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:i,atMost:i};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),t={atLeast:i,atMost:s}):t={atLeast:i,atMost:1/0},this.consumeChar("}");break}if(e===!0&&t===void 0)return;tn(t);break}if(!(e===!0&&t===void 0)&&tn(t))return this.peekChar(0)==="?"?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(r),t}atom(){let e;const t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),tn(e)?(e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):er()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[B(`
`),B("\r"),B("\u2028"),B("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=tr;break;case"D":e=tr,t=!0;break;case"s":e=ua;break;case"S":e=ua,t=!0;break;case"w":e=nr;break;case"W":e=nr,t=!0;break}return tn(e)?{type:"Set",value:e,complement:t}:er()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=B("\f");break;case"n":e=B(`
`);break;case"r":e=B("\r");break;case"t":e=B("	");break;case"v":e=B("\v");break}return tn(e)?{type:"Character",value:e}:er()}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:B("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:B(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:const e=this.popChar();return{type:"Character",value:B(e)}}}characterClass(){const e=[];let t=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),t=!0);this.isClassAtom();){const r=this.classAtom(),i=r.type==="Character";if(la(r)&&this.isRangeDash()){this.consumeChar("-");const s=this.classAtom(),a=s.type==="Character";if(la(s)){if(s.value<r.value)throw Error("Range out of order in character class");e.push({from:r.value,to:s.value})}else si(r.value,e),e.push(B("-")),si(s.value,e)}else si(r.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:B("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}const t=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:e,value:t};return e&&(r.idx=this.groupIdx),r}positiveInteger(){let e=this.popChar();if(au.test(e)===!1)throw Error("Expecting a positive integer");for(;rr.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(rr.test(e)===!1)throw Error("Expecting an integer");for(;rr.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:B(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return rr.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const e=this.saveState();try{return this.quantifier(!0)!==void 0}catch(t){return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let i=0;i<e;i++){const s=this.popChar();if(su.test(s)===!1)throw Error("Expecting a HexDecimal digits");t+=s}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}}class ir{visitChildren(e){for(const t in e){const r=e[t];e.hasOwnProperty(t)&&(r.type!==void 0?this.visit(r):Array.isArray(r)&&r.forEach(i=>{this.visit(i)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}const ou=/\r?\n/gm,fa=new da;class cu extends ir{constructor(){super(...arguments),this.isStarting=!0,this.endRegexpStack=[],this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1,this.regex=e,this.startRegexp="",this.isStarting=!0,this.endRegexpStack=[]}visitGroup(e){e.quantifier&&(this.isStarting=!1,this.endRegexpStack=[])}visitCharacter(e){const t=String.fromCharCode(e.value);if(!this.multiline&&t===`
`&&(this.multiline=!0),e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const r=sr(t);this.endRegexpStack.push(r),this.isStarting&&(this.startRegexp+=r)}}visitSet(e){if(!this.multiline){const t=this.regex.substring(e.loc.begin,e.loc.end),r=new RegExp(t);this.multiline=!!`
`.match(r)}if(e.quantifier)this.isStarting=!1,this.endRegexpStack=[];else{const t=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(t),this.isStarting&&(this.startRegexp+=t)}}visitChildren(e){e.type==="Group"&&e.quantifier||super.visitChildren(e)}}const Bt=new cu;function ug(n){try{typeof n!="string"&&(n=n.source),n=`/${n}/`;const e=fa.pattern(n),t=[];for(const r of e.value.value)Bt.reset(n),Bt.visit(r),t.push({start:Bt.startRegexp,end:Bt.endRegex});return t}catch(e){return[]}}function lu(n){try{return typeof n=="string"&&(n=new RegExp(n)),n=n.toString(),Bt.reset(n),Bt.visit(fa.pattern(n)),Bt.multiline}catch(e){return!1}}function ha(n){return(typeof n=="string"?new RegExp(n):n).test(" ")}function sr(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function uu(n){return Array.prototype.map.call(n,e=>/\w/.test(e)?`[${e.toLowerCase()}${e.toUpperCase()}]`:sr(e)).join("")}function du(n,e){const t=fu(n),r=e.match(t);return!!r&&r[0].length>0}function fu(n){typeof n=="string"&&(n=new RegExp(n));const e=n,t=n.source;let r=0;function i(){let s="",a;function o(l){s+=t.substr(r,l),r+=l}function c(l){s+="(?:"+t.substr(r,l)+"|$)",r+=l}for(;r<t.length;)switch(t[r]){case"\\":switch(t[r+1]){case"c":c(3);break;case"x":c(4);break;case"u":e.unicode?t[r+2]==="{"?c(t.indexOf("}",r)-r+1):c(6):c(2);break;case"p":case"P":e.unicode?c(t.indexOf("}",r)-r+1):c(2);break;case"k":c(t.indexOf(">",r)-r+1);break;default:c(2);break}break;case"[":a=/\[(?:\\.|.)*?\]/g,a.lastIndex=r,a=a.exec(t)||[],c(a[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":o(1);break;case"{":a=/\{\d+,?\d*\}/g,a.lastIndex=r,a=a.exec(t),a?o(a[0].length):c(1);break;case"(":if(t[r+1]==="?")switch(t[r+2]){case":":s+="(?:",r+=3,s+=i()+"|$)";break;case"=":s+="(?=",r+=3,s+=i()+")";break;case"!":a=r,r+=3,i(),s+=t.substr(a,r-a);break;case"<":switch(t[r+3]){case"=":case"!":a=r,r+=4,i(),s+=t.substr(a,r-a);break;default:o(t.indexOf(">",r)-r+1),s+=i()+"|$)";break}break}else o(1),s+=i()+"|$)";break;case")":return++r,s;default:c(1);break}return s}return new RegExp(i(),n.flags)}function hu(n){return n.rules.find(e=>Xe(e)&&e.entry)}function pu(n){return n.rules.filter(e=>Dt(e)&&e.hidden)}function pa(n,e){const t=new Set,r=hu(n);if(!r)return new Set(n.rules);const i=[r].concat(pu(n));for(const a of i)ma(a,t,e);const s=new Set;for(const a of n.rules)(t.has(a.name)||Dt(a)&&a.hidden)&&s.add(a);return s}function ma(n,e,t){e.add(n.name),_n(n).forEach(r=>{if(Ut(r)||t&&ea(r)){const i=r.rule.ref;i&&!e.has(i.name)&&ma(i,e,t)}})}function mu(n){if(n.terminal)return n.terminal;if(n.type.ref){const e=Ta(n.type.ref);return e==null?void 0:e.terminal}}function gu(n){return n.hidden&&!li(n).test(" ")}function yu(n,e){return!n||!e?[]:ai(n,e,n.astNode,!0)}function ga(n,e,t){if(!n||!e)return;const r=ai(n,e,n.astNode,!0);if(r.length!==0)return t!==void 0?t=Math.max(0,Math.min(t,r.length-1)):t=0,r[t]}function ai(n,e,t,r){if(!r){const i=qn(n.grammarSource,Zt);if(i&&i.feature===e)return[n]}return E(n)&&n.astNode===t?n.content.flatMap(i=>ai(i,e,t,!1)):[]}function dg(n,e){return n?ya(n,e,n==null?void 0:n.astNode):[]}function Tu(n,e,t){if(!n)return;const r=ya(n,e,n==null?void 0:n.astNode);if(r.length!==0)return t!==void 0?t=Math.max(0,Math.min(t,r.length-1)):t=0,r[t]}function ya(n,e,t){if(n.astNode!==t)return[];if(Ft(n.grammarSource)&&n.grammarSource.value===e)return[n];const r=ie(n).iterator();let i;const s=[];do if(i=r.next(),!i.done){const a=i.value;a.astNode===t?Ft(a.grammarSource)&&a.grammarSource.value===e&&s.push(a):r.prune()}while(!i.done);return s}function Eu(n){var e;const t=n.astNode;for(;t===((e=n.container)===null||e===void 0?void 0:e.astNode);){const r=qn(n.grammarSource,Zt);if(r)return r;n=n.container}}function Ta(n){let e=n;return Be(e)&&(Qn(e.$container)?e=e.$container.$container:Xe(e.$container)?e=e.$container:Qt(e.$container)),Ea(n,e,new Map)}function Ea(n,e,t){var r;function i(s,a){let o;return qn(s,Zt)||(o=Ea(a,a,t)),t.set(n,o),o}if(t.has(n))return t.get(n);t.set(n,void 0);for(const s of _n(e)){if(Zt(s)&&s.feature.toLowerCase()==="name")return t.set(n,s),s;if(Ut(s)&&Xe(s.rule.ref))return i(s,s.rule.ref);if(Hl(s)&&(!((r=s.typeRef)===null||r===void 0)&&r.ref))return i(s,s.typeRef.ref)}}function vu(n){const e=n.$container;if(ast.isGroup(e)){const t=e.elements,r=t.indexOf(n);for(let i=r-1;i>=0;i--){const s=t[i];if(ast.isAction(s))return s;{const a=streamAllContents(t[i]).find(ast.isAction);if(a)return a}}}if(ast.isAbstractElement(e))return vu(e)}function fg(n,e){return n==="?"||n==="*"||ast.isGroup(e)&&!!e.guardCondition}function hg(n){return n==="*"||n==="+"}function pg(n){return n==="+="}function oi(n){return va(n,new Set)}function va(n,e){if(e.has(n))return!0;e.add(n);for(const t of _n(n))if(Ut(t)){if(!t.rule.ref||Xe(t.rule.ref)&&!va(t.rule.ref,e))return!1}else{if(Zt(t))return!1;if(Qn(t))return!1}return!!n.definition}function mg(n){return ci(n.type,new Set)}function ci(n,e){if(e.has(n))return!0;if(e.add(n),ast.isArrayType(n))return!1;if(ast.isReferenceType(n))return!1;if(ast.isUnionType(n))return n.types.every(t=>ci(t,e));if(ast.isSimpleType(n)){if(n.primitiveType!==void 0)return!0;if(n.stringType!==void 0)return!0;if(n.typeRef!==void 0){const t=n.typeRef.ref;return ast.isType(t)?ci(t.type,e):!1}else return!1}else return!1}function Aa(n){if(n.inferredType)return n.inferredType.name;if(n.dataType)return n.dataType;if(n.returnType){const e=n.returnType.ref;if(e){if(Xe(e))return e.name;if(Ss(e)||Ds(e))return e.name}}}function ar(n){var e;if(Xe(n))return oi(n)?n.name:(e=Aa(n))!==null&&e!==void 0?e:n.name;if(Ss(n)||Ds(n)||Vl(n))return n.name;if(Qn(n)){const t=Au(n);if(t)return t}else if(Be(n))return n.name;throw new Error("Cannot get name of Unknown Type")}function Au(n){var e;if(n.inferredType)return n.inferredType.name;if(!((e=n.type)===null||e===void 0)&&e.ref)return ar(n.type.ref)}function Ru(n){var e,t,r;return Dt(n)?(t=(e=n.type)===null||e===void 0?void 0:e.name)!==null&&t!==void 0?t:"string":oi(n)?n.name:(r=Aa(n))!==null&&r!==void 0?r:n.name}function li(n){const e={s:!1,i:!1,u:!1},t=nn(n.definition,e),r=Object.entries(e).filter(([,i])=>i).map(([i])=>i).join("");return new RegExp(t,r)}const ui=/[\s\S]/.source;function nn(n,e){if(ql(n))return Iu(n);if(eu(n))return ku(n);if(Yl(n))return Su(n);if(ea(n)){const t=n.rule.ref;if(!t)throw new Error("Missing rule reference.");return pt(nn(t.definition),{cardinality:n.cardinality,lookahead:n.lookahead})}else{if(Jl(n))return Cu(n);if(tu(n))return _u(n);if(Ql(n)){const t=n.regex.lastIndexOf("/"),r=n.regex.substring(1,t),i=n.regex.substring(t+1);return e&&(e.i=i.includes("i"),e.s=i.includes("s"),e.u=i.includes("u")),pt(r,{cardinality:n.cardinality,lookahead:n.lookahead,wrap:!1})}else{if(nu(n))return pt(ui,{cardinality:n.cardinality,lookahead:n.lookahead});throw new Error(`Invalid terminal element: ${n==null?void 0:n.$type}`)}}}function Iu(n){return pt(n.elements.map(e=>nn(e)).join("|"),{cardinality:n.cardinality,lookahead:n.lookahead})}function ku(n){return pt(n.elements.map(e=>nn(e)).join(""),{cardinality:n.cardinality,lookahead:n.lookahead})}function _u(n){return pt(`${ui}*?${nn(n.terminal)}`,{cardinality:n.cardinality,lookahead:n.lookahead})}function Cu(n){return pt(`(?!${nn(n.terminal)})${ui}*?`,{cardinality:n.cardinality,lookahead:n.lookahead})}function Su(n){return n.right?pt(`[${di(n.left)}-${di(n.right)}]`,{cardinality:n.cardinality,lookahead:n.lookahead,wrap:!1}):pt(di(n.left),{cardinality:n.cardinality,lookahead:n.lookahead,wrap:!1})}function di(n){return sr(n.value)}function pt(n,e){var t;return(e.wrap!==!1||e.lookahead)&&(n=`(${(t=e.lookahead)!==null&&t!==void 0?t:""}${n})`),e.cardinality?`${n}${e.cardinality}`:n}function Nu(n){const e=[],t=n.Grammar;for(const r of t.rules)Dt(r)&&gu(r)&&lu(li(r))&&e.push(r.name);return{multilineCommentRules:e,nameRegexp:jn}}var D=p(79156),me=p(27942),se=p(15943),$=p(55247),F=p(27431),ve=p(25043);function Ra(n){function e(){}e.prototype=n;const t=new e;function r(){return typeof t.bar}return r(),r(),n;(0,eval)(n)}var Ia=p(38459),or=p(50140);function xu(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===void 0?1:(0,or.Z)(e),(0,Ia.Z)(n,e<0?0:e,r)):[]}var Ae=xu,Me=p(83873),Lu=p(61572),wu=p(52949),Ou=p(31543),ka=p(49634),Pu=p(5196),rn=p(77251),$u=Object.prototype,bu=$u.hasOwnProperty,Mu=(0,Ou.Z)(function(n,e){if((0,Pu.Z)(e)||(0,ka.Z)(e)){(0,wu.Z)(e,(0,rn.Z)(e),n);return}for(var t in e)bu.call(e,t)&&(0,Lu.Z)(n,t,e[t])}),je=Mu,_a=p(28019),sn=p(78094),Du=p(62304),Zu=p(96842);function Fu(n,e){if(n==null)return{};var t=(0,_a.Z)((0,Zu.Z)(n),function(r){return[r]});return e=(0,sn.Z)(e),(0,Du.Z)(n,t,function(r,i){return e(r,i[0])})}var et=Fu,Uu=p(33918),Gu=p(13795),Bu="[object RegExp]";function Wu(n){return(0,Gu.Z)(n)&&(0,Uu.Z)(n)==Bu}var ju=Wu,Ca=p(5467),Sa=p(92350),Na=Sa.Z&&Sa.Z.isRegExp,Ku=Na?(0,Ca.Z)(Na):ju,mt=Ku;function Vu(n){return Hu(n)?n.LABEL:n.name}function Hu(n){return(0,Me.Z)(n.LABEL)&&n.LABEL!==""}class ct{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),(0,D.Z)(this.definition,t=>{t.accept(e)})}}class xe extends ct{constructor(e){super([]),this.idx=1,je(this,et(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}}class an extends ct{constructor(e){super(e.definition),this.orgText="",je(this,et(e,t=>t!==void 0))}}class De extends ct{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,je(this,et(e,t=>t!==void 0))}}class Re extends ct{constructor(e){super(e.definition),this.idx=1,je(this,et(e,t=>t!==void 0))}}class Ke extends ct{constructor(e){super(e.definition),this.idx=1,je(this,et(e,t=>t!==void 0))}}class Ve extends ct{constructor(e){super(e.definition),this.idx=1,je(this,et(e,t=>t!==void 0))}}class fe extends ct{constructor(e){super(e.definition),this.idx=1,je(this,et(e,t=>t!==void 0))}}class Ze extends ct{constructor(e){super(e.definition),this.idx=1,je(this,et(e,t=>t!==void 0))}}class Fe extends ct{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,je(this,et(e,t=>t!==void 0))}}class ae{constructor(e){this.idx=1,je(this,et(e,t=>t!==void 0))}accept(e){e.visit(this)}}function zu(n){return(0,$.Z)(n,cr)}function cr(n){function e(t){return(0,$.Z)(t,cr)}if(n instanceof xe){const t={type:"NonTerminal",name:n.nonTerminalName,idx:n.idx};return(0,Me.Z)(n.label)&&(t.label=n.label),t}else{if(n instanceof De)return{type:"Alternative",definition:e(n.definition)};if(n instanceof Re)return{type:"Option",idx:n.idx,definition:e(n.definition)};if(n instanceof Ke)return{type:"RepetitionMandatory",idx:n.idx,definition:e(n.definition)};if(n instanceof Ve)return{type:"RepetitionMandatoryWithSeparator",idx:n.idx,separator:cr(new ae({terminalType:n.separator})),definition:e(n.definition)};if(n instanceof Ze)return{type:"RepetitionWithSeparator",idx:n.idx,separator:cr(new ae({terminalType:n.separator})),definition:e(n.definition)};if(n instanceof fe)return{type:"Repetition",idx:n.idx,definition:e(n.definition)};if(n instanceof Fe)return{type:"Alternation",idx:n.idx,definition:e(n.definition)};if(n instanceof ae){const t={type:"Terminal",name:n.terminalType.name,label:Vu(n.terminalType),idx:n.idx};(0,Me.Z)(n.label)&&(t.terminalLabel=n.label);const r=n.terminalType.PATTERN;return n.terminalType.PATTERN&&(t.pattern=mt(r)?r.source:r),t}else{if(n instanceof an)return{type:"Rule",name:n.name,orgText:n.orgText,definition:e(n.definition)};throw Error("non exhaustive match")}}}class lr{walk(e,t=[]){(0,D.Z)(e.definition,(r,i)=>{const s=Ae(e.definition,i+1);if(r instanceof xe)this.walkProdRef(r,s,t);else if(r instanceof ae)this.walkTerminal(r,s,t);else if(r instanceof De)this.walkFlat(r,s,t);else if(r instanceof Re)this.walkOption(r,s,t);else if(r instanceof Ke)this.walkAtLeastOne(r,s,t);else if(r instanceof Ve)this.walkAtLeastOneSep(r,s,t);else if(r instanceof Ze)this.walkManySep(r,s,t);else if(r instanceof fe)this.walkMany(r,s,t);else if(r instanceof Fe)this.walkOr(r,s,t);else throw Error("non exhaustive match")})}walkTerminal(e,t,r){}walkProdRef(e,t,r){}walkFlat(e,t,r){const i=t.concat(r);this.walk(e,i)}walkOption(e,t,r){const i=t.concat(r);this.walk(e,i)}walkAtLeastOne(e,t,r){const i=[new Re({definition:e.definition})].concat(t,r);this.walk(e,i)}walkAtLeastOneSep(e,t,r){const i=xa(e,t,r);this.walk(e,i)}walkMany(e,t,r){const i=[new Re({definition:e.definition})].concat(t,r);this.walk(e,i)}walkManySep(e,t,r){const i=xa(e,t,r);this.walk(e,i)}walkOr(e,t,r){const i=t.concat(r);(0,D.Z)(e.definition,s=>{const a=new De({definition:[s]});this.walk(a,i)})}}function xa(n,e,t){return[new Re({definition:[new ae({terminalType:n.separator})].concat(n.definition)})].concat(e,t)}var fi=p(91581),Je=p(23351),Yu=p(60012),hi=p(31342);function Xu(n,e){var t;return(0,hi.Z)(n,function(r,i,s){return t=e(r,i,s),!t}),!!t}var Ju=Xu,ke=p(56052),La=p(61833);function Qu(n,e,t){var r=(0,ke.Z)(n)?Yu.Z:Ju;return t&&(0,La.Z)(n,e,t)&&(e=void 0),r(n,(0,sn.Z)(e,3))}var wa=Qu,Oa=p(18448),qu=Math.max;function ed(n,e,t,r){n=(0,ka.Z)(n)?n:(0,me.Z)(n),t=t&&!r?(0,or.Z)(t):0;var i=n.length;return t<0&&(t=qu(i+t,0)),(0,Me.Z)(n)?t<=i&&n.indexOf(e,t)>-1:!!i&&(0,Oa.Z)(n,e,t)>-1}var Le=ed;function td(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(!e(n[t],t,n))return!1;return!0}var nd=td;function rd(n,e){var t=!0;return(0,hi.Z)(n,function(r,i,s){return t=!!e(r,i,s),t}),t}var id=rd;function sd(n,e,t){var r=(0,ke.Z)(n)?nd:id;return t&&(0,La.Z)(n,e,t)&&(e=void 0),r(n,(0,sn.Z)(e,3))}var tt=sd;function ad(n){return n instanceof De||n instanceof Re||n instanceof fe||n instanceof Ke||n instanceof Ve||n instanceof Ze||n instanceof ae||n instanceof an}function ur(n,e=[]){return n instanceof Re||n instanceof fe||n instanceof Ze?!0:n instanceof Fe?wa(n.definition,r=>ur(r,e)):n instanceof xe&&Le(e,n)?!1:n instanceof ct?(n instanceof xe&&e.push(n),tt(n.definition,r=>ur(r,e))):!1}function od(n){return n instanceof Fe}function lt(n){if(n instanceof xe)return"SUBRULE";if(n instanceof Re)return"OPTION";if(n instanceof Fe)return"OR";if(n instanceof Ke)return"AT_LEAST_ONE";if(n instanceof Ve)return"AT_LEAST_ONE_SEP";if(n instanceof Ze)return"MANY_SEP";if(n instanceof fe)return"MANY";if(n instanceof ae)return"CONSUME";throw Error("non exhaustive match")}function Sn(n){if(n instanceof xe)return Sn(n.referencedRule);if(n instanceof ae)return ud(n);if(ad(n))return cd(n);if(od(n))return ld(n);throw Error("non exhaustive match")}function cd(n){let e=[];const t=n.definition;let r=0,i=t.length>r,s,a=!0;for(;i&&a;)s=t[r],a=ur(s),e=e.concat(Sn(s)),r=r+1,i=t.length>r;return(0,fi.Z)(e)}function ld(n){const e=(0,$.Z)(n.definition,t=>Sn(t));return(0,fi.Z)((0,Je.Z)(e))}function ud(n){return[n.terminalType]}const Pa="_~IN~_";class dd extends lr{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,r){}walkProdRef(e,t,r){const i=hd(e.referencedRule,e.idx)+this.topProd.name,s=t.concat(r),a=new De({definition:s}),o=Sn(a);this.follows[i]=o}}function fd(n){const e={};return(0,D.Z)(n,t=>{const r=new dd(t).startWalking();je(e,r)}),e}function hd(n,e){return n.name+e+Pa}function gg(n){return n.terminalType.name+n.idx+IN}var gt=p(71180),pi=p(70374),pd=p(39890),md=p(72043),gd="Expected a function";function yd(n){if(typeof n!="function")throw new TypeError(gd);return function(){var e=arguments;switch(e.length){case 0:return!n.call(this);case 1:return!n.call(this,e[0]);case 2:return!n.call(this,e[0],e[1]);case 3:return!n.call(this,e[0],e[1],e[2])}return!n.apply(this,e)}}var Td=yd;function Ed(n,e){var t=(0,ke.Z)(n)?pd.Z:md.Z;return t(n,Td((0,sn.Z)(e,3)))}var dr=Ed,Wt=p(88987),vd=Math.max;function Ad(n,e,t){var r=n==null?0:n.length;if(!r)return-1;var i=t==null?0:(0,or.Z)(t);return i<0&&(i=vd(r+i,0)),(0,Oa.Z)(n,e,i)}var $a=Ad,we=p(86086),He=p(12908),Rd=p(61694),Id=p(97463),kd=p(30287),_d=p(20465),Cd=200;function Sd(n,e,t,r){var i=-1,s=Id.Z,a=!0,o=n.length,c=[],l=e.length;if(!o)return c;t&&(e=(0,_a.Z)(e,(0,Ca.Z)(t))),r?(s=kd.Z,a=!1):e.length>=Cd&&(s=_d.Z,a=!1,e=new Rd.Z(e));e:for(;++i<o;){var u=n[i],d=t==null?u:t(u);if(u=r||u!==0?u:0,a&&d===d){for(var h=l;h--;)if(e[h]===d)continue e;c.push(u)}else s(e,d,r)||c.push(u)}return c}var Nd=Sd,ba=p(84887),xd=p(19851),Ma=p(84488),Ld=(0,xd.Z)(function(n,e){return(0,Ma.Z)(n)?Nd(n,(0,ba.Z)(e,1,Ma.Z,!0)):[]}),fr=Ld;function wd(n){for(var e=-1,t=n==null?0:n.length,r=0,i=[];++e<t;){var s=n[e];s&&(i[r++]=s)}return i}var Nn=wd;function Od(n){return n&&n.length?n[0]:void 0}var nt=Od,on=p(95189);function mi(n){console&&console.error&&console.error(`Error: ${n}`)}function Da(n){console&&console.warn&&console.warn(`Warning: ${n}`)}let hr={};const Pd=new da;function pr(n){const e=n.toString();if(hr.hasOwnProperty(e))return hr[e];{const t=Pd.pattern(e);return hr[e]=t,t}}function $d(){hr={}}const Za="Complement Sets are not supported for first char optimization",mr=`Unable to use "first char" lexer optimizations:
`;function bd(n,e=!1){try{const t=pr(n);return gi(t.value,{},t.flags.ignoreCase)}catch(t){if(t.message===Za)e&&Da(`${mr}	Unable to optimize: < ${n.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let r="";e&&(r=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),mi(`${mr}
	Failed parsing: < ${n.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+r)}}return[]}function gi(n,e,t){switch(n.type){case"Disjunction":for(let i=0;i<n.value.length;i++)gi(n.value[i],e,t);break;case"Alternative":const r=n.value;for(let i=0;i<r.length;i++){const s=r[i];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}const a=s;switch(a.type){case"Character":gr(a.value,e,t);break;case"Set":if(a.complement===!0)throw Error(Za);(0,D.Z)(a.value,c=>{if(typeof c=="number")gr(c,e,t);else{const l=c;if(t===!0)for(let u=l.from;u<=l.to;u++)gr(u,e,t);else{for(let u=l.from;u<=l.to&&u<Ln;u++)gr(u,e,t);if(l.to>=Ln){const u=l.from>=Ln?l.from:Ln,d=l.to,h=_t(u),f=_t(d);for(let y=h;y<=f;y++)e[y]=y}}}});break;case"Group":gi(a.value,e,t);break;default:throw Error("Non Exhaustive Match")}const o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&yi(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return(0,me.Z)(e)}function gr(n,e,t){const r=_t(n);e[r]=r,t===!0&&Md(n,e)}function Md(n,e){const t=String.fromCharCode(n),r=t.toUpperCase();if(r!==t){const i=_t(r.charCodeAt(0));e[i]=i}else{const i=t.toLowerCase();if(i!==t){const s=_t(i.charCodeAt(0));e[s]=s}}}function Fa(n,e){return(0,on.Z)(n.value,t=>{if(typeof t=="number")return Le(e,t);{const r=t;return(0,on.Z)(e,i=>r.from<=i&&i<=r.to)!==void 0}})}function yi(n){const e=n.quantifier;return e&&e.atLeast===0?!0:n.value?(0,ke.Z)(n.value)?tt(n.value,yi):yi(n.value):!1}class Dd extends ir{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){Le(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?Fa(e,this.targetCharCodes)===void 0&&(this.found=!0):Fa(e,this.targetCharCodes)!==void 0&&(this.found=!0)}}function Ti(n,e){if(e instanceof RegExp){const t=pr(e),r=new Dd(n);return r.visit(t),r.found}else return(0,on.Z)(e,t=>Le(n,t.charCodeAt(0)))!==void 0}const jt="PATTERN",xn="defaultMode",yr="modes";let Tr=typeof new RegExp("(?:)").sticky=="boolean";function yg(){Tr=!1}function Tg(){Tr=!0}function Zd(n,e){e=(0,pi.Z)(e,{useSticky:Tr,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(x,_)=>_()});const t=e.tracer;t("initCharCodeToOptimizedIndexMap",()=>{cf()});let r;t("Reject Lexer.NA",()=>{r=dr(n,x=>x[jt]===Ue.NA)});let i=!1,s;t("Transform Patterns",()=>{i=!1,s=(0,$.Z)(r,x=>{const _=x[jt];if(mt(_)){const X=_.source;return X.length===1&&X!=="^"&&X!=="$"&&X!=="."&&!_.ignoreCase?X:X.length===2&&X[0]==="\\"&&!Le(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],X[1])?X[1]:e.useSticky?Ga(_):Ua(_)}else{if((0,Wt.Z)(_))return i=!0,{exec:_};if(typeof _=="object")return i=!0,_;if(typeof _=="string"){if(_.length===1)return _;{const X=_.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),J=new RegExp(X);return e.useSticky?Ga(J):Ua(J)}}else throw Error("non exhaustive match")}})});let a,o,c,l,u;t("misc mapping",()=>{a=(0,$.Z)(r,x=>x.tokenTypeIdx),o=(0,$.Z)(r,x=>{const _=x.GROUP;if(_!==Ue.SKIPPED){if((0,Me.Z)(_))return _;if((0,gt.Z)(_))return!1;throw Error("non exhaustive match")}}),c=(0,$.Z)(r,x=>{const _=x.LONGER_ALT;if(_)return(0,ke.Z)(_)?(0,$.Z)(_,J=>$a(r,J)):[$a(r,_)]}),l=(0,$.Z)(r,x=>x.PUSH_MODE),u=(0,$.Z)(r,x=>(0,F.Z)(x,"POP_MODE"))});let d;t("Line Terminator Handling",()=>{const x=ja(e.lineTerminatorCharacters);d=(0,$.Z)(r,_=>!1),e.positionTracking!=="onlyOffset"&&(d=(0,$.Z)(r,_=>(0,F.Z)(_,"LINE_BREAKS")?!!_.LINE_BREAKS:Wa(_,x)===!1&&Ti(x,_.PATTERN)))});let h,f,y,T;t("Misc Mapping #2",()=>{h=(0,$.Z)(r,Ba),f=(0,$.Z)(s,sf),y=(0,we.Z)(r,(x,_)=>{const X=_.GROUP;return(0,Me.Z)(X)&&X!==Ue.SKIPPED&&(x[X]=[]),x},{}),T=(0,$.Z)(s,(x,_)=>({pattern:s[_],longerAlt:c[_],canLineTerminator:d[_],isCustom:h[_],short:f[_],group:o[_],push:l[_],pop:u[_],tokenTypeIdx:a[_],tokenType:r[_]}))});let w=!0,C=[];return e.safeMode||t("First Char Optimization",()=>{C=(0,we.Z)(r,(x,_,X)=>{if(typeof _.PATTERN=="string"){const J=_.PATTERN.charCodeAt(0),Ee=_t(J);Ei(x,Ee,T[X])}else if((0,ke.Z)(_.START_CHARS_HINT)){let J;(0,D.Z)(_.START_CHARS_HINT,Ee=>{const yn=typeof Ee=="string"?Ee.charCodeAt(0):Ee,Ce=_t(yn);J!==Ce&&(J=Ce,Ei(x,Ce,T[X]))})}else if(mt(_.PATTERN))if(_.PATTERN.unicode)w=!1,e.ensureOptimizations&&mi(`${mr}	Unable to analyze < ${_.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{const J=bd(_.PATTERN,e.ensureOptimizations);(0,se.Z)(J)&&(w=!1),(0,D.Z)(J,Ee=>{Ei(x,Ee,T[X])})}else e.ensureOptimizations&&mi(`${mr}	TokenType: <${_.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),w=!1;return x},[])}),{emptyGroups:y,patternIdxToConfig:T,charCodeToPatternIdxToConfig:C,hasCustom:i,canBeOptimized:w}}function Fd(n,e){let t=[];const r=Gd(n);t=t.concat(r.errors);const i=Bd(r.valid),s=i.valid;return t=t.concat(i.errors),t=t.concat(Ud(s)),t=t.concat(Xd(s)),t=t.concat(Jd(s,e)),t=t.concat(Qd(s)),t}function Ud(n){let e=[];const t=(0,He.Z)(n,r=>mt(r[jt]));return e=e.concat(jd(t)),e=e.concat(Hd(t)),e=e.concat(zd(t)),e=e.concat(Yd(t)),e=e.concat(Kd(t)),e}function Gd(n){const e=(0,He.Z)(n,i=>!(0,F.Z)(i,jt)),t=(0,$.Z)(e,i=>({message:"Token Type: ->"+i.name+"<- missing static 'PATTERN' property",type:he.MISSING_PATTERN,tokenTypes:[i]})),r=fr(n,e);return{errors:t,valid:r}}function Bd(n){const e=(0,He.Z)(n,i=>{const s=i[jt];return!mt(s)&&!(0,Wt.Z)(s)&&!(0,F.Z)(s,"exec")&&!(0,Me.Z)(s)}),t=(0,$.Z)(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:he.INVALID_PATTERN,tokenTypes:[i]})),r=fr(n,e);return{errors:t,valid:r}}const Wd=/[^\\][$]/;function jd(n){class e extends ir{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}const t=(0,He.Z)(n,i=>{const s=i.PATTERN;try{const a=pr(s),o=new e;return o.visit(a),o.found}catch(a){return Wd.test(s.source)}});return(0,$.Z)(t,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:he.EOI_ANCHOR_FOUND,tokenTypes:[i]}))}function Kd(n){const e=(0,He.Z)(n,r=>r.PATTERN.test(""));return(0,$.Z)(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' must not match an empty string",type:he.EMPTY_MATCH_PATTERN,tokenTypes:[r]}))}const Vd=/[^\\[][\^]|^\^/;function Hd(n){class e extends ir{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}const t=(0,He.Z)(n,i=>{const s=i.PATTERN;try{const a=pr(s),o=new e;return o.visit(a),o.found}catch(a){return Vd.test(s.source)}});return(0,$.Z)(t,i=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+i.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:he.SOI_ANCHOR_FOUND,tokenTypes:[i]}))}function zd(n){const e=(0,He.Z)(n,r=>{const i=r[jt];return i instanceof RegExp&&(i.multiline||i.global)});return(0,$.Z)(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:he.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[r]}))}function Yd(n){const e=[];let t=(0,$.Z)(n,s=>(0,we.Z)(n,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!Le(e,o)&&o.PATTERN!==Ue.NA&&(e.push(o),a.push(o)),a),[]));t=Nn(t);const r=(0,He.Z)(t,s=>s.length>1);return(0,$.Z)(r,s=>{const a=(0,$.Z)(s,c=>c.name);return{message:`The same RegExp pattern ->${nt(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:he.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function Xd(n){const e=(0,He.Z)(n,r=>{if(!(0,F.Z)(r,"GROUP"))return!1;const i=r.GROUP;return i!==Ue.SKIPPED&&i!==Ue.NA&&!(0,Me.Z)(i)});return(0,$.Z)(e,r=>({message:"Token Type: ->"+r.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:he.INVALID_GROUP_TYPE_FOUND,tokenTypes:[r]}))}function Jd(n,e){const t=(0,He.Z)(n,i=>i.PUSH_MODE!==void 0&&!Le(e,i.PUSH_MODE));return(0,$.Z)(t,i=>({message:`Token Type: ->${i.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${i.PUSH_MODE}<-which does not exist`,type:he.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[i]}))}function Qd(n){const e=[],t=(0,we.Z)(n,(r,i,s)=>{const a=i.PATTERN;return a===Ue.NA||((0,Me.Z)(a)?r.push({str:a,idx:s,tokenType:i}):mt(a)&&ef(a)&&r.push({str:a.source,idx:s,tokenType:i})),r},[]);return(0,D.Z)(n,(r,i)=>{(0,D.Z)(t,({str:s,idx:a,tokenType:o})=>{if(i<a&&qd(s,r.PATTERN)){const c=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${r.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:he.UNREACHABLE_PATTERN,tokenTypes:[r,o]})}})}),e}function qd(n,e){if(mt(e)){const t=e.exec(n);return t!==null&&t.index===0}else{if((0,Wt.Z)(e))return e(n,0,[],{});if((0,F.Z)(e,"exec"))return e.exec(n,0,[],{});if(typeof e=="string")return e===n;throw Error("non exhaustive match")}}function ef(n){const e=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return(0,on.Z)(e,t=>n.source.indexOf(t)!==-1)===void 0}function Ua(n){const e=n.ignoreCase?"i":"";return new RegExp(`^(?:${n.source})`,e)}function Ga(n){const e=n.ignoreCase?"iy":"y";return new RegExp(`${n.source}`,e)}function tf(n,e,t){const r=[];return(0,F.Z)(n,xn)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+xn+`> property in its definition
`,type:he.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,F.Z)(n,yr)||r.push({message:"A MultiMode Lexer cannot be initialized without a <"+yr+`> property in its definition
`,type:he.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,F.Z)(n,yr)&&(0,F.Z)(n,xn)&&!(0,F.Z)(n.modes,n.defaultMode)&&r.push({message:`A MultiMode Lexer cannot be initialized with a ${xn}: <${n.defaultMode}>which does not exist
`,type:he.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,F.Z)(n,yr)&&(0,D.Z)(n.modes,(i,s)=>{(0,D.Z)(i,(a,o)=>{if((0,gt.Z)(a))r.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:he.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if((0,F.Z)(a,"LONGER_ALT")){const c=(0,ke.Z)(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];(0,D.Z)(c,l=>{!(0,gt.Z)(l)&&!Le(i,l)&&r.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${a.name}> outside of mode <${s}>
`,type:he.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),r}function nf(n,e,t){const r=[];let i=!1;const s=Nn((0,Je.Z)((0,me.Z)(n.modes))),a=dr(s,c=>c[jt]===Ue.NA),o=ja(t);return e&&(0,D.Z)(a,c=>{const l=Wa(c,o);if(l!==!1){const d={message:of(c,l),type:l.issue,tokenType:c};r.push(d)}else(0,F.Z)(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(i=!0):Ti(o,c.PATTERN)&&(i=!0)}),e&&!i&&r.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:he.NO_LINE_BREAKS_FLAGS}),r}function rf(n){const e={},t=(0,rn.Z)(n);return(0,D.Z)(t,r=>{const i=n[r];if((0,ke.Z)(i))e[r]=[];else throw Error("non exhaustive match")}),e}function Ba(n){const e=n.PATTERN;if(mt(e))return!1;if((0,Wt.Z)(e))return!0;if((0,F.Z)(e,"exec"))return!0;if((0,Me.Z)(e))return!1;throw Error("non exhaustive match")}function sf(n){return(0,Me.Z)(n)&&n.length===1?n.charCodeAt(0):!1}const af={test:function(n){const e=n.length;for(let t=this.lastIndex;t<e;t++){const r=n.charCodeAt(t);if(r===10)return this.lastIndex=t+1,!0;if(r===13)return n.charCodeAt(t+1)===10?this.lastIndex=t+2:this.lastIndex=t+1,!0}return!1},lastIndex:0};function Wa(n,e){if((0,F.Z)(n,"LINE_BREAKS"))return!1;if(mt(n.PATTERN)){try{Ti(e,n.PATTERN)}catch(t){return{issue:he.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}else{if((0,Me.Z)(n.PATTERN))return!1;if(Ba(n))return{issue:he.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function of(n,e){if(e.issue===he.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${n.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===he.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${n.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function ja(n){return(0,$.Z)(n,t=>(0,Me.Z)(t)?t.charCodeAt(0):t)}function Ei(n,e,t){n[e]===void 0?n[e]=[t]:n[e].push(t)}const Ln=256;let Er=[];function _t(n){return n<Ln?n:Er[n]}function cf(){if((0,se.Z)(Er)){Er=new Array(65536);for(let n=0;n<65536;n++)Er[n]=n>255?255+~~(n/255):n}}var Ka=p(76402),ge=p(55883),cn=p(82593);function Va(n){const e=new Date().getTime(),t=n();return{time:new Date().getTime()-e,value:t}}function wn(n,e){const t=n.tokenTypeIdx;return t===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[t]===!0}function vr(n,e){return n.tokenTypeIdx===e.tokenTypeIdx}let Ha=1;const za={};function On(n){const e=lf(n);uf(e),ff(e),df(e),(0,D.Z)(e,t=>{t.isParent=t.categoryMatches.length>0})}function lf(n){let e=(0,ve.Z)(n),t=n,r=!0;for(;r;){t=Nn((0,Je.Z)((0,$.Z)(t,s=>s.CATEGORIES)));const i=fr(t,e);e=e.concat(i),(0,se.Z)(i)?r=!1:t=i}return e}function uf(n){(0,D.Z)(n,e=>{Xa(e)||(za[Ha]=e,e.tokenTypeIdx=Ha++),Ja(e)&&!(0,ke.Z)(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Ja(e)||(e.CATEGORIES=[]),hf(e)||(e.categoryMatches=[]),pf(e)||(e.categoryMatchesMap={})})}function df(n){(0,D.Z)(n,e=>{e.categoryMatches=[],(0,D.Z)(e.categoryMatchesMap,(t,r)=>{e.categoryMatches.push(za[r].tokenTypeIdx)})})}function ff(n){(0,D.Z)(n,e=>{Ya([],e)})}function Ya(n,e){(0,D.Z)(n,t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0}),(0,D.Z)(e.CATEGORIES,t=>{const r=n.concat(e);Le(r,t)||Ya(r,t)})}function Xa(n){return(0,F.Z)(n,"tokenTypeIdx")}function Ja(n){return(0,F.Z)(n,"CATEGORIES")}function hf(n){return(0,F.Z)(n,"categoryMatches")}function pf(n){return(0,F.Z)(n,"categoryMatchesMap")}function mf(n){return(0,F.Z)(n,"tokenTypeIdx")}const gf={buildUnableToPopLexerModeMessage(n){return`Unable to pop Lexer Mode after encountering Token ->${n.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(n,e,t,r,i){return`unexpected character: ->${n.charAt(e)}<- at offset: ${e}, skipped ${t} characters.`}};var he;(function(n){n[n.MISSING_PATTERN=0]="MISSING_PATTERN",n[n.INVALID_PATTERN=1]="INVALID_PATTERN",n[n.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",n[n.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",n[n.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",n[n.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",n[n.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",n[n.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",n[n.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",n[n.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",n[n.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",n[n.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",n[n.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",n[n.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",n[n.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",n[n.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",n[n.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",n[n.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(he||(he={}));const Pn={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:gf,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Pn);class Ue{constructor(e,t=Pn){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(i,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;const a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${i}>`);const{time:o,value:c}=Va(s),l=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${a}<-- <${i}> time: ${o}ms`),this.traceInitIndent--,c}else return s()},typeof t=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=je({},Pn,t);const r=this.config.traceInitPerf;r===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof r=="number"&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let i,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Pn.lineTerminatorsPattern)this.config.lineTerminatorsPattern=af;else if(this.config.lineTerminatorCharacters===Pn.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),(0,ke.Z)(e)?i={modes:{defaultMode:(0,ve.Z)(e)},defaultMode:xn}:(s=!1,i=(0,ve.Z)(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(tf(i,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(nf(i,this.trackStartLines,this.config.lineTerminatorCharacters))})),i.modes=i.modes?i.modes:{},(0,D.Z)(i.modes,(o,c)=>{i.modes[c]=dr(o,l=>(0,gt.Z)(l))});const a=(0,rn.Z)(i.modes);if((0,D.Z)(i.modes,(o,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Fd(o,a))}),(0,se.Z)(this.lexerDefinitionErrors)){On(o);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=Zd(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=l.charCodeToPatternIdxToConfig,this.emptyGroups=je({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=l.canBeOptimized}})}),this.defaultMode=i.defaultMode,!(0,se.Z)(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){const c=(0,$.Z)(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}(0,D.Z)(this.lexerDefinitionWarning,o=>{Da(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Tr?(this.chopInput=Ka.Z,this.match=this.matchWithTest):(this.updateLastIndex=ge.Z,this.match=this.matchWithExec),s&&(this.handleModes=ge.Z),this.trackStartLines===!1&&(this.computeNewColumn=Ka.Z),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=ge.Z),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{const o=(0,we.Z)(this.canModeBeOptimized,(c,l,u)=>(l===!1&&c.push(u),c),[]);if(t.ensureOptimizations&&!(0,se.Z)(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{$d()}),this.TRACE_INIT("toFastProperties",()=>{Ra(this)})})}tokenize(e,t=this.defaultMode){if(!(0,se.Z)(this.lexerDefinitionErrors)){const i=(0,$.Z)(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+i)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let r,i,s,a,o,c,l,u,d,h,f,y,T,w,C,x;const _=e,X=_.length;let J=0,Ee=0;const yn=this.hasCustom?0:Math.floor(e.length/10),Ce=new Array(yn),Pt=[];let vt=this.trackStartLines?1:void 0,L=this.trackStartLines?1:void 0;const v=rf(this.emptyGroups),P=this.trackStartLines,M=this.config.lineTerminatorsPattern;let ee=0,V=[],K=[];const Pe=[],$e=[];Object.freeze($e);let oe;function zt(){return V}function Zl(Se){const Qe=_t(Se),Tn=K[Qe];return Tn===void 0?$e:Tn}const Qm=Se=>{if(Pe.length===1&&Se.tokenType.PUSH_MODE===void 0){const Qe=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(Se);Pt.push({offset:Se.startOffset,line:Se.startLine,column:Se.startColumn,length:Se.image.length,message:Qe})}else{Pe.pop();const Qe=(0,cn.Z)(Pe);V=this.patternIdxToConfig[Qe],K=this.charCodeToPatternIdxToConfig[Qe],ee=V.length;const Tn=this.canModeBeOptimized[Qe]&&this.config.safeMode===!1;K&&Tn?oe=Zl:oe=zt}};function Fl(Se){Pe.push(Se),K=this.charCodeToPatternIdxToConfig[Se],V=this.patternIdxToConfig[Se],ee=V.length,ee=V.length;const Qe=this.canModeBeOptimized[Se]&&this.config.safeMode===!1;K&&Qe?oe=Zl:oe=zt}Fl.call(this,t);let it;const Ul=this.config.recoveryEnabled;for(;J<X;){c=null;const Se=_.charCodeAt(J),Qe=oe(Se),Tn=Qe.length;for(r=0;r<Tn;r++){it=Qe[r];const Ye=it.pattern;l=null;const At=it.short;if(At!==!1?Se===At&&(c=Ye):it.isCustom===!0?(x=Ye.exec(_,J,Ce,v),x!==null?(c=x[0],x.payload!==void 0&&(l=x.payload)):c=null):(this.updateLastIndex(Ye,J),c=this.match(Ye,e,J)),c!==null){if(o=it.longerAlt,o!==void 0){const $t=o.length;for(s=0;s<$t;s++){const Rt=V[o[s]],Yt=Rt.pattern;if(u=null,Rt.isCustom===!0?(x=Yt.exec(_,J,Ce,v),x!==null?(a=x[0],x.payload!==void 0&&(u=x.payload)):a=null):(this.updateLastIndex(Yt,J),a=this.match(Yt,e,J)),a&&a.length>c.length){c=a,l=u,it=Rt;break}}}break}}if(c!==null){if(d=c.length,h=it.group,h!==void 0&&(f=it.tokenTypeIdx,y=this.createTokenInstance(c,J,f,it.tokenType,vt,L,d),this.handlePayload(y,l),h===!1?Ee=this.addToken(Ce,Ee,y):v[h].push(y)),e=this.chopInput(e,d),J=J+d,L=this.computeNewColumn(L,d),P===!0&&it.canLineTerminator===!0){let Ye=0,At,$t;M.lastIndex=0;do At=M.test(c),At===!0&&($t=M.lastIndex-1,Ye++);while(At===!0);Ye!==0&&(vt=vt+Ye,L=d-$t,this.updateTokenEndLineColumnLocation(y,h,$t,Ye,vt,L,d))}this.handleModes(it,Qm,Fl,y)}else{const Ye=J,At=vt,$t=L;let Rt=Ul===!1;for(;Rt===!1&&J<X;)for(e=this.chopInput(e,1),J++,i=0;i<ee;i++){const Yt=V[i],ps=Yt.pattern,Gl=Yt.short;if(Gl!==!1?_.charCodeAt(J)===Gl&&(Rt=!0):Yt.isCustom===!0?Rt=ps.exec(_,J,Ce,v)!==null:(this.updateLastIndex(ps,J),Rt=ps.exec(e)!==null),Rt===!0)break}if(T=J-Ye,L=this.computeNewColumn(L,T),C=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(_,Ye,T,At,$t),Pt.push({offset:Ye,line:At,column:$t,length:T,message:C}),Ul===!1)break}}return this.hasCustom||(Ce.length=Ee),{tokens:Ce,groups:v,errors:Pt}}handleModes(e,t,r,i){if(e.pop===!0){const s=e.push;t(i),s!==void 0&&r.call(this,s)}else e.push!==void 0&&r.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,r,i,s,a,o){let c,l;t!==void 0&&(c=r===o-1,l=c?-1:0,i===1&&c===!0||(e.endLine=s+l,e.endColumn=a-1+-l))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,r,i){return{image:e,startOffset:t,tokenTypeIdx:r,tokenType:i}}createStartOnlyToken(e,t,r,i,s,a){return{image:e,startOffset:t,startLine:s,startColumn:a,tokenTypeIdx:r,tokenType:i}}createFullToken(e,t,r,i,s,a,o){return{image:e,startOffset:t,endOffset:t+o-1,startLine:s,endLine:s,startColumn:a,endColumn:a+o-1,tokenTypeIdx:r,tokenType:i}}addTokenUsingPush(e,t,r){return e.push(r),t}addTokenUsingMemberAccess(e,t,r){return e[t]=r,t++,t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,r){return e.test(t)===!0?t.substring(r,e.lastIndex):null}matchWithExec(e,t){const r=e.exec(t);return r!==null?r[0]:null}}Ue.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",Ue.NA=/NOT_APPLICABLE/;function ln(n){return Qa(n)?n.LABEL:n.name}function Eg(n){return n.name}function Qa(n){return(0,Me.Z)(n.LABEL)&&n.LABEL!==""}const yf="parent",qa="categories",eo="label",to="group",no="push_mode",ro="pop_mode",io="longer_alt",so="line_breaks",ao="start_chars_hint";function oo(n){return Tf(n)}function Tf(n){const e=n.pattern,t={};if(t.name=n.name,(0,gt.Z)(e)||(t.PATTERN=e),(0,F.Z)(n,yf))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return(0,F.Z)(n,qa)&&(t.CATEGORIES=n[qa]),On([t]),(0,F.Z)(n,eo)&&(t.LABEL=n[eo]),(0,F.Z)(n,to)&&(t.GROUP=n[to]),(0,F.Z)(n,ro)&&(t.POP_MODE=n[ro]),(0,F.Z)(n,no)&&(t.PUSH_MODE=n[no]),(0,F.Z)(n,io)&&(t.LONGER_ALT=n[io]),(0,F.Z)(n,so)&&(t.LINE_BREAKS=n[so]),(0,F.Z)(n,ao)&&(t.START_CHARS_HINT=n[ao]),t}const Ct=oo({name:"EOF",pattern:Ue.NA});On([Ct]);function vi(n,e,t,r,i,s,a,o){return{image:e,startOffset:t,endOffset:r,startLine:i,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:n.tokenTypeIdx,tokenType:n}}function co(n,e){return wn(n,e)}const un={buildMismatchTokenMessage({expected:n,actual:e,previous:t,ruleName:r}){return`Expecting ${Qa(n)?`--> ${ln(n)} <--`:`token of type --> ${n.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:n,ruleName:e}){return"Redundant input, expecting EOF but found: "+n.image},buildNoViableAltMessage({expectedPathsPerAlt:n,actual:e,previous:t,customUserDescription:r,ruleName:i}){const s="Expecting: ",o=`
but found: '`+nt(e).image+"'";if(r)return s+r+o;{const c=(0,we.Z)(n,(h,f)=>h.concat(f),[]),l=(0,$.Z)(c,h=>`[${(0,$.Z)(h,f=>ln(f)).join(", ")}]`),d=`one of these possible Token sequences:
${(0,$.Z)(l,(h,f)=>`  ${f+1}. ${h}`).join(`
`)}`;return s+d+o}},buildEarlyExitMessage({expectedIterationPaths:n,actual:e,customUserDescription:t,ruleName:r}){const i="Expecting: ",a=`
but found: '`+nt(e).image+"'";if(t)return i+t+a;{const c=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${(0,$.Z)(n,l=>`[${(0,$.Z)(l,u=>ln(u)).join(",")}]`).join(" ,")}>`;return i+c+a}}};Object.freeze(un);const Ef={buildRuleNotFoundError(n,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+n.name+"<-"}},Kt={buildDuplicateFoundError(n,e){function t(u){return u instanceof ae?u.terminalType.name:u instanceof xe?u.nonTerminalName:""}const r=n.name,i=nt(e),s=i.idx,a=lt(i),o=t(i),c=s>0;let l=`->${a}${c?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${r}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(n){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${n.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(n){const e=(0,$.Z)(n.prefixPath,i=>ln(i)).join(", "),t=n.alternation.idx===0?"":n.alternation.idx;return`Ambiguous alternatives: <${n.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(n){const e=(0,$.Z)(n.prefixPath,i=>ln(i)).join(", "),t=n.alternation.idx===0?"":n.alternation.idx;let r=`Ambiguous Alternatives Detected: <${n.ambiguityIndices.join(" ,")}> in <OR${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r},buildEmptyRepetitionError(n){let e=lt(n.repetition);return n.repetition.idx!==0&&(e+=n.repetition.idx),`The repetition <${e}> within Rule <${n.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(n){return"deprecated"},buildEmptyAlternationError(n){return`Ambiguous empty alternative: <${n.emptyChoiceIdx+1}> in <OR${n.alternation.idx}> inside <${n.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(n){return`An Alternation cannot have more than 256 alternatives:
<OR${n.alternation.idx}> inside <${n.topLevelRule.name}> Rule.
 has ${n.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(n){const e=n.topLevelRule.name,t=(0,$.Z)(n.leftRecursionPath,s=>s.name),r=`${e} --> ${t.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${r}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(n){return"deprecated"},buildDuplicateRuleNameError(n){let e;return n.topLevelRule instanceof an?e=n.topLevelRule.name:e=n.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${n.grammarName}<-`}};class dn{visit(e){const t=e;switch(t.constructor){case xe:return this.visitNonTerminal(t);case De:return this.visitAlternative(t);case Re:return this.visitOption(t);case Ke:return this.visitRepetitionMandatory(t);case Ve:return this.visitRepetitionMandatoryWithSeparator(t);case Ze:return this.visitRepetitionWithSeparator(t);case fe:return this.visitRepetition(t);case Fe:return this.visitAlternation(t);case ae:return this.visitTerminal(t);case an:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function vf(n,e){const t=new Af(n,e);return t.resolveRefs(),t.errors}class Af extends dn{constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){(0,D.Z)((0,me.Z)(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{const r=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:r,type:Oe.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}}function Rf(n,e){return(0,ba.Z)((0,$.Z)(n,e),1)}var ze=Rf,If=p(857);function kf(n,e,t,r){for(var i=-1,s=n==null?0:n.length;++i<s;){var a=n[i];e(r,a,t(a),n)}return r}var _f=kf;function Cf(n,e,t,r){return(0,hi.Z)(n,function(i,s,a){e(r,i,t(i),a)}),r}var Sf=Cf;function Nf(n,e){return function(t,r){var i=(0,ke.Z)(t)?_f:Sf,s=e?e():{};return i(t,n,(0,sn.Z)(r,2),s)}}var xf=Nf,Lf=Object.prototype,wf=Lf.hasOwnProperty,Of=xf(function(n,e,t){wf.call(n,t)?n[t].push(e):(0,If.Z)(n,t,[e])}),Pf=Of;function $f(n,e,t){var r=n==null?0:n.length;return r?(e=t||e===void 0?1:(0,or.Z)(e),e=r-e,(0,Ia.Z)(n,0,e<0?0:e)):[]}var $n=$f;class bf extends lr{constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,ve.Z)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,ve.Z)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){const i=t.concat(r);this.updateExpectedNext(),this.walk(e.referencedRule,i)}}updateExpectedNext(){(0,se.Z)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}}class Mf extends bf{constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){const i=t.concat(r),s=new De({definition:i});this.possibleTokTypes=Sn(s),this.found=!0}}}class Ar extends lr{constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}}class Df extends Ar{walkMany(e,t,r){if(e.idx===this.occurrence){const i=nt(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof ae&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkMany(e,t,r)}}class lo extends Ar{walkManySep(e,t,r){if(e.idx===this.occurrence){const i=nt(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof ae&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkManySep(e,t,r)}}class Zf extends Ar{walkAtLeastOne(e,t,r){if(e.idx===this.occurrence){const i=nt(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof ae&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOne(e,t,r)}}class uo extends Ar{walkAtLeastOneSep(e,t,r){if(e.idx===this.occurrence){const i=nt(t.concat(r));this.result.isEndOfRule=i===void 0,i instanceof ae&&(this.result.token=i.terminalType,this.result.occurrence=i.idx)}else super.walkAtLeastOneSep(e,t,r)}}function Ai(n,e,t=[]){t=(0,ve.Z)(t);let r=[],i=0;function s(o){return o.concat(Ae(n,i+1))}function a(o){const c=Ai(s(o),e,t);return r.concat(c)}for(;t.length<e&&i<n.length;){const o=n[i];if(o instanceof De)return a(o.definition);if(o instanceof xe)return a(o.definition);if(o instanceof Re)r=a(o.definition);else if(o instanceof Ke){const c=o.definition.concat([new fe({definition:o.definition})]);return a(c)}else if(o instanceof Ve){const c=[new De({definition:o.definition}),new fe({definition:[new ae({terminalType:o.separator})].concat(o.definition)})];return a(c)}else if(o instanceof Ze){const c=o.definition.concat([new fe({definition:[new ae({terminalType:o.separator})].concat(o.definition)})]);r=a(c)}else if(o instanceof fe){const c=o.definition.concat([new fe({definition:o.definition})]);r=a(c)}else{if(o instanceof Fe)return(0,D.Z)(o.definition,c=>{(0,se.Z)(c.definition)===!1&&(r=a(c.definition))}),r;if(o instanceof ae)t.push(o.terminalType);else throw Error("non exhaustive match")}i++}return r.push({partialPath:t,suffixDef:Ae(n,i)}),r}function fo(n,e,t,r){const i="EXIT_NONE_TERMINAL",s=[i],a="EXIT_ALTERNATIVE";let o=!1;const c=e.length,l=c-r-1,u=[],d=[];for(d.push({idx:-1,def:n,ruleStack:[],occurrenceStack:[]});!(0,se.Z)(d);){const h=d.pop();if(h===a){o&&(0,cn.Z)(d).idx<=l&&d.pop();continue}const f=h.def,y=h.idx,T=h.ruleStack,w=h.occurrenceStack;if((0,se.Z)(f))continue;const C=f[0];if(C===i){const x={idx:y,def:Ae(f),ruleStack:$n(T),occurrenceStack:$n(w)};d.push(x)}else if(C instanceof ae)if(y<c-1){const x=y+1,_=e[x];if(t(_,C.terminalType)){const X={idx:x,def:Ae(f),ruleStack:T,occurrenceStack:w};d.push(X)}}else if(y===c-1)u.push({nextTokenType:C.terminalType,nextTokenOccurrence:C.idx,ruleStack:T,occurrenceStack:w}),o=!0;else throw Error("non exhaustive match");else if(C instanceof xe){const x=(0,ve.Z)(T);x.push(C.nonTerminalName);const _=(0,ve.Z)(w);_.push(C.idx);const X={idx:y,def:C.definition.concat(s,Ae(f)),ruleStack:x,occurrenceStack:_};d.push(X)}else if(C instanceof Re){const x={idx:y,def:Ae(f),ruleStack:T,occurrenceStack:w};d.push(x),d.push(a);const _={idx:y,def:C.definition.concat(Ae(f)),ruleStack:T,occurrenceStack:w};d.push(_)}else if(C instanceof Ke){const x=new fe({definition:C.definition,idx:C.idx}),_=C.definition.concat([x],Ae(f)),X={idx:y,def:_,ruleStack:T,occurrenceStack:w};d.push(X)}else if(C instanceof Ve){const x=new ae({terminalType:C.separator}),_=new fe({definition:[x].concat(C.definition),idx:C.idx}),X=C.definition.concat([_],Ae(f)),J={idx:y,def:X,ruleStack:T,occurrenceStack:w};d.push(J)}else if(C instanceof Ze){const x={idx:y,def:Ae(f),ruleStack:T,occurrenceStack:w};d.push(x),d.push(a);const _=new ae({terminalType:C.separator}),X=new fe({definition:[_].concat(C.definition),idx:C.idx}),J=C.definition.concat([X],Ae(f)),Ee={idx:y,def:J,ruleStack:T,occurrenceStack:w};d.push(Ee)}else if(C instanceof fe){const x={idx:y,def:Ae(f),ruleStack:T,occurrenceStack:w};d.push(x),d.push(a);const _=new fe({definition:C.definition,idx:C.idx}),X=C.definition.concat([_],Ae(f)),J={idx:y,def:X,ruleStack:T,occurrenceStack:w};d.push(J)}else if(C instanceof Fe)for(let x=C.definition.length-1;x>=0;x--){const _=C.definition[x],X={idx:y,def:_.definition.concat(Ae(f)),ruleStack:T,occurrenceStack:w};d.push(X),d.push(a)}else if(C instanceof De)d.push({idx:y,def:C.definition.concat(Ae(f)),ruleStack:T,occurrenceStack:w});else if(C instanceof an)d.push(Ff(C,y,T,w));else throw Error("non exhaustive match")}return u}function Ff(n,e,t,r){const i=(0,ve.Z)(t);i.push(n.name);const s=(0,ve.Z)(r);return s.push(1),{idx:e,def:n.definition,ruleStack:i,occurrenceStack:s}}var ue;(function(n){n[n.OPTION=0]="OPTION",n[n.REPETITION=1]="REPETITION",n[n.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",n[n.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",n[n.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",n[n.ALTERNATION=5]="ALTERNATION"})(ue||(ue={}));function Ri(n){if(n instanceof Re||n==="Option")return ue.OPTION;if(n instanceof fe||n==="Repetition")return ue.REPETITION;if(n instanceof Ke||n==="RepetitionMandatory")return ue.REPETITION_MANDATORY;if(n instanceof Ve||n==="RepetitionMandatoryWithSeparator")return ue.REPETITION_MANDATORY_WITH_SEPARATOR;if(n instanceof Ze||n==="RepetitionWithSeparator")return ue.REPETITION_WITH_SEPARATOR;if(n instanceof Fe||n==="Alternation")return ue.ALTERNATION;throw Error("non exhaustive match")}function ho(n){const{occurrence:e,rule:t,prodType:r,maxLookahead:i}=n,s=Ri(r);return s===ue.ALTERNATION?Rr(e,t,i):Ir(e,t,s,i)}function Uf(n,e,t,r,i,s){const a=Rr(n,e,t),o=yo(a)?vr:wn;return s(a,r,o,i)}function Gf(n,e,t,r,i,s){const a=Ir(n,e,i,t),o=yo(a)?vr:wn;return s(a[0],o,r)}function Bf(n,e,t,r){const i=n.length,s=tt(n,a=>tt(a,o=>o.length===1));if(e)return function(a){const o=(0,$.Z)(a,c=>c.GATE);for(let c=0;c<i;c++){const l=n[c],u=l.length,d=o[c];if(!(d!==void 0&&d.call(this)===!1))e:for(let h=0;h<u;h++){const f=l[h],y=f.length;for(let T=0;T<y;T++){const w=this.LA(T+1);if(t(w,f[T])===!1)continue e}return c}}};if(s&&!r){const a=(0,$.Z)(n,c=>(0,Je.Z)(c)),o=(0,we.Z)(a,(c,l,u)=>((0,D.Z)(l,d=>{(0,F.Z)(c,d.tokenTypeIdx)||(c[d.tokenTypeIdx]=u),(0,D.Z)(d.categoryMatches,h=>{(0,F.Z)(c,h)||(c[h]=u)})}),c),{});return function(){const c=this.LA(1);return o[c.tokenTypeIdx]}}else return function(){for(let a=0;a<i;a++){const o=n[a],c=o.length;e:for(let l=0;l<c;l++){const u=o[l],d=u.length;for(let h=0;h<d;h++){const f=this.LA(h+1);if(t(f,u[h])===!1)continue e}return a}}}}function Wf(n,e,t){const r=tt(n,s=>s.length===1),i=n.length;if(r&&!t){const s=(0,Je.Z)(n);if(s.length===1&&(0,se.Z)(s[0].categoryMatches)){const o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{const a=(0,we.Z)(s,(o,c,l)=>(o[c.tokenTypeIdx]=!0,(0,D.Z)(c.categoryMatches,u=>{o[u]=!0}),o),[]);return function(){const o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<i;s++){const a=n[s],o=a.length;for(let c=0;c<o;c++){const l=this.LA(c+1);if(e(l,a[c])===!1)continue e}return!0}return!1}}class jf extends lr{constructor(e,t,r){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=r}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,r,i){return e.idx===this.targetOccurrence&&this.targetProdType===t?(this.restDef=r.concat(i),!0):!1}walkOption(e,t,r){this.checkIsTarget(e,ue.OPTION,t,r)||super.walkOption(e,t,r)}walkAtLeastOne(e,t,r){this.checkIsTarget(e,ue.REPETITION_MANDATORY,t,r)||super.walkOption(e,t,r)}walkAtLeastOneSep(e,t,r){this.checkIsTarget(e,ue.REPETITION_MANDATORY_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}walkMany(e,t,r){this.checkIsTarget(e,ue.REPETITION,t,r)||super.walkOption(e,t,r)}walkManySep(e,t,r){this.checkIsTarget(e,ue.REPETITION_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}}class po extends dn{constructor(e,t,r){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=r,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,ue.OPTION)}visitRepetition(e){this.checkIsTarget(e,ue.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,ue.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,ue.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,ue.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,ue.ALTERNATION)}}function mo(n){const e=new Array(n);for(let t=0;t<n;t++)e[t]=[];return e}function Ii(n){let e=[""];for(let t=0;t<n.length;t++){const r=n[t],i=[];for(let s=0;s<e.length;s++){const a=e[s];i.push(a+"_"+r.tokenTypeIdx);for(let o=0;o<r.categoryMatches.length;o++){const c="_"+r.categoryMatches[o];i.push(a+c)}}e=i}return e}function Kf(n,e,t){for(let r=0;r<n.length;r++){if(r===t)continue;const i=n[r];for(let s=0;s<e.length;s++){const a=e[s];if(i[a]===!0)return!1}}return!0}function go(n,e){const t=(0,$.Z)(n,a=>Ai([a],1)),r=mo(t.length),i=(0,$.Z)(t,a=>{const o={};return(0,D.Z)(a,c=>{const l=Ii(c.partialPath);(0,D.Z)(l,u=>{o[u]=!0})}),o});let s=t;for(let a=1;a<=e;a++){const o=s;s=mo(o.length);for(let c=0;c<o.length;c++){const l=o[c];for(let u=0;u<l.length;u++){const d=l[u].partialPath,h=l[u].suffixDef,f=Ii(d);if(Kf(i,f,c)||(0,se.Z)(h)||d.length===e){const T=r[c];if(ki(T,d)===!1){T.push(d);for(let w=0;w<f.length;w++){const C=f[w];i[c][C]=!0}}}else{const T=Ai(h,a+1,d);s[c]=s[c].concat(T),(0,D.Z)(T,w=>{const C=Ii(w.partialPath);(0,D.Z)(C,x=>{i[c][x]=!0})})}}}}return r}function Rr(n,e,t,r){const i=new po(n,ue.ALTERNATION,r);return e.accept(i),go(i.result,t)}function Ir(n,e,t,r){const i=new po(n,t);e.accept(i);const s=i.result,o=new jf(e,n,t).startWalking(),c=new De({definition:s}),l=new De({definition:o});return go([c,l],r)}function ki(n,e){e:for(let t=0;t<n.length;t++){const r=n[t];if(r.length===e.length){for(let i=0;i<r.length;i++){const s=e[i],a=r[i];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}function Vf(n,e){return n.length<e.length&&tt(n,(t,r)=>{const i=e[r];return t===i||i.categoryMatchesMap[t.tokenTypeIdx]})}function yo(n){return tt(n,e=>tt(e,t=>tt(t,r=>(0,se.Z)(r.categoryMatches))))}function Hf(n){const e=n.lookaheadStrategy.validate({rules:n.rules,tokenTypes:n.tokenTypes,grammarName:n.grammarName});return(0,$.Z)(e,t=>Object.assign({type:Oe.CUSTOM_LOOKAHEAD_VALIDATION},t))}function zf(n,e,t,r){const i=ze(n,c=>Yf(c,t)),s=oh(n,e,t),a=ze(n,c=>rh(c,t)),o=ze(n,c=>Qf(c,n,r,t));return i.concat(s,a,o)}function Yf(n,e){const t=new Jf;n.accept(t);const r=t.allProductions,i=Pf(r,Xf),s=et(i,o=>o.length>1);return(0,$.Z)((0,me.Z)(s),o=>{const c=nt(o),l=e.buildDuplicateFoundError(n,o),u=lt(c),d={message:l,type:Oe.DUPLICATE_PRODUCTIONS,ruleName:n.name,dslName:u,occurrence:c.idx},h=To(c);return h&&(d.parameter=h),d})}function Xf(n){return`${lt(n)}_#_${n.idx}_#_${To(n)}`}function To(n){return n instanceof ae?n.terminalType.name:n instanceof xe?n.nonTerminalName:""}class Jf extends dn{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function Qf(n,e,t,r){const i=[];if((0,we.Z)(e,(a,o)=>o.name===n.name?a+1:a,0)>1){const a=r.buildDuplicateRuleNameError({topLevelRule:n,grammarName:t});i.push({message:a,type:Oe.DUPLICATE_RULE_NAME,ruleName:n.name})}return i}function qf(n,e,t){const r=[];let i;return Le(e,n)||(i=`Invalid rule override, rule: ->${n}<- cannot be overridden in the grammar: ->${t}<-as it is not defined in any of the super grammars `,r.push({message:i,type:Oe.INVALID_RULE_OVERRIDE,ruleName:n})),r}function Eo(n,e,t,r=[]){const i=[],s=kr(e.definition);if((0,se.Z)(s))return[];{const a=n.name;Le(s,n)&&i.push({message:t.buildLeftRecursionError({topLevelRule:n,leftRecursionPath:r}),type:Oe.LEFT_RECURSION,ruleName:a});const c=fr(s,r.concat([n])),l=ze(c,u=>{const d=(0,ve.Z)(r);return d.push(u),Eo(n,u,t,d)});return i.concat(l)}}function kr(n){let e=[];if((0,se.Z)(n))return e;const t=nt(n);if(t instanceof xe)e.push(t.referencedRule);else if(t instanceof De||t instanceof Re||t instanceof Ke||t instanceof Ve||t instanceof Ze||t instanceof fe)e=e.concat(kr(t.definition));else if(t instanceof Fe)e=(0,Je.Z)((0,$.Z)(t.definition,s=>kr(s.definition)));else if(!(t instanceof ae))throw Error("non exhaustive match");const r=ur(t),i=n.length>1;if(r&&i){const s=Ae(n);return e.concat(kr(s))}else return e}class _i extends dn{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function eh(n,e){const t=new _i;n.accept(t);const r=t.alternations;return ze(r,s=>{const a=$n(s.definition);return ze(a,(o,c)=>{const l=fo([o],[],wn,1);return(0,se.Z)(l)?[{message:e.buildEmptyAlternationError({topLevelRule:n,alternation:s,emptyChoiceIdx:c}),type:Oe.NONE_LAST_EMPTY_ALT,ruleName:n.name,occurrence:s.idx,alternative:c+1}]:[]})})}function th(n,e,t){const r=new _i;n.accept(r);let i=r.alternations;return i=dr(i,a=>a.ignoreAmbiguities===!0),ze(i,a=>{const o=a.idx,c=a.maxLookahead||e,l=Rr(o,n,c,a),u=sh(l,a,n,t),d=ah(l,a,n,t);return u.concat(d)})}class nh extends dn{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function rh(n,e){const t=new _i;n.accept(t);const r=t.alternations;return ze(r,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:n,alternation:s}),type:Oe.TOO_MANY_ALTS,ruleName:n.name,occurrence:s.idx}]:[])}function ih(n,e,t){const r=[];return(0,D.Z)(n,i=>{const s=new nh;i.accept(s);const a=s.allProductions;(0,D.Z)(a,o=>{const c=Ri(o),l=o.maxLookahead||e,u=o.idx,h=Ir(u,i,c,l)[0];if((0,se.Z)((0,Je.Z)(h))){const f=t.buildEmptyRepetitionError({topLevelRule:i,repetition:o});r.push({message:f,type:Oe.NO_NON_EMPTY_LOOKAHEAD,ruleName:i.name})}})}),r}function sh(n,e,t,r){const i=[],s=(0,we.Z)(n,(o,c,l)=>(e.definition[l].ignoreAmbiguities===!0||(0,D.Z)(c,u=>{const d=[l];(0,D.Z)(n,(h,f)=>{l!==f&&ki(h,u)&&e.definition[f].ignoreAmbiguities!==!0&&d.push(f)}),d.length>1&&!ki(i,u)&&(i.push(u),o.push({alts:d,path:u}))}),o),[]);return(0,$.Z)(s,o=>{const c=(0,$.Z)(o.alts,u=>u+1);return{message:r.buildAlternationAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:c,prefixPath:o.path}),type:Oe.AMBIGUOUS_ALTS,ruleName:t.name,occurrence:e.idx,alternatives:o.alts}})}function ah(n,e,t,r){const i=(0,we.Z)(n,(a,o,c)=>{const l=(0,$.Z)(o,u=>({idx:c,path:u}));return a.concat(l)},[]);return Nn(ze(i,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];const c=a.idx,l=a.path,u=(0,He.Z)(i,h=>e.definition[h.idx].ignoreAmbiguities!==!0&&h.idx<c&&Vf(h.path,l));return(0,$.Z)(u,h=>{const f=[h.idx+1,c+1],y=e.idx===0?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:f,prefixPath:h.path}),type:Oe.AMBIGUOUS_PREFIX_ALTS,ruleName:t.name,occurrence:y,alternatives:f}})}))}function oh(n,e,t){const r=[],i=(0,$.Z)(e,s=>s.name);return(0,D.Z)(n,s=>{const a=s.name;if(Le(i,a)){const o=t.buildNamespaceConflictError(s);r.push({message:o,type:Oe.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),r}function ch(n){const e=(0,pi.Z)(n,{errMsgProvider:Ef}),t={};return(0,D.Z)(n.rules,r=>{t[r.name]=r}),vf(t,e.errMsgProvider)}function lh(n){return n=(0,pi.Z)(n,{errMsgProvider:Kt}),zf(n.rules,n.tokenTypes,n.errMsgProvider,n.grammarName)}const vo="MismatchedTokenException",Ao="NoViableAltException",Ro="EarlyExitException",Io="NotAllInputParsedException",ko=[vo,Ao,Ro,Io];Object.freeze(ko);function _r(n){return Le(ko,n.name)}class Cr extends Error{constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class _o extends Cr{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=vo}}class uh extends Cr{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=Ao}}class dh extends Cr{constructor(e,t){super(e,t),this.name=Io}}class fh extends Cr{constructor(e,t,r){super(e,t),this.previousToken=r,this.name=Ro}}const Ci={},Co="InRuleRecoveryException";class hh extends Error{constructor(e){super(e),this.name=Co}}class ph{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,F.Z)(e,"recoveryEnabled")?e.recoveryEnabled:ut.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=mh)}getTokenToInsert(e){const t=vi(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,r,i){const s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[];let c=!1;const l=this.LA(1);let u=this.LA(1);const d=()=>{const h=this.LA(0),f=this.errorMessageProvider.buildMismatchTokenMessage({expected:i,actual:l,previous:h,ruleName:this.getCurrRuleFullName()}),y=new _o(f,l,this.LA(0));y.resyncedTokens=$n(o),this.SAVE_ERROR(y)};for(;!c;)if(this.tokenMatcher(u,i)){d();return}else if(r.call(this)){d(),e.apply(this,t);return}else this.tokenMatcher(u,s)?c=!0:(u=this.SKIP_TOKEN(),this.addToResyncTokens(u,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,t,r){return!(r===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){const r=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(r)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){const r=this.SKIP_TOKEN();return this.consumeToken(),r}throw new hh("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||(0,se.Z)(t))return!1;const r=this.LA(1);return(0,on.Z)(t,s=>this.tokenMatcher(r,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey(),r=this.getFollowSetFromFollowKey(t);return Le(r,e)}findReSyncTokenType(){const e=this.flattenFollowSet();let t=this.LA(1),r=2;for(;;){const i=(0,on.Z)(e,s=>co(t,s));if(i!==void 0)return i;t=this.LA(r),r++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return Ci;const e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){const e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return(0,$.Z)(e,(r,i)=>i===0?Ci:{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:t[i],inRule:this.shortRuleNameToFullName(e[i-1])})}flattenFollowSet(){const e=(0,$.Z)(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return(0,Je.Z)(e)}getFollowSetFromFollowKey(e){if(e===Ci)return[Ct];const t=e.ruleName+e.idxInCallingRule+Pa+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,Ct)||t.push(e),t}reSyncTo(e){const t=[];let r=this.LA(1);for(;this.tokenMatcher(r,e)===!1;)r=this.SKIP_TOKEN(),this.addToResyncTokens(r,t);return $n(t)}attemptInRepetitionRecovery(e,t,r,i,s,a,o){}getCurrentGrammarPath(e,t){const r=this.getHumanReadableRuleStack(),i=(0,ve.Z)(this.RULE_OCCURRENCE_STACK);return{ruleStack:r,occurrenceStack:i,lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return(0,$.Z)(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function mh(n,e,t,r,i,s,a){const o=this.getKeyForAutomaticLookahead(r,i);let c=this.firstAfterRepMap[o];if(c===void 0){const h=this.getCurrRuleFullName(),f=this.getGAstProductions()[h];c=new s(f,i).startWalking(),this.firstAfterRepMap[o]=c}let l=c.token,u=c.occurrence;const d=c.isEndOfRule;this.RULE_STACK.length===1&&d&&l===void 0&&(l=Ct,u=1),!(l===void 0||u===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,u,a)&&this.tryInRepetitionRecovery(n,e,t,l)}const gh=4,St=8,vg=12,yh=8,So=1<<St,No=2<<St,Si=3<<St,Ni=4<<St,xi=5<<St,Sr=6<<St;function Li(n,e,t){return t|e|n}const Ag=32-yh;class wi{constructor(e){var t;this.maxLookahead=(t=e==null?void 0:e.maxLookahead)!==null&&t!==void 0?t:ut.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if((0,se.Z)(t)){const r=this.validateEmptyOrAlternatives(e.rules),i=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...r,...i,...s]}return t}validateNoLeftRecursion(e){return ze(e,t=>Eo(t,t,Kt))}validateEmptyOrAlternatives(e){return ze(e,t=>eh(t,Kt))}validateAmbiguousAlternationAlternatives(e,t){return ze(e,r=>th(r,t,Kt))}validateSomeNonEmptyLookaheadPath(e,t){return ih(e,t,Kt)}buildLookaheadForAlternation(e){return Uf(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Bf)}buildLookaheadForOptional(e){return Gf(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Ri(e.prodType),Wf)}}class Th{initLooksAhead(e){this.dynamicTokensEnabled=(0,F.Z)(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:ut.dynamicTokensEnabled,this.maxLookahead=(0,F.Z)(e,"maxLookahead")?e.maxLookahead:ut.maxLookahead,this.lookaheadStrategy=(0,F.Z)(e,"lookaheadStrategy")?e.lookaheadStrategy:new wi({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){(0,D.Z)(e,t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,()=>{const{alternation:r,repetition:i,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:c}=vh(t);(0,D.Z)(r,l=>{const u=l.idx===0?"":l.idx;this.TRACE_INIT(`${lt(l)}${u}`,()=>{const d=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:t,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),h=Li(this.fullRuleNameToShort[t.name],So,l.idx);this.setLaFuncCache(h,d)})}),(0,D.Z)(i,l=>{this.computeLookaheadFunc(t,l.idx,Si,"Repetition",l.maxLookahead,lt(l))}),(0,D.Z)(s,l=>{this.computeLookaheadFunc(t,l.idx,No,"Option",l.maxLookahead,lt(l))}),(0,D.Z)(a,l=>{this.computeLookaheadFunc(t,l.idx,Ni,"RepetitionMandatory",l.maxLookahead,lt(l))}),(0,D.Z)(o,l=>{this.computeLookaheadFunc(t,l.idx,Sr,"RepetitionMandatoryWithSeparator",l.maxLookahead,lt(l))}),(0,D.Z)(c,l=>{this.computeLookaheadFunc(t,l.idx,xi,"RepetitionWithSeparator",l.maxLookahead,lt(l))})})})}computeLookaheadFunc(e,t,r,i,s,a){this.TRACE_INIT(`${a}${t===0?"":t}`,()=>{const o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:i}),c=Li(this.fullRuleNameToShort[e.name],r,t);this.setLaFuncCache(c,o)})}getKeyForAutomaticLookahead(e,t){const r=this.getLastExplicitRuleShortName();return Li(r,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}}class Eh extends dn{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const Nr=new Eh;function vh(n){Nr.reset(),n.accept(Nr);const e=Nr.dslMethods;return Nr.reset(),e}function xo(n,e){isNaN(n.startOffset)===!0?(n.startOffset=e.startOffset,n.endOffset=e.endOffset):n.endOffset<e.endOffset&&(n.endOffset=e.endOffset)}function Lo(n,e){isNaN(n.startOffset)===!0?(n.startOffset=e.startOffset,n.startColumn=e.startColumn,n.startLine=e.startLine,n.endOffset=e.endOffset,n.endColumn=e.endColumn,n.endLine=e.endLine):n.endOffset<e.endOffset&&(n.endOffset=e.endOffset,n.endColumn=e.endColumn,n.endLine=e.endLine)}function Ah(n,e,t){n.children[t]===void 0?n.children[t]=[e]:n.children[t].push(e)}function Rh(n,e,t){n.children[e]===void 0?n.children[e]=[t]:n.children[e].push(t)}const Ih="name";function wo(n,e){Object.defineProperty(n,Ih,{enumerable:!1,configurable:!0,writable:!1,value:e})}function kh(n,e){const t=(0,rn.Z)(n),r=t.length;for(let i=0;i<r;i++){const s=t[i],a=n[s],o=a.length;for(let c=0;c<o;c++){const l=a[c];l.tokenTypeIdx===void 0&&this[l.name](l.children,e)}}}function _h(n,e){const t=function(){};wo(t,n+"BaseSemantics");const r={visit:function(i,s){if((0,ke.Z)(i)&&(i=i[0]),!(0,gt.Z)(i))return this[i.name](i.children,s)},validateVisitor:function(){const i=Sh(this,e);if(!(0,se.Z)(i)){const s=(0,$.Z)(i,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return t.prototype=r,t.prototype.constructor=t,t._RULE_NAMES=e,t}function Ch(n,e,t){const r=function(){};wo(r,n+"BaseSemanticsWithDefaults");const i=Object.create(t.prototype);return(0,D.Z)(e,s=>{i[s]=kh}),r.prototype=i,r.prototype.constructor=r,r}var Oi;(function(n){n[n.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",n[n.MISSING_METHOD=1]="MISSING_METHOD"})(Oi||(Oi={}));function Sh(n,e){return Nh(n,e)}function Nh(n,e){const t=(0,He.Z)(e,i=>(0,Wt.Z)(n[i])===!1),r=(0,$.Z)(t,i=>({msg:`Missing visitor method: <${i}> on ${n.constructor.name} CST Visitor.`,type:Oi.MISSING_METHOD,methodName:i}));return Nn(r)}class xh{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=(0,F.Z)(e,"nodeLocationTracking")?e.nodeLocationTracking:ut.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=ge.Z,this.cstFinallyStateUpdate=ge.Z,this.cstPostTerminal=ge.Z,this.cstPostNonTerminal=ge.Z,this.cstPostRule=ge.Z;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Lo,this.setNodeLocationFromNode=Lo,this.cstPostRule=ge.Z,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=ge.Z,this.setNodeLocationFromNode=ge.Z,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=xo,this.setNodeLocationFromNode=xo,this.cstPostRule=ge.Z,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=ge.Z,this.setNodeLocationFromNode=ge.Z,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=ge.Z,this.setNodeLocationFromNode=ge.Z,this.cstPostRule=ge.Z,this.setInitialNodeLocation=ge.Z;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?(r.endOffset=t.endOffset,r.endLine=t.endLine,r.endColumn=t.endColumn):(r.startOffset=NaN,r.startLine=NaN,r.startColumn=NaN)}cstPostRuleOnlyOffset(e){const t=this.LA(0),r=e.location;r.startOffset<=t.startOffset?r.endOffset=t.endOffset:r.startOffset=NaN}cstPostTerminal(e,t){const r=this.CST_STACK[this.CST_STACK.length-1];Ah(r,t,e),this.setNodeLocationFromToken(r.location,t)}cstPostNonTerminal(e,t){const r=this.CST_STACK[this.CST_STACK.length-1];Rh(r,t,e),this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if((0,gt.Z)(this.baseCstVisitorConstructor)){const e=_h(this.className,(0,rn.Z)(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if((0,gt.Z)(this.baseCstVisitorWithDefaultsConstructor)){const e=Ch(this.className,(0,rn.Z)(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class Lh{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):wr}LA(e){const t=this.currIdx+e;return t<0||this.tokVectorLength<=t?wr:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class wh{ACTION(e){return e.call(this)}consume(e,t,r){return this.consumeInternal(t,e,r)}subrule(e,t,r){return this.subruleInternal(t,e,r)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,r=Or){if(Le(this.definedRulesNames,e)){const a={message:Kt.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:Oe.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);const i=this.defineRule(e,t,r);return this[e]=i,i}OVERRIDE_RULE(e,t,r=Or){const i=qf(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(i);const s=this.defineRule(e,t,r);return this[e]=s,s}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{return e.apply(this,t),!0}catch(i){if(_r(i))return!1;throw i}finally{this.reloadRecogState(r),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return zu((0,me.Z)(this.gastProductionsCache))}}var Oh=p(82433);class Ph{initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=vr,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,F.Z)(t,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if((0,ke.Z)(e)){if((0,se.Z)(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if((0,ke.Z)(e))this.tokensMap=(0,we.Z)(e,(s,a)=>(s[a.name]=a,s),{});else if((0,F.Z)(e,"modes")&&tt((0,Je.Z)((0,me.Z)(e.modes)),mf)){const s=(0,Je.Z)((0,me.Z)(e.modes)),a=(0,fi.Z)(s);this.tokensMap=(0,we.Z)(a,(o,c)=>(o[c.name]=c,o),{})}else if((0,Oh.Z)(e))this.tokensMap=(0,ve.Z)(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Ct;const r=(0,F.Z)(e,"modes")?(0,Je.Z)((0,me.Z)(e.modes)):(0,me.Z)(e),i=tt(r,s=>(0,se.Z)(s.categoryMatches));this.tokenMatcher=i?vr:wn,On((0,me.Z)(this.tokensMap))}defineRule(e,t,r){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);const i=(0,F.Z)(r,"resyncEnabled")?r.resyncEnabled:Or.resyncEnabled,s=(0,F.Z)(r,"recoveryValueFunc")?r.recoveryValueFunc:Or.recoveryValueFunc,a=this.ruleShortNameIdx<<gh+St;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...u){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),t.apply(this,u);const d=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(d),d}catch(d){return this.invokeRuleCatch(d,i,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...u){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),t.apply(this,u)}catch(d){return this.invokeRuleCatch(d,i,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,r){const i=this.RULE_STACK.length===1,s=t&&!this.isBackTracking()&&this.recoveryEnabled;if(_r(e)){const a=e;if(s){const o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return r(e);else{if(this.outputCst){const c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,a.partialCstResult=c}throw a}}else{if(i)return this.moveToTerminatedState(),r(e);throw a}}else throw e}optionInternal(e,t){const r=this.getKeyForAutomaticLookahead(No,t);return this.optionInternalLogic(e,t,r)}optionInternalLogic(e,t,r){let i=this.getLaFuncFromCache(r),s;if(typeof e!="function"){s=e.DEF;const a=e.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=e;if(i.call(this)===!0)return s.call(this)}atLeastOneInternal(e,t){const r=this.getKeyForAutomaticLookahead(Ni,e);return this.atLeastOneInternalLogic(e,t,r)}atLeastOneInternalLogic(e,t,r){let i=this.getLaFuncFromCache(r),s;if(typeof t!="function"){s=t.DEF;const a=t.GATE;if(a!==void 0){const o=i;i=()=>a.call(this)&&o.call(this)}}else s=t;if(i.call(this)===!0){let a=this.doSingleRepetition(s);for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,ue.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],i,Ni,e,Zf)}atLeastOneSepFirstInternal(e,t){const r=this.getKeyForAutomaticLookahead(Sr,e);this.atLeastOneSepFirstInternalLogic(e,t,r)}atLeastOneSepFirstInternalLogic(e,t,r){const i=t.DEF,s=t.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,uo],o,Sr,e,uo)}else throw this.raiseEarlyExitException(e,ue.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)}manyInternal(e,t){const r=this.getKeyForAutomaticLookahead(Si,e);return this.manyInternalLogic(e,t,r)}manyInternalLogic(e,t,r){let i=this.getLaFuncFromCache(r),s;if(typeof t!="function"){s=t.DEF;const o=t.GATE;if(o!==void 0){const c=i;i=()=>o.call(this)&&c.call(this)}}else s=t;let a=!0;for(;i.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],i,Si,e,Df,a)}manySepFirstInternal(e,t){const r=this.getKeyForAutomaticLookahead(xi,e);this.manySepFirstInternalLogic(e,t,r)}manySepFirstInternalLogic(e,t,r){const i=t.DEF,s=t.SEP;if(this.getLaFuncFromCache(r).call(this)===!0){i.call(this);const o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,i,lo],o,xi,e,lo)}}repetitionSepSecondInternal(e,t,r,i,s){for(;r();)this.CONSUME(t),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,r,i,s],r,Sr,e,s)}doSingleRepetition(e){const t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){const r=this.getKeyForAutomaticLookahead(So,t),i=(0,ke.Z)(e)?e:e.DEF,a=this.getLaFuncFromCache(r).call(this,i);if(a!==void 0)return i[a].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){const e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new dh(t,e))}}subruleInternal(e,t,r){let i;try{const s=r!==void 0?r.ARGS:void 0;return this.subruleIdx=t,i=e.apply(this,s),this.cstPostNonTerminal(i,r!==void 0&&r.LABEL!==void 0?r.LABEL:e.ruleName),i}catch(s){throw this.subruleInternalError(s,r,e.ruleName)}}subruleInternalError(e,t,r){throw _r(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,t!==void 0&&t.LABEL!==void 0?t.LABEL:r),delete e.partialCstResult),e}consumeInternal(e,t,r){let i;try{const s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),i=s):this.consumeInternalError(e,s,r)}catch(s){i=this.consumeInternalRecovery(e,t,s)}return this.cstPostTerminal(r!==void 0&&r.LABEL!==void 0?r.LABEL:e.name,i),i}consumeInternalError(e,t,r){let i;const s=this.LA(0);throw r!==void 0&&r.ERR_MSG?i=r.ERR_MSG:i=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new _o(i,t,s))}consumeInternalRecovery(e,t,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){const i=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,i)}catch(s){throw s.name===Co?r:s}}else throw r}saveRecogState(){const e=this.errors,t=(0,ve.Z)(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,r){this.RULE_OCCURRENCE_STACK.push(r),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Ct)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}}class $h{initErrorHandler(e){this._errors=[],this.errorMessageProvider=(0,F.Z)(e,"errorMessageProvider")?e.errorMessageProvider:ut.errorMessageProvider}SAVE_ERROR(e){if(_r(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,ve.Z)(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return(0,ve.Z)(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,r){const i=this.getCurrRuleFullName(),s=this.getGAstProductions()[i],o=Ir(e,s,t,this.maxLookahead)[0],c=[];for(let u=1;u<=this.maxLookahead;u++)c.push(this.LA(u));const l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:c,previous:this.LA(0),customUserDescription:r,ruleName:i});throw this.SAVE_ERROR(new fh(l,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const r=this.getCurrRuleFullName(),i=this.getGAstProductions()[r],s=Rr(e,i,this.maxLookahead),a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));const o=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new uh(c,this.LA(1),o))}}class bh{initContentAssist(){}computeContentAssist(e,t){const r=this.gastProductionsCache[e];if((0,gt.Z)(r))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return fo([r],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=nt(e.ruleStack),i=this.getGAstProductions()[t];return new Mf(i,e).startWalking()}}const xr={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(xr);const Oo=!0,Po=Math.pow(2,St)-1,$o=oo({name:"RECORDING_PHASE_TOKEN",pattern:Ue.NA});On([$o]);const bo=vi($o,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(bo);const Mh={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}};class Dh{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){const t=e>0?e:"";this[`CONSUME${t}`]=function(r,i){return this.consumeInternalRecord(r,e,i)},this[`SUBRULE${t}`]=function(r,i){return this.subruleInternalRecord(r,e,i)},this[`OPTION${t}`]=function(r){return this.optionInternalRecord(r,e)},this[`OR${t}`]=function(r){return this.orInternalRecord(r,e)},this[`MANY${t}`]=function(r){this.manyInternalRecord(e,r)},this[`MANY_SEP${t}`]=function(r){this.manySepFirstInternalRecord(e,r)},this[`AT_LEAST_ONE${t}`]=function(r){this.atLeastOneInternalRecord(e,r)},this[`AT_LEAST_ONE_SEP${t}`]=function(r){this.atLeastOneSepFirstInternalRecord(e,r)}}this.consume=function(e,t,r){return this.consumeInternalRecord(t,e,r)},this.subrule=function(e,t,r){return this.subruleInternalRecord(t,e,r)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){const r=t>0?t:"";delete e[`CONSUME${r}`],delete e[`SUBRULE${r}`],delete e[`OPTION${r}`],delete e[`OR${r}`],delete e[`MANY${r}`],delete e[`MANY_SEP${r}`],delete e[`AT_LEAST_ONE${r}`],delete e[`AT_LEAST_ONE_SEP${r}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return wr}topLevelRuleRecord(e,t){try{const r=new an({definition:[],name:e});return r.name=e,this.recordingProdStack.push(r),t.call(this),this.recordingProdStack.pop(),r}catch(r){if(r.KNOWN_RECORDER_ERROR!==!0)try{r.message=r.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch(i){throw r}throw r}}optionInternalRecord(e,t){return bn.call(this,Re,e,t)}atLeastOneInternalRecord(e,t){bn.call(this,Ke,t,e)}atLeastOneSepFirstInternalRecord(e,t){bn.call(this,Ve,t,e,Oo)}manyInternalRecord(e,t){bn.call(this,fe,t,e)}manySepFirstInternalRecord(e,t){bn.call(this,Ze,t,e,Oo)}orInternalRecord(e,t){return Zh.call(this,e,t)}subruleInternalRecord(e,t,r){if(Lr(t),!e||(0,F.Z)(e,"ruleName")===!1){const o=new Error(`<SUBRULE${Mo(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}const i=(0,cn.Z)(this.recordingProdStack),s=e.ruleName,a=new xe({idx:t,nonTerminalName:s,label:r==null?void 0:r.LABEL,referencedRule:void 0});return i.definition.push(a),this.outputCst?Mh:xr}consumeInternalRecord(e,t,r){if(Lr(t),!Xa(e)){const a=new Error(`<CONSUME${Mo(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}const i=(0,cn.Z)(this.recordingProdStack),s=new ae({idx:t,terminalType:e,label:r==null?void 0:r.LABEL});return i.definition.push(s),bo}}function bn(n,e,t,r=!1){Lr(t);const i=(0,cn.Z)(this.recordingProdStack),s=(0,Wt.Z)(e)?e:e.DEF,a=new n({definition:[],idx:t});return r&&(a.separator=e.SEP),(0,F.Z)(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),i.definition.push(a),this.recordingProdStack.pop(),xr}function Zh(n,e){Lr(e);const t=(0,cn.Z)(this.recordingProdStack),r=(0,ke.Z)(n)===!1,i=r===!1?n:n.DEF,s=new Fe({definition:[],idx:e,ignoreAmbiguities:r&&n.IGNORE_AMBIGUITIES===!0});(0,F.Z)(n,"MAX_LOOKAHEAD")&&(s.maxLookahead=n.MAX_LOOKAHEAD);const a=wa(i,o=>(0,Wt.Z)(o.GATE));return s.hasPredicates=a,t.definition.push(s),(0,D.Z)(i,o=>{const c=new De({definition:[]});s.definition.push(c),(0,F.Z)(o,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:(0,F.Z)(o,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),o.ALT.call(this),this.recordingProdStack.pop()}),xr}function Mo(n){return n===0?"":`${n}`}function Lr(n){if(n<0||n>Po){const e=new Error(`Invalid DSL Method idx value: <${n}>
	Idx value must be a none negative value smaller than ${Po+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}class Fh{initPerformanceTracer(e){if((0,F.Z)(e,"traceInitPerf")){const t=e.traceInitPerf,r=typeof t=="number";this.traceInitMaxIdent=r?t:1/0,this.traceInitPerf=r?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=ut.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;const r=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--> <${e}>`);const{time:i,value:s}=Va(t),a=i>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${i}ms`),this.traceInitIndent--,s}else return t()}}function Uh(n,e){e.forEach(t=>{const r=t.prototype;Object.getOwnPropertyNames(r).forEach(i=>{if(i==="constructor")return;const s=Object.getOwnPropertyDescriptor(r,i);s&&(s.get||s.set)?Object.defineProperty(n.prototype,i,s):n.prototype[i]=t.prototype[i]})})}const wr=vi(Ct,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(wr);const ut=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:un,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Or=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0});var Oe;(function(n){n[n.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",n[n.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",n[n.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",n[n.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",n[n.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",n[n.LEFT_RECURSION=5]="LEFT_RECURSION",n[n.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",n[n.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",n[n.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",n[n.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",n[n.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",n[n.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",n[n.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",n[n.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(Oe||(Oe={}));function Do(n=void 0){return function(){return n}}class Mn{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{Ra(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),(0,D.Z)(this.definedRulesNames,i=>{const a=this[i].originalGrammarAction;let o;this.TRACE_INIT(`${i} Rule`,()=>{o=this.topLevelRuleRecord(i,a)}),this.gastProductionsCache[i]=o})}finally{this.disableRecording()}});let r=[];if(this.TRACE_INIT("Grammar Resolving",()=>{r=ch({rules:(0,me.Z)(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(r)}),this.TRACE_INIT("Grammar Validations",()=>{if((0,se.Z)(r)&&this.skipValidations===!1){const i=lh({rules:(0,me.Z)(this.gastProductionsCache),tokenTypes:(0,me.Z)(this.tokensMap),errMsgProvider:Kt,grammarName:t}),s=Hf({lookaheadStrategy:this.lookaheadStrategy,rules:(0,me.Z)(this.gastProductionsCache),tokenTypes:(0,me.Z)(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(i,s)}}),(0,se.Z)(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const i=fd((0,me.Z)(this.gastProductionsCache));this.resyncFollows=i}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var i,s;(s=(i=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(i,{rules:(0,me.Z)(this.gastProductionsCache)}),this.preComputeLookaheadFunctions((0,me.Z)(this.gastProductionsCache))})),!Mn.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,se.Z)(this.definitionErrors))throw e=(0,$.Z)(this.definitionErrors,i=>i.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;const r=this;if(r.initErrorHandler(t),r.initLexerAdapter(),r.initLooksAhead(t),r.initRecognizerEngine(e,t),r.initRecoverable(t),r.initTreeBuilder(t),r.initContentAssist(),r.initGastRecorder(t),r.initPerformanceTracer(t),(0,F.Z)(t,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=(0,F.Z)(t,"skipValidations")?t.skipValidations:ut.skipValidations}}Mn.DEFER_DEFINITION_ERRORS_HANDLING=!1,Uh(Mn,[ph,Th,xh,Lh,Ph,wh,$h,bh,Dh,Fh]);class Rg extends null{constructor(e,t=ut){const r=clone(t);r.outputCst=!0,super(e,r)}}class Gh extends Mn{constructor(e,t=ut){const r=(0,ve.Z)(t);r.outputCst=!1,super(e,r)}}const Bh={includeVisitorInterface:!0,visitorInterfaceName:"ICstNodeVisitor"};function Ig(n,e){const t=Object.assign(Object.assign({},Bh),e),r=buildModel(n);return genDts(r,t)}function kg(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}class _g{constructor(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.	
See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}}function fn(n,e,t){return`${n.name}_${e}_${t}`}const Cg=0,Nt=1,Wh=2,Zo=4,Fo=5,Sg=6,Dn=7,jh=8,Kh=9,Vh=10,Hh=11,Uo=12;class Pi{constructor(e){this.target=e}isEpsilon(){return!1}}class $i extends Pi{constructor(e,t){super(e),this.tokenType=t}}class Go extends Pi{constructor(e){super(e)}isEpsilon(){return!0}}class bi extends Pi{constructor(e,t,r){super(e),this.rule=t,this.followState=r}isEpsilon(){return!0}}function zh(n){const e={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};Yh(e,n);const t=n.length;for(let r=0;r<t;r++){const i=n[r],s=Vt(e,i,i);s!==void 0&&ap(e,i,s)}return e}function Yh(n,e){const t=e.length;for(let r=0;r<t;r++){const i=e[r],s=ye(n,i,void 0,{type:Wh}),a=ye(n,i,void 0,{type:Dn});s.stop=a,n.ruleToStartState.set(i,s),n.ruleToStopState.set(i,a)}}function Bo(n,e,t){return t instanceof ae?Mi(n,e,t.terminalType,t):t instanceof xe?sp(n,e,t):t instanceof Fe?ep(n,e,t):t instanceof Re?tp(n,e,t):t instanceof fe?Xh(n,e,t):t instanceof Ze?Jh(n,e,t):t instanceof Ke?Qh(n,e,t):t instanceof Ve?qh(n,e,t):Vt(n,e,t)}function Xh(n,e,t){const r=ye(n,e,t,{type:Fo});xt(n,r);const i=hn(n,e,r,t,Vt(n,e,t));return jo(n,e,t,i)}function Jh(n,e,t){const r=ye(n,e,t,{type:Fo});xt(n,r);const i=hn(n,e,r,t,Vt(n,e,t)),s=Mi(n,e,t.separator,t);return jo(n,e,t,i,s)}function Qh(n,e,t){const r=ye(n,e,t,{type:Zo});xt(n,r);const i=hn(n,e,r,t,Vt(n,e,t));return Wo(n,e,t,i)}function qh(n,e,t){const r=ye(n,e,t,{type:Zo});xt(n,r);const i=hn(n,e,r,t,Vt(n,e,t)),s=Mi(n,e,t.separator,t);return Wo(n,e,t,i,s)}function ep(n,e,t){const r=ye(n,e,t,{type:Nt});xt(n,r);const i=(0,$.Z)(t.definition,a=>Bo(n,e,a));return hn(n,e,r,t,...i)}function tp(n,e,t){const r=ye(n,e,t,{type:Nt});xt(n,r);const i=hn(n,e,r,t,Vt(n,e,t));return np(n,e,t,i)}function Vt(n,e,t){const r=(0,He.Z)((0,$.Z)(t.definition,i=>Bo(n,e,i)),i=>i!==void 0);return r.length===1?r[0]:r.length===0?void 0:ip(n,r)}function Wo(n,e,t,r,i){const s=r.left,a=r.right,o=ye(n,e,t,{type:Hh});xt(n,o);const c=ye(n,e,t,{type:Uo});return s.loopback=o,c.loopback=o,n.decisionMap[fn(e,i?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",t.idx)]=o,pe(a,o),i===void 0?(pe(o,s),pe(o,c)):(pe(o,c),pe(o,i.left),pe(i.right,s)),{left:s,right:c}}function jo(n,e,t,r,i){const s=r.left,a=r.right,o=ye(n,e,t,{type:Vh});xt(n,o);const c=ye(n,e,t,{type:Uo}),l=ye(n,e,t,{type:Kh});return o.loopback=l,c.loopback=l,pe(o,s),pe(o,c),pe(a,l),i!==void 0?(pe(l,c),pe(l,i.left),pe(i.right,s)):pe(l,o),n.decisionMap[fn(e,i?"RepetitionWithSeparator":"Repetition",t.idx)]=o,{left:o,right:c}}function np(n,e,t,r){const i=r.left,s=r.right;return pe(i,s),n.decisionMap[fn(e,"Option",t.idx)]=i,r}function xt(n,e){return n.decisionStates.push(e),e.decision=n.decisionStates.length-1,e.decision}function hn(n,e,t,r,...i){const s=ye(n,e,r,{type:jh,start:t});t.end=s;for(const o of i)o!==void 0?(pe(t,o.left),pe(o.right,s)):pe(t,s);const a={left:t,right:s};return n.decisionMap[fn(e,rp(r),r.idx)]=t,a}function rp(n){if(n instanceof Fe)return"Alternation";if(n instanceof Re)return"Option";if(n instanceof fe)return"Repetition";if(n instanceof Ze)return"RepetitionWithSeparator";if(n instanceof Ke)return"RepetitionMandatory";if(n instanceof Ve)return"RepetitionMandatoryWithSeparator";throw new Error("Invalid production type encountered")}function ip(n,e){const t=e.length;for(let s=0;s<t-1;s++){const a=e[s];let o;a.left.transitions.length===1&&(o=a.left.transitions[0]);const c=o instanceof bi,l=o,u=e[s+1].left;a.left.type===Nt&&a.right.type===Nt&&o!==void 0&&(c&&l.followState===a.right||o.target===a.right)?(c?l.followState=u:o.target=u,op(n,a.right)):pe(a.right,u)}const r=e[0],i=e[t-1];return{left:r.left,right:i.right}}function Mi(n,e,t,r){const i=ye(n,e,r,{type:Nt}),s=ye(n,e,r,{type:Nt});return Di(i,new $i(s,t)),{left:i,right:s}}function sp(n,e,t){const r=t.referencedRule,i=n.ruleToStartState.get(r),s=ye(n,e,t,{type:Nt}),a=ye(n,e,t,{type:Nt}),o=new bi(i,r,a);return Di(s,o),{left:s,right:a}}function ap(n,e,t){const r=n.ruleToStartState.get(e);pe(r,t.left);const i=n.ruleToStopState.get(e);return pe(t.right,i),{left:r,right:i}}function pe(n,e){const t=new Go(e);Di(n,t)}function ye(n,e,t,r){const i=Object.assign({atn:n,production:t,epsilonOnlyTransitions:!1,rule:e,transitions:[],nextTokenWithinRule:[],stateNumber:n.states.length},r);return n.states.push(i),i}function Di(n,e){n.transitions.length===0&&(n.epsilonOnlyTransitions=e.isEpsilon()),n.transitions.push(e)}function op(n,e){n.states.splice(n.states.indexOf(e),1)}const Pr={};class Zi{constructor(){this.map={},this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const t=Ko(e);t in this.map||(this.map[t]=this.configs.length,this.configs.push(e))}get elements(){return this.configs}get alts(){return(0,$.Z)(this.configs,e=>e.alt)}get key(){let e="";for(const t in this.map)e+=t+":";return e}}function Ko(n,e=!0){return`${e?`a${n.alt}`:""}s${n.state.stateNumber}:${n.stack.map(t=>t.stateNumber.toString()).join("_")}`}var cp=p(48791),lp=p(63815);function up(n,e){return n&&n.length?(0,lp.Z)(n,(0,sn.Z)(e,2)):[]}var dp=up;function fp(n,e){const t={};return r=>{const i=r.toString();let s=t[i];return s!==void 0||(s={atnStartState:n,decision:e,states:{}},t[i]=s),s}}class Vo{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,t){this.predicates[e]=t}toString(){let e="";const t=this.predicates.length;for(let r=0;r<t;r++)e+=this.predicates[r]===!0?"1":"0";return e}}const Ho=new Vo;class hp extends wi{constructor(e){var t;super(),this.logging=(t=e==null?void 0:e.logging)!==null&&t!==void 0?t:r=>console.log(r)}initialize(e){this.atn=zh(e.rules),this.dfas=pp(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(e){const{prodOccurrence:t,rule:r,hasPredicates:i,dynamicTokensEnabled:s}=e,a=this.dfas,o=this.logging,c=fn(r,"Alternation",t),u=this.atn.decisionMap[c].decision,d=(0,$.Z)(ho({maxLookahead:1,occurrence:t,prodType:"Alternation",rule:r}),h=>(0,$.Z)(h,f=>f[0]));if(zo(d,!1)&&!s){const h=(0,we.Z)(d,(f,y,T)=>((0,D.Z)(y,w=>{w&&(f[w.tokenTypeIdx]=T,(0,D.Z)(w.categoryMatches,C=>{f[C]=T}))}),f),{});return i?function(f){var y;const T=this.LA(1),w=h[T.tokenTypeIdx];if(f!==void 0&&w!==void 0){const C=(y=f[w])===null||y===void 0?void 0:y.GATE;if(C!==void 0&&C.call(this)===!1)return}return w}:function(){const f=this.LA(1);return h[f.tokenTypeIdx]}}else return i?function(h){const f=new Vo,y=h===void 0?0:h.length;for(let w=0;w<y;w++){const C=h==null?void 0:h[w].GATE;f.set(w,C===void 0||C.call(this))}const T=Fi.call(this,a,u,f,o);return typeof T=="number"?T:void 0}:function(){const h=Fi.call(this,a,u,Ho,o);return typeof h=="number"?h:void 0}}buildLookaheadForOptional(e){const{prodOccurrence:t,rule:r,prodType:i,dynamicTokensEnabled:s}=e,a=this.dfas,o=this.logging,c=fn(r,i,t),u=this.atn.decisionMap[c].decision,d=(0,$.Z)(ho({maxLookahead:1,occurrence:t,prodType:i,rule:r}),h=>(0,$.Z)(h,f=>f[0]));if(zo(d)&&d[0][0]&&!s){const h=d[0],f=(0,Je.Z)(h);if(f.length===1&&(0,se.Z)(f[0].categoryMatches)){const T=f[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===T}}else{const y=(0,we.Z)(f,(T,w)=>(w!==void 0&&(T[w.tokenTypeIdx]=!0,(0,D.Z)(w.categoryMatches,C=>{T[C]=!0})),T),{});return function(){const T=this.LA(1);return y[T.tokenTypeIdx]===!0}}}return function(){const h=Fi.call(this,a,u,Ho,o);return typeof h=="object"?!1:h===0}}}function zo(n,e=!0){const t=new Set;for(const r of n){const i=new Set;for(const s of r){if(s===void 0){if(e)break;return!1}const a=[s.tokenTypeIdx].concat(s.categoryMatches);for(const o of a)if(t.has(o)){if(!i.has(o))return!1}else t.add(o),i.add(o)}}return!0}function pp(n){const e=n.decisionStates.length,t=Array(e);for(let r=0;r<e;r++)t[r]=fp(n.decisionStates[r],r);return t}function Fi(n,e,t,r){const i=n[e](t);let s=i.start;if(s===void 0){const o=_p(i.atnStartState);s=Jo(i,Yo(o)),i.start=s}return mp.apply(this,[i,s,t,r])}function mp(n,e,t,r){let i=e,s=1;const a=[];let o=this.LA(s++);for(;;){let c=Ap(i,o);if(c===void 0&&(c=gp.apply(this,[n,i,o,s,t,r])),c===Pr)return vp(a,i,o);if(c.isAcceptState===!0)return c.prediction;i=c,a.push(o),o=this.LA(s++)}}function gp(n,e,t,r,i,s){const a=Rp(e.configs,t,i);if(a.size===0)return Xo(n,e,t,Pr),Pr;let o=Yo(a);const c=kp(a,i);if(c!==void 0)o.isAcceptState=!0,o.prediction=c,o.configs.uniqueAlt=c;else if(xp(a)){const l=(0,cp.Z)(a.alts);o.isAcceptState=!0,o.prediction=l,o.configs.uniqueAlt=l,yp.apply(this,[n,r,a.alts,s])}return o=Xo(n,e,t,o),o}function yp(n,e,t,r){const i=[];for(let l=1;l<=e;l++)i.push(this.LA(l).tokenType);const s=n.atnStartState,a=s.rule,o=s.production,c=Tp({topLevelRule:a,ambiguityIndices:t,production:o,prefixPath:i});r(c)}function Tp(n){const e=(0,$.Z)(n.prefixPath,i=>ln(i)).join(", "),t=n.production.idx===0?"":n.production.idx;let r=`Ambiguous Alternatives Detected: <${n.ambiguityIndices.join(", ")}> in <${Ep(n.production)}${t}> inside <${n.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return r=r+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,r}function Ep(n){if(n instanceof xe)return"SUBRULE";if(n instanceof Re)return"OPTION";if(n instanceof Fe)return"OR";if(n instanceof Ke)return"AT_LEAST_ONE";if(n instanceof Ve)return"AT_LEAST_ONE_SEP";if(n instanceof Ze)return"MANY_SEP";if(n instanceof fe)return"MANY";if(n instanceof ae)return"CONSUME";throw Error("non exhaustive match")}function vp(n,e,t){const r=ze(e.configs.elements,s=>s.state.transitions),i=dp(r.filter(s=>s instanceof $i).map(s=>s.tokenType),s=>s.tokenTypeIdx);return{actualToken:t,possibleTokenTypes:i,tokenPath:n}}function Ap(n,e){return n.edges[e.tokenTypeIdx]}function Rp(n,e,t){const r=new Zi,i=[];for(const a of n.elements){if(t.is(a.alt)===!1)continue;if(a.state.type===Dn){i.push(a);continue}const o=a.state.transitions.length;for(let c=0;c<o;c++){const l=a.state.transitions[c],u=Ip(l,e);u!==void 0&&r.add({state:u,alt:a.alt,stack:a.stack})}}let s;if(i.length===0&&r.size===1&&(s=r),s===void 0){s=new Zi;for(const a of r.elements)$r(a,s)}if(i.length>0&&!Sp(s))for(const a of i)s.add(a);return s}function Ip(n,e){if(n instanceof $i&&co(e,n.tokenType))return n.target}function kp(n,e){let t;for(const r of n.elements)if(e.is(r.alt)===!0){if(t===void 0)t=r.alt;else if(t!==r.alt)return}return t}function Yo(n){return{configs:n,edges:{},isAcceptState:!1,prediction:-1}}function Xo(n,e,t,r){return r=Jo(n,r),e.edges[t.tokenTypeIdx]=r,r}function Jo(n,e){if(e===Pr)return e;const t=e.configs.key,r=n.states[t];return r!==void 0?r:(e.configs.finalize(),n.states[t]=e,e)}function _p(n){const e=new Zi,t=n.transitions.length;for(let r=0;r<t;r++){const s={state:n.transitions[r].target,alt:r,stack:[]};$r(s,e)}return e}function $r(n,e){const t=n.state;if(t.type===Dn){if(n.stack.length>0){const i=[...n.stack],a={state:i.pop(),alt:n.alt,stack:i};$r(a,e)}else e.add(n);return}t.epsilonOnlyTransitions||e.add(n);const r=t.transitions.length;for(let i=0;i<r;i++){const s=t.transitions[i],a=Cp(n,s);a!==void 0&&$r(a,e)}}function Cp(n,e){if(e instanceof Go)return{state:e.target,alt:n.alt,stack:n.stack};if(e instanceof bi){const t=[...n.stack,e.followState];return{state:e.target,alt:n.alt,stack:t}}}function Sp(n){for(const e of n.elements)if(e.state.type===Dn)return!0;return!1}function Np(n){for(const e of n.elements)if(e.state.type!==Dn)return!1;return!0}function xp(n){if(Np(n))return!0;const e=Lp(n.elements);return wp(e)&&!Op(e)}function Lp(n){const e=new Map;for(const t of n){const r=Ko(t,!1);let i=e.get(r);i===void 0&&(i={},e.set(r,i)),i[t.alt]=!0}return e}function wp(n){for(const e of Array.from(n.values()))if(Object.keys(e).length>1)return!0;return!1}function Op(n){for(const e of Array.from(n.values()))if(Object.keys(e).length===1)return!0;return!1}var Qo;(function(n){function e(t){return typeof t=="string"}n.is=e})(Qo||(Qo={}));var Ui;(function(n){function e(t){return typeof t=="string"}n.is=e})(Ui||(Ui={}));var qo;(function(n){n.MIN_VALUE=-2147483648,n.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&n.MIN_VALUE<=t&&t<=n.MAX_VALUE}n.is=e})(qo||(qo={}));var br;(function(n){n.MIN_VALUE=0,n.MAX_VALUE=2147483647;function e(t){return typeof t=="number"&&n.MIN_VALUE<=t&&t<=n.MAX_VALUE}n.is=e})(br||(br={}));var ne;(function(n){function e(r,i){return r===Number.MAX_VALUE&&(r=br.MAX_VALUE),i===Number.MAX_VALUE&&(i=br.MAX_VALUE),{line:r,character:i}}n.create=e;function t(r){let i=r;return m.objectLiteral(i)&&m.uinteger(i.line)&&m.uinteger(i.character)}n.is=t})(ne||(ne={}));var q;(function(n){function e(r,i,s,a){if(m.uinteger(r)&&m.uinteger(i)&&m.uinteger(s)&&m.uinteger(a))return{start:ne.create(r,i),end:ne.create(s,a)};if(ne.is(r)&&ne.is(i))return{start:r,end:i};throw new Error(`Range#create called with invalid arguments[${r}, ${i}, ${s}, ${a}]`)}n.create=e;function t(r){let i=r;return m.objectLiteral(i)&&ne.is(i.start)&&ne.is(i.end)}n.is=t})(q||(q={}));var Mr;(function(n){function e(r,i){return{uri:r,range:i}}n.create=e;function t(r){let i=r;return m.objectLiteral(i)&&q.is(i.range)&&(m.string(i.uri)||m.undefined(i.uri))}n.is=t})(Mr||(Mr={}));var ec;(function(n){function e(r,i,s,a){return{targetUri:r,targetRange:i,targetSelectionRange:s,originSelectionRange:a}}n.create=e;function t(r){let i=r;return m.objectLiteral(i)&&q.is(i.targetRange)&&m.string(i.targetUri)&&q.is(i.targetSelectionRange)&&(q.is(i.originSelectionRange)||m.undefined(i.originSelectionRange))}n.is=t})(ec||(ec={}));var Gi;(function(n){function e(r,i,s,a){return{red:r,green:i,blue:s,alpha:a}}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&m.numberRange(i.red,0,1)&&m.numberRange(i.green,0,1)&&m.numberRange(i.blue,0,1)&&m.numberRange(i.alpha,0,1)}n.is=t})(Gi||(Gi={}));var tc;(function(n){function e(r,i){return{range:r,color:i}}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&q.is(i.range)&&Gi.is(i.color)}n.is=t})(tc||(tc={}));var nc;(function(n){function e(r,i,s){return{label:r,textEdit:i,additionalTextEdits:s}}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&m.string(i.label)&&(m.undefined(i.textEdit)||yt.is(i))&&(m.undefined(i.additionalTextEdits)||m.typedArray(i.additionalTextEdits,yt.is))}n.is=t})(nc||(nc={}));var rc;(function(n){n.Comment="comment",n.Imports="imports",n.Region="region"})(rc||(rc={}));var ic;(function(n){function e(r,i,s,a,o,c){const l={startLine:r,endLine:i};return m.defined(s)&&(l.startCharacter=s),m.defined(a)&&(l.endCharacter=a),m.defined(o)&&(l.kind=o),m.defined(c)&&(l.collapsedText=c),l}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&m.uinteger(i.startLine)&&m.uinteger(i.startLine)&&(m.undefined(i.startCharacter)||m.uinteger(i.startCharacter))&&(m.undefined(i.endCharacter)||m.uinteger(i.endCharacter))&&(m.undefined(i.kind)||m.string(i.kind))}n.is=t})(ic||(ic={}));var Bi;(function(n){function e(r,i){return{location:r,message:i}}n.create=e;function t(r){let i=r;return m.defined(i)&&Mr.is(i.location)&&m.string(i.message)}n.is=t})(Bi||(Bi={}));var sc;(function(n){n.Error=1,n.Warning=2,n.Information=3,n.Hint=4})(sc||(sc={}));var ac;(function(n){n.Unnecessary=1,n.Deprecated=2})(ac||(ac={}));var oc;(function(n){function e(t){const r=t;return m.objectLiteral(r)&&m.string(r.href)}n.is=e})(oc||(oc={}));var Dr;(function(n){function e(r,i,s,a,o,c){let l={range:r,message:i};return m.defined(s)&&(l.severity=s),m.defined(a)&&(l.code=a),m.defined(o)&&(l.source=o),m.defined(c)&&(l.relatedInformation=c),l}n.create=e;function t(r){var i;let s=r;return m.defined(s)&&q.is(s.range)&&m.string(s.message)&&(m.number(s.severity)||m.undefined(s.severity))&&(m.integer(s.code)||m.string(s.code)||m.undefined(s.code))&&(m.undefined(s.codeDescription)||m.string((i=s.codeDescription)===null||i===void 0?void 0:i.href))&&(m.string(s.source)||m.undefined(s.source))&&(m.undefined(s.relatedInformation)||m.typedArray(s.relatedInformation,Bi.is))}n.is=t})(Dr||(Dr={}));var pn;(function(n){function e(r,i,...s){let a={title:r,command:i};return m.defined(s)&&s.length>0&&(a.arguments=s),a}n.create=e;function t(r){let i=r;return m.defined(i)&&m.string(i.title)&&m.string(i.command)}n.is=t})(pn||(pn={}));var yt;(function(n){function e(s,a){return{range:s,newText:a}}n.replace=e;function t(s,a){return{range:{start:s,end:s},newText:a}}n.insert=t;function r(s){return{range:s,newText:""}}n.del=r;function i(s){const a=s;return m.objectLiteral(a)&&m.string(a.newText)&&q.is(a.range)}n.is=i})(yt||(yt={}));var mn;(function(n){function e(r,i,s){const a={label:r};return i!==void 0&&(a.needsConfirmation=i),s!==void 0&&(a.description=s),a}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&m.string(i.label)&&(m.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(m.string(i.description)||i.description===void 0)}n.is=t})(mn||(mn={}));var _e;(function(n){function e(t){const r=t;return m.string(r)}n.is=e})(_e||(_e={}));var Lt;(function(n){function e(s,a,o){return{range:s,newText:a,annotationId:o}}n.replace=e;function t(s,a,o){return{range:{start:s,end:s},newText:a,annotationId:o}}n.insert=t;function r(s,a){return{range:s,newText:"",annotationId:a}}n.del=r;function i(s){const a=s;return yt.is(a)&&(mn.is(a.annotationId)||_e.is(a.annotationId))}n.is=i})(Lt||(Lt={}));var Zr;(function(n){function e(r,i){return{textDocument:r,edits:i}}n.create=e;function t(r){let i=r;return m.defined(i)&&Ur.is(i.textDocument)&&Array.isArray(i.edits)}n.is=t})(Zr||(Zr={}));var Zn;(function(n){function e(r,i,s){let a={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),s!==void 0&&(a.annotationId=s),a}n.create=e;function t(r){let i=r;return i&&i.kind==="create"&&m.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||m.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||m.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||_e.is(i.annotationId))}n.is=t})(Zn||(Zn={}));var Fn;(function(n){function e(r,i,s,a){let o={kind:"rename",oldUri:r,newUri:i};return s!==void 0&&(s.overwrite!==void 0||s.ignoreIfExists!==void 0)&&(o.options=s),a!==void 0&&(o.annotationId=a),o}n.create=e;function t(r){let i=r;return i&&i.kind==="rename"&&m.string(i.oldUri)&&m.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||m.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||m.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||_e.is(i.annotationId))}n.is=t})(Fn||(Fn={}));var Un;(function(n){function e(r,i,s){let a={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),s!==void 0&&(a.annotationId=s),a}n.create=e;function t(r){let i=r;return i&&i.kind==="delete"&&m.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||m.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||m.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||_e.is(i.annotationId))}n.is=t})(Un||(Un={}));var Wi;(function(n){function e(t){let r=t;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(i=>m.string(i.kind)?Zn.is(i)||Fn.is(i)||Un.is(i):Zr.is(i)))}n.is=e})(Wi||(Wi={}));class Fr{constructor(e,t){this.edits=e,this.changeAnnotations=t}insert(e,t,r){let i,s;if(r===void 0?i=yt.insert(e,t):_e.is(r)?(s=r,i=Lt.insert(e,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=Lt.insert(e,t,s)),this.edits.push(i),s!==void 0)return s}replace(e,t,r){let i,s;if(r===void 0?i=yt.replace(e,t):_e.is(r)?(s=r,i=Lt.replace(e,t,r)):(this.assertChangeAnnotations(this.changeAnnotations),s=this.changeAnnotations.manage(r),i=Lt.replace(e,t,s)),this.edits.push(i),s!==void 0)return s}delete(e,t){let r,i;if(t===void 0?r=yt.del(e):_e.is(t)?(i=t,r=Lt.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(t),r=Lt.del(e,i)),this.edits.push(r),i!==void 0)return i}add(e){this.edits.push(e)}all(){return this.edits}clear(){this.edits.splice(0,this.edits.length)}assertChangeAnnotations(e){if(e===void 0)throw new Error("Text edit change is not configured to manage change annotations.")}}class cc{constructor(e){this._annotations=e===void 0?Object.create(null):e,this._counter=0,this._size=0}all(){return this._annotations}get size(){return this._size}manage(e,t){let r;if(_e.is(e)?r=e:(r=this.nextId(),t=e),this._annotations[r]!==void 0)throw new Error(`Id ${r} is already in use.`);if(t===void 0)throw new Error(`No annotation provided for id ${r}`);return this._annotations[r]=t,this._size++,r}nextId(){return this._counter++,this._counter.toString()}}class Ng{constructor(e){this._textEditChanges=Object.create(null),e!==void 0?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new cc(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(t=>{if(Zr.is(t)){const r=new Fr(t.edits,this._changeAnnotations);this._textEditChanges[t.textDocument.uri]=r}})):e.changes&&Object.keys(e.changes).forEach(t=>{const r=new Fr(e.changes[t]);this._textEditChanges[t]=r})):this._workspaceEdit={}}get edit(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit}getTextEditChange(e){if(Ur.is(e)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");const t={uri:e.uri,version:e.version};let r=this._textEditChanges[t.uri];if(!r){const i=[],s={textDocument:t,edits:i};this._workspaceEdit.documentChanges.push(s),r=new Fr(i,this._changeAnnotations),this._textEditChanges[t.uri]=r}return r}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");let t=this._textEditChanges[e];if(!t){let r=[];this._workspaceEdit.changes[e]=r,t=new Fr(r),this._textEditChanges[e]=t}return t}}initDocumentChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new cc,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())}initChanges(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))}createFile(e,t,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;mn.is(t)||_e.is(t)?i=t:r=t;let s,a;if(i===void 0?s=Zn.create(e,r):(a=_e.is(i)?i:this._changeAnnotations.manage(i),s=Zn.create(e,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a}renameFile(e,t,r,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let s;mn.is(r)||_e.is(r)?s=r:i=r;let a,o;if(s===void 0?a=Fn.create(e,t,i):(o=_e.is(s)?s:this._changeAnnotations.manage(s),a=Fn.create(e,t,i,o)),this._workspaceEdit.documentChanges.push(a),o!==void 0)return o}deleteFile(e,t,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");let i;mn.is(t)||_e.is(t)?i=t:r=t;let s,a;if(i===void 0?s=Un.create(e,r):(a=_e.is(i)?i:this._changeAnnotations.manage(i),s=Un.create(e,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a}}var lc;(function(n){function e(r){return{uri:r}}n.create=e;function t(r){let i=r;return m.defined(i)&&m.string(i.uri)}n.is=t})(lc||(lc={}));var uc;(function(n){function e(r,i){return{uri:r,version:i}}n.create=e;function t(r){let i=r;return m.defined(i)&&m.string(i.uri)&&m.integer(i.version)}n.is=t})(uc||(uc={}));var Ur;(function(n){function e(r,i){return{uri:r,version:i}}n.create=e;function t(r){let i=r;return m.defined(i)&&m.string(i.uri)&&(i.version===null||m.integer(i.version))}n.is=t})(Ur||(Ur={}));var dc;(function(n){function e(r,i,s,a){return{uri:r,languageId:i,version:s,text:a}}n.create=e;function t(r){let i=r;return m.defined(i)&&m.string(i.uri)&&m.string(i.languageId)&&m.integer(i.version)&&m.string(i.text)}n.is=t})(dc||(dc={}));var ji;(function(n){n.PlainText="plaintext",n.Markdown="markdown";function e(t){const r=t;return r===n.PlainText||r===n.Markdown}n.is=e})(ji||(ji={}));var Gn;(function(n){function e(t){const r=t;return m.objectLiteral(t)&&ji.is(r.kind)&&m.string(r.value)}n.is=e})(Gn||(Gn={}));var fc;(function(n){n.Text=1,n.Method=2,n.Function=3,n.Constructor=4,n.Field=5,n.Variable=6,n.Class=7,n.Interface=8,n.Module=9,n.Property=10,n.Unit=11,n.Value=12,n.Enum=13,n.Keyword=14,n.Snippet=15,n.Color=16,n.File=17,n.Reference=18,n.Folder=19,n.EnumMember=20,n.Constant=21,n.Struct=22,n.Event=23,n.Operator=24,n.TypeParameter=25})(fc||(fc={}));var hc;(function(n){n.PlainText=1,n.Snippet=2})(hc||(hc={}));var pc;(function(n){n.Deprecated=1})(pc||(pc={}));var mc;(function(n){function e(r,i,s){return{newText:r,insert:i,replace:s}}n.create=e;function t(r){const i=r;return i&&m.string(i.newText)&&q.is(i.insert)&&q.is(i.replace)}n.is=t})(mc||(mc={}));var gc;(function(n){n.asIs=1,n.adjustIndentation=2})(gc||(gc={}));var yc;(function(n){function e(t){const r=t;return r&&(m.string(r.detail)||r.detail===void 0)&&(m.string(r.description)||r.description===void 0)}n.is=e})(yc||(yc={}));var Tc;(function(n){function e(t){return{label:t}}n.create=e})(Tc||(Tc={}));var Ec;(function(n){function e(t,r){return{items:t||[],isIncomplete:!!r}}n.create=e})(Ec||(Ec={}));var Gr;(function(n){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}n.fromPlainText=e;function t(r){const i=r;return m.string(i)||m.objectLiteral(i)&&m.string(i.language)&&m.string(i.value)}n.is=t})(Gr||(Gr={}));var vc;(function(n){function e(t){let r=t;return!!r&&m.objectLiteral(r)&&(Gn.is(r.contents)||Gr.is(r.contents)||m.typedArray(r.contents,Gr.is))&&(t.range===void 0||q.is(t.range))}n.is=e})(vc||(vc={}));var Ac;(function(n){function e(t,r){return r?{label:t,documentation:r}:{label:t}}n.create=e})(Ac||(Ac={}));var Rc;(function(n){function e(t,r,...i){let s={label:t};return m.defined(r)&&(s.documentation=r),m.defined(i)?s.parameters=i:s.parameters=[],s}n.create=e})(Rc||(Rc={}));var Ic;(function(n){n.Text=1,n.Read=2,n.Write=3})(Ic||(Ic={}));var kc;(function(n){function e(t,r){let i={range:t};return m.number(r)&&(i.kind=r),i}n.create=e})(kc||(kc={}));var _c;(function(n){n.File=1,n.Module=2,n.Namespace=3,n.Package=4,n.Class=5,n.Method=6,n.Property=7,n.Field=8,n.Constructor=9,n.Enum=10,n.Interface=11,n.Function=12,n.Variable=13,n.Constant=14,n.String=15,n.Number=16,n.Boolean=17,n.Array=18,n.Object=19,n.Key=20,n.Null=21,n.EnumMember=22,n.Struct=23,n.Event=24,n.Operator=25,n.TypeParameter=26})(_c||(_c={}));var Cc;(function(n){n.Deprecated=1})(Cc||(Cc={}));var Sc;(function(n){function e(t,r,i,s,a){let o={name:t,kind:r,location:{uri:s,range:i}};return a&&(o.containerName=a),o}n.create=e})(Sc||(Sc={}));var Nc;(function(n){function e(t,r,i,s){return s!==void 0?{name:t,kind:r,location:{uri:i,range:s}}:{name:t,kind:r,location:{uri:i}}}n.create=e})(Nc||(Nc={}));var xc;(function(n){function e(r,i,s,a,o,c){let l={name:r,detail:i,kind:s,range:a,selectionRange:o};return c!==void 0&&(l.children=c),l}n.create=e;function t(r){let i=r;return i&&m.string(i.name)&&m.number(i.kind)&&q.is(i.range)&&q.is(i.selectionRange)&&(i.detail===void 0||m.string(i.detail))&&(i.deprecated===void 0||m.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}n.is=t})(xc||(xc={}));var Lc;(function(n){n.Empty="",n.QuickFix="quickfix",n.Refactor="refactor",n.RefactorExtract="refactor.extract",n.RefactorInline="refactor.inline",n.RefactorRewrite="refactor.rewrite",n.Source="source",n.SourceOrganizeImports="source.organizeImports",n.SourceFixAll="source.fixAll"})(Lc||(Lc={}));var Br;(function(n){n.Invoked=1,n.Automatic=2})(Br||(Br={}));var wc;(function(n){function e(r,i,s){let a={diagnostics:r};return i!=null&&(a.only=i),s!=null&&(a.triggerKind=s),a}n.create=e;function t(r){let i=r;return m.defined(i)&&m.typedArray(i.diagnostics,Dr.is)&&(i.only===void 0||m.typedArray(i.only,m.string))&&(i.triggerKind===void 0||i.triggerKind===Br.Invoked||i.triggerKind===Br.Automatic)}n.is=t})(wc||(wc={}));var Oc;(function(n){function e(r,i,s){let a={title:r},o=!0;return typeof i=="string"?(o=!1,a.kind=i):pn.is(i)?a.command=i:a.edit=i,o&&s!==void 0&&(a.kind=s),a}n.create=e;function t(r){let i=r;return i&&m.string(i.title)&&(i.diagnostics===void 0||m.typedArray(i.diagnostics,Dr.is))&&(i.kind===void 0||m.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||pn.is(i.command))&&(i.isPreferred===void 0||m.boolean(i.isPreferred))&&(i.edit===void 0||Wi.is(i.edit))}n.is=t})(Oc||(Oc={}));var Pc;(function(n){function e(r,i){let s={range:r};return m.defined(i)&&(s.data=i),s}n.create=e;function t(r){let i=r;return m.defined(i)&&q.is(i.range)&&(m.undefined(i.command)||pn.is(i.command))}n.is=t})(Pc||(Pc={}));var $c;(function(n){function e(r,i){return{tabSize:r,insertSpaces:i}}n.create=e;function t(r){let i=r;return m.defined(i)&&m.uinteger(i.tabSize)&&m.boolean(i.insertSpaces)}n.is=t})($c||($c={}));var bc;(function(n){function e(r,i,s){return{range:r,target:i,data:s}}n.create=e;function t(r){let i=r;return m.defined(i)&&q.is(i.range)&&(m.undefined(i.target)||m.string(i.target))}n.is=t})(bc||(bc={}));var Mc;(function(n){function e(r,i){return{range:r,parent:i}}n.create=e;function t(r){let i=r;return m.objectLiteral(i)&&q.is(i.range)&&(i.parent===void 0||n.is(i.parent))}n.is=t})(Mc||(Mc={}));var Dc;(function(n){n.namespace="namespace",n.type="type",n.class="class",n.enum="enum",n.interface="interface",n.struct="struct",n.typeParameter="typeParameter",n.parameter="parameter",n.variable="variable",n.property="property",n.enumMember="enumMember",n.event="event",n.function="function",n.method="method",n.macro="macro",n.keyword="keyword",n.modifier="modifier",n.comment="comment",n.string="string",n.number="number",n.regexp="regexp",n.operator="operator",n.decorator="decorator"})(Dc||(Dc={}));var Zc;(function(n){n.declaration="declaration",n.definition="definition",n.readonly="readonly",n.static="static",n.deprecated="deprecated",n.abstract="abstract",n.async="async",n.modification="modification",n.documentation="documentation",n.defaultLibrary="defaultLibrary"})(Zc||(Zc={}));var Fc;(function(n){function e(t){const r=t;return m.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}n.is=e})(Fc||(Fc={}));var Uc;(function(n){function e(r,i){return{range:r,text:i}}n.create=e;function t(r){const i=r;return i!=null&&q.is(i.range)&&m.string(i.text)}n.is=t})(Uc||(Uc={}));var Gc;(function(n){function e(r,i,s){return{range:r,variableName:i,caseSensitiveLookup:s}}n.create=e;function t(r){const i=r;return i!=null&&q.is(i.range)&&m.boolean(i.caseSensitiveLookup)&&(m.string(i.variableName)||i.variableName===void 0)}n.is=t})(Gc||(Gc={}));var Bc;(function(n){function e(r,i){return{range:r,expression:i}}n.create=e;function t(r){const i=r;return i!=null&&q.is(i.range)&&(m.string(i.expression)||i.expression===void 0)}n.is=t})(Bc||(Bc={}));var Wc;(function(n){function e(r,i){return{frameId:r,stoppedLocation:i}}n.create=e;function t(r){const i=r;return m.defined(i)&&q.is(r.stoppedLocation)}n.is=t})(Wc||(Wc={}));var Ki;(function(n){n.Type=1,n.Parameter=2;function e(t){return t===1||t===2}n.is=e})(Ki||(Ki={}));var Vi;(function(n){function e(r){return{value:r}}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&(i.tooltip===void 0||m.string(i.tooltip)||Gn.is(i.tooltip))&&(i.location===void 0||Mr.is(i.location))&&(i.command===void 0||pn.is(i.command))}n.is=t})(Vi||(Vi={}));var jc;(function(n){function e(r,i,s){const a={position:r,label:i};return s!==void 0&&(a.kind=s),a}n.create=e;function t(r){const i=r;return m.objectLiteral(i)&&ne.is(i.position)&&(m.string(i.label)||m.typedArray(i.label,Vi.is))&&(i.kind===void 0||Ki.is(i.kind))&&i.textEdits===void 0||m.typedArray(i.textEdits,yt.is)&&(i.tooltip===void 0||m.string(i.tooltip)||Gn.is(i.tooltip))&&(i.paddingLeft===void 0||m.boolean(i.paddingLeft))&&(i.paddingRight===void 0||m.boolean(i.paddingRight))}n.is=t})(jc||(jc={}));var Kc;(function(n){function e(t){return{kind:"snippet",value:t}}n.createSnippet=e})(Kc||(Kc={}));var Vc;(function(n){function e(t,r,i,s){return{insertText:t,filterText:r,range:i,command:s}}n.create=e})(Vc||(Vc={}));var Hc;(function(n){function e(t){return{items:t}}n.create=e})(Hc||(Hc={}));var zc;(function(n){n.Invoked=0,n.Automatic=1})(zc||(zc={}));var Yc;(function(n){function e(t,r){return{range:t,text:r}}n.create=e})(Yc||(Yc={}));var Xc;(function(n){function e(t,r){return{triggerKind:t,selectedCompletionInfo:r}}n.create=e})(Xc||(Xc={}));var Jc;(function(n){function e(t){const r=t;return m.objectLiteral(r)&&Ui.is(r.uri)&&m.string(r.name)}n.is=e})(Jc||(Jc={}));const xg=null;var Qc;(function(n){function e(s,a,o,c){return new Pp(s,a,o,c)}n.create=e;function t(s){let a=s;return!!(m.defined(a)&&m.string(a.uri)&&(m.undefined(a.languageId)||m.string(a.languageId))&&m.uinteger(a.lineCount)&&m.func(a.getText)&&m.func(a.positionAt)&&m.func(a.offsetAt))}n.is=t;function r(s,a){let o=s.getText(),c=i(a,(u,d)=>{let h=u.range.start.line-d.range.start.line;return h===0?u.range.start.character-d.range.start.character:h}),l=o.length;for(let u=c.length-1;u>=0;u--){let d=c[u],h=s.offsetAt(d.range.start),f=s.offsetAt(d.range.end);if(f<=l)o=o.substring(0,h)+d.newText+o.substring(f,o.length);else throw new Error("Overlapping edit");l=h}return o}n.applyEdits=r;function i(s,a){if(s.length<=1)return s;const o=s.length/2|0,c=s.slice(0,o),l=s.slice(o);i(c,a),i(l,a);let u=0,d=0,h=0;for(;u<c.length&&d<l.length;)a(c[u],l[d])<=0?s[h++]=c[u++]:s[h++]=l[d++];for(;u<c.length;)s[h++]=c[u++];for(;d<l.length;)s[h++]=l[d++];return s}})(Qc||(Qc={}));class Pp{constructor(e,t,r,i){this._uri=e,this._languageId=t,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],t=this._content,r=!0;for(let i=0;i<t.length;i++){r&&(e.push(i),r=!1);let s=t.charAt(i);r=s==="\r"||s===`
`,s==="\r"&&i+1<t.length&&t.charAt(i+1)===`
`&&i++}r&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),r=0,i=t.length;if(i===0)return ne.create(0,e);for(;r<i;){let a=Math.floor((r+i)/2);t[a]>e?i=a:r=a+1}let s=r-1;return ne.create(s,e-t[s])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let r=t[e.line],i=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}}var m;(function(n){const e=Object.prototype.toString;function t(f){return typeof f!="undefined"}n.defined=t;function r(f){return typeof f=="undefined"}n.undefined=r;function i(f){return f===!0||f===!1}n.boolean=i;function s(f){return e.call(f)==="[object String]"}n.string=s;function a(f){return e.call(f)==="[object Number]"}n.number=a;function o(f,y,T){return e.call(f)==="[object Number]"&&y<=f&&f<=T}n.numberRange=o;function c(f){return e.call(f)==="[object Number]"&&-2147483648<=f&&f<=2147483647}n.integer=c;function l(f){return e.call(f)==="[object Number]"&&0<=f&&f<=2147483647}n.uinteger=l;function u(f){return e.call(f)==="[object Function]"}n.func=u;function d(f){return f!==null&&typeof f=="object"}n.objectLiteral=d;function h(f,y){return Array.isArray(f)&&f.every(y)}n.typedArray=h})(m||(m={}));class $p{constructor(){this.nodeStack=[]}get current(){return this.nodeStack[this.nodeStack.length-1]}buildRootNode(e){return this.rootNode=new el(e),this.rootNode.root=this.rootNode,this.nodeStack=[this.rootNode],this.rootNode}buildCompositeNode(e){const t=new zi;return t.grammarSource=e,t.root=this.rootNode,this.current.content.push(t),this.nodeStack.push(t),t}buildLeafNode(e,t){const r=new Hi(e.startOffset,e.image.length,G(e),e.tokenType,!1);return r.grammarSource=t,r.root=this.rootNode,this.current.content.push(r),r}removeNode(e){const t=e.container;if(t){const r=t.content.indexOf(e);r>=0&&t.content.splice(r,1)}}construct(e){const t=this.current;typeof e.$type=="string"&&(this.current.astNode=e),e.$cstNode=t;const r=this.nodeStack.pop();(r==null?void 0:r.content.length)===0&&this.removeNode(r)}addHiddenTokens(e){for(const t of e){const r=new Hi(t.startOffset,t.image.length,G(t),t.tokenType,!0);r.root=this.rootNode,this.addHiddenToken(this.rootNode,r)}}addHiddenToken(e,t){const{offset:r,end:i}=t;for(let s=0;s<e.content.length;s++){const a=e.content[s],{offset:o,end:c}=a;if(E(a)&&r>o&&i<c){this.addHiddenToken(a,t);return}else if(i<=o){e.content.splice(s,0,t);return}}e.content.push(t)}}class qc{get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,t;const r=typeof((e=this._astNode)===null||e===void 0?void 0:e.$type)=="string"?this._astNode:(t=this.container)===null||t===void 0?void 0:t.astNode;if(!r)throw new Error("This node has no associated AST element");return r}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}}class Hi extends qc{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,t,r,i,s=!1){super(),this._hidden=s,this._offset=e,this._tokenType=i,this._length=t,this._range=r}}class zi extends qc{constructor(){super(...arguments),this.content=new Yi(this)}get children(){return this.content}get offset(){var e,t;return(t=(e=this.firstNonHiddenNode)===null||e===void 0?void 0:e.offset)!==null&&t!==void 0?t:0}get length(){return this.end-this.offset}get end(){var e,t;return(t=(e=this.lastNonHiddenNode)===null||e===void 0?void 0:e.end)!==null&&t!==void 0?t:0}get range(){const e=this.firstNonHiddenNode,t=this.lastNonHiddenNode;if(e&&t){if(this._rangeCache===void 0){const{range:r}=e,{range:i}=t;this._rangeCache={start:r.start,end:i.end.line<r.start.line?r.start:i.end}}return this._rangeCache}else return{start:ne.create(0,0),end:ne.create(0,0)}}get firstNonHiddenNode(){for(const e of this.content)if(!e.hidden)return e;return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){const t=this.content[e];if(!t.hidden)return t}return this.content[this.content.length-1]}}class Yi extends Array{constructor(e){super(),this.parent=e,Object.setPrototypeOf(this,Yi.prototype)}push(...e){return this.addParents(e),super.push(...e)}unshift(...e){return this.addParents(e),super.unshift(...e)}splice(e,t,...r){return this.addParents(r),super.splice(e,t,...r)}addParents(e){for(const t of e)t.container=this.parent}}class el extends zi{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super(),this._text="",this._text=e!=null?e:""}}const Xi=Symbol("Datatype");function Ji(n){return n.$type===Xi}const tl="\u200B",nl=n=>n.endsWith(tl)?n:n+tl;class rl{constructor(e){this._unorderedGroups=new Map,this.lexer=e.parser.Lexer;const t=this.lexer.definition;this.wrapper=new Fp(t,Object.assign(Object.assign({},e.parser.ParserConfig),{errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,t){this.wrapper.wrapOr(e,t)}optional(e,t){this.wrapper.wrapOption(e,t)}many(e,t){this.wrapper.wrapMany(e,t)}atLeastOne(e,t){this.wrapper.wrapAtLeastOne(e,t)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}}class bp extends rl{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e),this.nodeBuilder=new $p,this.stack=[],this.assignmentMap=new Map,this.linker=e.references.Linker,this.converter=e.parser.ValueConverter,this.astReflection=e.shared.AstReflection}rule(e,t){const r=e.fragment?void 0:oi(e)?Xi:ar(e),i=this.wrapper.DEFINE_RULE(nl(e.name),this.startImplementation(r,t).bind(this));return e.entry&&(this.mainRule=i),i}parse(e){this.nodeBuilder.buildRootNode(e);const t=this.lexer.tokenize(e);this.wrapper.input=t.tokens;const r=this.mainRule.call(this.wrapper,{});return this.nodeBuilder.addHiddenTokens(t.hidden),this.unorderedGroups.clear(),{value:r,lexerErrors:t.errors,parserErrors:this.wrapper.errors}}startImplementation(e,t){return r=>{if(!this.isRecording()){const s={$type:e};this.stack.push(s),e===Xi&&(s.value="")}let i;try{i=t(r)}catch(s){i=void 0}return!this.isRecording()&&i===void 0&&(i=this.construct()),i}}consume(e,t,r){const i=this.wrapper.wrapConsume(e,t);if(!this.isRecording()&&this.isValidToken(i)){const s=this.nodeBuilder.buildLeafNode(i,r),{assignment:a,isCrossRef:o}=this.getAssignment(r),c=this.current;if(a){const l=Ft(r)?i.image:this.converter.convert(i.image,s);this.assign(a.operator,a.feature,l,s,o)}else if(Ji(c)){let l=i.image;Ft(r)||(l=this.converter.convert(l,s).toString()),c.value+=l}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&typeof e.endOffset=="number"&&!isNaN(e.endOffset)}subrule(e,t,r,i){let s;this.isRecording()||(s=this.nodeBuilder.buildCompositeNode(r));const a=this.wrapper.wrapSubrule(e,t,i);!this.isRecording()&&s&&s.length>0&&this.performSubruleAssignment(a,r,s)}performSubruleAssignment(e,t,r){const{assignment:i,isCrossRef:s}=this.getAssignment(t);if(i)this.assign(i.operator,i.feature,e,r,s);else if(!i){const a=this.current;if(Ji(a))a.value+=e.toString();else if(typeof e=="object"&&e){const o=e.$type,c=this.assignWithoutOverride(e,a);o&&(c.$type=o);const l=c;this.stack.pop(),this.stack.push(l)}}}action(e,t){if(!this.isRecording()){let r=this.current;if(!r.$cstNode&&t.feature&&t.operator){r=this.construct(!1);const s=r.$cstNode.feature;this.nodeBuilder.buildCompositeNode(s)}const i={$type:e};this.stack.pop(),this.stack.push(i),t.feature&&t.operator&&this.assign(t.operator,t.feature,r,r.$cstNode,!1)}}construct(e=!0){if(this.isRecording())return;const t=this.current;return aa(t),this.nodeBuilder.construct(t),e&&this.stack.pop(),Ji(t)?this.converter.convert(t.value,t.$cstNode):(iu(this.astReflection,t),t)}getAssignment(e){if(!this.assignmentMap.has(e)){const t=qn(e,Zt);this.assignmentMap.set(e,{assignment:t,isCrossRef:t?ei(t.terminal):!1})}return this.assignmentMap.get(e)}assign(e,t,r,i,s){const a=this.current;let o;switch(s&&typeof r=="string"?o=this.linker.buildReference(a,t,i,r):o=r,e){case"=":{a[t]=o;break}case"?=":{a[t]=!0;break}case"+=":Array.isArray(a[t])||(a[t]=[]),a[t].push(o)}}assignWithoutOverride(e,t){for(const[r,i]of Object.entries(t)){const s=e[r];s===void 0?e[r]=i:Array.isArray(s)&&Array.isArray(i)&&(i.push(...s),e[r]=i)}return e}get definitionErrors(){return this.wrapper.definitionErrors}}class Mp{buildMismatchTokenMessage(e){return un.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return un.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return un.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return un.buildEarlyExitMessage(e)}}class il extends Mp{buildMismatchTokenMessage({expected:e,actual:t}){return`Expecting ${e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`} but found \`${t.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}}class Dp extends rl{constructor(){super(...arguments),this.tokens=[],this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}action(){}construct(){}parse(e){this.resetState();const t=this.lexer.tokenize(e);return this.tokens=t.tokens,this.wrapper.input=[...this.tokens],this.mainRule.call(this.wrapper,{}),this.unorderedGroups.clear(),{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,t){const r=this.wrapper.DEFINE_RULE(nl(e.name),this.startImplementation(t).bind(this));return e.entry&&(this.mainRule=r),r}resetState(){this.elementStack=[],this.lastElementStack=[],this.nextTokenIndex=0,this.stackSize=0}startImplementation(e){return t=>{const r=this.keepStackSize();try{e(t)}finally{this.resetStackSize(r)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const e=this.elementStack.length;return this.stackSize=e,e}resetStackSize(e){this.removeUnexpectedElements(),this.stackSize=e}consume(e,t,r){this.wrapper.wrapConsume(e,t),this.isRecording()||(this.lastElementStack=[...this.elementStack,r],this.nextTokenIndex=this.currIdx+1)}subrule(e,t,r,i){this.before(r),this.wrapper.wrapSubrule(e,t,i),this.after(r)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){const t=this.elementStack.lastIndexOf(e);t>=0&&this.elementStack.splice(t)}}get currIdx(){return this.wrapper.currIdx}}const Zp={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new il};class Fp extends Gh{constructor(e,t){const r=t&&"maxLookahead"in t;super(e,Object.assign(Object.assign(Object.assign({},Zp),{lookaheadStrategy:r?new wi({maxLookahead:t.maxLookahead}):new hp}),t))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,t){return this.RULE(e,t)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,t){return this.consume(e,t)}wrapSubrule(e,t,r){return this.subrule(e,t,{ARGS:[r]})}wrapOr(e,t){this.or(e,t)}wrapOption(e,t){this.option(e,t)}wrapMany(e,t){this.many(e,t)}wrapAtLeastOne(e,t){this.atLeastOne(e,t)}}function sl(n,e,t){return Up({parser:e,tokens:t,rules:new Map,ruleNames:new Map},n),e}function Up(n,e){const t=pa(e,!1),r=j(e.rules).filter(Xe).filter(i=>t.has(i));for(const i of r){const s=Object.assign(Object.assign({},n),{consume:1,optional:1,subrule:1,many:1,or:1});s.rules.set(i.name,n.parser.rule(i,Ht(s,i.definition)))}}function Ht(n,e,t=!1){let r;if(Ft(e))r=Hp(n,e);else if(Qn(e))r=Gp(n,e);else if(Zt(e))r=Ht(n,e.terminal);else if(ei(e))r=al(n,e);else if(Ut(e))r=Bp(n,e);else if(Gs(e))r=jp(n,e);else if(na(e))r=Kp(n,e);else if(ti(e))r=Vp(n,e);else if(Xl(e)){const i=n.consume++;r=()=>n.parser.consume(i,Ct,e)}else throw new Mt(e.$cstNode,`Unexpected element type: ${e.$type}`);return ol(n,t?void 0:Wr(e),r,e.cardinality)}function Gp(n,e){const t=ar(e);return()=>n.parser.action(t,e)}function Bp(n,e){const t=e.rule.ref;if(Xe(t)){const r=n.subrule++,i=e.arguments.length>0?Wp(t,e.arguments):()=>({});return s=>n.parser.subrule(r,cl(n,t),e,i(s))}else if(Dt(t)){const r=n.consume++,i=Qi(n,t.name);return()=>n.parser.consume(r,i,e)}else if(t)Qt(t);else throw new Mt(e.$cstNode,`Undefined rule type: ${e.$type}`)}function Wp(n,e){const t=e.map(r=>Tt(r.value));return r=>{const i={};for(let s=0;s<t.length;s++){const a=n.parameters[s],o=t[s];i[a.name]=o(r)}return i}}function Tt(n){if(kt(n)){const e=Tt(n.left),t=Tt(n.right);return r=>e(r)||t(r)}else if(It(n)){const e=Tt(n.left),t=Tt(n.right);return r=>e(r)&&t(r)}else if(Wl(n)){const e=Tt(n.value);return t=>!e(t)}else if(jl(n)){const e=n.parameter.ref.name;return t=>t!==void 0&&t[e]===!0}else if(Cs(n)){const e=!!n.true;return()=>e}Qt(n)}function jp(n,e){if(e.elements.length===1)return Ht(n,e.elements[0]);{const t=[];for(const i of e.elements){const s={ALT:Ht(n,i,!0)},a=Wr(i);a&&(s.GATE=Tt(a)),t.push(s)}const r=n.or++;return i=>n.parser.alternatives(r,t.map(s=>{const a={ALT:()=>s.ALT(i)},o=s.GATE;return o&&(a.GATE=()=>o(i)),a}))}}function Kp(n,e){if(e.elements.length===1)return Ht(n,e.elements[0]);const t=[];for(const o of e.elements){const c={ALT:Ht(n,o,!0)},l=Wr(o);l&&(c.GATE=Tt(l)),t.push(c)}const r=n.or++,i=(o,c)=>{const l=c.getRuleStack().join("-");return`uGroup_${o}_${l}`},s=o=>n.parser.alternatives(r,t.map((c,l)=>{const u={ALT:()=>!0},d=n.parser;u.ALT=()=>{if(c.ALT(o),!d.isRecording()){const f=i(r,d);d.unorderedGroups.get(f)||d.unorderedGroups.set(f,[]);const y=d.unorderedGroups.get(f);typeof(y==null?void 0:y[l])=="undefined"&&(y[l]=!0)}};const h=c.GATE;return h?u.GATE=()=>h(o):u.GATE=()=>{const f=d.unorderedGroups.get(i(r,d));return!(f!=null&&f[l])},u})),a=ol(n,Wr(e),s,"*");return o=>{a(o),n.parser.isRecording()||n.parser.unorderedGroups.delete(i(r,n.parser))}}function Vp(n,e){const t=e.elements.map(r=>Ht(n,r));return r=>t.forEach(i=>i(r))}function Wr(n){if(ti(n))return n.guardCondition}function al(n,e,t=e.terminal){if(t)if(Ut(t)&&Xe(t.rule.ref)){const r=n.subrule++;return i=>n.parser.subrule(r,cl(n,t.rule.ref),e,i)}else if(Ut(t)&&Dt(t.rule.ref)){const r=n.consume++,i=Qi(n,t.rule.ref.name);return()=>n.parser.consume(r,i,e)}else if(Ft(t)){const r=n.consume++,i=Qi(n,t.value);return()=>n.parser.consume(r,i,e)}else throw new Error("Could not build cross reference parser");else{if(!e.type.ref)throw new Error("Could not resolve reference to type: "+e.type.$refText);const r=Ta(e.type.ref),i=r==null?void 0:r.terminal;if(!i)throw new Error("Could not find name assignment for type: "+ar(e.type.ref));return al(n,e,i)}}function Hp(n,e){const t=n.consume++,r=n.tokens[e.value];if(!r)throw new Error("Could not find token for keyword: "+e.value);return()=>n.parser.consume(t,r,e)}function ol(n,e,t,r){const i=e&&Tt(e);if(!r)if(i){const s=n.or++;return a=>n.parser.alternatives(s,[{ALT:()=>t(a),GATE:()=>i(a)},{ALT:Do(),GATE:()=>!i(a)}])}else return t;if(r==="*"){const s=n.many++;return a=>n.parser.many(s,{DEF:()=>t(a),GATE:i?()=>i(a):void 0})}else if(r==="+"){const s=n.many++;if(i){const a=n.or++;return o=>n.parser.alternatives(a,[{ALT:()=>n.parser.atLeastOne(s,{DEF:()=>t(o)}),GATE:()=>i(o)},{ALT:Do(),GATE:()=>!i(o)}])}else return a=>n.parser.atLeastOne(s,{DEF:()=>t(a)})}else if(r==="?"){const s=n.optional++;return a=>n.parser.optional(s,{DEF:()=>t(a),GATE:i?()=>i(a):void 0})}else Qt(r)}function cl(n,e){const t=zp(n,e),r=n.rules.get(t);if(!r)throw new Error(`Rule "${t}" not found."`);return r}function zp(n,e){if(Xe(e))return e.name;if(n.ruleNames.has(e))return n.ruleNames.get(e);{let t=e,r=t.$container,i=e.$type;for(;!Xe(r);)(ti(r)||Gs(r)||na(r))&&(i=r.elements.indexOf(t).toString()+":"+i),t=r,r=r.$container;return i=r.name+":"+i,n.ruleNames.set(e,i),i}}function Qi(n,e){const t=n.tokens[e];if(!t)throw new Error(`Token "${e}" not found."`);return t}function Yp(n){const e=n.Grammar,t=n.parser.Lexer,r=new Dp(n);return sl(e,r,t.definition),r.finalize(),r}function Xp(n){const e=Jp(n);return e.finalize(),e}function Jp(n){const e=n.Grammar,t=n.parser.Lexer,r=new bp(n);return sl(e,r,t.definition)}class ll{buildTokens(e,t){const r=j(pa(e,!1)),i=this.buildTerminalTokens(r),s=this.buildKeywordTokens(r,i,t);return i.forEach(a=>{const o=a.PATTERN;typeof o=="object"&&o&&"test"in o&&ha(o)?s.unshift(a):s.push(a)}),s}buildTerminalTokens(e){return e.filter(Dt).filter(t=>!t.fragment).map(t=>this.buildTerminalToken(t)).toArray()}buildTerminalToken(e){const t=li(e),r=this.requiresCustomPattern(t)?this.regexPatternFunction(t):t,i={name:e.name,PATTERN:r,LINE_BREAKS:!0};return e.hidden&&(i.GROUP=ha(t)?Ue.SKIPPED:"hidden"),i}requiresCustomPattern(e){return e.flags.includes("u")?!0:!!(e.source.includes("?<=")||e.source.includes("?<!"))}regexPatternFunction(e){const t=new RegExp(e,e.flags+"y");return(r,i)=>(t.lastIndex=i,t.exec(r))}buildKeywordTokens(e,t,r){return e.filter(Xe).flatMap(i=>_n(i).filter(Ft)).distinct(i=>i.value).toArray().sort((i,s)=>s.value.length-i.value.length).map(i=>this.buildKeywordToken(i,t,!!(r!=null&&r.caseInsensitive)))}buildKeywordToken(e,t,r){return{name:e.value,PATTERN:this.buildKeywordPattern(e,r),LONGER_ALT:this.findLongerAlt(e,t)}}buildKeywordPattern(e,t){return t?new RegExp(uu(e.value)):e.value}findLongerAlt(e,t){return t.reduce((r,i)=>{const s=i==null?void 0:i.PATTERN;return s!=null&&s.source&&du("^"+s.source+"$",e.value)&&r.push(i),r},[])}}class ul{convert(e,t){let r=t.grammarSource;if(ei(r)&&(r=mu(r)),Ut(r)){const i=r.rule.ref;if(!i)throw new Error("This cst node was not parsed by a rule.");return this.runConverter(i,e,t)}return e}runConverter(e,t,r){var i;switch(e.name.toUpperCase()){case"INT":return Et.convertInt(t);case"STRING":return Et.convertString(t);case"ID":return Et.convertID(t)}switch((i=Ru(e))===null||i===void 0?void 0:i.toLowerCase()){case"number":return Et.convertNumber(t);case"boolean":return Et.convertBoolean(t);case"bigint":return Et.convertBigint(t);case"date":return Et.convertDate(t);default:return t}}}var Et;(function(n){function e(l){let u="";for(let d=1;d<l.length-1;d++){const h=l.charAt(d);if(h==="\\"){const f=l.charAt(++d);u+=t(f)}else u+=h}return u}n.convertString=e;function t(l){switch(l){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"0":return"\0";default:return l}}function r(l){return l.charAt(0)==="^"?l.substring(1):l}n.convertID=r;function i(l){return parseInt(l)}n.convertInt=i;function s(l){return BigInt(l)}n.convertBigint=s;function a(l){return new Date(l)}n.convertDate=a;function o(l){return Number(l)}n.convertNumber=o;function c(l){return l.toLowerCase()==="true"}n.convertBoolean=c})(Et||(Et={}));var Te=p(16213);function Qp(){return new Promise(n=>{typeof setImmediate=="undefined"?setTimeout(n,0):setImmediate(n)})}let qi=0,dl=10;function Lg(){return qi=Date.now(),new CancellationTokenSource}function wg(n){dl=n}const jr=Symbol("OperationCancelled");function es(n){return n===jr}function rt(n){return H(this,null,function*(){if(n===Te.Ts.None)return;const e=Date.now();if(e-qi>=dl&&(qi=e,yield Qp()),n.isCancellationRequested)throw jr})}class ts{constructor(){this.promise=new Promise((e,t)=>{this.resolve=r=>(e(r),this),this.reject=r=>(t(r),this)})}}class Bn{constructor(e,t,r,i){this._uri=e,this._languageId=t,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){const t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(e,t){for(const r of e)if(Bn.isIncremental(r)){const i=pl(r.range),s=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,s)+r.text+this._content.substring(a,this._content.length);const o=Math.max(i.start.line,0),c=Math.max(i.end.line,0);let l=this._lineOffsets;const u=fl(r.text,!1,s);if(c-o===u.length)for(let h=0,f=u.length;h<f;h++)l[h+o+1]=u[h];else u.length<1e4?l.splice(o+1,c-o,...u):this._lineOffsets=l=l.slice(0,o+1).concat(u,l.slice(c+1));const d=r.text.length-(a-s);if(d!==0)for(let h=o+1+u.length,f=l.length;h<f;h++)l[h]=l[h]+d}else if(Bn.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=t}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=fl(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const t=this.getLineOffsets();let r=0,i=t.length;if(i===0)return{line:0,character:e};for(;r<i;){const a=Math.floor((r+i)/2);t[a]>e?i=a:r=a+1}const s=r-1;return e=this.ensureBeforeEOL(e,t[s]),{line:s,character:e-t[s]}}offsetAt(e){const t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;const r=t[e.line];if(e.character<=0)return r;const i=e.line+1<t.length?t[e.line+1]:this._content.length,s=Math.min(r+e.character,i);return this.ensureBeforeEOL(s,r)}ensureBeforeEOL(e,t){for(;e>t&&hl(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){const t=e;return t!=null&&typeof t.text=="string"&&t.range!==void 0&&(t.rangeLength===void 0||typeof t.rangeLength=="number")}static isFull(e){const t=e;return t!=null&&typeof t.text=="string"&&t.range===void 0&&t.rangeLength===void 0}}var ns;(function(n){function e(i,s,a,o){return new Bn(i,s,a,o)}n.create=e;function t(i,s,a){if(i instanceof Bn)return i.update(s,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}n.update=t;function r(i,s){const a=i.getText(),o=rs(s.map(qp),(u,d)=>{const h=u.range.start.line-d.range.start.line;return h===0?u.range.start.character-d.range.start.character:h});let c=0;const l=[];for(const u of o){const d=i.offsetAt(u.range.start);if(d<c)throw new Error("Overlapping edit");d>c&&l.push(a.substring(c,d)),u.newText.length&&l.push(u.newText),c=i.offsetAt(u.range.end)}return l.push(a.substr(c)),l.join("")}n.applyEdits=r})(ns||(ns={}));function rs(n,e){if(n.length<=1)return n;const t=n.length/2|0,r=n.slice(0,t),i=n.slice(t);rs(r,e),rs(i,e);let s=0,a=0,o=0;for(;s<r.length&&a<i.length;)e(r[s],i[a])<=0?n[o++]=r[s++]:n[o++]=i[a++];for(;s<r.length;)n[o++]=r[s++];for(;a<i.length;)n[o++]=i[a++];return n}function fl(n,e,t=0){const r=e?[t]:[];for(let i=0;i<n.length;i++){const s=n.charCodeAt(i);hl(s)&&(s===13&&i+1<n.length&&n.charCodeAt(i+1)===10&&i++,r.push(t+i+1))}return r}function hl(n){return n===13||n===10}function pl(n){const e=n.start,t=n.end;return e.line>t.line||e.line===t.line&&e.character>t.character?{start:t,end:e}:n}function qp(n){const e=pl(n.range);return e!==n.range?{newText:n.newText,range:e}:n}var is=p(14224),ml;(()=>{"use strict";var n={470:i=>{function s(c){if(typeof c!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(c))}function a(c,l){for(var u,d="",h=0,f=-1,y=0,T=0;T<=c.length;++T){if(T<c.length)u=c.charCodeAt(T);else{if(u===47)break;u=47}if(u===47){if(!(f===T-1||y===1))if(f!==T-1&&y===2){if(d.length<2||h!==2||d.charCodeAt(d.length-1)!==46||d.charCodeAt(d.length-2)!==46){if(d.length>2){var w=d.lastIndexOf("/");if(w!==d.length-1){w===-1?(d="",h=0):h=(d=d.slice(0,w)).length-1-d.lastIndexOf("/"),f=T,y=0;continue}}else if(d.length===2||d.length===1){d="",h=0,f=T,y=0;continue}}l&&(d.length>0?d+="/..":d="..",h=2)}else d.length>0?d+="/"+c.slice(f+1,T):d=c.slice(f+1,T),h=T-f-1;f=T,y=0}else u===46&&y!==-1?++y:y=-1}return d}var o={resolve:function(){for(var c,l="",u=!1,d=arguments.length-1;d>=-1&&!u;d--){var h;d>=0?h=arguments[d]:(c===void 0&&(c=is.cwd()),h=c),s(h),h.length!==0&&(l=h+"/"+l,u=h.charCodeAt(0)===47)}return l=a(l,!u),u?l.length>0?"/"+l:"/":l.length>0?l:"."},normalize:function(c){if(s(c),c.length===0)return".";var l=c.charCodeAt(0)===47,u=c.charCodeAt(c.length-1)===47;return(c=a(c,!l)).length!==0||l||(c="."),c.length>0&&u&&(c+="/"),l?"/"+c:c},isAbsolute:function(c){return s(c),c.length>0&&c.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var c,l=0;l<arguments.length;++l){var u=arguments[l];s(u),u.length>0&&(c===void 0?c=u:c+="/"+u)}return c===void 0?".":o.normalize(c)},relative:function(c,l){if(s(c),s(l),c===l||(c=o.resolve(c))===(l=o.resolve(l)))return"";for(var u=1;u<c.length&&c.charCodeAt(u)===47;++u);for(var d=c.length,h=d-u,f=1;f<l.length&&l.charCodeAt(f)===47;++f);for(var y=l.length-f,T=h<y?h:y,w=-1,C=0;C<=T;++C){if(C===T){if(y>T){if(l.charCodeAt(f+C)===47)return l.slice(f+C+1);if(C===0)return l.slice(f+C)}else h>T&&(c.charCodeAt(u+C)===47?w=C:C===0&&(w=0));break}var x=c.charCodeAt(u+C);if(x!==l.charCodeAt(f+C))break;x===47&&(w=C)}var _="";for(C=u+w+1;C<=d;++C)C!==d&&c.charCodeAt(C)!==47||(_.length===0?_+="..":_+="/..");return _.length>0?_+l.slice(f+w):(f+=w,l.charCodeAt(f)===47&&++f,l.slice(f))},_makeLong:function(c){return c},dirname:function(c){if(s(c),c.length===0)return".";for(var l=c.charCodeAt(0),u=l===47,d=-1,h=!0,f=c.length-1;f>=1;--f)if((l=c.charCodeAt(f))===47){if(!h){d=f;break}}else h=!1;return d===-1?u?"/":".":u&&d===1?"//":c.slice(0,d)},basename:function(c,l){if(l!==void 0&&typeof l!="string")throw new TypeError('"ext" argument must be a string');s(c);var u,d=0,h=-1,f=!0;if(l!==void 0&&l.length>0&&l.length<=c.length){if(l.length===c.length&&l===c)return"";var y=l.length-1,T=-1;for(u=c.length-1;u>=0;--u){var w=c.charCodeAt(u);if(w===47){if(!f){d=u+1;break}}else T===-1&&(f=!1,T=u+1),y>=0&&(w===l.charCodeAt(y)?--y==-1&&(h=u):(y=-1,h=T))}return d===h?h=T:h===-1&&(h=c.length),c.slice(d,h)}for(u=c.length-1;u>=0;--u)if(c.charCodeAt(u)===47){if(!f){d=u+1;break}}else h===-1&&(f=!1,h=u+1);return h===-1?"":c.slice(d,h)},extname:function(c){s(c);for(var l=-1,u=0,d=-1,h=!0,f=0,y=c.length-1;y>=0;--y){var T=c.charCodeAt(y);if(T!==47)d===-1&&(h=!1,d=y+1),T===46?l===-1?l=y:f!==1&&(f=1):l!==-1&&(f=-1);else if(!h){u=y+1;break}}return l===-1||d===-1||f===0||f===1&&l===d-1&&l===u+1?"":c.slice(l,d)},format:function(c){if(c===null||typeof c!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof c);return function(l,u){var d=u.dir||u.root,h=u.base||(u.name||"")+(u.ext||"");return d?d===u.root?d+h:d+"/"+h:h}(0,c)},parse:function(c){s(c);var l={root:"",dir:"",base:"",ext:"",name:""};if(c.length===0)return l;var u,d=c.charCodeAt(0),h=d===47;h?(l.root="/",u=1):u=0;for(var f=-1,y=0,T=-1,w=!0,C=c.length-1,x=0;C>=u;--C)if((d=c.charCodeAt(C))!==47)T===-1&&(w=!1,T=C+1),d===46?f===-1?f=C:x!==1&&(x=1):f!==-1&&(x=-1);else if(!w){y=C+1;break}return f===-1||T===-1||x===0||x===1&&f===T-1&&f===y+1?T!==-1&&(l.base=l.name=y===0&&h?c.slice(1,T):c.slice(y,T)):(y===0&&h?(l.name=c.slice(1,f),l.base=c.slice(1,T)):(l.name=c.slice(y,f),l.base=c.slice(y,T)),l.ext=c.slice(f,T)),y>0?l.dir=c.slice(0,y-1):h&&(l.dir="/"),l},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,i.exports=o}},e={};function t(i){var s=e[i];if(s!==void 0)return s.exports;var a=e[i]={exports:{}};return n[i](a,a.exports,t),a.exports}t.d=(i,s)=>{for(var a in s)t.o(s,a)&&!t.o(i,a)&&Object.defineProperty(i,a,{enumerable:!0,get:s[a]})},t.o=(i,s)=>Object.prototype.hasOwnProperty.call(i,s),t.r=i=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})};var r={};(()=>{let i;t.r(r),t.d(r,{URI:()=>h,Utils:()=>vt}),typeof is=="object"?i=is.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);const s=/^\w[\w\d+.-]*$/,a=/^\//,o=/^\/\//;function c(L,v){if(!L.scheme&&v)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${L.authority}", path: "${L.path}", query: "${L.query}", fragment: "${L.fragment}"}`);if(L.scheme&&!s.test(L.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(L.path){if(L.authority){if(!a.test(L.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(o.test(L.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}const l="",u="/",d=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class h{constructor(v,P,M,ee,V,K=!1){bt(this,"scheme");bt(this,"authority");bt(this,"path");bt(this,"query");bt(this,"fragment");typeof v=="object"?(this.scheme=v.scheme||l,this.authority=v.authority||l,this.path=v.path||l,this.query=v.query||l,this.fragment=v.fragment||l):(this.scheme=function(Pe,$e){return Pe||$e?Pe:"file"}(v,K),this.authority=P||l,this.path=function(Pe,$e){switch(Pe){case"https":case"http":case"file":$e?$e[0]!==u&&($e=u+$e):$e=u}return $e}(this.scheme,M||l),this.query=ee||l,this.fragment=V||l,c(this,K))}static isUri(v){return v instanceof h||!!v&&typeof v.authority=="string"&&typeof v.fragment=="string"&&typeof v.path=="string"&&typeof v.query=="string"&&typeof v.scheme=="string"&&typeof v.fsPath=="string"&&typeof v.with=="function"&&typeof v.toString=="function"}get fsPath(){return x(this,!1)}with(v){if(!v)return this;let{scheme:P,authority:M,path:ee,query:V,fragment:K}=v;return P===void 0?P=this.scheme:P===null&&(P=l),M===void 0?M=this.authority:M===null&&(M=l),ee===void 0?ee=this.path:ee===null&&(ee=l),V===void 0?V=this.query:V===null&&(V=l),K===void 0?K=this.fragment:K===null&&(K=l),P===this.scheme&&M===this.authority&&ee===this.path&&V===this.query&&K===this.fragment?this:new y(P,M,ee,V,K)}static parse(v,P=!1){const M=d.exec(v);return M?new y(M[2]||l,Ee(M[4]||l),Ee(M[5]||l),Ee(M[7]||l),Ee(M[9]||l),P):new y(l,l,l,l,l)}static file(v){let P=l;if(i&&(v=v.replace(/\\/g,u)),v[0]===u&&v[1]===u){const M=v.indexOf(u,2);M===-1?(P=v.substring(2),v=u):(P=v.substring(2,M),v=v.substring(M)||u)}return new y("file",P,v,l,l)}static from(v){const P=new y(v.scheme,v.authority,v.path,v.query,v.fragment);return c(P,!0),P}toString(v=!1){return _(this,v)}toJSON(){return this}static revive(v){if(v){if(v instanceof h)return v;{const P=new y(v);return P._formatted=v.external,P._fsPath=v._sep===f?v.fsPath:null,P}}return v}}const f=i?1:void 0;class y extends h{constructor(){super(...arguments);bt(this,"_formatted",null);bt(this,"_fsPath",null)}get fsPath(){return this._fsPath||(this._fsPath=x(this,!1)),this._fsPath}toString(P=!1){return P?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){const P={$mid:1};return this._fsPath&&(P.fsPath=this._fsPath,P._sep=f),this._formatted&&(P.external=this._formatted),this.path&&(P.path=this.path),this.scheme&&(P.scheme=this.scheme),this.authority&&(P.authority=this.authority),this.query&&(P.query=this.query),this.fragment&&(P.fragment=this.fragment),P}}const T={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function w(L,v,P){let M,ee=-1;for(let V=0;V<L.length;V++){const K=L.charCodeAt(V);if(K>=97&&K<=122||K>=65&&K<=90||K>=48&&K<=57||K===45||K===46||K===95||K===126||v&&K===47||P&&K===91||P&&K===93||P&&K===58)ee!==-1&&(M+=encodeURIComponent(L.substring(ee,V)),ee=-1),M!==void 0&&(M+=L.charAt(V));else{M===void 0&&(M=L.substr(0,V));const Pe=T[K];Pe!==void 0?(ee!==-1&&(M+=encodeURIComponent(L.substring(ee,V)),ee=-1),M+=Pe):ee===-1&&(ee=V)}}return ee!==-1&&(M+=encodeURIComponent(L.substring(ee))),M!==void 0?M:L}function C(L){let v;for(let P=0;P<L.length;P++){const M=L.charCodeAt(P);M===35||M===63?(v===void 0&&(v=L.substr(0,P)),v+=T[M]):v!==void 0&&(v+=L[P])}return v!==void 0?v:L}function x(L,v){let P;return P=L.authority&&L.path.length>1&&L.scheme==="file"?`//${L.authority}${L.path}`:L.path.charCodeAt(0)===47&&(L.path.charCodeAt(1)>=65&&L.path.charCodeAt(1)<=90||L.path.charCodeAt(1)>=97&&L.path.charCodeAt(1)<=122)&&L.path.charCodeAt(2)===58?v?L.path.substr(1):L.path[1].toLowerCase()+L.path.substr(2):L.path,i&&(P=P.replace(/\//g,"\\")),P}function _(L,v){const P=v?C:w;let M="",{scheme:ee,authority:V,path:K,query:Pe,fragment:$e}=L;if(ee&&(M+=ee,M+=":"),(V||ee==="file")&&(M+=u,M+=u),V){let oe=V.indexOf("@");if(oe!==-1){const zt=V.substr(0,oe);V=V.substr(oe+1),oe=zt.lastIndexOf(":"),oe===-1?M+=P(zt,!1,!1):(M+=P(zt.substr(0,oe),!1,!1),M+=":",M+=P(zt.substr(oe+1),!1,!0)),M+="@"}V=V.toLowerCase(),oe=V.lastIndexOf(":"),oe===-1?M+=P(V,!1,!0):(M+=P(V.substr(0,oe),!1,!0),M+=V.substr(oe))}if(K){if(K.length>=3&&K.charCodeAt(0)===47&&K.charCodeAt(2)===58){const oe=K.charCodeAt(1);oe>=65&&oe<=90&&(K=`/${String.fromCharCode(oe+32)}:${K.substr(3)}`)}else if(K.length>=2&&K.charCodeAt(1)===58){const oe=K.charCodeAt(0);oe>=65&&oe<=90&&(K=`${String.fromCharCode(oe+32)}:${K.substr(2)}`)}M+=P(K,!0,!1)}return Pe&&(M+="?",M+=P(Pe,!1,!1)),$e&&(M+="#",M+=v?$e:w($e,!1,!1)),M}function X(L){try{return decodeURIComponent(L)}catch(v){return L.length>3?L.substr(0,3)+X(L.substr(3)):L}}const J=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Ee(L){return L.match(J)?L.replace(J,v=>X(v)):L}var yn=t(470);const Ce=yn.posix||yn,Pt="/";var vt;(function(L){L.joinPath=function(v,...P){return v.with({path:Ce.join(v.path,...P)})},L.resolvePath=function(v,...P){let M=v.path,ee=!1;M[0]!==Pt&&(M=Pt+M,ee=!0);let V=Ce.resolve(M,...P);return ee&&V[0]===Pt&&!v.authority&&(V=V.substring(1)),v.with({path:V})},L.dirname=function(v){if(v.path.length===0||v.path===Pt)return v;let P=Ce.dirname(v.path);return P.length===1&&P.charCodeAt(0)===46&&(P=""),v.with({path:P})},L.basename=function(v){return Ce.basename(v.path)},L.extname=function(v){return Ce.extname(v.path)}})(vt||(vt={}))})(),ml=r})();const{URI:gn,Utils:Wn}=ml;var wt;(function(n){n.basename=Wn.basename,n.dirname=Wn.dirname,n.extname=Wn.extname,n.joinPath=Wn.joinPath,n.resolvePath=Wn.resolvePath;function e(r,i){return(r==null?void 0:r.toString())===(i==null?void 0:i.toString())}n.equals=e;function t(r,i){const s=typeof r=="string"?r:r.path,a=typeof i=="string"?i:i.path,o=s.split("/").filter(h=>h.length>0),c=a.split("/").filter(h=>h.length>0);let l=0;for(;l<o.length&&o[l]===c[l];l++);const u="../".repeat(o.length-l),d=c.slice(l).join("/");return u+d}n.relative=t})(wt||(wt={}));var le;(function(n){n[n.Changed=0]="Changed",n[n.Parsed=1]="Parsed",n[n.IndexedContent=2]="IndexedContent",n[n.ComputedScopes=3]="ComputedScopes",n[n.Linked=4]="Linked",n[n.IndexedReferences=5]="IndexedReferences",n[n.Validated=6]="Validated"})(le||(le={}));class em{constructor(e){this.serviceRegistry=e.ServiceRegistry,this.textDocuments=e.workspace.TextDocuments,this.fileSystemProvider=e.workspace.FileSystemProvider}fromUri(r){return H(this,arguments,function*(e,t=Te.Ts.None){const i=yield this.fileSystemProvider.readFile(e);return this.createAsync(e,i,t)})}fromTextDocument(e,t,r){return t=t!=null?t:gn.parse(e.uri),r?this.createAsync(t,e,r):this.create(t,e)}fromString(e,t,r){return r?this.createAsync(t,e,r):this.create(t,e)}fromModel(e,t){return this.create(t,{$model:e})}create(e,t){if(typeof t=="string"){const r=this.parse(e,t);return this.createLangiumDocument(r,e,void 0,t)}else if("$model"in t){const r={value:t.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(r,e)}else{const r=this.parse(e,t.getText());return this.createLangiumDocument(r,e,t)}}createAsync(e,t,r){return H(this,null,function*(){if(typeof t=="string"){const i=yield this.parseAsync(e,t,r);return this.createLangiumDocument(i,e,void 0,t)}else{const i=yield this.parseAsync(e,t.getText(),r);return this.createLangiumDocument(i,e,t)}})}createLangiumDocument(e,t,r,i){let s;if(r)s={parseResult:e,uri:t,state:le.Parsed,references:[],textDocument:r};else{const a=this.createTextDocumentGetter(t,i);s={parseResult:e,uri:t,state:le.Parsed,references:[],get textDocument(){return a()}}}return e.value.$document=s,s}update(e,t){return H(this,null,function*(){var r,i;const s=(r=e.parseResult.value.$cstNode)===null||r===void 0?void 0:r.root.fullText,a=(i=this.textDocuments)===null||i===void 0?void 0:i.get(e.uri.toString()),o=a?a.getText():yield this.fileSystemProvider.readFile(e.uri);if(a)Object.defineProperty(e,"textDocument",{value:a});else{const c=this.createTextDocumentGetter(e.uri,o);Object.defineProperty(e,"textDocument",{get:c})}return s!==o&&(e.parseResult=yield this.parseAsync(e.uri,o,t),e.parseResult.value.$document=e),e.state=le.Parsed,e})}parse(e,t){return this.serviceRegistry.getServices(e).parser.LangiumParser.parse(t)}parseAsync(e,t,r){return this.serviceRegistry.getServices(e).parser.AsyncParser.parse(t,r)}createTextDocumentGetter(e,t){const r=this.serviceRegistry;let i;return()=>i!=null?i:i=ns.create(e.toString(),r.getServices(e).LanguageMetaData.languageId,0,t!=null?t:"")}}class tm{constructor(e){this.documentMap=new Map,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory}get all(){return j(this.documentMap.values())}addDocument(e){const t=e.uri.toString();if(this.documentMap.has(t))throw new Error(`A document with the URI '${t}' is already present.`);this.documentMap.set(t,e)}getDocument(e){const t=e.toString();return this.documentMap.get(t)}getOrCreateDocument(e,t){return H(this,null,function*(){let r=this.getDocument(e);return r||(r=yield this.langiumDocumentFactory.fromUri(e,t),this.addDocument(r),r)})}createDocument(e,t,r){if(r)return this.langiumDocumentFactory.fromString(t,e,r).then(i=>(this.addDocument(i),i));{const i=this.langiumDocumentFactory.fromString(t,e);return this.addDocument(i),i}}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(e){const t=e.toString(),r=this.documentMap.get(t);return r&&(r.state=le.Changed,r.precomputedScopes=void 0,r.references=[],r.diagnostics=void 0),r}deleteDocument(e){const t=e.toString(),r=this.documentMap.get(t);return r&&(r.state=le.Changed,this.documentMap.delete(t)),r}}class nm{constructor(e){this.reflection=e.shared.AstReflection,this.langiumDocuments=()=>e.shared.workspace.LangiumDocuments,this.scopeProvider=e.references.ScopeProvider,this.astNodeLocator=e.workspace.AstNodeLocator}link(r){return H(this,arguments,function*(e,t=Te.Ts.None){for(const i of Gt(e.parseResult.value))yield rt(t),ii(i).forEach(s=>this.doLink(s,e))})}doLink(e,t){const r=e.reference;if(r._ref===void 0)try{const i=this.getCandidate(e);if(O(i))r._ref=i;else if(r._nodeDescription=i,this.langiumDocuments().hasDocument(i.documentUri)){const s=this.loadAstNode(i);r._ref=s!=null?s:this.createLinkingError(e,i)}}catch(i){r._ref=Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${r.$refText}': ${i}`})}t.references.push(r)}unlink(e){for(const t of e.references)delete t._ref,delete t._nodeDescription;e.references=[]}getCandidate(e){const r=this.scopeProvider.getScope(e).getElement(e.reference.$refText);return r!=null?r:this.createLinkingError(e)}buildReference(e,t,r,i){const s=this,a={$refNode:r,$refText:i,get ref(){var o;if(g(this._ref))return this._ref;if(R(this._nodeDescription)){const c=s.loadAstNode(this._nodeDescription);this._ref=c!=null?c:s.createLinkingError({reference:a,container:e,property:t},this._nodeDescription)}else if(this._ref===void 0){const c=s.getLinkedNode({reference:a,container:e,property:t});if(c.error&&qe(e).state<le.ComputedScopes)return;this._ref=(o=c.node)!==null&&o!==void 0?o:c.error,this._nodeDescription=c.descr}return g(this._ref)?this._ref:void 0},get $nodeDescription(){return this._nodeDescription},get error(){return O(this._ref)?this._ref:void 0}};return a}getLinkedNode(e){try{const t=this.getCandidate(e);if(O(t))return{error:t};const r=this.loadAstNode(t);return r?{node:r,descr:t}:{descr:t,error:this.createLinkingError(e,t)}}catch(t){return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${t}`})}}}loadAstNode(e){if(e.node)return e.node;const t=this.langiumDocuments().getDocument(e.documentUri);if(t)return this.astNodeLocator.getAstNode(t.parseResult.value,e.path)}createLinkingError(e,t){const r=qe(e.container);r.state<le.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${r.uri}).`);const i=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${i} named '${e.reference.$refText}'.`,targetDescription:t})}}function rm(n){return typeof n.name=="string"}class im{getName(e){if(rm(e))return e.name}getNameNode(e){return ga(e.$cstNode,"name")}}class sm{constructor(e){this.nameProvider=e.references.NameProvider,this.index=e.shared.workspace.IndexManager,this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(e){if(e){const t=Eu(e),r=e.astNode;if(t&&r){const i=r[t.feature];if(I(i))return i.ref;if(Array.isArray(i)){for(const s of i)if(I(s)&&s.$refNode&&s.$refNode.offset<=e.offset&&s.$refNode.end>=e.end)return s.ref}}if(r){const i=this.nameProvider.getNameNode(r);if(i&&(i===e||at(e,i)))return r}}}findDeclarationNode(e){const t=this.findDeclaration(e);if(t!=null&&t.$cstNode){const r=this.nameProvider.getNameNode(t);return r!=null?r:t.$cstNode}}findReferences(e,t){const r=[];if(t.includeDeclaration){const s=this.getReferenceToSelf(e);s&&r.push(s)}let i=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));return t.documentUri&&(i=i.filter(s=>wt.equals(s.sourceUri,t.documentUri))),r.push(...i),j(r)}getReferenceToSelf(e){const t=this.nameProvider.getNameNode(e);if(t){const r=qe(e),i=this.nodeLocator.getAstNodePath(e);return{sourceUri:r.uri,sourcePath:i,targetUri:r.uri,targetPath:i,segment:Ie(t),local:!0}}}}class ss{constructor(e){if(this.map=new Map,e)for(const[t,r]of e)this.add(t,r)}get size(){return re.sum(j(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(e,t){if(t===void 0)return this.map.delete(e);{const r=this.map.get(e);if(r){const i=r.indexOf(t);if(i>=0)return r.length===1?this.map.delete(e):r.splice(i,1),!0}return!1}}get(e){var t;return(t=this.map.get(e))!==null&&t!==void 0?t:[]}has(e,t){if(t===void 0)return this.map.has(e);{const r=this.map.get(e);return r?r.indexOf(t)>=0:!1}}add(e,t){return this.map.has(e)?this.map.get(e).push(t):this.map.set(e,[t]),this}addAll(e,t){return this.map.has(e)?this.map.get(e).push(...t):this.map.set(e,Array.from(t)),this}forEach(e){this.map.forEach((t,r)=>t.forEach(i=>e(i,r,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return j(this.map.entries()).flatMap(([e,t])=>t.map(r=>[e,r]))}keys(){return j(this.map.keys())}values(){return j(this.map.values()).flat()}entriesGroupedByKey(){return j(this.map.entries())}}class gl{get size(){return this.map.size}constructor(e){if(this.map=new Map,this.inverse=new Map,e)for(const[t,r]of e)this.set(t,r)}clear(){this.map.clear(),this.inverse.clear()}set(e,t){return this.map.set(e,t),this.inverse.set(t,e),this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(e){const t=this.map.get(e);return t!==void 0?(this.map.delete(e),this.inverse.delete(t),!0):!1}}class am{constructor(e){this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider}computeExports(r){return H(this,arguments,function*(e,t=Te.Ts.None){return this.computeExportsForNode(e.parseResult.value,e,void 0,t)})}computeExportsForNode(s,a){return H(this,arguments,function*(e,t,r=ni,i=Te.Ts.None){const o=[];this.exportNode(e,o,t);for(const c of r(e))yield rt(i),this.exportNode(c,o,t);return o})}exportNode(e,t,r){const i=this.nameProvider.getName(e);i&&t.push(this.descriptions.createDescription(e,i,r))}computeLocalScopes(r){return H(this,arguments,function*(e,t=Te.Ts.None){const i=e.parseResult.value,s=new ss;for(const a of _n(i))yield rt(t),this.processNode(a,e,s);return s})}processNode(e,t,r){const i=e.$container;if(i){const s=this.nameProvider.getName(e);s&&r.add(i,this.descriptions.createDescription(e,s,t))}}}class yl{constructor(e,t,r){var i;this.elements=e,this.outerScope=t,this.caseInsensitive=(i=r==null?void 0:r.caseInsensitive)!==null&&i!==void 0?i:!1}getAllElements(){return this.outerScope?this.elements.concat(this.outerScope.getAllElements()):this.elements}getElement(e){const t=this.caseInsensitive?this.elements.find(r=>r.name.toLowerCase()===e.toLowerCase()):this.elements.find(r=>r.name===e);if(t)return t;if(this.outerScope)return this.outerScope.getElement(e)}}class om{constructor(e,t,r){var i;this.elements=new Map,this.caseInsensitive=(i=r==null?void 0:r.caseInsensitive)!==null&&i!==void 0?i:!1;for(const s of e){const a=this.caseInsensitive?s.name.toLowerCase():s.name;this.elements.set(a,s)}this.outerScope=t}getElement(e){const t=this.caseInsensitive?e.toLowerCase():e,r=this.elements.get(t);if(r)return r;if(this.outerScope)return this.outerScope.getElement(e)}getAllElements(){let e=j(this.elements.values());return this.outerScope&&(e=e.concat(this.outerScope.getAllElements())),e}}const Og={getElement(){},getAllElements(){return Y}};class Tl{constructor(){this.toDispose=[],this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed(),this.clear(),this.isDisposed=!0,this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed)throw new Error("This cache has already been disposed")}}class cm extends Tl{constructor(){super(...arguments),this.cache=new Map}has(e){return this.throwIfDisposed(),this.cache.has(e)}set(e,t){this.throwIfDisposed(),this.cache.set(e,t)}get(e,t){if(this.throwIfDisposed(),this.cache.has(e))return this.cache.get(e);if(t){const r=t();return this.cache.set(e,r),r}else return}delete(e){return this.throwIfDisposed(),this.cache.delete(e)}clear(){this.throwIfDisposed(),this.cache.clear()}}class lm extends Tl{constructor(e){super(),this.cache=new Map,this.converter=e!=null?e:t=>t}has(e,t){return this.throwIfDisposed(),this.cacheForContext(e).has(t)}set(e,t,r){this.throwIfDisposed(),this.cacheForContext(e).set(t,r)}get(e,t,r){this.throwIfDisposed();const i=this.cacheForContext(e);if(i.has(t))return i.get(t);if(r){const s=r();return i.set(t,s),s}else return}delete(e,t){return this.throwIfDisposed(),this.cacheForContext(e).delete(t)}clear(e){if(this.throwIfDisposed(),e){const t=this.converter(e);this.cache.delete(t)}else this.cache.clear()}cacheForContext(e){const t=this.converter(e);let r=this.cache.get(t);return r||(r=new Map,this.cache.set(t,r)),r}}class Pg extends null{constructor(e){super(t=>t.toString()),this.onDispose(e.workspace.DocumentBuilder.onUpdate((t,r)=>{const i=t.concat(r);for(const s of i)this.clear(s)}))}}class um extends cm{constructor(e){super(),this.onDispose(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}class dm{constructor(e){this.reflection=e.shared.AstReflection,this.nameProvider=e.references.NameProvider,this.descriptions=e.workspace.AstNodeDescriptionProvider,this.indexManager=e.shared.workspace.IndexManager,this.globalScopeCache=new um(e.shared)}getScope(e){const t=[],r=this.reflection.getReferenceType(e),i=qe(e.container).precomputedScopes;if(i){let a=e.container;do{const o=i.get(a);o.length>0&&t.push(j(o).filter(c=>this.reflection.isSubtype(c.type,r))),a=a.$container}while(a)}let s=this.getGlobalScope(r,e);for(let a=t.length-1;a>=0;a--)s=this.createScope(t[a],s);return s}createScope(e,t,r){return new yl(j(e),t,r)}createScopeForNodes(e,t,r){const i=j(e).map(s=>{const a=this.nameProvider.getName(s);if(a)return this.descriptions.createDescription(s,a)}).nonNullable();return new yl(i,t,r)}getGlobalScope(e,t){return this.globalScopeCache.get(e,()=>new om(this.indexManager.allElements(e)))}}function fm(n){return typeof n.$comment=="string"}function El(n){return typeof n=="object"&&!!n&&("$ref"in n||"$error"in n)}class hm{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]),this.langiumDocuments=e.shared.workspace.LangiumDocuments,this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider,this.commentProvider=e.documentation.CommentProvider}serialize(e,t={}){const r=t==null?void 0:t.replacer,i=(a,o)=>this.replacer(a,o,t),s=r?(a,o)=>r(a,o,i):i;try{return this.currentDocument=qe(e),JSON.stringify(e,s,t==null?void 0:t.space)}finally{this.currentDocument=void 0}}deserialize(e,t={}){const r=JSON.parse(e);return this.linkNode(r,r,t),r}replacer(e,t,{refText:r,sourceText:i,textRegions:s,comments:a,uriConverter:o}){var c,l,u,d;if(!this.ignoreProperties.has(e))if(I(t)){const h=t.ref,f=r?t.$refText:void 0;if(h){const y=qe(h);let T="";this.currentDocument&&this.currentDocument!==y&&(o?T=o(y.uri,t):T=y.uri.toString());const w=this.astNodeLocator.getAstNodePath(h);return{$ref:`${T}#${w}`,$refText:f}}else return{$error:(l=(c=t.error)===null||c===void 0?void 0:c.message)!==null&&l!==void 0?l:"Could not resolve reference",$refText:f}}else if(g(t)){let h;if(s&&(h=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},t)),(!e||t.$document)&&(h!=null&&h.$textRegion)&&(h.$textRegion.documentURI=(u=this.currentDocument)===null||u===void 0?void 0:u.uri.toString())),i&&!e&&(h!=null||(h=Object.assign({},t)),h.$sourceText=(d=t.$cstNode)===null||d===void 0?void 0:d.text),a){h!=null||(h=Object.assign({},t));const f=this.commentProvider.getComment(t);f&&(h.$comment=f.replace(/\r/g,""))}return h!=null?h:t}else return t}addAstNodeRegionWithAssignmentsTo(e){const t=r=>({offset:r.offset,end:r.end,length:r.length,range:r.range});if(e.$cstNode){const r=e.$textRegion=t(e.$cstNode),i=r.assignments={};return Object.keys(e).filter(s=>!s.startsWith("$")).forEach(s=>{const a=yu(e.$cstNode,s).map(t);a.length!==0&&(i[s]=a)}),e}}linkNode(e,t,r,i,s,a){for(const[c,l]of Object.entries(e))if(Array.isArray(l))for(let u=0;u<l.length;u++){const d=l[u];El(d)?l[u]=this.reviveReference(e,c,t,d,r):g(d)&&this.linkNode(d,t,r,e,c,u)}else El(l)?e[c]=this.reviveReference(e,c,t,l,r):g(l)&&this.linkNode(l,t,r,e,c);const o=e;o.$container=i,o.$containerProperty=s,o.$containerIndex=a}reviveReference(e,t,r,i,s){let a=i.$refText,o=i.$error;if(i.$ref){const c=this.getRefNode(r,i.$ref,s.uriConverter);if(g(c))return a||(a=this.nameProvider.getName(c)),{$refText:a!=null?a:"",ref:c};o=c}if(o){const c={$refText:a!=null?a:""};return c.error={container:e,property:t,message:o,reference:c},c}else return}getRefNode(e,t,r){try{const i=t.indexOf("#");if(i===0){const c=this.astNodeLocator.getAstNode(e,t.substring(1));return c||"Could not resolve path: "+t}if(i<0){const c=r?r(t):gn.parse(t),l=this.langiumDocuments.getDocument(c);return l?l.parseResult.value:"Could not find document for URI: "+t}const s=r?r(t.substring(0,i)):gn.parse(t.substring(0,i)),a=this.langiumDocuments.getDocument(s);if(!a)return"Could not find document for URI: "+t;if(i===t.length-1)return a.parseResult.value;const o=this.astNodeLocator.getAstNode(a.parseResult.value,t.substring(i+1));return o||"Could not resolve URI: "+t}catch(i){return String(i)}}}class pm{register(e){if(!this.singleton&&!this.map){this.singleton=e;return}if(!this.map&&(this.map={},this.singleton)){for(const t of this.singleton.LanguageMetaData.fileExtensions)this.map[t]=this.singleton;this.singleton=void 0}for(const t of e.LanguageMetaData.fileExtensions)this.map[t]!==void 0&&this.map[t]!==e&&console.warn(`The file extension ${t} is used by multiple languages. It is now assigned to '${e.LanguageMetaData.languageId}'.`),this.map[t]=e}getServices(e){if(this.singleton!==void 0)return this.singleton;if(this.map===void 0)throw new Error("The service registry is empty. Use `register` to register the services of a language.");const t=wt.extname(e),r=this.map[t];if(!r)throw new Error(`The service registry contains no services for the extension '${t}'.`);return r}get all(){return this.singleton!==void 0?[this.singleton]:this.map!==void 0?Object.values(this.map):[]}}function vl(n){return{code:n}}var Kr;(function(n){n.all=["fast","slow","built-in"]})(Kr||(Kr={}));class mm{constructor(e){this.entries=new ss,this.reflection=e.shared.AstReflection}register(e,t=this,r="fast"){if(r==="built-in")throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.");for(const[i,s]of Object.entries(e)){const a=s;if(Array.isArray(a))for(const o of a){const c={check:this.wrapValidationException(o,t),category:r};this.addEntry(i,c)}else if(typeof a=="function"){const o={check:this.wrapValidationException(a,t),category:r};this.addEntry(i,o)}}}wrapValidationException(e,t){return(r,i,s)=>H(this,null,function*(){try{yield e.call(t,r,i,s)}catch(a){if(es(a))throw a;console.error("An error occurred during validation:",a);const o=a instanceof Error?a.message:String(a);a instanceof Error&&a.stack&&console.error(a.stack),i("error","An error occurred during validation: "+o,{node:r})}})}addEntry(e,t){if(e==="AstNode"){this.entries.add("AstNode",t);return}for(const r of this.reflection.getAllSubTypes(e))this.entries.add(r,t)}getChecks(e,t){let r=j(this.entries.get(e)).concat(this.entries.get("AstNode"));return t&&(r=r.filter(i=>t.includes(i.category))),r.map(i=>i.check)}}class gm{constructor(e){this.validationRegistry=e.validation.ValidationRegistry,this.metadata=e.LanguageMetaData}validateDocument(i){return H(this,arguments,function*(e,t={},r=Te.Ts.None){const s=e.parseResult,a=[];if(yield rt(r),(!t.categories||t.categories.includes("built-in"))&&(this.processLexingErrors(s,a,t),t.stopAfterLexingErrors&&a.some(o=>{var c;return((c=o.data)===null||c===void 0?void 0:c.code)===Ot.LexingError})||(this.processParsingErrors(s,a,t),t.stopAfterParsingErrors&&a.some(o=>{var c;return((c=o.data)===null||c===void 0?void 0:c.code)===Ot.ParsingError}))||(this.processLinkingErrors(e,a,t),t.stopAfterLinkingErrors&&a.some(o=>{var c;return((c=o.data)===null||c===void 0?void 0:c.code)===Ot.LinkingError}))))return a;try{a.push(...yield this.validateAst(s.value,t,r))}catch(o){if(es(o))throw o;console.error("An error occurred during validation:",o)}return yield rt(r),a})}processLexingErrors(e,t,r){for(const i of e.lexerErrors){const s={severity:as("error"),range:{start:{line:i.line-1,character:i.column-1},end:{line:i.line-1,character:i.column+i.length-1}},message:i.message,data:vl(Ot.LexingError),source:this.getSource()};t.push(s)}}processParsingErrors(e,t,r){for(const i of e.parserErrors){let s;if(isNaN(i.token.startOffset)){if("previousToken"in i){const a=i.previousToken;if(isNaN(a.startOffset)){const o={line:0,character:0};s={start:o,end:o}}else{const o={line:a.endLine-1,character:a.endColumn};s={start:o,end:o}}}}else s=G(i.token);if(s){const a={severity:as("error"),range:s,message:i.message,data:vl(Ot.ParsingError),source:this.getSource()};t.push(a)}}}processLinkingErrors(e,t,r){for(const i of e.references){const s=i.error;if(s){const a={node:s.container,property:s.property,index:s.index,data:{code:Ot.LinkingError,containerType:s.container.$type,property:s.property,refText:s.reference.$refText}};t.push(this.toDiagnostic("error",s.message,a))}}}validateAst(i,s){return H(this,arguments,function*(e,t,r=Te.Ts.None){const a=[],o=(c,l,u)=>{a.push(this.toDiagnostic(c,l,u))};return yield Promise.all(Gt(e).map(c=>H(this,null,function*(){yield rt(r);const l=this.validationRegistry.getChecks(c.$type,t.categories);for(const u of l)yield u(c,o,r)}))),a})}toDiagnostic(e,t,r){return{message:t,range:ym(r),severity:as(e),code:r.code,codeDescription:r.codeDescription,tags:r.tags,relatedInformation:r.relatedInformation,data:r.data,source:this.getSource()}}getSource(){return this.metadata.languageId}}function ym(n){if(n.range)return n.range;let e;return typeof n.property=="string"?e=ga(n.node.$cstNode,n.property,n.index):typeof n.keyword=="string"&&(e=Tu(n.node.$cstNode,n.keyword,n.index)),e!=null||(e=n.node.$cstNode),e?e.range:{start:{line:0,character:0},end:{line:0,character:0}}}function as(n){switch(n){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+n)}}var Ot;(function(n){n.LexingError="lexing-error",n.ParsingError="parsing-error",n.LinkingError="linking-error"})(Ot||(Ot={}));class Tm{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator,this.nameProvider=e.references.NameProvider}createDescription(e,t,r=qe(e)){t!=null||(t=this.nameProvider.getName(e));const i=this.astNodeLocator.getAstNodePath(e);if(!t)throw new Error(`Node at path ${i} has no name.`);let s;const a=()=>{var o;return s!=null?s:s=Ie((o=this.nameProvider.getNameNode(e))!==null&&o!==void 0?o:e.$cstNode)};return{node:e,name:t,get nameSegment(){return a()},selectionSegment:Ie(e.$cstNode),type:e.$type,documentUri:r.uri,path:i}}}class Em{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}createDescriptions(r){return H(this,arguments,function*(e,t=Te.Ts.None){const i=[],s=e.parseResult.value;for(const a of Gt(s))yield rt(t),ii(a).filter(o=>!O(o)).forEach(o=>{const c=this.createDescription(o);c&&i.push(c)});return i})}createDescription(e){const t=e.reference.$nodeDescription,r=e.reference.$refNode;if(!t||!r)return;const i=qe(e.container).uri;return{sourceUri:i,sourcePath:this.nodeLocator.getAstNodePath(e.container),targetUri:t.documentUri,targetPath:t.path,segment:Ie(r),local:wt.equals(t.documentUri,i)}}}class vm{constructor(){this.segmentSeparator="/",this.indexSeparator="@"}getAstNodePath(e){if(e.$container){const t=this.getAstNodePath(e.$container),r=this.getPathSegment(e);return t+this.segmentSeparator+r}return""}getPathSegment({$containerProperty:e,$containerIndex:t}){if(!e)throw new Error("Missing '$containerProperty' in AST node.");return t!==void 0?e+this.indexSeparator+t:e}getAstNode(e,t){return t.split(this.segmentSeparator).reduce((i,s)=>{if(!i||s.length===0)return i;const a=s.indexOf(this.indexSeparator);if(a>0){const o=s.substring(0,a),c=parseInt(s.substring(a+1)),l=i[o];return l==null?void 0:l[c]}return i[s]},e)}}class Am{constructor(e){this._ready=new ts,this.settings={},this.workspaceConfig=!1,this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var t,r;this.workspaceConfig=(r=(t=e.capabilities.workspace)===null||t===void 0?void 0:t.configuration)!==null&&r!==void 0?r:!1}initialized(e){return H(this,null,function*(){if(this.workspaceConfig){if(e.register){const t=this.serviceRegistry.all;e.register({section:t.map(r=>this.toSectionName(r.LanguageMetaData.languageId))})}if(e.fetchConfiguration){const t=this.serviceRegistry.all.map(i=>({section:this.toSectionName(i.LanguageMetaData.languageId)})),r=yield e.fetchConfiguration(t);t.forEach((i,s)=>{this.updateSectionConfiguration(i.section,r[s])})}}this._ready.resolve()})}updateConfiguration(e){e.settings&&Object.keys(e.settings).forEach(t=>{this.updateSectionConfiguration(t,e.settings[t])})}updateSectionConfiguration(e,t){this.settings[e]=t}getConfiguration(e,t){return H(this,null,function*(){yield this.ready;const r=this.toSectionName(e);if(this.settings[r])return this.settings[r][t]})}toSectionName(e){return`${e}`}}var Vr;(function(n){function e(t){return{dispose:()=>H(this,null,function*(){return yield t()})}}n.create=e})(Vr||(Vr={}));class Rm{constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}},this.updateListeners=[],this.buildPhaseListeners=new ss,this.buildState=new Map,this.documentBuildWaiters=new Map,this.currentState=le.Changed,this.langiumDocuments=e.workspace.LangiumDocuments,this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory,this.indexManager=e.workspace.IndexManager,this.serviceRegistry=e.ServiceRegistry}build(i){return H(this,arguments,function*(e,t={},r=Te.Ts.None){var s,a;for(const o of e){const c=o.uri.toString();if(o.state===le.Validated){if(typeof t.validation=="boolean"&&t.validation)o.state=le.IndexedReferences,o.diagnostics=void 0,this.buildState.delete(c);else if(typeof t.validation=="object"){const l=this.buildState.get(c),u=(s=l==null?void 0:l.result)===null||s===void 0?void 0:s.validationChecks;if(u){const h=((a=t.validation.categories)!==null&&a!==void 0?a:Kr.all).filter(f=>!u.includes(f));h.length>0&&(this.buildState.set(c,{completed:!1,options:{validation:Object.assign(Object.assign({},t.validation),{categories:h})},result:l.result}),o.state=le.IndexedReferences)}}}else this.buildState.delete(c)}this.currentState=le.Changed,yield this.emitUpdate(e.map(o=>o.uri),[]),yield this.buildDocuments(e,t,r)})}update(i,s){return H(this,arguments,function*(e,t,r=Te.Ts.None){this.currentState=le.Changed;for(const c of t)this.langiumDocuments.deleteDocument(c),this.buildState.delete(c.toString()),this.indexManager.remove(c);for(const c of e){if(!this.langiumDocuments.invalidateDocument(c)){const u=this.langiumDocumentFactory.fromModel({$type:"INVALID"},c);u.state=le.Changed,this.langiumDocuments.addDocument(u)}this.buildState.delete(c.toString())}const a=j(e).concat(t).map(c=>c.toString()).toSet();this.langiumDocuments.all.filter(c=>!a.has(c.uri.toString())&&this.shouldRelink(c,a)).forEach(c=>{this.serviceRegistry.getServices(c.uri).references.Linker.unlink(c),c.state=Math.min(c.state,le.ComputedScopes),c.diagnostics=void 0}),yield this.emitUpdate(e,t),yield rt(r);const o=this.langiumDocuments.all.filter(c=>{var l;return c.state<le.Linked||!(!((l=this.buildState.get(c.uri.toString()))===null||l===void 0)&&l.completed)}).toArray();yield this.buildDocuments(o,this.updateBuildOptions,r)})}emitUpdate(e,t){return H(this,null,function*(){yield Promise.all(this.updateListeners.map(r=>r(e,t)))})}shouldRelink(e,t){return e.references.some(r=>r.error!==void 0)?!0:this.indexManager.isAffected(e,t)}onUpdate(e){return this.updateListeners.push(e),Vr.create(()=>{const t=this.updateListeners.indexOf(e);t>=0&&this.updateListeners.splice(t,1)})}buildDocuments(e,t,r){return H(this,null,function*(){this.prepareBuild(e,t),yield this.runCancelable(e,le.Parsed,r,s=>this.langiumDocumentFactory.update(s,r)),yield this.runCancelable(e,le.IndexedContent,r,s=>this.indexManager.updateContent(s,r)),yield this.runCancelable(e,le.ComputedScopes,r,s=>H(this,null,function*(){const a=this.serviceRegistry.getServices(s.uri).references.ScopeComputation;s.precomputedScopes=yield a.computeLocalScopes(s,r)})),yield this.runCancelable(e,le.Linked,r,s=>this.serviceRegistry.getServices(s.uri).references.Linker.link(s,r)),yield this.runCancelable(e,le.IndexedReferences,r,s=>this.indexManager.updateReferences(s,r));const i=e.filter(s=>this.shouldValidate(s));yield this.runCancelable(i,le.Validated,r,s=>this.validate(s,r));for(const s of e){const a=this.buildState.get(s.uri.toString());a&&(a.completed=!0)}})}prepareBuild(e,t){for(const r of e){const i=r.uri.toString(),s=this.buildState.get(i);(!s||s.completed)&&this.buildState.set(i,{completed:!1,options:t,result:s==null?void 0:s.result})}}runCancelable(e,t,r,i){return H(this,null,function*(){const s=e.filter(a=>a.state<t);for(const a of s)yield rt(r),yield i(a),a.state=t;yield this.notifyBuildPhase(s,t,r),this.currentState=t})}onBuildPhase(e,t){return this.buildPhaseListeners.add(e,t),Vr.create(()=>{this.buildPhaseListeners.delete(e,t)})}waitUntil(e,t,r){let i;if(t&&"path"in t?i=t:r=t,r!=null||(r=Te.Ts.None),i){const s=this.langiumDocuments.getDocument(i);if(s&&s.state>e)return Promise.resolve(i)}return this.currentState>=e?Promise.resolve(void 0):r.isCancellationRequested?Promise.reject(jr):new Promise((s,a)=>{const o=this.onBuildPhase(e,()=>{if(o.dispose(),c.dispose(),i){const l=this.langiumDocuments.getDocument(i);s(l==null?void 0:l.uri)}else s(void 0)}),c=r.onCancellationRequested(()=>{o.dispose(),c.dispose(),a(jr)})})}notifyBuildPhase(e,t,r){return H(this,null,function*(){if(e.length===0)return;const i=this.buildPhaseListeners.get(t);for(const s of i)yield rt(r),yield s(e,r)})}shouldValidate(e){return!!this.getBuildOptions(e).validation}validate(e,t){return H(this,null,function*(){var r,i;const s=this.serviceRegistry.getServices(e.uri).validation.DocumentValidator,a=this.getBuildOptions(e).validation,o=typeof a=="object"?a:void 0,c=yield s.validateDocument(e,o,t);e.diagnostics?e.diagnostics.push(...c):e.diagnostics=c;const l=this.buildState.get(e.uri.toString());if(l){(r=l.result)!==null&&r!==void 0||(l.result={});const u=(i=o==null?void 0:o.categories)!==null&&i!==void 0?i:Kr.all;l.result.validationChecks?l.result.validationChecks.push(...u):l.result.validationChecks=[...u]}})}getBuildOptions(e){var t,r;return(r=(t=this.buildState.get(e.uri.toString()))===null||t===void 0?void 0:t.options)!==null&&r!==void 0?r:{}}}class Im{constructor(e){this.symbolIndex=new Map,this.symbolByTypeIndex=new lm,this.referenceIndex=new Map,this.documents=e.workspace.LangiumDocuments,this.serviceRegistry=e.ServiceRegistry,this.astReflection=e.AstReflection}findAllReferences(e,t){const r=qe(e).uri,i=[];return this.referenceIndex.forEach(s=>{s.forEach(a=>{wt.equals(a.targetUri,r)&&a.targetPath===t&&i.push(a)})}),j(i)}allElements(e,t){let r=j(this.symbolIndex.keys());return t&&(r=r.filter(i=>!t||t.has(i))),r.map(i=>this.getFileDescriptions(i,e)).flat()}getFileDescriptions(e,t){var r;return t?this.symbolByTypeIndex.get(e,t,()=>{var s;return((s=this.symbolIndex.get(e))!==null&&s!==void 0?s:[]).filter(o=>this.astReflection.isSubtype(o.type,t))}):(r=this.symbolIndex.get(e))!==null&&r!==void 0?r:[]}remove(e){const t=e.toString();this.symbolIndex.delete(t),this.symbolByTypeIndex.clear(t),this.referenceIndex.delete(t)}updateContent(r){return H(this,arguments,function*(e,t=Te.Ts.None){const s=yield this.serviceRegistry.getServices(e.uri).references.ScopeComputation.computeExports(e,t),a=e.uri.toString();this.symbolIndex.set(a,s),this.symbolByTypeIndex.clear(a)})}updateReferences(r){return H(this,arguments,function*(e,t=Te.Ts.None){const s=yield this.serviceRegistry.getServices(e.uri).workspace.ReferenceDescriptionProvider.createDescriptions(e,t);this.referenceIndex.set(e.uri.toString(),s)})}isAffected(e,t){const r=this.referenceIndex.get(e.uri.toString());return r?r.some(i=>!i.local&&t.has(i.targetUri.toString())):!1}}class km{constructor(e){this.initialBuildOptions={},this._ready=new ts,this.serviceRegistry=e.ServiceRegistry,this.langiumDocuments=e.workspace.LangiumDocuments,this.documentBuilder=e.workspace.DocumentBuilder,this.fileSystemProvider=e.workspace.FileSystemProvider,this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}initialize(e){var t;this.folders=(t=e.workspaceFolders)!==null&&t!==void 0?t:void 0}initialized(e){return this.mutex.write(t=>{var r;return this.initializeWorkspace((r=this.folders)!==null&&r!==void 0?r:[],t)})}initializeWorkspace(r){return H(this,arguments,function*(e,t=Te.Ts.None){const i=yield this.performStartup(e);yield rt(t),yield this.documentBuilder.build(i,this.initialBuildOptions,t)})}performStartup(e){return H(this,null,function*(){const t=this.serviceRegistry.all.flatMap(s=>s.LanguageMetaData.fileExtensions),r=[],i=s=>{r.push(s),this.langiumDocuments.hasDocument(s.uri)||this.langiumDocuments.addDocument(s)};return yield this.loadAdditionalDocuments(e,i),yield Promise.all(e.map(s=>[s,this.getRootFolder(s)]).map(s=>H(this,null,function*(){return this.traverseFolder(...s,t,i)}))),this._ready.resolve(),r})}loadAdditionalDocuments(e,t){return Promise.resolve()}getRootFolder(e){return gn.parse(e.uri)}traverseFolder(e,t,r,i){return H(this,null,function*(){const s=yield this.fileSystemProvider.readDirectory(t);yield Promise.all(s.map(a=>H(this,null,function*(){if(this.includeEntry(e,a,r)){if(a.isDirectory)yield this.traverseFolder(e,a.uri,r,i);else if(a.isFile){const o=yield this.langiumDocuments.getOrCreateDocument(a.uri);i(o)}}})))})}includeEntry(e,t,r){const i=wt.basename(t.uri);if(i.startsWith("."))return!1;if(t.isDirectory)return i!=="node_modules"&&i!=="out";if(t.isFile){const s=wt.extname(t.uri);return r.includes(s)}return!1}}class _m{constructor(e){const t=e.parser.TokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(t);const r=Rl(t)?Object.values(t):t;this.chevrotainLexer=new Ue(r,{positionTracking:"full"})}get definition(){return this.tokenTypes}tokenize(e){var t;const r=this.chevrotainLexer.tokenize(e);return{tokens:r.tokens,errors:r.errors,hidden:(t=r.groups.hidden)!==null&&t!==void 0?t:[]}}toTokenTypeDictionary(e){if(Rl(e))return e;const t=Al(e)?Object.values(e.modes).flat():e,r={};return t.forEach(i=>r[i.name]=i),r}}function Cm(n){return Array.isArray(n)&&(n.length===0||"name"in n[0])}function Al(n){return n&&"modes"in n&&"defaultMode"in n}function Rl(n){return!Cm(n)&&!Al(n)}function Sm(n,e,t){let r,i;typeof n=="string"?(i=e,r=t):(i=n.range.start,r=e),i||(i=ne.create(0,0));const s=Il(n),a=cs(r),o=Lm({lines:s,position:i,options:a});return bm({index:0,tokens:o,position:i})}function Nm(n,e){const t=cs(e),r=Il(n);if(r.length===0)return!1;const i=r[0],s=r[r.length-1],a=t.start,o=t.end;return!!(a!=null&&a.exec(i))&&!!(o!=null&&o.exec(s))}function Il(n){let e="";return typeof n=="string"?e=n:e=n.text,e.split(ou)}const kl=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/uy,xm=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function Lm(n){var e,t,r;const i=[];let s=n.position.line,a=n.position.character;for(let o=0;o<n.lines.length;o++){const c=o===0,l=o===n.lines.length-1;let u=n.lines[o],d=0;if(c&&n.options.start){const f=(e=n.options.start)===null||e===void 0?void 0:e.exec(u);f&&(d=f.index+f[0].length)}else{const f=(t=n.options.line)===null||t===void 0?void 0:t.exec(u);f&&(d=f.index+f[0].length)}if(l){const f=(r=n.options.end)===null||r===void 0?void 0:r.exec(u);f&&(u=u.substring(0,f.index))}if(u=u.substring(0,$m(u)),os(u,d)>=u.length){if(i.length>0){const f=ne.create(s,a);i.push({type:"break",content:"",range:q.create(f,f)})}}else{kl.lastIndex=d;const f=kl.exec(u);if(f){const y=f[0],T=f[1],w=ne.create(s,a+d),C=ne.create(s,a+d+y.length);i.push({type:"tag",content:T,range:q.create(w,C)}),d+=y.length,d=os(u,d)}if(d<u.length){const y=u.substring(d),T=Array.from(y.matchAll(xm));i.push(...wm(T,y,s,a+d))}}s++,a=0}return i.length>0&&i[i.length-1].type==="break"?i.slice(0,-1):i}function wm(n,e,t,r){const i=[];if(n.length===0){const s=ne.create(t,r),a=ne.create(t,r+e.length);i.push({type:"text",content:e,range:q.create(s,a)})}else{let s=0;for(const o of n){const c=o.index,l=e.substring(s,c);l.length>0&&i.push({type:"text",content:e.substring(s,c),range:q.create(ne.create(t,s+r),ne.create(t,c+r))});let u=l.length+1;const d=o[1];if(i.push({type:"inline-tag",content:d,range:q.create(ne.create(t,s+u+r),ne.create(t,s+u+d.length+r))}),u+=d.length,o.length===4){u+=o[2].length;const h=o[3];i.push({type:"text",content:h,range:q.create(ne.create(t,s+u+r),ne.create(t,s+u+h.length+r))})}else i.push({type:"text",content:"",range:q.create(ne.create(t,s+u+r),ne.create(t,s+u+r))});s=c+o[0].length}const a=e.substring(s);a.length>0&&i.push({type:"text",content:a,range:q.create(ne.create(t,s+r),ne.create(t,s+r+a.length))})}return i}const Om=/\S/,Pm=/\s*$/;function os(n,e){const t=n.substring(e).match(Om);return t?e+t.index:n.length}function $m(n){const e=n.match(Pm);if(e&&typeof e.index=="number")return e.index}function bm(n){var e,t,r,i;const s=ne.create(n.position.line,n.position.character);if(n.tokens.length===0)return new Nl([],q.create(s,s));const a=[];for(;n.index<n.tokens.length;){const l=Mm(n,a[a.length-1]);l&&a.push(l)}const o=(t=(e=a[0])===null||e===void 0?void 0:e.range.start)!==null&&t!==void 0?t:s,c=(i=(r=a[a.length-1])===null||r===void 0?void 0:r.range.end)!==null&&i!==void 0?i:s;return new Nl(a,q.create(o,c))}function Mm(n,e){const t=n.tokens[n.index];if(t.type==="tag")return Cl(n,!1);if(t.type==="text"||t.type==="inline-tag")return _l(n);Dm(t,e),n.index++}function Dm(n,e){if(e){const t=new xl("",n.range);"inlines"in e?e.inlines.push(t):e.content.inlines.push(t)}}function _l(n){let e=n.tokens[n.index];const t=e;let r=e;const i=[];for(;e&&e.type!=="break"&&e.type!=="tag";)i.push(Zm(n)),r=e,e=n.tokens[n.index];return new ds(i,q.create(t.range.start,r.range.end))}function Zm(n){return n.tokens[n.index].type==="inline-tag"?Cl(n,!0):Sl(n)}function Cl(n,e){const t=n.tokens[n.index++],r=t.content.substring(1),i=n.tokens[n.index];if((i==null?void 0:i.type)==="text")if(e){const s=Sl(n);return new us(r,new ds([s],s.range),e,q.create(t.range.start,s.range.end))}else{const s=_l(n);return new us(r,s,e,q.create(t.range.start,s.range.end))}else{const s=t.range;return new us(r,new ds([],s),e,s)}}function Sl(n){const e=n.tokens[n.index++];return new xl(e.content,e.range)}function cs(n){if(!n)return cs({start:"/**",end:"*/",line:"*"});const{start:e,end:t,line:r}=n;return{start:ls(e,!0),end:ls(t,!1),line:ls(r,!0)}}function ls(n,e){if(typeof n=="string"||typeof n=="object"){const t=typeof n=="string"?sr(n):n.source;return e?new RegExp(`^\\s*${t}`):new RegExp(`\\s*${t}\\s*$`)}else return n}class Nl{constructor(e,t){this.elements=e,this.range=t}getTag(e){return this.getAllTags().find(t=>t.name===e)}getTags(e){return this.getAllTags().filter(t=>t.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(const t of this.elements)if(e.length===0)e=t.toString();else{const r=t.toString();e+=Ll(e)+r}return e.trim()}toMarkdown(e){let t="";for(const r of this.elements)if(t.length===0)t=r.toMarkdown(e);else{const i=r.toMarkdown(e);t+=Ll(t)+i}return t.trim()}}class us{constructor(e,t,r,i){this.name=e,this.content=t,this.inline=r,this.range=i}toString(){let e=`@${this.name}`;const t=this.content.toString();return this.content.inlines.length===1?e=`${e} ${t}`:this.content.inlines.length>1&&(e=`${e}
${t}`),this.inline?`{${e}}`:e}toMarkdown(e){var t,r;return(r=(t=e==null?void 0:e.renderTag)===null||t===void 0?void 0:t.call(e,this))!==null&&r!==void 0?r:this.toMarkdownDefault(e)}toMarkdownDefault(e){const t=this.content.toMarkdown(e);if(this.inline){const s=Fm(this.name,t,e!=null?e:{});if(typeof s=="string")return s}let r="";(e==null?void 0:e.tag)==="italic"||(e==null?void 0:e.tag)===void 0?r="*":(e==null?void 0:e.tag)==="bold"?r="**":(e==null?void 0:e.tag)==="bold-italic"&&(r="***");let i=`${r}@${this.name}${r}`;return this.content.inlines.length===1?i=`${i} \u2014 ${t}`:this.content.inlines.length>1&&(i=`${i}
${t}`),this.inline?`{${i}}`:i}}function Fm(n,e,t){var r,i;if(n==="linkplain"||n==="linkcode"||n==="link"){const s=e.indexOf(" ");let a=e;if(s>0){const c=os(e,s);a=e.substring(c),e=e.substring(0,s)}return(n==="linkcode"||n==="link"&&t.link==="code")&&(a=`\`${a}\``),(i=(r=t.renderLink)===null||r===void 0?void 0:r.call(t,e,a))!==null&&i!==void 0?i:Um(e,a)}}function Um(n,e){try{return gn.parse(n,!0),`[${e}](${n})`}catch(t){return n}}class ds{constructor(e,t){this.inlines=e,this.range=t}toString(){let e="";for(let t=0;t<this.inlines.length;t++){const r=this.inlines[t],i=this.inlines[t+1];e+=r.toString(),i&&i.range.start.line>r.range.start.line&&(e+=`
`)}return e}toMarkdown(e){let t="";for(let r=0;r<this.inlines.length;r++){const i=this.inlines[r],s=this.inlines[r+1];t+=i.toMarkdown(e),s&&s.range.start.line>i.range.start.line&&(t+=`
`)}return t}}class xl{constructor(e,t){this.text=e,this.range=t}toString(){return this.text}toMarkdown(){return this.text}}function Ll(n){return n.endsWith(`
`)?`
`:`

`}class Gm{constructor(e){this.indexManager=e.shared.workspace.IndexManager,this.commentProvider=e.documentation.CommentProvider}getDocumentation(e){const t=this.commentProvider.getComment(e);if(t&&Nm(t))return Sm(t).toMarkdown({renderLink:(i,s)=>this.documentationLinkRenderer(e,i,s),renderTag:i=>this.documentationTagRenderer(e,i)})}documentationLinkRenderer(e,t,r){var i;const s=(i=this.findNameInPrecomputedScopes(e,t))!==null&&i!==void 0?i:this.findNameInGlobalScope(e,t);if(s&&s.nameSegment){const a=s.nameSegment.range.start.line+1,o=s.nameSegment.range.start.character+1,c=s.documentUri.with({fragment:`L${a},${o}`});return`[${r}](${c.toString()})`}else return}documentationTagRenderer(e,t){}findNameInPrecomputedScopes(e,t){const i=qe(e).precomputedScopes;if(!i)return;let s=e;do{const o=i.get(s).find(c=>c.name===t);if(o)return o;s=s.$container}while(s)}findNameInGlobalScope(e,t){return this.indexManager.allElements().find(i=>i.name===t)}}class Bm{constructor(e){this.grammarConfig=()=>e.parser.GrammarConfig}getComment(e){var t;return fm(e)?e.$comment:(t=Xr(e.$cstNode,this.grammarConfig().multilineCommentRules))===null||t===void 0?void 0:t.text}}var $g=p(38711);class Wm{constructor(e){this.syncParser=e.parser.LangiumParser}parse(e){return Promise.resolve(this.syncParser.parse(e))}}class bg{constructor(e){this.threadCount=8,this.terminationDelay=200,this.workerPool=[],this.queue=[],this.hydrator=e.serializer.Hydrator}initializeWorkers(){for(;this.workerPool.length<this.threadCount;){const e=this.createWorker();e.onReady(()=>{if(this.queue.length>0){const t=this.queue.shift();t&&(e.lock(),t.resolve(e))}}),this.workerPool.push(e)}}parse(e,t){return H(this,null,function*(){const r=yield this.acquireParserWorker(t),i=new Deferred;let s;const a=t.onCancellationRequested(()=>{s=setTimeout(()=>{this.terminateWorker(r)},this.terminationDelay)});return r.parse(e).then(o=>{const c=this.hydrator.hydrate(o);i.resolve(c)}).catch(o=>{i.reject(o)}).finally(()=>{a.dispose(),clearTimeout(s)}),i.promise})}terminateWorker(e){e.terminate();const t=this.workerPool.indexOf(e);t>=0&&this.workerPool.splice(t,1)}acquireParserWorker(e){return H(this,null,function*(){this.initializeWorkers();for(const r of this.workerPool)if(r.ready)return r.lock(),r;const t=new Deferred;return e.onCancellationRequested(()=>{const r=this.queue.indexOf(t);r>=0&&this.queue.splice(r,1),t.reject(OperationCancelled)}),this.queue.push(t),t.promise})}}class Mg{get ready(){return this._ready}get onReady(){return this.onReadyEmitter.event}constructor(e,t,r,i){this.onReadyEmitter=new Emitter,this.deferred=new Deferred,this._ready=!0,this._parsing=!1,this.sendMessage=e,this._terminate=i,t(s=>{const a=s;this.deferred.resolve(a),this.unlock()}),r(s=>{this.deferred.reject(s),this.unlock()})}terminate(){this.deferred.reject(OperationCancelled),this._terminate()}lock(){this._ready=!1}unlock(){this._parsing=!1,this._ready=!0,this.onReadyEmitter.fire()}parse(e){if(this._parsing)throw new Error("Parser worker is busy");return this._parsing=!0,this.deferred=new Deferred,this.sendMessage(e),this.deferred.promise}}class jm{constructor(){this.previousTokenSource=new Te.AU,this.writeQueue=[],this.readQueue=[],this.done=!0}write(e){this.cancelWrite();const t=new Te.AU;return this.previousTokenSource=t,this.enqueue(this.writeQueue,e,t.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,t,r){const i=new ts,s={action:t,deferred:i,cancellationToken:r!=null?r:Te.Ts.None};return e.push(s),this.performNextOperation(),i.promise}performNextOperation(){return H(this,null,function*(){if(!this.done)return;const e=[];if(this.writeQueue.length>0)e.push(this.writeQueue.shift());else if(this.readQueue.length>0)e.push(...this.readQueue.splice(0,this.readQueue.length));else return;this.done=!1,yield Promise.all(e.map(s=>H(this,[s],function*({action:t,deferred:r,cancellationToken:i}){try{const a=yield Promise.resolve().then(()=>t(i));r.resolve(a)}catch(a){es(a)?r.resolve(void 0):r.reject(a)}}))),this.done=!0,this.performNextOperation()})}cancelWrite(){this.previousTokenSource.cancel()}}class Km{constructor(e){this.grammarElementIdMap=new gl,this.tokenTypeIdMap=new gl,this.grammar=e.Grammar,this.lexer=e.parser.Lexer,this.linker=e.references.Linker}dehydrate(e){return{lexerErrors:e.lexerErrors.map(t=>Object.assign({},t)),parserErrors:e.parserErrors.map(t=>Object.assign({},t)),value:this.dehydrateAstNode(e.value,this.createDehyrationContext(e.value))}}createDehyrationContext(e){const t=new Map,r=new Map;for(const i of Gt(e))t.set(i,{});if(e.$cstNode)for(const i of ie(e.$cstNode))r.set(i,{});return{astNodes:t,cstNodes:r}}dehydrateAstNode(e,t){const r=t.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,e.$cstNode!==void 0&&(r.$cstNode=this.dehydrateCstNode(e.$cstNode,t));for(const[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){const a=[];r[i]=a;for(const o of s)g(o)?a.push(this.dehydrateAstNode(o,t)):I(o)?a.push(this.dehydrateReference(o,t)):a.push(o)}else g(s)?r[i]=this.dehydrateAstNode(s,t):I(s)?r[i]=this.dehydrateReference(s,t):s!==void 0&&(r[i]=s);return r}dehydrateReference(e,t){const r={};return r.$refText=e.$refText,e.$refNode&&(r.$refNode=t.cstNodes.get(e.$refNode)),r}dehydrateCstNode(e,t){const r=t.cstNodes.get(e);return N(e)?r.fullText=e.fullText:r.grammarSource=this.getGrammarElementId(e.grammarSource),r.hidden=e.hidden,r.astNode=t.astNodes.get(e.astNode),E(e)?r.content=e.content.map(i=>this.dehydrateCstNode(i,t)):A(e)&&(r.tokenType=e.tokenType.name,r.offset=e.offset,r.length=e.length,r.startLine=e.range.start.line,r.startColumn=e.range.start.character,r.endLine=e.range.end.line,r.endColumn=e.range.end.character),r}hydrate(e){const t=e.value,r=this.createHydrationContext(t);return"$cstNode"in t&&this.hydrateCstNode(t.$cstNode,r),{lexerErrors:e.lexerErrors,parserErrors:e.parserErrors,value:this.hydrateAstNode(t,r)}}createHydrationContext(e){const t=new Map,r=new Map;for(const s of Gt(e))t.set(s,{});let i;if(e.$cstNode)for(const s of ie(e.$cstNode)){let a;"fullText"in s?(a=new el(s.fullText),i=a):"content"in s?a=new zi:"tokenType"in s&&(a=this.hydrateCstLeafNode(s)),a&&(r.set(s,a),a.root=i)}return{astNodes:t,cstNodes:r}}hydrateAstNode(e,t){const r=t.astNodes.get(e);r.$type=e.$type,r.$containerIndex=e.$containerIndex,r.$containerProperty=e.$containerProperty,e.$cstNode&&(r.$cstNode=t.cstNodes.get(e.$cstNode));for(const[i,s]of Object.entries(e))if(!i.startsWith("$"))if(Array.isArray(s)){const a=[];r[i]=a;for(const o of s)g(o)?a.push(this.setParent(this.hydrateAstNode(o,t),r)):I(o)?a.push(this.hydrateReference(o,r,i,t)):a.push(o)}else g(s)?r[i]=this.setParent(this.hydrateAstNode(s,t),r):I(s)?r[i]=this.hydrateReference(s,r,i,t):s!==void 0&&(r[i]=s);return r}setParent(e,t){return e.$container=t,e}hydrateReference(e,t,r,i){return this.linker.buildReference(t,r,i.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,t,r=0){const i=t.cstNodes.get(e);if(typeof e.grammarSource=="number"&&(i.grammarSource=this.getGrammarElement(e.grammarSource)),i.astNode=t.astNodes.get(e.astNode),E(i))for(const s of e.content){const a=this.hydrateCstNode(s,t,r++);i.content.push(a)}return i}hydrateCstLeafNode(e){const t=this.getTokenType(e.tokenType),r=e.offset,i=e.length,s=e.startLine,a=e.startColumn,o=e.endLine,c=e.endColumn,l=e.hidden;return new Hi(r,i,{start:{line:s,character:a},end:{line:o,character:c}},t,l)}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(e){return this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap(),this.grammarElementIdMap.get(e)}getGrammarElement(e){this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap();const t=this.grammarElementIdMap.getKey(e);if(t)return t;throw new Error("Invalid grammar element id: "+e)}createGrammarElementIdMap(){let e=0;for(const t of Gt(this.grammar))Qr(t)&&this.grammarElementIdMap.set(t,e++)}}function wl(n){return{documentation:{CommentProvider:e=>new Bm(e),DocumentationProvider:e=>new Gm(e)},parser:{AsyncParser:e=>new Wm(e),GrammarConfig:e=>Nu(e),LangiumParser:e=>Xp(e),CompletionParser:e=>Yp(e),ValueConverter:()=>new ul,TokenBuilder:()=>new ll,Lexer:e=>new _m(e),ParserErrorMessageProvider:()=>new il},workspace:{AstNodeLocator:()=>new vm,AstNodeDescriptionProvider:e=>new Tm(e),ReferenceDescriptionProvider:e=>new Em(e)},references:{Linker:e=>new nm(e),NameProvider:()=>new im,ScopeProvider:e=>new dm(e),ScopeComputation:e=>new am(e),References:e=>new sm(e)},serializer:{Hydrator:e=>new Km(e),JsonSerializer:e=>new hm(e)},validation:{DocumentValidator:e=>new gm(e),ValidationRegistry:e=>new mm(e)},shared:()=>n.shared}}function Ol(n){return{ServiceRegistry:()=>new pm,workspace:{LangiumDocuments:e=>new tm(e),LangiumDocumentFactory:e=>new em(e),DocumentBuilder:e=>new Rm(e),IndexManager:e=>new Im(e),WorkspaceManager:e=>new km(e),FileSystemProvider:e=>n.fileSystemProvider(e),WorkspaceLock:()=>new jm,ConfigurationProvider:e=>new Am(e)}}}var Pl;(function(n){n.merge=(e,t)=>Hr(Hr({},e),t)})(Pl||(Pl={}));function fs(n,e,t,r,i,s,a,o,c){const l=[n,e,t,r,i,s,a,o,c].reduce(Hr,{});return $l(l)}const hs=Symbol("isProxy");function Vm(n){if(n&&n[hs])for(const e of Object.values(n))Vm(e);return n}function $l(n,e){const t=new Proxy({},{deleteProperty:()=>!1,get:(r,i)=>Ml(r,i,n,e||t),getOwnPropertyDescriptor:(r,i)=>(Ml(r,i,n,e||t),Object.getOwnPropertyDescriptor(r,i)),has:(r,i)=>i in n,ownKeys:()=>[...Reflect.ownKeys(n),hs]});return t[hs]=!0,t}const bl=Symbol();function Ml(n,e,t,r){if(e in n){if(n[e]instanceof Error)throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:n[e]});if(n[e]===bl)throw new Error('Cycle detected. Please make "'+String(e)+'" lazy. See https://langium.org/docs/configuration-services/#resolving-cyclic-dependencies');return n[e]}else if(e in t){const i=t[e];n[e]=bl;try{n[e]=typeof i=="function"?i(r):$l(i,r)}catch(s){throw n[e]=s instanceof Error?s:void 0,s}return n[e]}else return}function Hr(n,e){if(e){for(const[t,r]of Object.entries(e))if(r!==void 0){const i=n[t];i!==null&&r!==null&&typeof i=="object"&&typeof r=="object"?n[t]=Hr(i,r):n[t]=r}}return n}class Hm{readFile(){throw new Error("No file system is available.")}readDirectory(){return H(this,null,function*(){return[]})}}const Dl={fileSystemProvider:()=>new Hm},zm={Grammar:()=>{},LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})},Ym={AstReflection:()=>new sa};function Xm(){const n=fs(Ol(Dl),Ym),e=fs(wl({shared:n}),zm);return n.ServiceRegistry.register(e),e}function Jm(n){var e;const t=Xm(),r=t.serializer.JsonSerializer.deserialize(n);return t.shared.workspace.LangiumDocumentFactory.fromModel(r,gn.parse(`memory://${(e=r.name)!==null&&e!==void 0?e:"grammar"}.langium`)),r}},68948:function(Q,k,p){var g=p(98111);function I(R,O,b){for(var E=-1,A=R.length;++E<A;){var N=R[E],S=O(N);if(S!=null&&(U===void 0?S===S&&!(0,g.Z)(S):b(S,U)))var U=S,Z=N}return Z}k.Z=I},53667:function(Q,k){function p(g,I){return g<I}k.Z=p},51135:function(Q,k,p){var g=p(31342),I=p(49634);function R(O,b){var E=-1,A=(0,I.Z)(O)?Array(O.length):[];return(0,g.Z)(O,function(N,S,U){A[++E]=b(N,S,U)}),A}k.Z=R},62304:function(Q,k,p){var g=p(49084),I=p(23188),R=p(78822);function O(b,E,A){for(var N=-1,S=E.length,U={};++N<S;){var Z=E[N],Y=(0,g.Z)(b,Z);A(Y,Z)&&(0,I.Z)(U,(0,R.Z)(Z,b),Y)}return U}k.Z=O},23188:function(Q,k,p){var g=p(61572),I=p(78822),R=p(99313),O=p(82433),b=p(13383);function E(A,N,S,U){if(!(0,O.Z)(A))return A;N=(0,I.Z)(N,A);for(var Z=-1,Y=N.length,z=Y-1,j=A;j!=null&&++Z<Y;){var te=(0,b.Z)(N[Z]),re=S;if(te==="__proto__"||te==="constructor"||te==="prototype")return A;if(Z!=z){var ie=j[te];re=U?U(ie,te,j):void 0,re===void 0&&(re=(0,O.Z)(ie)?ie:(0,R.Z)(N[Z+1])?[]:{})}(0,g.Z)(j,te,re),j=j[te]}return A}k.Z=E},25043:function(Q,k,p){var g=p(67062),I=4;function R(O){return(0,g.Z)(O,I)}k.Z=R},70374:function(Q,k,p){var g=p(19851),I=p(54523),R=p(61833),O=p(32817),b=Object.prototype,E=b.hasOwnProperty,A=(0,g.Z)(function(N,S){N=Object(N);var U=-1,Z=S.length,Y=Z>2?S[2]:void 0;for(Y&&(0,R.Z)(S[0],S[1],Y)&&(Z=1);++U<Z;)for(var z=S[U],j=(0,O.Z)(z),te=-1,re=j.length;++te<re;){var ie=j[te],st=N[ie];(st===void 0||(0,I.Z)(st,b[ie])&&!E.call(N,ie))&&(N[ie]=z[ie])}return N});k.Z=A},95189:function(Q,k,p){p.d(k,{Z:function(){return Y}});var g=p(78094),I=p(49634),R=p(77251);function O(z){return function(j,te,re){var ie=Object(j);if(!(0,I.Z)(j)){var st=(0,g.Z)(te,3);j=(0,R.Z)(j),te=function(G){return st(ie[G],G,ie)}}var at=z(j,te,re);return at>-1?ie[st?j[at]:at]:void 0}}var b=O,E=p(57394),A=p(50140),N=Math.max;function S(z,j,te){var re=z==null?0:z.length;if(!re)return-1;var ie=te==null?0:(0,A.Z)(te);return ie<0&&(ie=N(re+ie,0)),(0,E.Z)(z,(0,g.Z)(j,3),ie)}var U=S,Z=b(U),Y=Z},23351:function(Q,k,p){var g=p(84887);function I(R){var O=R==null?0:R.length;return O?(0,g.Z)(R,1):[]}k.Z=I},27431:function(Q,k,p){p.d(k,{Z:function(){return A}});var g=Object.prototype,I=g.hasOwnProperty;function R(N,S){return N!=null&&I.call(N,S)}var O=R,b=p(31609);function E(N,S){return N!=null&&(0,b.Z)(N,S,O)}var A=E},83873:function(Q,k,p){var g=p(33918),I=p(56052),R=p(13795),O="[object String]";function b(E){return typeof E=="string"||!(0,I.Z)(E)&&(0,R.Z)(E)&&(0,g.Z)(E)==O}k.Z=b},82593:function(Q,k){function p(g){var I=g==null?0:g.length;return I?g[I-1]:void 0}k.Z=p},55247:function(Q,k,p){var g=p(28019),I=p(78094),R=p(51135),O=p(56052);function b(E,A){var N=(0,O.Z)(E)?g.Z:R.Z;return N(E,(0,I.Z)(A,3))}k.Z=b},48791:function(Q,k,p){var g=p(68948),I=p(53667),R=p(76402);function O(b){return b&&b.length?(0,g.Z)(b,R.Z,I.Z):void 0}k.Z=O},32200:function(Q,k,p){p.d(k,{Z:function(){return at}});var g=/\s/;function I(G){for(var Ie=G.length;Ie--&&g.test(G.charAt(Ie)););return Ie}var R=I,O=/^\s+/;function b(G){return G&&G.slice(0,R(G)+1).replace(O,"")}var E=b,A=p(82433),N=p(98111),S=NaN,U=/^[-+]0x[0-9a-f]+$/i,Z=/^0b[01]+$/i,Y=/^0o[0-7]+$/i,z=parseInt;function j(G){if(typeof G=="number")return G;if((0,N.Z)(G))return S;if((0,A.Z)(G)){var Ie=typeof G.valueOf=="function"?G.valueOf():G;G=(0,A.Z)(Ie)?Ie+"":Ie}if(typeof G!="string")return G===0?G:+G;G=E(G);var Ge=Z.test(G);return Ge||Y.test(G)?z(G.slice(2),Ge?2:8):U.test(G)?S:+G}var te=j,re=1/0,ie=17976931348623157e292;function st(G){if(!G)return G===0?G:0;if(G=te(G),G===re||G===-re){var Ie=G<0?-1:1;return Ie*ie}return G===G?G:0}var at=st},50140:function(Q,k,p){var g=p(32200);function I(R){var O=(0,g.Z)(R),b=O%1;return O===O?b?O-b:O:0}k.Z=I},91581:function(Q,k,p){var g=p(63815);function I(R){return R&&R.length?(0,g.Z)(R):[]}k.Z=I}}]);
}());