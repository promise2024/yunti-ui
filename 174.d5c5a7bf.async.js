!(function(){var jhe=Object.defineProperty,Uhe=Object.defineProperties;var Vhe=Object.getOwnPropertyDescriptors;var C2=Object.getOwnPropertySymbols;var CF=Object.prototype.hasOwnProperty,EF=Object.prototype.propertyIsEnumerable;var wn=Math.pow,AF=(ii,oi,de)=>oi in ii?jhe(ii,oi,{enumerable:!0,configurable:!0,writable:!0,value:de}):ii[oi]=de,Z=(ii,oi)=>{for(var de in oi||(oi={}))CF.call(oi,de)&&AF(ii,de,oi[de]);if(C2)for(var de of C2(oi))EF.call(oi,de)&&AF(ii,de,oi[de]);return ii},ge=(ii,oi)=>Uhe(ii,Vhe(oi));var Cn=(ii,oi)=>{var de={};for(var st in ii)CF.call(ii,st)&&oi.indexOf(st)<0&&(de[st]=ii[st]);if(ii!=null&&C2)for(var st of C2(ii))oi.indexOf(st)<0&&EF.call(ii,st)&&(de[st]=ii[st]);return de};var qi=(ii,oi,de)=>new Promise((st,R)=>{var ht=X=>{try{St(de.next(X))}catch(Ae){R(Ae)}},Gt=X=>{try{St(de.throw(X))}catch(Ae){R(Ae)}},St=X=>X.done?st(X.value):Promise.resolve(X.value).then(ht,Gt);St((de=de.apply(ii,oi)).next())});(self.webpackChunk_yuntijs_ui=self.webpackChunk_yuntijs_ui||[]).push([[174],{99549:function(ii,oi,de){"use strict";de.d(oi,{ZP:function(){return Xt}});var st=de(28484),R=de(46060),ht=de(36866),Gt=de(63039),St=de(75271),X=de(90142),Ae=de(1631),yt=de(62504),Ft=de(92462),be,Et,tn,fn,Jo,J=(0,Ft.kc)(function(Lr,_n){var Fn=Lr.css,Ii=Lr.token,ur=Lr.responsive;return{editor:Fn(be||(be=(0,yt.Z)([`
      width: inherit;
      min-height: inherit;
    `]))),left:Fn(Et||(Et=(0,yt.Z)([`
      overflow: auto;
      position: relative;

      `,`
    `])),!_n&&Fn(tn||(tn=(0,yt.Z)([`
        padding-block: 40px;
        padding-inline: 24px;
      `])))),leva:Fn(fn||(fn=(0,yt.Z)([`
      --leva-sizes-controlWidth: 66%;
      --leva-colors-elevation1: `,`;
      --leva-colors-elevation2: transparent;
      --leva-colors-elevation3: `,`;
      --leva-colors-accent1: `,`;
      --leva-colors-accent2: `,`;
      --leva-colors-accent3: `,`;
      --leva-colors-highlight1: `,`;
      --leva-colors-highlight2: `,`;
      --leva-colors-highlight3: `,`;
      --leva-colors-vivid1: `,`;
      --leva-shadows-level1: unset;
      --leva-shadows-level2: unset;
      --leva-fonts-mono: `,`;

      overflow: auto;

      width: 100%;
      height: 100%;
      padding-block: 6px;
      padding-inline: 0;

      > div {
        background: transparent;

        > div {
          background: transparent;
        }
      }

      input:checked + label > svg {
        stroke: `,`;
      }

      button {
        --leva-colors-accent2: `,`;
      }
    `])),Ii.colorFillSecondary,Ii.colorFillSecondary,Ii.colorPrimary,Ii.colorPrimaryHover,Ii.colorPrimaryActive,Ii.colorTextTertiary,Ii.colorTextSecondary,Ii.colorText,Ii.colorWarning,Ii.fontFamilyCode,Ii.colorBgLayout,Ii.colorFillSecondary),right:Fn(Jo||(Jo=(0,yt.Z)([`
      background: `,`;

      `,` {
        .draggable-panel-fixed {
          width: 100% !important;
        }
      }
    `])),Ii.colorBgLayout,ur.mobile)}}),xn=de(52676),Yr=["levaStore","noPadding","className","children"],mo=(0,St.memo)(function(Lr){var _n=Lr.levaStore,Fn=Lr.noPadding,Ii=Lr.className,ur=Lr.children,$d=(0,R.Z)(Lr,Yr),oa=(0,ht.F)(),hi=oa.mobile,wi=J(!!Fn),Xe=wi.styles,Re=wi.cx;return(0,xn.jsxs)(X.D,(0,st.Z)((0,st.Z)({align:"stretch",className:Re(Xe.editor,Ii),horizontal:!hi,justify:"stretch"},$d),{},{children:[(0,xn.jsx)(X.D,{align:"center",className:Xe.left,flex:1,justify:"center",children:ur}),(0,xn.jsx)(Ae.Z,{className:Xe.right,minWidth:280,placement:hi?"bottom":"right",children:(0,xn.jsxs)("div",{className:Xe.leva,children:[(0,xn.jsx)(Gt.MT,{fill:!0,flat:!0,store:_n,titleBar:!1})," "]})})]}))}),Xt=mo},60174:function(ii,oi,de){"use strict";de.r(oi),de.d(oi,{ActionIcon:function(){return st.Z},ActionIconGroup:function(){return mo},ActionsBar:function(){return js},Alert:function(){return ft},Avatar:function(){return Yl.Z},BackBottom:function(){return T2},Burger:function(){return vo.Z},ChatHeader:function(){return t1},ChatHeaderTitle:function(){return O2},ChatInputActionBar:function(){return z2},ChatInputArea:function(){return VT},ChatInputAreaInner:function(){return km},ChatItem:function(){return $1},ChatList:function(){return _3},ChatSendButton:function(){return u1},CodeEditor:function(){return QT},ColorScales:function(){return E3},ConfigProvider:function(){return Um.ZP},ContextMenu:function(){return Vm},CopyButton:function(){return ry.Z},DiscordIcon:function(){return Tb},DraggablePanel:function(){return l1.Z},DraggablePanelBody:function(){return M3},DraggablePanelContainer:function(){return ly},DraggablePanelFooter:function(){return P3},DraggablePanelHeader:function(){return L3},EditableMessage:function(){return o3},EditableMessageList:function(){return ek},EditableText:function(){return tk},EmojiPicker:function(){return Cg},EmptyCard:function(){return ub},Features:function(){return hb.Z},FluentEmoji:function(){return fb.Z},FontLoader:function(){return Tg.Z},Footer:function(){return pb.Z},Form:function(){return Kk},FormDivider:function(){return cl},FormFooter:function(){return dc},FormGroup:function(){return Lg},FormItem:function(){return _b},FormTitle:function(){return ul},GaussianBackground:function(){return aS},Giscus:function(){return Ru.Z},GradientButton:function(){return sS.Z},Grid:function(){return oS.Z},GridBackground:function(){return Ng.Z},GridShowcase:function(){return Sf},Header:function(){return cS.Z},Hero:function(){return uS.Z},Highlighter:function(){return hS.ZP},Icon:function(){return yt.Z},Image:function(){return Db.Z},ImageGallery:function(){return pS.Z},Input:function(){return Xd.I},Layout:function(){return hl.ZP},LayoutFooter:function(){return hl.D4},LayoutHeader:function(){return hl.NC},LayoutMain:function(){return hl.Ku},LayoutSidebar:function(){return hl.N_},LayoutSidebarInner:function(){return hl.vK},LayoutToc:function(){return hl.gn},List:function(){return bD},Logo:function(){return yS.Z},LogoSpline:function(){return Ide},LogoThree:function(){return Sde},Markdown:function(){return Pm.Z},MessageInput:function(){return L1},MessageModal:function(){return s3},Meta:function(){return The},MobileChatInputArea:function(){return _1},MobileChatSendButton:function(){return k1},MobileNavBar:function(){return Nde},MobileNavBarTitle:function(){return Vde},MobileSafeArea:function(){return uu},MobileTabBar:function(){return Wde},Modal:function(){return q1},SearchBar:function(){return qde.Z},SelectWithImg:function(){return Yde},SideNav:function(){return Jde},SliderWithInput:function(){return ace},Snippet:function(){return sce.Z},SortableList:function(){return mhe},Spline:function(){return hT},Spotlight:function(){return Ft.Z},SpotlightCard:function(){return ghe.Z},StoryBook:function(){return vhe.ZP},Swatches:function(){return Ahe},SyntaxHighlighter:function(){return Bm.Z},TabsNav:function(){return Che.Z},Tag:function(){return jh.Z},TextArea:function(){return Xd.K},ThemeProvider:function(){return Ehe.Z},ThemeSwitch:function(){return Dhe.Z},Toc:function(){return Phe.Z},TokenTag:function(){return zhe},Tooltip:function(){return Lhe.Z},Typography:function(){return Lde},Video:function(){return Fhe.Z},colorScales:function(){return ys._},colors:function(){return ys._},copyToClipboard:function(){return zm.v},findCustomThemeName:function(){return whe},genCdnUrl:function(){return Bhe.y},generateColorNeutralPalette:function(){return fF.N},generateColorPalette:function(){return fF.z},getEmoji:function(){return _F.g},getEmojiNameByCharacter:function(){return _F.O},lobeCustomStylish:function(){return xhe.V},lobeCustomToken:function(){return _he.W},neutralColorScales:function(){return wm.H},neutralColors:function(){return Th},neutralColorsSwatches:function(){return bhe},primaryColors:function(){return bs},primaryColorsSwatches:function(){return yhe},useCdnFn:function(){return Um.nc},useChatListActionsBar:function(){return v3},useControls:function(){return hF.M4},useCreateStore:function(){return hF.WQ}});var st=de(7476),R=de(28484),ht=de(46060),Gt=de(22845),St=de(83539),X=de(75271),Ae=de(90142),yt=de(92277),Ft=de(21674),be=de(62504),Et=de(92462),tn,fn,Jo=(0,Et.kc)(function(t,i){var r=t.css,s=t.token,l=t.stylish,d=t.cx,c=i.type,u=r(tn||(tn=(0,be.Z)([`
      background-color: `,`;
      border: 1px solid `,`;
    `])),c==="block"?s.colorFillTertiary:s.colorFillQuaternary,c==="block"?"transparent":s.colorBorder);return{container:d(c!=="pure"&&u,l.blur,r(fn||(fn=(0,be.Z)([`
          position: relative;
          padding: 2px;
          border-radius: `,`px;
        `])),s.borderRadius))}}),J=de(52676),xn=["type","items","placement","spotlight","direction","dropdownMenu","onActionClick"],Yr=(0,X.memo)(function(t){var i=t.type,r=i===void 0?"block":i,s=t.items,l=s===void 0?[]:s,d=t.placement,c=t.spotlight,u=c===void 0?!0:c,h=t.direction,f=h===void 0?"row":h,m=t.dropdownMenu,p=m===void 0?[]:m,g=t.onActionClick,v=(0,ht.Z)(t,xn),w=Jo({type:r}),x=w.styles,_=d||(f==="column"?"right":"top");return(0,J.jsxs)(Ae.D,(0,R.Z)((0,R.Z)({className:x.container,horizontal:f==="row"},v),{},{children:[u&&(0,J.jsx)(Ft.Z,{}),(l==null?void 0:l.length)>0&&l.map(function(k){return(0,J.jsx)(st.Z,{icon:k.icon,onClick:g?function(){return g==null?void 0:g({item:k,key:k.key,keyPath:[k.key]})}:void 0,placement:_,size:"small",title:k.label},k.key)}),(p==null?void 0:p.length)>0&&(0,J.jsx)(Gt.Z,{menu:{items:p.map(function(k){return k.type?k:(0,R.Z)((0,R.Z)({},k),{},{icon:(0,J.jsx)(yt.Z,{icon:k.icon,size:"small"}),onClick:g?function(A){return g({item:k,key:A.key,keyPath:A.keyPath})}:void 0})})},trigger:["click"],children:(0,J.jsx)(st.Z,{icon:St.Z,placement:_,size:"small"},"more")})]}))}),mo=Yr,Xt=de(3392),Lr=de(1549),_n=de(91797),Fn=de(19457),Ii=de(22139),ur=de(51624),$d=de(50094),oa=de(73828),hi=de(13186),wi=de(88095),Xe=de(85274),Re,It,Qi,$i,la,da,ca,Ji,Li,Dn,En,Sr,Xr,Fs=(0,Et.kc)(function(t,i){var r=t.cx,s=t.token,l=t.css,d=t.prefixCls,c=i.closable,u=i.hasTitle,h=i.showIcon,f=u?16:8,m=u?16:12;return{banner:l(Re||(Re=(0,be.Z)([`
        border: none;
        border-radius: 0;
      `]))),colorfulText:l(It||(It=(0,be.Z)([`
        .`,"-alert-message,.",`-alert-description {
          color: inherit;
        }
      `])),d,d),container:r(l(Qi||(Qi=(0,be.Z)([`
          position: relative;

          display: flex;
          flex-direction: row;
          gap: `,`px;
          align-items: flex-start;

          max-width: 100%;
          padding-block: `,`px;
          padding-inline: `,`px
            `,`px;

          .`,`-alert-message {
            font-weight: `,`;
            line-height: 24px;
            word-break: break-all;
          }
          .`,`-alert-icon {
            display: flex;
            align-items: center;
            height: 24px;
            margin: 0;
          }
          .`,`-alert-close-icon {
            display: flex;
            align-items: center;
            height: 24px;
            margin: 0;
          }
        `])),u?12:8,f,h?m:m*1.5,c?m:m*1.5,d,u?600:400,d,d),u&&l($i||($i=(0,be.Z)([`
            .`,`-alert-description {
              line-height: 1.5;
              word-break: break-all;
              opacity: 0.75;
            }
          `])),d)),expandText:l(la||(la=(0,be.Z)([`
        &:hover {
          cursor: pointer;
        }
      `]))),extra:l(da||(da=(0,be.Z)([`
        position: relative;

        overflow: hidden;

        max-width: 100%;

        border: 1px solid;
        border-block-start: none;
        border-end-start-radius: `,`px;
        border-end-end-radius: `,`px;
      `])),s.borderRadiusLG,s.borderRadiusLG),extraBody:l(ca||(ca=(0,be.Z)([`
        overflow-x: auto;
        width: 100%;
        padding-block: `,`px;
        padding-inline: `,`px;
      `])),f,m),extraHeader:l(Ji||(Ji=(0,be.Z)([`
        padding-block: `,`px;
        padding-inline: `,`px;
        border-block-start: 1px dashed;
      `])),f*.75,m*.75),hasExtra:l(Li||(Li=(0,be.Z)([`
        border-block-end: none;
        border-end-start-radius: 0;
        border-end-end-radius: 0;
      `]))),variantBlock:l(Dn||(Dn=(0,be.Z)([`
        border: none;
      `]))),variantGhost:l(En||(En=(0,be.Z)([`
        background: transparent !important;
      `]))),variantPure:l(Sr||(Sr=(0,be.Z)([`
        padding: 0 !important;
        background: transparent !important;
        border: none;
      `]))),variantPureExtraHeader:l(Xr||(Xr=(0,be.Z)([`
        margin-block-start: `,`px;
        margin-inline-start: `,`px;
        padding-inline: 0;
      `])),f,-m*.25)}}),ws=["closeIcon","closable","description","showIcon","type","variant","icon","colorfulText","style","extra","classNames","text","extraDefaultExpand","extraIsolate","banner"],jn={error:Ii.Z,info:ur.Z,success:$d.Z,warning:oa.Z},_i=function(i){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"info",s=arguments.length,l=new Array(s>2?s-2:0),d=2;d<s;d++)l[d-2]=arguments[d];return i[(0,Fn.Z)(["color",r].concat(l).join("-"))]},Wn=(0,X.memo)(function(t){var i=t.closeIcon,r=t.closable,s=r===void 0?!1:r,l=t.description,d=t.showIcon,c=d===void 0?!0:d,u=t.type,h=u===void 0?"info":u,f=t.variant,m=t.icon,p=t.colorfulText,g=p===void 0?!0:p,v=t.style,w=t.extra,x=t.classNames,_=t.text,k=t.extraDefaultExpand,A=k===void 0?!1:k,C=t.extraIsolate,M=t.banner,D=(0,ht.Z)(t,ws),P=(0,X.useState)(A),T=(0,Xt.Z)(P,2),O=T[0],z=T[1],L=Fs({closable:!!s,hasTitle:!!l,showIcon:!!c}),B=L.theme,j=L.styles,V=L.cx,H=!C&&!!w,Y=(0,J.jsx)(Lr.Z,(0,R.Z)({banner:M,className:V(j.container,g&&j.colorfulText,!!H&&j.hasExtra,f==="block"&&j.variantBlock,f==="ghost"&&j.variantGhost,f==="pure"&&j.variantPure,x==null?void 0:x.alert,!H&&j.container),closable:s,closeIcon:i||(0,J.jsx)(st.Z,{color:_i(B,h),icon:hi.Z,size:"small"}),description:l,icon:(0,J.jsx)(yt.Z,{icon:jn[h]||m,size:{fontSize:l?24:18}}),showIcon:c,style:(0,R.Z)({color:g?_i(B,h):void 0},v),type:h},D));return w?C?(0,J.jsxs)(Ae.D,{className:x==null?void 0:x.container,gap:8,children:[Y,w]}):(0,J.jsxs)(Ae.D,{className:x==null?void 0:x.container,children:[Y,(0,J.jsxs)(Ae.D,{className:V(j.extra,M&&j.banner,f==="block"&&j.variantBlock,f==="ghost"&&j.variantGhost,f==="pure"&&j.variantPure),style:{background:_i(B,h,"bg"),borderColor:_i(B,h,"border"),color:_i(B,h),fontSize:l?14:12},children:[(0,J.jsxs)(Ae.D,{align:"center",className:V(j.extraHeader,f==="pure"&&j.variantPureExtraHeader),gap:_n.ZP?6:10,horizontal:!0,style:{borderColor:_i(B,h,"border")},children:[(0,J.jsx)(st.Z,{color:g?_i(B,h):void 0,icon:O?wi.Z:Xe.Z,onClick:function(){return z(!O)},size:{blockSize:24,fontSize:18}}),(0,J.jsx)("div",{className:V(j.expandText),onClick:function(){return z(!O)},children:(_==null?void 0:_.detail)||"Show Details"})]}),O&&(0,J.jsx)("div",{className:V(j.extraBody,f==="pure"&&j.variantPure),children:w})]})]}):Y}),ft=Wn,Yl=de(87219),Ih=de(99938),xs=de(20348),wa=de(84475),Xl=de(65075),xa=de(40397);function go(t,i){i===void 0&&(i=function(){return!0});var r=(0,Ih.CR)((0,xs.Z)(),2),s=r[0],l=r[1],d=(0,wa.Z)(i);return(0,xa.Z)(function(){var c=(0,Xl.n)(t,document);if(c){var u=function(){var h;c===document?document.scrollingElement?h={left:document.scrollingElement.scrollLeft,top:document.scrollingElement.scrollTop}:h={left:Math.max(window.pageXOffset,document.documentElement.scrollLeft,document.body.scrollLeft),top:Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop)}:h={left:c.scrollLeft,top:c.scrollTop},d.current(h)&&l(h)};return u(),c.addEventListener("scroll",u),function(){c.removeEventListener("scroll",u)}}},[],t),s}var el=go,Kr=de(53595),_a=de(40887),ka=de(31573),Rh,E2=(0,Et.kc)(function(t,i){var r=t.token,s=t.css,l=t.stylish,d=t.cx,c=t.responsive;return d(l.blur,s(Rh||(Rh=(0,be.Z)([`
      pointer-events: `,`;

      position: absolute;
      inset-block-end: 16px;
      inset-inline-end: 16px;
      transform: translateY(`,`);

      padding-inline: 12px !important;

      opacity: `,`;
      background: `,`;
      border-color: `,` !important;
      border-radius: 16px !important;

      `,` {
        inset-inline-end: 0;
        border-inline-end: none;
        border-start-end-radius: 0 !important;
        border-end-end-radius: 0 !important;
      }
    `])),i?"all":"none",i?0:"16px",i?1:0,(0,ka.m4)(r.colorBgContainer,.5),r.colorFillTertiary,c.mobile))}),M2=(0,X.memo)(function(t){var i=t.visibilityHeight,r=i===void 0?240:i,s=t.target,l=t.onClick,d=t.style,c=t.className,u=t.text,h=(0,X.useState)(!1),f=(0,Xt.Z)(h,2),m=f[0],p=f[1],g=E2(m),v=g.styles,w=g.cx,x=(0,X.useRef)(null),_=s==null?void 0:s.current,k=(_==null?void 0:_.scrollHeight)||0,A=(_==null?void 0:_.clientHeight)||0,C=el(s);(0,X.useEffect)(function(){C!=null&&C.top&&p((C==null?void 0:C.top)+A+r<k)},[k,C,r]);var M=function(P){var T;s==null||(T=s.current)===null||T===void 0||T.scrollTo({behavior:"smooth",left:0,top:k}),l==null||l(P)};return(0,J.jsx)(Kr.ZP,{className:w(v,c),icon:(0,J.jsx)(yt.Z,{icon:_a.Z}),onClick:M,ref:x,size:"small",style:d,children:u||"Back to bottom"})}),T2=M2,vo=de(59560),xm=de(83001),Q0,J0,Kl,e1=(0,Et.kc)(function(t){var i=t.css,r=t.token,s=t.stylish,l=t.cx;return{container:l(s.blurStrong,i(Q0||(Q0=(0,be.Z)([`
        position: absolute;
        z-index: 10;

        overflow: hidden;
        grid-area: header;
        align-self: stretch;

        width: 100%;
        height: 64px;

        background: linear-gradient(
          to bottom,
          `,`,
          `,`
        );
        border-block-end: 1px solid `,`;
      `])),(0,ka.m4)(r.colorBgLayout,.8),(0,ka.m4)(r.colorBgLayout,.4),r.colorBorder)),left:i(J0||(J0=(0,be.Z)([`
      position: relative;
      overflow: hidden;
      flex: 1;
    `]))),right:i(Kl||(Kl=(0,be.Z)([`
      position: relative;
      overflow: hidden;
      flex: none;
    `])))}}),D2=(0,X.memo)(function(t){var i=t.left,r=t.right,s=t.className,l=t.style,d=t.contentStyles,c=t.classNames,u=t.showBackButton,h=t.onBackClick,f=t.gap,m=e1(),p=m.cx,g=m.styles;return(0,J.jsxs)(Ae.D,{align:"center",className:p(g.container,s),distribution:"space-between",horizontal:!0,paddingInline:16,style:l,children:[(0,J.jsxs)(Ae.D,{align:"center",className:p(g.left,c==null?void 0:c.left),gap:(f==null?void 0:f.left)||12,horizontal:!0,style:d==null?void 0:d.left,children:[u&&(0,J.jsx)(st.Z,{icon:xm.Z,onClick:function(){return h==null?void 0:h()},size:{fontSize:24},style:{marginRight:f!=null&&f.left?-f.left/2:-6}}),i]}),(0,J.jsx)(Ae.D,{align:"center",className:p(g.right,c==null?void 0:c.right),gap:(f==null?void 0:f.right)||8,horizontal:!0,style:d==null?void 0:d.right,children:r})]})}),t1=D2,tl,Zd,i1,n1,r1,Yd,P2=(0,Et.kc)(function(t){var i=t.css,r=t.token;return{container:i(tl||(tl=(0,be.Z)([`
    position: relative;
    overflow: hidden;
    flex: 1;
    max-width: 100%;
  `]))),desc:i(Zd||(Zd=(0,be.Z)([`
    overflow: hidden;

    width: 100%;

    font-size: 12px;
    line-height: 1;
    color: `,`;
    text-overflow: ellipsis;
    white-space: nowrap;
  `])),r.colorTextTertiary),tag:i(i1||(i1=(0,be.Z)([`
    flex: none;
    align-items: baseline;
  `]))),title:i(n1||(n1=(0,be.Z)([`
    overflow: hidden;

    font-size: 16px;
    font-weight: bold;
    line-height: 1;
    text-overflow: ellipsis;
    white-space: nowrap;
  `]))),titleContainer:i(r1||(r1=(0,be.Z)([`
    flex: 1;
    line-height: 1;
  `]))),titleWithDesc:i(Yd||(Yd=(0,be.Z)([`
    overflow: hidden;
    font-weight: bold;
    text-overflow: ellipsis;
    white-space: nowrap;
  `])))}}),a1=(0,X.memo)(function(t){var i=t.title,r=t.desc,s=t.tag,l=P2(),d=l.styles,c=s&&(0,J.jsx)(Ae.D,{align:"center",className:d.tag,horizontal:!0,children:s});return r?(0,J.jsxs)(Ae.D,{className:d.container,gap:4,children:[(0,J.jsxs)(Ae.D,{align:"center",className:d.titleContainer,gap:8,horizontal:!0,children:[(0,J.jsx)("div",{className:d.titleWithDesc,children:i}),c]}),(0,J.jsx)(Ae.D,{align:"center",className:d.desc,horizontal:!0,children:r})]}):(0,J.jsxs)(Ae.D,{align:"center",className:d.container,gap:8,horizontal:!0,children:[(0,J.jsx)("div",{className:d.title,children:i}),c]})}),O2=a1,Ql=de(36866),s1,_m,o1,I2=(0,Et.kc)(function(t){var i=t.css,r=t.cx,s=t.stylish;return{container:i(s1||(s1=(0,be.Z)([`
    position: relative;
    overflow: hidden;
    width: 100%;
  `]))),left:r(s.noScrollbar,i(_m||(_m=(0,be.Z)([`
      overflow: auto hidden;
    `])))),right:i(o1||(o1=(0,be.Z)([""])))}}),R2=(0,X.memo)(function(t){var i=t.padding,r=i===void 0?"0 16px":i,s=t.leftAddons,l=t.rightAddons,d=(0,Ql.F)(),c=d.mobile,u=I2(),h=u.styles;return(0,J.jsxs)(Ae.D,{align:"center",className:h.container,flex:"none",horizontal:!0,justify:"space-between",padding:r,children:[(0,J.jsx)(Ae.D,{align:"center",className:h.left,flex:1,gap:c?0:4,horizontal:!0,children:s}),(0,J.jsx)(Ae.D,{align:"center",className:h.right,flex:0,gap:c?0:4,horizontal:!0,justify:"flex-end",children:l})]})}),z2=R2,Xd=de(58537),L2=["resize","onCompositionEnd","onPressEnter","onCompositionStart","className","onInput","loading","onSend","onBlur","onChange"],B2=(0,X.forwardRef)(function(t,i){var r=t.resize,s=r===void 0?!1:r,l=t.onCompositionEnd,d=t.onPressEnter,c=t.onCompositionStart,u=t.className,h=t.onInput,f=t.loading,m=t.onSend,p=t.onBlur,g=t.onChange,v=(0,ht.Z)(t,L2),w=(0,X.useRef)(!1);return(0,J.jsx)(Xd.K,(0,R.Z)({className:u,onBlur:function(_){h==null||h(_.target.value),p==null||p(_)},onChange:function(_){h==null||h(_.target.value),g==null||g(_)},onCompositionEnd:function(_){w.current=!1,l==null||l(_)},onCompositionStart:function(_){w.current=!0,c==null||c(_)},onPressEnter:function(_){d==null||d(_),!f&&!_.shiftKey&&!w.current&&(_.preventDefault(),m==null||m())},ref:i,resize:s},v))}),km=(0,X.memo)(B2),l1=de(1631),d1=["className","style","classNames","expand","setExpand","bottomAddons","topAddons","onSizeChange","heights","onSend"],c1,Sm,Kd,jT=(0,Et.kc)(function(t){var i=t.css;return{container:i(c1||(c1=(0,be.Z)([`
      position: relative;

      display: flex;
      flex-direction: column;
      gap: 8px;

      height: 100%;
      padding-block: 12px 16px;
      padding-inline: 0;
    `]))),textarea:i(Sm||(Sm=(0,be.Z)([`
      height: 100% !important;
      padding-block: 0;
      padding-inline: 24px;
      line-height: 1.5;
    `]))),textareaContainer:i(Kd||(Kd=(0,be.Z)([`
      position: relative;
      flex: 1;
    `])))}}),UT=(0,X.forwardRef)(function(t,i){var r=t.className,s=t.style,l=t.classNames,d=t.expand,c=d===void 0?!0:d,u=t.setExpand,h=t.bottomAddons,f=t.topAddons,m=t.onSizeChange,p=t.heights,g=t.onSend,v=(0,ht.Z)(t,d1),w=jT(),x=w.styles;return(0,J.jsx)(l1.Z,{className:r,classNames:l,fullscreen:c,headerHeight:p==null?void 0:p.headerHeight,maxHeight:p==null?void 0:p.maxHeight,minHeight:p==null?void 0:p.minHeight,onSizeChange:m,placement:"bottom",size:{height:p==null?void 0:p.inputHeight,width:"100%"},style:(0,R.Z)({zIndex:10},s),children:(0,J.jsxs)("section",{className:x.container,style:{minHeight:p==null?void 0:p.minHeight},children:[f,(0,J.jsx)("div",{className:x.textareaContainer,children:(0,J.jsx)(km,(0,R.Z)({className:x.textarea,onSend:function(){g==null||g(),u==null||u(!1)},ref:i,type:"pure"},v))}),h]})})}),VT=(0,X.memo)(UT),F2=de(94169),HT=de(86985),cu=de(91298),kn=(0,X.memo)(function(t){var i=t.className,r=t.style,s=t.leftAddons,l=t.rightAddons,d=t.texts,c=t.onSend,u=t.loading,h=t.onStop,f=(0,Et.Fg)();return(0,J.jsxs)(Ae.D,{align:"end",className:i,distribution:"space-between",flex:"none",gap:8,horizontal:!0,padding:"0 24px",style:r,children:[(0,J.jsx)(Ae.D,{align:"center",gap:8,horizontal:!0,children:s}),(0,J.jsxs)(Ae.D,{align:"center",gap:8,horizontal:!0,children:[(0,J.jsxs)(Ae.D,{gap:4,horizontal:!0,style:{color:f.colorTextDescription,fontSize:12,marginRight:12},children:[(0,J.jsx)(yt.Z,{icon:F2.Z}),(0,J.jsx)("span",{children:(d==null?void 0:d.send)||"Send"}),(0,J.jsx)("span",{children:"/"}),(0,J.jsxs)(Ae.D,{horizontal:!0,children:[(0,J.jsx)(yt.Z,{icon:HT.Z}),(0,J.jsx)(yt.Z,{icon:F2.Z})]}),(0,J.jsx)("span",{children:(d==null?void 0:d.warp)||"Warp"})]}),l,u?(0,J.jsx)(Kr.ZP,{icon:u&&(0,J.jsx)(yt.Z,{icon:cu.Z,spin:!0}),onClick:h,children:(d==null?void 0:d.stop)||"Stop"}):(0,J.jsx)(Kr.ZP,{onClick:c,type:"primary",children:(d==null?void 0:d.send)||"Send"})]})]})}),u1=kn,h1=de(52774),N2=de(3861),f1,p1,Un,m1=(0,Et.kc)(function(t){var i=t.css;return{bottom:i(f1||(f1=(0,be.Z)([`
      padding-block-end: env(safe-area-inset-bottom);
    `]))),container:i(p1||(p1=(0,be.Z)([`
      overflow: hidden;
      flex: none;
      width: 100vw;
    `]))),top:i(Un||(Un=(0,be.Z)([`
      padding-block-start: env(safe-area-inset-top);
    `])))}}),Pn=["position","className"],g1=(0,X.memo)(function(t){var i=t.position,r=t.className,s=(0,ht.Z)(t,Pn),l=m1(),d=l.styles,c=l.cx;return(0,J.jsx)("div",(0,R.Z)({className:c(d.container,d[i],r)},s))}),uu=g1,v1,y1,b1,w1,x1,j2=(0,Et.kc)(function(t){var i=t.css,r=t.token;return{container:i(v1||(v1=(0,be.Z)([`
      flex: none;
      padding-block: 12px 12px;
      background: `,`;
      border-block-start: 1px solid `,`;
    `])),r.colorFillQuaternary,(0,ka.m4)(r.colorBorder,.25)),expand:i(y1||(y1=(0,be.Z)([`
      position: absolute;
      height: 100%;
    `]))),expandButton:i(b1||(b1=(0,be.Z)([`
      position: absolute;
      inset-inline-start: 14px;
    `]))),expandTextArea:i(w1||(w1=(0,be.Z)([`
      flex: 1;
    `]))),inner:i(x1||(x1=(0,be.Z)([`
      height: inherit;
      padding-block: 0;
      padding-inline: 8px;
    `])))}}),zh=(0,X.forwardRef)(function(t,i){var r=t.className,s=t.style,l=t.topAddons,d=t.textAreaLeftAddons,c=t.textAreaRightAddons,u=t.bottomAddons,h=t.expand,f=h===void 0?!1:h,m=t.setExpand,p=t.onSend,g=t.onInput,v=t.loading,w=t.value,x=t.safeArea,_=(0,X.useRef)(null),k=j2(),A=k.cx,C=k.styles,M=(0,h1.Z)(_),D=(0,X.useState)(!1),P=(0,Xt.Z)(D,2),T=P[0],O=P[1],z=(0,X.useState)(!1),L=(0,Xt.Z)(z,2),B=L[0],j=L[1];(0,X.useEffect)(function(){M!=null&&M.height&&O(M.height>72)},[M]);var V=(0,X.useCallback)(function(Y){var se=Y.children;return f?(0,J.jsxs)(Ae.D,{className:C.inner,gap:8,children:[(0,J.jsxs)(Ae.D,{gap:8,horizontal:!0,justify:"flex-end",children:[d,c]}),se,l,u]}):(0,J.jsxs)(Ae.D,{align:"flex-end",className:C.inner,gap:8,horizontal:!0,children:[d,se,c]})},[f,v]),H=!f&&!B;return(0,J.jsxs)(Ae.D,{className:A(C.container,f&&C.expand,r),gap:12,style:s,children:[l&&(0,J.jsx)(Ae.D,{style:H?{}:{display:"none"},children:l}),(0,J.jsxs)(Ae.D,{className:A(f&&C.expand),ref:_,style:{position:"relative"},children:[T&&(0,J.jsx)(st.Z,{active:!0,className:C.expandButton,icon:f?wi.Z:N2.Z,onClick:function(){return m==null?void 0:m(!f)},size:{blockSize:24,borderRadius:"50%",fontSize:14},style:f?{top:6}:{}}),(0,J.jsx)(V,{children:(0,J.jsx)(km,{autoSize:f?!1:{maxRows:6,minRows:0},className:A(f&&C.expandTextArea),loading:v,onBlur:function(){return j(!1)},onFocus:function(){return j(!0)},onInput:g,onSend:p,ref:i,style:{height:36,paddingBlock:6},type:f?"pure":"block",value:w})})]}),u&&(0,J.jsx)(Ae.D,{style:H?{}:{display:"none"},children:u}),x&&!B&&(0,J.jsx)(uu,{position:"bottom"})]})}),_1=zh,U2=de(91188),V2=(0,X.memo)(function(t){var i=t.loading,r=t.onStop,s=t.onSend,l=(0,Et.Fg)(),d={blockSize:36,fontSize:16};return i?(0,J.jsx)(st.Z,{active:!0,icon:cu.Z,onClick:r,size:d,spin:!0}):(0,J.jsx)(st.Z,{icon:U2.Z,onClick:s,size:d,style:{background:l.colorPrimary,color:(0,ka.XV)(l.colorPrimary),flex:"none"}})}),k1=V2,Lh,S1,Am,Bh,Jl,Cm,Em,Mm,A1,C1,hu,E1,M1,Tm,T1,Dm,D1,Qd,ed=(0,Et.kc)(function(t,i){var r=t.cx,s=t.css,l=t.token,d=t.isDarkMode,c=t.responsive,u=i.placement,h=i.type,f=i.title,m=i.primary,p=i.avatarSize,g=i.editing,v=i.time,w=s(Lh||(Lh=(0,be.Z)([`
      padding-block: 8px;
      padding-inline: 12px;

      background-color: `,`;
      border-radius: `,`px;

      transition: background-color 100ms `,`;
    `])),m?d?l.colorFill:l.colorBgElevated:d?l.colorFillSecondary:l.colorBgContainer,l.borderRadiusLG,l.motionEaseOut),x=s(S1||(S1=(0,be.Z)([`
      padding-block-start: `,`;
    `])),f?0:"6px"),_=s(Am||(Am=(0,be.Z)([`
      margin-block-end: -16px;
      transition: background-color 100ms `,`;
    `])),l.motionEaseOut),k=h==="block"?w:x,A=g&&s(Bh||(Bh=(0,be.Z)([`
        width: 100%;
      `])));return{actions:r(s(Jl||(Jl=(0,be.Z)([`
          flex: none;
          align-self: `,`;
          justify-content: `,`;
        `])),h==="block"?"flex-end":u==="left"?"flex-start":"flex-end",u==="left"?"flex-end":"flex-start"),g&&s(Cm||(Cm=(0,be.Z)([`
            pointer-events: none !important;
            opacity: 0 !important;
          `])))),avatarContainer:s(Em||(Em=(0,be.Z)([`
        position: relative;
        flex: none;
        width: `,`px;
        height: `,`px;
      `])),p,p),avatarGroupContainer:s(Mm||(Mm=(0,be.Z)([`
        width: `,`px;
      `])),p),container:r(h==="pure"&&_,s(A1||(A1=(0,be.Z)([`
          position: relative;
          width: 100%;
          max-width: 100vw;
          padding: 16px;

          time {
            display: inline-block;
            white-space: nowrap;
          }

          div[role='menubar'] {
            display: flex;
          }

          time,
          div[role='menubar'] {
            pointer-events: none;
            opacity: 0;
            transition: opacity 200ms `,`;
          }

          &:hover {
            time,
            div[role='menubar'] {
              pointer-events: unset;
              opacity: 1;
            }
          }

          `,` {
            padding-block: 4px;
            padding-inline: 8px;
          }
        `])),l.motionEaseOut,c.mobile)),editingContainer:r(A,s(C1||(C1=(0,be.Z)([`
          padding-block: 8px 12px;
          padding-inline: 12px;
          border: 1px solid `,`;

          &:active,
          &:hover {
            border-color: `,`;
          }
        `])),l.colorBorderSecondary,l.colorBorder),h==="pure"&&s(hu||(hu=(0,be.Z)([`
            background: `,`;
            border-radius: `,`px;
          `])),l.colorFillQuaternary,l.borderRadius)),editingInput:s(E1||(E1=(0,be.Z)([`
        width: 100%;
      `]))),errorContainer:s(M1||(M1=(0,be.Z)([`
        position: relative;
        overflow: hidden;
        width: 100%;
      `]))),loading:s(Tm||(Tm=(0,be.Z)([`
        position: absolute;
        inset-block-end: 0;
        inset-inline: `,`
          `,`;

        width: 16px;
        height: 16px;

        color: `,`;

        background: `,`;
        border-radius: 50%;
      `])),u==="right"?"-4px":"unset",u==="left"?"-4px":"unset",l.colorBgLayout,l.colorPrimary),message:r(k,s(T1||(T1=(0,be.Z)([`
          position: relative;

          `,` {
            width: 100%;
          }
        `])),c.mobile)),messageContainer:r(A,s(Dm||(Dm=(0,be.Z)([`
          position: relative;
          overflow: hidden;
          max-width: 100%;
          margin-block-start: `,`px;

          `,` {
            overflow-x: auto;
          }
        `])),v?-16:0,c.mobile)),messageContent:r(A,s(D1||(D1=(0,be.Z)([`
          position: relative;
          overflow-x: hidden;
          max-width: 100%;

          `,` {
            flex-direction: column !important;
          }
        `])),c.mobile)),messageExtra:r("message-extra"),name:s(Qd||(Qd=(0,be.Z)([`
        margin-block-end: 6px;

        font-size: 12px;
        line-height: 1;
        color: `,`;
        text-align: `,`;
      `])),l.colorTextDescription,u==="left"?"left":"right")}}),P1=(0,X.memo)(function(t){var i=t.actions,r=t.placement,s=t.type,l=t.editing,d=ed({editing:l,placement:r,type:s}),c=d.styles;return(0,J.jsx)(Ae.D,{align:"flex-start",className:c.actions,role:"menubar",children:i})}),O1=P1,H2=(0,X.memo)(function(t){var i=t.loading,r=t.placement,s=ed({placement:r}),l=s.styles;return i?(0,J.jsx)(Ae.D,{align:"center",className:l.loading,justify:"center",children:(0,J.jsx)(yt.Z,{icon:cu.Z,size:{fontSize:12,strokeWidth:3},spin:!0})}):null}),td=H2,I1=(0,X.memo)(function(t){var i=t.loading,r=t.avatar,s=t.placement,l=t.unoptimized,d=t.addon,c=t.onClick,u=t.size,h=u===void 0?40:u,f=ed({avatarSize:h}),m=f.styles,p=(0,J.jsxs)("div",{className:m.avatarContainer,children:[(0,J.jsx)(Yl.Z,{animation:i,avatar:r.avatar,background:r.backgroundColor,onClick:c,size:h,title:r.title,unoptimized:l}),(0,J.jsx)(td,{loading:i,placement:s})]});return d?(0,J.jsxs)(Ae.D,{align:"center",className:m.avatarGroupContainer,gap:8,children:[p,d]}):p}),G2=I1,W2=(0,X.memo)(function(t){var i=t.borderSpacing;return i?(0,J.jsx)("div",{style:{flex:"none",width:i}}):null}),fu=W2,R1=(0,X.memo)(function(t){var i=t.message,r=t.error,s=t.placement,l=ed({placement:s}),d=l.styles;return(0,J.jsx)(Ae.D,{className:d.errorContainer,children:(0,J.jsx)(ft,(0,R.Z)({closable:!1,extra:i,showIcon:!0,type:"error"},r))})}),q2=R1,Ns=de(65720),Pm=de(29554),z1,Sa=(0,Et.kc)(function(t){var i=t.css,r=t.token;return i(z1||(z1=(0,be.Z)([`
    position: relative;

    height: 100%;

    font-family: `,`;
    font-size: 13px;
    line-height: 1.8;
  `])),r.fontFamilyCode)}),$2=["text","type","onCancel","defaultValue","onConfirm","renderButtons","textareaStyle","textareaClassname","placeholder","height","style","editButtonSize","classNames"],Z2=(0,X.memo)(function(t){var i=t.text,r=t.type,s=r===void 0?"pure":r,l=t.onCancel,d=t.defaultValue,c=t.onConfirm,u=t.renderButtons,h=t.textareaStyle,f=t.textareaClassname,m=t.placeholder,p=t.height,g=p===void 0?"auto":p,v=t.style,w=t.editButtonSize,x=w===void 0?"middle":w,_=t.classNames,k=(0,ht.Z)(t,$2),A=(0,X.useState)(d||""),C=(0,Xt.Z)(A,2),M=C[0],D=C[1],P=Sa(),T=P.cx,O=P.styles,z=g==="auto";return(0,J.jsxs)(Ae.D,(0,R.Z)((0,R.Z)({gap:16,style:(0,R.Z)({flex:1,width:"100%"},v)},k),{},{children:[(0,J.jsx)(Xd.K,{autoSize:z,className:T(O,f),classNames:_,onBlur:function(B){return D(B.target.value)},onChange:function(B){return D(B.target.value)},placeholder:m,resize:!1,style:(0,R.Z)({height:z?"unset":g,minHeight:"100%"},h),type:s,value:M}),(0,J.jsx)(Ae.D,{direction:"horizontal-reverse",gap:8,children:u?u(M).map(function(L,B){return(0,J.jsx)(Kr.ZP,(0,R.Z)({size:"small"},L),B)}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(Kr.ZP,{onClick:function(){c==null||c(M)},size:x,type:"primary",children:(i==null?void 0:i.confirm)||"Confirm"}),(0,J.jsx)(Kr.ZP,{onClick:l,size:x,children:(i==null?void 0:i.cancel)||"Cancel"})]})})]}))}),L1=Z2,Y2=de(45736),B1=de(62897),X2=de(35230),F1=de(33918),K2=de(13795),N1="[object Number]";function Q2(t){return typeof t=="number"||(0,K2.Z)(t)&&(0,F1.Z)(t)==N1}var j1=Q2,J2=de(45210),e3=de(71552),t3=["allowFullscreen","children","title","className","wrapClassName","width","onCancel","open","destroyOnClose","paddings","maxHeight","footer","styles"],i3=["body"],U1,V1,H1,G1,n3=56,r3=68,W1=(0,Et.kc)(function(t,i){var r=t.cx,s=t.css,l=t.token,d=t.prefixCls,c=i.maxHeight;return{content:r(c&&s(U1||(U1=(0,be.Z)([`
            .`,`-modal-body {
              overflow: auto;
              max-height: `,`;
            }
          `])),d,c),s(V1||(V1=(0,be.Z)([`
          .`,`-modal-footer {
            margin: 0;
            padding: 16px;
          }
          .`,`-modal-header {
            display: flex;
            gap: 4px;
            align-items: center;
            justify-content: center;

            height: 56px;
            margin-block-end: 0;
            padding: 16px;
          }
          .`,`-modal-content {
            overflow: hidden;
            padding: 0;
            border: 1px solid `,`;
            border-radius: `,`px;
          }
        `])),d,d,d,l.colorSplit,l.borderRadiusLG)),drawerContent:s(H1||(H1=(0,be.Z)([`
        .`,`-drawer-close {
          padding: 0;
        }
        .`,`-drawer-wrapper-body {
          background: linear-gradient(to bottom, `,", ",`);
        }
        .`,`-drawer-header {
          padding: 8px;
        }

        .`,`-drawer-footer {
          display: flex;
          align-items: center;
          justify-content: flex-end;

          padding: 16px;

          border: none;
        }
      `])),d,d,l.colorBgContainer,l.colorBgLayout,d,d),wrap:s(G1||(G1=(0,be.Z)([`
        overflow: hidden auto;
        backdrop-filter: blur(2px);
      `])))}}),Om=(0,X.memo)(function(t){var i,r,s=t.allowFullscreen,l=t.children,d=t.title,c=d===void 0?" ":d,u=t.className,h=t.wrapClassName,f=t.width,m=f===void 0?700:f,p=t.onCancel,g=t.open,v=t.destroyOnClose,w=t.paddings,x=t.maxHeight,_=x===void 0?"75dvh":x,k=t.footer,A=t.styles,C=A===void 0?{}:A,M=(0,ht.Z)(t,t3),D=(0,X.useState)(!1),P=(0,Xt.Z)(D,2),T=P[0],O=P[1],z=(0,Ql.F)(),L=z.mobile,B=W1({maxHeight:_?"calc(".concat(j1(_)?"".concat(_,"px"):_," - ").concat(n3+(k?r3:0),"px)"):void 0}),j=B.styles,V=B.cx,H=B.theme,Y=C.body,se=(0,ht.Z)(C,i3);return L?(0,J.jsx)(Y2.Z,(0,R.Z)((0,R.Z)({className:V(j.drawerContent,u),closeIcon:(0,J.jsx)(st.Z,{icon:hi.Z}),destroyOnClose:v,extra:s&&(0,J.jsx)(st.Z,{icon:T?J2.Z:e3.Z,onClick:function(){return O(!T)}}),footer:k,height:T?"calc(100% - env(safe-area-inset-top))":_||"75vh",maskClassName:V(j.wrap,h),onClose:p,open:g,placement:"bottom",styles:(0,R.Z)({body:(0,R.Z)({paddingBlock:"16px ".concat(k?0:"16px"),paddingInline:(i=w==null?void 0:w.desktop)!==null&&i!==void 0?i:16},Y)},se),title:c},M),{},{children:l})):(0,J.jsx)(B1.ZP,{theme:{token:{colorBgElevated:(0,ka.$n)(.005,H.colorBgContainer)}},children:(0,J.jsx)(X2.Z,(0,R.Z)((0,R.Z)({className:V(j.content,u),closable:!0,closeIcon:(0,J.jsx)(yt.Z,{icon:hi.Z,size:{fontSize:20}}),destroyOnClose:v,footer:k,maskClosable:!0,onCancel:p,open:g,styles:(0,R.Z)({body:(0,R.Z)({paddingBlock:"0 ".concat(k===null?"16px":0),paddingInline:(r=w==null?void 0:w.desktop)!==null&&r!==void 0?r:16},Y)},se),title:c,width:m,wrapClassName:V(j.wrap,h)},M),{},{children:l}))})}),q1=Om,a3=(0,X.memo)(function(t){var i=t.editing,r=t.open,s=t.height,l=s===void 0?"auto":s,d=t.onOpenChange,c=t.onEditingChange,u=t.placeholder,h=t.value,f=t.onChange,m=t.text,p=t.footer,g=t.extra,v=(0,Ql.F)(),w=v.mobile,x=Sa(),_=x.styles,k=(0,Ns.Z)(!1,{onChange:c,value:i}),A=(0,Xt.Z)(k,2),C=A[0],M=A[1],D=(0,Ns.Z)(!1,{onChange:d,value:r}),P=(0,Xt.Z)(D,2),T=P[0],O=P[1],z=(0,X.useState)(h),L=(0,Xt.Z)(z,2),B=L[0],j=L[1],V=l==="auto",H={height:V?"unset":l,overflowX:"hidden",overflowY:"auto"},Y=C?(0,J.jsxs)(Ae.D,{direction:"horizontal-reverse",gap:8,children:[(0,J.jsx)(Kr.ZP,{onClick:function(){M(!1),f==null||f(B),j(h)},type:"primary",children:(m==null?void 0:m.confirm)||"Confirm"}),(0,J.jsx)(Kr.ZP,{onClick:function(){M(!1),j(h)},children:(m==null?void 0:m.cancel)||"Cancel"})]}):p;return(0,J.jsx)(q1,{allowFullscreen:!0,cancelText:(m==null?void 0:m.cancel)||"Cancel",destroyOnClose:!0,footer:Y,okText:(m==null?void 0:m.edit)||"Edit",onCancel:function(){O(!1),M(!1),j(h)},onOk:function(){return M(!0)},open:T,title:m==null?void 0:m.title,children:C?(0,J.jsx)(Xd.K,{autoSize:V,className:_,onBlur:function(re){return j(re.target.value)},onChange:function(re){return j(re.target.value)},placeholder:u,resize:!1,style:{flex:w?1:void 0,height:V?"unset":l,minHeight:w?"unset":"100%"},type:w?"pure":"block",value:B}):(0,J.jsxs)(J.Fragment,{children:[g,(0,J.jsx)(Pm.Z,{style:h?H:(0,R.Z)((0,R.Z)({},H),{},{opacity:.5}),variant:"chat",children:String(h||u)})]})})}),s3=a3,GT=(0,X.memo)(function(t){var i=t.value,r=t.onChange,s=t.classNames,l=s===void 0?{}:s,d=t.onEditingChange,c=t.editing,u=t.openModal,h=t.onOpenChange,f=t.placeholder,m=t.showEditWhenEmpty,p=m===void 0?!1:m,g=t.styles,v=t.height,w=t.inputType,x=t.editButtonSize,_=t.text,k=t.fullFeaturedCodeBlock,A=t.model,C=t.fontSize,M=(0,Ns.Z)(!1,{onChange:d,value:c}),D=(0,Xt.Z)(M,2),P=D[0],T=D[1],O=(0,Ns.Z)(!1,{onChange:h,value:u}),z=(0,Xt.Z)(O,2),L=z[0],B=z[1],j=v==="auto",V=(0,J.jsx)(L1,{className:l==null?void 0:l.input,classNames:{textarea:l==null?void 0:l.textarea},defaultValue:i,editButtonSize:x,height:v,onCancel:function(){return T(!1)},onConfirm:function(Y){r==null||r(Y),T(!1)},placeholder:f,style:g==null?void 0:g.input,text:_,textareaClassname:l==null?void 0:l.input,type:w});return!i&&p?V:(0,J.jsxs)(J.Fragment,{children:[!L&&P?V:(0,J.jsx)(Pm.Z,{className:l==null?void 0:l.markdown,fontSize:C,fullFeaturedCodeBlock:k,style:(0,R.Z)({height:j?"unset":v,overflowX:"hidden",overflowY:"auto"},g==null?void 0:g.markdown),variant:"chat",children:i||f||""}),L&&(0,J.jsx)(s3,{editing:P,extra:A==null?void 0:A.extra,footer:A==null?void 0:A.footer,height:v,onChange:r,onEditingChange:T,onOpenChange:function(Y){B(Y),T(!1)},open:L,placeholder:f,text:_,value:i})]})}),o3=GT,WT=(0,X.memo)(function(t){var i=t.editing,r=t.onChange,s=t.onEditingChange,l=t.text,d=t.message,c=t.placement,u=t.messageExtra,h=t.renderMessage,f=t.type,m=t.primary,p=t.onDoubleClick,g=t.fontSize,v=ed({editing:i,placement:c,primary:m,type:f}),w=v.cx,x=v.styles,_=(0,Ql.F)(),k=_.mobile,A=(0,J.jsx)(o3,{classNames:{input:x.editingInput},editButtonSize:"small",editing:i,fontSize:g,fullFeaturedCodeBlock:!0,onChange:r,onEditingChange:s,openModal:k?i:void 0,text:l,value:d?String(d).trim():""}),C=h?h(A):A;return(0,J.jsxs)(Ae.D,{className:w(x.message,i&&x.editingContainer),onDoubleClick:p,children:[C,u&&!i?(0,J.jsx)("div",{className:x.messageExtra,children:u}):null]})}),qT=WT,l3=de(7672),Fh=de.n(l3),d3=function(i){var r=Fh()(),s=Fh()(i);return s.isSame(r,"day")?s.format("HH:mm:ss"):s.isSame(r,"year")?s.format("MM-DD HH:mm:ss"):s.format("YYYY-MM-DD HH:mm:ss")},c3=(0,X.memo)(function(t){var i=t.showTitle,r=t.placement,s=t.time,l=t.avatar,d=ed({placement:r,showTitle:i,time:s}),c=d.styles;return(0,J.jsxs)(Ae.D,{className:c.name,direction:r==="left"?"horizontal":"horizontal-reverse",gap:4,children:[i?l.title||"untitled":void 0,s&&(0,J.jsx)("time",{children:d3(s)})]})}),Nh=c3,u3=["avatarAddon","onAvatarClick","avatarProps","actions","className","primary","loading","message","placement","type","avatar","error","showTitle","time","editing","onChange","onEditingChange","messageExtra","renderMessage","text","errorMessage","onDoubleClick","fontSize"],Im=32,h3=(0,X.memo)(function(t){var i=t.avatarAddon,r=t.onAvatarClick,s=t.avatarProps,l=t.actions,d=t.className,c=t.primary,u=t.loading,h=t.message,f=t.placement,m=f===void 0?"left":f,p=t.type,g=p===void 0?"block":p,v=t.avatar,w=t.error,x=t.showTitle,_=t.time,k=t.editing,A=t.onChange,C=t.onEditingChange,M=t.messageExtra,D=t.renderMessage,P=t.text,T=t.errorMessage,O=t.onDoubleClick,z=t.fontSize,L=(0,ht.Z)(t,u3),B=(0,Ql.F)(),j=B.mobile,V=ed({editing:k,placement:m,primary:c,showTitle:x,time:_,title:v.title,type:g}),H=V.cx,Y=V.styles;return(0,J.jsxs)(Ae.D,(0,R.Z)((0,R.Z)({className:H(Y.container,d),direction:m==="left"?"horizontal":"horizontal-reverse",gap:j?6:12},L),{},{children:[(0,J.jsx)(G2,(0,R.Z)((0,R.Z)({},s),{},{addon:i,avatar:v,loading:u,onClick:r,placement:m,size:j?Im:void 0})),(0,J.jsxs)(Ae.D,{align:m==="left"?"flex-start":"flex-end",className:Y.messageContainer,children:[(0,J.jsx)(Nh,{avatar:v,placement:m,showTitle:x,time:_}),(0,J.jsxs)(Ae.D,{align:m==="left"?"flex-start":"flex-end",className:Y.messageContent,direction:g==="block"?m==="left"?"horizontal":"horizontal-reverse":"vertical",gap:8,children:[w?(0,J.jsx)(q2,{error:w,message:T,placement:m}):(0,J.jsx)(qT,{editing:k,fontSize:z,message:h,messageExtra:M,onChange:A,onDoubleClick:O,onEditingChange:C,placement:m,primary:c,renderMessage:D,text:P,type:g}),(0,J.jsx)(O1,{actions:l,editing:k,placement:m,type:g})]})]}),j&&g==="block"&&(0,J.jsx)(fu,{borderSpacing:Im})]}))}),$1=h3,id=de(276),f3=de(84751),jh=de(44146),p3=(0,X.memo)(function(t){var i=t.enable,r=t.text;return i?(0,J.jsx)("div",{style:{padding:"0 20px"},children:(0,J.jsx)(id.Z,{children:(0,J.jsx)(jh.Z,{icon:(0,J.jsx)(yt.Z,{icon:f3.Z}),children:r||"History Message"})})}):null}),m3=p3,Aa=de(12003),Rm=de(41047),nd=de(72320),zm=de(48758),$T=de(44844),g3=de(7231),ZT=de(52814),YT=de(57583),v3=function(i){return{copy:{icon:$T.Z,key:"copy",label:(i==null?void 0:i.copy)||"Copy"},del:{icon:g3.Z,key:"del",label:(i==null?void 0:i.delete)||"Delete"},divider:{type:"divider"},edit:{icon:ZT.Z,key:"edit",label:(i==null?void 0:i.edit)||"Edit"},regenerate:{icon:YT.Z,key:"regenerate",label:(i==null?void 0:i.regenerate)||"Regenerate"}}},y3=["text"],XT=(0,X.memo)(function(t){var i=t.text,r=(0,ht.Z)(t,y3),s=v3(i),l=s.regenerate,d=s.edit,c=s.copy,u=s.divider,h=s.del;return(0,J.jsx)(mo,(0,R.Z)({dropdownMenu:[d,c,l,u,h],items:[l,d],type:"ghost"},r))}),js=XT,KT=["renderMessagesExtra","showTitle","onActionsClick","onAvatarsClick","onMessageChange","type","text","renderMessages","renderErrorMessages","renderActions","loading","groupNav","renderItems"],Z1=(0,X.memo)(function(t){var i,r=t.renderMessagesExtra,s=t.showTitle,l=t.onActionsClick,d=t.onAvatarsClick,c=t.onMessageChange,u=t.type,h=t.text,f=t.renderMessages,m=t.renderErrorMessages,p=t.renderActions,g=t.loading,v=t.groupNav,w=t.renderItems,x=(0,ht.Z)(t,KT),_=(0,X.useState)(!1),k=(0,Xt.Z)(_,2),A=k[0],C=k[1],M=nd.Z.useApp(),D=M.message,P=(0,X.useMemo)(function(){if(!(!w||!(x!=null&&x.role))){var j;if(w!=null&&w[x.role]&&(j=w[x.role]),!j&&w!==null&&w!==void 0&&w.default&&(j=w.default),!!j)return j}},[w==null?void 0:w[x.role]]),T=(0,X.useCallback)(function(j){var V=j.editableContent,H=j.data;if(!(!f||!(x!=null&&x.role))){var Y;if(f!=null&&f[x.role]&&(Y=f[x.role]),!Y&&f!==null&&f!==void 0&&f.default&&(Y=f.default),!!Y)return(0,J.jsx)(Y,(0,R.Z)((0,R.Z)({},H),{},{editableContent:V}))}},[f==null?void 0:f[x.role]]),O=(0,X.useCallback)(function(j){var V=j.data;if(!(!r||!(x!=null&&x.role))){var H;if(r!=null&&r[x.role]&&(H=r[x.role]),r!=null&&r.default&&(H=r.default),!!H)return(0,J.jsx)(H,(0,R.Z)({},V))}},[r==null?void 0:r[x.role]]),z=(0,X.useCallback)(function(j){var V,H=j.data;if(!(!m||!(x!=null&&(V=x.error)!==null&&V!==void 0&&V.type))){var Y;if(m!=null&&m[x.error.type]&&(Y=m[x.error.type].Render),!Y&&m!==null&&m!==void 0&&m.default&&(Y=m.default.Render),!!Y)return(0,J.jsx)(Y,(0,R.Z)({},H))}},[m==null?void 0:m[x==null||(i=x.error)===null||i===void 0?void 0:i.type]]),L=(0,X.useCallback)(function(j){var V=j.data;if(!(!p||!(x!=null&&x.role))){var H;p!=null&&p[x.role]&&(H=p[x.role]),p!=null&&p.default&&(H=p.default),H||(H=js);var Y=function(){var se=(0,Rm.Z)((0,Aa.Z)().mark(function re($,te){return(0,Aa.Z)().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:oe.t0=$.key,oe.next=oe.t0==="copy"?3:oe.t0==="edit"?7:8;break;case 3:return oe.next=5,(0,zm.v)(te.content);case 5:return D.success((h==null?void 0:h.copySuccess)||"Copy Success"),oe.abrupt("break",8);case 7:C(!0);case 8:l==null||l($,te);case 9:case"end":return oe.stop()}},re)}));return function($,te){return se.apply(this,arguments)}}();return(0,J.jsx)(H,(0,R.Z)((0,R.Z)({},V),{},{onActionClick:function(re){return Y==null?void 0:Y(re,V)},text:h}))}},[p==null?void 0:p[x.role],h,l]),B=(0,X.useMemo)(function(){var j;if(x.error){var V=(j=x.error)===null||j===void 0?void 0:j.message,H={};if(x.error.type&&m!==null&&m!==void 0&&m[x.error.type]){var Y;H=(Y=m[x.error.type])===null||Y===void 0?void 0:Y.config}return(0,R.Z)({message:V},H)}},[m,x.error]);return P?(0,J.jsx)(P,(0,R.Z)({},t),x.id):(0,J.jsx)($1,{actions:(0,J.jsx)(L,{data:x}),avatar:x.meta,avatarAddon:v,editing:A,error:B,errorMessage:(0,J.jsx)(z,{data:x}),loading:g,message:x.content,messageExtra:(0,J.jsx)(O,{data:x}),onAvatarClick:d==null?void 0:d(x.role),onChange:function(V){return c==null?void 0:c(x.id,V)},onDoubleClick:function(V){x.id==="default"||x.error||x.role&&["assistant","user"].includes(x.role)&&V.altKey&&C(!0)},onEditingChange:C,placement:u==="chat"&&x.role==="user"?"right":"left",primary:x.role==="user",renderMessage:function(V){return(0,J.jsx)(T,{data:x,editableContent:V})},showTitle:s,text:h,time:x.updateAt||x.createAt,type:u==="chat"?"block":"pure"})}),b3=Z1,rd,w3=(0,Et.kc)(function(t){var i=t.css;return{container:i(rd||(rd=(0,be.Z)([`
      position: relative;
    `])))}}),x3=["onActionsClick","onAvatarsClick","renderMessagesExtra","className","data","type","text","showTitle","onMessageChange","renderMessages","renderErrorMessages","loadingId","renderItems","enableHistoryCount","renderActions","historyCount"],Lm=(0,X.memo)(function(t){var i=t.onActionsClick,r=t.onAvatarsClick,s=t.renderMessagesExtra,l=t.className,d=t.data,c=t.type,u=c===void 0?"chat":c,h=t.text,f=t.showTitle,m=t.onMessageChange,p=t.renderMessages,g=t.renderErrorMessages,v=t.loadingId,w=t.renderItems,x=t.enableHistoryCount,_=t.renderActions,k=t.historyCount,A=k===void 0?0:k,C=(0,ht.Z)(t,x3),M=w3(),D=M.cx,P=M.styles;return(0,J.jsx)("div",(0,R.Z)((0,R.Z)({className:D(P.container,l)},C),{},{children:d.map(function(T,O){var z={loading:v===T.id,onActionsClick:i,onAvatarsClick:r,onMessageChange:m,renderActions:_,renderErrorMessages:g,renderItems:w,renderMessages:p,renderMessagesExtra:s,showTitle:f,text:h,type:u},L=d.length,B=x&&L>A&&A===L-O+1;return(0,J.jsxs)(X.Fragment,{children:[(0,J.jsx)(m3,{enable:B,text:h==null?void 0:h.history}),(0,J.jsx)(b3,(0,R.Z)((0,R.Z)({},z),T))]},T.id)})}))}),_3=Lm,k3=de(31926),Y1=de.n(k3),Bm=de(67005),Fm,X1,K1,Q1,S3=(0,Et.kc)(function(t,i){var r=t.cx,s=t.css,l=t.token,d=i.type,c=i.resize,u=s(Fm||(Fm=(0,be.Z)([`
      padding-block: 8px;
      padding-inline: 12px;

      background-color: `,`;
      border: 1px solid `,`;
      border-radius: `,`px;

      transition:
        background-color 100ms `,`,
        border-color 200ms `,`;

      &:hover {
        background-color: `,`;
        border-color: `,`;
      }
    `])),d==="block"?l.colorFillTertiary:"transparent",d==="block"?"transparent":l.colorBorderSecondary,l.borderRadius,l.motionEaseOut,l.motionEaseOut,d==="block"?l.colorFillSecondary:l.colorFillQuaternary,l.colorBorder);return{container:r(d!=="pure"&&u,s(X1||(X1=(0,be.Z)([`
          overflow: hidden auto;
          width: 100%;
          height: fit-content;
        `])))),editor:s(K1||(K1=(0,be.Z)([`
        resize: `,`;
        height: fit-content;
        min-height: 100%;
        font-family: `,` !important;

        textarea {
          min-height: 36px !important;
        }

        pre {
          min-height: 36px !important;
          word-break: break-all;
          word-wrap: break-word;
          white-space: pre-wrap;

          &.shiki {
            margin: 0;
          }
        }
      `])),c?"vertical":"none",l.fontFamilyCode),textarea:s(Q1||(Q1=(0,be.Z)([`
        overflow: hidden auto;

        height: 100% !important;

        color: transparent !important;
        word-break: break-all !important;
        word-wrap: break-word !important;

        caret-color: `,`;

        -webkit-text-fill-color: unset !important;

        &::placeholder {
          color: `,`;
        }

        &:focus {
          border: none !important;
          outline: none !important;
          box-shadow: none !important;
        }
      `])),l.colorText,l.colorTextQuaternary)}}),J1=["style","language","value","onValueChange","resize","className","textareaClassName","type"],ey=(0,X.forwardRef)(function(t,i){var r=t.style,s=t.language,l=t.value,d=t.onValueChange,c=t.resize,u=c===void 0?!0:c,h=t.className,f=t.textareaClassName,m=t.type,p=m===void 0?"ghost":m,g=(0,ht.Z)(t,J1),v=S3({resize:u,type:p}),w=v.styles,x=v.cx;return(0,J.jsx)("div",{className:x(w.container,h),style:r,children:(0,J.jsx)(Y1(),(0,R.Z)({className:w.editor,highlight:function(k){return(0,J.jsx)(Bm.Z,{language:s,children:k})},onValueChange:d,padding:0,ref:i,textareaClassName:x(w.textarea,f),value:l},g))})}),QT=ey,Nm=de(82429),ad,ty,iy,ny,jm={dark:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAABGdBTUEAALGPC/xhBQAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACPTkDJAAAAZUlEQVRIDe2VMQoAMAgDa9/g/1/oIzrpZBCh2dLFkkoDF0Fz99OdiOjks+2/7S8fRRmMMIVoRGSoYzvvqF8ZIMKlC1GhQBc6IkPzq32QmdAzkEGihpWOSPsAss8HegYySNSw0hE9WQ4StafZFqkAAAAASUVORK5CYII=) 0% 0% / 26px",light:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAAFpJREFUWAntljEKADAIA23p6v//qQ+wfUEcCu1yriEgp0FHRJSJcnehmmWm1Dv/lO4HIg1AAAKjTqm03ea88zMCCEDgO4HV5bS757f+7wRoAAIQ4B9gByAAgQ3pfiDmXmAeEwAAAABJRU5ErkJggg==) 0% 0% / 26px"},il=(0,Et.kc)(function(t){var i=t.css,r=t.token;return{scaleBox:i(ad||(ad=(0,be.Z)([`
    cursor: pointer;

    position: relative;

    width: 48px;
    height: 32px;

    background-position:
      0 0,
      0 8px,
      8px -8px,
      -8px 0;
    background-size: 16px 16px;

    transition: scale 400ms `,`;

    &:active {
      scale: 0.8;
    }
  `])),r.motionEaseOut),scaleItem:i(ty||(ty=(0,be.Z)([`
    width: 100%;
    height: 100%;
  `]))),scaleRowTitle:i(iy||(iy=(0,be.Z)([`
    width: 64px;
    height: 32px;
  `]))),text:i(ny||(ny=(0,be.Z)([`
    opacity: 0.5;
  `])))}}),A3=(0,X.memo)(function(t){var i=t.name,r=t.title,s=t.scale,l=il(),d=l.styles,c={},u=!1;switch(r){case"lightA":{c={background:jm.light,backgroundColor:"#fff"},u=!0;break}case"darkA":{c={background:jm.dark,backgroundColor:"#000"},u=!0;break}default:break}return(0,J.jsxs)(Nm.Z,{size:2,children:[(0,J.jsx)("div",{className:d.scaleRowTitle,children:(0,J.jsx)("div",{className:d.text,children:r})},r),s.map(function(h,f){return f===0||f===12?!1:(0,J.jsx)("div",{className:d.scaleBox,onClick:(0,Rm.Z)((0,Aa.Z)().mark(function m(){var p;return(0,Aa.Z)().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return p="token.".concat(i).concat(f).concat(u?"A":""," /* ").concat(h," */"),v.next=3,(0,zm.v)(p);case 3:_n.ZP.success(p);case 4:case"end":return v.stop()}},m)})),style:c,title:h,children:(0,J.jsx)(Ae.D,{align:"center",className:d.scaleItem,horizontal:!0,justify:"center",style:{backgroundColor:h}})},f)})]})}),pu=A3,C3=(0,X.memo)(function(t){var i=t.name,r=t.scale,s=t.midHighLight,l=il(),d=l.styles;return(0,J.jsx)(Ae.D,{align:"center",flex:1,horizontal:!0,justify:"center",children:(0,J.jsx)("div",{style:{padding:"8px 16px 32px 0"},children:(0,J.jsxs)(Nm.Z,{direction:"vertical",size:2,children:[(0,J.jsxs)(Nm.Z,{size:2,children:[(0,J.jsx)(Ae.D,{align:"center",className:d.scaleRowTitle,horizontal:!0},"scale-num"),Array.from({length:r.light.length}).fill("").map(function(c,u){if(u===0||u===12)return!1;var h=s===u;return(0,J.jsx)("div",{className:d.scaleBox,children:(0,J.jsx)("div",{className:d.scaleBox,children:(0,J.jsx)(Ae.D,{align:"center",className:d.scaleItem,horizontal:!0,justify:"center",style:{fontWeight:h?700:400,opacity:.5},children:u})})},"num".concat(u))})]},"scale-title"),(0,J.jsx)(pu,{name:i,scale:r.light,title:"light"},"light"),(0,J.jsx)(pu,{name:i,scale:r.lightA,title:"lightA"},"lightA"),(0,J.jsx)(pu,{name:i,scale:r.dark,title:"dark"},"dark"),(0,J.jsx)(pu,{name:i,scale:r.darkA,title:"darkA"},"darkA")]})})})}),E3=C3,Um=de(19634),JT=(0,X.memo)(function(t){return(0,J.jsx)(Gt.Z,(0,R.Z)({trigger:["contextMenu"]},t))}),Vm=JT,ry=de(92568),Hm,ay,Gm,Wm,mu=(0,Et.kc)(function(t){var i=t.css,r=t.token;return{body:i(Hm||(Hm=(0,be.Z)([`
    overflow: hidden auto;
    padding: 16px;
  `]))),container:i(ay||(ay=(0,be.Z)([`
    position: relative;
    overflow: hidden;
  `]))),footer:i(Gm||(Gm=(0,be.Z)([`
    padding-block: 8px;
    padding-inline: 16px;
    border-block-start: 1px solid `,`;
  `])),r.colorBorderSecondary),header:i(Wm||(Wm=(0,be.Z)([`
    padding-block: 8px;
    padding-inline: 16px;
    font-weight: 500;
    border-block-end: 1px solid `,`;
  `])),r.colorBorderSecondary)}}),sy=["className"],qm=(0,X.memo)(function(t){var i=t.className,r=(0,ht.Z)(t,sy),s=mu(),l=s.cx,d=s.styles;return(0,J.jsx)(Ae.D,(0,R.Z)({className:l(d.body,i),flex:1},r))}),M3=qm,T3=["className"],oy=(0,X.memo)(function(t){var i=t.className,r=(0,ht.Z)(t,T3),s=mu(),l=s.cx,d=s.styles;return(0,J.jsx)(Ae.D,(0,R.Z)({className:l(d.container,i)},r))}),ly=oy,D3=["className"],dy=(0,X.memo)(function(t){var i=t.className,r=(0,ht.Z)(t,D3),s=mu(),l=s.cx,d=s.styles;return(0,J.jsx)(Ae.D,(0,R.Z)({align:"center",className:l(d.footer,i),flex:"none",gap:8,horizontal:!0,justify:"flex-start"},r))}),P3=dy,O3=de(93011),cy=de(39563),I3=de(51971),R3=["pin","setPin","className","setExpand","title","position"],z3=(0,X.memo)(function(t){var i=t.pin,r=t.setPin,s=t.className,l=t.setExpand,d=t.title,c=t.position,u=c===void 0?"left":c,h=(0,ht.Z)(t,R3),f=mu(),m=f.cx,p=f.styles,g=(0,Ns.Z)(!1,{onChange:r,value:i}),v=(0,Xt.Z)(g,2),w=v[0],x=v[1],_=(0,J.jsx)(st.Z,{icon:O3.Z,onClick:function(){return l==null?void 0:l(!1)},size:{blockSize:24,fontSize:14}}),k=(0,J.jsx)(st.Z,{active:i,icon:i?cy.Z:I3.Z,onClick:function(){return x(!w)},size:{blockSize:24,fontSize:14}});return(0,J.jsxs)(Ae.D,(0,R.Z)((0,R.Z)({align:"center",className:m(p.header,s),flex:"none",gap:8,horizontal:!0,justify:"space-between"},h),{},{children:[u==="left"?_:k,d,u==="left"?k:_]}))}),L3=z3,B3=de(42376),$m=de(3341),uy=de.n($m),Uh=de(64044),F3=de(11174),N3=de(28307),j3=["value","onChange","onValueChanging","onChangeEnd"],Zm=(0,X.forwardRef)(function(t,i){var r=t.value,s=t.onChange,l=t.onValueChanging,d=t.onChangeEnd,c=(0,ht.Z)(t,j3),u=(0,X.useState)(r||""),h=(0,Xt.Z)(u,2),f=h[0],m=h[1],p=(0,X.useRef)(!1),g=(0,X.useRef)(!1),v=(0,X.useCallback)(function(){s==null||s(f)},[f]);return(0,X.useEffect)(function(){r!==void 0&&m(r)},[r]),(0,J.jsx)(Xd.I,(0,R.Z)({autoFocus:!0,onBlur:function(){g.current=!1,d==null||d(f)},onChange:function(x){m(x.target.value),l==null||l(x.target.value)},onCompositionEnd:function(){p.current=!1},onCompositionStart:function(){p.current=!0},onFocus:function(){g.current=!0},onPressEnter:function(x){!x.shiftKey&&!p.current&&(x.preventDefault(),v(),g.current=!1,d==null||d(f))},ref:i,suffix:r===f?(0,J.jsx)("span",{}):(0,J.jsx)(B1.ZP,{theme:{token:{fontSize:14}},children:(0,J.jsxs)(Nm.Z,{size:2,children:[(0,J.jsx)(st.Z,{icon:F3.Z,onClick:function(){m(r)},size:"small",title:"Reset"}),(0,J.jsx)(st.Z,{icon:N3.Z,onClick:v,size:"small",title:"\u2705 Save"})]})}),value:f},c))}),hy=de(6399),Jd=Symbol.for("immer-nothing"),Vh=Symbol.for("immer-draftable"),Mi=Symbol.for("immer-state"),U3=[];function hr(t,...i){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var yo=Object.getPrototypeOf;function nl(t){return!!t&&!!t[Mi]}function Qa(t){var i;return t?gu(t)||Array.isArray(t)||!!t[Vh]||!!((i=t.constructor)!=null&&i[Vh])||vu(t)||yu(t):!1}var V3=Object.prototype.constructor.toString();function gu(t){if(!t||typeof t!="object")return!1;const i=yo(t);if(i===null)return!0;const r=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===V3}function eD(t){return nl(t)||hr(15,t),t[Mi].base_}function Us(t,i){rl(t)===0?Reflect.ownKeys(t).forEach(r=>{i(r,t[r],t)}):t.forEach((r,s)=>i(s,r,t))}function rl(t){const i=t[Mi];return i?i.type_:Array.isArray(t)?1:vu(t)?2:yu(t)?3:0}function sd(t,i){return rl(t)===2?t.has(i):Object.prototype.hasOwnProperty.call(t,i)}function Hh(t,i){return rl(t)===2?t.get(i):t[i]}function Gh(t,i,r){const s=rl(t);s===2?t.set(i,r):s===3?t.add(r):t[i]=r}function H3(t,i){return t===i?t!==0||1/t===1/i:t!==t&&i!==i}function vu(t){return t instanceof Map}function yu(t){return t instanceof Set}function On(t){return t.copy_||t.base_}function Wh(t,i){if(vu(t))return new Map(t);if(yu(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=gu(t);if(i===!0||i==="class_only"&&!r){const s=Object.getOwnPropertyDescriptors(t);delete s[Mi];let l=Reflect.ownKeys(s);for(let d=0;d<l.length;d++){const c=l[d],u=s[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(s[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[c]})}return Object.create(yo(t),s)}else{const s=yo(t);if(s!==null&&r)return Z({},t);const l=Object.create(s);return Object.assign(l,t)}}function Ym(t,i=!1){return qh(t)||nl(t)||!Qa(t)||(rl(t)>1&&(t.set=t.add=t.clear=t.delete=G3),Object.freeze(t),i&&Object.entries(t).forEach(([r,s])=>Ym(s,!0))),t}function G3(){hr(2)}function qh(t){return Object.isFrozen(t)}var $h={};function al(t){const i=$h[t];return i||hr(0,t),i}function Xm(t,i){$h[t]||($h[t]=i)}var bu;function Zh(){return bu}function W3(t,i){return{drafts_:[],parent_:t,immer_:i,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function fy(t,i){i&&(al("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=i)}function Km(t){Qm(t),t.drafts_.forEach($3),t.drafts_=null}function Qm(t){t===bu&&(bu=t.parent_)}function q3(t){return bu=W3(bu,t)}function $3(t){const i=t[Mi];i.type_===0||i.type_===1?i.revoke_():i.revoked_=!0}function py(t,i){i.unfinalizedDrafts_=i.drafts_.length;const r=i.drafts_[0];return t!==void 0&&t!==r?(r[Mi].modified_&&(Km(i),hr(4)),Qa(t)&&(t=Jm(i,t),i.parent_||Yh(i,t)),i.patches_&&al("Patches").generateReplacementPatches_(r[Mi].base_,t,i.patches_,i.inversePatches_)):t=Jm(i,r,[]),Km(i),i.patches_&&i.patchListener_(i.patches_,i.inversePatches_),t!==Jd?t:void 0}function Jm(t,i,r){if(qh(i))return i;const s=i[Mi];if(!s)return Us(i,(l,d)=>my(t,s,i,l,d,r)),i;if(s.scope_!==t)return i;if(!s.modified_)return Yh(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const l=s.copy_;let d=l,c=!1;s.type_===3&&(d=new Set(l),l.clear(),c=!0),Us(d,(u,h)=>my(t,s,l,u,h,r,c)),Yh(t,l,!1),r&&t.patches_&&al("Patches").generatePatches_(s,r,t.patches_,t.inversePatches_)}return s.copy_}function my(t,i,r,s,l,d,c){if(nl(l)){const u=d&&i&&i.type_!==3&&!sd(i.assigned_,s)?d.concat(s):void 0,h=Jm(t,l,u);if(Gh(r,s,h),nl(h))t.canAutoFreeze_=!1;else return}else c&&r.add(l);if(Qa(l)&&!qh(l)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Jm(t,l),(!i||!i.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,s)&&Yh(t,l)}}function Yh(t,i,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Ym(i,r)}function Z3(t,i){const r=Array.isArray(t),s={type_:r?1:0,scope_:i?i.scope_:Zh(),modified_:!1,finalized_:!1,assigned_:{},parent_:i,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=s,d=Zi;r&&(l=[s],d=an);const{revoke:c,proxy:u}=Proxy.revocable(l,d);return s.draft_=u,s.revoke_=c,u}var Zi={get(t,i){if(i===Mi)return t;const r=On(t);if(!sd(r,i))return gy(t,r,i);const s=r[i];return t.finalized_||!Qa(s)?s:s===eg(t.base_,i)?(tg(t),t.copy_[i]=wu(s,t)):s},has(t,i){return i in On(t)},ownKeys(t){return Reflect.ownKeys(On(t))},set(t,i,r){const s=Vs(On(t),i);if(s!=null&&s.set)return s.set.call(t.draft_,r),!0;if(!t.modified_){const l=eg(On(t),i),d=l==null?void 0:l[Mi];if(d&&d.base_===r)return t.copy_[i]=r,t.assigned_[i]=!1,!0;if(H3(r,l)&&(r!==void 0||sd(t.base_,i)))return!0;tg(t),bo(t)}return t.copy_[i]===r&&(r!==void 0||i in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[i])||(t.copy_[i]=r,t.assigned_[i]=!0),!0},deleteProperty(t,i){return eg(t.base_,i)!==void 0||i in t.base_?(t.assigned_[i]=!1,tg(t),bo(t)):delete t.assigned_[i],t.copy_&&delete t.copy_[i],!0},getOwnPropertyDescriptor(t,i){const r=On(t),s=Reflect.getOwnPropertyDescriptor(r,i);return s&&{writable:!0,configurable:t.type_!==1||i!=="length",enumerable:s.enumerable,value:r[i]}},defineProperty(){hr(11)},getPrototypeOf(t){return yo(t.base_)},setPrototypeOf(){hr(12)}},an={};Us(Zi,(t,i)=>{an[t]=function(){return arguments[0]=arguments[0][0],i.apply(this,arguments)}}),an.deleteProperty=function(t,i){return an.set.call(this,t,i,void 0)},an.set=function(t,i,r){return Zi.set.call(this,t[0],i,r,t[0])};function eg(t,i){const r=t[Mi];return(r?On(r):t)[i]}function gy(t,i,r){var l;const s=Vs(i,r);return s?"value"in s?s.value:(l=s.get)==null?void 0:l.call(t.draft_):void 0}function Vs(t,i){if(!(i in t))return;let r=yo(t);for(;r;){const s=Object.getOwnPropertyDescriptor(r,i);if(s)return s;r=yo(r)}}function bo(t){t.modified_||(t.modified_=!0,t.parent_&&bo(t.parent_))}function tg(t){t.copy_||(t.copy_=Wh(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Y3=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(i,r,s)=>{if(typeof i=="function"&&typeof r!="function"){const d=r;r=i;const c=this;return function(h=d,...f){return c.produce(h,m=>r.call(this,m,...f))}}typeof r!="function"&&hr(6),s!==void 0&&typeof s!="function"&&hr(7);let l;if(Qa(i)){const d=q3(this),c=wu(i,void 0);let u=!0;try{l=r(c),u=!1}finally{u?Km(d):Qm(d)}return fy(d,s),py(l,d)}else if(!i||typeof i!="object"){if(l=r(i),l===void 0&&(l=i),l===Jd&&(l=void 0),this.autoFreeze_&&Ym(l,!0),s){const d=[],c=[];al("Patches").generateReplacementPatches_(i,l,d,c),s(d,c)}return l}else hr(1,i)},this.produceWithPatches=(i,r)=>{if(typeof i=="function")return(c,...u)=>this.produceWithPatches(c,h=>i(h,...u));let s,l;return[this.produce(i,r,(c,u)=>{s=c,l=u}),s,l]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Qa(t)||hr(8),nl(t)&&(t=vy(t));const i=q3(this),r=wu(t,void 0);return r[Mi].isManual_=!0,Qm(i),r}finishDraft(t,i){const r=t&&t[Mi];(!r||!r.isManual_)&&hr(9);const{scope_:s}=r;return fy(s,i),py(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,i){let r;for(r=i.length-1;r>=0;r--){const l=i[r];if(l.path.length===0&&l.op==="replace"){t=l.value;break}}r>-1&&(i=i.slice(r+1));const s=al("Patches").applyPatches_;return nl(t)?s(t,i):this.produce(t,l=>s(l,i))}};function wu(t,i){const r=vu(t)?al("MapSet").proxyMap_(t,i):yu(t)?al("MapSet").proxySet_(t,i):Z3(t,i);return(i?i.scope_:Zh()).drafts_.push(r),r}function vy(t){return nl(t)||hr(10,t),wo(t)}function wo(t){if(!Qa(t)||qh(t))return t;const i=t[Mi];let r;if(i){if(!i.modified_)return i.base_;i.finalized_=!0,r=Wh(t,i.scope_.immer_.useStrictShallowCopy_)}else r=Wh(t,!0);return Us(r,(s,l)=>{Gh(r,s,wo(l))}),i&&(i.finalized_=!1),r}function X3(){const i="replace",r="add",s="remove";function l(g,v,w,x){switch(g.type_){case 0:case 2:return c(g,v,w,x);case 1:return d(g,v,w,x);case 3:return u(g,v,w,x)}}function d(g,v,w,x){let{base_:_,assigned_:k}=g,A=g.copy_;A.length<_.length&&([_,A]=[A,_],[w,x]=[x,w]);for(let C=0;C<_.length;C++)if(k[C]&&A[C]!==_[C]){const M=v.concat([C]);w.push({op:i,path:M,value:p(A[C])}),x.push({op:i,path:M,value:p(_[C])})}for(let C=_.length;C<A.length;C++){const M=v.concat([C]);w.push({op:r,path:M,value:p(A[C])})}for(let C=A.length-1;_.length<=C;--C){const M=v.concat([C]);x.push({op:s,path:M})}}function c(g,v,w,x){const{base_:_,copy_:k}=g;Us(g.assigned_,(A,C)=>{const M=Hh(_,A),D=Hh(k,A),P=C?sd(_,A)?i:r:s;if(M===D&&P===i)return;const T=v.concat(A);w.push(P===s?{op:P,path:T}:{op:P,path:T,value:D}),x.push(P===r?{op:s,path:T}:P===s?{op:r,path:T,value:p(M)}:{op:i,path:T,value:p(M)})})}function u(g,v,w,x){let{base_:_,copy_:k}=g,A=0;_.forEach(C=>{if(!k.has(C)){const M=v.concat([A]);w.push({op:s,path:M,value:C}),x.unshift({op:r,path:M,value:C})}A++}),A=0,k.forEach(C=>{if(!_.has(C)){const M=v.concat([A]);w.push({op:r,path:M,value:C}),x.unshift({op:s,path:M,value:C})}A++})}function h(g,v,w,x){w.push({op:i,path:[],value:v===Jd?void 0:v}),x.push({op:i,path:[],value:g})}function f(g,v){return v.forEach(w=>{const{path:x,op:_}=w;let k=g;for(let D=0;D<x.length-1;D++){const P=rl(k);let T=x[D];typeof T!="string"&&typeof T!="number"&&(T=""+T),(P===0||P===1)&&(T==="__proto__"||T==="constructor")&&hr(16+3),typeof k=="function"&&T==="prototype"&&hr(16+3),k=Hh(k,T),typeof k!="object"&&hr(16+2,x.join("/"))}const A=rl(k),C=m(w.value),M=x[x.length-1];switch(_){case i:switch(A){case 2:return k.set(M,C);case 3:hr(16);default:return k[M]=C}case r:switch(A){case 1:return M==="-"?k.push(C):k.splice(M,0,C);case 2:return k.set(M,C);case 3:return k.add(C);default:return k[M]=C}case s:switch(A){case 1:return k.splice(M,1);case 2:return k.delete(M);case 3:return k.delete(w.value);default:return delete k[M]}default:hr(16+1,_)}}),g}function m(g){if(!Qa(g))return g;if(Array.isArray(g))return g.map(m);if(vu(g))return new Map(Array.from(g.entries()).map(([w,x])=>[w,m(x)]));if(yu(g))return new Set(Array.from(g).map(m));const v=Object.create(yo(g));for(const w in g)v[w]=m(g[w]);return sd(g,Vh)&&(v[Vh]=g[Vh]),v}function p(g){return nl(g)?m(g):g}Xm("Patches",{applyPatches_:f,generatePatches_:l,generateReplacementPatches_:h})}function sl(){class t extends Map{constructor(h,f){super(),this[Mi]={type_:2,parent_:f,scope_:f?f.scope_:Zh(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:h,draft_:this,isManual_:!1,revoked_:!1}}get size(){return On(this[Mi]).size}has(h){return On(this[Mi]).has(h)}set(h,f){const m=this[Mi];return c(m),(!On(m).has(h)||On(m).get(h)!==f)&&(r(m),bo(m),m.assigned_.set(h,!0),m.copy_.set(h,f),m.assigned_.set(h,!0)),this}delete(h){if(!this.has(h))return!1;const f=this[Mi];return c(f),r(f),bo(f),f.base_.has(h)?f.assigned_.set(h,!1):f.assigned_.delete(h),f.copy_.delete(h),!0}clear(){const h=this[Mi];c(h),On(h).size&&(r(h),bo(h),h.assigned_=new Map,Us(h.base_,f=>{h.assigned_.set(f,!1)}),h.copy_.clear())}forEach(h,f){const m=this[Mi];On(m).forEach((p,g,v)=>{h.call(f,this.get(g),g,this)})}get(h){const f=this[Mi];c(f);const m=On(f).get(h);if(f.finalized_||!Qa(m)||m!==f.base_.get(h))return m;const p=wu(m,f);return r(f),f.copy_.set(h,p),p}keys(){return On(this[Mi]).keys()}values(){const h=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const f=h.next();return f.done?f:{done:!1,value:this.get(f.value)}}}}entries(){const h=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const f=h.next();if(f.done)return f;const m=this.get(f.value);return{done:!1,value:[f.value,m]}}}}[Symbol.iterator](){return this.entries()}}function i(u,h){return new t(u,h)}function r(u){u.copy_||(u.assigned_=new Map,u.copy_=new Map(u.base_))}class s extends Set{constructor(h,f){super(),this[Mi]={type_:3,parent_:f,scope_:f?f.scope_:Zh(),modified_:!1,finalized_:!1,copy_:void 0,base_:h,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return On(this[Mi]).size}has(h){const f=this[Mi];return c(f),f.copy_?!!(f.copy_.has(h)||f.drafts_.has(h)&&f.copy_.has(f.drafts_.get(h))):f.base_.has(h)}add(h){const f=this[Mi];return c(f),this.has(h)||(d(f),bo(f),f.copy_.add(h)),this}delete(h){if(!this.has(h))return!1;const f=this[Mi];return c(f),d(f),bo(f),f.copy_.delete(h)||(f.drafts_.has(h)?f.copy_.delete(f.drafts_.get(h)):!1)}clear(){const h=this[Mi];c(h),On(h).size&&(d(h),bo(h),h.copy_.clear())}values(){const h=this[Mi];return c(h),d(h),h.copy_.values()}entries(){const h=this[Mi];return c(h),d(h),h.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(h,f){const m=this.values();let p=m.next();for(;!p.done;)h.call(f,p.value,p.value,this),p=m.next()}}function l(u,h){return new s(u,h)}function d(u){u.copy_||(u.copy_=new Set,u.base_.forEach(h=>{if(Qa(h)){const f=wu(h,u);u.drafts_.set(h,f),u.copy_.add(f)}else u.copy_.add(h)}))}function c(u){u.revoked_&&hr(3,JSON.stringify(On(u)))}Xm("MapSet",{proxyMap_:i,proxySet_:l})}var Ca=new Y3,xu=Ca.produce,MF=Ca.produceWithPatches.bind(Ca),yy=Ca.setAutoFreeze.bind(Ca),tD=Ca.setUseStrictShallowCopy.bind(Ca),K3=Ca.applyPatches.bind(Ca),iD=Ca.createDraft.bind(Ca),Q3=Ca.finishDraft.bind(Ca);function ni(t){return t}function od(t){return t}var nD=function(i,r){switch(r.type){case"addMessage":return[].concat((0,hy.Z)(i),[r.message]);case"insertMessage":return xu(i,function(s){s.splice(r.index,0,r.message)});case"deleteMessage":return i.filter(function(s,l){return l!==r.index});case"resetMessages":return[];case"updateMessage":return xu(i,function(s){var l=r.index,d=r.message;s[l].content=d});case"updateMessageRole":return xu(i,function(s){var l=r.index,d=r.role;s[l].role=d});case"addUserMessage":return xu(i,function(s){s.push({content:r.message,role:"user"})});case"updateLatestBotMessage":return xu(i,function(){var s=r.responseStream,l={content:s.join(""),role:"assistant"};return[].concat((0,hy.Z)(i.slice(0,-1)),[l])});case"setErrorMessage":return xu(i,function(s){var l=r.index,d=r.error;s[l].error=d});default:throw new Error("\u6682\u672A\u5B9E\u73B0\u7684 type\uFF0C\u8BF7\u68C0\u67E5 reducer")}},J3=(0,X.memo)(function(t){var i=t.disabled,r=t.dataSources,s=t.onChange,l=(0,X.useReducer)(nD,r),d=(0,Xt.Z)(l,2),c=d[0],u=d[1];return(0,X.useEffect)(function(){uy()(r,c)||s==null||s(c)},[c]),r?(0,J.jsxs)(Ae.D,{gap:12,children:[c.map(function(h,f){return(0,J.jsxs)(Ae.D,{align:"center",gap:8,horizontal:!0,width:"100%",children:[(0,J.jsx)(B3.default,{disabled:i,dropdownStyle:{zIndex:100},onChange:function(p){u({index:f,role:p,type:"updateMessageRole"})},options:[{label:"System",value:"system"},{label:"Input",value:"user"},{label:"Output",value:"assistant"}],style:{width:120},value:h.role}),(0,J.jsx)(Zm,{disabled:i,onChange:function(p){u({index:f,message:p,type:"updateMessage"})},placeholder:h.role==="user"?"\u8BF7\u586B\u5165\u8F93\u5165\u7684\u6837\u4F8B\u5185\u5BB9":"\u8BF7\u586B\u5165\u8F93\u51FA\u7684\u6837\u4F8B",value:h.content}),(0,J.jsx)(st.Z,{icon:g3.Z,onClick:function(){u({index:f,type:"deleteMessage"})},placement:"right",size:{fontSize:16},title:"Delete"})]},"".concat(f,"-").concat(h.content))}),(0,J.jsx)(Kr.ZP,{block:!0,disabled:i,icon:(0,J.jsx)(yt.Z,{icon:Uh.Z}),onClick:function(){var f=c.at(-1);u({message:{content:"",role:(f==null?void 0:f.role)==="user"?"assistant":"user"},type:"addMessage"})},children:"Add Props"})]}):void 0},uy()),ek=J3,by=de(44584),Xh=["value","showEditIcon","onChange","editing","onEditingChange"],Kh=(0,X.memo)(function(t){var i=t.value,r=t.showEditIcon,s=r===void 0?!0:r,l=t.onChange,d=t.editing,c=t.onEditingChange,u=(0,ht.Z)(t,Xh),h=(0,Ns.Z)(!1,{onChange:c,value:d}),f=(0,Xt.Z)(h,2),m=f[0],p=f[1];return m?(0,J.jsx)(Zm,(0,R.Z)({onChange:l,onChangeEnd:function(){p(!1)},value:i},u)):(0,J.jsxs)(Ae.D,{gap:8,horizontal:!0,children:[i,s&&(0,J.jsx)(st.Z,{icon:by.Z,onClick:function(){p(!m)},placement:"right",size:"small",title:"Edit"})]})}),tk=Kh,wy=JSON.parse(`{"categories":[{"id":"people","emojis":["grinning","smiley","smile","grin","laughing","sweat_smile","rolling_on_the_floor_laughing","joy","slightly_smiling_face","upside_down_face","melting_face","wink","blush","innocent","smiling_face_with_3_hearts","heart_eyes","star-struck","kissing_heart","kissing","relaxed","kissing_closed_eyes","kissing_smiling_eyes","smiling_face_with_tear","yum","stuck_out_tongue","stuck_out_tongue_winking_eye","zany_face","stuck_out_tongue_closed_eyes","money_mouth_face","hugging_face","face_with_hand_over_mouth","face_with_open_eyes_and_hand_over_mouth","face_with_peeking_eye","shushing_face","thinking_face","saluting_face","zipper_mouth_face","face_with_raised_eyebrow","neutral_face","expressionless","no_mouth","dotted_line_face","face_in_clouds","smirk","unamused","face_with_rolling_eyes","grimacing","face_exhaling","lying_face","shaking_face","relieved","pensive","sleepy","drooling_face","sleeping","mask","face_with_thermometer","face_with_head_bandage","nauseated_face","face_vomiting","sneezing_face","hot_face","cold_face","woozy_face","dizzy_face","face_with_spiral_eyes","exploding_head","face_with_cowboy_hat","partying_face","disguised_face","sunglasses","nerd_face","face_with_monocle","confused","face_with_diagonal_mouth","worried","slightly_frowning_face","white_frowning_face","open_mouth","hushed","astonished","flushed","pleading_face","face_holding_back_tears","frowning","anguished","fearful","cold_sweat","disappointed_relieved","cry","sob","scream","confounded","persevere","disappointed","sweat","weary","tired_face","yawning_face","triumph","rage","angry","face_with_symbols_on_mouth","smiling_imp","imp","skull","skull_and_crossbones","hankey","clown_face","japanese_ogre","japanese_goblin","ghost","alien","space_invader","wave","raised_back_of_hand","raised_hand_with_fingers_splayed","hand","spock-hand","rightwards_hand","leftwards_hand","palm_down_hand","palm_up_hand","leftwards_pushing_hand","rightwards_pushing_hand","ok_hand","pinched_fingers","pinching_hand","v","crossed_fingers","hand_with_index_finger_and_thumb_crossed","i_love_you_hand_sign","the_horns","call_me_hand","point_left","point_right","point_up_2","middle_finger","point_down","point_up","index_pointing_at_the_viewer","+1","-1","fist","facepunch","left-facing_fist","right-facing_fist","clap","raised_hands","heart_hands","open_hands","palms_up_together","handshake","pray","writing_hand","nail_care","selfie","muscle","mechanical_arm","mechanical_leg","leg","foot","ear","ear_with_hearing_aid","nose","brain","anatomical_heart","lungs","tooth","bone","eyes","eye","tongue","lips","biting_lip","baby","child","boy","girl","adult","person_with_blond_hair","man","bearded_person","man_with_beard","woman_with_beard","red_haired_man","curly_haired_man","white_haired_man","bald_man","woman","red_haired_woman","red_haired_person","curly_haired_woman","curly_haired_person","white_haired_woman","white_haired_person","bald_woman","bald_person","blond-haired-woman","blond-haired-man","older_adult","older_man","older_woman","person_frowning","man-frowning","woman-frowning","person_with_pouting_face","man-pouting","woman-pouting","no_good","man-gesturing-no","woman-gesturing-no","ok_woman","man-gesturing-ok","woman-gesturing-ok","information_desk_person","man-tipping-hand","woman-tipping-hand","raising_hand","man-raising-hand","woman-raising-hand","deaf_person","deaf_man","deaf_woman","bow","man-bowing","woman-bowing","face_palm","man-facepalming","woman-facepalming","shrug","man-shrugging","woman-shrugging","health_worker","male-doctor","female-doctor","student","male-student","female-student","teacher","male-teacher","female-teacher","judge","male-judge","female-judge","farmer","male-farmer","female-farmer","cook","male-cook","female-cook","mechanic","male-mechanic","female-mechanic","factory_worker","male-factory-worker","female-factory-worker","office_worker","male-office-worker","female-office-worker","scientist","male-scientist","female-scientist","technologist","male-technologist","female-technologist","singer","male-singer","female-singer","artist","male-artist","female-artist","pilot","male-pilot","female-pilot","astronaut","male-astronaut","female-astronaut","firefighter","male-firefighter","female-firefighter","cop","male-police-officer","female-police-officer","sleuth_or_spy","male-detective","female-detective","guardsman","male-guard","female-guard","ninja","construction_worker","male-construction-worker","female-construction-worker","person_with_crown","prince","princess","man_with_turban","man-wearing-turban","woman-wearing-turban","man_with_gua_pi_mao","person_with_headscarf","person_in_tuxedo","man_in_tuxedo","woman_in_tuxedo","bride_with_veil","man_with_veil","woman_with_veil","pregnant_woman","pregnant_man","pregnant_person","breast-feeding","woman_feeding_baby","man_feeding_baby","person_feeding_baby","angel","santa","mrs_claus","mx_claus","superhero","male_superhero","female_superhero","supervillain","male_supervillain","female_supervillain","mage","male_mage","female_mage","fairy","male_fairy","female_fairy","vampire","male_vampire","female_vampire","merperson","merman","mermaid","elf","male_elf","female_elf","genie","male_genie","female_genie","zombie","male_zombie","female_zombie","troll","massage","man-getting-massage","woman-getting-massage","haircut","man-getting-haircut","woman-getting-haircut","walking","man-walking","woman-walking","standing_person","man_standing","woman_standing","kneeling_person","man_kneeling","woman_kneeling","person_with_probing_cane","man_with_probing_cane","woman_with_probing_cane","person_in_motorized_wheelchair","man_in_motorized_wheelchair","woman_in_motorized_wheelchair","person_in_manual_wheelchair","man_in_manual_wheelchair","woman_in_manual_wheelchair","runner","man-running","woman-running","dancer","man_dancing","man_in_business_suit_levitating","dancers","men-with-bunny-ears-partying","women-with-bunny-ears-partying","person_in_steamy_room","man_in_steamy_room","woman_in_steamy_room","person_climbing","man_climbing","woman_climbing","fencer","horse_racing","skier","snowboarder","golfer","man-golfing","woman-golfing","surfer","man-surfing","woman-surfing","rowboat","man-rowing-boat","woman-rowing-boat","swimmer","man-swimming","woman-swimming","person_with_ball","man-bouncing-ball","woman-bouncing-ball","weight_lifter","man-lifting-weights","woman-lifting-weights","bicyclist","man-biking","woman-biking","mountain_bicyclist","man-mountain-biking","woman-mountain-biking","person_doing_cartwheel","man-cartwheeling","woman-cartwheeling","wrestlers","man-wrestling","woman-wrestling","water_polo","man-playing-water-polo","woman-playing-water-polo","handball","man-playing-handball","woman-playing-handball","juggling","man-juggling","woman-juggling","person_in_lotus_position","man_in_lotus_position","woman_in_lotus_position","bath","sleeping_accommodation","people_holding_hands","two_women_holding_hands","man_and_woman_holding_hands","two_men_holding_hands","couplekiss","woman-kiss-man","man-kiss-man","woman-kiss-woman","couple_with_heart","woman-heart-man","man-heart-man","woman-heart-woman","family","man-woman-boy","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-boy","man-boy-boy","man-girl","man-girl-boy","man-girl-girl","woman-boy","woman-boy-boy","woman-girl","woman-girl-boy","woman-girl-girl","speaking_head_in_silhouette","bust_in_silhouette","busts_in_silhouette","people_hugging","footprints","robot_face","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","see_no_evil","hear_no_evil","speak_no_evil","love_letter","cupid","gift_heart","sparkling_heart","heartpulse","heartbeat","revolving_hearts","two_hearts","heart_decoration","heavy_heart_exclamation_mark_ornament","broken_heart","heart_on_fire","mending_heart","heart","pink_heart","orange_heart","yellow_heart","green_heart","blue_heart","light_blue_heart","purple_heart","brown_heart","black_heart","grey_heart","white_heart","kiss","100","anger","boom","dizzy","sweat_drops","dash","hole","speech_balloon","eye-in-speech-bubble","left_speech_bubble","right_anger_bubble","thought_balloon","zzz"]},{"id":"nature","emojis":["monkey_face","monkey","gorilla","orangutan","dog","dog2","guide_dog","service_dog","poodle","wolf","fox_face","raccoon","cat","cat2","black_cat","lion_face","tiger","tiger2","leopard","horse","moose","donkey","racehorse","unicorn_face","zebra_face","deer","bison","cow","ox","water_buffalo","cow2","pig","pig2","boar","pig_nose","ram","sheep","goat","dromedary_camel","camel","llama","giraffe_face","elephant","mammoth","rhinoceros","hippopotamus","mouse","mouse2","rat","hamster","rabbit","rabbit2","chipmunk","beaver","hedgehog","bat","bear","polar_bear","koala","panda_face","sloth","otter","skunk","kangaroo","badger","feet","turkey","chicken","rooster","hatching_chick","baby_chick","hatched_chick","bird","penguin","dove_of_peace","eagle","duck","swan","owl","dodo","feather","flamingo","peacock","parrot","wing","black_bird","goose","frog","crocodile","turtle","lizard","snake","dragon_face","dragon","sauropod","t-rex","whale","whale2","dolphin","seal","fish","tropical_fish","blowfish","shark","octopus","shell","coral","jellyfish","snail","butterfly","bug","ant","bee","beetle","ladybug","cricket","cockroach","spider","spider_web","scorpion","mosquito","fly","worm","microbe","bouquet","cherry_blossom","white_flower","lotus","rosette","rose","wilted_flower","hibiscus","sunflower","blossom","tulip","hyacinth","seedling","potted_plant","evergreen_tree","deciduous_tree","palm_tree","cactus","ear_of_rice","herb","shamrock","four_leaf_clover","maple_leaf","fallen_leaf","leaves","empty_nest","nest_with_eggs","mushroom"]},{"id":"foods","emojis":["grapes","melon","watermelon","tangerine","lemon","banana","pineapple","mango","apple","green_apple","pear","peach","cherries","strawberry","blueberries","kiwifruit","tomato","olive","coconut","avocado","eggplant","potato","carrot","corn","hot_pepper","bell_pepper","cucumber","leafy_green","broccoli","garlic","onion","peanuts","beans","chestnut","ginger_root","pea_pod","bread","croissant","baguette_bread","flatbread","pretzel","bagel","pancakes","waffle","cheese_wedge","meat_on_bone","poultry_leg","cut_of_meat","bacon","hamburger","fries","pizza","hotdog","sandwich","taco","burrito","tamale","stuffed_flatbread","falafel","egg","fried_egg","shallow_pan_of_food","stew","fondue","bowl_with_spoon","green_salad","popcorn","butter","salt","canned_food","bento","rice_cracker","rice_ball","rice","curry","ramen","spaghetti","sweet_potato","oden","sushi","fried_shrimp","fish_cake","moon_cake","dango","dumpling","fortune_cookie","takeout_box","crab","lobster","shrimp","squid","oyster","icecream","shaved_ice","ice_cream","doughnut","cookie","birthday","cake","cupcake","pie","chocolate_bar","candy","lollipop","custard","honey_pot","baby_bottle","glass_of_milk","coffee","teapot","tea","sake","champagne","wine_glass","cocktail","tropical_drink","beer","beers","clinking_glasses","tumbler_glass","pouring_liquid","cup_with_straw","bubble_tea","beverage_box","mate_drink","ice_cube","chopsticks","knife_fork_plate","fork_and_knife","spoon","hocho","jar","amphora"]},{"id":"activity","emojis":["jack_o_lantern","christmas_tree","fireworks","sparkler","firecracker","sparkles","balloon","tada","confetti_ball","tanabata_tree","bamboo","dolls","flags","wind_chime","rice_scene","red_envelope","ribbon","gift","reminder_ribbon","admission_tickets","ticket","medal","trophy","sports_medal","first_place_medal","second_place_medal","third_place_medal","soccer","baseball","softball","basketball","volleyball","football","rugby_football","tennis","flying_disc","bowling","cricket_bat_and_ball","field_hockey_stick_and_ball","ice_hockey_stick_and_puck","lacrosse","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","boxing_glove","martial_arts_uniform","goal_net","golf","ice_skate","fishing_pole_and_fish","diving_mask","running_shirt_with_sash","ski","sled","curling_stone","dart","yo-yo","kite","gun","8ball","crystal_ball","magic_wand","video_game","joystick","slot_machine","game_die","jigsaw","teddy_bear","pinata","mirror_ball","nesting_dolls","spades","hearts","diamonds","clubs","chess_pawn","black_joker","mahjong","flower_playing_cards","performing_arts","frame_with_picture","art","thread","sewing_needle","yarn","knot"]},{"id":"places","emojis":["earth_africa","earth_americas","earth_asia","globe_with_meridians","world_map","japan","compass","snow_capped_mountain","mountain","volcano","mount_fuji","camping","beach_with_umbrella","desert","desert_island","national_park","stadium","classical_building","building_construction","bricks","rock","wood","hut","house_buildings","derelict_house_building","house","house_with_garden","office","post_office","european_post_office","hospital","bank","hotel","love_hotel","convenience_store","school","department_store","factory","japanese_castle","european_castle","wedding","tokyo_tower","statue_of_liberty","church","mosque","hindu_temple","synagogue","shinto_shrine","kaaba","fountain","tent","foggy","night_with_stars","cityscape","sunrise_over_mountains","sunrise","city_sunset","city_sunrise","bridge_at_night","hotsprings","carousel_horse","playground_slide","ferris_wheel","roller_coaster","barber","circus_tent","steam_locomotive","railway_car","bullettrain_side","bullettrain_front","train2","metro","light_rail","station","tram","monorail","mountain_railway","train","bus","oncoming_bus","trolleybus","minibus","ambulance","fire_engine","police_car","oncoming_police_car","taxi","oncoming_taxi","car","oncoming_automobile","blue_car","pickup_truck","truck","articulated_lorry","tractor","racing_car","racing_motorcycle","motor_scooter","manual_wheelchair","motorized_wheelchair","auto_rickshaw","bike","scooter","skateboard","roller_skate","busstop","motorway","railway_track","oil_drum","fuelpump","wheel","rotating_light","traffic_light","vertical_traffic_light","octagonal_sign","construction","anchor","ring_buoy","boat","canoe","speedboat","passenger_ship","ferry","motor_boat","ship","airplane","small_airplane","airplane_departure","airplane_arriving","parachute","seat","helicopter","suspension_railway","mountain_cableway","aerial_tramway","satellite","rocket","flying_saucer","bellhop_bell","luggage","hourglass","hourglass_flowing_sand","watch","alarm_clock","stopwatch","timer_clock","mantelpiece_clock","clock12","clock1230","clock1","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","clock10","clock1030","clock11","clock1130","new_moon","waxing_crescent_moon","first_quarter_moon","moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","crescent_moon","new_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","thermometer","sunny","full_moon_with_face","sun_with_face","ringed_planet","star","star2","stars","milky_way","cloud","partly_sunny","thunder_cloud_and_rain","mostly_sunny","barely_sunny","partly_sunny_rain","rain_cloud","snow_cloud","lightning","tornado","fog","wind_blowing_face","cyclone","rainbow","closed_umbrella","umbrella","umbrella_with_rain_drops","umbrella_on_ground","zap","snowflake","snowman","snowman_without_snow","comet","fire","droplet","ocean"]},{"id":"objects","emojis":["eyeglasses","dark_sunglasses","goggles","lab_coat","safety_vest","necktie","shirt","jeans","scarf","gloves","coat","socks","dress","kimono","sari","one-piece_swimsuit","briefs","shorts","bikini","womans_clothes","folding_hand_fan","purse","handbag","pouch","shopping_bags","school_satchel","thong_sandal","mans_shoe","athletic_shoe","hiking_boot","womans_flat_shoe","high_heel","sandal","ballet_shoes","boot","hair_pick","crown","womans_hat","tophat","mortar_board","billed_cap","military_helmet","helmet_with_white_cross","prayer_beads","lipstick","ring","gem","mute","speaker","sound","loud_sound","loudspeaker","mega","postal_horn","bell","no_bell","musical_score","musical_note","notes","studio_microphone","level_slider","control_knobs","microphone","headphones","radio","saxophone","accordion","guitar","musical_keyboard","trumpet","violin","banjo","drum_with_drumsticks","long_drum","maracas","flute","iphone","calling","phone","telephone_receiver","pager","fax","battery","low_battery","electric_plug","computer","desktop_computer","printer","keyboard","three_button_mouse","trackball","minidisc","floppy_disk","cd","dvd","abacus","movie_camera","film_frames","film_projector","clapper","tv","camera","camera_with_flash","video_camera","vhs","mag","mag_right","candle","bulb","flashlight","izakaya_lantern","diya_lamp","notebook_with_decorative_cover","closed_book","book","green_book","blue_book","orange_book","books","notebook","ledger","page_with_curl","scroll","page_facing_up","newspaper","rolled_up_newspaper","bookmark_tabs","bookmark","label","moneybag","coin","yen","dollar","euro","pound","money_with_wings","credit_card","receipt","chart","email","e-mail","incoming_envelope","envelope_with_arrow","outbox_tray","inbox_tray","package","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","postbox","ballot_box_with_ballot","pencil2","black_nib","lower_left_fountain_pen","lower_left_ballpoint_pen","lower_left_paintbrush","lower_left_crayon","memo","briefcase","file_folder","open_file_folder","card_index_dividers","date","calendar","spiral_note_pad","spiral_calendar_pad","card_index","chart_with_upwards_trend","chart_with_downwards_trend","bar_chart","clipboard","pushpin","round_pushpin","paperclip","linked_paperclips","straight_ruler","triangular_ruler","scissors","card_file_box","file_cabinet","wastebasket","lock","unlock","lock_with_ink_pen","closed_lock_with_key","key","old_key","hammer","axe","pick","hammer_and_pick","hammer_and_wrench","dagger_knife","crossed_swords","bomb","boomerang","bow_and_arrow","shield","carpentry_saw","wrench","screwdriver","nut_and_bolt","gear","compression","scales","probing_cane","link","chains","hook","toolbox","magnet","ladder","alembic","test_tube","petri_dish","dna","microscope","telescope","satellite_antenna","syringe","drop_of_blood","pill","adhesive_bandage","crutch","stethoscope","x-ray","door","elevator","mirror","window","bed","couch_and_lamp","chair","toilet","plunger","shower","bathtub","mouse_trap","razor","lotion_bottle","safety_pin","broom","basket","roll_of_paper","bucket","soap","bubbles","toothbrush","sponge","fire_extinguisher","shopping_trolley","smoking","coffin","headstone","funeral_urn","nazar_amulet","hamsa","moyai","placard","identification_card"]},{"id":"symbols","emojis":["atm","put_litter_in_its_place","potable_water","wheelchair","mens","womens","restroom","baby_symbol","wc","passport_control","customs","baggage_claim","left_luggage","warning","children_crossing","no_entry","no_entry_sign","no_bicycles","no_smoking","do_not_litter","non-potable_water","no_pedestrians","no_mobile_phones","underage","radioactive_sign","biohazard_sign","arrow_up","arrow_upper_right","arrow_right","arrow_lower_right","arrow_down","arrow_lower_left","arrow_left","arrow_upper_left","arrow_up_down","left_right_arrow","leftwards_arrow_with_hook","arrow_right_hook","arrow_heading_up","arrow_heading_down","arrows_clockwise","arrows_counterclockwise","back","end","on","soon","top","place_of_worship","atom_symbol","om_symbol","star_of_david","wheel_of_dharma","yin_yang","latin_cross","orthodox_cross","star_and_crescent","peace_symbol","menorah_with_nine_branches","six_pointed_star","khanda","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","twisted_rightwards_arrows","repeat","repeat_one","arrow_forward","fast_forward","black_right_pointing_double_triangle_with_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","arrow_backward","rewind","black_left_pointing_double_triangle_with_vertical_bar","arrow_up_small","arrow_double_up","arrow_down_small","arrow_double_down","double_vertical_bar","black_square_for_stop","black_circle_for_record","eject","cinema","low_brightness","high_brightness","signal_strength","wireless","vibration_mode","mobile_phone_off","female_sign","male_sign","transgender_symbol","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","heavy_equals_sign","infinity","bangbang","interrobang","question","grey_question","grey_exclamation","exclamation","wavy_dash","currency_exchange","heavy_dollar_sign","medical_symbol","recycle","fleur_de_lis","trident","name_badge","beginner","o","white_check_mark","ballot_box_with_check","heavy_check_mark","x","negative_squared_cross_mark","curly_loop","loop","part_alternation_mark","eight_spoked_asterisk","eight_pointed_black_star","sparkle","copyright","registered","tm","hash","keycap_star","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","capital_abcd","abcd","1234","symbols","abc","a","ab","b","cl","cool","free","information_source","id","m","new","ng","o2","ok","parking","sos","up","vs","koko","sa","u6708","u6709","u6307","ideograph_advantage","u5272","u7121","u7981","accept","u7533","u5408","u7a7a","congratulations","secret","u55b6","u6e80","red_circle","large_orange_circle","large_yellow_circle","large_green_circle","large_blue_circle","large_purple_circle","large_brown_circle","black_circle","white_circle","large_red_square","large_orange_square","large_yellow_square","large_green_square","large_blue_square","large_purple_square","large_brown_square","black_large_square","white_large_square","black_medium_square","white_medium_square","black_medium_small_square","white_medium_small_square","black_small_square","white_small_square","large_orange_diamond","large_blue_diamond","small_orange_diamond","small_blue_diamond","small_red_triangle","small_red_triangle_down","diamond_shape_with_a_dot_inside","radio_button","white_square_button","black_square_button"]},{"id":"flags","emojis":["checkered_flag","cn","crossed_flags","de","es","flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-england","flag-er","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","flag-ga","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","flag-je","flag-jm","flag-jo","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","flag-rw","flag-sa","flag-sb","flag-sc","flag-scotland","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-un","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wales","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw","fr","gb","it","jp","kr","pirate_flag","rainbow-flag","ru","transgender_flag","triangular_flag_on_post","us","waving_black_flag","waving_white_flag"]}],"emojis":{"100":{"id":"100","name":"Hundred Points","keywords":["100","score","perfect","numbers","century","exam","quiz","test","pass"],"skins":[{"unified":"1f4af","native":"\u{1F4AF}"}],"version":1},"1234":{"id":"1234","name":"Input Numbers","keywords":["1234","blue","square","1","2","3","4"],"skins":[{"unified":"1f522","native":"\u{1F522}"}],"version":1},"grinning":{"id":"grinning","name":"Grinning Face","emoticons":[":D"],"keywords":["smile","happy","joy",":D","grin"],"skins":[{"unified":"1f600","native":"\u{1F600}"}],"version":1},"smiley":{"id":"smiley","name":"Grinning Face with Big Eyes","emoticons":[":)","=)","=-)"],"keywords":["smiley","happy","joy","haha",":D",":)","smile","funny"],"skins":[{"unified":"1f603","native":"\u{1F603}"}],"version":1},"smile":{"id":"smile","name":"Grinning Face with Smiling Eyes","emoticons":[":)","C:","c:",":D",":-D"],"keywords":["smile","happy","joy","funny","haha","laugh","like",":D",":)"],"skins":[{"unified":"1f604","native":"\u{1F604}"}],"version":1},"grin":{"id":"grin","name":"Beaming Face with Smiling Eyes","keywords":["grin","happy","smile","joy","kawaii"],"skins":[{"unified":"1f601","native":"\u{1F601}"}],"version":1},"laughing":{"id":"laughing","name":"Grinning Squinting Face","emoticons":[":>",":->"],"keywords":["laughing","satisfied","happy","joy","lol","haha","glad","XD","laugh"],"skins":[{"unified":"1f606","native":"\u{1F606}"}],"version":1},"sweat_smile":{"id":"sweat_smile","name":"Grinning Face with Sweat","keywords":["smile","hot","happy","laugh","relief"],"skins":[{"unified":"1f605","native":"\u{1F605}"}],"version":1},"rolling_on_the_floor_laughing":{"id":"rolling_on_the_floor_laughing","name":"Rolling on the Floor Laughing","keywords":["face","lol","haha","rofl"],"skins":[{"unified":"1f923","native":"\u{1F923}"}],"version":3},"joy":{"id":"joy","name":"Face with Tears of Joy","keywords":["cry","weep","happy","happytears","haha"],"skins":[{"unified":"1f602","native":"\u{1F602}"}],"version":1},"slightly_smiling_face":{"id":"slightly_smiling_face","name":"Slightly Smiling Face","emoticons":[":)","(:",":-)"],"keywords":["smile"],"skins":[{"unified":"1f642","native":"\u{1F642}"}],"version":1},"upside_down_face":{"id":"upside_down_face","name":"Upside-Down Face","keywords":["upside","down","flipped","silly","smile"],"skins":[{"unified":"1f643","native":"\u{1F643}"}],"version":1},"melting_face":{"id":"melting_face","name":"Melting Face","keywords":["hot","heat"],"skins":[{"unified":"1fae0","native":"\u{1FAE0}"}],"version":14},"wink":{"id":"wink","name":"Winking Face","emoticons":[";)",";-)"],"keywords":["wink","happy","mischievous","secret",";)","smile","eye"],"skins":[{"unified":"1f609","native":"\u{1F609}"}],"version":1},"blush":{"id":"blush","name":"Smiling Face with Smiling Eyes","emoticons":[":)"],"keywords":["blush","smile","happy","flushed","crush","embarrassed","shy","joy"],"skins":[{"unified":"1f60a","native":"\u{1F60A}"}],"version":1},"innocent":{"id":"innocent","name":"Smiling Face with Halo","keywords":["innocent","angel","heaven"],"skins":[{"unified":"1f607","native":"\u{1F607}"}],"version":1},"smiling_face_with_3_hearts":{"id":"smiling_face_with_3_hearts","name":"Smiling Face with Hearts","keywords":["3","love","like","affection","valentines","infatuation","crush","adore"],"skins":[{"unified":"1f970","native":"\u{1F970}"}],"version":11},"heart_eyes":{"id":"heart_eyes","name":"Smiling Face with Heart-Eyes","keywords":["heart","eyes","love","like","affection","valentines","infatuation","crush"],"skins":[{"unified":"1f60d","native":"\u{1F60D}"}],"version":1},"star-struck":{"id":"star-struck","name":"Star-Struck","keywords":["star","struck","grinning","face","with","eyes","smile","starry"],"skins":[{"unified":"1f929","native":"\u{1F929}"}],"version":5},"kissing_heart":{"id":"kissing_heart","name":"Face Blowing a Kiss","emoticons":[":*",":-*"],"keywords":["kissing","heart","love","like","affection","valentines","infatuation"],"skins":[{"unified":"1f618","native":"\u{1F618}"}],"version":1},"kissing":{"id":"kissing","name":"Kissing Face","keywords":["love","like","3","valentines","infatuation","kiss"],"skins":[{"unified":"1f617","native":"\u{1F617}"}],"version":1},"relaxed":{"id":"relaxed","name":"Smiling Face","keywords":["relaxed","blush","massage","happiness"],"skins":[{"unified":"263a-fe0f","native":"\u263A\uFE0F"}],"version":1},"kissing_closed_eyes":{"id":"kissing_closed_eyes","name":"Kissing Face with Closed Eyes","keywords":["love","like","affection","valentines","infatuation","kiss"],"skins":[{"unified":"1f61a","native":"\u{1F61A}"}],"version":1},"kissing_smiling_eyes":{"id":"kissing_smiling_eyes","name":"Kissing Face with Smiling Eyes","keywords":["affection","valentines","infatuation","kiss"],"skins":[{"unified":"1f619","native":"\u{1F619}"}],"version":1},"smiling_face_with_tear":{"id":"smiling_face_with_tear","name":"Smiling Face with Tear","keywords":["sad","cry","pretend"],"skins":[{"unified":"1f972","native":"\u{1F972}"}],"version":13},"yum":{"id":"yum","name":"Face Savoring Food","keywords":["yum","happy","joy","tongue","smile","silly","yummy","nom","delicious","savouring"],"skins":[{"unified":"1f60b","native":"\u{1F60B}"}],"version":1},"stuck_out_tongue":{"id":"stuck_out_tongue","name":"Face with Tongue","emoticons":[":p",":-p",":P",":-P",":b",":-b"],"keywords":["stuck","out","prank","childish","playful","mischievous","smile"],"skins":[{"unified":"1f61b","native":"\u{1F61B}"}],"version":1},"stuck_out_tongue_winking_eye":{"id":"stuck_out_tongue_winking_eye","name":"Winking Face with Tongue","emoticons":[";p",";-p",";b",";-b",";P",";-P"],"keywords":["stuck","out","eye","prank","childish","playful","mischievous","smile","wink"],"skins":[{"unified":"1f61c","native":"\u{1F61C}"}],"version":1},"zany_face":{"id":"zany_face","name":"Zany Face","keywords":["grinning","with","one","large","and","small","eye","goofy","crazy"],"skins":[{"unified":"1f92a","native":"\u{1F92A}"}],"version":5},"stuck_out_tongue_closed_eyes":{"id":"stuck_out_tongue_closed_eyes","name":"Squinting Face with Tongue","keywords":["stuck","out","closed","eyes","prank","playful","mischievous","smile"],"skins":[{"unified":"1f61d","native":"\u{1F61D}"}],"version":1},"money_mouth_face":{"id":"money_mouth_face","name":"Money-Mouth Face","keywords":["money","mouth","rich","dollar"],"skins":[{"unified":"1f911","native":"\u{1F911}"}],"version":1},"hugging_face":{"id":"hugging_face","name":"Hugging Face","keywords":["smile","hug"],"skins":[{"unified":"1f917","native":"\u{1F917}"}],"version":1},"face_with_hand_over_mouth":{"id":"face_with_hand_over_mouth","name":"Face with Hand over Mouth","keywords":["smiling","eyes","and","covering","whoops","shock","surprise"],"skins":[{"unified":"1f92d","native":"\u{1F92D}"}],"version":5},"face_with_open_eyes_and_hand_over_mouth":{"id":"face_with_open_eyes_and_hand_over_mouth","name":"Face with Open Eyes and Hand over Mouth","keywords":["silence","secret","shock","surprise"],"skins":[{"unified":"1fae2","native":"\u{1FAE2}"}],"version":14},"face_with_peeking_eye":{"id":"face_with_peeking_eye","name":"Face with Peeking Eye","keywords":["scared","frightening","embarrassing","shy"],"skins":[{"unified":"1fae3","native":"\u{1FAE3}"}],"version":14},"shushing_face":{"id":"shushing_face","name":"Shushing Face","keywords":["with","finger","covering","closed","lips","quiet","shhh"],"skins":[{"unified":"1f92b","native":"\u{1F92B}"}],"version":5},"thinking_face":{"id":"thinking_face","name":"Thinking Face","keywords":["hmmm","think","consider"],"skins":[{"unified":"1f914","native":"\u{1F914}"}],"version":1},"saluting_face":{"id":"saluting_face","name":"Saluting Face","keywords":["respect","salute"],"skins":[{"unified":"1fae1","native":"\u{1FAE1}"}],"version":14},"zipper_mouth_face":{"id":"zipper_mouth_face","name":"Zipper-Mouth Face","keywords":["zipper","mouth","sealed","secret"],"skins":[{"unified":"1f910","native":"\u{1F910}"}],"version":1},"face_with_raised_eyebrow":{"id":"face_with_raised_eyebrow","name":"Face with Raised Eyebrow","keywords":["one","distrust","scepticism","disapproval","disbelief","surprise"],"skins":[{"unified":"1f928","native":"\u{1F928}"}],"version":5},"neutral_face":{"id":"neutral_face","name":"Neutral Face","emoticons":[":|",":-|"],"keywords":["indifference","meh",":",""],"skins":[{"unified":"1f610","native":"\u{1F610}"}],"version":1},"expressionless":{"id":"expressionless","name":"Expressionless Face","emoticons":["-_-"],"keywords":["indifferent","-","","meh","deadpan"],"skins":[{"unified":"1f611","native":"\u{1F611}"}],"version":1},"no_mouth":{"id":"no_mouth","name":"Face Without Mouth","keywords":["no","hellokitty"],"skins":[{"unified":"1f636","native":"\u{1F636}"}],"version":1},"dotted_line_face":{"id":"dotted_line_face","name":"Dotted Line Face","keywords":["invisible","lonely","isolation","depression"],"skins":[{"unified":"1fae5","native":"\u{1FAE5}"}],"version":14},"face_in_clouds":{"id":"face_in_clouds","name":"Face in Clouds","keywords":["shower","steam","dream"],"skins":[{"unified":"1f636-200d-1f32b-fe0f","native":"\u{1F636}\u200D\u{1F32B}\uFE0F"}],"version":13.1},"smirk":{"id":"smirk","name":"Smirking Face","keywords":["smirk","smile","mean","prank","smug","sarcasm"],"skins":[{"unified":"1f60f","native":"\u{1F60F}"}],"version":1},"unamused":{"id":"unamused","name":"Unamused Face","emoticons":[":("],"keywords":["indifference","bored","straight","serious","sarcasm","unimpressed","skeptical","dubious","side","eye"],"skins":[{"unified":"1f612","native":"\u{1F612}"}],"version":1},"face_with_rolling_eyes":{"id":"face_with_rolling_eyes","name":"Face with Rolling Eyes","keywords":["eyeroll","frustrated"],"skins":[{"unified":"1f644","native":"\u{1F644}"}],"version":1},"grimacing":{"id":"grimacing","name":"Grimacing Face","keywords":["grimace","teeth"],"skins":[{"unified":"1f62c","native":"\u{1F62C}"}],"version":1},"face_exhaling":{"id":"face_exhaling","name":"Face Exhaling","keywords":["relieve","relief","tired","sigh"],"skins":[{"unified":"1f62e-200d-1f4a8","native":"\u{1F62E}\u200D\u{1F4A8}"}],"version":13.1},"lying_face":{"id":"lying_face","name":"Lying Face","keywords":["lie","pinocchio"],"skins":[{"unified":"1f925","native":"\u{1F925}"}],"version":3},"shaking_face":{"id":"shaking_face","name":"Shaking Face","keywords":["dizzy","shock","blurry","earthquake"],"skins":[{"unified":"1fae8","native":"\u{1FAE8}"}],"version":15},"relieved":{"id":"relieved","name":"Relieved Face","keywords":["relaxed","phew","massage","happiness"],"skins":[{"unified":"1f60c","native":"\u{1F60C}"}],"version":1},"pensive":{"id":"pensive","name":"Pensive Face","keywords":["sad","depressed","upset"],"skins":[{"unified":"1f614","native":"\u{1F614}"}],"version":1},"sleepy":{"id":"sleepy","name":"Sleepy Face","keywords":["tired","rest","nap"],"skins":[{"unified":"1f62a","native":"\u{1F62A}"}],"version":1},"drooling_face":{"id":"drooling_face","name":"Drooling Face","keywords":[],"skins":[{"unified":"1f924","native":"\u{1F924}"}],"version":3},"sleeping":{"id":"sleeping","name":"Sleeping Face","keywords":["tired","sleepy","night","zzz"],"skins":[{"unified":"1f634","native":"\u{1F634}"}],"version":1},"mask":{"id":"mask","name":"Face with Medical Mask","keywords":["sick","ill","disease","covid"],"skins":[{"unified":"1f637","native":"\u{1F637}"}],"version":1},"face_with_thermometer":{"id":"face_with_thermometer","name":"Face with Thermometer","keywords":["sick","temperature","cold","fever","covid"],"skins":[{"unified":"1f912","native":"\u{1F912}"}],"version":1},"face_with_head_bandage":{"id":"face_with_head_bandage","name":"Face with Head-Bandage","keywords":["head","bandage","injured","clumsy","hurt"],"skins":[{"unified":"1f915","native":"\u{1F915}"}],"version":1},"nauseated_face":{"id":"nauseated_face","name":"Nauseated Face","keywords":["vomit","gross","green","sick","throw","up","ill"],"skins":[{"unified":"1f922","native":"\u{1F922}"}],"version":3},"face_vomiting":{"id":"face_vomiting","name":"Face Vomiting","keywords":["with","open","mouth","sick"],"skins":[{"unified":"1f92e","native":"\u{1F92E}"}],"version":5},"sneezing_face":{"id":"sneezing_face","name":"Sneezing Face","keywords":["gesundheit","sneeze","sick","allergy"],"skins":[{"unified":"1f927","native":"\u{1F927}"}],"version":3},"hot_face":{"id":"hot_face","name":"Hot Face","keywords":["feverish","heat","red","sweating"],"skins":[{"unified":"1f975","native":"\u{1F975}"}],"version":11},"cold_face":{"id":"cold_face","name":"Cold Face","keywords":["blue","freezing","frozen","frostbite","icicles"],"skins":[{"unified":"1f976","native":"\u{1F976}"}],"version":11},"woozy_face":{"id":"woozy_face","name":"Woozy Face","keywords":["dizzy","intoxicated","tipsy","wavy"],"skins":[{"unified":"1f974","native":"\u{1F974}"}],"version":11},"dizzy_face":{"id":"dizzy_face","name":"Dizzy Face","keywords":["spent","unconscious","xox"],"skins":[{"unified":"1f635","native":"\u{1F635}"}],"version":1},"face_with_spiral_eyes":{"id":"face_with_spiral_eyes","name":"Face with Spiral Eyes","keywords":["sick","ill","confused","nauseous","nausea"],"skins":[{"unified":"1f635-200d-1f4ab","native":"\u{1F635}\u200D\u{1F4AB}"}],"version":13.1},"exploding_head":{"id":"exploding_head","name":"Exploding Head","keywords":["shocked","face","with","mind","blown"],"skins":[{"unified":"1f92f","native":"\u{1F92F}"}],"version":5},"face_with_cowboy_hat":{"id":"face_with_cowboy_hat","name":"Cowboy Hat Face","keywords":["with","cowgirl"],"skins":[{"unified":"1f920","native":"\u{1F920}"}],"version":3},"partying_face":{"id":"partying_face","name":"Partying Face","keywords":["celebration","woohoo"],"skins":[{"unified":"1f973","native":"\u{1F973}"}],"version":11},"disguised_face":{"id":"disguised_face","name":"Disguised Face","keywords":["pretent","brows","glasses","moustache"],"skins":[{"unified":"1f978","native":"\u{1F978}"}],"version":13},"sunglasses":{"id":"sunglasses","name":"Smiling Face with Sunglasses","emoticons":["8)"],"keywords":["cool","smile","summer","beach","sunglass"],"skins":[{"unified":"1f60e","native":"\u{1F60E}"}],"version":1},"nerd_face":{"id":"nerd_face","name":"Nerd Face","keywords":["nerdy","geek","dork"],"skins":[{"unified":"1f913","native":"\u{1F913}"}],"version":1},"face_with_monocle":{"id":"face_with_monocle","name":"Face with Monocle","keywords":["stuffy","wealthy"],"skins":[{"unified":"1f9d0","native":"\u{1F9D0}"}],"version":5},"confused":{"id":"confused","name":"Confused Face","emoticons":[":\\\\",":-\\\\",":/",":-/"],"keywords":["indifference","huh","weird","hmmm",":/"],"skins":[{"unified":"1f615","native":"\u{1F615}"}],"version":1},"face_with_diagonal_mouth":{"id":"face_with_diagonal_mouth","name":"Face with Diagonal Mouth","keywords":["skeptic","confuse","frustrated","indifferent"],"skins":[{"unified":"1fae4","native":"\u{1FAE4}"}],"version":14},"worried":{"id":"worried","name":"Worried Face","keywords":["concern","nervous",":("],"skins":[{"unified":"1f61f","native":"\u{1F61F}"}],"version":1},"slightly_frowning_face":{"id":"slightly_frowning_face","name":"Slightly Frowning Face","keywords":["disappointed","sad","upset"],"skins":[{"unified":"1f641","native":"\u{1F641}"}],"version":1},"white_frowning_face":{"id":"white_frowning_face","name":"Frowning Face","keywords":["white","sad","upset","frown"],"skins":[{"unified":"2639-fe0f","native":"\u2639\uFE0F"}],"version":1},"open_mouth":{"id":"open_mouth","name":"Face with Open Mouth","emoticons":[":o",":-o",":O",":-O"],"keywords":["surprise","impressed","wow","whoa",":O"],"skins":[{"unified":"1f62e","native":"\u{1F62E}"}],"version":1},"hushed":{"id":"hushed","name":"Hushed Face","keywords":["woo","shh"],"skins":[{"unified":"1f62f","native":"\u{1F62F}"}],"version":1},"astonished":{"id":"astonished","name":"Astonished Face","keywords":["xox","surprised","poisoned"],"skins":[{"unified":"1f632","native":"\u{1F632}"}],"version":1},"flushed":{"id":"flushed","name":"Flushed Face","keywords":["blush","shy","flattered"],"skins":[{"unified":"1f633","native":"\u{1F633}"}],"version":1},"pleading_face":{"id":"pleading_face","name":"Pleading Face","keywords":["begging","mercy","cry","tears","sad","grievance"],"skins":[{"unified":"1f97a","native":"\u{1F97A}"}],"version":11},"face_holding_back_tears":{"id":"face_holding_back_tears","name":"Face Holding Back Tears","keywords":["touched","gratitude","cry"],"skins":[{"unified":"1f979","native":"\u{1F979}"}],"version":14},"frowning":{"id":"frowning","name":"Frowning Face with Open Mouth","keywords":["aw","what"],"skins":[{"unified":"1f626","native":"\u{1F626}"}],"version":1},"anguished":{"id":"anguished","name":"Anguished Face","emoticons":["D:"],"keywords":["stunned","nervous"],"skins":[{"unified":"1f627","native":"\u{1F627}"}],"version":1},"fearful":{"id":"fearful","name":"Fearful Face","keywords":["scared","terrified","nervous"],"skins":[{"unified":"1f628","native":"\u{1F628}"}],"version":1},"cold_sweat":{"id":"cold_sweat","name":"Anxious Face with Sweat","keywords":["cold","nervous"],"skins":[{"unified":"1f630","native":"\u{1F630}"}],"version":1},"disappointed_relieved":{"id":"disappointed_relieved","name":"Sad but Relieved Face","keywords":["disappointed","phew","sweat","nervous"],"skins":[{"unified":"1f625","native":"\u{1F625}"}],"version":1},"cry":{"id":"cry","name":"Crying Face","emoticons":[":'("],"keywords":["cry","tears","sad","depressed","upset",":'("],"skins":[{"unified":"1f622","native":"\u{1F622}"}],"version":1},"sob":{"id":"sob","name":"Loudly Crying Face","emoticons":[":'("],"keywords":["sob","cry","tears","sad","upset","depressed"],"skins":[{"unified":"1f62d","native":"\u{1F62D}"}],"version":1},"scream":{"id":"scream","name":"Face Screaming in Fear","keywords":["scream","munch","scared","omg"],"skins":[{"unified":"1f631","native":"\u{1F631}"}],"version":1},"confounded":{"id":"confounded","name":"Confounded Face","keywords":["confused","sick","unwell","oops",":S"],"skins":[{"unified":"1f616","native":"\u{1F616}"}],"version":1},"persevere":{"id":"persevere","name":"Persevering Face","keywords":["persevere","sick","no","upset","oops"],"skins":[{"unified":"1f623","native":"\u{1F623}"}],"version":1},"disappointed":{"id":"disappointed","name":"Disappointed Face","emoticons":["):",":(",":-("],"keywords":["sad","upset","depressed",":("],"skins":[{"unified":"1f61e","native":"\u{1F61E}"}],"version":1},"sweat":{"id":"sweat","name":"Face with Cold Sweat","keywords":["downcast","hot","sad","tired","exercise"],"skins":[{"unified":"1f613","native":"\u{1F613}"}],"version":1},"weary":{"id":"weary","name":"Weary Face","keywords":["tired","sleepy","sad","frustrated","upset"],"skins":[{"unified":"1f629","native":"\u{1F629}"}],"version":1},"tired_face":{"id":"tired_face","name":"Tired Face","keywords":["sick","whine","upset","frustrated"],"skins":[{"unified":"1f62b","native":"\u{1F62B}"}],"version":1},"yawning_face":{"id":"yawning_face","name":"Yawning Face","keywords":["tired","sleepy"],"skins":[{"unified":"1f971","native":"\u{1F971}"}],"version":12},"triumph":{"id":"triumph","name":"Face with Look of Triumph","keywords":["steam","from","nose","gas","phew","proud","pride"],"skins":[{"unified":"1f624","native":"\u{1F624}"}],"version":1},"rage":{"id":"rage","name":"Pouting Face","keywords":["rage","angry","mad","hate","despise"],"skins":[{"unified":"1f621","native":"\u{1F621}"}],"version":1},"angry":{"id":"angry","name":"Angry Face","emoticons":[">:(",">:-("],"keywords":["mad","annoyed","frustrated"],"skins":[{"unified":"1f620","native":"\u{1F620}"}],"version":1},"face_with_symbols_on_mouth":{"id":"face_with_symbols_on_mouth","name":"Face with Symbols on Mouth","keywords":["serious","covering","swearing","cursing","cussing","profanity","expletive"],"skins":[{"unified":"1f92c","native":"\u{1F92C}"}],"version":5},"smiling_imp":{"id":"smiling_imp","name":"Smiling Face with Horns","keywords":["imp","devil"],"skins":[{"unified":"1f608","native":"\u{1F608}"}],"version":1},"imp":{"id":"imp","name":"Imp","keywords":["angry","face","with","horns","devil"],"skins":[{"unified":"1f47f","native":"\u{1F47F}"}],"version":1},"skull":{"id":"skull","name":"Skull","keywords":["dead","skeleton","creepy","death"],"skins":[{"unified":"1f480","native":"\u{1F480}"}],"version":1},"skull_and_crossbones":{"id":"skull_and_crossbones","name":"Skull and Crossbones","keywords":["poison","danger","deadly","scary","death","pirate","evil"],"skins":[{"unified":"2620-fe0f","native":"\u2620\uFE0F"}],"version":1},"hankey":{"id":"hankey","name":"Pile of Poo","keywords":["hankey","poop","shit","shitface","fail","turd"],"skins":[{"unified":"1f4a9","native":"\u{1F4A9}"}],"version":1},"clown_face":{"id":"clown_face","name":"Clown Face","keywords":[],"skins":[{"unified":"1f921","native":"\u{1F921}"}],"version":3},"japanese_ogre":{"id":"japanese_ogre","name":"Ogre","keywords":["japanese","monster","red","mask","halloween","scary","creepy","devil","demon"],"skins":[{"unified":"1f479","native":"\u{1F479}"}],"version":1},"japanese_goblin":{"id":"japanese_goblin","name":"Goblin","keywords":["japanese","red","evil","mask","monster","scary","creepy"],"skins":[{"unified":"1f47a","native":"\u{1F47A}"}],"version":1},"ghost":{"id":"ghost","name":"Ghost","keywords":["halloween","spooky","scary"],"skins":[{"unified":"1f47b","native":"\u{1F47B}"}],"version":1},"alien":{"id":"alien","name":"Alien","keywords":["UFO","paul","weird","outer","space"],"skins":[{"unified":"1f47d","native":"\u{1F47D}"}],"version":1},"space_invader":{"id":"space_invader","name":"Alien Monster","keywords":["space","invader","game","arcade","play"],"skins":[{"unified":"1f47e","native":"\u{1F47E}"}],"version":1},"robot_face":{"id":"robot_face","name":"Robot","keywords":["face","computer","machine","bot"],"skins":[{"unified":"1f916","native":"\u{1F916}"}],"version":1},"smiley_cat":{"id":"smiley_cat","name":"Grinning Cat","keywords":["smiley","animal","cats","happy","smile"],"skins":[{"unified":"1f63a","native":"\u{1F63A}"}],"version":1},"smile_cat":{"id":"smile_cat","name":"Grinning Cat with Smiling Eyes","keywords":["smile","animal","cats"],"skins":[{"unified":"1f638","native":"\u{1F638}"}],"version":1},"joy_cat":{"id":"joy_cat","name":"Cat with Tears of Joy","keywords":["animal","cats","haha","happy"],"skins":[{"unified":"1f639","native":"\u{1F639}"}],"version":1},"heart_eyes_cat":{"id":"heart_eyes_cat","name":"Smiling Cat with Heart-Eyes","keywords":["heart","eyes","animal","love","like","affection","cats","valentines"],"skins":[{"unified":"1f63b","native":"\u{1F63B}"}],"version":1},"smirk_cat":{"id":"smirk_cat","name":"Cat with Wry Smile","keywords":["smirk","animal","cats"],"skins":[{"unified":"1f63c","native":"\u{1F63C}"}],"version":1},"kissing_cat":{"id":"kissing_cat","name":"Kissing Cat","keywords":["animal","cats","kiss"],"skins":[{"unified":"1f63d","native":"\u{1F63D}"}],"version":1},"scream_cat":{"id":"scream_cat","name":"Weary Cat","keywords":["scream","animal","cats","munch","scared"],"skins":[{"unified":"1f640","native":"\u{1F640}"}],"version":1},"crying_cat_face":{"id":"crying_cat_face","name":"Crying Cat","keywords":["face","animal","tears","weep","sad","cats","upset","cry"],"skins":[{"unified":"1f63f","native":"\u{1F63F}"}],"version":1},"pouting_cat":{"id":"pouting_cat","name":"Pouting Cat","keywords":["animal","cats"],"skins":[{"unified":"1f63e","native":"\u{1F63E}"}],"version":1},"see_no_evil":{"id":"see_no_evil","name":"See-No-Evil Monkey","keywords":["see","no","evil","animal","nature","haha"],"skins":[{"unified":"1f648","native":"\u{1F648}"}],"version":1},"hear_no_evil":{"id":"hear_no_evil","name":"Hear-No-Evil Monkey","keywords":["hear","no","evil","animal","nature"],"skins":[{"unified":"1f649","native":"\u{1F649}"}],"version":1},"speak_no_evil":{"id":"speak_no_evil","name":"Speak-No-Evil Monkey","keywords":["speak","no","evil","animal","nature","omg"],"skins":[{"unified":"1f64a","native":"\u{1F64A}"}],"version":1},"love_letter":{"id":"love_letter","name":"Love Letter","keywords":["email","like","affection","envelope","valentines"],"skins":[{"unified":"1f48c","native":"\u{1F48C}"}],"version":1},"cupid":{"id":"cupid","name":"Heart with Arrow","keywords":["cupid","love","like","affection","valentines"],"skins":[{"unified":"1f498","native":"\u{1F498}"}],"version":1},"gift_heart":{"id":"gift_heart","name":"Heart with Ribbon","keywords":["gift","love","valentines"],"skins":[{"unified":"1f49d","native":"\u{1F49D}"}],"version":1},"sparkling_heart":{"id":"sparkling_heart","name":"Sparkling Heart","keywords":["love","like","affection","valentines"],"skins":[{"unified":"1f496","native":"\u{1F496}"}],"version":1},"heartpulse":{"id":"heartpulse","name":"Growing Heart","keywords":["heartpulse","like","love","affection","valentines","pink"],"skins":[{"unified":"1f497","native":"\u{1F497}"}],"version":1},"heartbeat":{"id":"heartbeat","name":"Beating Heart","keywords":["heartbeat","love","like","affection","valentines","pink"],"skins":[{"unified":"1f493","native":"\u{1F493}"}],"version":1},"revolving_hearts":{"id":"revolving_hearts","name":"Revolving Hearts","keywords":["love","like","affection","valentines"],"skins":[{"unified":"1f49e","native":"\u{1F49E}"}],"version":1},"two_hearts":{"id":"two_hearts","name":"Two Hearts","keywords":["love","like","affection","valentines","heart"],"skins":[{"unified":"1f495","native":"\u{1F495}"}],"version":1},"heart_decoration":{"id":"heart_decoration","name":"Heart Decoration","keywords":["purple","square","love","like"],"skins":[{"unified":"1f49f","native":"\u{1F49F}"}],"version":1},"heavy_heart_exclamation_mark_ornament":{"id":"heavy_heart_exclamation_mark_ornament","name":"Heart Exclamation","keywords":["heavy","mark","ornament","decoration","love"],"skins":[{"unified":"2763-fe0f","native":"\u2763\uFE0F"}],"version":1},"broken_heart":{"id":"broken_heart","name":"Broken Heart","emoticons":["</3"],"keywords":["sad","sorry","break","heartbreak"],"skins":[{"unified":"1f494","native":"\u{1F494}"}],"version":1},"heart_on_fire":{"id":"heart_on_fire","name":"Heart on Fire","keywords":["passionate","enthusiastic"],"skins":[{"unified":"2764-fe0f-200d-1f525","native":"\u2764\uFE0F\u200D\u{1F525}"}],"version":13.1},"mending_heart":{"id":"mending_heart","name":"Mending Heart","keywords":["broken","bandage","wounded"],"skins":[{"unified":"2764-fe0f-200d-1fa79","native":"\u2764\uFE0F\u200D\u{1FA79}"}],"version":13.1},"heart":{"id":"heart","name":"Red Heart","emoticons":["<3"],"keywords":["love","like","valentines"],"skins":[{"unified":"2764-fe0f","native":"\u2764\uFE0F"}],"version":1},"pink_heart":{"id":"pink_heart","name":"Pink Heart","keywords":["valentines"],"skins":[{"unified":"1fa77","native":"\u{1FA77}"}],"version":15},"orange_heart":{"id":"orange_heart","name":"Orange Heart","keywords":["love","like","affection","valentines"],"skins":[{"unified":"1f9e1","native":"\u{1F9E1}"}],"version":5},"yellow_heart":{"id":"yellow_heart","name":"Yellow Heart","emoticons":["<3"],"keywords":["love","like","affection","valentines"],"skins":[{"unified":"1f49b","native":"\u{1F49B}"}],"version":1},"green_heart":{"id":"green_heart","name":"Green Heart","emoticons":["<3"],"keywords":["love","like","affection","valentines"],"skins":[{"unified":"1f49a","native":"\u{1F49A}"}],"version":1},"blue_heart":{"id":"blue_heart","name":"Blue Heart","emoticons":["<3"],"keywords":["love","like","affection","valentines"],"skins":[{"unified":"1f499","native":"\u{1F499}"}],"version":1},"light_blue_heart":{"id":"light_blue_heart","name":"Light Blue Heart","keywords":["ice","baby"],"skins":[{"unified":"1fa75","native":"\u{1FA75}"}],"version":15},"purple_heart":{"id":"purple_heart","name":"Purple Heart","emoticons":["<3"],"keywords":["love","like","affection","valentines"],"skins":[{"unified":"1f49c","native":"\u{1F49C}"}],"version":1},"brown_heart":{"id":"brown_heart","name":"Brown Heart","keywords":["coffee"],"skins":[{"unified":"1f90e","native":"\u{1F90E}"}],"version":12},"black_heart":{"id":"black_heart","name":"Black Heart","keywords":["evil"],"skins":[{"unified":"1f5a4","native":"\u{1F5A4}"}],"version":3},"grey_heart":{"id":"grey_heart","name":"Grey Heart","keywords":["silver","monochrome"],"skins":[{"unified":"1fa76","native":"\u{1FA76}"}],"version":15},"white_heart":{"id":"white_heart","name":"White Heart","keywords":["pure"],"skins":[{"unified":"1f90d","native":"\u{1F90D}"}],"version":12},"kiss":{"id":"kiss","name":"Kiss Mark","keywords":["face","lips","love","like","affection","valentines"],"skins":[{"unified":"1f48b","native":"\u{1F48B}"}],"version":1},"anger":{"id":"anger","name":"Anger Symbol","keywords":["angry","mad"],"skins":[{"unified":"1f4a2","native":"\u{1F4A2}"}],"version":1},"boom":{"id":"boom","name":"Collision","keywords":["boom","bomb","explode","explosion","blown"],"skins":[{"unified":"1f4a5","native":"\u{1F4A5}"}],"version":1},"dizzy":{"id":"dizzy","name":"Dizzy","keywords":["star","sparkle","shoot","magic"],"skins":[{"unified":"1f4ab","native":"\u{1F4AB}"}],"version":1},"sweat_drops":{"id":"sweat_drops","name":"Sweat Droplets","keywords":["drops","water","drip","oops"],"skins":[{"unified":"1f4a6","native":"\u{1F4A6}"}],"version":1},"dash":{"id":"dash","name":"Dash Symbol","keywords":["dashing","away","wind","air","fast","shoo","fart","smoke","puff"],"skins":[{"unified":"1f4a8","native":"\u{1F4A8}"}],"version":1},"hole":{"id":"hole","name":"Hole","keywords":["embarrassing"],"skins":[{"unified":"1f573-fe0f","native":"\u{1F573}\uFE0F"}],"version":1},"speech_balloon":{"id":"speech_balloon","name":"Speech Balloon","keywords":["bubble","words","message","talk","chatting"],"skins":[{"unified":"1f4ac","native":"\u{1F4AC}"}],"version":1},"eye-in-speech-bubble":{"id":"eye-in-speech-bubble","name":"Eye in Speech Bubble","keywords":["in-speech-bubble","info"],"skins":[{"unified":"1f441-fe0f-200d-1f5e8-fe0f","native":"\u{1F441}\uFE0F\u200D\u{1F5E8}\uFE0F"}],"version":2},"left_speech_bubble":{"id":"left_speech_bubble","name":"Left Speech Bubble","keywords":["words","message","talk","chatting"],"skins":[{"unified":"1f5e8-fe0f","native":"\u{1F5E8}\uFE0F"}],"version":2},"right_anger_bubble":{"id":"right_anger_bubble","name":"Right Anger Bubble","keywords":["caption","speech","thinking","mad"],"skins":[{"unified":"1f5ef-fe0f","native":"\u{1F5EF}\uFE0F"}],"version":1},"thought_balloon":{"id":"thought_balloon","name":"Thought Balloon","keywords":["bubble","cloud","speech","thinking","dream"],"skins":[{"unified":"1f4ad","native":"\u{1F4AD}"}],"version":1},"zzz":{"id":"zzz","name":"Zzz","keywords":["sleepy","tired","dream"],"skins":[{"unified":"1f4a4","native":"\u{1F4A4}"}],"version":1},"wave":{"id":"wave","name":"Waving Hand","keywords":["wave","hands","gesture","goodbye","solong","farewell","hello","hi","palm"],"skins":[{"unified":"1f44b","native":"\u{1F44B}"},{"unified":"1f44b-1f3fb","native":"\u{1F44B}\u{1F3FB}"},{"unified":"1f44b-1f3fc","native":"\u{1F44B}\u{1F3FC}"},{"unified":"1f44b-1f3fd","native":"\u{1F44B}\u{1F3FD}"},{"unified":"1f44b-1f3fe","native":"\u{1F44B}\u{1F3FE}"},{"unified":"1f44b-1f3ff","native":"\u{1F44B}\u{1F3FF}"}],"version":1},"raised_back_of_hand":{"id":"raised_back_of_hand","name":"Raised Back of Hand","keywords":["fingers","backhand"],"skins":[{"unified":"1f91a","native":"\u{1F91A}"},{"unified":"1f91a-1f3fb","native":"\u{1F91A}\u{1F3FB}"},{"unified":"1f91a-1f3fc","native":"\u{1F91A}\u{1F3FC}"},{"unified":"1f91a-1f3fd","native":"\u{1F91A}\u{1F3FD}"},{"unified":"1f91a-1f3fe","native":"\u{1F91A}\u{1F3FE}"},{"unified":"1f91a-1f3ff","native":"\u{1F91A}\u{1F3FF}"}],"version":3},"raised_hand_with_fingers_splayed":{"id":"raised_hand_with_fingers_splayed","name":"Hand with Fingers Splayed","keywords":["raised","palm"],"skins":[{"unified":"1f590-fe0f","native":"\u{1F590}\uFE0F"},{"unified":"1f590-1f3fb","native":"\u{1F590}\u{1F3FB}"},{"unified":"1f590-1f3fc","native":"\u{1F590}\u{1F3FC}"},{"unified":"1f590-1f3fd","native":"\u{1F590}\u{1F3FD}"},{"unified":"1f590-1f3fe","native":"\u{1F590}\u{1F3FE}"},{"unified":"1f590-1f3ff","native":"\u{1F590}\u{1F3FF}"}],"version":1},"hand":{"id":"hand","name":"Raised Hand","keywords":["fingers","stop","highfive","high","five","palm","ban"],"skins":[{"unified":"270b","native":"\u270B"},{"unified":"270b-1f3fb","native":"\u270B\u{1F3FB}"},{"unified":"270b-1f3fc","native":"\u270B\u{1F3FC}"},{"unified":"270b-1f3fd","native":"\u270B\u{1F3FD}"},{"unified":"270b-1f3fe","native":"\u270B\u{1F3FE}"},{"unified":"270b-1f3ff","native":"\u270B\u{1F3FF}"}],"version":1},"spock-hand":{"id":"spock-hand","name":"Vulcan Salute","keywords":["spock","hand","fingers","star","trek"],"skins":[{"unified":"1f596","native":"\u{1F596}"},{"unified":"1f596-1f3fb","native":"\u{1F596}\u{1F3FB}"},{"unified":"1f596-1f3fc","native":"\u{1F596}\u{1F3FC}"},{"unified":"1f596-1f3fd","native":"\u{1F596}\u{1F3FD}"},{"unified":"1f596-1f3fe","native":"\u{1F596}\u{1F3FE}"},{"unified":"1f596-1f3ff","native":"\u{1F596}\u{1F3FF}"}],"version":1},"rightwards_hand":{"id":"rightwards_hand","name":"Rightwards Hand","keywords":["palm","offer"],"skins":[{"unified":"1faf1","native":"\u{1FAF1}"},{"unified":"1faf1-1f3fb","native":"\u{1FAF1}\u{1F3FB}"},{"unified":"1faf1-1f3fc","native":"\u{1FAF1}\u{1F3FC}"},{"unified":"1faf1-1f3fd","native":"\u{1FAF1}\u{1F3FD}"},{"unified":"1faf1-1f3fe","native":"\u{1FAF1}\u{1F3FE}"},{"unified":"1faf1-1f3ff","native":"\u{1FAF1}\u{1F3FF}"}],"version":14},"leftwards_hand":{"id":"leftwards_hand","name":"Leftwards Hand","keywords":["palm","offer"],"skins":[{"unified":"1faf2","native":"\u{1FAF2}"},{"unified":"1faf2-1f3fb","native":"\u{1FAF2}\u{1F3FB}"},{"unified":"1faf2-1f3fc","native":"\u{1FAF2}\u{1F3FC}"},{"unified":"1faf2-1f3fd","native":"\u{1FAF2}\u{1F3FD}"},{"unified":"1faf2-1f3fe","native":"\u{1FAF2}\u{1F3FE}"},{"unified":"1faf2-1f3ff","native":"\u{1FAF2}\u{1F3FF}"}],"version":14},"palm_down_hand":{"id":"palm_down_hand","name":"Palm Down Hand","keywords":["drop"],"skins":[{"unified":"1faf3","native":"\u{1FAF3}"},{"unified":"1faf3-1f3fb","native":"\u{1FAF3}\u{1F3FB}"},{"unified":"1faf3-1f3fc","native":"\u{1FAF3}\u{1F3FC}"},{"unified":"1faf3-1f3fd","native":"\u{1FAF3}\u{1F3FD}"},{"unified":"1faf3-1f3fe","native":"\u{1FAF3}\u{1F3FE}"},{"unified":"1faf3-1f3ff","native":"\u{1FAF3}\u{1F3FF}"}],"version":14},"palm_up_hand":{"id":"palm_up_hand","name":"Palm Up Hand","keywords":["lift","offer","demand"],"skins":[{"unified":"1faf4","native":"\u{1FAF4}"},{"unified":"1faf4-1f3fb","native":"\u{1FAF4}\u{1F3FB}"},{"unified":"1faf4-1f3fc","native":"\u{1FAF4}\u{1F3FC}"},{"unified":"1faf4-1f3fd","native":"\u{1FAF4}\u{1F3FD}"},{"unified":"1faf4-1f3fe","native":"\u{1FAF4}\u{1F3FE}"},{"unified":"1faf4-1f3ff","native":"\u{1FAF4}\u{1F3FF}"}],"version":14},"leftwards_pushing_hand":{"id":"leftwards_pushing_hand","name":"Leftwards Pushing Hand","keywords":["highfive","high","five","pressing","stop"],"skins":[{"unified":"1faf7","native":"\u{1FAF7}"},{"unified":"1faf7-1f3fb","native":"\u{1FAF7}\u{1F3FB}"},{"unified":"1faf7-1f3fc","native":"\u{1FAF7}\u{1F3FC}"},{"unified":"1faf7-1f3fd","native":"\u{1FAF7}\u{1F3FD}"},{"unified":"1faf7-1f3fe","native":"\u{1FAF7}\u{1F3FE}"},{"unified":"1faf7-1f3ff","native":"\u{1FAF7}\u{1F3FF}"}],"version":15},"rightwards_pushing_hand":{"id":"rightwards_pushing_hand","name":"Rightwards Pushing Hand","keywords":["highfive","high","five","pressing","stop"],"skins":[{"unified":"1faf8","native":"\u{1FAF8}"},{"unified":"1faf8-1f3fb","native":"\u{1FAF8}\u{1F3FB}"},{"unified":"1faf8-1f3fc","native":"\u{1FAF8}\u{1F3FC}"},{"unified":"1faf8-1f3fd","native":"\u{1FAF8}\u{1F3FD}"},{"unified":"1faf8-1f3fe","native":"\u{1FAF8}\u{1F3FE}"},{"unified":"1faf8-1f3ff","native":"\u{1FAF8}\u{1F3FF}"}],"version":15},"ok_hand":{"id":"ok_hand","name":"Ok Hand","keywords":["fingers","limbs","perfect","okay"],"skins":[{"unified":"1f44c","native":"\u{1F44C}"},{"unified":"1f44c-1f3fb","native":"\u{1F44C}\u{1F3FB}"},{"unified":"1f44c-1f3fc","native":"\u{1F44C}\u{1F3FC}"},{"unified":"1f44c-1f3fd","native":"\u{1F44C}\u{1F3FD}"},{"unified":"1f44c-1f3fe","native":"\u{1F44C}\u{1F3FE}"},{"unified":"1f44c-1f3ff","native":"\u{1F44C}\u{1F3FF}"}],"version":1},"pinched_fingers":{"id":"pinched_fingers","name":"Pinched Fingers","keywords":["size","tiny","small"],"skins":[{"unified":"1f90c","native":"\u{1F90C}"},{"unified":"1f90c-1f3fb","native":"\u{1F90C}\u{1F3FB}"},{"unified":"1f90c-1f3fc","native":"\u{1F90C}\u{1F3FC}"},{"unified":"1f90c-1f3fd","native":"\u{1F90C}\u{1F3FD}"},{"unified":"1f90c-1f3fe","native":"\u{1F90C}\u{1F3FE}"},{"unified":"1f90c-1f3ff","native":"\u{1F90C}\u{1F3FF}"}],"version":13},"pinching_hand":{"id":"pinching_hand","name":"Pinching Hand","keywords":["tiny","small","size"],"skins":[{"unified":"1f90f","native":"\u{1F90F}"},{"unified":"1f90f-1f3fb","native":"\u{1F90F}\u{1F3FB}"},{"unified":"1f90f-1f3fc","native":"\u{1F90F}\u{1F3FC}"},{"unified":"1f90f-1f3fd","native":"\u{1F90F}\u{1F3FD}"},{"unified":"1f90f-1f3fe","native":"\u{1F90F}\u{1F3FE}"},{"unified":"1f90f-1f3ff","native":"\u{1F90F}\u{1F3FF}"}],"version":12},"v":{"id":"v","name":"Victory Hand","keywords":["v","fingers","ohyeah","peace","two"],"skins":[{"unified":"270c-fe0f","native":"\u270C\uFE0F"},{"unified":"270c-1f3fb","native":"\u270C\u{1F3FB}"},{"unified":"270c-1f3fc","native":"\u270C\u{1F3FC}"},{"unified":"270c-1f3fd","native":"\u270C\u{1F3FD}"},{"unified":"270c-1f3fe","native":"\u270C\u{1F3FE}"},{"unified":"270c-1f3ff","native":"\u270C\u{1F3FF}"}],"version":1},"crossed_fingers":{"id":"crossed_fingers","name":"Crossed Fingers","keywords":["hand","with","index","and","middle","good","lucky"],"skins":[{"unified":"1f91e","native":"\u{1F91E}"},{"unified":"1f91e-1f3fb","native":"\u{1F91E}\u{1F3FB}"},{"unified":"1f91e-1f3fc","native":"\u{1F91E}\u{1F3FC}"},{"unified":"1f91e-1f3fd","native":"\u{1F91E}\u{1F3FD}"},{"unified":"1f91e-1f3fe","native":"\u{1F91E}\u{1F3FE}"},{"unified":"1f91e-1f3ff","native":"\u{1F91E}\u{1F3FF}"}],"version":3},"hand_with_index_finger_and_thumb_crossed":{"id":"hand_with_index_finger_and_thumb_crossed","name":"Hand with Index Finger and Thumb Crossed","keywords":["heart","love","money","expensive"],"skins":[{"unified":"1faf0","native":"\u{1FAF0}"},{"unified":"1faf0-1f3fb","native":"\u{1FAF0}\u{1F3FB}"},{"unified":"1faf0-1f3fc","native":"\u{1FAF0}\u{1F3FC}"},{"unified":"1faf0-1f3fd","native":"\u{1FAF0}\u{1F3FD}"},{"unified":"1faf0-1f3fe","native":"\u{1FAF0}\u{1F3FE}"},{"unified":"1faf0-1f3ff","native":"\u{1FAF0}\u{1F3FF}"}],"version":14},"i_love_you_hand_sign":{"id":"i_love_you_hand_sign","name":"Love-You Gesture","keywords":["i","love","you","hand","sign","fingers"],"skins":[{"unified":"1f91f","native":"\u{1F91F}"},{"unified":"1f91f-1f3fb","native":"\u{1F91F}\u{1F3FB}"},{"unified":"1f91f-1f3fc","native":"\u{1F91F}\u{1F3FC}"},{"unified":"1f91f-1f3fd","native":"\u{1F91F}\u{1F3FD}"},{"unified":"1f91f-1f3fe","native":"\u{1F91F}\u{1F3FE}"},{"unified":"1f91f-1f3ff","native":"\u{1F91F}\u{1F3FF}"}],"version":5},"the_horns":{"id":"the_horns","name":"Sign of the Horns","keywords":["hand","fingers","evil","eye","rock","on"],"skins":[{"unified":"1f918","native":"\u{1F918}"},{"unified":"1f918-1f3fb","native":"\u{1F918}\u{1F3FB}"},{"unified":"1f918-1f3fc","native":"\u{1F918}\u{1F3FC}"},{"unified":"1f918-1f3fd","native":"\u{1F918}\u{1F3FD}"},{"unified":"1f918-1f3fe","native":"\u{1F918}\u{1F3FE}"},{"unified":"1f918-1f3ff","native":"\u{1F918}\u{1F3FF}"}],"version":1},"call_me_hand":{"id":"call_me_hand","name":"Call Me Hand","keywords":["hands","gesture","shaka"],"skins":[{"unified":"1f919","native":"\u{1F919}"},{"unified":"1f919-1f3fb","native":"\u{1F919}\u{1F3FB}"},{"unified":"1f919-1f3fc","native":"\u{1F919}\u{1F3FC}"},{"unified":"1f919-1f3fd","native":"\u{1F919}\u{1F3FD}"},{"unified":"1f919-1f3fe","native":"\u{1F919}\u{1F3FE}"},{"unified":"1f919-1f3ff","native":"\u{1F919}\u{1F3FF}"}],"version":3},"point_left":{"id":"point_left","name":"Backhand Index Pointing Left","keywords":["point","direction","fingers","hand"],"skins":[{"unified":"1f448","native":"\u{1F448}"},{"unified":"1f448-1f3fb","native":"\u{1F448}\u{1F3FB}"},{"unified":"1f448-1f3fc","native":"\u{1F448}\u{1F3FC}"},{"unified":"1f448-1f3fd","native":"\u{1F448}\u{1F3FD}"},{"unified":"1f448-1f3fe","native":"\u{1F448}\u{1F3FE}"},{"unified":"1f448-1f3ff","native":"\u{1F448}\u{1F3FF}"}],"version":1},"point_right":{"id":"point_right","name":"Backhand Index Pointing Right","keywords":["point","fingers","hand","direction"],"skins":[{"unified":"1f449","native":"\u{1F449}"},{"unified":"1f449-1f3fb","native":"\u{1F449}\u{1F3FB}"},{"unified":"1f449-1f3fc","native":"\u{1F449}\u{1F3FC}"},{"unified":"1f449-1f3fd","native":"\u{1F449}\u{1F3FD}"},{"unified":"1f449-1f3fe","native":"\u{1F449}\u{1F3FE}"},{"unified":"1f449-1f3ff","native":"\u{1F449}\u{1F3FF}"}],"version":1},"point_up_2":{"id":"point_up_2","name":"Backhand Index Pointing Up","keywords":["point","2","fingers","hand","direction"],"skins":[{"unified":"1f446","native":"\u{1F446}"},{"unified":"1f446-1f3fb","native":"\u{1F446}\u{1F3FB}"},{"unified":"1f446-1f3fc","native":"\u{1F446}\u{1F3FC}"},{"unified":"1f446-1f3fd","native":"\u{1F446}\u{1F3FD}"},{"unified":"1f446-1f3fe","native":"\u{1F446}\u{1F3FE}"},{"unified":"1f446-1f3ff","native":"\u{1F446}\u{1F3FF}"}],"version":1},"middle_finger":{"id":"middle_finger","name":"Middle Finger","keywords":["reversed","hand","with","extended","fingers","rude","flipping"],"skins":[{"unified":"1f595","native":"\u{1F595}"},{"unified":"1f595-1f3fb","native":"\u{1F595}\u{1F3FB}"},{"unified":"1f595-1f3fc","native":"\u{1F595}\u{1F3FC}"},{"unified":"1f595-1f3fd","native":"\u{1F595}\u{1F3FD}"},{"unified":"1f595-1f3fe","native":"\u{1F595}\u{1F3FE}"},{"unified":"1f595-1f3ff","native":"\u{1F595}\u{1F3FF}"}],"version":1},"point_down":{"id":"point_down","name":"Backhand Index Pointing Down","keywords":["point","fingers","hand","direction"],"skins":[{"unified":"1f447","native":"\u{1F447}"},{"unified":"1f447-1f3fb","native":"\u{1F447}\u{1F3FB}"},{"unified":"1f447-1f3fc","native":"\u{1F447}\u{1F3FC}"},{"unified":"1f447-1f3fd","native":"\u{1F447}\u{1F3FD}"},{"unified":"1f447-1f3fe","native":"\u{1F447}\u{1F3FE}"},{"unified":"1f447-1f3ff","native":"\u{1F447}\u{1F3FF}"}],"version":1},"point_up":{"id":"point_up","name":"Index Pointing Up","keywords":["point","hand","fingers","direction"],"skins":[{"unified":"261d-fe0f","native":"\u261D\uFE0F"},{"unified":"261d-1f3fb","native":"\u261D\u{1F3FB}"},{"unified":"261d-1f3fc","native":"\u261D\u{1F3FC}"},{"unified":"261d-1f3fd","native":"\u261D\u{1F3FD}"},{"unified":"261d-1f3fe","native":"\u261D\u{1F3FE}"},{"unified":"261d-1f3ff","native":"\u261D\u{1F3FF}"}],"version":1},"index_pointing_at_the_viewer":{"id":"index_pointing_at_the_viewer","name":"Index Pointing at the Viewer","keywords":["you","recruit"],"skins":[{"unified":"1faf5","native":"\u{1FAF5}"},{"unified":"1faf5-1f3fb","native":"\u{1FAF5}\u{1F3FB}"},{"unified":"1faf5-1f3fc","native":"\u{1FAF5}\u{1F3FC}"},{"unified":"1faf5-1f3fd","native":"\u{1FAF5}\u{1F3FD}"},{"unified":"1faf5-1f3fe","native":"\u{1FAF5}\u{1F3FE}"},{"unified":"1faf5-1f3ff","native":"\u{1FAF5}\u{1F3FF}"}],"version":14},"+1":{"id":"+1","name":"Thumbs Up","keywords":["+1","thumbsup","yes","awesome","good","agree","accept","cool","hand","like"],"skins":[{"unified":"1f44d","native":"\u{1F44D}"},{"unified":"1f44d-1f3fb","native":"\u{1F44D}\u{1F3FB}"},{"unified":"1f44d-1f3fc","native":"\u{1F44D}\u{1F3FC}"},{"unified":"1f44d-1f3fd","native":"\u{1F44D}\u{1F3FD}"},{"unified":"1f44d-1f3fe","native":"\u{1F44D}\u{1F3FE}"},{"unified":"1f44d-1f3ff","native":"\u{1F44D}\u{1F3FF}"}],"version":1},"-1":{"id":"-1","name":"Thumbs Down","keywords":["-1","thumbsdown","no","dislike","hand"],"skins":[{"unified":"1f44e","native":"\u{1F44E}"},{"unified":"1f44e-1f3fb","native":"\u{1F44E}\u{1F3FB}"},{"unified":"1f44e-1f3fc","native":"\u{1F44E}\u{1F3FC}"},{"unified":"1f44e-1f3fd","native":"\u{1F44E}\u{1F3FD}"},{"unified":"1f44e-1f3fe","native":"\u{1F44E}\u{1F3FE}"},{"unified":"1f44e-1f3ff","native":"\u{1F44E}\u{1F3FF}"}],"version":1},"fist":{"id":"fist","name":"Raised Fist","keywords":["fingers","hand","grasp"],"skins":[{"unified":"270a","native":"\u270A"},{"unified":"270a-1f3fb","native":"\u270A\u{1F3FB}"},{"unified":"270a-1f3fc","native":"\u270A\u{1F3FC}"},{"unified":"270a-1f3fd","native":"\u270A\u{1F3FD}"},{"unified":"270a-1f3fe","native":"\u270A\u{1F3FE}"},{"unified":"270a-1f3ff","native":"\u270A\u{1F3FF}"}],"version":1},"facepunch":{"id":"facepunch","name":"Oncoming Fist","keywords":["facepunch","punch","angry","violence","hit","attack","hand"],"skins":[{"unified":"1f44a","native":"\u{1F44A}"},{"unified":"1f44a-1f3fb","native":"\u{1F44A}\u{1F3FB}"},{"unified":"1f44a-1f3fc","native":"\u{1F44A}\u{1F3FC}"},{"unified":"1f44a-1f3fd","native":"\u{1F44A}\u{1F3FD}"},{"unified":"1f44a-1f3fe","native":"\u{1F44A}\u{1F3FE}"},{"unified":"1f44a-1f3ff","native":"\u{1F44A}\u{1F3FF}"}],"version":1},"left-facing_fist":{"id":"left-facing_fist","name":"Left-Facing Fist","keywords":["left","facing","hand","fistbump"],"skins":[{"unified":"1f91b","native":"\u{1F91B}"},{"unified":"1f91b-1f3fb","native":"\u{1F91B}\u{1F3FB}"},{"unified":"1f91b-1f3fc","native":"\u{1F91B}\u{1F3FC}"},{"unified":"1f91b-1f3fd","native":"\u{1F91B}\u{1F3FD}"},{"unified":"1f91b-1f3fe","native":"\u{1F91B}\u{1F3FE}"},{"unified":"1f91b-1f3ff","native":"\u{1F91B}\u{1F3FF}"}],"version":3},"right-facing_fist":{"id":"right-facing_fist","name":"Right-Facing Fist","keywords":["right","facing","hand","fistbump"],"skins":[{"unified":"1f91c","native":"\u{1F91C}"},{"unified":"1f91c-1f3fb","native":"\u{1F91C}\u{1F3FB}"},{"unified":"1f91c-1f3fc","native":"\u{1F91C}\u{1F3FC}"},{"unified":"1f91c-1f3fd","native":"\u{1F91C}\u{1F3FD}"},{"unified":"1f91c-1f3fe","native":"\u{1F91C}\u{1F3FE}"},{"unified":"1f91c-1f3ff","native":"\u{1F91C}\u{1F3FF}"}],"version":3},"clap":{"id":"clap","name":"Clapping Hands","keywords":["clap","praise","applause","congrats","yay"],"skins":[{"unified":"1f44f","native":"\u{1F44F}"},{"unified":"1f44f-1f3fb","native":"\u{1F44F}\u{1F3FB}"},{"unified":"1f44f-1f3fc","native":"\u{1F44F}\u{1F3FC}"},{"unified":"1f44f-1f3fd","native":"\u{1F44F}\u{1F3FD}"},{"unified":"1f44f-1f3fe","native":"\u{1F44F}\u{1F3FE}"},{"unified":"1f44f-1f3ff","native":"\u{1F44F}\u{1F3FF}"}],"version":1},"raised_hands":{"id":"raised_hands","name":"Raising Hands","keywords":["raised","gesture","hooray","yea","celebration"],"skins":[{"unified":"1f64c","native":"\u{1F64C}"},{"unified":"1f64c-1f3fb","native":"\u{1F64C}\u{1F3FB}"},{"unified":"1f64c-1f3fc","native":"\u{1F64C}\u{1F3FC}"},{"unified":"1f64c-1f3fd","native":"\u{1F64C}\u{1F3FD}"},{"unified":"1f64c-1f3fe","native":"\u{1F64C}\u{1F3FE}"},{"unified":"1f64c-1f3ff","native":"\u{1F64C}\u{1F3FF}"}],"version":1},"heart_hands":{"id":"heart_hands","name":"Heart Hands","keywords":["love","appreciation","support"],"skins":[{"unified":"1faf6","native":"\u{1FAF6}"},{"unified":"1faf6-1f3fb","native":"\u{1FAF6}\u{1F3FB}"},{"unified":"1faf6-1f3fc","native":"\u{1FAF6}\u{1F3FC}"},{"unified":"1faf6-1f3fd","native":"\u{1FAF6}\u{1F3FD}"},{"unified":"1faf6-1f3fe","native":"\u{1FAF6}\u{1F3FE}"},{"unified":"1faf6-1f3ff","native":"\u{1FAF6}\u{1F3FF}"}],"version":14},"open_hands":{"id":"open_hands","name":"Open Hands","keywords":["fingers","butterfly"],"skins":[{"unified":"1f450","native":"\u{1F450}"},{"unified":"1f450-1f3fb","native":"\u{1F450}\u{1F3FB}"},{"unified":"1f450-1f3fc","native":"\u{1F450}\u{1F3FC}"},{"unified":"1f450-1f3fd","native":"\u{1F450}\u{1F3FD}"},{"unified":"1f450-1f3fe","native":"\u{1F450}\u{1F3FE}"},{"unified":"1f450-1f3ff","native":"\u{1F450}\u{1F3FF}"}],"version":1},"palms_up_together":{"id":"palms_up_together","name":"Palms Up Together","keywords":["hands","gesture","cupped","prayer"],"skins":[{"unified":"1f932","native":"\u{1F932}"},{"unified":"1f932-1f3fb","native":"\u{1F932}\u{1F3FB}"},{"unified":"1f932-1f3fc","native":"\u{1F932}\u{1F3FC}"},{"unified":"1f932-1f3fd","native":"\u{1F932}\u{1F3FD}"},{"unified":"1f932-1f3fe","native":"\u{1F932}\u{1F3FE}"},{"unified":"1f932-1f3ff","native":"\u{1F932}\u{1F3FF}"}],"version":5},"handshake":{"id":"handshake","name":"Handshake","keywords":["agreement","shake"],"skins":[{"unified":"1f91d","native":"\u{1F91D}"},{"unified":"1f91d-1f3fb","native":"\u{1F91D}\u{1F3FB}"},{"unified":"1f91d-1f3fc","native":"\u{1F91D}\u{1F3FC}"},{"unified":"1f91d-1f3fd","native":"\u{1F91D}\u{1F3FD}"},{"unified":"1f91d-1f3fe","native":"\u{1F91D}\u{1F3FE}"},{"unified":"1f91d-1f3ff","native":"\u{1F91D}\u{1F3FF}"}],"version":3},"pray":{"id":"pray","name":"Folded Hands","keywords":["pray","please","hope","wish","namaste","highfive","high","five","thank","you","thanks","appreciate"],"skins":[{"unified":"1f64f","native":"\u{1F64F}"},{"unified":"1f64f-1f3fb","native":"\u{1F64F}\u{1F3FB}"},{"unified":"1f64f-1f3fc","native":"\u{1F64F}\u{1F3FC}"},{"unified":"1f64f-1f3fd","native":"\u{1F64F}\u{1F3FD}"},{"unified":"1f64f-1f3fe","native":"\u{1F64F}\u{1F3FE}"},{"unified":"1f64f-1f3ff","native":"\u{1F64F}\u{1F3FF}"}],"version":1},"writing_hand":{"id":"writing_hand","name":"Writing Hand","keywords":["lower","left","ballpoint","pen","stationery","write","compose"],"skins":[{"unified":"270d-fe0f","native":"\u270D\uFE0F"},{"unified":"270d-1f3fb","native":"\u270D\u{1F3FB}"},{"unified":"270d-1f3fc","native":"\u270D\u{1F3FC}"},{"unified":"270d-1f3fd","native":"\u270D\u{1F3FD}"},{"unified":"270d-1f3fe","native":"\u270D\u{1F3FE}"},{"unified":"270d-1f3ff","native":"\u270D\u{1F3FF}"}],"version":1},"nail_care":{"id":"nail_care","name":"Nail Polish","keywords":["care","beauty","manicure","finger","fashion"],"skins":[{"unified":"1f485","native":"\u{1F485}"},{"unified":"1f485-1f3fb","native":"\u{1F485}\u{1F3FB}"},{"unified":"1f485-1f3fc","native":"\u{1F485}\u{1F3FC}"},{"unified":"1f485-1f3fd","native":"\u{1F485}\u{1F3FD}"},{"unified":"1f485-1f3fe","native":"\u{1F485}\u{1F3FE}"},{"unified":"1f485-1f3ff","native":"\u{1F485}\u{1F3FF}"}],"version":1},"selfie":{"id":"selfie","name":"Selfie","keywords":["camera","phone"],"skins":[{"unified":"1f933","native":"\u{1F933}"},{"unified":"1f933-1f3fb","native":"\u{1F933}\u{1F3FB}"},{"unified":"1f933-1f3fc","native":"\u{1F933}\u{1F3FC}"},{"unified":"1f933-1f3fd","native":"\u{1F933}\u{1F3FD}"},{"unified":"1f933-1f3fe","native":"\u{1F933}\u{1F3FE}"},{"unified":"1f933-1f3ff","native":"\u{1F933}\u{1F3FF}"}],"version":3},"muscle":{"id":"muscle","name":"Flexed Biceps","keywords":["muscle","arm","flex","hand","summer","strong"],"skins":[{"unified":"1f4aa","native":"\u{1F4AA}"},{"unified":"1f4aa-1f3fb","native":"\u{1F4AA}\u{1F3FB}"},{"unified":"1f4aa-1f3fc","native":"\u{1F4AA}\u{1F3FC}"},{"unified":"1f4aa-1f3fd","native":"\u{1F4AA}\u{1F3FD}"},{"unified":"1f4aa-1f3fe","native":"\u{1F4AA}\u{1F3FE}"},{"unified":"1f4aa-1f3ff","native":"\u{1F4AA}\u{1F3FF}"}],"version":1},"mechanical_arm":{"id":"mechanical_arm","name":"Mechanical Arm","keywords":["accessibility"],"skins":[{"unified":"1f9be","native":"\u{1F9BE}"}],"version":12},"mechanical_leg":{"id":"mechanical_leg","name":"Mechanical Leg","keywords":["accessibility"],"skins":[{"unified":"1f9bf","native":"\u{1F9BF}"}],"version":12},"leg":{"id":"leg","name":"Leg","keywords":["kick","limb"],"skins":[{"unified":"1f9b5","native":"\u{1F9B5}"},{"unified":"1f9b5-1f3fb","native":"\u{1F9B5}\u{1F3FB}"},{"unified":"1f9b5-1f3fc","native":"\u{1F9B5}\u{1F3FC}"},{"unified":"1f9b5-1f3fd","native":"\u{1F9B5}\u{1F3FD}"},{"unified":"1f9b5-1f3fe","native":"\u{1F9B5}\u{1F3FE}"},{"unified":"1f9b5-1f3ff","native":"\u{1F9B5}\u{1F3FF}"}],"version":11},"foot":{"id":"foot","name":"Foot","keywords":["kick","stomp"],"skins":[{"unified":"1f9b6","native":"\u{1F9B6}"},{"unified":"1f9b6-1f3fb","native":"\u{1F9B6}\u{1F3FB}"},{"unified":"1f9b6-1f3fc","native":"\u{1F9B6}\u{1F3FC}"},{"unified":"1f9b6-1f3fd","native":"\u{1F9B6}\u{1F3FD}"},{"unified":"1f9b6-1f3fe","native":"\u{1F9B6}\u{1F3FE}"},{"unified":"1f9b6-1f3ff","native":"\u{1F9B6}\u{1F3FF}"}],"version":11},"ear":{"id":"ear","name":"Ear","keywords":["face","hear","sound","listen"],"skins":[{"unified":"1f442","native":"\u{1F442}"},{"unified":"1f442-1f3fb","native":"\u{1F442}\u{1F3FB}"},{"unified":"1f442-1f3fc","native":"\u{1F442}\u{1F3FC}"},{"unified":"1f442-1f3fd","native":"\u{1F442}\u{1F3FD}"},{"unified":"1f442-1f3fe","native":"\u{1F442}\u{1F3FE}"},{"unified":"1f442-1f3ff","native":"\u{1F442}\u{1F3FF}"}],"version":1},"ear_with_hearing_aid":{"id":"ear_with_hearing_aid","name":"Ear with Hearing Aid","keywords":["accessibility"],"skins":[{"unified":"1f9bb","native":"\u{1F9BB}"},{"unified":"1f9bb-1f3fb","native":"\u{1F9BB}\u{1F3FB}"},{"unified":"1f9bb-1f3fc","native":"\u{1F9BB}\u{1F3FC}"},{"unified":"1f9bb-1f3fd","native":"\u{1F9BB}\u{1F3FD}"},{"unified":"1f9bb-1f3fe","native":"\u{1F9BB}\u{1F3FE}"},{"unified":"1f9bb-1f3ff","native":"\u{1F9BB}\u{1F3FF}"}],"version":12},"nose":{"id":"nose","name":"Nose","keywords":["smell","sniff"],"skins":[{"unified":"1f443","native":"\u{1F443}"},{"unified":"1f443-1f3fb","native":"\u{1F443}\u{1F3FB}"},{"unified":"1f443-1f3fc","native":"\u{1F443}\u{1F3FC}"},{"unified":"1f443-1f3fd","native":"\u{1F443}\u{1F3FD}"},{"unified":"1f443-1f3fe","native":"\u{1F443}\u{1F3FE}"},{"unified":"1f443-1f3ff","native":"\u{1F443}\u{1F3FF}"}],"version":1},"brain":{"id":"brain","name":"Brain","keywords":["smart","intelligent"],"skins":[{"unified":"1f9e0","native":"\u{1F9E0}"}],"version":5},"anatomical_heart":{"id":"anatomical_heart","name":"Anatomical Heart","keywords":["health","heartbeat"],"skins":[{"unified":"1fac0","native":"\u{1FAC0}"}],"version":13},"lungs":{"id":"lungs","name":"Lungs","keywords":["breathe"],"skins":[{"unified":"1fac1","native":"\u{1FAC1}"}],"version":13},"tooth":{"id":"tooth","name":"Tooth","keywords":["teeth","dentist"],"skins":[{"unified":"1f9b7","native":"\u{1F9B7}"}],"version":11},"bone":{"id":"bone","name":"Bone","keywords":["skeleton"],"skins":[{"unified":"1f9b4","native":"\u{1F9B4}"}],"version":11},"eyes":{"id":"eyes","name":"Eyes","keywords":["look","watch","stalk","peek","see"],"skins":[{"unified":"1f440","native":"\u{1F440}"}],"version":1},"eye":{"id":"eye","name":"Eye","keywords":["face","look","see","watch","stare"],"skins":[{"unified":"1f441-fe0f","native":"\u{1F441}\uFE0F"}],"version":1},"tongue":{"id":"tongue","name":"Tongue","keywords":["mouth","playful"],"skins":[{"unified":"1f445","native":"\u{1F445}"}],"version":1},"lips":{"id":"lips","name":"Mouth","keywords":["lips","kiss"],"skins":[{"unified":"1f444","native":"\u{1F444}"}],"version":1},"biting_lip":{"id":"biting_lip","name":"Biting Lip","keywords":["flirt","sexy","pain","worry"],"skins":[{"unified":"1fae6","native":"\u{1FAE6}"}],"version":14},"baby":{"id":"baby","name":"Baby","keywords":["child","boy","girl","toddler"],"skins":[{"unified":"1f476","native":"\u{1F476}"},{"unified":"1f476-1f3fb","native":"\u{1F476}\u{1F3FB}"},{"unified":"1f476-1f3fc","native":"\u{1F476}\u{1F3FC}"},{"unified":"1f476-1f3fd","native":"\u{1F476}\u{1F3FD}"},{"unified":"1f476-1f3fe","native":"\u{1F476}\u{1F3FE}"},{"unified":"1f476-1f3ff","native":"\u{1F476}\u{1F3FF}"}],"version":1},"child":{"id":"child","name":"Child","keywords":["gender","neutral","young"],"skins":[{"unified":"1f9d2","native":"\u{1F9D2}"},{"unified":"1f9d2-1f3fb","native":"\u{1F9D2}\u{1F3FB}"},{"unified":"1f9d2-1f3fc","native":"\u{1F9D2}\u{1F3FC}"},{"unified":"1f9d2-1f3fd","native":"\u{1F9D2}\u{1F3FD}"},{"unified":"1f9d2-1f3fe","native":"\u{1F9D2}\u{1F3FE}"},{"unified":"1f9d2-1f3ff","native":"\u{1F9D2}\u{1F3FF}"}],"version":5},"boy":{"id":"boy","name":"Boy","keywords":["man","male","guy","teenager"],"skins":[{"unified":"1f466","native":"\u{1F466}"},{"unified":"1f466-1f3fb","native":"\u{1F466}\u{1F3FB}"},{"unified":"1f466-1f3fc","native":"\u{1F466}\u{1F3FC}"},{"unified":"1f466-1f3fd","native":"\u{1F466}\u{1F3FD}"},{"unified":"1f466-1f3fe","native":"\u{1F466}\u{1F3FE}"},{"unified":"1f466-1f3ff","native":"\u{1F466}\u{1F3FF}"}],"version":1},"girl":{"id":"girl","name":"Girl","keywords":["female","woman","teenager"],"skins":[{"unified":"1f467","native":"\u{1F467}"},{"unified":"1f467-1f3fb","native":"\u{1F467}\u{1F3FB}"},{"unified":"1f467-1f3fc","native":"\u{1F467}\u{1F3FC}"},{"unified":"1f467-1f3fd","native":"\u{1F467}\u{1F3FD}"},{"unified":"1f467-1f3fe","native":"\u{1F467}\u{1F3FE}"},{"unified":"1f467-1f3ff","native":"\u{1F467}\u{1F3FF}"}],"version":1},"adult":{"id":"adult","name":"Adult","keywords":["person","gender","neutral"],"skins":[{"unified":"1f9d1","native":"\u{1F9D1}"},{"unified":"1f9d1-1f3fb","native":"\u{1F9D1}\u{1F3FB}"},{"unified":"1f9d1-1f3fc","native":"\u{1F9D1}\u{1F3FC}"},{"unified":"1f9d1-1f3fd","native":"\u{1F9D1}\u{1F3FD}"},{"unified":"1f9d1-1f3fe","native":"\u{1F9D1}\u{1F3FE}"},{"unified":"1f9d1-1f3ff","native":"\u{1F9D1}\u{1F3FF}"}],"version":5},"person_with_blond_hair":{"id":"person_with_blond_hair","name":"Person Blond Hair","keywords":["with","hairstyle"],"skins":[{"unified":"1f471","native":"\u{1F471}"},{"unified":"1f471-1f3fb","native":"\u{1F471}\u{1F3FB}"},{"unified":"1f471-1f3fc","native":"\u{1F471}\u{1F3FC}"},{"unified":"1f471-1f3fd","native":"\u{1F471}\u{1F3FD}"},{"unified":"1f471-1f3fe","native":"\u{1F471}\u{1F3FE}"},{"unified":"1f471-1f3ff","native":"\u{1F471}\u{1F3FF}"}],"version":1},"man":{"id":"man","name":"Man","keywords":["mustache","father","dad","guy","classy","sir","moustache"],"skins":[{"unified":"1f468","native":"\u{1F468}"},{"unified":"1f468-1f3fb","native":"\u{1F468}\u{1F3FB}"},{"unified":"1f468-1f3fc","native":"\u{1F468}\u{1F3FC}"},{"unified":"1f468-1f3fd","native":"\u{1F468}\u{1F3FD}"},{"unified":"1f468-1f3fe","native":"\u{1F468}\u{1F3FE}"},{"unified":"1f468-1f3ff","native":"\u{1F468}\u{1F3FF}"}],"version":1},"bearded_person":{"id":"bearded_person","name":"Person Beard","keywords":["bearded","man","bewhiskered"],"skins":[{"unified":"1f9d4","native":"\u{1F9D4}"},{"unified":"1f9d4-1f3fb","native":"\u{1F9D4}\u{1F3FB}"},{"unified":"1f9d4-1f3fc","native":"\u{1F9D4}\u{1F3FC}"},{"unified":"1f9d4-1f3fd","native":"\u{1F9D4}\u{1F3FD}"},{"unified":"1f9d4-1f3fe","native":"\u{1F9D4}\u{1F3FE}"},{"unified":"1f9d4-1f3ff","native":"\u{1F9D4}\u{1F3FF}"}],"version":5},"man_with_beard":{"id":"man_with_beard","name":"Man: Beard","keywords":["man","with","facial","hair"],"skins":[{"unified":"1f9d4-200d-2642-fe0f","native":"\u{1F9D4}\u200D\u2642\uFE0F"},{"unified":"1f9d4-1f3fb-200d-2642-fe0f","native":"\u{1F9D4}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9d4-1f3fc-200d-2642-fe0f","native":"\u{1F9D4}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9d4-1f3fd-200d-2642-fe0f","native":"\u{1F9D4}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9d4-1f3fe-200d-2642-fe0f","native":"\u{1F9D4}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9d4-1f3ff-200d-2642-fe0f","native":"\u{1F9D4}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":13.1},"woman_with_beard":{"id":"woman_with_beard","name":"Woman: Beard","keywords":["woman","with","facial","hair"],"skins":[{"unified":"1f9d4-200d-2640-fe0f","native":"\u{1F9D4}\u200D\u2640\uFE0F"},{"unified":"1f9d4-1f3fb-200d-2640-fe0f","native":"\u{1F9D4}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9d4-1f3fc-200d-2640-fe0f","native":"\u{1F9D4}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9d4-1f3fd-200d-2640-fe0f","native":"\u{1F9D4}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9d4-1f3fe-200d-2640-fe0f","native":"\u{1F9D4}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9d4-1f3ff-200d-2640-fe0f","native":"\u{1F9D4}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":13.1},"red_haired_man":{"id":"red_haired_man","name":"Man: Red Hair","keywords":["haired","man","hairstyle"],"skins":[{"unified":"1f468-200d-1f9b0","native":"\u{1F468}\u200D\u{1F9B0}"},{"unified":"1f468-1f3fb-200d-1f9b0","native":"\u{1F468}\u{1F3FB}\u200D\u{1F9B0}"},{"unified":"1f468-1f3fc-200d-1f9b0","native":"\u{1F468}\u{1F3FC}\u200D\u{1F9B0}"},{"unified":"1f468-1f3fd-200d-1f9b0","native":"\u{1F468}\u{1F3FD}\u200D\u{1F9B0}"},{"unified":"1f468-1f3fe-200d-1f9b0","native":"\u{1F468}\u{1F3FE}\u200D\u{1F9B0}"},{"unified":"1f468-1f3ff-200d-1f9b0","native":"\u{1F468}\u{1F3FF}\u200D\u{1F9B0}"}],"version":11},"curly_haired_man":{"id":"curly_haired_man","name":"Man: Curly Hair","keywords":["haired","man","hairstyle"],"skins":[{"unified":"1f468-200d-1f9b1","native":"\u{1F468}\u200D\u{1F9B1}"},{"unified":"1f468-1f3fb-200d-1f9b1","native":"\u{1F468}\u{1F3FB}\u200D\u{1F9B1}"},{"unified":"1f468-1f3fc-200d-1f9b1","native":"\u{1F468}\u{1F3FC}\u200D\u{1F9B1}"},{"unified":"1f468-1f3fd-200d-1f9b1","native":"\u{1F468}\u{1F3FD}\u200D\u{1F9B1}"},{"unified":"1f468-1f3fe-200d-1f9b1","native":"\u{1F468}\u{1F3FE}\u200D\u{1F9B1}"},{"unified":"1f468-1f3ff-200d-1f9b1","native":"\u{1F468}\u{1F3FF}\u200D\u{1F9B1}"}],"version":11},"white_haired_man":{"id":"white_haired_man","name":"Man: White Hair","keywords":["haired","man","old","elder"],"skins":[{"unified":"1f468-200d-1f9b3","native":"\u{1F468}\u200D\u{1F9B3}"},{"unified":"1f468-1f3fb-200d-1f9b3","native":"\u{1F468}\u{1F3FB}\u200D\u{1F9B3}"},{"unified":"1f468-1f3fc-200d-1f9b3","native":"\u{1F468}\u{1F3FC}\u200D\u{1F9B3}"},{"unified":"1f468-1f3fd-200d-1f9b3","native":"\u{1F468}\u{1F3FD}\u200D\u{1F9B3}"},{"unified":"1f468-1f3fe-200d-1f9b3","native":"\u{1F468}\u{1F3FE}\u200D\u{1F9B3}"},{"unified":"1f468-1f3ff-200d-1f9b3","native":"\u{1F468}\u{1F3FF}\u200D\u{1F9B3}"}],"version":11},"bald_man":{"id":"bald_man","name":"Man: Bald","keywords":["man","hairless"],"skins":[{"unified":"1f468-200d-1f9b2","native":"\u{1F468}\u200D\u{1F9B2}"},{"unified":"1f468-1f3fb-200d-1f9b2","native":"\u{1F468}\u{1F3FB}\u200D\u{1F9B2}"},{"unified":"1f468-1f3fc-200d-1f9b2","native":"\u{1F468}\u{1F3FC}\u200D\u{1F9B2}"},{"unified":"1f468-1f3fd-200d-1f9b2","native":"\u{1F468}\u{1F3FD}\u200D\u{1F9B2}"},{"unified":"1f468-1f3fe-200d-1f9b2","native":"\u{1F468}\u{1F3FE}\u200D\u{1F9B2}"},{"unified":"1f468-1f3ff-200d-1f9b2","native":"\u{1F468}\u{1F3FF}\u200D\u{1F9B2}"}],"version":11},"woman":{"id":"woman","name":"Woman","keywords":["female","girls","lady"],"skins":[{"unified":"1f469","native":"\u{1F469}"},{"unified":"1f469-1f3fb","native":"\u{1F469}\u{1F3FB}"},{"unified":"1f469-1f3fc","native":"\u{1F469}\u{1F3FC}"},{"unified":"1f469-1f3fd","native":"\u{1F469}\u{1F3FD}"},{"unified":"1f469-1f3fe","native":"\u{1F469}\u{1F3FE}"},{"unified":"1f469-1f3ff","native":"\u{1F469}\u{1F3FF}"}],"version":1},"red_haired_woman":{"id":"red_haired_woman","name":"Woman: Red Hair","keywords":["haired","woman","hairstyle"],"skins":[{"unified":"1f469-200d-1f9b0","native":"\u{1F469}\u200D\u{1F9B0}"},{"unified":"1f469-1f3fb-200d-1f9b0","native":"\u{1F469}\u{1F3FB}\u200D\u{1F9B0}"},{"unified":"1f469-1f3fc-200d-1f9b0","native":"\u{1F469}\u{1F3FC}\u200D\u{1F9B0}"},{"unified":"1f469-1f3fd-200d-1f9b0","native":"\u{1F469}\u{1F3FD}\u200D\u{1F9B0}"},{"unified":"1f469-1f3fe-200d-1f9b0","native":"\u{1F469}\u{1F3FE}\u200D\u{1F9B0}"},{"unified":"1f469-1f3ff-200d-1f9b0","native":"\u{1F469}\u{1F3FF}\u200D\u{1F9B0}"}],"version":11},"red_haired_person":{"id":"red_haired_person","name":"Person: Red Hair","keywords":["haired","person","hairstyle"],"skins":[{"unified":"1f9d1-200d-1f9b0","native":"\u{1F9D1}\u200D\u{1F9B0}"},{"unified":"1f9d1-1f3fb-200d-1f9b0","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F9B0}"},{"unified":"1f9d1-1f3fc-200d-1f9b0","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F9B0}"},{"unified":"1f9d1-1f3fd-200d-1f9b0","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F9B0}"},{"unified":"1f9d1-1f3fe-200d-1f9b0","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F9B0}"},{"unified":"1f9d1-1f3ff-200d-1f9b0","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F9B0}"}],"version":12.1},"curly_haired_woman":{"id":"curly_haired_woman","name":"Woman: Curly Hair","keywords":["haired","woman","hairstyle"],"skins":[{"unified":"1f469-200d-1f9b1","native":"\u{1F469}\u200D\u{1F9B1}"},{"unified":"1f469-1f3fb-200d-1f9b1","native":"\u{1F469}\u{1F3FB}\u200D\u{1F9B1}"},{"unified":"1f469-1f3fc-200d-1f9b1","native":"\u{1F469}\u{1F3FC}\u200D\u{1F9B1}"},{"unified":"1f469-1f3fd-200d-1f9b1","native":"\u{1F469}\u{1F3FD}\u200D\u{1F9B1}"},{"unified":"1f469-1f3fe-200d-1f9b1","native":"\u{1F469}\u{1F3FE}\u200D\u{1F9B1}"},{"unified":"1f469-1f3ff-200d-1f9b1","native":"\u{1F469}\u{1F3FF}\u200D\u{1F9B1}"}],"version":11},"curly_haired_person":{"id":"curly_haired_person","name":"Person: Curly Hair","keywords":["haired","person","hairstyle"],"skins":[{"unified":"1f9d1-200d-1f9b1","native":"\u{1F9D1}\u200D\u{1F9B1}"},{"unified":"1f9d1-1f3fb-200d-1f9b1","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F9B1}"},{"unified":"1f9d1-1f3fc-200d-1f9b1","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F9B1}"},{"unified":"1f9d1-1f3fd-200d-1f9b1","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F9B1}"},{"unified":"1f9d1-1f3fe-200d-1f9b1","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F9B1}"},{"unified":"1f9d1-1f3ff-200d-1f9b1","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F9B1}"}],"version":12.1},"white_haired_woman":{"id":"white_haired_woman","name":"Woman: White Hair","keywords":["haired","woman","old","elder"],"skins":[{"unified":"1f469-200d-1f9b3","native":"\u{1F469}\u200D\u{1F9B3}"},{"unified":"1f469-1f3fb-200d-1f9b3","native":"\u{1F469}\u{1F3FB}\u200D\u{1F9B3}"},{"unified":"1f469-1f3fc-200d-1f9b3","native":"\u{1F469}\u{1F3FC}\u200D\u{1F9B3}"},{"unified":"1f469-1f3fd-200d-1f9b3","native":"\u{1F469}\u{1F3FD}\u200D\u{1F9B3}"},{"unified":"1f469-1f3fe-200d-1f9b3","native":"\u{1F469}\u{1F3FE}\u200D\u{1F9B3}"},{"unified":"1f469-1f3ff-200d-1f9b3","native":"\u{1F469}\u{1F3FF}\u200D\u{1F9B3}"}],"version":11},"white_haired_person":{"id":"white_haired_person","name":"Person: White Hair","keywords":["haired","person","elder","old"],"skins":[{"unified":"1f9d1-200d-1f9b3","native":"\u{1F9D1}\u200D\u{1F9B3}"},{"unified":"1f9d1-1f3fb-200d-1f9b3","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F9B3}"},{"unified":"1f9d1-1f3fc-200d-1f9b3","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F9B3}"},{"unified":"1f9d1-1f3fd-200d-1f9b3","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F9B3}"},{"unified":"1f9d1-1f3fe-200d-1f9b3","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F9B3}"},{"unified":"1f9d1-1f3ff-200d-1f9b3","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F9B3}"}],"version":12.1},"bald_woman":{"id":"bald_woman","name":"Woman: Bald","keywords":["woman","hairless"],"skins":[{"unified":"1f469-200d-1f9b2","native":"\u{1F469}\u200D\u{1F9B2}"},{"unified":"1f469-1f3fb-200d-1f9b2","native":"\u{1F469}\u{1F3FB}\u200D\u{1F9B2}"},{"unified":"1f469-1f3fc-200d-1f9b2","native":"\u{1F469}\u{1F3FC}\u200D\u{1F9B2}"},{"unified":"1f469-1f3fd-200d-1f9b2","native":"\u{1F469}\u{1F3FD}\u200D\u{1F9B2}"},{"unified":"1f469-1f3fe-200d-1f9b2","native":"\u{1F469}\u{1F3FE}\u200D\u{1F9B2}"},{"unified":"1f469-1f3ff-200d-1f9b2","native":"\u{1F469}\u{1F3FF}\u200D\u{1F9B2}"}],"version":11},"bald_person":{"id":"bald_person","name":"Person: Bald","keywords":["person","hairless"],"skins":[{"unified":"1f9d1-200d-1f9b2","native":"\u{1F9D1}\u200D\u{1F9B2}"},{"unified":"1f9d1-1f3fb-200d-1f9b2","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F9B2}"},{"unified":"1f9d1-1f3fc-200d-1f9b2","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F9B2}"},{"unified":"1f9d1-1f3fd-200d-1f9b2","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F9B2}"},{"unified":"1f9d1-1f3fe-200d-1f9b2","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F9B2}"},{"unified":"1f9d1-1f3ff-200d-1f9b2","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F9B2}"}],"version":12.1},"blond-haired-woman":{"id":"blond-haired-woman","name":"Woman: Blond Hair","keywords":["haired-woman","woman","female","girl","blonde","person"],"skins":[{"unified":"1f471-200d-2640-fe0f","native":"\u{1F471}\u200D\u2640\uFE0F"},{"unified":"1f471-1f3fb-200d-2640-fe0f","native":"\u{1F471}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f471-1f3fc-200d-2640-fe0f","native":"\u{1F471}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f471-1f3fd-200d-2640-fe0f","native":"\u{1F471}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f471-1f3fe-200d-2640-fe0f","native":"\u{1F471}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f471-1f3ff-200d-2640-fe0f","native":"\u{1F471}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"blond-haired-man":{"id":"blond-haired-man","name":"Man: Blond Hair","keywords":["haired-man","man","male","boy","blonde","guy","person"],"skins":[{"unified":"1f471-200d-2642-fe0f","native":"\u{1F471}\u200D\u2642\uFE0F"},{"unified":"1f471-1f3fb-200d-2642-fe0f","native":"\u{1F471}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f471-1f3fc-200d-2642-fe0f","native":"\u{1F471}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f471-1f3fd-200d-2642-fe0f","native":"\u{1F471}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f471-1f3fe-200d-2642-fe0f","native":"\u{1F471}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f471-1f3ff-200d-2642-fe0f","native":"\u{1F471}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"older_adult":{"id":"older_adult","name":"Older Adult","keywords":["person","human","elder","senior","gender","neutral"],"skins":[{"unified":"1f9d3","native":"\u{1F9D3}"},{"unified":"1f9d3-1f3fb","native":"\u{1F9D3}\u{1F3FB}"},{"unified":"1f9d3-1f3fc","native":"\u{1F9D3}\u{1F3FC}"},{"unified":"1f9d3-1f3fd","native":"\u{1F9D3}\u{1F3FD}"},{"unified":"1f9d3-1f3fe","native":"\u{1F9D3}\u{1F3FE}"},{"unified":"1f9d3-1f3ff","native":"\u{1F9D3}\u{1F3FF}"}],"version":5},"older_man":{"id":"older_man","name":"Old Man","keywords":["older","human","male","men","elder","senior"],"skins":[{"unified":"1f474","native":"\u{1F474}"},{"unified":"1f474-1f3fb","native":"\u{1F474}\u{1F3FB}"},{"unified":"1f474-1f3fc","native":"\u{1F474}\u{1F3FC}"},{"unified":"1f474-1f3fd","native":"\u{1F474}\u{1F3FD}"},{"unified":"1f474-1f3fe","native":"\u{1F474}\u{1F3FE}"},{"unified":"1f474-1f3ff","native":"\u{1F474}\u{1F3FF}"}],"version":1},"older_woman":{"id":"older_woman","name":"Old Woman","keywords":["older","human","female","women","lady","elder","senior"],"skins":[{"unified":"1f475","native":"\u{1F475}"},{"unified":"1f475-1f3fb","native":"\u{1F475}\u{1F3FB}"},{"unified":"1f475-1f3fc","native":"\u{1F475}\u{1F3FC}"},{"unified":"1f475-1f3fd","native":"\u{1F475}\u{1F3FD}"},{"unified":"1f475-1f3fe","native":"\u{1F475}\u{1F3FE}"},{"unified":"1f475-1f3ff","native":"\u{1F475}\u{1F3FF}"}],"version":1},"person_frowning":{"id":"person_frowning","name":"Person Frowning","keywords":["worried"],"skins":[{"unified":"1f64d","native":"\u{1F64D}"},{"unified":"1f64d-1f3fb","native":"\u{1F64D}\u{1F3FB}"},{"unified":"1f64d-1f3fc","native":"\u{1F64D}\u{1F3FC}"},{"unified":"1f64d-1f3fd","native":"\u{1F64D}\u{1F3FD}"},{"unified":"1f64d-1f3fe","native":"\u{1F64D}\u{1F3FE}"},{"unified":"1f64d-1f3ff","native":"\u{1F64D}\u{1F3FF}"}],"version":1},"man-frowning":{"id":"man-frowning","name":"Man Frowning","keywords":["male","boy","sad","depressed","discouraged","unhappy"],"skins":[{"unified":"1f64d-200d-2642-fe0f","native":"\u{1F64D}\u200D\u2642\uFE0F"},{"unified":"1f64d-1f3fb-200d-2642-fe0f","native":"\u{1F64D}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f64d-1f3fc-200d-2642-fe0f","native":"\u{1F64D}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f64d-1f3fd-200d-2642-fe0f","native":"\u{1F64D}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f64d-1f3fe-200d-2642-fe0f","native":"\u{1F64D}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f64d-1f3ff-200d-2642-fe0f","native":"\u{1F64D}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-frowning":{"id":"woman-frowning","name":"Woman Frowning","keywords":["female","girl","sad","depressed","discouraged","unhappy"],"skins":[{"unified":"1f64d-200d-2640-fe0f","native":"\u{1F64D}\u200D\u2640\uFE0F"},{"unified":"1f64d-1f3fb-200d-2640-fe0f","native":"\u{1F64D}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f64d-1f3fc-200d-2640-fe0f","native":"\u{1F64D}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f64d-1f3fd-200d-2640-fe0f","native":"\u{1F64D}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f64d-1f3fe-200d-2640-fe0f","native":"\u{1F64D}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f64d-1f3ff-200d-2640-fe0f","native":"\u{1F64D}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"person_with_pouting_face":{"id":"person_with_pouting_face","name":"Person Pouting","keywords":["with","face","upset"],"skins":[{"unified":"1f64e","native":"\u{1F64E}"},{"unified":"1f64e-1f3fb","native":"\u{1F64E}\u{1F3FB}"},{"unified":"1f64e-1f3fc","native":"\u{1F64E}\u{1F3FC}"},{"unified":"1f64e-1f3fd","native":"\u{1F64E}\u{1F3FD}"},{"unified":"1f64e-1f3fe","native":"\u{1F64E}\u{1F3FE}"},{"unified":"1f64e-1f3ff","native":"\u{1F64E}\u{1F3FF}"}],"version":1},"man-pouting":{"id":"man-pouting","name":"Man Pouting","keywords":["male","boy"],"skins":[{"unified":"1f64e-200d-2642-fe0f","native":"\u{1F64E}\u200D\u2642\uFE0F"},{"unified":"1f64e-1f3fb-200d-2642-fe0f","native":"\u{1F64E}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f64e-1f3fc-200d-2642-fe0f","native":"\u{1F64E}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f64e-1f3fd-200d-2642-fe0f","native":"\u{1F64E}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f64e-1f3fe-200d-2642-fe0f","native":"\u{1F64E}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f64e-1f3ff-200d-2642-fe0f","native":"\u{1F64E}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-pouting":{"id":"woman-pouting","name":"Woman Pouting","keywords":["female","girl"],"skins":[{"unified":"1f64e-200d-2640-fe0f","native":"\u{1F64E}\u200D\u2640\uFE0F"},{"unified":"1f64e-1f3fb-200d-2640-fe0f","native":"\u{1F64E}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f64e-1f3fc-200d-2640-fe0f","native":"\u{1F64E}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f64e-1f3fd-200d-2640-fe0f","native":"\u{1F64E}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f64e-1f3fe-200d-2640-fe0f","native":"\u{1F64E}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f64e-1f3ff-200d-2640-fe0f","native":"\u{1F64E}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"no_good":{"id":"no_good","name":"Person Gesturing No","keywords":["good","decline"],"skins":[{"unified":"1f645","native":"\u{1F645}"},{"unified":"1f645-1f3fb","native":"\u{1F645}\u{1F3FB}"},{"unified":"1f645-1f3fc","native":"\u{1F645}\u{1F3FC}"},{"unified":"1f645-1f3fd","native":"\u{1F645}\u{1F3FD}"},{"unified":"1f645-1f3fe","native":"\u{1F645}\u{1F3FE}"},{"unified":"1f645-1f3ff","native":"\u{1F645}\u{1F3FF}"}],"version":1},"man-gesturing-no":{"id":"man-gesturing-no","name":"Man Gesturing No","keywords":["gesturing-no","male","boy","nope"],"skins":[{"unified":"1f645-200d-2642-fe0f","native":"\u{1F645}\u200D\u2642\uFE0F"},{"unified":"1f645-1f3fb-200d-2642-fe0f","native":"\u{1F645}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f645-1f3fc-200d-2642-fe0f","native":"\u{1F645}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f645-1f3fd-200d-2642-fe0f","native":"\u{1F645}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f645-1f3fe-200d-2642-fe0f","native":"\u{1F645}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f645-1f3ff-200d-2642-fe0f","native":"\u{1F645}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-gesturing-no":{"id":"woman-gesturing-no","name":"Woman Gesturing No","keywords":["gesturing-no","female","girl","nope"],"skins":[{"unified":"1f645-200d-2640-fe0f","native":"\u{1F645}\u200D\u2640\uFE0F"},{"unified":"1f645-1f3fb-200d-2640-fe0f","native":"\u{1F645}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f645-1f3fc-200d-2640-fe0f","native":"\u{1F645}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f645-1f3fd-200d-2640-fe0f","native":"\u{1F645}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f645-1f3fe-200d-2640-fe0f","native":"\u{1F645}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f645-1f3ff-200d-2640-fe0f","native":"\u{1F645}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"ok_woman":{"id":"ok_woman","name":"Person Gesturing Ok","keywords":["woman","agree"],"skins":[{"unified":"1f646","native":"\u{1F646}"},{"unified":"1f646-1f3fb","native":"\u{1F646}\u{1F3FB}"},{"unified":"1f646-1f3fc","native":"\u{1F646}\u{1F3FC}"},{"unified":"1f646-1f3fd","native":"\u{1F646}\u{1F3FD}"},{"unified":"1f646-1f3fe","native":"\u{1F646}\u{1F3FE}"},{"unified":"1f646-1f3ff","native":"\u{1F646}\u{1F3FF}"}],"version":1},"man-gesturing-ok":{"id":"man-gesturing-ok","name":"Man Gesturing Ok","keywords":["gesturing-ok","men","boy","male","blue","human"],"skins":[{"unified":"1f646-200d-2642-fe0f","native":"\u{1F646}\u200D\u2642\uFE0F"},{"unified":"1f646-1f3fb-200d-2642-fe0f","native":"\u{1F646}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f646-1f3fc-200d-2642-fe0f","native":"\u{1F646}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f646-1f3fd-200d-2642-fe0f","native":"\u{1F646}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f646-1f3fe-200d-2642-fe0f","native":"\u{1F646}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f646-1f3ff-200d-2642-fe0f","native":"\u{1F646}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-gesturing-ok":{"id":"woman-gesturing-ok","name":"Woman Gesturing Ok","keywords":["gesturing-ok","women","girl","female","pink","human"],"skins":[{"unified":"1f646-200d-2640-fe0f","native":"\u{1F646}\u200D\u2640\uFE0F"},{"unified":"1f646-1f3fb-200d-2640-fe0f","native":"\u{1F646}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f646-1f3fc-200d-2640-fe0f","native":"\u{1F646}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f646-1f3fd-200d-2640-fe0f","native":"\u{1F646}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f646-1f3fe-200d-2640-fe0f","native":"\u{1F646}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f646-1f3ff-200d-2640-fe0f","native":"\u{1F646}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"information_desk_person":{"id":"information_desk_person","name":"Person Tipping Hand","keywords":["information","desk"],"skins":[{"unified":"1f481","native":"\u{1F481}"},{"unified":"1f481-1f3fb","native":"\u{1F481}\u{1F3FB}"},{"unified":"1f481-1f3fc","native":"\u{1F481}\u{1F3FC}"},{"unified":"1f481-1f3fd","native":"\u{1F481}\u{1F3FD}"},{"unified":"1f481-1f3fe","native":"\u{1F481}\u{1F3FE}"},{"unified":"1f481-1f3ff","native":"\u{1F481}\u{1F3FF}"}],"version":1},"man-tipping-hand":{"id":"man-tipping-hand","name":"Man Tipping Hand","keywords":["tipping-hand","male","boy","human","information"],"skins":[{"unified":"1f481-200d-2642-fe0f","native":"\u{1F481}\u200D\u2642\uFE0F"},{"unified":"1f481-1f3fb-200d-2642-fe0f","native":"\u{1F481}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f481-1f3fc-200d-2642-fe0f","native":"\u{1F481}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f481-1f3fd-200d-2642-fe0f","native":"\u{1F481}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f481-1f3fe-200d-2642-fe0f","native":"\u{1F481}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f481-1f3ff-200d-2642-fe0f","native":"\u{1F481}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-tipping-hand":{"id":"woman-tipping-hand","name":"Woman Tipping Hand","keywords":["tipping-hand","female","girl","human","information"],"skins":[{"unified":"1f481-200d-2640-fe0f","native":"\u{1F481}\u200D\u2640\uFE0F"},{"unified":"1f481-1f3fb-200d-2640-fe0f","native":"\u{1F481}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f481-1f3fc-200d-2640-fe0f","native":"\u{1F481}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f481-1f3fd-200d-2640-fe0f","native":"\u{1F481}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f481-1f3fe-200d-2640-fe0f","native":"\u{1F481}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f481-1f3ff-200d-2640-fe0f","native":"\u{1F481}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"raising_hand":{"id":"raising_hand","name":"Person Raising Hand","keywords":["question"],"skins":[{"unified":"1f64b","native":"\u{1F64B}"},{"unified":"1f64b-1f3fb","native":"\u{1F64B}\u{1F3FB}"},{"unified":"1f64b-1f3fc","native":"\u{1F64B}\u{1F3FC}"},{"unified":"1f64b-1f3fd","native":"\u{1F64B}\u{1F3FD}"},{"unified":"1f64b-1f3fe","native":"\u{1F64B}\u{1F3FE}"},{"unified":"1f64b-1f3ff","native":"\u{1F64B}\u{1F3FF}"}],"version":1},"man-raising-hand":{"id":"man-raising-hand","name":"Man Raising Hand","keywords":["raising-hand","male","boy"],"skins":[{"unified":"1f64b-200d-2642-fe0f","native":"\u{1F64B}\u200D\u2642\uFE0F"},{"unified":"1f64b-1f3fb-200d-2642-fe0f","native":"\u{1F64B}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f64b-1f3fc-200d-2642-fe0f","native":"\u{1F64B}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f64b-1f3fd-200d-2642-fe0f","native":"\u{1F64B}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f64b-1f3fe-200d-2642-fe0f","native":"\u{1F64B}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f64b-1f3ff-200d-2642-fe0f","native":"\u{1F64B}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-raising-hand":{"id":"woman-raising-hand","name":"Woman Raising Hand","keywords":["raising-hand","female","girl"],"skins":[{"unified":"1f64b-200d-2640-fe0f","native":"\u{1F64B}\u200D\u2640\uFE0F"},{"unified":"1f64b-1f3fb-200d-2640-fe0f","native":"\u{1F64B}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f64b-1f3fc-200d-2640-fe0f","native":"\u{1F64B}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f64b-1f3fd-200d-2640-fe0f","native":"\u{1F64B}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f64b-1f3fe-200d-2640-fe0f","native":"\u{1F64B}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f64b-1f3ff-200d-2640-fe0f","native":"\u{1F64B}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"deaf_person":{"id":"deaf_person","name":"Deaf Person","keywords":["accessibility"],"skins":[{"unified":"1f9cf","native":"\u{1F9CF}"},{"unified":"1f9cf-1f3fb","native":"\u{1F9CF}\u{1F3FB}"},{"unified":"1f9cf-1f3fc","native":"\u{1F9CF}\u{1F3FC}"},{"unified":"1f9cf-1f3fd","native":"\u{1F9CF}\u{1F3FD}"},{"unified":"1f9cf-1f3fe","native":"\u{1F9CF}\u{1F3FE}"},{"unified":"1f9cf-1f3ff","native":"\u{1F9CF}\u{1F3FF}"}],"version":12},"deaf_man":{"id":"deaf_man","name":"Deaf Man","keywords":["accessibility"],"skins":[{"unified":"1f9cf-200d-2642-fe0f","native":"\u{1F9CF}\u200D\u2642\uFE0F"},{"unified":"1f9cf-1f3fb-200d-2642-fe0f","native":"\u{1F9CF}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9cf-1f3fc-200d-2642-fe0f","native":"\u{1F9CF}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9cf-1f3fd-200d-2642-fe0f","native":"\u{1F9CF}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9cf-1f3fe-200d-2642-fe0f","native":"\u{1F9CF}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9cf-1f3ff-200d-2642-fe0f","native":"\u{1F9CF}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":12},"deaf_woman":{"id":"deaf_woman","name":"Deaf Woman","keywords":["accessibility"],"skins":[{"unified":"1f9cf-200d-2640-fe0f","native":"\u{1F9CF}\u200D\u2640\uFE0F"},{"unified":"1f9cf-1f3fb-200d-2640-fe0f","native":"\u{1F9CF}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9cf-1f3fc-200d-2640-fe0f","native":"\u{1F9CF}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9cf-1f3fd-200d-2640-fe0f","native":"\u{1F9CF}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9cf-1f3fe-200d-2640-fe0f","native":"\u{1F9CF}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9cf-1f3ff-200d-2640-fe0f","native":"\u{1F9CF}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":12},"bow":{"id":"bow","name":"Person Bowing","keywords":["bow","respectiful"],"skins":[{"unified":"1f647","native":"\u{1F647}"},{"unified":"1f647-1f3fb","native":"\u{1F647}\u{1F3FB}"},{"unified":"1f647-1f3fc","native":"\u{1F647}\u{1F3FC}"},{"unified":"1f647-1f3fd","native":"\u{1F647}\u{1F3FD}"},{"unified":"1f647-1f3fe","native":"\u{1F647}\u{1F3FE}"},{"unified":"1f647-1f3ff","native":"\u{1F647}\u{1F3FF}"}],"version":1},"man-bowing":{"id":"man-bowing","name":"Man Bowing","keywords":["male","boy"],"skins":[{"unified":"1f647-200d-2642-fe0f","native":"\u{1F647}\u200D\u2642\uFE0F"},{"unified":"1f647-1f3fb-200d-2642-fe0f","native":"\u{1F647}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f647-1f3fc-200d-2642-fe0f","native":"\u{1F647}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f647-1f3fd-200d-2642-fe0f","native":"\u{1F647}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f647-1f3fe-200d-2642-fe0f","native":"\u{1F647}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f647-1f3ff-200d-2642-fe0f","native":"\u{1F647}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-bowing":{"id":"woman-bowing","name":"Woman Bowing","keywords":["female","girl"],"skins":[{"unified":"1f647-200d-2640-fe0f","native":"\u{1F647}\u200D\u2640\uFE0F"},{"unified":"1f647-1f3fb-200d-2640-fe0f","native":"\u{1F647}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f647-1f3fc-200d-2640-fe0f","native":"\u{1F647}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f647-1f3fd-200d-2640-fe0f","native":"\u{1F647}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f647-1f3fe-200d-2640-fe0f","native":"\u{1F647}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f647-1f3ff-200d-2640-fe0f","native":"\u{1F647}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"face_palm":{"id":"face_palm","name":"Face Palm","keywords":["person","facepalming","disappointed"],"skins":[{"unified":"1f926","native":"\u{1F926}"},{"unified":"1f926-1f3fb","native":"\u{1F926}\u{1F3FB}"},{"unified":"1f926-1f3fc","native":"\u{1F926}\u{1F3FC}"},{"unified":"1f926-1f3fd","native":"\u{1F926}\u{1F3FD}"},{"unified":"1f926-1f3fe","native":"\u{1F926}\u{1F3FE}"},{"unified":"1f926-1f3ff","native":"\u{1F926}\u{1F3FF}"}],"version":3},"man-facepalming":{"id":"man-facepalming","name":"Man Facepalming","keywords":["male","boy","disbelief"],"skins":[{"unified":"1f926-200d-2642-fe0f","native":"\u{1F926}\u200D\u2642\uFE0F"},{"unified":"1f926-1f3fb-200d-2642-fe0f","native":"\u{1F926}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f926-1f3fc-200d-2642-fe0f","native":"\u{1F926}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f926-1f3fd-200d-2642-fe0f","native":"\u{1F926}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f926-1f3fe-200d-2642-fe0f","native":"\u{1F926}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f926-1f3ff-200d-2642-fe0f","native":"\u{1F926}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-facepalming":{"id":"woman-facepalming","name":"Woman Facepalming","keywords":["female","girl","disbelief"],"skins":[{"unified":"1f926-200d-2640-fe0f","native":"\u{1F926}\u200D\u2640\uFE0F"},{"unified":"1f926-1f3fb-200d-2640-fe0f","native":"\u{1F926}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f926-1f3fc-200d-2640-fe0f","native":"\u{1F926}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f926-1f3fd-200d-2640-fe0f","native":"\u{1F926}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f926-1f3fe-200d-2640-fe0f","native":"\u{1F926}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f926-1f3ff-200d-2640-fe0f","native":"\u{1F926}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"shrug":{"id":"shrug","name":"Shrug","keywords":["person","shrugging","regardless"],"skins":[{"unified":"1f937","native":"\u{1F937}"},{"unified":"1f937-1f3fb","native":"\u{1F937}\u{1F3FB}"},{"unified":"1f937-1f3fc","native":"\u{1F937}\u{1F3FC}"},{"unified":"1f937-1f3fd","native":"\u{1F937}\u{1F3FD}"},{"unified":"1f937-1f3fe","native":"\u{1F937}\u{1F3FE}"},{"unified":"1f937-1f3ff","native":"\u{1F937}\u{1F3FF}"}],"version":3},"man-shrugging":{"id":"man-shrugging","name":"Man Shrugging","keywords":["male","boy","confused","indifferent","doubt"],"skins":[{"unified":"1f937-200d-2642-fe0f","native":"\u{1F937}\u200D\u2642\uFE0F"},{"unified":"1f937-1f3fb-200d-2642-fe0f","native":"\u{1F937}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f937-1f3fc-200d-2642-fe0f","native":"\u{1F937}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f937-1f3fd-200d-2642-fe0f","native":"\u{1F937}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f937-1f3fe-200d-2642-fe0f","native":"\u{1F937}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f937-1f3ff-200d-2642-fe0f","native":"\u{1F937}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-shrugging":{"id":"woman-shrugging","name":"Woman Shrugging","keywords":["female","girl","confused","indifferent","doubt"],"skins":[{"unified":"1f937-200d-2640-fe0f","native":"\u{1F937}\u200D\u2640\uFE0F"},{"unified":"1f937-1f3fb-200d-2640-fe0f","native":"\u{1F937}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f937-1f3fc-200d-2640-fe0f","native":"\u{1F937}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f937-1f3fd-200d-2640-fe0f","native":"\u{1F937}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f937-1f3fe-200d-2640-fe0f","native":"\u{1F937}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f937-1f3ff-200d-2640-fe0f","native":"\u{1F937}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"health_worker":{"id":"health_worker","name":"Health Worker","keywords":["hospital"],"skins":[{"unified":"1f9d1-200d-2695-fe0f","native":"\u{1F9D1}\u200D\u2695\uFE0F"},{"unified":"1f9d1-1f3fb-200d-2695-fe0f","native":"\u{1F9D1}\u{1F3FB}\u200D\u2695\uFE0F"},{"unified":"1f9d1-1f3fc-200d-2695-fe0f","native":"\u{1F9D1}\u{1F3FC}\u200D\u2695\uFE0F"},{"unified":"1f9d1-1f3fd-200d-2695-fe0f","native":"\u{1F9D1}\u{1F3FD}\u200D\u2695\uFE0F"},{"unified":"1f9d1-1f3fe-200d-2695-fe0f","native":"\u{1F9D1}\u{1F3FE}\u200D\u2695\uFE0F"},{"unified":"1f9d1-1f3ff-200d-2695-fe0f","native":"\u{1F9D1}\u{1F3FF}\u200D\u2695\uFE0F"}],"version":12.1},"male-doctor":{"id":"male-doctor","name":"Man Health Worker","keywords":["male","doctor","nurse","therapist","healthcare","human"],"skins":[{"unified":"1f468-200d-2695-fe0f","native":"\u{1F468}\u200D\u2695\uFE0F"},{"unified":"1f468-1f3fb-200d-2695-fe0f","native":"\u{1F468}\u{1F3FB}\u200D\u2695\uFE0F"},{"unified":"1f468-1f3fc-200d-2695-fe0f","native":"\u{1F468}\u{1F3FC}\u200D\u2695\uFE0F"},{"unified":"1f468-1f3fd-200d-2695-fe0f","native":"\u{1F468}\u{1F3FD}\u200D\u2695\uFE0F"},{"unified":"1f468-1f3fe-200d-2695-fe0f","native":"\u{1F468}\u{1F3FE}\u200D\u2695\uFE0F"},{"unified":"1f468-1f3ff-200d-2695-fe0f","native":"\u{1F468}\u{1F3FF}\u200D\u2695\uFE0F"}],"version":4},"female-doctor":{"id":"female-doctor","name":"Woman Health Worker","keywords":["female","doctor","nurse","therapist","healthcare","human"],"skins":[{"unified":"1f469-200d-2695-fe0f","native":"\u{1F469}\u200D\u2695\uFE0F"},{"unified":"1f469-1f3fb-200d-2695-fe0f","native":"\u{1F469}\u{1F3FB}\u200D\u2695\uFE0F"},{"unified":"1f469-1f3fc-200d-2695-fe0f","native":"\u{1F469}\u{1F3FC}\u200D\u2695\uFE0F"},{"unified":"1f469-1f3fd-200d-2695-fe0f","native":"\u{1F469}\u{1F3FD}\u200D\u2695\uFE0F"},{"unified":"1f469-1f3fe-200d-2695-fe0f","native":"\u{1F469}\u{1F3FE}\u200D\u2695\uFE0F"},{"unified":"1f469-1f3ff-200d-2695-fe0f","native":"\u{1F469}\u{1F3FF}\u200D\u2695\uFE0F"}],"version":4},"student":{"id":"student","name":"Student","keywords":["learn"],"skins":[{"unified":"1f9d1-200d-1f393","native":"\u{1F9D1}\u200D\u{1F393}"},{"unified":"1f9d1-1f3fb-200d-1f393","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F393}"},{"unified":"1f9d1-1f3fc-200d-1f393","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F393}"},{"unified":"1f9d1-1f3fd-200d-1f393","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F393}"},{"unified":"1f9d1-1f3fe-200d-1f393","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F393}"},{"unified":"1f9d1-1f3ff-200d-1f393","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F393}"}],"version":12.1},"male-student":{"id":"male-student","name":"Man Student","keywords":["male","graduate","human"],"skins":[{"unified":"1f468-200d-1f393","native":"\u{1F468}\u200D\u{1F393}"},{"unified":"1f468-1f3fb-200d-1f393","native":"\u{1F468}\u{1F3FB}\u200D\u{1F393}"},{"unified":"1f468-1f3fc-200d-1f393","native":"\u{1F468}\u{1F3FC}\u200D\u{1F393}"},{"unified":"1f468-1f3fd-200d-1f393","native":"\u{1F468}\u{1F3FD}\u200D\u{1F393}"},{"unified":"1f468-1f3fe-200d-1f393","native":"\u{1F468}\u{1F3FE}\u200D\u{1F393}"},{"unified":"1f468-1f3ff-200d-1f393","native":"\u{1F468}\u{1F3FF}\u200D\u{1F393}"}],"version":4},"female-student":{"id":"female-student","name":"Woman Student","keywords":["female","graduate","human"],"skins":[{"unified":"1f469-200d-1f393","native":"\u{1F469}\u200D\u{1F393}"},{"unified":"1f469-1f3fb-200d-1f393","native":"\u{1F469}\u{1F3FB}\u200D\u{1F393}"},{"unified":"1f469-1f3fc-200d-1f393","native":"\u{1F469}\u{1F3FC}\u200D\u{1F393}"},{"unified":"1f469-1f3fd-200d-1f393","native":"\u{1F469}\u{1F3FD}\u200D\u{1F393}"},{"unified":"1f469-1f3fe-200d-1f393","native":"\u{1F469}\u{1F3FE}\u200D\u{1F393}"},{"unified":"1f469-1f3ff-200d-1f393","native":"\u{1F469}\u{1F3FF}\u200D\u{1F393}"}],"version":4},"teacher":{"id":"teacher","name":"Teacher","keywords":["professor"],"skins":[{"unified":"1f9d1-200d-1f3eb","native":"\u{1F9D1}\u200D\u{1F3EB}"},{"unified":"1f9d1-1f3fb-200d-1f3eb","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F3EB}"},{"unified":"1f9d1-1f3fc-200d-1f3eb","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F3EB}"},{"unified":"1f9d1-1f3fd-200d-1f3eb","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F3EB}"},{"unified":"1f9d1-1f3fe-200d-1f3eb","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F3EB}"},{"unified":"1f9d1-1f3ff-200d-1f3eb","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F3EB}"}],"version":12.1},"male-teacher":{"id":"male-teacher","name":"Man Teacher","keywords":["male","instructor","professor","human"],"skins":[{"unified":"1f468-200d-1f3eb","native":"\u{1F468}\u200D\u{1F3EB}"},{"unified":"1f468-1f3fb-200d-1f3eb","native":"\u{1F468}\u{1F3FB}\u200D\u{1F3EB}"},{"unified":"1f468-1f3fc-200d-1f3eb","native":"\u{1F468}\u{1F3FC}\u200D\u{1F3EB}"},{"unified":"1f468-1f3fd-200d-1f3eb","native":"\u{1F468}\u{1F3FD}\u200D\u{1F3EB}"},{"unified":"1f468-1f3fe-200d-1f3eb","native":"\u{1F468}\u{1F3FE}\u200D\u{1F3EB}"},{"unified":"1f468-1f3ff-200d-1f3eb","native":"\u{1F468}\u{1F3FF}\u200D\u{1F3EB}"}],"version":4},"female-teacher":{"id":"female-teacher","name":"Woman Teacher","keywords":["female","instructor","professor","human"],"skins":[{"unified":"1f469-200d-1f3eb","native":"\u{1F469}\u200D\u{1F3EB}"},{"unified":"1f469-1f3fb-200d-1f3eb","native":"\u{1F469}\u{1F3FB}\u200D\u{1F3EB}"},{"unified":"1f469-1f3fc-200d-1f3eb","native":"\u{1F469}\u{1F3FC}\u200D\u{1F3EB}"},{"unified":"1f469-1f3fd-200d-1f3eb","native":"\u{1F469}\u{1F3FD}\u200D\u{1F3EB}"},{"unified":"1f469-1f3fe-200d-1f3eb","native":"\u{1F469}\u{1F3FE}\u200D\u{1F3EB}"},{"unified":"1f469-1f3ff-200d-1f3eb","native":"\u{1F469}\u{1F3FF}\u200D\u{1F3EB}"}],"version":4},"judge":{"id":"judge","name":"Judge","keywords":["law"],"skins":[{"unified":"1f9d1-200d-2696-fe0f","native":"\u{1F9D1}\u200D\u2696\uFE0F"},{"unified":"1f9d1-1f3fb-200d-2696-fe0f","native":"\u{1F9D1}\u{1F3FB}\u200D\u2696\uFE0F"},{"unified":"1f9d1-1f3fc-200d-2696-fe0f","native":"\u{1F9D1}\u{1F3FC}\u200D\u2696\uFE0F"},{"unified":"1f9d1-1f3fd-200d-2696-fe0f","native":"\u{1F9D1}\u{1F3FD}\u200D\u2696\uFE0F"},{"unified":"1f9d1-1f3fe-200d-2696-fe0f","native":"\u{1F9D1}\u{1F3FE}\u200D\u2696\uFE0F"},{"unified":"1f9d1-1f3ff-200d-2696-fe0f","native":"\u{1F9D1}\u{1F3FF}\u200D\u2696\uFE0F"}],"version":12.1},"male-judge":{"id":"male-judge","name":"Man Judge","keywords":["male","justice","court","human"],"skins":[{"unified":"1f468-200d-2696-fe0f","native":"\u{1F468}\u200D\u2696\uFE0F"},{"unified":"1f468-1f3fb-200d-2696-fe0f","native":"\u{1F468}\u{1F3FB}\u200D\u2696\uFE0F"},{"unified":"1f468-1f3fc-200d-2696-fe0f","native":"\u{1F468}\u{1F3FC}\u200D\u2696\uFE0F"},{"unified":"1f468-1f3fd-200d-2696-fe0f","native":"\u{1F468}\u{1F3FD}\u200D\u2696\uFE0F"},{"unified":"1f468-1f3fe-200d-2696-fe0f","native":"\u{1F468}\u{1F3FE}\u200D\u2696\uFE0F"},{"unified":"1f468-1f3ff-200d-2696-fe0f","native":"\u{1F468}\u{1F3FF}\u200D\u2696\uFE0F"}],"version":4},"female-judge":{"id":"female-judge","name":"Woman Judge","keywords":["female","justice","court","human"],"skins":[{"unified":"1f469-200d-2696-fe0f","native":"\u{1F469}\u200D\u2696\uFE0F"},{"unified":"1f469-1f3fb-200d-2696-fe0f","native":"\u{1F469}\u{1F3FB}\u200D\u2696\uFE0F"},{"unified":"1f469-1f3fc-200d-2696-fe0f","native":"\u{1F469}\u{1F3FC}\u200D\u2696\uFE0F"},{"unified":"1f469-1f3fd-200d-2696-fe0f","native":"\u{1F469}\u{1F3FD}\u200D\u2696\uFE0F"},{"unified":"1f469-1f3fe-200d-2696-fe0f","native":"\u{1F469}\u{1F3FE}\u200D\u2696\uFE0F"},{"unified":"1f469-1f3ff-200d-2696-fe0f","native":"\u{1F469}\u{1F3FF}\u200D\u2696\uFE0F"}],"version":4},"farmer":{"id":"farmer","name":"Farmer","keywords":["crops"],"skins":[{"unified":"1f9d1-200d-1f33e","native":"\u{1F9D1}\u200D\u{1F33E}"},{"unified":"1f9d1-1f3fb-200d-1f33e","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F33E}"},{"unified":"1f9d1-1f3fc-200d-1f33e","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F33E}"},{"unified":"1f9d1-1f3fd-200d-1f33e","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F33E}"},{"unified":"1f9d1-1f3fe-200d-1f33e","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F33E}"},{"unified":"1f9d1-1f3ff-200d-1f33e","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F33E}"}],"version":12.1},"male-farmer":{"id":"male-farmer","name":"Man Farmer","keywords":["male","rancher","gardener","human"],"skins":[{"unified":"1f468-200d-1f33e","native":"\u{1F468}\u200D\u{1F33E}"},{"unified":"1f468-1f3fb-200d-1f33e","native":"\u{1F468}\u{1F3FB}\u200D\u{1F33E}"},{"unified":"1f468-1f3fc-200d-1f33e","native":"\u{1F468}\u{1F3FC}\u200D\u{1F33E}"},{"unified":"1f468-1f3fd-200d-1f33e","native":"\u{1F468}\u{1F3FD}\u200D\u{1F33E}"},{"unified":"1f468-1f3fe-200d-1f33e","native":"\u{1F468}\u{1F3FE}\u200D\u{1F33E}"},{"unified":"1f468-1f3ff-200d-1f33e","native":"\u{1F468}\u{1F3FF}\u200D\u{1F33E}"}],"version":4},"female-farmer":{"id":"female-farmer","name":"Woman Farmer","keywords":["female","rancher","gardener","human"],"skins":[{"unified":"1f469-200d-1f33e","native":"\u{1F469}\u200D\u{1F33E}"},{"unified":"1f469-1f3fb-200d-1f33e","native":"\u{1F469}\u{1F3FB}\u200D\u{1F33E}"},{"unified":"1f469-1f3fc-200d-1f33e","native":"\u{1F469}\u{1F3FC}\u200D\u{1F33E}"},{"unified":"1f469-1f3fd-200d-1f33e","native":"\u{1F469}\u{1F3FD}\u200D\u{1F33E}"},{"unified":"1f469-1f3fe-200d-1f33e","native":"\u{1F469}\u{1F3FE}\u200D\u{1F33E}"},{"unified":"1f469-1f3ff-200d-1f33e","native":"\u{1F469}\u{1F3FF}\u200D\u{1F33E}"}],"version":4},"cook":{"id":"cook","name":"Cook","keywords":["food","kitchen","culinary"],"skins":[{"unified":"1f9d1-200d-1f373","native":"\u{1F9D1}\u200D\u{1F373}"},{"unified":"1f9d1-1f3fb-200d-1f373","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F373}"},{"unified":"1f9d1-1f3fc-200d-1f373","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F373}"},{"unified":"1f9d1-1f3fd-200d-1f373","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F373}"},{"unified":"1f9d1-1f3fe-200d-1f373","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F373}"},{"unified":"1f9d1-1f3ff-200d-1f373","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F373}"}],"version":12.1},"male-cook":{"id":"male-cook","name":"Man Cook","keywords":["male","chef","human"],"skins":[{"unified":"1f468-200d-1f373","native":"\u{1F468}\u200D\u{1F373}"},{"unified":"1f468-1f3fb-200d-1f373","native":"\u{1F468}\u{1F3FB}\u200D\u{1F373}"},{"unified":"1f468-1f3fc-200d-1f373","native":"\u{1F468}\u{1F3FC}\u200D\u{1F373}"},{"unified":"1f468-1f3fd-200d-1f373","native":"\u{1F468}\u{1F3FD}\u200D\u{1F373}"},{"unified":"1f468-1f3fe-200d-1f373","native":"\u{1F468}\u{1F3FE}\u200D\u{1F373}"},{"unified":"1f468-1f3ff-200d-1f373","native":"\u{1F468}\u{1F3FF}\u200D\u{1F373}"}],"version":4},"female-cook":{"id":"female-cook","name":"Woman Cook","keywords":["female","chef","human"],"skins":[{"unified":"1f469-200d-1f373","native":"\u{1F469}\u200D\u{1F373}"},{"unified":"1f469-1f3fb-200d-1f373","native":"\u{1F469}\u{1F3FB}\u200D\u{1F373}"},{"unified":"1f469-1f3fc-200d-1f373","native":"\u{1F469}\u{1F3FC}\u200D\u{1F373}"},{"unified":"1f469-1f3fd-200d-1f373","native":"\u{1F469}\u{1F3FD}\u200D\u{1F373}"},{"unified":"1f469-1f3fe-200d-1f373","native":"\u{1F469}\u{1F3FE}\u200D\u{1F373}"},{"unified":"1f469-1f3ff-200d-1f373","native":"\u{1F469}\u{1F3FF}\u200D\u{1F373}"}],"version":4},"mechanic":{"id":"mechanic","name":"Mechanic","keywords":["worker","technician"],"skins":[{"unified":"1f9d1-200d-1f527","native":"\u{1F9D1}\u200D\u{1F527}"},{"unified":"1f9d1-1f3fb-200d-1f527","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F527}"},{"unified":"1f9d1-1f3fc-200d-1f527","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F527}"},{"unified":"1f9d1-1f3fd-200d-1f527","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F527}"},{"unified":"1f9d1-1f3fe-200d-1f527","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F527}"},{"unified":"1f9d1-1f3ff-200d-1f527","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F527}"}],"version":12.1},"male-mechanic":{"id":"male-mechanic","name":"Man Mechanic","keywords":["male","plumber","human","wrench"],"skins":[{"unified":"1f468-200d-1f527","native":"\u{1F468}\u200D\u{1F527}"},{"unified":"1f468-1f3fb-200d-1f527","native":"\u{1F468}\u{1F3FB}\u200D\u{1F527}"},{"unified":"1f468-1f3fc-200d-1f527","native":"\u{1F468}\u{1F3FC}\u200D\u{1F527}"},{"unified":"1f468-1f3fd-200d-1f527","native":"\u{1F468}\u{1F3FD}\u200D\u{1F527}"},{"unified":"1f468-1f3fe-200d-1f527","native":"\u{1F468}\u{1F3FE}\u200D\u{1F527}"},{"unified":"1f468-1f3ff-200d-1f527","native":"\u{1F468}\u{1F3FF}\u200D\u{1F527}"}],"version":4},"female-mechanic":{"id":"female-mechanic","name":"Woman Mechanic","keywords":["female","plumber","human","wrench"],"skins":[{"unified":"1f469-200d-1f527","native":"\u{1F469}\u200D\u{1F527}"},{"unified":"1f469-1f3fb-200d-1f527","native":"\u{1F469}\u{1F3FB}\u200D\u{1F527}"},{"unified":"1f469-1f3fc-200d-1f527","native":"\u{1F469}\u{1F3FC}\u200D\u{1F527}"},{"unified":"1f469-1f3fd-200d-1f527","native":"\u{1F469}\u{1F3FD}\u200D\u{1F527}"},{"unified":"1f469-1f3fe-200d-1f527","native":"\u{1F469}\u{1F3FE}\u200D\u{1F527}"},{"unified":"1f469-1f3ff-200d-1f527","native":"\u{1F469}\u{1F3FF}\u200D\u{1F527}"}],"version":4},"factory_worker":{"id":"factory_worker","name":"Factory Worker","keywords":["labor"],"skins":[{"unified":"1f9d1-200d-1f3ed","native":"\u{1F9D1}\u200D\u{1F3ED}"},{"unified":"1f9d1-1f3fb-200d-1f3ed","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F3ED}"},{"unified":"1f9d1-1f3fc-200d-1f3ed","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F3ED}"},{"unified":"1f9d1-1f3fd-200d-1f3ed","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F3ED}"},{"unified":"1f9d1-1f3fe-200d-1f3ed","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F3ED}"},{"unified":"1f9d1-1f3ff-200d-1f3ed","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F3ED}"}],"version":12.1},"male-factory-worker":{"id":"male-factory-worker","name":"Man Factory Worker","keywords":["male","factory-worker","assembly","industrial","human"],"skins":[{"unified":"1f468-200d-1f3ed","native":"\u{1F468}\u200D\u{1F3ED}"},{"unified":"1f468-1f3fb-200d-1f3ed","native":"\u{1F468}\u{1F3FB}\u200D\u{1F3ED}"},{"unified":"1f468-1f3fc-200d-1f3ed","native":"\u{1F468}\u{1F3FC}\u200D\u{1F3ED}"},{"unified":"1f468-1f3fd-200d-1f3ed","native":"\u{1F468}\u{1F3FD}\u200D\u{1F3ED}"},{"unified":"1f468-1f3fe-200d-1f3ed","native":"\u{1F468}\u{1F3FE}\u200D\u{1F3ED}"},{"unified":"1f468-1f3ff-200d-1f3ed","native":"\u{1F468}\u{1F3FF}\u200D\u{1F3ED}"}],"version":4},"female-factory-worker":{"id":"female-factory-worker","name":"Woman Factory Worker","keywords":["female","factory-worker","assembly","industrial","human"],"skins":[{"unified":"1f469-200d-1f3ed","native":"\u{1F469}\u200D\u{1F3ED}"},{"unified":"1f469-1f3fb-200d-1f3ed","native":"\u{1F469}\u{1F3FB}\u200D\u{1F3ED}"},{"unified":"1f469-1f3fc-200d-1f3ed","native":"\u{1F469}\u{1F3FC}\u200D\u{1F3ED}"},{"unified":"1f469-1f3fd-200d-1f3ed","native":"\u{1F469}\u{1F3FD}\u200D\u{1F3ED}"},{"unified":"1f469-1f3fe-200d-1f3ed","native":"\u{1F469}\u{1F3FE}\u200D\u{1F3ED}"},{"unified":"1f469-1f3ff-200d-1f3ed","native":"\u{1F469}\u{1F3FF}\u200D\u{1F3ED}"}],"version":4},"office_worker":{"id":"office_worker","name":"Office Worker","keywords":["business"],"skins":[{"unified":"1f9d1-200d-1f4bc","native":"\u{1F9D1}\u200D\u{1F4BC}"},{"unified":"1f9d1-1f3fb-200d-1f4bc","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F4BC}"},{"unified":"1f9d1-1f3fc-200d-1f4bc","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F4BC}"},{"unified":"1f9d1-1f3fd-200d-1f4bc","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F4BC}"},{"unified":"1f9d1-1f3fe-200d-1f4bc","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F4BC}"},{"unified":"1f9d1-1f3ff-200d-1f4bc","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F4BC}"}],"version":12.1},"male-office-worker":{"id":"male-office-worker","name":"Man Office Worker","keywords":["male","office-worker","business","manager","human"],"skins":[{"unified":"1f468-200d-1f4bc","native":"\u{1F468}\u200D\u{1F4BC}"},{"unified":"1f468-1f3fb-200d-1f4bc","native":"\u{1F468}\u{1F3FB}\u200D\u{1F4BC}"},{"unified":"1f468-1f3fc-200d-1f4bc","native":"\u{1F468}\u{1F3FC}\u200D\u{1F4BC}"},{"unified":"1f468-1f3fd-200d-1f4bc","native":"\u{1F468}\u{1F3FD}\u200D\u{1F4BC}"},{"unified":"1f468-1f3fe-200d-1f4bc","native":"\u{1F468}\u{1F3FE}\u200D\u{1F4BC}"},{"unified":"1f468-1f3ff-200d-1f4bc","native":"\u{1F468}\u{1F3FF}\u200D\u{1F4BC}"}],"version":4},"female-office-worker":{"id":"female-office-worker","name":"Woman Office Worker","keywords":["female","office-worker","business","manager","human"],"skins":[{"unified":"1f469-200d-1f4bc","native":"\u{1F469}\u200D\u{1F4BC}"},{"unified":"1f469-1f3fb-200d-1f4bc","native":"\u{1F469}\u{1F3FB}\u200D\u{1F4BC}"},{"unified":"1f469-1f3fc-200d-1f4bc","native":"\u{1F469}\u{1F3FC}\u200D\u{1F4BC}"},{"unified":"1f469-1f3fd-200d-1f4bc","native":"\u{1F469}\u{1F3FD}\u200D\u{1F4BC}"},{"unified":"1f469-1f3fe-200d-1f4bc","native":"\u{1F469}\u{1F3FE}\u200D\u{1F4BC}"},{"unified":"1f469-1f3ff-200d-1f4bc","native":"\u{1F469}\u{1F3FF}\u200D\u{1F4BC}"}],"version":4},"scientist":{"id":"scientist","name":"Scientist","keywords":["chemistry"],"skins":[{"unified":"1f9d1-200d-1f52c","native":"\u{1F9D1}\u200D\u{1F52C}"},{"unified":"1f9d1-1f3fb-200d-1f52c","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F52C}"},{"unified":"1f9d1-1f3fc-200d-1f52c","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F52C}"},{"unified":"1f9d1-1f3fd-200d-1f52c","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F52C}"},{"unified":"1f9d1-1f3fe-200d-1f52c","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F52C}"},{"unified":"1f9d1-1f3ff-200d-1f52c","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F52C}"}],"version":12.1},"male-scientist":{"id":"male-scientist","name":"Man Scientist","keywords":["male","biologist","chemist","engineer","physicist","human"],"skins":[{"unified":"1f468-200d-1f52c","native":"\u{1F468}\u200D\u{1F52C}"},{"unified":"1f468-1f3fb-200d-1f52c","native":"\u{1F468}\u{1F3FB}\u200D\u{1F52C}"},{"unified":"1f468-1f3fc-200d-1f52c","native":"\u{1F468}\u{1F3FC}\u200D\u{1F52C}"},{"unified":"1f468-1f3fd-200d-1f52c","native":"\u{1F468}\u{1F3FD}\u200D\u{1F52C}"},{"unified":"1f468-1f3fe-200d-1f52c","native":"\u{1F468}\u{1F3FE}\u200D\u{1F52C}"},{"unified":"1f468-1f3ff-200d-1f52c","native":"\u{1F468}\u{1F3FF}\u200D\u{1F52C}"}],"version":4},"female-scientist":{"id":"female-scientist","name":"Woman Scientist","keywords":["female","biologist","chemist","engineer","physicist","human"],"skins":[{"unified":"1f469-200d-1f52c","native":"\u{1F469}\u200D\u{1F52C}"},{"unified":"1f469-1f3fb-200d-1f52c","native":"\u{1F469}\u{1F3FB}\u200D\u{1F52C}"},{"unified":"1f469-1f3fc-200d-1f52c","native":"\u{1F469}\u{1F3FC}\u200D\u{1F52C}"},{"unified":"1f469-1f3fd-200d-1f52c","native":"\u{1F469}\u{1F3FD}\u200D\u{1F52C}"},{"unified":"1f469-1f3fe-200d-1f52c","native":"\u{1F469}\u{1F3FE}\u200D\u{1F52C}"},{"unified":"1f469-1f3ff-200d-1f52c","native":"\u{1F469}\u{1F3FF}\u200D\u{1F52C}"}],"version":4},"technologist":{"id":"technologist","name":"Technologist","keywords":["computer"],"skins":[{"unified":"1f9d1-200d-1f4bb","native":"\u{1F9D1}\u200D\u{1F4BB}"},{"unified":"1f9d1-1f3fb-200d-1f4bb","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F4BB}"},{"unified":"1f9d1-1f3fc-200d-1f4bb","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F4BB}"},{"unified":"1f9d1-1f3fd-200d-1f4bb","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F4BB}"},{"unified":"1f9d1-1f3fe-200d-1f4bb","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F4BB}"},{"unified":"1f9d1-1f3ff-200d-1f4bb","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F4BB}"}],"version":12.1},"male-technologist":{"id":"male-technologist","name":"Man Technologist","keywords":["male","coder","developer","engineer","programmer","software","human","laptop","computer"],"skins":[{"unified":"1f468-200d-1f4bb","native":"\u{1F468}\u200D\u{1F4BB}"},{"unified":"1f468-1f3fb-200d-1f4bb","native":"\u{1F468}\u{1F3FB}\u200D\u{1F4BB}"},{"unified":"1f468-1f3fc-200d-1f4bb","native":"\u{1F468}\u{1F3FC}\u200D\u{1F4BB}"},{"unified":"1f468-1f3fd-200d-1f4bb","native":"\u{1F468}\u{1F3FD}\u200D\u{1F4BB}"},{"unified":"1f468-1f3fe-200d-1f4bb","native":"\u{1F468}\u{1F3FE}\u200D\u{1F4BB}"},{"unified":"1f468-1f3ff-200d-1f4bb","native":"\u{1F468}\u{1F3FF}\u200D\u{1F4BB}"}],"version":4},"female-technologist":{"id":"female-technologist","name":"Woman Technologist","keywords":["female","coder","developer","engineer","programmer","software","human","laptop","computer"],"skins":[{"unified":"1f469-200d-1f4bb","native":"\u{1F469}\u200D\u{1F4BB}"},{"unified":"1f469-1f3fb-200d-1f4bb","native":"\u{1F469}\u{1F3FB}\u200D\u{1F4BB}"},{"unified":"1f469-1f3fc-200d-1f4bb","native":"\u{1F469}\u{1F3FC}\u200D\u{1F4BB}"},{"unified":"1f469-1f3fd-200d-1f4bb","native":"\u{1F469}\u{1F3FD}\u200D\u{1F4BB}"},{"unified":"1f469-1f3fe-200d-1f4bb","native":"\u{1F469}\u{1F3FE}\u200D\u{1F4BB}"},{"unified":"1f469-1f3ff-200d-1f4bb","native":"\u{1F469}\u{1F3FF}\u200D\u{1F4BB}"}],"version":4},"singer":{"id":"singer","name":"Singer","keywords":["song","artist","performer"],"skins":[{"unified":"1f9d1-200d-1f3a4","native":"\u{1F9D1}\u200D\u{1F3A4}"},{"unified":"1f9d1-1f3fb-200d-1f3a4","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F3A4}"},{"unified":"1f9d1-1f3fc-200d-1f3a4","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F3A4}"},{"unified":"1f9d1-1f3fd-200d-1f3a4","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F3A4}"},{"unified":"1f9d1-1f3fe-200d-1f3a4","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F3A4}"},{"unified":"1f9d1-1f3ff-200d-1f3a4","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F3A4}"}],"version":12.1},"male-singer":{"id":"male-singer","name":"Man Singer","keywords":["male","rockstar","entertainer","human"],"skins":[{"unified":"1f468-200d-1f3a4","native":"\u{1F468}\u200D\u{1F3A4}"},{"unified":"1f468-1f3fb-200d-1f3a4","native":"\u{1F468}\u{1F3FB}\u200D\u{1F3A4}"},{"unified":"1f468-1f3fc-200d-1f3a4","native":"\u{1F468}\u{1F3FC}\u200D\u{1F3A4}"},{"unified":"1f468-1f3fd-200d-1f3a4","native":"\u{1F468}\u{1F3FD}\u200D\u{1F3A4}"},{"unified":"1f468-1f3fe-200d-1f3a4","native":"\u{1F468}\u{1F3FE}\u200D\u{1F3A4}"},{"unified":"1f468-1f3ff-200d-1f3a4","native":"\u{1F468}\u{1F3FF}\u200D\u{1F3A4}"}],"version":4},"female-singer":{"id":"female-singer","name":"Woman Singer","keywords":["female","rockstar","entertainer","human"],"skins":[{"unified":"1f469-200d-1f3a4","native":"\u{1F469}\u200D\u{1F3A4}"},{"unified":"1f469-1f3fb-200d-1f3a4","native":"\u{1F469}\u{1F3FB}\u200D\u{1F3A4}"},{"unified":"1f469-1f3fc-200d-1f3a4","native":"\u{1F469}\u{1F3FC}\u200D\u{1F3A4}"},{"unified":"1f469-1f3fd-200d-1f3a4","native":"\u{1F469}\u{1F3FD}\u200D\u{1F3A4}"},{"unified":"1f469-1f3fe-200d-1f3a4","native":"\u{1F469}\u{1F3FE}\u200D\u{1F3A4}"},{"unified":"1f469-1f3ff-200d-1f3a4","native":"\u{1F469}\u{1F3FF}\u200D\u{1F3A4}"}],"version":4},"artist":{"id":"artist","name":"Artist","keywords":["painting","draw","creativity"],"skins":[{"unified":"1f9d1-200d-1f3a8","native":"\u{1F9D1}\u200D\u{1F3A8}"},{"unified":"1f9d1-1f3fb-200d-1f3a8","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F3A8}"},{"unified":"1f9d1-1f3fc-200d-1f3a8","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F3A8}"},{"unified":"1f9d1-1f3fd-200d-1f3a8","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F3A8}"},{"unified":"1f9d1-1f3fe-200d-1f3a8","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F3A8}"},{"unified":"1f9d1-1f3ff-200d-1f3a8","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F3A8}"}],"version":12.1},"male-artist":{"id":"male-artist","name":"Man Artist","keywords":["male","painter","human"],"skins":[{"unified":"1f468-200d-1f3a8","native":"\u{1F468}\u200D\u{1F3A8}"},{"unified":"1f468-1f3fb-200d-1f3a8","native":"\u{1F468}\u{1F3FB}\u200D\u{1F3A8}"},{"unified":"1f468-1f3fc-200d-1f3a8","native":"\u{1F468}\u{1F3FC}\u200D\u{1F3A8}"},{"unified":"1f468-1f3fd-200d-1f3a8","native":"\u{1F468}\u{1F3FD}\u200D\u{1F3A8}"},{"unified":"1f468-1f3fe-200d-1f3a8","native":"\u{1F468}\u{1F3FE}\u200D\u{1F3A8}"},{"unified":"1f468-1f3ff-200d-1f3a8","native":"\u{1F468}\u{1F3FF}\u200D\u{1F3A8}"}],"version":4},"female-artist":{"id":"female-artist","name":"Woman Artist","keywords":["female","painter","human"],"skins":[{"unified":"1f469-200d-1f3a8","native":"\u{1F469}\u200D\u{1F3A8}"},{"unified":"1f469-1f3fb-200d-1f3a8","native":"\u{1F469}\u{1F3FB}\u200D\u{1F3A8}"},{"unified":"1f469-1f3fc-200d-1f3a8","native":"\u{1F469}\u{1F3FC}\u200D\u{1F3A8}"},{"unified":"1f469-1f3fd-200d-1f3a8","native":"\u{1F469}\u{1F3FD}\u200D\u{1F3A8}"},{"unified":"1f469-1f3fe-200d-1f3a8","native":"\u{1F469}\u{1F3FE}\u200D\u{1F3A8}"},{"unified":"1f469-1f3ff-200d-1f3a8","native":"\u{1F469}\u{1F3FF}\u200D\u{1F3A8}"}],"version":4},"pilot":{"id":"pilot","name":"Pilot","keywords":["fly","plane","airplane"],"skins":[{"unified":"1f9d1-200d-2708-fe0f","native":"\u{1F9D1}\u200D\u2708\uFE0F"},{"unified":"1f9d1-1f3fb-200d-2708-fe0f","native":"\u{1F9D1}\u{1F3FB}\u200D\u2708\uFE0F"},{"unified":"1f9d1-1f3fc-200d-2708-fe0f","native":"\u{1F9D1}\u{1F3FC}\u200D\u2708\uFE0F"},{"unified":"1f9d1-1f3fd-200d-2708-fe0f","native":"\u{1F9D1}\u{1F3FD}\u200D\u2708\uFE0F"},{"unified":"1f9d1-1f3fe-200d-2708-fe0f","native":"\u{1F9D1}\u{1F3FE}\u200D\u2708\uFE0F"},{"unified":"1f9d1-1f3ff-200d-2708-fe0f","native":"\u{1F9D1}\u{1F3FF}\u200D\u2708\uFE0F"}],"version":12.1},"male-pilot":{"id":"male-pilot","name":"Man Pilot","keywords":["male","aviator","plane","human"],"skins":[{"unified":"1f468-200d-2708-fe0f","native":"\u{1F468}\u200D\u2708\uFE0F"},{"unified":"1f468-1f3fb-200d-2708-fe0f","native":"\u{1F468}\u{1F3FB}\u200D\u2708\uFE0F"},{"unified":"1f468-1f3fc-200d-2708-fe0f","native":"\u{1F468}\u{1F3FC}\u200D\u2708\uFE0F"},{"unified":"1f468-1f3fd-200d-2708-fe0f","native":"\u{1F468}\u{1F3FD}\u200D\u2708\uFE0F"},{"unified":"1f468-1f3fe-200d-2708-fe0f","native":"\u{1F468}\u{1F3FE}\u200D\u2708\uFE0F"},{"unified":"1f468-1f3ff-200d-2708-fe0f","native":"\u{1F468}\u{1F3FF}\u200D\u2708\uFE0F"}],"version":4},"female-pilot":{"id":"female-pilot","name":"Woman Pilot","keywords":["female","aviator","plane","human"],"skins":[{"unified":"1f469-200d-2708-fe0f","native":"\u{1F469}\u200D\u2708\uFE0F"},{"unified":"1f469-1f3fb-200d-2708-fe0f","native":"\u{1F469}\u{1F3FB}\u200D\u2708\uFE0F"},{"unified":"1f469-1f3fc-200d-2708-fe0f","native":"\u{1F469}\u{1F3FC}\u200D\u2708\uFE0F"},{"unified":"1f469-1f3fd-200d-2708-fe0f","native":"\u{1F469}\u{1F3FD}\u200D\u2708\uFE0F"},{"unified":"1f469-1f3fe-200d-2708-fe0f","native":"\u{1F469}\u{1F3FE}\u200D\u2708\uFE0F"},{"unified":"1f469-1f3ff-200d-2708-fe0f","native":"\u{1F469}\u{1F3FF}\u200D\u2708\uFE0F"}],"version":4},"astronaut":{"id":"astronaut","name":"Astronaut","keywords":["outerspace"],"skins":[{"unified":"1f9d1-200d-1f680","native":"\u{1F9D1}\u200D\u{1F680}"},{"unified":"1f9d1-1f3fb-200d-1f680","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F680}"},{"unified":"1f9d1-1f3fc-200d-1f680","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F680}"},{"unified":"1f9d1-1f3fd-200d-1f680","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F680}"},{"unified":"1f9d1-1f3fe-200d-1f680","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F680}"},{"unified":"1f9d1-1f3ff-200d-1f680","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F680}"}],"version":12.1},"male-astronaut":{"id":"male-astronaut","name":"Man Astronaut","keywords":["male","space","rocket","human"],"skins":[{"unified":"1f468-200d-1f680","native":"\u{1F468}\u200D\u{1F680}"},{"unified":"1f468-1f3fb-200d-1f680","native":"\u{1F468}\u{1F3FB}\u200D\u{1F680}"},{"unified":"1f468-1f3fc-200d-1f680","native":"\u{1F468}\u{1F3FC}\u200D\u{1F680}"},{"unified":"1f468-1f3fd-200d-1f680","native":"\u{1F468}\u{1F3FD}\u200D\u{1F680}"},{"unified":"1f468-1f3fe-200d-1f680","native":"\u{1F468}\u{1F3FE}\u200D\u{1F680}"},{"unified":"1f468-1f3ff-200d-1f680","native":"\u{1F468}\u{1F3FF}\u200D\u{1F680}"}],"version":4},"female-astronaut":{"id":"female-astronaut","name":"Woman Astronaut","keywords":["female","space","rocket","human"],"skins":[{"unified":"1f469-200d-1f680","native":"\u{1F469}\u200D\u{1F680}"},{"unified":"1f469-1f3fb-200d-1f680","native":"\u{1F469}\u{1F3FB}\u200D\u{1F680}"},{"unified":"1f469-1f3fc-200d-1f680","native":"\u{1F469}\u{1F3FC}\u200D\u{1F680}"},{"unified":"1f469-1f3fd-200d-1f680","native":"\u{1F469}\u{1F3FD}\u200D\u{1F680}"},{"unified":"1f469-1f3fe-200d-1f680","native":"\u{1F469}\u{1F3FE}\u200D\u{1F680}"},{"unified":"1f469-1f3ff-200d-1f680","native":"\u{1F469}\u{1F3FF}\u200D\u{1F680}"}],"version":4},"firefighter":{"id":"firefighter","name":"Firefighter","keywords":["fire"],"skins":[{"unified":"1f9d1-200d-1f692","native":"\u{1F9D1}\u200D\u{1F692}"},{"unified":"1f9d1-1f3fb-200d-1f692","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F692}"},{"unified":"1f9d1-1f3fc-200d-1f692","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F692}"},{"unified":"1f9d1-1f3fd-200d-1f692","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F692}"},{"unified":"1f9d1-1f3fe-200d-1f692","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F692}"},{"unified":"1f9d1-1f3ff-200d-1f692","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F692}"}],"version":12.1},"male-firefighter":{"id":"male-firefighter","name":"Man Firefighter","keywords":["male","fireman","human"],"skins":[{"unified":"1f468-200d-1f692","native":"\u{1F468}\u200D\u{1F692}"},{"unified":"1f468-1f3fb-200d-1f692","native":"\u{1F468}\u{1F3FB}\u200D\u{1F692}"},{"unified":"1f468-1f3fc-200d-1f692","native":"\u{1F468}\u{1F3FC}\u200D\u{1F692}"},{"unified":"1f468-1f3fd-200d-1f692","native":"\u{1F468}\u{1F3FD}\u200D\u{1F692}"},{"unified":"1f468-1f3fe-200d-1f692","native":"\u{1F468}\u{1F3FE}\u200D\u{1F692}"},{"unified":"1f468-1f3ff-200d-1f692","native":"\u{1F468}\u{1F3FF}\u200D\u{1F692}"}],"version":4},"female-firefighter":{"id":"female-firefighter","name":"Woman Firefighter","keywords":["female","fireman","human"],"skins":[{"unified":"1f469-200d-1f692","native":"\u{1F469}\u200D\u{1F692}"},{"unified":"1f469-1f3fb-200d-1f692","native":"\u{1F469}\u{1F3FB}\u200D\u{1F692}"},{"unified":"1f469-1f3fc-200d-1f692","native":"\u{1F469}\u{1F3FC}\u200D\u{1F692}"},{"unified":"1f469-1f3fd-200d-1f692","native":"\u{1F469}\u{1F3FD}\u200D\u{1F692}"},{"unified":"1f469-1f3fe-200d-1f692","native":"\u{1F469}\u{1F3FE}\u200D\u{1F692}"},{"unified":"1f469-1f3ff-200d-1f692","native":"\u{1F469}\u{1F3FF}\u200D\u{1F692}"}],"version":4},"cop":{"id":"cop","name":"Police Officer","keywords":["cop"],"skins":[{"unified":"1f46e","native":"\u{1F46E}"},{"unified":"1f46e-1f3fb","native":"\u{1F46E}\u{1F3FB}"},{"unified":"1f46e-1f3fc","native":"\u{1F46E}\u{1F3FC}"},{"unified":"1f46e-1f3fd","native":"\u{1F46E}\u{1F3FD}"},{"unified":"1f46e-1f3fe","native":"\u{1F46E}\u{1F3FE}"},{"unified":"1f46e-1f3ff","native":"\u{1F46E}\u{1F3FF}"}],"version":1},"male-police-officer":{"id":"male-police-officer","name":"Man Police Officer","keywords":["male","police-officer","law","legal","enforcement","arrest","911"],"skins":[{"unified":"1f46e-200d-2642-fe0f","native":"\u{1F46E}\u200D\u2642\uFE0F"},{"unified":"1f46e-1f3fb-200d-2642-fe0f","native":"\u{1F46E}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f46e-1f3fc-200d-2642-fe0f","native":"\u{1F46E}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f46e-1f3fd-200d-2642-fe0f","native":"\u{1F46E}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f46e-1f3fe-200d-2642-fe0f","native":"\u{1F46E}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f46e-1f3ff-200d-2642-fe0f","native":"\u{1F46E}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"female-police-officer":{"id":"female-police-officer","name":"Woman Police Officer","keywords":["female","police-officer","law","legal","enforcement","arrest","911"],"skins":[{"unified":"1f46e-200d-2640-fe0f","native":"\u{1F46E}\u200D\u2640\uFE0F"},{"unified":"1f46e-1f3fb-200d-2640-fe0f","native":"\u{1F46E}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f46e-1f3fc-200d-2640-fe0f","native":"\u{1F46E}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f46e-1f3fd-200d-2640-fe0f","native":"\u{1F46E}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f46e-1f3fe-200d-2640-fe0f","native":"\u{1F46E}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f46e-1f3ff-200d-2640-fe0f","native":"\u{1F46E}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"sleuth_or_spy":{"id":"sleuth_or_spy","name":"Detective","keywords":["sleuth","or","spy","human"],"skins":[{"unified":"1f575-fe0f","native":"\u{1F575}\uFE0F"},{"unified":"1f575-1f3fb","native":"\u{1F575}\u{1F3FB}"},{"unified":"1f575-1f3fc","native":"\u{1F575}\u{1F3FC}"},{"unified":"1f575-1f3fd","native":"\u{1F575}\u{1F3FD}"},{"unified":"1f575-1f3fe","native":"\u{1F575}\u{1F3FE}"},{"unified":"1f575-1f3ff","native":"\u{1F575}\u{1F3FF}"}],"version":1},"male-detective":{"id":"male-detective","name":"Man Detective","keywords":["male","crime"],"skins":[{"unified":"1f575-fe0f-200d-2642-fe0f","native":"\u{1F575}\uFE0F\u200D\u2642\uFE0F"},{"unified":"1f575-1f3fb-200d-2642-fe0f","native":"\u{1F575}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f575-1f3fc-200d-2642-fe0f","native":"\u{1F575}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f575-1f3fd-200d-2642-fe0f","native":"\u{1F575}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f575-1f3fe-200d-2642-fe0f","native":"\u{1F575}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f575-1f3ff-200d-2642-fe0f","native":"\u{1F575}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"female-detective":{"id":"female-detective","name":"Woman Detective","keywords":["female","human","spy"],"skins":[{"unified":"1f575-fe0f-200d-2640-fe0f","native":"\u{1F575}\uFE0F\u200D\u2640\uFE0F"},{"unified":"1f575-1f3fb-200d-2640-fe0f","native":"\u{1F575}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f575-1f3fc-200d-2640-fe0f","native":"\u{1F575}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f575-1f3fd-200d-2640-fe0f","native":"\u{1F575}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f575-1f3fe-200d-2640-fe0f","native":"\u{1F575}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f575-1f3ff-200d-2640-fe0f","native":"\u{1F575}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"guardsman":{"id":"guardsman","name":"Guard","keywords":["guardsman","protect"],"skins":[{"unified":"1f482","native":"\u{1F482}"},{"unified":"1f482-1f3fb","native":"\u{1F482}\u{1F3FB}"},{"unified":"1f482-1f3fc","native":"\u{1F482}\u{1F3FC}"},{"unified":"1f482-1f3fd","native":"\u{1F482}\u{1F3FD}"},{"unified":"1f482-1f3fe","native":"\u{1F482}\u{1F3FE}"},{"unified":"1f482-1f3ff","native":"\u{1F482}\u{1F3FF}"}],"version":1},"male-guard":{"id":"male-guard","name":"Man Guard","keywords":["male","uk","gb","british","guy","royal"],"skins":[{"unified":"1f482-200d-2642-fe0f","native":"\u{1F482}\u200D\u2642\uFE0F"},{"unified":"1f482-1f3fb-200d-2642-fe0f","native":"\u{1F482}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f482-1f3fc-200d-2642-fe0f","native":"\u{1F482}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f482-1f3fd-200d-2642-fe0f","native":"\u{1F482}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f482-1f3fe-200d-2642-fe0f","native":"\u{1F482}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f482-1f3ff-200d-2642-fe0f","native":"\u{1F482}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"female-guard":{"id":"female-guard","name":"Woman Guard","keywords":["female","uk","gb","british","royal"],"skins":[{"unified":"1f482-200d-2640-fe0f","native":"\u{1F482}\u200D\u2640\uFE0F"},{"unified":"1f482-1f3fb-200d-2640-fe0f","native":"\u{1F482}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f482-1f3fc-200d-2640-fe0f","native":"\u{1F482}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f482-1f3fd-200d-2640-fe0f","native":"\u{1F482}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f482-1f3fe-200d-2640-fe0f","native":"\u{1F482}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f482-1f3ff-200d-2640-fe0f","native":"\u{1F482}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"ninja":{"id":"ninja","name":"Ninja","keywords":["ninjutsu","skills","japanese"],"skins":[{"unified":"1f977","native":"\u{1F977}"},{"unified":"1f977-1f3fb","native":"\u{1F977}\u{1F3FB}"},{"unified":"1f977-1f3fc","native":"\u{1F977}\u{1F3FC}"},{"unified":"1f977-1f3fd","native":"\u{1F977}\u{1F3FD}"},{"unified":"1f977-1f3fe","native":"\u{1F977}\u{1F3FE}"},{"unified":"1f977-1f3ff","native":"\u{1F977}\u{1F3FF}"}],"version":13},"construction_worker":{"id":"construction_worker","name":"Construction Worker","keywords":["labor","build"],"skins":[{"unified":"1f477","native":"\u{1F477}"},{"unified":"1f477-1f3fb","native":"\u{1F477}\u{1F3FB}"},{"unified":"1f477-1f3fc","native":"\u{1F477}\u{1F3FC}"},{"unified":"1f477-1f3fd","native":"\u{1F477}\u{1F3FD}"},{"unified":"1f477-1f3fe","native":"\u{1F477}\u{1F3FE}"},{"unified":"1f477-1f3ff","native":"\u{1F477}\u{1F3FF}"}],"version":1},"male-construction-worker":{"id":"male-construction-worker","name":"Man Construction Worker","keywords":["male","construction-worker","human","wip","guy","build","labor"],"skins":[{"unified":"1f477-200d-2642-fe0f","native":"\u{1F477}\u200D\u2642\uFE0F"},{"unified":"1f477-1f3fb-200d-2642-fe0f","native":"\u{1F477}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f477-1f3fc-200d-2642-fe0f","native":"\u{1F477}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f477-1f3fd-200d-2642-fe0f","native":"\u{1F477}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f477-1f3fe-200d-2642-fe0f","native":"\u{1F477}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f477-1f3ff-200d-2642-fe0f","native":"\u{1F477}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"female-construction-worker":{"id":"female-construction-worker","name":"Woman Construction Worker","keywords":["female","construction-worker","human","wip","build","labor"],"skins":[{"unified":"1f477-200d-2640-fe0f","native":"\u{1F477}\u200D\u2640\uFE0F"},{"unified":"1f477-1f3fb-200d-2640-fe0f","native":"\u{1F477}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f477-1f3fc-200d-2640-fe0f","native":"\u{1F477}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f477-1f3fd-200d-2640-fe0f","native":"\u{1F477}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f477-1f3fe-200d-2640-fe0f","native":"\u{1F477}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f477-1f3ff-200d-2640-fe0f","native":"\u{1F477}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"person_with_crown":{"id":"person_with_crown","name":"Person with Crown","keywords":["royalty","power"],"skins":[{"unified":"1fac5","native":"\u{1FAC5}"},{"unified":"1fac5-1f3fb","native":"\u{1FAC5}\u{1F3FB}"},{"unified":"1fac5-1f3fc","native":"\u{1FAC5}\u{1F3FC}"},{"unified":"1fac5-1f3fd","native":"\u{1FAC5}\u{1F3FD}"},{"unified":"1fac5-1f3fe","native":"\u{1FAC5}\u{1F3FE}"},{"unified":"1fac5-1f3ff","native":"\u{1FAC5}\u{1F3FF}"}],"version":14},"prince":{"id":"prince","name":"Prince","keywords":["boy","man","male","crown","royal","king"],"skins":[{"unified":"1f934","native":"\u{1F934}"},{"unified":"1f934-1f3fb","native":"\u{1F934}\u{1F3FB}"},{"unified":"1f934-1f3fc","native":"\u{1F934}\u{1F3FC}"},{"unified":"1f934-1f3fd","native":"\u{1F934}\u{1F3FD}"},{"unified":"1f934-1f3fe","native":"\u{1F934}\u{1F3FE}"},{"unified":"1f934-1f3ff","native":"\u{1F934}\u{1F3FF}"}],"version":3},"princess":{"id":"princess","name":"Princess","keywords":["girl","woman","female","blond","crown","royal","queen"],"skins":[{"unified":"1f478","native":"\u{1F478}"},{"unified":"1f478-1f3fb","native":"\u{1F478}\u{1F3FB}"},{"unified":"1f478-1f3fc","native":"\u{1F478}\u{1F3FC}"},{"unified":"1f478-1f3fd","native":"\u{1F478}\u{1F3FD}"},{"unified":"1f478-1f3fe","native":"\u{1F478}\u{1F3FE}"},{"unified":"1f478-1f3ff","native":"\u{1F478}\u{1F3FF}"}],"version":1},"man_with_turban":{"id":"man_with_turban","name":"Man with Turban","keywords":["person","wearing","headdress"],"skins":[{"unified":"1f473","native":"\u{1F473}"},{"unified":"1f473-1f3fb","native":"\u{1F473}\u{1F3FB}"},{"unified":"1f473-1f3fc","native":"\u{1F473}\u{1F3FC}"},{"unified":"1f473-1f3fd","native":"\u{1F473}\u{1F3FD}"},{"unified":"1f473-1f3fe","native":"\u{1F473}\u{1F3FE}"},{"unified":"1f473-1f3ff","native":"\u{1F473}\u{1F3FF}"}],"version":1},"man-wearing-turban":{"id":"man-wearing-turban","name":"Man Wearing Turban","keywords":["wearing-turban","male","indian","hinduism","arabs"],"skins":[{"unified":"1f473-200d-2642-fe0f","native":"\u{1F473}\u200D\u2642\uFE0F"},{"unified":"1f473-1f3fb-200d-2642-fe0f","native":"\u{1F473}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f473-1f3fc-200d-2642-fe0f","native":"\u{1F473}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f473-1f3fd-200d-2642-fe0f","native":"\u{1F473}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f473-1f3fe-200d-2642-fe0f","native":"\u{1F473}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f473-1f3ff-200d-2642-fe0f","native":"\u{1F473}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-wearing-turban":{"id":"woman-wearing-turban","name":"Woman Wearing Turban","keywords":["wearing-turban","female","indian","hinduism","arabs"],"skins":[{"unified":"1f473-200d-2640-fe0f","native":"\u{1F473}\u200D\u2640\uFE0F"},{"unified":"1f473-1f3fb-200d-2640-fe0f","native":"\u{1F473}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f473-1f3fc-200d-2640-fe0f","native":"\u{1F473}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f473-1f3fd-200d-2640-fe0f","native":"\u{1F473}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f473-1f3fe-200d-2640-fe0f","native":"\u{1F473}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f473-1f3ff-200d-2640-fe0f","native":"\u{1F473}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"man_with_gua_pi_mao":{"id":"man_with_gua_pi_mao","name":"Man with Gua Pi Mao","keywords":["skullcap","male","boy","chinese"],"skins":[{"unified":"1f472","native":"\u{1F472}"},{"unified":"1f472-1f3fb","native":"\u{1F472}\u{1F3FB}"},{"unified":"1f472-1f3fc","native":"\u{1F472}\u{1F3FC}"},{"unified":"1f472-1f3fd","native":"\u{1F472}\u{1F3FD}"},{"unified":"1f472-1f3fe","native":"\u{1F472}\u{1F3FE}"},{"unified":"1f472-1f3ff","native":"\u{1F472}\u{1F3FF}"}],"version":1},"person_with_headscarf":{"id":"person_with_headscarf","name":"Woman with Headscarf","keywords":["person","female","hijab","mantilla","tichel"],"skins":[{"unified":"1f9d5","native":"\u{1F9D5}"},{"unified":"1f9d5-1f3fb","native":"\u{1F9D5}\u{1F3FB}"},{"unified":"1f9d5-1f3fc","native":"\u{1F9D5}\u{1F3FC}"},{"unified":"1f9d5-1f3fd","native":"\u{1F9D5}\u{1F3FD}"},{"unified":"1f9d5-1f3fe","native":"\u{1F9D5}\u{1F3FE}"},{"unified":"1f9d5-1f3ff","native":"\u{1F9D5}\u{1F3FF}"}],"version":5},"person_in_tuxedo":{"id":"person_in_tuxedo","name":"Man in Tuxedo","keywords":["person","couple","marriage","wedding","groom"],"skins":[{"unified":"1f935","native":"\u{1F935}"},{"unified":"1f935-1f3fb","native":"\u{1F935}\u{1F3FB}"},{"unified":"1f935-1f3fc","native":"\u{1F935}\u{1F3FC}"},{"unified":"1f935-1f3fd","native":"\u{1F935}\u{1F3FD}"},{"unified":"1f935-1f3fe","native":"\u{1F935}\u{1F3FE}"},{"unified":"1f935-1f3ff","native":"\u{1F935}\u{1F3FF}"}],"version":3},"man_in_tuxedo":{"id":"man_in_tuxedo","name":"Man in Tuxedo","keywords":["formal","fashion"],"skins":[{"unified":"1f935-200d-2642-fe0f","native":"\u{1F935}\u200D\u2642\uFE0F"},{"unified":"1f935-1f3fb-200d-2642-fe0f","native":"\u{1F935}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f935-1f3fc-200d-2642-fe0f","native":"\u{1F935}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f935-1f3fd-200d-2642-fe0f","native":"\u{1F935}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f935-1f3fe-200d-2642-fe0f","native":"\u{1F935}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f935-1f3ff-200d-2642-fe0f","native":"\u{1F935}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":13},"woman_in_tuxedo":{"id":"woman_in_tuxedo","name":"Woman in Tuxedo","keywords":["formal","fashion"],"skins":[{"unified":"1f935-200d-2640-fe0f","native":"\u{1F935}\u200D\u2640\uFE0F"},{"unified":"1f935-1f3fb-200d-2640-fe0f","native":"\u{1F935}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f935-1f3fc-200d-2640-fe0f","native":"\u{1F935}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f935-1f3fd-200d-2640-fe0f","native":"\u{1F935}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f935-1f3fe-200d-2640-fe0f","native":"\u{1F935}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f935-1f3ff-200d-2640-fe0f","native":"\u{1F935}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":13},"bride_with_veil":{"id":"bride_with_veil","name":"Bride with Veil","keywords":["couple","marriage","wedding","woman"],"skins":[{"unified":"1f470","native":"\u{1F470}"},{"unified":"1f470-1f3fb","native":"\u{1F470}\u{1F3FB}"},{"unified":"1f470-1f3fc","native":"\u{1F470}\u{1F3FC}"},{"unified":"1f470-1f3fd","native":"\u{1F470}\u{1F3FD}"},{"unified":"1f470-1f3fe","native":"\u{1F470}\u{1F3FE}"},{"unified":"1f470-1f3ff","native":"\u{1F470}\u{1F3FF}"}],"version":1},"man_with_veil":{"id":"man_with_veil","name":"Man with Veil","keywords":["wedding","marriage"],"skins":[{"unified":"1f470-200d-2642-fe0f","native":"\u{1F470}\u200D\u2642\uFE0F"},{"unified":"1f470-1f3fb-200d-2642-fe0f","native":"\u{1F470}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f470-1f3fc-200d-2642-fe0f","native":"\u{1F470}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f470-1f3fd-200d-2642-fe0f","native":"\u{1F470}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f470-1f3fe-200d-2642-fe0f","native":"\u{1F470}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f470-1f3ff-200d-2642-fe0f","native":"\u{1F470}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":13},"woman_with_veil":{"id":"woman_with_veil","name":"Woman with Veil","keywords":["wedding","marriage"],"skins":[{"unified":"1f470-200d-2640-fe0f","native":"\u{1F470}\u200D\u2640\uFE0F"},{"unified":"1f470-1f3fb-200d-2640-fe0f","native":"\u{1F470}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f470-1f3fc-200d-2640-fe0f","native":"\u{1F470}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f470-1f3fd-200d-2640-fe0f","native":"\u{1F470}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f470-1f3fe-200d-2640-fe0f","native":"\u{1F470}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f470-1f3ff-200d-2640-fe0f","native":"\u{1F470}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":13},"pregnant_woman":{"id":"pregnant_woman","name":"Pregnant Woman","keywords":["baby"],"skins":[{"unified":"1f930","native":"\u{1F930}"},{"unified":"1f930-1f3fb","native":"\u{1F930}\u{1F3FB}"},{"unified":"1f930-1f3fc","native":"\u{1F930}\u{1F3FC}"},{"unified":"1f930-1f3fd","native":"\u{1F930}\u{1F3FD}"},{"unified":"1f930-1f3fe","native":"\u{1F930}\u{1F3FE}"},{"unified":"1f930-1f3ff","native":"\u{1F930}\u{1F3FF}"}],"version":3},"pregnant_man":{"id":"pregnant_man","name":"Pregnant Man","keywords":["baby","belly"],"skins":[{"unified":"1fac3","native":"\u{1FAC3}"},{"unified":"1fac3-1f3fb","native":"\u{1FAC3}\u{1F3FB}"},{"unified":"1fac3-1f3fc","native":"\u{1FAC3}\u{1F3FC}"},{"unified":"1fac3-1f3fd","native":"\u{1FAC3}\u{1F3FD}"},{"unified":"1fac3-1f3fe","native":"\u{1FAC3}\u{1F3FE}"},{"unified":"1fac3-1f3ff","native":"\u{1FAC3}\u{1F3FF}"}],"version":14},"pregnant_person":{"id":"pregnant_person","name":"Pregnant Person","keywords":["baby","belly"],"skins":[{"unified":"1fac4","native":"\u{1FAC4}"},{"unified":"1fac4-1f3fb","native":"\u{1FAC4}\u{1F3FB}"},{"unified":"1fac4-1f3fc","native":"\u{1FAC4}\u{1F3FC}"},{"unified":"1fac4-1f3fd","native":"\u{1FAC4}\u{1F3FD}"},{"unified":"1fac4-1f3fe","native":"\u{1FAC4}\u{1F3FE}"},{"unified":"1fac4-1f3ff","native":"\u{1FAC4}\u{1F3FF}"}],"version":14},"breast-feeding":{"id":"breast-feeding","name":"Breast-Feeding","keywords":["breast","feeding","nursing","baby"],"skins":[{"unified":"1f931","native":"\u{1F931}"},{"unified":"1f931-1f3fb","native":"\u{1F931}\u{1F3FB}"},{"unified":"1f931-1f3fc","native":"\u{1F931}\u{1F3FC}"},{"unified":"1f931-1f3fd","native":"\u{1F931}\u{1F3FD}"},{"unified":"1f931-1f3fe","native":"\u{1F931}\u{1F3FE}"},{"unified":"1f931-1f3ff","native":"\u{1F931}\u{1F3FF}"}],"version":5},"woman_feeding_baby":{"id":"woman_feeding_baby","name":"Woman Feeding Baby","keywords":["birth","food"],"skins":[{"unified":"1f469-200d-1f37c","native":"\u{1F469}\u200D\u{1F37C}"},{"unified":"1f469-1f3fb-200d-1f37c","native":"\u{1F469}\u{1F3FB}\u200D\u{1F37C}"},{"unified":"1f469-1f3fc-200d-1f37c","native":"\u{1F469}\u{1F3FC}\u200D\u{1F37C}"},{"unified":"1f469-1f3fd-200d-1f37c","native":"\u{1F469}\u{1F3FD}\u200D\u{1F37C}"},{"unified":"1f469-1f3fe-200d-1f37c","native":"\u{1F469}\u{1F3FE}\u200D\u{1F37C}"},{"unified":"1f469-1f3ff-200d-1f37c","native":"\u{1F469}\u{1F3FF}\u200D\u{1F37C}"}],"version":13},"man_feeding_baby":{"id":"man_feeding_baby","name":"Man Feeding Baby","keywords":["birth","food"],"skins":[{"unified":"1f468-200d-1f37c","native":"\u{1F468}\u200D\u{1F37C}"},{"unified":"1f468-1f3fb-200d-1f37c","native":"\u{1F468}\u{1F3FB}\u200D\u{1F37C}"},{"unified":"1f468-1f3fc-200d-1f37c","native":"\u{1F468}\u{1F3FC}\u200D\u{1F37C}"},{"unified":"1f468-1f3fd-200d-1f37c","native":"\u{1F468}\u{1F3FD}\u200D\u{1F37C}"},{"unified":"1f468-1f3fe-200d-1f37c","native":"\u{1F468}\u{1F3FE}\u200D\u{1F37C}"},{"unified":"1f468-1f3ff-200d-1f37c","native":"\u{1F468}\u{1F3FF}\u200D\u{1F37C}"}],"version":13},"person_feeding_baby":{"id":"person_feeding_baby","name":"Person Feeding Baby","keywords":["birth","food"],"skins":[{"unified":"1f9d1-200d-1f37c","native":"\u{1F9D1}\u200D\u{1F37C}"},{"unified":"1f9d1-1f3fb-200d-1f37c","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F37C}"},{"unified":"1f9d1-1f3fc-200d-1f37c","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F37C}"},{"unified":"1f9d1-1f3fd-200d-1f37c","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F37C}"},{"unified":"1f9d1-1f3fe-200d-1f37c","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F37C}"},{"unified":"1f9d1-1f3ff-200d-1f37c","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F37C}"}],"version":13},"angel":{"id":"angel","name":"Baby Angel","keywords":["heaven","wings","halo"],"skins":[{"unified":"1f47c","native":"\u{1F47C}"},{"unified":"1f47c-1f3fb","native":"\u{1F47C}\u{1F3FB}"},{"unified":"1f47c-1f3fc","native":"\u{1F47C}\u{1F3FC}"},{"unified":"1f47c-1f3fd","native":"\u{1F47C}\u{1F3FD}"},{"unified":"1f47c-1f3fe","native":"\u{1F47C}\u{1F3FE}"},{"unified":"1f47c-1f3ff","native":"\u{1F47C}\u{1F3FF}"}],"version":1},"santa":{"id":"santa","name":"Santa Claus","keywords":["festival","man","male","xmas","father","christmas"],"skins":[{"unified":"1f385","native":"\u{1F385}"},{"unified":"1f385-1f3fb","native":"\u{1F385}\u{1F3FB}"},{"unified":"1f385-1f3fc","native":"\u{1F385}\u{1F3FC}"},{"unified":"1f385-1f3fd","native":"\u{1F385}\u{1F3FD}"},{"unified":"1f385-1f3fe","native":"\u{1F385}\u{1F3FE}"},{"unified":"1f385-1f3ff","native":"\u{1F385}\u{1F3FF}"}],"version":1},"mrs_claus":{"id":"mrs_claus","name":"Mrs. Claus","keywords":["mrs","mother","christmas","woman","female","xmas"],"skins":[{"unified":"1f936","native":"\u{1F936}"},{"unified":"1f936-1f3fb","native":"\u{1F936}\u{1F3FB}"},{"unified":"1f936-1f3fc","native":"\u{1F936}\u{1F3FC}"},{"unified":"1f936-1f3fd","native":"\u{1F936}\u{1F3FD}"},{"unified":"1f936-1f3fe","native":"\u{1F936}\u{1F3FE}"},{"unified":"1f936-1f3ff","native":"\u{1F936}\u{1F3FF}"}],"version":3},"mx_claus":{"id":"mx_claus","name":"Mx Claus","keywords":["christmas"],"skins":[{"unified":"1f9d1-200d-1f384","native":"\u{1F9D1}\u200D\u{1F384}"},{"unified":"1f9d1-1f3fb-200d-1f384","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F384}"},{"unified":"1f9d1-1f3fc-200d-1f384","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F384}"},{"unified":"1f9d1-1f3fd-200d-1f384","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F384}"},{"unified":"1f9d1-1f3fe-200d-1f384","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F384}"},{"unified":"1f9d1-1f3ff-200d-1f384","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F384}"}],"version":13},"superhero":{"id":"superhero","name":"Superhero","keywords":["marvel"],"skins":[{"unified":"1f9b8","native":"\u{1F9B8}"},{"unified":"1f9b8-1f3fb","native":"\u{1F9B8}\u{1F3FB}"},{"unified":"1f9b8-1f3fc","native":"\u{1F9B8}\u{1F3FC}"},{"unified":"1f9b8-1f3fd","native":"\u{1F9B8}\u{1F3FD}"},{"unified":"1f9b8-1f3fe","native":"\u{1F9B8}\u{1F3FE}"},{"unified":"1f9b8-1f3ff","native":"\u{1F9B8}\u{1F3FF}"}],"version":11},"male_superhero":{"id":"male_superhero","name":"Man Superhero","keywords":["male","good","hero","superpowers"],"skins":[{"unified":"1f9b8-200d-2642-fe0f","native":"\u{1F9B8}\u200D\u2642\uFE0F"},{"unified":"1f9b8-1f3fb-200d-2642-fe0f","native":"\u{1F9B8}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9b8-1f3fc-200d-2642-fe0f","native":"\u{1F9B8}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9b8-1f3fd-200d-2642-fe0f","native":"\u{1F9B8}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9b8-1f3fe-200d-2642-fe0f","native":"\u{1F9B8}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9b8-1f3ff-200d-2642-fe0f","native":"\u{1F9B8}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":11},"female_superhero":{"id":"female_superhero","name":"Woman Superhero","keywords":["female","good","heroine","superpowers"],"skins":[{"unified":"1f9b8-200d-2640-fe0f","native":"\u{1F9B8}\u200D\u2640\uFE0F"},{"unified":"1f9b8-1f3fb-200d-2640-fe0f","native":"\u{1F9B8}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9b8-1f3fc-200d-2640-fe0f","native":"\u{1F9B8}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9b8-1f3fd-200d-2640-fe0f","native":"\u{1F9B8}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9b8-1f3fe-200d-2640-fe0f","native":"\u{1F9B8}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9b8-1f3ff-200d-2640-fe0f","native":"\u{1F9B8}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":11},"supervillain":{"id":"supervillain","name":"Supervillain","keywords":["marvel"],"skins":[{"unified":"1f9b9","native":"\u{1F9B9}"},{"unified":"1f9b9-1f3fb","native":"\u{1F9B9}\u{1F3FB}"},{"unified":"1f9b9-1f3fc","native":"\u{1F9B9}\u{1F3FC}"},{"unified":"1f9b9-1f3fd","native":"\u{1F9B9}\u{1F3FD}"},{"unified":"1f9b9-1f3fe","native":"\u{1F9B9}\u{1F3FE}"},{"unified":"1f9b9-1f3ff","native":"\u{1F9B9}\u{1F3FF}"}],"version":11},"male_supervillain":{"id":"male_supervillain","name":"Man Supervillain","keywords":["male","evil","bad","criminal","hero","superpowers"],"skins":[{"unified":"1f9b9-200d-2642-fe0f","native":"\u{1F9B9}\u200D\u2642\uFE0F"},{"unified":"1f9b9-1f3fb-200d-2642-fe0f","native":"\u{1F9B9}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9b9-1f3fc-200d-2642-fe0f","native":"\u{1F9B9}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9b9-1f3fd-200d-2642-fe0f","native":"\u{1F9B9}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9b9-1f3fe-200d-2642-fe0f","native":"\u{1F9B9}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9b9-1f3ff-200d-2642-fe0f","native":"\u{1F9B9}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":11},"female_supervillain":{"id":"female_supervillain","name":"Woman Supervillain","keywords":["female","evil","bad","criminal","heroine","superpowers"],"skins":[{"unified":"1f9b9-200d-2640-fe0f","native":"\u{1F9B9}\u200D\u2640\uFE0F"},{"unified":"1f9b9-1f3fb-200d-2640-fe0f","native":"\u{1F9B9}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9b9-1f3fc-200d-2640-fe0f","native":"\u{1F9B9}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9b9-1f3fd-200d-2640-fe0f","native":"\u{1F9B9}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9b9-1f3fe-200d-2640-fe0f","native":"\u{1F9B9}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9b9-1f3ff-200d-2640-fe0f","native":"\u{1F9B9}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":11},"mage":{"id":"mage","name":"Mage","keywords":["magic"],"skins":[{"unified":"1f9d9","native":"\u{1F9D9}"},{"unified":"1f9d9-1f3fb","native":"\u{1F9D9}\u{1F3FB}"},{"unified":"1f9d9-1f3fc","native":"\u{1F9D9}\u{1F3FC}"},{"unified":"1f9d9-1f3fd","native":"\u{1F9D9}\u{1F3FD}"},{"unified":"1f9d9-1f3fe","native":"\u{1F9D9}\u{1F3FE}"},{"unified":"1f9d9-1f3ff","native":"\u{1F9D9}\u{1F3FF}"}],"version":5},"male_mage":{"id":"male_mage","name":"Man Mage","keywords":["male","sorcerer"],"skins":[{"unified":"1f9d9-200d-2642-fe0f","native":"\u{1F9D9}\u200D\u2642\uFE0F"},{"unified":"1f9d9-1f3fb-200d-2642-fe0f","native":"\u{1F9D9}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9d9-1f3fc-200d-2642-fe0f","native":"\u{1F9D9}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9d9-1f3fd-200d-2642-fe0f","native":"\u{1F9D9}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9d9-1f3fe-200d-2642-fe0f","native":"\u{1F9D9}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9d9-1f3ff-200d-2642-fe0f","native":"\u{1F9D9}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":5},"female_mage":{"id":"female_mage","name":"Woman Mage","keywords":["female","witch"],"skins":[{"unified":"1f9d9-200d-2640-fe0f","native":"\u{1F9D9}\u200D\u2640\uFE0F"},{"unified":"1f9d9-1f3fb-200d-2640-fe0f","native":"\u{1F9D9}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9d9-1f3fc-200d-2640-fe0f","native":"\u{1F9D9}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9d9-1f3fd-200d-2640-fe0f","native":"\u{1F9D9}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9d9-1f3fe-200d-2640-fe0f","native":"\u{1F9D9}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9d9-1f3ff-200d-2640-fe0f","native":"\u{1F9D9}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":5},"fairy":{"id":"fairy","name":"Fairy","keywords":["wings","magical"],"skins":[{"unified":"1f9da","native":"\u{1F9DA}"},{"unified":"1f9da-1f3fb","native":"\u{1F9DA}\u{1F3FB}"},{"unified":"1f9da-1f3fc","native":"\u{1F9DA}\u{1F3FC}"},{"unified":"1f9da-1f3fd","native":"\u{1F9DA}\u{1F3FD}"},{"unified":"1f9da-1f3fe","native":"\u{1F9DA}\u{1F3FE}"},{"unified":"1f9da-1f3ff","native":"\u{1F9DA}\u{1F3FF}"}],"version":5},"male_fairy":{"id":"male_fairy","name":"Man Fairy","keywords":["male"],"skins":[{"unified":"1f9da-200d-2642-fe0f","native":"\u{1F9DA}\u200D\u2642\uFE0F"},{"unified":"1f9da-1f3fb-200d-2642-fe0f","native":"\u{1F9DA}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9da-1f3fc-200d-2642-fe0f","native":"\u{1F9DA}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9da-1f3fd-200d-2642-fe0f","native":"\u{1F9DA}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9da-1f3fe-200d-2642-fe0f","native":"\u{1F9DA}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9da-1f3ff-200d-2642-fe0f","native":"\u{1F9DA}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":5},"female_fairy":{"id":"female_fairy","name":"Woman Fairy","keywords":["female"],"skins":[{"unified":"1f9da-200d-2640-fe0f","native":"\u{1F9DA}\u200D\u2640\uFE0F"},{"unified":"1f9da-1f3fb-200d-2640-fe0f","native":"\u{1F9DA}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9da-1f3fc-200d-2640-fe0f","native":"\u{1F9DA}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9da-1f3fd-200d-2640-fe0f","native":"\u{1F9DA}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9da-1f3fe-200d-2640-fe0f","native":"\u{1F9DA}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9da-1f3ff-200d-2640-fe0f","native":"\u{1F9DA}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":5},"vampire":{"id":"vampire","name":"Vampire","keywords":["blood","twilight"],"skins":[{"unified":"1f9db","native":"\u{1F9DB}"},{"unified":"1f9db-1f3fb","native":"\u{1F9DB}\u{1F3FB}"},{"unified":"1f9db-1f3fc","native":"\u{1F9DB}\u{1F3FC}"},{"unified":"1f9db-1f3fd","native":"\u{1F9DB}\u{1F3FD}"},{"unified":"1f9db-1f3fe","native":"\u{1F9DB}\u{1F3FE}"},{"unified":"1f9db-1f3ff","native":"\u{1F9DB}\u{1F3FF}"}],"version":5},"male_vampire":{"id":"male_vampire","name":"Man Vampire","keywords":["male","dracula"],"skins":[{"unified":"1f9db-200d-2642-fe0f","native":"\u{1F9DB}\u200D\u2642\uFE0F"},{"unified":"1f9db-1f3fb-200d-2642-fe0f","native":"\u{1F9DB}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9db-1f3fc-200d-2642-fe0f","native":"\u{1F9DB}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9db-1f3fd-200d-2642-fe0f","native":"\u{1F9DB}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9db-1f3fe-200d-2642-fe0f","native":"\u{1F9DB}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9db-1f3ff-200d-2642-fe0f","native":"\u{1F9DB}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":5},"female_vampire":{"id":"female_vampire","name":"Woman Vampire","keywords":["female"],"skins":[{"unified":"1f9db-200d-2640-fe0f","native":"\u{1F9DB}\u200D\u2640\uFE0F"},{"unified":"1f9db-1f3fb-200d-2640-fe0f","native":"\u{1F9DB}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9db-1f3fc-200d-2640-fe0f","native":"\u{1F9DB}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9db-1f3fd-200d-2640-fe0f","native":"\u{1F9DB}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9db-1f3fe-200d-2640-fe0f","native":"\u{1F9DB}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9db-1f3ff-200d-2640-fe0f","native":"\u{1F9DB}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":5},"merperson":{"id":"merperson","name":"Merperson","keywords":["sea"],"skins":[{"unified":"1f9dc","native":"\u{1F9DC}"},{"unified":"1f9dc-1f3fb","native":"\u{1F9DC}\u{1F3FB}"},{"unified":"1f9dc-1f3fc","native":"\u{1F9DC}\u{1F3FC}"},{"unified":"1f9dc-1f3fd","native":"\u{1F9DC}\u{1F3FD}"},{"unified":"1f9dc-1f3fe","native":"\u{1F9DC}\u{1F3FE}"},{"unified":"1f9dc-1f3ff","native":"\u{1F9DC}\u{1F3FF}"}],"version":5},"merman":{"id":"merman","name":"Merman","keywords":["man","male","triton"],"skins":[{"unified":"1f9dc-200d-2642-fe0f","native":"\u{1F9DC}\u200D\u2642\uFE0F"},{"unified":"1f9dc-1f3fb-200d-2642-fe0f","native":"\u{1F9DC}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9dc-1f3fc-200d-2642-fe0f","native":"\u{1F9DC}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9dc-1f3fd-200d-2642-fe0f","native":"\u{1F9DC}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9dc-1f3fe-200d-2642-fe0f","native":"\u{1F9DC}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9dc-1f3ff-200d-2642-fe0f","native":"\u{1F9DC}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":5},"mermaid":{"id":"mermaid","name":"Mermaid","keywords":["woman","female","merwoman","ariel"],"skins":[{"unified":"1f9dc-200d-2640-fe0f","native":"\u{1F9DC}\u200D\u2640\uFE0F"},{"unified":"1f9dc-1f3fb-200d-2640-fe0f","native":"\u{1F9DC}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9dc-1f3fc-200d-2640-fe0f","native":"\u{1F9DC}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9dc-1f3fd-200d-2640-fe0f","native":"\u{1F9DC}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9dc-1f3fe-200d-2640-fe0f","native":"\u{1F9DC}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9dc-1f3ff-200d-2640-fe0f","native":"\u{1F9DC}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":5},"elf":{"id":"elf","name":"Elf","keywords":["magical"],"skins":[{"unified":"1f9dd","native":"\u{1F9DD}"},{"unified":"1f9dd-1f3fb","native":"\u{1F9DD}\u{1F3FB}"},{"unified":"1f9dd-1f3fc","native":"\u{1F9DD}\u{1F3FC}"},{"unified":"1f9dd-1f3fd","native":"\u{1F9DD}\u{1F3FD}"},{"unified":"1f9dd-1f3fe","native":"\u{1F9DD}\u{1F3FE}"},{"unified":"1f9dd-1f3ff","native":"\u{1F9DD}\u{1F3FF}"}],"version":5},"male_elf":{"id":"male_elf","name":"Man Elf","keywords":["male"],"skins":[{"unified":"1f9dd-200d-2642-fe0f","native":"\u{1F9DD}\u200D\u2642\uFE0F"},{"unified":"1f9dd-1f3fb-200d-2642-fe0f","native":"\u{1F9DD}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9dd-1f3fc-200d-2642-fe0f","native":"\u{1F9DD}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9dd-1f3fd-200d-2642-fe0f","native":"\u{1F9DD}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9dd-1f3fe-200d-2642-fe0f","native":"\u{1F9DD}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9dd-1f3ff-200d-2642-fe0f","native":"\u{1F9DD}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":5},"female_elf":{"id":"female_elf","name":"Woman Elf","keywords":["female"],"skins":[{"unified":"1f9dd-200d-2640-fe0f","native":"\u{1F9DD}\u200D\u2640\uFE0F"},{"unified":"1f9dd-1f3fb-200d-2640-fe0f","native":"\u{1F9DD}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9dd-1f3fc-200d-2640-fe0f","native":"\u{1F9DD}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9dd-1f3fd-200d-2640-fe0f","native":"\u{1F9DD}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9dd-1f3fe-200d-2640-fe0f","native":"\u{1F9DD}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9dd-1f3ff-200d-2640-fe0f","native":"\u{1F9DD}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":5},"genie":{"id":"genie","name":"Genie","keywords":["magical","wishes"],"skins":[{"unified":"1f9de","native":"\u{1F9DE}"}],"version":5},"male_genie":{"id":"male_genie","name":"Man Genie","keywords":["male"],"skins":[{"unified":"1f9de-200d-2642-fe0f","native":"\u{1F9DE}\u200D\u2642\uFE0F"}],"version":5},"female_genie":{"id":"female_genie","name":"Woman Genie","keywords":["female"],"skins":[{"unified":"1f9de-200d-2640-fe0f","native":"\u{1F9DE}\u200D\u2640\uFE0F"}],"version":5},"zombie":{"id":"zombie","name":"Zombie","keywords":["dead"],"skins":[{"unified":"1f9df","native":"\u{1F9DF}"}],"version":5},"male_zombie":{"id":"male_zombie","name":"Man Zombie","keywords":["male","dracula","undead","walking","dead"],"skins":[{"unified":"1f9df-200d-2642-fe0f","native":"\u{1F9DF}\u200D\u2642\uFE0F"}],"version":5},"female_zombie":{"id":"female_zombie","name":"Woman Zombie","keywords":["female","undead","walking","dead"],"skins":[{"unified":"1f9df-200d-2640-fe0f","native":"\u{1F9DF}\u200D\u2640\uFE0F"}],"version":5},"troll":{"id":"troll","name":"Troll","keywords":["mystical","monster"],"skins":[{"unified":"1f9cc","native":"\u{1F9CC}"}],"version":14},"massage":{"id":"massage","name":"Face Massage","keywords":["person","getting","relax"],"skins":[{"unified":"1f486","native":"\u{1F486}"},{"unified":"1f486-1f3fb","native":"\u{1F486}\u{1F3FB}"},{"unified":"1f486-1f3fc","native":"\u{1F486}\u{1F3FC}"},{"unified":"1f486-1f3fd","native":"\u{1F486}\u{1F3FD}"},{"unified":"1f486-1f3fe","native":"\u{1F486}\u{1F3FE}"},{"unified":"1f486-1f3ff","native":"\u{1F486}\u{1F3FF}"}],"version":1},"man-getting-massage":{"id":"man-getting-massage","name":"Man Getting Massage","keywords":["getting-massage","male","boy","head"],"skins":[{"unified":"1f486-200d-2642-fe0f","native":"\u{1F486}\u200D\u2642\uFE0F"},{"unified":"1f486-1f3fb-200d-2642-fe0f","native":"\u{1F486}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f486-1f3fc-200d-2642-fe0f","native":"\u{1F486}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f486-1f3fd-200d-2642-fe0f","native":"\u{1F486}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f486-1f3fe-200d-2642-fe0f","native":"\u{1F486}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f486-1f3ff-200d-2642-fe0f","native":"\u{1F486}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-getting-massage":{"id":"woman-getting-massage","name":"Woman Getting Massage","keywords":["getting-massage","female","girl","head"],"skins":[{"unified":"1f486-200d-2640-fe0f","native":"\u{1F486}\u200D\u2640\uFE0F"},{"unified":"1f486-1f3fb-200d-2640-fe0f","native":"\u{1F486}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f486-1f3fc-200d-2640-fe0f","native":"\u{1F486}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f486-1f3fd-200d-2640-fe0f","native":"\u{1F486}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f486-1f3fe-200d-2640-fe0f","native":"\u{1F486}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f486-1f3ff-200d-2640-fe0f","native":"\u{1F486}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"haircut":{"id":"haircut","name":"Haircut","keywords":["person","getting","hairstyle"],"skins":[{"unified":"1f487","native":"\u{1F487}"},{"unified":"1f487-1f3fb","native":"\u{1F487}\u{1F3FB}"},{"unified":"1f487-1f3fc","native":"\u{1F487}\u{1F3FC}"},{"unified":"1f487-1f3fd","native":"\u{1F487}\u{1F3FD}"},{"unified":"1f487-1f3fe","native":"\u{1F487}\u{1F3FE}"},{"unified":"1f487-1f3ff","native":"\u{1F487}\u{1F3FF}"}],"version":1},"man-getting-haircut":{"id":"man-getting-haircut","name":"Man Getting Haircut","keywords":["getting-haircut","male","boy"],"skins":[{"unified":"1f487-200d-2642-fe0f","native":"\u{1F487}\u200D\u2642\uFE0F"},{"unified":"1f487-1f3fb-200d-2642-fe0f","native":"\u{1F487}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f487-1f3fc-200d-2642-fe0f","native":"\u{1F487}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f487-1f3fd-200d-2642-fe0f","native":"\u{1F487}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f487-1f3fe-200d-2642-fe0f","native":"\u{1F487}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f487-1f3ff-200d-2642-fe0f","native":"\u{1F487}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-getting-haircut":{"id":"woman-getting-haircut","name":"Woman Getting Haircut","keywords":["getting-haircut","female","girl"],"skins":[{"unified":"1f487-200d-2640-fe0f","native":"\u{1F487}\u200D\u2640\uFE0F"},{"unified":"1f487-1f3fb-200d-2640-fe0f","native":"\u{1F487}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f487-1f3fc-200d-2640-fe0f","native":"\u{1F487}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f487-1f3fd-200d-2640-fe0f","native":"\u{1F487}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f487-1f3fe-200d-2640-fe0f","native":"\u{1F487}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f487-1f3ff-200d-2640-fe0f","native":"\u{1F487}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"walking":{"id":"walking","name":"Pedestrian","keywords":["walking","person","move"],"skins":[{"unified":"1f6b6","native":"\u{1F6B6}"},{"unified":"1f6b6-1f3fb","native":"\u{1F6B6}\u{1F3FB}"},{"unified":"1f6b6-1f3fc","native":"\u{1F6B6}\u{1F3FC}"},{"unified":"1f6b6-1f3fd","native":"\u{1F6B6}\u{1F3FD}"},{"unified":"1f6b6-1f3fe","native":"\u{1F6B6}\u{1F3FE}"},{"unified":"1f6b6-1f3ff","native":"\u{1F6B6}\u{1F3FF}"}],"version":1},"man-walking":{"id":"man-walking","name":"Man Walking","keywords":["human","feet","steps"],"skins":[{"unified":"1f6b6-200d-2642-fe0f","native":"\u{1F6B6}\u200D\u2642\uFE0F"},{"unified":"1f6b6-1f3fb-200d-2642-fe0f","native":"\u{1F6B6}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f6b6-1f3fc-200d-2642-fe0f","native":"\u{1F6B6}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f6b6-1f3fd-200d-2642-fe0f","native":"\u{1F6B6}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f6b6-1f3fe-200d-2642-fe0f","native":"\u{1F6B6}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f6b6-1f3ff-200d-2642-fe0f","native":"\u{1F6B6}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-walking":{"id":"woman-walking","name":"Woman Walking","keywords":["human","feet","steps","female"],"skins":[{"unified":"1f6b6-200d-2640-fe0f","native":"\u{1F6B6}\u200D\u2640\uFE0F"},{"unified":"1f6b6-1f3fb-200d-2640-fe0f","native":"\u{1F6B6}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f6b6-1f3fc-200d-2640-fe0f","native":"\u{1F6B6}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f6b6-1f3fd-200d-2640-fe0f","native":"\u{1F6B6}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f6b6-1f3fe-200d-2640-fe0f","native":"\u{1F6B6}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f6b6-1f3ff-200d-2640-fe0f","native":"\u{1F6B6}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"standing_person":{"id":"standing_person","name":"Standing Person","keywords":["still"],"skins":[{"unified":"1f9cd","native":"\u{1F9CD}"},{"unified":"1f9cd-1f3fb","native":"\u{1F9CD}\u{1F3FB}"},{"unified":"1f9cd-1f3fc","native":"\u{1F9CD}\u{1F3FC}"},{"unified":"1f9cd-1f3fd","native":"\u{1F9CD}\u{1F3FD}"},{"unified":"1f9cd-1f3fe","native":"\u{1F9CD}\u{1F3FE}"},{"unified":"1f9cd-1f3ff","native":"\u{1F9CD}\u{1F3FF}"}],"version":12},"man_standing":{"id":"man_standing","name":"Man Standing","keywords":["still"],"skins":[{"unified":"1f9cd-200d-2642-fe0f","native":"\u{1F9CD}\u200D\u2642\uFE0F"},{"unified":"1f9cd-1f3fb-200d-2642-fe0f","native":"\u{1F9CD}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9cd-1f3fc-200d-2642-fe0f","native":"\u{1F9CD}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9cd-1f3fd-200d-2642-fe0f","native":"\u{1F9CD}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9cd-1f3fe-200d-2642-fe0f","native":"\u{1F9CD}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9cd-1f3ff-200d-2642-fe0f","native":"\u{1F9CD}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":12},"woman_standing":{"id":"woman_standing","name":"Woman Standing","keywords":["still"],"skins":[{"unified":"1f9cd-200d-2640-fe0f","native":"\u{1F9CD}\u200D\u2640\uFE0F"},{"unified":"1f9cd-1f3fb-200d-2640-fe0f","native":"\u{1F9CD}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9cd-1f3fc-200d-2640-fe0f","native":"\u{1F9CD}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9cd-1f3fd-200d-2640-fe0f","native":"\u{1F9CD}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9cd-1f3fe-200d-2640-fe0f","native":"\u{1F9CD}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9cd-1f3ff-200d-2640-fe0f","native":"\u{1F9CD}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":12},"kneeling_person":{"id":"kneeling_person","name":"Kneeling Person","keywords":["pray","respectful"],"skins":[{"unified":"1f9ce","native":"\u{1F9CE}"},{"unified":"1f9ce-1f3fb","native":"\u{1F9CE}\u{1F3FB}"},{"unified":"1f9ce-1f3fc","native":"\u{1F9CE}\u{1F3FC}"},{"unified":"1f9ce-1f3fd","native":"\u{1F9CE}\u{1F3FD}"},{"unified":"1f9ce-1f3fe","native":"\u{1F9CE}\u{1F3FE}"},{"unified":"1f9ce-1f3ff","native":"\u{1F9CE}\u{1F3FF}"}],"version":12},"man_kneeling":{"id":"man_kneeling","name":"Man Kneeling","keywords":["pray","respectful"],"skins":[{"unified":"1f9ce-200d-2642-fe0f","native":"\u{1F9CE}\u200D\u2642\uFE0F"},{"unified":"1f9ce-1f3fb-200d-2642-fe0f","native":"\u{1F9CE}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9ce-1f3fc-200d-2642-fe0f","native":"\u{1F9CE}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9ce-1f3fd-200d-2642-fe0f","native":"\u{1F9CE}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9ce-1f3fe-200d-2642-fe0f","native":"\u{1F9CE}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9ce-1f3ff-200d-2642-fe0f","native":"\u{1F9CE}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":12},"woman_kneeling":{"id":"woman_kneeling","name":"Woman Kneeling","keywords":["respectful","pray"],"skins":[{"unified":"1f9ce-200d-2640-fe0f","native":"\u{1F9CE}\u200D\u2640\uFE0F"},{"unified":"1f9ce-1f3fb-200d-2640-fe0f","native":"\u{1F9CE}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9ce-1f3fc-200d-2640-fe0f","native":"\u{1F9CE}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9ce-1f3fd-200d-2640-fe0f","native":"\u{1F9CE}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9ce-1f3fe-200d-2640-fe0f","native":"\u{1F9CE}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9ce-1f3ff-200d-2640-fe0f","native":"\u{1F9CE}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":12},"person_with_probing_cane":{"id":"person_with_probing_cane","name":"Person with White Cane","keywords":["probing","blind"],"skins":[{"unified":"1f9d1-200d-1f9af","native":"\u{1F9D1}\u200D\u{1F9AF}"},{"unified":"1f9d1-1f3fb-200d-1f9af","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F9AF}"},{"unified":"1f9d1-1f3fc-200d-1f9af","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F9AF}"},{"unified":"1f9d1-1f3fd-200d-1f9af","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F9AF}"},{"unified":"1f9d1-1f3fe-200d-1f9af","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F9AF}"},{"unified":"1f9d1-1f3ff-200d-1f9af","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F9AF}"}],"version":12.1},"man_with_probing_cane":{"id":"man_with_probing_cane","name":"Man with White Cane","keywords":["probing","blind"],"skins":[{"unified":"1f468-200d-1f9af","native":"\u{1F468}\u200D\u{1F9AF}"},{"unified":"1f468-1f3fb-200d-1f9af","native":"\u{1F468}\u{1F3FB}\u200D\u{1F9AF}"},{"unified":"1f468-1f3fc-200d-1f9af","native":"\u{1F468}\u{1F3FC}\u200D\u{1F9AF}"},{"unified":"1f468-1f3fd-200d-1f9af","native":"\u{1F468}\u{1F3FD}\u200D\u{1F9AF}"},{"unified":"1f468-1f3fe-200d-1f9af","native":"\u{1F468}\u{1F3FE}\u200D\u{1F9AF}"},{"unified":"1f468-1f3ff-200d-1f9af","native":"\u{1F468}\u{1F3FF}\u200D\u{1F9AF}"}],"version":12},"woman_with_probing_cane":{"id":"woman_with_probing_cane","name":"Woman with White Cane","keywords":["probing","blind"],"skins":[{"unified":"1f469-200d-1f9af","native":"\u{1F469}\u200D\u{1F9AF}"},{"unified":"1f469-1f3fb-200d-1f9af","native":"\u{1F469}\u{1F3FB}\u200D\u{1F9AF}"},{"unified":"1f469-1f3fc-200d-1f9af","native":"\u{1F469}\u{1F3FC}\u200D\u{1F9AF}"},{"unified":"1f469-1f3fd-200d-1f9af","native":"\u{1F469}\u{1F3FD}\u200D\u{1F9AF}"},{"unified":"1f469-1f3fe-200d-1f9af","native":"\u{1F469}\u{1F3FE}\u200D\u{1F9AF}"},{"unified":"1f469-1f3ff-200d-1f9af","native":"\u{1F469}\u{1F3FF}\u200D\u{1F9AF}"}],"version":12},"person_in_motorized_wheelchair":{"id":"person_in_motorized_wheelchair","name":"Person in Motorized Wheelchair","keywords":["disability","accessibility"],"skins":[{"unified":"1f9d1-200d-1f9bc","native":"\u{1F9D1}\u200D\u{1F9BC}"},{"unified":"1f9d1-1f3fb-200d-1f9bc","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F9BC}"},{"unified":"1f9d1-1f3fc-200d-1f9bc","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F9BC}"},{"unified":"1f9d1-1f3fd-200d-1f9bc","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F9BC}"},{"unified":"1f9d1-1f3fe-200d-1f9bc","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F9BC}"},{"unified":"1f9d1-1f3ff-200d-1f9bc","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F9BC}"}],"version":12.1},"man_in_motorized_wheelchair":{"id":"man_in_motorized_wheelchair","name":"Man in Motorized Wheelchair","keywords":["disability","accessibility"],"skins":[{"unified":"1f468-200d-1f9bc","native":"\u{1F468}\u200D\u{1F9BC}"},{"unified":"1f468-1f3fb-200d-1f9bc","native":"\u{1F468}\u{1F3FB}\u200D\u{1F9BC}"},{"unified":"1f468-1f3fc-200d-1f9bc","native":"\u{1F468}\u{1F3FC}\u200D\u{1F9BC}"},{"unified":"1f468-1f3fd-200d-1f9bc","native":"\u{1F468}\u{1F3FD}\u200D\u{1F9BC}"},{"unified":"1f468-1f3fe-200d-1f9bc","native":"\u{1F468}\u{1F3FE}\u200D\u{1F9BC}"},{"unified":"1f468-1f3ff-200d-1f9bc","native":"\u{1F468}\u{1F3FF}\u200D\u{1F9BC}"}],"version":12},"woman_in_motorized_wheelchair":{"id":"woman_in_motorized_wheelchair","name":"Woman in Motorized Wheelchair","keywords":["disability","accessibility"],"skins":[{"unified":"1f469-200d-1f9bc","native":"\u{1F469}\u200D\u{1F9BC}"},{"unified":"1f469-1f3fb-200d-1f9bc","native":"\u{1F469}\u{1F3FB}\u200D\u{1F9BC}"},{"unified":"1f469-1f3fc-200d-1f9bc","native":"\u{1F469}\u{1F3FC}\u200D\u{1F9BC}"},{"unified":"1f469-1f3fd-200d-1f9bc","native":"\u{1F469}\u{1F3FD}\u200D\u{1F9BC}"},{"unified":"1f469-1f3fe-200d-1f9bc","native":"\u{1F469}\u{1F3FE}\u200D\u{1F9BC}"},{"unified":"1f469-1f3ff-200d-1f9bc","native":"\u{1F469}\u{1F3FF}\u200D\u{1F9BC}"}],"version":12},"person_in_manual_wheelchair":{"id":"person_in_manual_wheelchair","name":"Person in Manual Wheelchair","keywords":["disability","accessibility"],"skins":[{"unified":"1f9d1-200d-1f9bd","native":"\u{1F9D1}\u200D\u{1F9BD}"},{"unified":"1f9d1-1f3fb-200d-1f9bd","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F9BD}"},{"unified":"1f9d1-1f3fc-200d-1f9bd","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F9BD}"},{"unified":"1f9d1-1f3fd-200d-1f9bd","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F9BD}"},{"unified":"1f9d1-1f3fe-200d-1f9bd","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F9BD}"},{"unified":"1f9d1-1f3ff-200d-1f9bd","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F9BD}"}],"version":12.1},"man_in_manual_wheelchair":{"id":"man_in_manual_wheelchair","name":"Man in Manual Wheelchair","keywords":["disability","accessibility"],"skins":[{"unified":"1f468-200d-1f9bd","native":"\u{1F468}\u200D\u{1F9BD}"},{"unified":"1f468-1f3fb-200d-1f9bd","native":"\u{1F468}\u{1F3FB}\u200D\u{1F9BD}"},{"unified":"1f468-1f3fc-200d-1f9bd","native":"\u{1F468}\u{1F3FC}\u200D\u{1F9BD}"},{"unified":"1f468-1f3fd-200d-1f9bd","native":"\u{1F468}\u{1F3FD}\u200D\u{1F9BD}"},{"unified":"1f468-1f3fe-200d-1f9bd","native":"\u{1F468}\u{1F3FE}\u200D\u{1F9BD}"},{"unified":"1f468-1f3ff-200d-1f9bd","native":"\u{1F468}\u{1F3FF}\u200D\u{1F9BD}"}],"version":12},"woman_in_manual_wheelchair":{"id":"woman_in_manual_wheelchair","name":"Woman in Manual Wheelchair","keywords":["disability","accessibility"],"skins":[{"unified":"1f469-200d-1f9bd","native":"\u{1F469}\u200D\u{1F9BD}"},{"unified":"1f469-1f3fb-200d-1f9bd","native":"\u{1F469}\u{1F3FB}\u200D\u{1F9BD}"},{"unified":"1f469-1f3fc-200d-1f9bd","native":"\u{1F469}\u{1F3FC}\u200D\u{1F9BD}"},{"unified":"1f469-1f3fd-200d-1f9bd","native":"\u{1F469}\u{1F3FD}\u200D\u{1F9BD}"},{"unified":"1f469-1f3fe-200d-1f9bd","native":"\u{1F469}\u{1F3FE}\u200D\u{1F9BD}"},{"unified":"1f469-1f3ff-200d-1f9bd","native":"\u{1F469}\u{1F3FF}\u200D\u{1F9BD}"}],"version":12},"runner":{"id":"runner","name":"Runner","keywords":["running","person","move"],"skins":[{"unified":"1f3c3","native":"\u{1F3C3}"},{"unified":"1f3c3-1f3fb","native":"\u{1F3C3}\u{1F3FB}"},{"unified":"1f3c3-1f3fc","native":"\u{1F3C3}\u{1F3FC}"},{"unified":"1f3c3-1f3fd","native":"\u{1F3C3}\u{1F3FD}"},{"unified":"1f3c3-1f3fe","native":"\u{1F3C3}\u{1F3FE}"},{"unified":"1f3c3-1f3ff","native":"\u{1F3C3}\u{1F3FF}"}],"version":1},"man-running":{"id":"man-running","name":"Man Running","keywords":["walking","exercise","race"],"skins":[{"unified":"1f3c3-200d-2642-fe0f","native":"\u{1F3C3}\u200D\u2642\uFE0F"},{"unified":"1f3c3-1f3fb-200d-2642-fe0f","native":"\u{1F3C3}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f3c3-1f3fc-200d-2642-fe0f","native":"\u{1F3C3}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f3c3-1f3fd-200d-2642-fe0f","native":"\u{1F3C3}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f3c3-1f3fe-200d-2642-fe0f","native":"\u{1F3C3}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f3c3-1f3ff-200d-2642-fe0f","native":"\u{1F3C3}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-running":{"id":"woman-running","name":"Woman Running","keywords":["walking","exercise","race","female"],"skins":[{"unified":"1f3c3-200d-2640-fe0f","native":"\u{1F3C3}\u200D\u2640\uFE0F"},{"unified":"1f3c3-1f3fb-200d-2640-fe0f","native":"\u{1F3C3}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f3c3-1f3fc-200d-2640-fe0f","native":"\u{1F3C3}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f3c3-1f3fd-200d-2640-fe0f","native":"\u{1F3C3}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f3c3-1f3fe-200d-2640-fe0f","native":"\u{1F3C3}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f3c3-1f3ff-200d-2640-fe0f","native":"\u{1F3C3}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"dancer":{"id":"dancer","name":"Dancer","keywords":["woman","dancing","female","girl","fun"],"skins":[{"unified":"1f483","native":"\u{1F483}"},{"unified":"1f483-1f3fb","native":"\u{1F483}\u{1F3FB}"},{"unified":"1f483-1f3fc","native":"\u{1F483}\u{1F3FC}"},{"unified":"1f483-1f3fd","native":"\u{1F483}\u{1F3FD}"},{"unified":"1f483-1f3fe","native":"\u{1F483}\u{1F3FE}"},{"unified":"1f483-1f3ff","native":"\u{1F483}\u{1F3FF}"}],"version":1},"man_dancing":{"id":"man_dancing","name":"Man Dancing","keywords":["male","boy","fun","dancer"],"skins":[{"unified":"1f57a","native":"\u{1F57A}"},{"unified":"1f57a-1f3fb","native":"\u{1F57A}\u{1F3FB}"},{"unified":"1f57a-1f3fc","native":"\u{1F57A}\u{1F3FC}"},{"unified":"1f57a-1f3fd","native":"\u{1F57A}\u{1F3FD}"},{"unified":"1f57a-1f3fe","native":"\u{1F57A}\u{1F3FE}"},{"unified":"1f57a-1f3ff","native":"\u{1F57A}\u{1F3FF}"}],"version":3},"man_in_business_suit_levitating":{"id":"man_in_business_suit_levitating","name":"Person in Suit Levitating","keywords":["man","business","levitate","hover","jump"],"skins":[{"unified":"1f574-fe0f","native":"\u{1F574}\uFE0F"},{"unified":"1f574-1f3fb","native":"\u{1F574}\u{1F3FB}"},{"unified":"1f574-1f3fc","native":"\u{1F574}\u{1F3FC}"},{"unified":"1f574-1f3fd","native":"\u{1F574}\u{1F3FD}"},{"unified":"1f574-1f3fe","native":"\u{1F574}\u{1F3FE}"},{"unified":"1f574-1f3ff","native":"\u{1F574}\u{1F3FF}"}],"version":1},"dancers":{"id":"dancers","name":"Woman with Bunny Ears","keywords":["dancers","people","perform","costume"],"skins":[{"unified":"1f46f","native":"\u{1F46F}"}],"version":1},"men-with-bunny-ears-partying":{"id":"men-with-bunny-ears-partying","name":"Men with Bunny Ears","keywords":["with-bunny-ears-partying","man","male","boys"],"skins":[{"unified":"1f46f-200d-2642-fe0f","native":"\u{1F46F}\u200D\u2642\uFE0F"}],"version":4},"women-with-bunny-ears-partying":{"id":"women-with-bunny-ears-partying","name":"Women with Bunny Ears","keywords":["with-bunny-ears-partying","woman","female","girls"],"skins":[{"unified":"1f46f-200d-2640-fe0f","native":"\u{1F46F}\u200D\u2640\uFE0F"}],"version":4},"person_in_steamy_room":{"id":"person_in_steamy_room","name":"Person in Steamy Room","keywords":["relax","spa"],"skins":[{"unified":"1f9d6","native":"\u{1F9D6}"},{"unified":"1f9d6-1f3fb","native":"\u{1F9D6}\u{1F3FB}"},{"unified":"1f9d6-1f3fc","native":"\u{1F9D6}\u{1F3FC}"},{"unified":"1f9d6-1f3fd","native":"\u{1F9D6}\u{1F3FD}"},{"unified":"1f9d6-1f3fe","native":"\u{1F9D6}\u{1F3FE}"},{"unified":"1f9d6-1f3ff","native":"\u{1F9D6}\u{1F3FF}"}],"version":5},"man_in_steamy_room":{"id":"man_in_steamy_room","name":"Man in Steamy Room","keywords":["male","spa","steamroom","sauna"],"skins":[{"unified":"1f9d6-200d-2642-fe0f","native":"\u{1F9D6}\u200D\u2642\uFE0F"},{"unified":"1f9d6-1f3fb-200d-2642-fe0f","native":"\u{1F9D6}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9d6-1f3fc-200d-2642-fe0f","native":"\u{1F9D6}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9d6-1f3fd-200d-2642-fe0f","native":"\u{1F9D6}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9d6-1f3fe-200d-2642-fe0f","native":"\u{1F9D6}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9d6-1f3ff-200d-2642-fe0f","native":"\u{1F9D6}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":5},"woman_in_steamy_room":{"id":"woman_in_steamy_room","name":"Woman in Steamy Room","keywords":["female","spa","steamroom","sauna"],"skins":[{"unified":"1f9d6-200d-2640-fe0f","native":"\u{1F9D6}\u200D\u2640\uFE0F"},{"unified":"1f9d6-1f3fb-200d-2640-fe0f","native":"\u{1F9D6}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9d6-1f3fc-200d-2640-fe0f","native":"\u{1F9D6}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9d6-1f3fd-200d-2640-fe0f","native":"\u{1F9D6}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9d6-1f3fe-200d-2640-fe0f","native":"\u{1F9D6}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9d6-1f3ff-200d-2640-fe0f","native":"\u{1F9D6}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":5},"person_climbing":{"id":"person_climbing","name":"Person Climbing","keywords":["sport"],"skins":[{"unified":"1f9d7","native":"\u{1F9D7}"},{"unified":"1f9d7-1f3fb","native":"\u{1F9D7}\u{1F3FB}"},{"unified":"1f9d7-1f3fc","native":"\u{1F9D7}\u{1F3FC}"},{"unified":"1f9d7-1f3fd","native":"\u{1F9D7}\u{1F3FD}"},{"unified":"1f9d7-1f3fe","native":"\u{1F9D7}\u{1F3FE}"},{"unified":"1f9d7-1f3ff","native":"\u{1F9D7}\u{1F3FF}"}],"version":5},"man_climbing":{"id":"man_climbing","name":"Man Climbing","keywords":["sports","hobby","male","rock"],"skins":[{"unified":"1f9d7-200d-2642-fe0f","native":"\u{1F9D7}\u200D\u2642\uFE0F"},{"unified":"1f9d7-1f3fb-200d-2642-fe0f","native":"\u{1F9D7}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9d7-1f3fc-200d-2642-fe0f","native":"\u{1F9D7}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9d7-1f3fd-200d-2642-fe0f","native":"\u{1F9D7}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9d7-1f3fe-200d-2642-fe0f","native":"\u{1F9D7}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9d7-1f3ff-200d-2642-fe0f","native":"\u{1F9D7}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":5},"woman_climbing":{"id":"woman_climbing","name":"Woman Climbing","keywords":["sports","hobby","female","rock"],"skins":[{"unified":"1f9d7-200d-2640-fe0f","native":"\u{1F9D7}\u200D\u2640\uFE0F"},{"unified":"1f9d7-1f3fb-200d-2640-fe0f","native":"\u{1F9D7}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9d7-1f3fc-200d-2640-fe0f","native":"\u{1F9D7}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9d7-1f3fd-200d-2640-fe0f","native":"\u{1F9D7}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9d7-1f3fe-200d-2640-fe0f","native":"\u{1F9D7}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9d7-1f3ff-200d-2640-fe0f","native":"\u{1F9D7}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":5},"fencer":{"id":"fencer","name":"Fencer","keywords":["person","fencing","sports","sword"],"skins":[{"unified":"1f93a","native":"\u{1F93A}"}],"version":3},"horse_racing":{"id":"horse_racing","name":"Horse Racing","keywords":["animal","betting","competition","gambling","luck"],"skins":[{"unified":"1f3c7","native":"\u{1F3C7}"},{"unified":"1f3c7-1f3fb","native":"\u{1F3C7}\u{1F3FB}"},{"unified":"1f3c7-1f3fc","native":"\u{1F3C7}\u{1F3FC}"},{"unified":"1f3c7-1f3fd","native":"\u{1F3C7}\u{1F3FD}"},{"unified":"1f3c7-1f3fe","native":"\u{1F3C7}\u{1F3FE}"},{"unified":"1f3c7-1f3ff","native":"\u{1F3C7}\u{1F3FF}"}],"version":1},"skier":{"id":"skier","name":"Skier","keywords":["sports","winter","snow"],"skins":[{"unified":"26f7-fe0f","native":"\u26F7\uFE0F"}],"version":1},"snowboarder":{"id":"snowboarder","name":"Snowboarder","keywords":["sports","winter"],"skins":[{"unified":"1f3c2","native":"\u{1F3C2}"},{"unified":"1f3c2-1f3fb","native":"\u{1F3C2}\u{1F3FB}"},{"unified":"1f3c2-1f3fc","native":"\u{1F3C2}\u{1F3FC}"},{"unified":"1f3c2-1f3fd","native":"\u{1F3C2}\u{1F3FD}"},{"unified":"1f3c2-1f3fe","native":"\u{1F3C2}\u{1F3FE}"},{"unified":"1f3c2-1f3ff","native":"\u{1F3C2}\u{1F3FF}"}],"version":1},"golfer":{"id":"golfer","name":"Person Golfing","keywords":["golfer","sports","business"],"skins":[{"unified":"1f3cc-fe0f","native":"\u{1F3CC}\uFE0F"},{"unified":"1f3cc-1f3fb","native":"\u{1F3CC}\u{1F3FB}"},{"unified":"1f3cc-1f3fc","native":"\u{1F3CC}\u{1F3FC}"},{"unified":"1f3cc-1f3fd","native":"\u{1F3CC}\u{1F3FD}"},{"unified":"1f3cc-1f3fe","native":"\u{1F3CC}\u{1F3FE}"},{"unified":"1f3cc-1f3ff","native":"\u{1F3CC}\u{1F3FF}"}],"version":1},"man-golfing":{"id":"man-golfing","name":"Man Golfing","keywords":["sport"],"skins":[{"unified":"1f3cc-fe0f-200d-2642-fe0f","native":"\u{1F3CC}\uFE0F\u200D\u2642\uFE0F"},{"unified":"1f3cc-1f3fb-200d-2642-fe0f","native":"\u{1F3CC}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f3cc-1f3fc-200d-2642-fe0f","native":"\u{1F3CC}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f3cc-1f3fd-200d-2642-fe0f","native":"\u{1F3CC}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f3cc-1f3fe-200d-2642-fe0f","native":"\u{1F3CC}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f3cc-1f3ff-200d-2642-fe0f","native":"\u{1F3CC}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-golfing":{"id":"woman-golfing","name":"Woman Golfing","keywords":["sports","business","female"],"skins":[{"unified":"1f3cc-fe0f-200d-2640-fe0f","native":"\u{1F3CC}\uFE0F\u200D\u2640\uFE0F"},{"unified":"1f3cc-1f3fb-200d-2640-fe0f","native":"\u{1F3CC}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f3cc-1f3fc-200d-2640-fe0f","native":"\u{1F3CC}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f3cc-1f3fd-200d-2640-fe0f","native":"\u{1F3CC}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f3cc-1f3fe-200d-2640-fe0f","native":"\u{1F3CC}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f3cc-1f3ff-200d-2640-fe0f","native":"\u{1F3CC}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"surfer":{"id":"surfer","name":"Surfer","keywords":["person","surfing","sport","sea"],"skins":[{"unified":"1f3c4","native":"\u{1F3C4}"},{"unified":"1f3c4-1f3fb","native":"\u{1F3C4}\u{1F3FB}"},{"unified":"1f3c4-1f3fc","native":"\u{1F3C4}\u{1F3FC}"},{"unified":"1f3c4-1f3fd","native":"\u{1F3C4}\u{1F3FD}"},{"unified":"1f3c4-1f3fe","native":"\u{1F3C4}\u{1F3FE}"},{"unified":"1f3c4-1f3ff","native":"\u{1F3C4}\u{1F3FF}"}],"version":1},"man-surfing":{"id":"man-surfing","name":"Man Surfing","keywords":["sports","ocean","sea","summer","beach"],"skins":[{"unified":"1f3c4-200d-2642-fe0f","native":"\u{1F3C4}\u200D\u2642\uFE0F"},{"unified":"1f3c4-1f3fb-200d-2642-fe0f","native":"\u{1F3C4}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f3c4-1f3fc-200d-2642-fe0f","native":"\u{1F3C4}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f3c4-1f3fd-200d-2642-fe0f","native":"\u{1F3C4}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f3c4-1f3fe-200d-2642-fe0f","native":"\u{1F3C4}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f3c4-1f3ff-200d-2642-fe0f","native":"\u{1F3C4}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-surfing":{"id":"woman-surfing","name":"Woman Surfing","keywords":["sports","ocean","sea","summer","beach","female"],"skins":[{"unified":"1f3c4-200d-2640-fe0f","native":"\u{1F3C4}\u200D\u2640\uFE0F"},{"unified":"1f3c4-1f3fb-200d-2640-fe0f","native":"\u{1F3C4}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f3c4-1f3fc-200d-2640-fe0f","native":"\u{1F3C4}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f3c4-1f3fd-200d-2640-fe0f","native":"\u{1F3C4}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f3c4-1f3fe-200d-2640-fe0f","native":"\u{1F3C4}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f3c4-1f3ff-200d-2640-fe0f","native":"\u{1F3C4}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"rowboat":{"id":"rowboat","name":"Rowboat","keywords":["person","rowing","boat","sport","move"],"skins":[{"unified":"1f6a3","native":"\u{1F6A3}"},{"unified":"1f6a3-1f3fb","native":"\u{1F6A3}\u{1F3FB}"},{"unified":"1f6a3-1f3fc","native":"\u{1F6A3}\u{1F3FC}"},{"unified":"1f6a3-1f3fd","native":"\u{1F6A3}\u{1F3FD}"},{"unified":"1f6a3-1f3fe","native":"\u{1F6A3}\u{1F3FE}"},{"unified":"1f6a3-1f3ff","native":"\u{1F6A3}\u{1F3FF}"}],"version":1},"man-rowing-boat":{"id":"man-rowing-boat","name":"Man Rowing Boat","keywords":["rowing-boat","sports","hobby","water","ship"],"skins":[{"unified":"1f6a3-200d-2642-fe0f","native":"\u{1F6A3}\u200D\u2642\uFE0F"},{"unified":"1f6a3-1f3fb-200d-2642-fe0f","native":"\u{1F6A3}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f6a3-1f3fc-200d-2642-fe0f","native":"\u{1F6A3}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f6a3-1f3fd-200d-2642-fe0f","native":"\u{1F6A3}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f6a3-1f3fe-200d-2642-fe0f","native":"\u{1F6A3}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f6a3-1f3ff-200d-2642-fe0f","native":"\u{1F6A3}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-rowing-boat":{"id":"woman-rowing-boat","name":"Woman Rowing Boat","keywords":["rowing-boat","sports","hobby","water","ship","female"],"skins":[{"unified":"1f6a3-200d-2640-fe0f","native":"\u{1F6A3}\u200D\u2640\uFE0F"},{"unified":"1f6a3-1f3fb-200d-2640-fe0f","native":"\u{1F6A3}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f6a3-1f3fc-200d-2640-fe0f","native":"\u{1F6A3}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f6a3-1f3fd-200d-2640-fe0f","native":"\u{1F6A3}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f6a3-1f3fe-200d-2640-fe0f","native":"\u{1F6A3}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f6a3-1f3ff-200d-2640-fe0f","native":"\u{1F6A3}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"swimmer":{"id":"swimmer","name":"Swimmer","keywords":["person","swimming","sport","pool"],"skins":[{"unified":"1f3ca","native":"\u{1F3CA}"},{"unified":"1f3ca-1f3fb","native":"\u{1F3CA}\u{1F3FB}"},{"unified":"1f3ca-1f3fc","native":"\u{1F3CA}\u{1F3FC}"},{"unified":"1f3ca-1f3fd","native":"\u{1F3CA}\u{1F3FD}"},{"unified":"1f3ca-1f3fe","native":"\u{1F3CA}\u{1F3FE}"},{"unified":"1f3ca-1f3ff","native":"\u{1F3CA}\u{1F3FF}"}],"version":1},"man-swimming":{"id":"man-swimming","name":"Man Swimming","keywords":["sports","exercise","human","athlete","water","summer"],"skins":[{"unified":"1f3ca-200d-2642-fe0f","native":"\u{1F3CA}\u200D\u2642\uFE0F"},{"unified":"1f3ca-1f3fb-200d-2642-fe0f","native":"\u{1F3CA}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f3ca-1f3fc-200d-2642-fe0f","native":"\u{1F3CA}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f3ca-1f3fd-200d-2642-fe0f","native":"\u{1F3CA}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f3ca-1f3fe-200d-2642-fe0f","native":"\u{1F3CA}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f3ca-1f3ff-200d-2642-fe0f","native":"\u{1F3CA}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-swimming":{"id":"woman-swimming","name":"Woman Swimming","keywords":["sports","exercise","human","athlete","water","summer","female"],"skins":[{"unified":"1f3ca-200d-2640-fe0f","native":"\u{1F3CA}\u200D\u2640\uFE0F"},{"unified":"1f3ca-1f3fb-200d-2640-fe0f","native":"\u{1F3CA}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f3ca-1f3fc-200d-2640-fe0f","native":"\u{1F3CA}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f3ca-1f3fd-200d-2640-fe0f","native":"\u{1F3CA}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f3ca-1f3fe-200d-2640-fe0f","native":"\u{1F3CA}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f3ca-1f3ff-200d-2640-fe0f","native":"\u{1F3CA}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"person_with_ball":{"id":"person_with_ball","name":"Person Bouncing Ball","keywords":["with","sports","human"],"skins":[{"unified":"26f9-fe0f","native":"\u26F9\uFE0F"},{"unified":"26f9-1f3fb","native":"\u26F9\u{1F3FB}"},{"unified":"26f9-1f3fc","native":"\u26F9\u{1F3FC}"},{"unified":"26f9-1f3fd","native":"\u26F9\u{1F3FD}"},{"unified":"26f9-1f3fe","native":"\u26F9\u{1F3FE}"},{"unified":"26f9-1f3ff","native":"\u26F9\u{1F3FF}"}],"version":1},"man-bouncing-ball":{"id":"man-bouncing-ball","name":"Man Bouncing Ball","keywords":["bouncing-ball","sport"],"skins":[{"unified":"26f9-fe0f-200d-2642-fe0f","native":"\u26F9\uFE0F\u200D\u2642\uFE0F"},{"unified":"26f9-1f3fb-200d-2642-fe0f","native":"\u26F9\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"26f9-1f3fc-200d-2642-fe0f","native":"\u26F9\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"26f9-1f3fd-200d-2642-fe0f","native":"\u26F9\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"26f9-1f3fe-200d-2642-fe0f","native":"\u26F9\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"26f9-1f3ff-200d-2642-fe0f","native":"\u26F9\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-bouncing-ball":{"id":"woman-bouncing-ball","name":"Woman Bouncing Ball","keywords":["bouncing-ball","sports","human","female"],"skins":[{"unified":"26f9-fe0f-200d-2640-fe0f","native":"\u26F9\uFE0F\u200D\u2640\uFE0F"},{"unified":"26f9-1f3fb-200d-2640-fe0f","native":"\u26F9\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"26f9-1f3fc-200d-2640-fe0f","native":"\u26F9\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"26f9-1f3fd-200d-2640-fe0f","native":"\u26F9\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"26f9-1f3fe-200d-2640-fe0f","native":"\u26F9\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"26f9-1f3ff-200d-2640-fe0f","native":"\u26F9\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"weight_lifter":{"id":"weight_lifter","name":"Person Lifting Weights","keywords":["weight","lifter","sports","training","exercise"],"skins":[{"unified":"1f3cb-fe0f","native":"\u{1F3CB}\uFE0F"},{"unified":"1f3cb-1f3fb","native":"\u{1F3CB}\u{1F3FB}"},{"unified":"1f3cb-1f3fc","native":"\u{1F3CB}\u{1F3FC}"},{"unified":"1f3cb-1f3fd","native":"\u{1F3CB}\u{1F3FD}"},{"unified":"1f3cb-1f3fe","native":"\u{1F3CB}\u{1F3FE}"},{"unified":"1f3cb-1f3ff","native":"\u{1F3CB}\u{1F3FF}"}],"version":1},"man-lifting-weights":{"id":"man-lifting-weights","name":"Man Lifting Weights","keywords":["lifting-weights","sport"],"skins":[{"unified":"1f3cb-fe0f-200d-2642-fe0f","native":"\u{1F3CB}\uFE0F\u200D\u2642\uFE0F"},{"unified":"1f3cb-1f3fb-200d-2642-fe0f","native":"\u{1F3CB}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f3cb-1f3fc-200d-2642-fe0f","native":"\u{1F3CB}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f3cb-1f3fd-200d-2642-fe0f","native":"\u{1F3CB}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f3cb-1f3fe-200d-2642-fe0f","native":"\u{1F3CB}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f3cb-1f3ff-200d-2642-fe0f","native":"\u{1F3CB}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-lifting-weights":{"id":"woman-lifting-weights","name":"Woman Lifting Weights","keywords":["lifting-weights","sports","training","exercise","female"],"skins":[{"unified":"1f3cb-fe0f-200d-2640-fe0f","native":"\u{1F3CB}\uFE0F\u200D\u2640\uFE0F"},{"unified":"1f3cb-1f3fb-200d-2640-fe0f","native":"\u{1F3CB}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f3cb-1f3fc-200d-2640-fe0f","native":"\u{1F3CB}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f3cb-1f3fd-200d-2640-fe0f","native":"\u{1F3CB}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f3cb-1f3fe-200d-2640-fe0f","native":"\u{1F3CB}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f3cb-1f3ff-200d-2640-fe0f","native":"\u{1F3CB}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"bicyclist":{"id":"bicyclist","name":"Bicyclist","keywords":["person","biking","sport","move"],"skins":[{"unified":"1f6b4","native":"\u{1F6B4}"},{"unified":"1f6b4-1f3fb","native":"\u{1F6B4}\u{1F3FB}"},{"unified":"1f6b4-1f3fc","native":"\u{1F6B4}\u{1F3FC}"},{"unified":"1f6b4-1f3fd","native":"\u{1F6B4}\u{1F3FD}"},{"unified":"1f6b4-1f3fe","native":"\u{1F6B4}\u{1F3FE}"},{"unified":"1f6b4-1f3ff","native":"\u{1F6B4}\u{1F3FF}"}],"version":1},"man-biking":{"id":"man-biking","name":"Man Biking","keywords":["sports","bike","exercise","hipster"],"skins":[{"unified":"1f6b4-200d-2642-fe0f","native":"\u{1F6B4}\u200D\u2642\uFE0F"},{"unified":"1f6b4-1f3fb-200d-2642-fe0f","native":"\u{1F6B4}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f6b4-1f3fc-200d-2642-fe0f","native":"\u{1F6B4}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f6b4-1f3fd-200d-2642-fe0f","native":"\u{1F6B4}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f6b4-1f3fe-200d-2642-fe0f","native":"\u{1F6B4}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f6b4-1f3ff-200d-2642-fe0f","native":"\u{1F6B4}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-biking":{"id":"woman-biking","name":"Woman Biking","keywords":["sports","bike","exercise","hipster","female"],"skins":[{"unified":"1f6b4-200d-2640-fe0f","native":"\u{1F6B4}\u200D\u2640\uFE0F"},{"unified":"1f6b4-1f3fb-200d-2640-fe0f","native":"\u{1F6B4}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f6b4-1f3fc-200d-2640-fe0f","native":"\u{1F6B4}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f6b4-1f3fd-200d-2640-fe0f","native":"\u{1F6B4}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f6b4-1f3fe-200d-2640-fe0f","native":"\u{1F6B4}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f6b4-1f3ff-200d-2640-fe0f","native":"\u{1F6B4}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"mountain_bicyclist":{"id":"mountain_bicyclist","name":"Mountain Bicyclist","keywords":["person","biking","sport","move"],"skins":[{"unified":"1f6b5","native":"\u{1F6B5}"},{"unified":"1f6b5-1f3fb","native":"\u{1F6B5}\u{1F3FB}"},{"unified":"1f6b5-1f3fc","native":"\u{1F6B5}\u{1F3FC}"},{"unified":"1f6b5-1f3fd","native":"\u{1F6B5}\u{1F3FD}"},{"unified":"1f6b5-1f3fe","native":"\u{1F6B5}\u{1F3FE}"},{"unified":"1f6b5-1f3ff","native":"\u{1F6B5}\u{1F3FF}"}],"version":1},"man-mountain-biking":{"id":"man-mountain-biking","name":"Man Mountain Biking","keywords":["mountain-biking","transportation","sports","human","race","bike"],"skins":[{"unified":"1f6b5-200d-2642-fe0f","native":"\u{1F6B5}\u200D\u2642\uFE0F"},{"unified":"1f6b5-1f3fb-200d-2642-fe0f","native":"\u{1F6B5}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f6b5-1f3fc-200d-2642-fe0f","native":"\u{1F6B5}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f6b5-1f3fd-200d-2642-fe0f","native":"\u{1F6B5}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f6b5-1f3fe-200d-2642-fe0f","native":"\u{1F6B5}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f6b5-1f3ff-200d-2642-fe0f","native":"\u{1F6B5}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-mountain-biking":{"id":"woman-mountain-biking","name":"Woman Mountain Biking","keywords":["mountain-biking","transportation","sports","human","race","bike","female"],"skins":[{"unified":"1f6b5-200d-2640-fe0f","native":"\u{1F6B5}\u200D\u2640\uFE0F"},{"unified":"1f6b5-1f3fb-200d-2640-fe0f","native":"\u{1F6B5}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f6b5-1f3fc-200d-2640-fe0f","native":"\u{1F6B5}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f6b5-1f3fd-200d-2640-fe0f","native":"\u{1F6B5}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f6b5-1f3fe-200d-2640-fe0f","native":"\u{1F6B5}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f6b5-1f3ff-200d-2640-fe0f","native":"\u{1F6B5}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"person_doing_cartwheel":{"id":"person_doing_cartwheel","name":"Person Cartwheeling","keywords":["doing","cartwheel","sport","gymnastic"],"skins":[{"unified":"1f938","native":"\u{1F938}"},{"unified":"1f938-1f3fb","native":"\u{1F938}\u{1F3FB}"},{"unified":"1f938-1f3fc","native":"\u{1F938}\u{1F3FC}"},{"unified":"1f938-1f3fd","native":"\u{1F938}\u{1F3FD}"},{"unified":"1f938-1f3fe","native":"\u{1F938}\u{1F3FE}"},{"unified":"1f938-1f3ff","native":"\u{1F938}\u{1F3FF}"}],"version":3},"man-cartwheeling":{"id":"man-cartwheeling","name":"Man Cartwheeling","keywords":["gymnastics"],"skins":[{"unified":"1f938-200d-2642-fe0f","native":"\u{1F938}\u200D\u2642\uFE0F"},{"unified":"1f938-1f3fb-200d-2642-fe0f","native":"\u{1F938}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f938-1f3fc-200d-2642-fe0f","native":"\u{1F938}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f938-1f3fd-200d-2642-fe0f","native":"\u{1F938}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f938-1f3fe-200d-2642-fe0f","native":"\u{1F938}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f938-1f3ff-200d-2642-fe0f","native":"\u{1F938}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-cartwheeling":{"id":"woman-cartwheeling","name":"Woman Cartwheeling","keywords":["gymnastics"],"skins":[{"unified":"1f938-200d-2640-fe0f","native":"\u{1F938}\u200D\u2640\uFE0F"},{"unified":"1f938-1f3fb-200d-2640-fe0f","native":"\u{1F938}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f938-1f3fc-200d-2640-fe0f","native":"\u{1F938}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f938-1f3fd-200d-2640-fe0f","native":"\u{1F938}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f938-1f3fe-200d-2640-fe0f","native":"\u{1F938}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f938-1f3ff-200d-2640-fe0f","native":"\u{1F938}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"wrestlers":{"id":"wrestlers","name":"Wrestlers","keywords":["people","wrestling","sport"],"skins":[{"unified":"1f93c","native":"\u{1F93C}"}],"version":3},"man-wrestling":{"id":"man-wrestling","name":"Men Wrestling","keywords":["man","sports","wrestlers"],"skins":[{"unified":"1f93c-200d-2642-fe0f","native":"\u{1F93C}\u200D\u2642\uFE0F"}],"version":4},"woman-wrestling":{"id":"woman-wrestling","name":"Women Wrestling","keywords":["woman","sports","wrestlers"],"skins":[{"unified":"1f93c-200d-2640-fe0f","native":"\u{1F93C}\u200D\u2640\uFE0F"}],"version":4},"water_polo":{"id":"water_polo","name":"Water Polo","keywords":["person","playing","sport"],"skins":[{"unified":"1f93d","native":"\u{1F93D}"},{"unified":"1f93d-1f3fb","native":"\u{1F93D}\u{1F3FB}"},{"unified":"1f93d-1f3fc","native":"\u{1F93D}\u{1F3FC}"},{"unified":"1f93d-1f3fd","native":"\u{1F93D}\u{1F3FD}"},{"unified":"1f93d-1f3fe","native":"\u{1F93D}\u{1F3FE}"},{"unified":"1f93d-1f3ff","native":"\u{1F93D}\u{1F3FF}"}],"version":3},"man-playing-water-polo":{"id":"man-playing-water-polo","name":"Man Playing Water Polo","keywords":["playing-water-polo","sports","pool"],"skins":[{"unified":"1f93d-200d-2642-fe0f","native":"\u{1F93D}\u200D\u2642\uFE0F"},{"unified":"1f93d-1f3fb-200d-2642-fe0f","native":"\u{1F93D}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f93d-1f3fc-200d-2642-fe0f","native":"\u{1F93D}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f93d-1f3fd-200d-2642-fe0f","native":"\u{1F93D}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f93d-1f3fe-200d-2642-fe0f","native":"\u{1F93D}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f93d-1f3ff-200d-2642-fe0f","native":"\u{1F93D}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-playing-water-polo":{"id":"woman-playing-water-polo","name":"Woman Playing Water Polo","keywords":["playing-water-polo","sports","pool"],"skins":[{"unified":"1f93d-200d-2640-fe0f","native":"\u{1F93D}\u200D\u2640\uFE0F"},{"unified":"1f93d-1f3fb-200d-2640-fe0f","native":"\u{1F93D}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f93d-1f3fc-200d-2640-fe0f","native":"\u{1F93D}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f93d-1f3fd-200d-2640-fe0f","native":"\u{1F93D}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f93d-1f3fe-200d-2640-fe0f","native":"\u{1F93D}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f93d-1f3ff-200d-2640-fe0f","native":"\u{1F93D}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"handball":{"id":"handball","name":"Handball","keywords":["person","playing","sport"],"skins":[{"unified":"1f93e","native":"\u{1F93E}"},{"unified":"1f93e-1f3fb","native":"\u{1F93E}\u{1F3FB}"},{"unified":"1f93e-1f3fc","native":"\u{1F93E}\u{1F3FC}"},{"unified":"1f93e-1f3fd","native":"\u{1F93E}\u{1F3FD}"},{"unified":"1f93e-1f3fe","native":"\u{1F93E}\u{1F3FE}"},{"unified":"1f93e-1f3ff","native":"\u{1F93E}\u{1F3FF}"}],"version":3},"man-playing-handball":{"id":"man-playing-handball","name":"Man Playing Handball","keywords":["playing-handball","sports"],"skins":[{"unified":"1f93e-200d-2642-fe0f","native":"\u{1F93E}\u200D\u2642\uFE0F"},{"unified":"1f93e-1f3fb-200d-2642-fe0f","native":"\u{1F93E}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f93e-1f3fc-200d-2642-fe0f","native":"\u{1F93E}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f93e-1f3fd-200d-2642-fe0f","native":"\u{1F93E}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f93e-1f3fe-200d-2642-fe0f","native":"\u{1F93E}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f93e-1f3ff-200d-2642-fe0f","native":"\u{1F93E}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-playing-handball":{"id":"woman-playing-handball","name":"Woman Playing Handball","keywords":["playing-handball","sports"],"skins":[{"unified":"1f93e-200d-2640-fe0f","native":"\u{1F93E}\u200D\u2640\uFE0F"},{"unified":"1f93e-1f3fb-200d-2640-fe0f","native":"\u{1F93E}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f93e-1f3fc-200d-2640-fe0f","native":"\u{1F93E}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f93e-1f3fd-200d-2640-fe0f","native":"\u{1F93E}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f93e-1f3fe-200d-2640-fe0f","native":"\u{1F93E}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f93e-1f3ff-200d-2640-fe0f","native":"\u{1F93E}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"juggling":{"id":"juggling","name":"Juggling","keywords":["person","performance","balance"],"skins":[{"unified":"1f939","native":"\u{1F939}"},{"unified":"1f939-1f3fb","native":"\u{1F939}\u{1F3FB}"},{"unified":"1f939-1f3fc","native":"\u{1F939}\u{1F3FC}"},{"unified":"1f939-1f3fd","native":"\u{1F939}\u{1F3FD}"},{"unified":"1f939-1f3fe","native":"\u{1F939}\u{1F3FE}"},{"unified":"1f939-1f3ff","native":"\u{1F939}\u{1F3FF}"}],"version":3},"man-juggling":{"id":"man-juggling","name":"Man Juggling","keywords":["juggle","balance","skill","multitask"],"skins":[{"unified":"1f939-200d-2642-fe0f","native":"\u{1F939}\u200D\u2642\uFE0F"},{"unified":"1f939-1f3fb-200d-2642-fe0f","native":"\u{1F939}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f939-1f3fc-200d-2642-fe0f","native":"\u{1F939}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f939-1f3fd-200d-2642-fe0f","native":"\u{1F939}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f939-1f3fe-200d-2642-fe0f","native":"\u{1F939}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f939-1f3ff-200d-2642-fe0f","native":"\u{1F939}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":4},"woman-juggling":{"id":"woman-juggling","name":"Woman Juggling","keywords":["juggle","balance","skill","multitask"],"skins":[{"unified":"1f939-200d-2640-fe0f","native":"\u{1F939}\u200D\u2640\uFE0F"},{"unified":"1f939-1f3fb-200d-2640-fe0f","native":"\u{1F939}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f939-1f3fc-200d-2640-fe0f","native":"\u{1F939}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f939-1f3fd-200d-2640-fe0f","native":"\u{1F939}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f939-1f3fe-200d-2640-fe0f","native":"\u{1F939}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f939-1f3ff-200d-2640-fe0f","native":"\u{1F939}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":4},"person_in_lotus_position":{"id":"person_in_lotus_position","name":"Person in Lotus Position","keywords":["meditate"],"skins":[{"unified":"1f9d8","native":"\u{1F9D8}"},{"unified":"1f9d8-1f3fb","native":"\u{1F9D8}\u{1F3FB}"},{"unified":"1f9d8-1f3fc","native":"\u{1F9D8}\u{1F3FC}"},{"unified":"1f9d8-1f3fd","native":"\u{1F9D8}\u{1F3FD}"},{"unified":"1f9d8-1f3fe","native":"\u{1F9D8}\u{1F3FE}"},{"unified":"1f9d8-1f3ff","native":"\u{1F9D8}\u{1F3FF}"}],"version":5},"man_in_lotus_position":{"id":"man_in_lotus_position","name":"Man in Lotus Position","keywords":["male","meditation","yoga","serenity","zen","mindfulness"],"skins":[{"unified":"1f9d8-200d-2642-fe0f","native":"\u{1F9D8}\u200D\u2642\uFE0F"},{"unified":"1f9d8-1f3fb-200d-2642-fe0f","native":"\u{1F9D8}\u{1F3FB}\u200D\u2642\uFE0F"},{"unified":"1f9d8-1f3fc-200d-2642-fe0f","native":"\u{1F9D8}\u{1F3FC}\u200D\u2642\uFE0F"},{"unified":"1f9d8-1f3fd-200d-2642-fe0f","native":"\u{1F9D8}\u{1F3FD}\u200D\u2642\uFE0F"},{"unified":"1f9d8-1f3fe-200d-2642-fe0f","native":"\u{1F9D8}\u{1F3FE}\u200D\u2642\uFE0F"},{"unified":"1f9d8-1f3ff-200d-2642-fe0f","native":"\u{1F9D8}\u{1F3FF}\u200D\u2642\uFE0F"}],"version":5},"woman_in_lotus_position":{"id":"woman_in_lotus_position","name":"Woman in Lotus Position","keywords":["female","meditation","yoga","serenity","zen","mindfulness"],"skins":[{"unified":"1f9d8-200d-2640-fe0f","native":"\u{1F9D8}\u200D\u2640\uFE0F"},{"unified":"1f9d8-1f3fb-200d-2640-fe0f","native":"\u{1F9D8}\u{1F3FB}\u200D\u2640\uFE0F"},{"unified":"1f9d8-1f3fc-200d-2640-fe0f","native":"\u{1F9D8}\u{1F3FC}\u200D\u2640\uFE0F"},{"unified":"1f9d8-1f3fd-200d-2640-fe0f","native":"\u{1F9D8}\u{1F3FD}\u200D\u2640\uFE0F"},{"unified":"1f9d8-1f3fe-200d-2640-fe0f","native":"\u{1F9D8}\u{1F3FE}\u200D\u2640\uFE0F"},{"unified":"1f9d8-1f3ff-200d-2640-fe0f","native":"\u{1F9D8}\u{1F3FF}\u200D\u2640\uFE0F"}],"version":5},"bath":{"id":"bath","name":"Bath","keywords":["person","taking","clean","shower","bathroom"],"skins":[{"unified":"1f6c0","native":"\u{1F6C0}"},{"unified":"1f6c0-1f3fb","native":"\u{1F6C0}\u{1F3FB}"},{"unified":"1f6c0-1f3fc","native":"\u{1F6C0}\u{1F3FC}"},{"unified":"1f6c0-1f3fd","native":"\u{1F6C0}\u{1F3FD}"},{"unified":"1f6c0-1f3fe","native":"\u{1F6C0}\u{1F3FE}"},{"unified":"1f6c0-1f3ff","native":"\u{1F6C0}\u{1F3FF}"}],"version":1},"sleeping_accommodation":{"id":"sleeping_accommodation","name":"Person in Bed","keywords":["sleeping","accommodation","rest"],"skins":[{"unified":"1f6cc","native":"\u{1F6CC}"},{"unified":"1f6cc-1f3fb","native":"\u{1F6CC}\u{1F3FB}"},{"unified":"1f6cc-1f3fc","native":"\u{1F6CC}\u{1F3FC}"},{"unified":"1f6cc-1f3fd","native":"\u{1F6CC}\u{1F3FD}"},{"unified":"1f6cc-1f3fe","native":"\u{1F6CC}\u{1F3FE}"},{"unified":"1f6cc-1f3ff","native":"\u{1F6CC}\u{1F3FF}"}],"version":1},"people_holding_hands":{"id":"people_holding_hands","name":"People Holding Hands","keywords":["friendship"],"skins":[{"unified":"1f9d1-200d-1f91d-200d-1f9d1","native":"\u{1F9D1}\u200D\u{1F91D}\u200D\u{1F9D1}"},{"unified":"1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb","native":"\u{1F9D1}\u{1F3FB}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FB}"},{"unified":"1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc","native":"\u{1F9D1}\u{1F3FC}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FC}"},{"unified":"1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd","native":"\u{1F9D1}\u{1F3FD}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FD}"},{"unified":"1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe","native":"\u{1F9D1}\u{1F3FE}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FE}"},{"unified":"1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff","native":"\u{1F9D1}\u{1F3FF}\u200D\u{1F91D}\u200D\u{1F9D1}\u{1F3FF}"}],"version":12},"two_women_holding_hands":{"id":"two_women_holding_hands","name":"Women Holding Hands","keywords":["two","pair","friendship","couple","love","like","female","people","human"],"skins":[{"unified":"1f46d","native":"\u{1F46D}"},{"unified":"1f46d-1f3fb","native":"\u{1F46D}\u{1F3FB}"},{"unified":"1f46d-1f3fc","native":"\u{1F46D}\u{1F3FC}"},{"unified":"1f46d-1f3fd","native":"\u{1F46D}\u{1F3FD}"},{"unified":"1f46d-1f3fe","native":"\u{1F46D}\u{1F3FE}"},{"unified":"1f46d-1f3ff","native":"\u{1F46D}\u{1F3FF}"}],"version":1},"man_and_woman_holding_hands":{"id":"man_and_woman_holding_hands","name":"Man and Woman Holding Hands","keywords":["couple","pair","people","human","love","date","dating","like","affection","valentines","marriage"],"skins":[{"unified":"1f46b","native":"\u{1F46B}"},{"unified":"1f46b-1f3fb","native":"\u{1F46B}\u{1F3FB}"},{"unified":"1f46b-1f3fc","native":"\u{1F46B}\u{1F3FC}"},{"unified":"1f46b-1f3fd","native":"\u{1F46B}\u{1F3FD}"},{"unified":"1f46b-1f3fe","native":"\u{1F46B}\u{1F3FE}"},{"unified":"1f46b-1f3ff","native":"\u{1F46B}\u{1F3FF}"}],"version":1},"two_men_holding_hands":{"id":"two_men_holding_hands","name":"Men Holding Hands","keywords":["two","pair","couple","love","like","bromance","friendship","people","human"],"skins":[{"unified":"1f46c","native":"\u{1F46C}"},{"unified":"1f46c-1f3fb","native":"\u{1F46C}\u{1F3FB}"},{"unified":"1f46c-1f3fc","native":"\u{1F46C}\u{1F3FC}"},{"unified":"1f46c-1f3fd","native":"\u{1F46C}\u{1F3FD}"},{"unified":"1f46c-1f3fe","native":"\u{1F46C}\u{1F3FE}"},{"unified":"1f46c-1f3ff","native":"\u{1F46C}\u{1F3FF}"}],"version":1},"couplekiss":{"id":"couplekiss","name":"Kiss","keywords":["couplekiss","pair","valentines","love","like","dating","marriage"],"skins":[{"unified":"1f48f","native":"\u{1F48F}"},{"unified":"1f48f-1f3fb","native":"\u{1F48F}\u{1F3FB}"},{"unified":"1f48f-1f3fc","native":"\u{1F48F}\u{1F3FC}"},{"unified":"1f48f-1f3fd","native":"\u{1F48F}\u{1F3FD}"},{"unified":"1f48f-1f3fe","native":"\u{1F48F}\u{1F3FE}"},{"unified":"1f48f-1f3ff","native":"\u{1F48F}\u{1F3FF}"}],"version":1},"woman-kiss-man":{"id":"woman-kiss-man","name":"Kiss: Woman, Man","keywords":["woman","kiss-man","kiss","love"],"skins":[{"unified":"1f469-200d-2764-fe0f-200d-1f48b-200d-1f468","native":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}"},{"unified":"1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","native":"\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}"},{"unified":"1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","native":"\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}"},{"unified":"1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","native":"\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}"},{"unified":"1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","native":"\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}"},{"unified":"1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","native":"\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}"}],"version":2},"man-kiss-man":{"id":"man-kiss-man","name":"Kiss: Man, Man","keywords":["kiss-man","kiss","pair","valentines","love","like","dating","marriage"],"skins":[{"unified":"1f468-200d-2764-fe0f-200d-1f48b-200d-1f468","native":"\u{1F468}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}"},{"unified":"1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","native":"\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FB}"},{"unified":"1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","native":"\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FC}"},{"unified":"1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","native":"\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FD}"},{"unified":"1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","native":"\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FE}"},{"unified":"1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","native":"\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F468}\u{1F3FF}"}],"version":2},"woman-kiss-woman":{"id":"woman-kiss-woman","name":"Kiss: Woman, Woman","keywords":["kiss-woman","kiss","pair","valentines","love","like","dating","marriage"],"skins":[{"unified":"1f469-200d-2764-fe0f-200d-1f48b-200d-1f469","native":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}"},{"unified":"1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","native":"\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FB}"},{"unified":"1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","native":"\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FC}"},{"unified":"1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","native":"\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FD}"},{"unified":"1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","native":"\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FE}"},{"unified":"1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","native":"\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F48B}\u200D\u{1F469}\u{1F3FF}"}],"version":2},"couple_with_heart":{"id":"couple_with_heart","name":"Couple with Heart","keywords":["pair","love","like","affection","human","dating","valentines","marriage"],"skins":[{"unified":"1f491","native":"\u{1F491}"},{"unified":"1f491-1f3fb","native":"\u{1F491}\u{1F3FB}"},{"unified":"1f491-1f3fc","native":"\u{1F491}\u{1F3FC}"},{"unified":"1f491-1f3fd","native":"\u{1F491}\u{1F3FD}"},{"unified":"1f491-1f3fe","native":"\u{1F491}\u{1F3FE}"},{"unified":"1f491-1f3ff","native":"\u{1F491}\u{1F3FF}"}],"version":1},"woman-heart-man":{"id":"woman-heart-man","name":"Couple with Heart: Woman, Man","keywords":["woman","heart-man","heart","love"],"skins":[{"unified":"1f469-200d-2764-fe0f-200d-1f468","native":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F468}"},{"unified":"1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","native":"\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}"},{"unified":"1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","native":"\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}"},{"unified":"1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","native":"\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}"},{"unified":"1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","native":"\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}"},{"unified":"1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff","native":"\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}"}],"version":2},"man-heart-man":{"id":"man-heart-man","name":"Couple with Heart: Man, Man","keywords":["heart-man","heart","pair","love","like","affection","human","dating","valentines","marriage"],"skins":[{"unified":"1f468-200d-2764-fe0f-200d-1f468","native":"\u{1F468}\u200D\u2764\uFE0F\u200D\u{1F468}"},{"unified":"1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","native":"\u{1F468}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FB}"},{"unified":"1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","native":"\u{1F468}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FC}"},{"unified":"1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","native":"\u{1F468}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FD}"},{"unified":"1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","native":"\u{1F468}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FE}"},{"unified":"1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff","native":"\u{1F468}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F468}\u{1F3FF}"}],"version":2},"woman-heart-woman":{"id":"woman-heart-woman","name":"Couple with Heart: Woman, Woman","keywords":["heart-woman","heart","pair","love","like","affection","human","dating","valentines","marriage"],"skins":[{"unified":"1f469-200d-2764-fe0f-200d-1f469","native":"\u{1F469}\u200D\u2764\uFE0F\u200D\u{1F469}"},{"unified":"1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fb","native":"\u{1F469}\u{1F3FB}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FB}"},{"unified":"1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fc","native":"\u{1F469}\u{1F3FC}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FC}"},{"unified":"1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fd","native":"\u{1F469}\u{1F3FD}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FD}"},{"unified":"1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fe","native":"\u{1F469}\u{1F3FE}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FE}"},{"unified":"1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3ff","native":"\u{1F469}\u{1F3FF}\u200D\u2764\uFE0F\u200D\u{1F469}\u{1F3FF}"}],"version":2},"family":{"id":"family","name":"Family","keywords":["home","parents","child","mom","dad","father","mother","people","human"],"skins":[{"unified":"1f46a","native":"\u{1F46A}"}],"version":1},"man-woman-boy":{"id":"man-woman-boy","name":"Family: Man, Woman, Boy","keywords":["man","woman-boy","family","woman","love"],"skins":[{"unified":"1f468-200d-1f469-200d-1f466","native":"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}"}],"version":2},"man-woman-girl":{"id":"man-woman-girl","name":"Family: Man, Woman, Girl","keywords":["man","woman-girl","family","woman","home","parents","people","human","child"],"skins":[{"unified":"1f468-200d-1f469-200d-1f467","native":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}"}],"version":2},"man-woman-girl-boy":{"id":"man-woman-girl-boy","name":"Family: Man, Woman, Girl, Boy","keywords":["man","woman-girl-boy","family","woman","girl","home","parents","people","human","children"],"skins":[{"unified":"1f468-200d-1f469-200d-1f467-200d-1f466","native":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}"}],"version":2},"man-woman-boy-boy":{"id":"man-woman-boy-boy","name":"Family: Man, Woman, Boy, Boy","keywords":["man","woman-boy-boy","family","woman","home","parents","people","human","children"],"skins":[{"unified":"1f468-200d-1f469-200d-1f466-200d-1f466","native":"\u{1F468}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}"}],"version":2},"man-woman-girl-girl":{"id":"man-woman-girl-girl","name":"Family: Man, Woman, Girl, Girl","keywords":["man","woman-girl-girl","family","woman","home","parents","people","human","children"],"skins":[{"unified":"1f468-200d-1f469-200d-1f467-200d-1f467","native":"\u{1F468}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}"}],"version":2},"man-man-boy":{"id":"man-man-boy","name":"Family: Man, Man, Boy","keywords":["man","man-boy","family","home","parents","people","human","children"],"skins":[{"unified":"1f468-200d-1f468-200d-1f466","native":"\u{1F468}\u200D\u{1F468}\u200D\u{1F466}"}],"version":2},"man-man-girl":{"id":"man-man-girl","name":"Family: Man, Man, Girl","keywords":["man","man-girl","family","home","parents","people","human","children"],"skins":[{"unified":"1f468-200d-1f468-200d-1f467","native":"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}"}],"version":2},"man-man-girl-boy":{"id":"man-man-girl-boy","name":"Family: Man, Man, Girl, Boy","keywords":["man","man-girl-boy","family","girl","home","parents","people","human","children"],"skins":[{"unified":"1f468-200d-1f468-200d-1f467-200d-1f466","native":"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F466}"}],"version":2},"man-man-boy-boy":{"id":"man-man-boy-boy","name":"Family: Man, Man, Boy, Boy","keywords":["man","man-boy-boy","family","home","parents","people","human","children"],"skins":[{"unified":"1f468-200d-1f468-200d-1f466-200d-1f466","native":"\u{1F468}\u200D\u{1F468}\u200D\u{1F466}\u200D\u{1F466}"}],"version":2},"man-man-girl-girl":{"id":"man-man-girl-girl","name":"Family: Man, Man, Girl, Girl","keywords":["man","man-girl-girl","family","home","parents","people","human","children"],"skins":[{"unified":"1f468-200d-1f468-200d-1f467-200d-1f467","native":"\u{1F468}\u200D\u{1F468}\u200D\u{1F467}\u200D\u{1F467}"}],"version":2},"woman-woman-boy":{"id":"woman-woman-boy","name":"Family: Woman, Woman, Boy","keywords":["woman","woman-boy","family","home","parents","people","human","children"],"skins":[{"unified":"1f469-200d-1f469-200d-1f466","native":"\u{1F469}\u200D\u{1F469}\u200D\u{1F466}"}],"version":2},"woman-woman-girl":{"id":"woman-woman-girl","name":"Family: Woman, Woman, Girl","keywords":["woman","woman-girl","family","home","parents","people","human","children"],"skins":[{"unified":"1f469-200d-1f469-200d-1f467","native":"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}"}],"version":2},"woman-woman-girl-boy":{"id":"woman-woman-girl-boy","name":"Family: Woman, Woman, Girl, Boy","keywords":["woman","woman-girl-boy","family","girl","home","parents","people","human","children"],"skins":[{"unified":"1f469-200d-1f469-200d-1f467-200d-1f466","native":"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F466}"}],"version":2},"woman-woman-boy-boy":{"id":"woman-woman-boy-boy","name":"Family: Woman, Woman, Boy, Boy","keywords":["woman","woman-boy-boy","family","home","parents","people","human","children"],"skins":[{"unified":"1f469-200d-1f469-200d-1f466-200d-1f466","native":"\u{1F469}\u200D\u{1F469}\u200D\u{1F466}\u200D\u{1F466}"}],"version":2},"woman-woman-girl-girl":{"id":"woman-woman-girl-girl","name":"Family: Woman, Woman, Girl, Girl","keywords":["woman","woman-girl-girl","family","home","parents","people","human","children"],"skins":[{"unified":"1f469-200d-1f469-200d-1f467-200d-1f467","native":"\u{1F469}\u200D\u{1F469}\u200D\u{1F467}\u200D\u{1F467}"}],"version":2},"man-boy":{"id":"man-boy","name":"Family: Man, Boy","keywords":["man","family","home","parent","people","human","child"],"skins":[{"unified":"1f468-200d-1f466","native":"\u{1F468}\u200D\u{1F466}"}],"version":4},"man-boy-boy":{"id":"man-boy-boy","name":"Family: Man, Boy, Boy","keywords":["man","boy-boy","family","home","parent","people","human","children"],"skins":[{"unified":"1f468-200d-1f466-200d-1f466","native":"\u{1F468}\u200D\u{1F466}\u200D\u{1F466}"}],"version":4},"man-girl":{"id":"man-girl","name":"Family: Man, Girl","keywords":["man","family","home","parent","people","human","child"],"skins":[{"unified":"1f468-200d-1f467","native":"\u{1F468}\u200D\u{1F467}"}],"version":4},"man-girl-boy":{"id":"man-girl-boy","name":"Family: Man, Girl, Boy","keywords":["man","girl-boy","family","girl","home","parent","people","human","children"],"skins":[{"unified":"1f468-200d-1f467-200d-1f466","native":"\u{1F468}\u200D\u{1F467}\u200D\u{1F466}"}],"version":4},"man-girl-girl":{"id":"man-girl-girl","name":"Family: Man, Girl, Girl","keywords":["man","girl-girl","family","home","parent","people","human","children"],"skins":[{"unified":"1f468-200d-1f467-200d-1f467","native":"\u{1F468}\u200D\u{1F467}\u200D\u{1F467}"}],"version":4},"woman-boy":{"id":"woman-boy","name":"Family: Woman, Boy","keywords":["woman","family","home","parent","people","human","child"],"skins":[{"unified":"1f469-200d-1f466","native":"\u{1F469}\u200D\u{1F466}"}],"version":4},"woman-boy-boy":{"id":"woman-boy-boy","name":"Family: Woman, Boy, Boy","keywords":["woman","boy-boy","family","home","parent","people","human","children"],"skins":[{"unified":"1f469-200d-1f466-200d-1f466","native":"\u{1F469}\u200D\u{1F466}\u200D\u{1F466}"}],"version":4},"woman-girl":{"id":"woman-girl","name":"Family: Woman, Girl","keywords":["woman","family","home","parent","people","human","child"],"skins":[{"unified":"1f469-200d-1f467","native":"\u{1F469}\u200D\u{1F467}"}],"version":4},"woman-girl-boy":{"id":"woman-girl-boy","name":"Family: Woman, Girl, Boy","keywords":["woman","girl-boy","family","girl","home","parent","people","human","children"],"skins":[{"unified":"1f469-200d-1f467-200d-1f466","native":"\u{1F469}\u200D\u{1F467}\u200D\u{1F466}"}],"version":4},"woman-girl-girl":{"id":"woman-girl-girl","name":"Family: Woman, Girl, Girl","keywords":["woman","girl-girl","family","home","parent","people","human","children"],"skins":[{"unified":"1f469-200d-1f467-200d-1f467","native":"\u{1F469}\u200D\u{1F467}\u200D\u{1F467}"}],"version":4},"speaking_head_in_silhouette":{"id":"speaking_head_in_silhouette","name":"Speaking Head","keywords":["in","silhouette","user","person","human","sing","say","talk"],"skins":[{"unified":"1f5e3-fe0f","native":"\u{1F5E3}\uFE0F"}],"version":1},"bust_in_silhouette":{"id":"bust_in_silhouette","name":"Bust in Silhouette","keywords":["user","person","human"],"skins":[{"unified":"1f464","native":"\u{1F464}"}],"version":1},"busts_in_silhouette":{"id":"busts_in_silhouette","name":"Busts in Silhouette","keywords":["user","person","human","group","team"],"skins":[{"unified":"1f465","native":"\u{1F465}"}],"version":1},"people_hugging":{"id":"people_hugging","name":"People Hugging","keywords":["care"],"skins":[{"unified":"1fac2","native":"\u{1FAC2}"}],"version":13},"footprints":{"id":"footprints","name":"Footprints","keywords":["feet","tracking","walking","beach"],"skins":[{"unified":"1f463","native":"\u{1F463}"}],"version":1},"monkey_face":{"id":"monkey_face","name":"Monkey Face","emoticons":[":o)"],"keywords":["animal","nature","circus"],"skins":[{"unified":"1f435","native":"\u{1F435}"}],"version":1},"monkey":{"id":"monkey","name":"Monkey","keywords":["animal","nature","banana","circus"],"skins":[{"unified":"1f412","native":"\u{1F412}"}],"version":1},"gorilla":{"id":"gorilla","name":"Gorilla","keywords":["animal","nature","circus"],"skins":[{"unified":"1f98d","native":"\u{1F98D}"}],"version":3},"orangutan":{"id":"orangutan","name":"Orangutan","keywords":["animal"],"skins":[{"unified":"1f9a7","native":"\u{1F9A7}"}],"version":12},"dog":{"id":"dog","name":"Dog Face","keywords":["animal","friend","nature","woof","puppy","pet","faithful"],"skins":[{"unified":"1f436","native":"\u{1F436}"}],"version":1},"dog2":{"id":"dog2","name":"Dog","keywords":["dog2","animal","nature","friend","doge","pet","faithful"],"skins":[{"unified":"1f415","native":"\u{1F415}"}],"version":1},"guide_dog":{"id":"guide_dog","name":"Guide Dog","keywords":["animal","blind"],"skins":[{"unified":"1f9ae","native":"\u{1F9AE}"}],"version":12},"service_dog":{"id":"service_dog","name":"Service Dog","keywords":["blind","animal"],"skins":[{"unified":"1f415-200d-1f9ba","native":"\u{1F415}\u200D\u{1F9BA}"}],"version":12},"poodle":{"id":"poodle","name":"Poodle","keywords":["dog","animal","101","nature","pet"],"skins":[{"unified":"1f429","native":"\u{1F429}"}],"version":1},"wolf":{"id":"wolf","name":"Wolf","keywords":["animal","nature","wild"],"skins":[{"unified":"1f43a","native":"\u{1F43A}"}],"version":1},"fox_face":{"id":"fox_face","name":"Fox","keywords":["face","animal","nature"],"skins":[{"unified":"1f98a","native":"\u{1F98A}"}],"version":3},"raccoon":{"id":"raccoon","name":"Raccoon","keywords":["animal","nature"],"skins":[{"unified":"1f99d","native":"\u{1F99D}"}],"version":11},"cat":{"id":"cat","name":"Cat Face","keywords":["animal","meow","nature","pet","kitten"],"skins":[{"unified":"1f431","native":"\u{1F431}"}],"version":1},"cat2":{"id":"cat2","name":"Cat","keywords":["cat2","animal","meow","pet","cats"],"skins":[{"unified":"1f408","native":"\u{1F408}"}],"version":1},"black_cat":{"id":"black_cat","name":"Black Cat","keywords":["superstition","luck"],"skins":[{"unified":"1f408-200d-2b1b","native":"\u{1F408}\u200D\u2B1B"}],"version":13},"lion_face":{"id":"lion_face","name":"Lion","keywords":["face","animal","nature"],"skins":[{"unified":"1f981","native":"\u{1F981}"}],"version":1},"tiger":{"id":"tiger","name":"Tiger Face","keywords":["animal","cat","danger","wild","nature","roar"],"skins":[{"unified":"1f42f","native":"\u{1F42F}"}],"version":1},"tiger2":{"id":"tiger2","name":"Tiger","keywords":["tiger2","animal","nature","roar"],"skins":[{"unified":"1f405","native":"\u{1F405}"}],"version":1},"leopard":{"id":"leopard","name":"Leopard","keywords":["animal","nature"],"skins":[{"unified":"1f406","native":"\u{1F406}"}],"version":1},"horse":{"id":"horse","name":"Horse Face","keywords":["animal","brown","nature"],"skins":[{"unified":"1f434","native":"\u{1F434}"}],"version":1},"moose":{"id":"moose","name":"Moose","keywords":["shrek","canada","sweden","sven","cool"],"skins":[{"unified":"1face","native":"\u{1FACE}"}],"version":15},"donkey":{"id":"donkey","name":"Donkey","keywords":["eeyore","mule"],"skins":[{"unified":"1facf","native":"\u{1FACF}"}],"version":15},"racehorse":{"id":"racehorse","name":"Horse","keywords":["racehorse","animal","gamble","luck"],"skins":[{"unified":"1f40e","native":"\u{1F40E}"}],"version":1},"unicorn_face":{"id":"unicorn_face","name":"Unicorn","keywords":["face","animal","nature","mystical"],"skins":[{"unified":"1f984","native":"\u{1F984}"}],"version":1},"zebra_face":{"id":"zebra_face","name":"Zebra","keywords":["face","animal","nature","stripes","safari"],"skins":[{"unified":"1f993","native":"\u{1F993}"}],"version":5},"deer":{"id":"deer","name":"Deer","keywords":["animal","nature","horns","venison"],"skins":[{"unified":"1f98c","native":"\u{1F98C}"}],"version":3},"bison":{"id":"bison","name":"Bison","keywords":["ox"],"skins":[{"unified":"1f9ac","native":"\u{1F9AC}"}],"version":13},"cow":{"id":"cow","name":"Cow Face","keywords":["beef","ox","animal","nature","moo","milk"],"skins":[{"unified":"1f42e","native":"\u{1F42E}"}],"version":1},"ox":{"id":"ox","name":"Ox","keywords":["animal","cow","beef"],"skins":[{"unified":"1f402","native":"\u{1F402}"}],"version":1},"water_buffalo":{"id":"water_buffalo","name":"Water Buffalo","keywords":["animal","nature","ox","cow"],"skins":[{"unified":"1f403","native":"\u{1F403}"}],"version":1},"cow2":{"id":"cow2","name":"Cow","keywords":["cow2","beef","ox","animal","nature","moo","milk"],"skins":[{"unified":"1f404","native":"\u{1F404}"}],"version":1},"pig":{"id":"pig","name":"Pig Face","keywords":["animal","oink","nature"],"skins":[{"unified":"1f437","native":"\u{1F437}"}],"version":1},"pig2":{"id":"pig2","name":"Pig","keywords":["pig2","animal","nature"],"skins":[{"unified":"1f416","native":"\u{1F416}"}],"version":1},"boar":{"id":"boar","name":"Boar","keywords":["animal","nature"],"skins":[{"unified":"1f417","native":"\u{1F417}"}],"version":1},"pig_nose":{"id":"pig_nose","name":"Pig Nose","keywords":["animal","oink"],"skins":[{"unified":"1f43d","native":"\u{1F43D}"}],"version":1},"ram":{"id":"ram","name":"Ram","keywords":["animal","sheep","nature"],"skins":[{"unified":"1f40f","native":"\u{1F40F}"}],"version":1},"sheep":{"id":"sheep","name":"Ewe","keywords":["sheep","animal","nature","wool","shipit"],"skins":[{"unified":"1f411","native":"\u{1F411}"}],"version":1},"goat":{"id":"goat","name":"Goat","keywords":["animal","nature"],"skins":[{"unified":"1f410","native":"\u{1F410}"}],"version":1},"dromedary_camel":{"id":"dromedary_camel","name":"Camel","keywords":["dromedary","animal","hot","desert","hump"],"skins":[{"unified":"1f42a","native":"\u{1F42A}"}],"version":1},"camel":{"id":"camel","name":"Bactrian Camel","keywords":["two","hump","animal","nature","hot","desert"],"skins":[{"unified":"1f42b","native":"\u{1F42B}"}],"version":1},"llama":{"id":"llama","name":"Llama","keywords":["animal","nature","alpaca"],"skins":[{"unified":"1f999","native":"\u{1F999}"}],"version":11},"giraffe_face":{"id":"giraffe_face","name":"Giraffe","keywords":["face","animal","nature","spots","safari"],"skins":[{"unified":"1f992","native":"\u{1F992}"}],"version":5},"elephant":{"id":"elephant","name":"Elephant","keywords":["animal","nature","nose","th","circus"],"skins":[{"unified":"1f418","native":"\u{1F418}"}],"version":1},"mammoth":{"id":"mammoth","name":"Mammoth","keywords":["elephant","tusks"],"skins":[{"unified":"1f9a3","native":"\u{1F9A3}"}],"version":13},"rhinoceros":{"id":"rhinoceros","name":"Rhinoceros","keywords":["animal","nature","horn"],"skins":[{"unified":"1f98f","native":"\u{1F98F}"}],"version":3},"hippopotamus":{"id":"hippopotamus","name":"Hippopotamus","keywords":["animal","nature"],"skins":[{"unified":"1f99b","native":"\u{1F99B}"}],"version":11},"mouse":{"id":"mouse","name":"Mouse Face","keywords":["animal","nature","cheese","wedge","rodent"],"skins":[{"unified":"1f42d","native":"\u{1F42D}"}],"version":1},"mouse2":{"id":"mouse2","name":"Mouse","keywords":["mouse2","animal","nature","rodent"],"skins":[{"unified":"1f401","native":"\u{1F401}"}],"version":1},"rat":{"id":"rat","name":"Rat","keywords":["animal","mouse","rodent"],"skins":[{"unified":"1f400","native":"\u{1F400}"}],"version":1},"hamster":{"id":"hamster","name":"Hamster","keywords":["animal","nature"],"skins":[{"unified":"1f439","native":"\u{1F439}"}],"version":1},"rabbit":{"id":"rabbit","name":"Rabbit Face","keywords":["animal","nature","pet","spring","magic","bunny"],"skins":[{"unified":"1f430","native":"\u{1F430}"}],"version":1},"rabbit2":{"id":"rabbit2","name":"Rabbit","keywords":["rabbit2","animal","nature","pet","magic","spring"],"skins":[{"unified":"1f407","native":"\u{1F407}"}],"version":1},"chipmunk":{"id":"chipmunk","name":"Chipmunk","keywords":["animal","nature","rodent","squirrel"],"skins":[{"unified":"1f43f-fe0f","native":"\u{1F43F}\uFE0F"}],"version":1},"beaver":{"id":"beaver","name":"Beaver","keywords":["animal","rodent"],"skins":[{"unified":"1f9ab","native":"\u{1F9AB}"}],"version":13},"hedgehog":{"id":"hedgehog","name":"Hedgehog","keywords":["animal","nature","spiny"],"skins":[{"unified":"1f994","native":"\u{1F994}"}],"version":5},"bat":{"id":"bat","name":"Bat","keywords":["animal","nature","blind","vampire"],"skins":[{"unified":"1f987","native":"\u{1F987}"}],"version":3},"bear":{"id":"bear","name":"Bear","keywords":["animal","nature","wild"],"skins":[{"unified":"1f43b","native":"\u{1F43B}"}],"version":1},"polar_bear":{"id":"polar_bear","name":"Polar Bear","keywords":["animal","arctic"],"skins":[{"unified":"1f43b-200d-2744-fe0f","native":"\u{1F43B}\u200D\u2744\uFE0F"}],"version":13},"koala":{"id":"koala","name":"Koala","keywords":["animal","nature"],"skins":[{"unified":"1f428","native":"\u{1F428}"}],"version":1},"panda_face":{"id":"panda_face","name":"Panda","keywords":["face","animal","nature"],"skins":[{"unified":"1f43c","native":"\u{1F43C}"}],"version":1},"sloth":{"id":"sloth","name":"Sloth","keywords":["animal"],"skins":[{"unified":"1f9a5","native":"\u{1F9A5}"}],"version":12},"otter":{"id":"otter","name":"Otter","keywords":["animal"],"skins":[{"unified":"1f9a6","native":"\u{1F9A6}"}],"version":12},"skunk":{"id":"skunk","name":"Skunk","keywords":["animal"],"skins":[{"unified":"1f9a8","native":"\u{1F9A8}"}],"version":12},"kangaroo":{"id":"kangaroo","name":"Kangaroo","keywords":["animal","nature","australia","joey","hop","marsupial"],"skins":[{"unified":"1f998","native":"\u{1F998}"}],"version":11},"badger":{"id":"badger","name":"Badger","keywords":["animal","nature","honey"],"skins":[{"unified":"1f9a1","native":"\u{1F9A1}"}],"version":11},"feet":{"id":"feet","name":"Paw Prints","keywords":["feet","animal","tracking","footprints","dog","cat","pet"],"skins":[{"unified":"1f43e","native":"\u{1F43E}"}],"version":1},"turkey":{"id":"turkey","name":"Turkey","keywords":["animal","bird"],"skins":[{"unified":"1f983","native":"\u{1F983}"}],"version":1},"chicken":{"id":"chicken","name":"Chicken","keywords":["animal","cluck","nature","bird"],"skins":[{"unified":"1f414","native":"\u{1F414}"}],"version":1},"rooster":{"id":"rooster","name":"Rooster","keywords":["animal","nature","chicken"],"skins":[{"unified":"1f413","native":"\u{1F413}"}],"version":1},"hatching_chick":{"id":"hatching_chick","name":"Hatching Chick","keywords":["animal","chicken","egg","born","baby","bird"],"skins":[{"unified":"1f423","native":"\u{1F423}"}],"version":1},"baby_chick":{"id":"baby_chick","name":"Baby Chick","keywords":["animal","chicken","bird"],"skins":[{"unified":"1f424","native":"\u{1F424}"}],"version":1},"hatched_chick":{"id":"hatched_chick","name":"Front-Facing Baby Chick","keywords":["hatched","front","facing","animal","chicken","bird"],"skins":[{"unified":"1f425","native":"\u{1F425}"}],"version":1},"bird":{"id":"bird","name":"Bird","keywords":["animal","nature","fly","tweet","spring"],"skins":[{"unified":"1f426","native":"\u{1F426}"}],"version":1},"penguin":{"id":"penguin","name":"Penguin","keywords":["animal","nature"],"skins":[{"unified":"1f427","native":"\u{1F427}"}],"version":1},"dove_of_peace":{"id":"dove_of_peace","name":"Dove","keywords":["of","peace","animal","bird"],"skins":[{"unified":"1f54a-fe0f","native":"\u{1F54A}\uFE0F"}],"version":1},"eagle":{"id":"eagle","name":"Eagle","keywords":["animal","nature","bird"],"skins":[{"unified":"1f985","native":"\u{1F985}"}],"version":3},"duck":{"id":"duck","name":"Duck","keywords":["animal","nature","bird","mallard"],"skins":[{"unified":"1f986","native":"\u{1F986}"}],"version":3},"swan":{"id":"swan","name":"Swan","keywords":["animal","nature","bird"],"skins":[{"unified":"1f9a2","native":"\u{1F9A2}"}],"version":11},"owl":{"id":"owl","name":"Owl","keywords":["animal","nature","bird","hoot"],"skins":[{"unified":"1f989","native":"\u{1F989}"}],"version":3},"dodo":{"id":"dodo","name":"Dodo","keywords":["animal","bird"],"skins":[{"unified":"1f9a4","native":"\u{1F9A4}"}],"version":13},"feather":{"id":"feather","name":"Feather","keywords":["bird","fly"],"skins":[{"unified":"1fab6","native":"\u{1FAB6}"}],"version":13},"flamingo":{"id":"flamingo","name":"Flamingo","keywords":["animal"],"skins":[{"unified":"1f9a9","native":"\u{1F9A9}"}],"version":12},"peacock":{"id":"peacock","name":"Peacock","keywords":["animal","nature","peahen","bird"],"skins":[{"unified":"1f99a","native":"\u{1F99A}"}],"version":11},"parrot":{"id":"parrot","name":"Parrot","keywords":["animal","nature","bird","pirate","talk"],"skins":[{"unified":"1f99c","native":"\u{1F99C}"}],"version":11},"wing":{"id":"wing","name":"Wing","keywords":["angel","birds","flying"],"skins":[{"unified":"1fabd","native":"\u{1FABD}"}],"version":15},"black_bird":{"id":"black_bird","name":"Black Bird","keywords":["crow"],"skins":[{"unified":"1f426-200d-2b1b","native":"\u{1F426}\u200D\u2B1B"}],"version":15},"goose":{"id":"goose","name":"Goose","keywords":["silly","jemima","goosebumps"],"skins":[{"unified":"1fabf","native":"\u{1FABF}"}],"version":15},"frog":{"id":"frog","name":"Frog","keywords":["animal","nature","croak","toad"],"skins":[{"unified":"1f438","native":"\u{1F438}"}],"version":1},"crocodile":{"id":"crocodile","name":"Crocodile","keywords":["animal","nature","reptile","lizard","alligator"],"skins":[{"unified":"1f40a","native":"\u{1F40A}"}],"version":1},"turtle":{"id":"turtle","name":"Turtle","keywords":["animal","slow","nature","tortoise"],"skins":[{"unified":"1f422","native":"\u{1F422}"}],"version":1},"lizard":{"id":"lizard","name":"Lizard","keywords":["animal","nature","reptile"],"skins":[{"unified":"1f98e","native":"\u{1F98E}"}],"version":3},"snake":{"id":"snake","name":"Snake","keywords":["animal","evil","nature","hiss","python"],"skins":[{"unified":"1f40d","native":"\u{1F40D}"}],"version":1},"dragon_face":{"id":"dragon_face","name":"Dragon Face","keywords":["animal","myth","nature","chinese","green"],"skins":[{"unified":"1f432","native":"\u{1F432}"}],"version":1},"dragon":{"id":"dragon","name":"Dragon","keywords":["animal","myth","nature","chinese","green"],"skins":[{"unified":"1f409","native":"\u{1F409}"}],"version":1},"sauropod":{"id":"sauropod","name":"Sauropod","keywords":["animal","nature","dinosaur","brachiosaurus","brontosaurus","diplodocus","extinct"],"skins":[{"unified":"1f995","native":"\u{1F995}"}],"version":5},"t-rex":{"id":"t-rex","name":"T-Rex","keywords":["t","rex","animal","nature","dinosaur","tyrannosaurus","extinct"],"skins":[{"unified":"1f996","native":"\u{1F996}"}],"version":5},"whale":{"id":"whale","name":"Spouting Whale","keywords":["animal","nature","sea","ocean"],"skins":[{"unified":"1f433","native":"\u{1F433}"}],"version":1},"whale2":{"id":"whale2","name":"Whale","keywords":["whale2","animal","nature","sea","ocean"],"skins":[{"unified":"1f40b","native":"\u{1F40B}"}],"version":1},"dolphin":{"id":"dolphin","name":"Dolphin","keywords":["flipper","animal","nature","fish","sea","ocean","fins","beach"],"skins":[{"unified":"1f42c","native":"\u{1F42C}"}],"version":1},"seal":{"id":"seal","name":"Seal","keywords":["animal","creature","sea"],"skins":[{"unified":"1f9ad","native":"\u{1F9AD}"}],"version":13},"fish":{"id":"fish","name":"Fish","keywords":["animal","food","nature"],"skins":[{"unified":"1f41f","native":"\u{1F41F}"}],"version":1},"tropical_fish":{"id":"tropical_fish","name":"Tropical Fish","keywords":["animal","swim","ocean","beach","nemo"],"skins":[{"unified":"1f420","native":"\u{1F420}"}],"version":1},"blowfish":{"id":"blowfish","name":"Blowfish","keywords":["animal","nature","food","sea","ocean"],"skins":[{"unified":"1f421","native":"\u{1F421}"}],"version":1},"shark":{"id":"shark","name":"Shark","keywords":["animal","nature","fish","sea","ocean","jaws","fins","beach"],"skins":[{"unified":"1f988","native":"\u{1F988}"}],"version":3},"octopus":{"id":"octopus","name":"Octopus","keywords":["animal","creature","ocean","sea","nature","beach"],"skins":[{"unified":"1f419","native":"\u{1F419}"}],"version":1},"shell":{"id":"shell","name":"Spiral Shell","keywords":["nature","sea","beach"],"skins":[{"unified":"1f41a","native":"\u{1F41A}"}],"version":1},"coral":{"id":"coral","name":"Coral","keywords":["ocean","sea","reef"],"skins":[{"unified":"1fab8","native":"\u{1FAB8}"}],"version":14},"jellyfish":{"id":"jellyfish","name":"Jellyfish","keywords":["sting","tentacles"],"skins":[{"unified":"1fabc","native":"\u{1FABC}"}],"version":15},"snail":{"id":"snail","name":"Snail","keywords":["slow","animal","shell"],"skins":[{"unified":"1f40c","native":"\u{1F40C}"}],"version":1},"butterfly":{"id":"butterfly","name":"Butterfly","keywords":["animal","insect","nature","caterpillar"],"skins":[{"unified":"1f98b","native":"\u{1F98B}"}],"version":3},"bug":{"id":"bug","name":"Bug","keywords":["animal","insect","nature","worm"],"skins":[{"unified":"1f41b","native":"\u{1F41B}"}],"version":1},"ant":{"id":"ant","name":"Ant","keywords":["animal","insect","nature","bug"],"skins":[{"unified":"1f41c","native":"\u{1F41C}"}],"version":1},"bee":{"id":"bee","name":"Honeybee","keywords":["bee","animal","insect","nature","bug","spring","honey"],"skins":[{"unified":"1f41d","native":"\u{1F41D}"}],"version":1},"beetle":{"id":"beetle","name":"Beetle","keywords":["insect"],"skins":[{"unified":"1fab2","native":"\u{1FAB2}"}],"version":13},"ladybug":{"id":"ladybug","name":"Lady Beetle","keywords":["ladybug","animal","insect","nature"],"skins":[{"unified":"1f41e","native":"\u{1F41E}"}],"version":1},"cricket":{"id":"cricket","name":"Cricket","keywords":["animal","chirp"],"skins":[{"unified":"1f997","native":"\u{1F997}"}],"version":5},"cockroach":{"id":"cockroach","name":"Cockroach","keywords":["insect","pests"],"skins":[{"unified":"1fab3","native":"\u{1FAB3}"}],"version":13},"spider":{"id":"spider","name":"Spider","keywords":["animal","arachnid"],"skins":[{"unified":"1f577-fe0f","native":"\u{1F577}\uFE0F"}],"version":1},"spider_web":{"id":"spider_web","name":"Spider Web","keywords":["animal","insect","arachnid","silk"],"skins":[{"unified":"1f578-fe0f","native":"\u{1F578}\uFE0F"}],"version":1},"scorpion":{"id":"scorpion","name":"Scorpion","keywords":["animal","arachnid"],"skins":[{"unified":"1f982","native":"\u{1F982}"}],"version":1},"mosquito":{"id":"mosquito","name":"Mosquito","keywords":["animal","nature","insect","malaria"],"skins":[{"unified":"1f99f","native":"\u{1F99F}"}],"version":11},"fly":{"id":"fly","name":"Fly","keywords":["insect"],"skins":[{"unified":"1fab0","native":"\u{1FAB0}"}],"version":13},"worm":{"id":"worm","name":"Worm","keywords":["animal"],"skins":[{"unified":"1fab1","native":"\u{1FAB1}"}],"version":13},"microbe":{"id":"microbe","name":"Microbe","keywords":["amoeba","bacteria","germs","virus","covid"],"skins":[{"unified":"1f9a0","native":"\u{1F9A0}"}],"version":11},"bouquet":{"id":"bouquet","name":"Bouquet","keywords":["flowers","nature","spring"],"skins":[{"unified":"1f490","native":"\u{1F490}"}],"version":1},"cherry_blossom":{"id":"cherry_blossom","name":"Cherry Blossom","keywords":["nature","plant","spring","flower"],"skins":[{"unified":"1f338","native":"\u{1F338}"}],"version":1},"white_flower":{"id":"white_flower","name":"White Flower","keywords":["japanese","spring"],"skins":[{"unified":"1f4ae","native":"\u{1F4AE}"}],"version":1},"lotus":{"id":"lotus","name":"Lotus","keywords":["flower","calm","meditation"],"skins":[{"unified":"1fab7","native":"\u{1FAB7}"}],"version":14},"rosette":{"id":"rosette","name":"Rosette","keywords":["flower","decoration","military"],"skins":[{"unified":"1f3f5-fe0f","native":"\u{1F3F5}\uFE0F"}],"version":1},"rose":{"id":"rose","name":"Rose","keywords":["flowers","valentines","love","spring"],"skins":[{"unified":"1f339","native":"\u{1F339}"}],"version":1},"wilted_flower":{"id":"wilted_flower","name":"Wilted Flower","keywords":["plant","nature","rose"],"skins":[{"unified":"1f940","native":"\u{1F940}"}],"version":3},"hibiscus":{"id":"hibiscus","name":"Hibiscus","keywords":["plant","vegetable","flowers","beach"],"skins":[{"unified":"1f33a","native":"\u{1F33A}"}],"version":1},"sunflower":{"id":"sunflower","name":"Sunflower","keywords":["nature","plant","fall"],"skins":[{"unified":"1f33b","native":"\u{1F33B}"}],"version":1},"blossom":{"id":"blossom","name":"Blossom","keywords":["nature","flowers","yellow"],"skins":[{"unified":"1f33c","native":"\u{1F33C}"}],"version":1},"tulip":{"id":"tulip","name":"Tulip","keywords":["flowers","plant","nature","summer","spring"],"skins":[{"unified":"1f337","native":"\u{1F337}"}],"version":1},"hyacinth":{"id":"hyacinth","name":"Hyacinth","keywords":["flower","lavender"],"skins":[{"unified":"1fabb","native":"\u{1FABB}"}],"version":15},"seedling":{"id":"seedling","name":"Seedling","keywords":["plant","nature","grass","lawn","spring"],"skins":[{"unified":"1f331","native":"\u{1F331}"}],"version":1},"potted_plant":{"id":"potted_plant","name":"Potted Plant","keywords":["greenery","house"],"skins":[{"unified":"1fab4","native":"\u{1FAB4}"}],"version":13},"evergreen_tree":{"id":"evergreen_tree","name":"Evergreen Tree","keywords":["plant","nature"],"skins":[{"unified":"1f332","native":"\u{1F332}"}],"version":1},"deciduous_tree":{"id":"deciduous_tree","name":"Deciduous Tree","keywords":["plant","nature"],"skins":[{"unified":"1f333","native":"\u{1F333}"}],"version":1},"palm_tree":{"id":"palm_tree","name":"Palm Tree","keywords":["plant","vegetable","nature","summer","beach","mojito","tropical"],"skins":[{"unified":"1f334","native":"\u{1F334}"}],"version":1},"cactus":{"id":"cactus","name":"Cactus","keywords":["vegetable","plant","nature"],"skins":[{"unified":"1f335","native":"\u{1F335}"}],"version":1},"ear_of_rice":{"id":"ear_of_rice","name":"Ear of Rice","keywords":["sheaf","nature","plant"],"skins":[{"unified":"1f33e","native":"\u{1F33E}"}],"version":1},"herb":{"id":"herb","name":"Herb","keywords":["vegetable","plant","medicine","weed","grass","lawn"],"skins":[{"unified":"1f33f","native":"\u{1F33F}"}],"version":1},"shamrock":{"id":"shamrock","name":"Shamrock","keywords":["vegetable","plant","nature","irish","clover"],"skins":[{"unified":"2618-fe0f","native":"\u2618\uFE0F"}],"version":1},"four_leaf_clover":{"id":"four_leaf_clover","name":"Four Leaf Clover","keywords":["vegetable","plant","nature","lucky","irish"],"skins":[{"unified":"1f340","native":"\u{1F340}"}],"version":1},"maple_leaf":{"id":"maple_leaf","name":"Maple Leaf","keywords":["nature","plant","vegetable","ca","fall"],"skins":[{"unified":"1f341","native":"\u{1F341}"}],"version":1},"fallen_leaf":{"id":"fallen_leaf","name":"Fallen Leaf","keywords":["nature","plant","vegetable","leaves"],"skins":[{"unified":"1f342","native":"\u{1F342}"}],"version":1},"leaves":{"id":"leaves","name":"Leaf Fluttering in Wind","keywords":["leaves","nature","plant","tree","vegetable","grass","lawn","spring"],"skins":[{"unified":"1f343","native":"\u{1F343}"}],"version":1},"empty_nest":{"id":"empty_nest","name":"Empty Nest","keywords":["bird"],"skins":[{"unified":"1fab9","native":"\u{1FAB9}"}],"version":14},"nest_with_eggs":{"id":"nest_with_eggs","name":"Nest with Eggs","keywords":["bird"],"skins":[{"unified":"1faba","native":"\u{1FABA}"}],"version":14},"mushroom":{"id":"mushroom","name":"Mushroom","keywords":["plant","vegetable"],"skins":[{"unified":"1f344","native":"\u{1F344}"}],"version":1},"grapes":{"id":"grapes","name":"Grapes","keywords":["fruit","food","wine"],"skins":[{"unified":"1f347","native":"\u{1F347}"}],"version":1},"melon":{"id":"melon","name":"Melon","keywords":["fruit","nature","food"],"skins":[{"unified":"1f348","native":"\u{1F348}"}],"version":1},"watermelon":{"id":"watermelon","name":"Watermelon","keywords":["fruit","food","picnic","summer"],"skins":[{"unified":"1f349","native":"\u{1F349}"}],"version":1},"tangerine":{"id":"tangerine","name":"Tangerine","keywords":["food","fruit","nature","orange"],"skins":[{"unified":"1f34a","native":"\u{1F34A}"}],"version":1},"lemon":{"id":"lemon","name":"Lemon","keywords":["fruit","nature"],"skins":[{"unified":"1f34b","native":"\u{1F34B}"}],"version":1},"banana":{"id":"banana","name":"Banana","keywords":["fruit","food","monkey"],"skins":[{"unified":"1f34c","native":"\u{1F34C}"}],"version":1},"pineapple":{"id":"pineapple","name":"Pineapple","keywords":["fruit","nature","food"],"skins":[{"unified":"1f34d","native":"\u{1F34D}"}],"version":1},"mango":{"id":"mango","name":"Mango","keywords":["fruit","food","tropical"],"skins":[{"unified":"1f96d","native":"\u{1F96D}"}],"version":11},"apple":{"id":"apple","name":"Red Apple","keywords":["fruit","mac","school"],"skins":[{"unified":"1f34e","native":"\u{1F34E}"}],"version":1},"green_apple":{"id":"green_apple","name":"Green Apple","keywords":["fruit","nature"],"skins":[{"unified":"1f34f","native":"\u{1F34F}"}],"version":1},"pear":{"id":"pear","name":"Pear","keywords":["fruit","nature","food"],"skins":[{"unified":"1f350","native":"\u{1F350}"}],"version":1},"peach":{"id":"peach","name":"Peach","keywords":["fruit","nature","food"],"skins":[{"unified":"1f351","native":"\u{1F351}"}],"version":1},"cherries":{"id":"cherries","name":"Cherries","keywords":["food","fruit"],"skins":[{"unified":"1f352","native":"\u{1F352}"}],"version":1},"strawberry":{"id":"strawberry","name":"Strawberry","keywords":["fruit","food","nature"],"skins":[{"unified":"1f353","native":"\u{1F353}"}],"version":1},"blueberries":{"id":"blueberries","name":"Blueberries","keywords":["fruit"],"skins":[{"unified":"1fad0","native":"\u{1FAD0}"}],"version":13},"kiwifruit":{"id":"kiwifruit","name":"Kiwifruit","keywords":["kiwi","fruit","food"],"skins":[{"unified":"1f95d","native":"\u{1F95D}"}],"version":3},"tomato":{"id":"tomato","name":"Tomato","keywords":["fruit","vegetable","nature","food"],"skins":[{"unified":"1f345","native":"\u{1F345}"}],"version":1},"olive":{"id":"olive","name":"Olive","keywords":["fruit"],"skins":[{"unified":"1fad2","native":"\u{1FAD2}"}],"version":13},"coconut":{"id":"coconut","name":"Coconut","keywords":["fruit","nature","food","palm"],"skins":[{"unified":"1f965","native":"\u{1F965}"}],"version":5},"avocado":{"id":"avocado","name":"Avocado","keywords":["fruit","food"],"skins":[{"unified":"1f951","native":"\u{1F951}"}],"version":3},"eggplant":{"id":"eggplant","name":"Eggplant","keywords":["vegetable","nature","food","aubergine"],"skins":[{"unified":"1f346","native":"\u{1F346}"}],"version":1},"potato":{"id":"potato","name":"Potato","keywords":["food","tuber","vegatable","starch"],"skins":[{"unified":"1f954","native":"\u{1F954}"}],"version":3},"carrot":{"id":"carrot","name":"Carrot","keywords":["vegetable","food","orange"],"skins":[{"unified":"1f955","native":"\u{1F955}"}],"version":3},"corn":{"id":"corn","name":"Ear of Corn","keywords":["food","vegetable","plant"],"skins":[{"unified":"1f33d","native":"\u{1F33D}"}],"version":1},"hot_pepper":{"id":"hot_pepper","name":"Hot Pepper","keywords":["food","spicy","chilli","chili"],"skins":[{"unified":"1f336-fe0f","native":"\u{1F336}\uFE0F"}],"version":1},"bell_pepper":{"id":"bell_pepper","name":"Bell Pepper","keywords":["fruit","plant"],"skins":[{"unified":"1fad1","native":"\u{1FAD1}"}],"version":13},"cucumber":{"id":"cucumber","name":"Cucumber","keywords":["fruit","food","pickle"],"skins":[{"unified":"1f952","native":"\u{1F952}"}],"version":3},"leafy_green":{"id":"leafy_green","name":"Leafy Green","keywords":["food","vegetable","plant","bok","choy","cabbage","kale","lettuce"],"skins":[{"unified":"1f96c","native":"\u{1F96C}"}],"version":11},"broccoli":{"id":"broccoli","name":"Broccoli","keywords":["fruit","food","vegetable"],"skins":[{"unified":"1f966","native":"\u{1F966}"}],"version":5},"garlic":{"id":"garlic","name":"Garlic","keywords":["food","spice","cook"],"skins":[{"unified":"1f9c4","native":"\u{1F9C4}"}],"version":12},"onion":{"id":"onion","name":"Onion","keywords":["cook","food","spice"],"skins":[{"unified":"1f9c5","native":"\u{1F9C5}"}],"version":12},"peanuts":{"id":"peanuts","name":"Peanuts","keywords":["food","nut"],"skins":[{"unified":"1f95c","native":"\u{1F95C}"}],"version":3},"beans":{"id":"beans","name":"Beans","keywords":["food"],"skins":[{"unified":"1fad8","native":"\u{1FAD8}"}],"version":14},"chestnut":{"id":"chestnut","name":"Chestnut","keywords":["food","squirrel"],"skins":[{"unified":"1f330","native":"\u{1F330}"}],"version":1},"ginger_root":{"id":"ginger_root","name":"Ginger Root","keywords":["spice","yellow","cooking","gingerbread"],"skins":[{"unified":"1fada","native":"\u{1FADA}"}],"version":15},"pea_pod":{"id":"pea_pod","name":"Pea Pod","keywords":["cozy","green"],"skins":[{"unified":"1fadb","native":"\u{1FADB}"}],"version":15},"bread":{"id":"bread","name":"Bread","keywords":["food","wheat","breakfast","toast"],"skins":[{"unified":"1f35e","native":"\u{1F35E}"}],"version":1},"croissant":{"id":"croissant","name":"Croissant","keywords":["food","bread","french"],"skins":[{"unified":"1f950","native":"\u{1F950}"}],"version":3},"baguette_bread":{"id":"baguette_bread","name":"Baguette Bread","keywords":["food","french","france","bakery"],"skins":[{"unified":"1f956","native":"\u{1F956}"}],"version":3},"flatbread":{"id":"flatbread","name":"Flatbread","keywords":["flour","food","bakery"],"skins":[{"unified":"1fad3","native":"\u{1FAD3}"}],"version":13},"pretzel":{"id":"pretzel","name":"Pretzel","keywords":["food","bread","twisted","germany","bakery"],"skins":[{"unified":"1f968","native":"\u{1F968}"}],"version":5},"bagel":{"id":"bagel","name":"Bagel","keywords":["food","bread","bakery","schmear","jewish"],"skins":[{"unified":"1f96f","native":"\u{1F96F}"}],"version":11},"pancakes":{"id":"pancakes","name":"Pancakes","keywords":["food","breakfast","flapjacks","hotcakes","brunch"],"skins":[{"unified":"1f95e","native":"\u{1F95E}"}],"version":3},"waffle":{"id":"waffle","name":"Waffle","keywords":["food","breakfast","brunch"],"skins":[{"unified":"1f9c7","native":"\u{1F9C7}"}],"version":12},"cheese_wedge":{"id":"cheese_wedge","name":"Cheese Wedge","keywords":["food","chadder","swiss"],"skins":[{"unified":"1f9c0","native":"\u{1F9C0}"}],"version":1},"meat_on_bone":{"id":"meat_on_bone","name":"Meat on Bone","keywords":["good","food","drumstick"],"skins":[{"unified":"1f356","native":"\u{1F356}"}],"version":1},"poultry_leg":{"id":"poultry_leg","name":"Poultry Leg","keywords":["food","meat","drumstick","bird","chicken","turkey"],"skins":[{"unified":"1f357","native":"\u{1F357}"}],"version":1},"cut_of_meat":{"id":"cut_of_meat","name":"Cut of Meat","keywords":["food","cow","chop","lambchop","porkchop"],"skins":[{"unified":"1f969","native":"\u{1F969}"}],"version":5},"bacon":{"id":"bacon","name":"Bacon","keywords":["food","breakfast","pork","pig","meat","brunch"],"skins":[{"unified":"1f953","native":"\u{1F953}"}],"version":3},"hamburger":{"id":"hamburger","name":"Hamburger","keywords":["meat","fast","food","beef","cheeseburger","mcdonalds","burger","king"],"skins":[{"unified":"1f354","native":"\u{1F354}"}],"version":1},"fries":{"id":"fries","name":"French Fries","keywords":["chips","snack","fast","food","potato"],"skins":[{"unified":"1f35f","native":"\u{1F35F}"}],"version":1},"pizza":{"id":"pizza","name":"Pizza","keywords":["food","party","italy"],"skins":[{"unified":"1f355","native":"\u{1F355}"}],"version":1},"hotdog":{"id":"hotdog","name":"Hot Dog","keywords":["hotdog","food","frankfurter","america"],"skins":[{"unified":"1f32d","native":"\u{1F32D}"}],"version":1},"sandwich":{"id":"sandwich","name":"Sandwich","keywords":["food","lunch","bread","toast","bakery"],"skins":[{"unified":"1f96a","native":"\u{1F96A}"}],"version":5},"taco":{"id":"taco","name":"Taco","keywords":["food","mexican"],"skins":[{"unified":"1f32e","native":"\u{1F32E}"}],"version":1},"burrito":{"id":"burrito","name":"Burrito","keywords":["food","mexican"],"skins":[{"unified":"1f32f","native":"\u{1F32F}"}],"version":1},"tamale":{"id":"tamale","name":"Tamale","keywords":["food","masa"],"skins":[{"unified":"1fad4","native":"\u{1FAD4}"}],"version":13},"stuffed_flatbread":{"id":"stuffed_flatbread","name":"Stuffed Flatbread","keywords":["food","gyro","mediterranean"],"skins":[{"unified":"1f959","native":"\u{1F959}"}],"version":3},"falafel":{"id":"falafel","name":"Falafel","keywords":["food","mediterranean"],"skins":[{"unified":"1f9c6","native":"\u{1F9C6}"}],"version":12},"egg":{"id":"egg","name":"Egg","keywords":["food","chicken","breakfast"],"skins":[{"unified":"1f95a","native":"\u{1F95A}"}],"version":3},"fried_egg":{"id":"fried_egg","name":"Cooking","keywords":["fried","egg","food","breakfast","kitchen","skillet"],"skins":[{"unified":"1f373","native":"\u{1F373}"}],"version":1},"shallow_pan_of_food":{"id":"shallow_pan_of_food","name":"Shallow Pan of Food","keywords":["cooking","casserole","paella","skillet"],"skins":[{"unified":"1f958","native":"\u{1F958}"}],"version":3},"stew":{"id":"stew","name":"Pot of Food","keywords":["stew","meat","soup","hot"],"skins":[{"unified":"1f372","native":"\u{1F372}"}],"version":1},"fondue":{"id":"fondue","name":"Fondue","keywords":["cheese","pot","food"],"skins":[{"unified":"1fad5","native":"\u{1FAD5}"}],"version":13},"bowl_with_spoon":{"id":"bowl_with_spoon","name":"Bowl with Spoon","keywords":["food","breakfast","cereal","oatmeal","porridge"],"skins":[{"unified":"1f963","native":"\u{1F963}"}],"version":5},"green_salad":{"id":"green_salad","name":"Green Salad","keywords":["food","healthy","lettuce","vegetable"],"skins":[{"unified":"1f957","native":"\u{1F957}"}],"version":3},"popcorn":{"id":"popcorn","name":"Popcorn","keywords":["food","movie","theater","films","snack","drama"],"skins":[{"unified":"1f37f","native":"\u{1F37F}"}],"version":1},"butter":{"id":"butter","name":"Butter","keywords":["food","cook"],"skins":[{"unified":"1f9c8","native":"\u{1F9C8}"}],"version":12},"salt":{"id":"salt","name":"Salt","keywords":["condiment","shaker"],"skins":[{"unified":"1f9c2","native":"\u{1F9C2}"}],"version":11},"canned_food":{"id":"canned_food","name":"Canned Food","keywords":["soup","tomatoes"],"skins":[{"unified":"1f96b","native":"\u{1F96B}"}],"version":5},"bento":{"id":"bento","name":"Bento Box","keywords":["food","japanese","lunch"],"skins":[{"unified":"1f371","native":"\u{1F371}"}],"version":1},"rice_cracker":{"id":"rice_cracker","name":"Rice Cracker","keywords":["food","japanese","snack"],"skins":[{"unified":"1f358","native":"\u{1F358}"}],"version":1},"rice_ball":{"id":"rice_ball","name":"Rice Ball","keywords":["food","japanese"],"skins":[{"unified":"1f359","native":"\u{1F359}"}],"version":1},"rice":{"id":"rice","name":"Cooked Rice","keywords":["food","asian"],"skins":[{"unified":"1f35a","native":"\u{1F35A}"}],"version":1},"curry":{"id":"curry","name":"Curry Rice","keywords":["food","spicy","hot","indian"],"skins":[{"unified":"1f35b","native":"\u{1F35B}"}],"version":1},"ramen":{"id":"ramen","name":"Steaming Bowl","keywords":["ramen","food","japanese","noodle","chopsticks"],"skins":[{"unified":"1f35c","native":"\u{1F35C}"}],"version":1},"spaghetti":{"id":"spaghetti","name":"Spaghetti","keywords":["food","italian","pasta","noodle"],"skins":[{"unified":"1f35d","native":"\u{1F35D}"}],"version":1},"sweet_potato":{"id":"sweet_potato","name":"Roasted Sweet Potato","keywords":["food","nature","plant"],"skins":[{"unified":"1f360","native":"\u{1F360}"}],"version":1},"oden":{"id":"oden","name":"Oden","keywords":["food","japanese"],"skins":[{"unified":"1f362","native":"\u{1F362}"}],"version":1},"sushi":{"id":"sushi","name":"Sushi","keywords":["food","fish","japanese","rice"],"skins":[{"unified":"1f363","native":"\u{1F363}"}],"version":1},"fried_shrimp":{"id":"fried_shrimp","name":"Fried Shrimp","keywords":["food","animal","appetizer","summer"],"skins":[{"unified":"1f364","native":"\u{1F364}"}],"version":1},"fish_cake":{"id":"fish_cake","name":"Fish Cake with Swirl","keywords":["food","japan","sea","beach","narutomaki","pink","kamaboko","surimi","ramen"],"skins":[{"unified":"1f365","native":"\u{1F365}"}],"version":1},"moon_cake":{"id":"moon_cake","name":"Moon Cake","keywords":["food","autumn","dessert"],"skins":[{"unified":"1f96e","native":"\u{1F96E}"}],"version":11},"dango":{"id":"dango","name":"Dango","keywords":["food","dessert","sweet","japanese","barbecue","meat"],"skins":[{"unified":"1f361","native":"\u{1F361}"}],"version":1},"dumpling":{"id":"dumpling","name":"Dumpling","keywords":["food","empanada","pierogi","potsticker","gyoza"],"skins":[{"unified":"1f95f","native":"\u{1F95F}"}],"version":5},"fortune_cookie":{"id":"fortune_cookie","name":"Fortune Cookie","keywords":["food","prophecy","dessert"],"skins":[{"unified":"1f960","native":"\u{1F960}"}],"version":5},"takeout_box":{"id":"takeout_box","name":"Takeout Box","keywords":["food","leftovers"],"skins":[{"unified":"1f961","native":"\u{1F961}"}],"version":5},"crab":{"id":"crab","name":"Crab","keywords":["animal","crustacean"],"skins":[{"unified":"1f980","native":"\u{1F980}"}],"version":1},"lobster":{"id":"lobster","name":"Lobster","keywords":["animal","nature","bisque","claws","seafood"],"skins":[{"unified":"1f99e","native":"\u{1F99E}"}],"version":11},"shrimp":{"id":"shrimp","name":"Shrimp","keywords":["animal","ocean","nature","seafood"],"skins":[{"unified":"1f990","native":"\u{1F990}"}],"version":3},"squid":{"id":"squid","name":"Squid","keywords":["animal","nature","ocean","sea"],"skins":[{"unified":"1f991","native":"\u{1F991}"}],"version":3},"oyster":{"id":"oyster","name":"Oyster","keywords":["food"],"skins":[{"unified":"1f9aa","native":"\u{1F9AA}"}],"version":12},"icecream":{"id":"icecream","name":"Soft Ice Cream","keywords":["icecream","food","hot","dessert","summer"],"skins":[{"unified":"1f366","native":"\u{1F366}"}],"version":1},"shaved_ice":{"id":"shaved_ice","name":"Shaved Ice","keywords":["hot","dessert","summer"],"skins":[{"unified":"1f367","native":"\u{1F367}"}],"version":1},"ice_cream":{"id":"ice_cream","name":"Ice Cream","keywords":["food","hot","dessert"],"skins":[{"unified":"1f368","native":"\u{1F368}"}],"version":1},"doughnut":{"id":"doughnut","name":"Doughnut","keywords":["food","dessert","snack","sweet","donut"],"skins":[{"unified":"1f369","native":"\u{1F369}"}],"version":1},"cookie":{"id":"cookie","name":"Cookie","keywords":["food","snack","oreo","chocolate","sweet","dessert"],"skins":[{"unified":"1f36a","native":"\u{1F36A}"}],"version":1},"birthday":{"id":"birthday","name":"Birthday Cake","keywords":["food","dessert"],"skins":[{"unified":"1f382","native":"\u{1F382}"}],"version":1},"cake":{"id":"cake","name":"Shortcake","keywords":["cake","food","dessert"],"skins":[{"unified":"1f370","native":"\u{1F370}"}],"version":1},"cupcake":{"id":"cupcake","name":"Cupcake","keywords":["food","dessert","bakery","sweet"],"skins":[{"unified":"1f9c1","native":"\u{1F9C1}"}],"version":11},"pie":{"id":"pie","name":"Pie","keywords":["food","dessert","pastry"],"skins":[{"unified":"1f967","native":"\u{1F967}"}],"version":5},"chocolate_bar":{"id":"chocolate_bar","name":"Chocolate Bar","keywords":["food","snack","dessert","sweet"],"skins":[{"unified":"1f36b","native":"\u{1F36B}"}],"version":1},"candy":{"id":"candy","name":"Candy","keywords":["snack","dessert","sweet","lolly"],"skins":[{"unified":"1f36c","native":"\u{1F36C}"}],"version":1},"lollipop":{"id":"lollipop","name":"Lollipop","keywords":["food","snack","candy","sweet"],"skins":[{"unified":"1f36d","native":"\u{1F36D}"}],"version":1},"custard":{"id":"custard","name":"Custard","keywords":["dessert","food"],"skins":[{"unified":"1f36e","native":"\u{1F36E}"}],"version":1},"honey_pot":{"id":"honey_pot","name":"Honey Pot","keywords":["bees","sweet","kitchen"],"skins":[{"unified":"1f36f","native":"\u{1F36F}"}],"version":1},"baby_bottle":{"id":"baby_bottle","name":"Baby Bottle","keywords":["food","container","milk"],"skins":[{"unified":"1f37c","native":"\u{1F37C}"}],"version":1},"glass_of_milk":{"id":"glass_of_milk","name":"Glass of Milk","keywords":["beverage","drink","cow"],"skins":[{"unified":"1f95b","native":"\u{1F95B}"}],"version":3},"coffee":{"id":"coffee","name":"Hot Beverage","keywords":["coffee","caffeine","latte","espresso","mug"],"skins":[{"unified":"2615","native":"\u2615"}],"version":1},"teapot":{"id":"teapot","name":"Teapot","keywords":["drink","hot"],"skins":[{"unified":"1fad6","native":"\u{1FAD6}"}],"version":13},"tea":{"id":"tea","name":"Teacup Without Handle","keywords":["tea","drink","bowl","breakfast","green","british"],"skins":[{"unified":"1f375","native":"\u{1F375}"}],"version":1},"sake":{"id":"sake","name":"Sake","keywords":["wine","drink","drunk","beverage","japanese","alcohol","booze"],"skins":[{"unified":"1f376","native":"\u{1F376}"}],"version":1},"champagne":{"id":"champagne","name":"Bottle with Popping Cork","keywords":["champagne","drink","wine","celebration"],"skins":[{"unified":"1f37e","native":"\u{1F37E}"}],"version":1},"wine_glass":{"id":"wine_glass","name":"Wine Glass","keywords":["drink","beverage","drunk","alcohol","booze"],"skins":[{"unified":"1f377","native":"\u{1F377}"}],"version":1},"cocktail":{"id":"cocktail","name":"Cocktail Glass","keywords":["drink","drunk","alcohol","beverage","booze","mojito"],"skins":[{"unified":"1f378","native":"\u{1F378}"}],"version":1},"tropical_drink":{"id":"tropical_drink","name":"Tropical Drink","keywords":["beverage","cocktail","summer","beach","alcohol","booze","mojito"],"skins":[{"unified":"1f379","native":"\u{1F379}"}],"version":1},"beer":{"id":"beer","name":"Beer Mug","keywords":["relax","beverage","drink","drunk","party","pub","summer","alcohol","booze"],"skins":[{"unified":"1f37a","native":"\u{1F37A}"}],"version":1},"beers":{"id":"beers","name":"Clinking Beer Mugs","keywords":["beers","relax","beverage","drink","drunk","party","pub","summer","alcohol","booze"],"skins":[{"unified":"1f37b","native":"\u{1F37B}"}],"version":1},"clinking_glasses":{"id":"clinking_glasses","name":"Clinking Glasses","keywords":["beverage","drink","party","alcohol","celebrate","cheers","wine","champagne","toast"],"skins":[{"unified":"1f942","native":"\u{1F942}"}],"version":3},"tumbler_glass":{"id":"tumbler_glass","name":"Tumbler Glass","keywords":["drink","beverage","drunk","alcohol","liquor","booze","bourbon","scotch","whisky","shot"],"skins":[{"unified":"1f943","native":"\u{1F943}"}],"version":3},"pouring_liquid":{"id":"pouring_liquid","name":"Pouring Liquid","keywords":["cup","water"],"skins":[{"unified":"1fad7","native":"\u{1FAD7}"}],"version":14},"cup_with_straw":{"id":"cup_with_straw","name":"Cup with Straw","keywords":["drink","soda"],"skins":[{"unified":"1f964","native":"\u{1F964}"}],"version":5},"bubble_tea":{"id":"bubble_tea","name":"Bubble Tea","keywords":["taiwan","boba","milk","straw"],"skins":[{"unified":"1f9cb","native":"\u{1F9CB}"}],"version":13},"beverage_box":{"id":"beverage_box","name":"Beverage Box","keywords":["drink"],"skins":[{"unified":"1f9c3","native":"\u{1F9C3}"}],"version":12},"mate_drink":{"id":"mate_drink","name":"Mate","keywords":["drink","tea","beverage"],"skins":[{"unified":"1f9c9","native":"\u{1F9C9}"}],"version":12},"ice_cube":{"id":"ice_cube","name":"Ice","keywords":["cube","water","cold"],"skins":[{"unified":"1f9ca","native":"\u{1F9CA}"}],"version":12},"chopsticks":{"id":"chopsticks","name":"Chopsticks","keywords":["food"],"skins":[{"unified":"1f962","native":"\u{1F962}"}],"version":5},"knife_fork_plate":{"id":"knife_fork_plate","name":"Fork and Knife with Plate","keywords":["food","eat","meal","lunch","dinner","restaurant"],"skins":[{"unified":"1f37d-fe0f","native":"\u{1F37D}\uFE0F"}],"version":1},"fork_and_knife":{"id":"fork_and_knife","name":"Fork and Knife","keywords":["cutlery","kitchen"],"skins":[{"unified":"1f374","native":"\u{1F374}"}],"version":1},"spoon":{"id":"spoon","name":"Spoon","keywords":["cutlery","kitchen","tableware"],"skins":[{"unified":"1f944","native":"\u{1F944}"}],"version":3},"hocho":{"id":"hocho","name":"Hocho","keywords":["knife","kitchen","blade","cutlery","weapon"],"skins":[{"unified":"1f52a","native":"\u{1F52A}"}],"version":1},"jar":{"id":"jar","name":"Jar","keywords":["container","sauce"],"skins":[{"unified":"1fad9","native":"\u{1FAD9}"}],"version":14},"amphora":{"id":"amphora","name":"Amphora","keywords":["vase","jar"],"skins":[{"unified":"1f3fa","native":"\u{1F3FA}"}],"version":1},"earth_africa":{"id":"earth_africa","name":"Earth Globe Europe-Africa","keywords":["africa","showing","europe","world","international"],"skins":[{"unified":"1f30d","native":"\u{1F30D}"}],"version":1},"earth_americas":{"id":"earth_americas","name":"Earth Globe Americas","keywords":["showing","world","USA","international"],"skins":[{"unified":"1f30e","native":"\u{1F30E}"}],"version":1},"earth_asia":{"id":"earth_asia","name":"Earth Globe Asia-Australia","keywords":["asia","showing","australia","world","east","international"],"skins":[{"unified":"1f30f","native":"\u{1F30F}"}],"version":1},"globe_with_meridians":{"id":"globe_with_meridians","name":"Globe with Meridians","keywords":["earth","international","world","internet","interweb","i18n"],"skins":[{"unified":"1f310","native":"\u{1F310}"}],"version":1},"world_map":{"id":"world_map","name":"World Map","keywords":["location","direction"],"skins":[{"unified":"1f5fa-fe0f","native":"\u{1F5FA}\uFE0F"}],"version":1},"japan":{"id":"japan","name":"Map of Japan","keywords":["nation","country","japanese","asia"],"skins":[{"unified":"1f5fe","native":"\u{1F5FE}"}],"version":1},"compass":{"id":"compass","name":"Compass","keywords":["magnetic","navigation","orienteering"],"skins":[{"unified":"1f9ed","native":"\u{1F9ED}"}],"version":11},"snow_capped_mountain":{"id":"snow_capped_mountain","name":"Snow-Capped Mountain","keywords":["snow","capped","photo","nature","environment","winter","cold"],"skins":[{"unified":"1f3d4-fe0f","native":"\u{1F3D4}\uFE0F"}],"version":1},"mountain":{"id":"mountain","name":"Mountain","keywords":["photo","nature","environment"],"skins":[{"unified":"26f0-fe0f","native":"\u26F0\uFE0F"}],"version":1},"volcano":{"id":"volcano","name":"Volcano","keywords":["photo","nature","disaster"],"skins":[{"unified":"1f30b","native":"\u{1F30B}"}],"version":1},"mount_fuji":{"id":"mount_fuji","name":"Mount Fuji","keywords":["photo","mountain","nature","japanese"],"skins":[{"unified":"1f5fb","native":"\u{1F5FB}"}],"version":1},"camping":{"id":"camping","name":"Camping","keywords":["photo","outdoors","tent"],"skins":[{"unified":"1f3d5-fe0f","native":"\u{1F3D5}\uFE0F"}],"version":1},"beach_with_umbrella":{"id":"beach_with_umbrella","name":"Beach with Umbrella","keywords":["weather","summer","sunny","sand","mojito"],"skins":[{"unified":"1f3d6-fe0f","native":"\u{1F3D6}\uFE0F"}],"version":1},"desert":{"id":"desert","name":"Desert","keywords":["photo","warm","saharah"],"skins":[{"unified":"1f3dc-fe0f","native":"\u{1F3DC}\uFE0F"}],"version":1},"desert_island":{"id":"desert_island","name":"Desert Island","keywords":["photo","tropical","mojito"],"skins":[{"unified":"1f3dd-fe0f","native":"\u{1F3DD}\uFE0F"}],"version":1},"national_park":{"id":"national_park","name":"National Park","keywords":["photo","environment","nature"],"skins":[{"unified":"1f3de-fe0f","native":"\u{1F3DE}\uFE0F"}],"version":1},"stadium":{"id":"stadium","name":"Stadium","keywords":["photo","place","sports","concert","venue"],"skins":[{"unified":"1f3df-fe0f","native":"\u{1F3DF}\uFE0F"}],"version":1},"classical_building":{"id":"classical_building","name":"Classical Building","keywords":["art","culture","history"],"skins":[{"unified":"1f3db-fe0f","native":"\u{1F3DB}\uFE0F"}],"version":1},"building_construction":{"id":"building_construction","name":"Building Construction","keywords":["wip","working","progress"],"skins":[{"unified":"1f3d7-fe0f","native":"\u{1F3D7}\uFE0F"}],"version":1},"bricks":{"id":"bricks","name":"Brick","keywords":["bricks"],"skins":[{"unified":"1f9f1","native":"\u{1F9F1}"}],"version":11},"rock":{"id":"rock","name":"Rock","keywords":["stone"],"skins":[{"unified":"1faa8","native":"\u{1FAA8}"}],"version":13},"wood":{"id":"wood","name":"Wood","keywords":["nature","timber","trunk"],"skins":[{"unified":"1fab5","native":"\u{1FAB5}"}],"version":13},"hut":{"id":"hut","name":"Hut","keywords":["house","structure"],"skins":[{"unified":"1f6d6","native":"\u{1F6D6}"}],"version":13},"house_buildings":{"id":"house_buildings","name":"Houses","keywords":["house","buildings","photo"],"skins":[{"unified":"1f3d8-fe0f","native":"\u{1F3D8}\uFE0F"}],"version":1},"derelict_house_building":{"id":"derelict_house_building","name":"Derelict House","keywords":["building","abandon","evict","broken"],"skins":[{"unified":"1f3da-fe0f","native":"\u{1F3DA}\uFE0F"}],"version":1},"house":{"id":"house","name":"House","keywords":["building","home"],"skins":[{"unified":"1f3e0","native":"\u{1F3E0}"}],"version":1},"house_with_garden":{"id":"house_with_garden","name":"House with Garden","keywords":["home","plant","nature"],"skins":[{"unified":"1f3e1","native":"\u{1F3E1}"}],"version":1},"office":{"id":"office","name":"Office Building","keywords":["bureau","work"],"skins":[{"unified":"1f3e2","native":"\u{1F3E2}"}],"version":1},"post_office":{"id":"post_office","name":"Japanese Post Office","keywords":["building","envelope","communication"],"skins":[{"unified":"1f3e3","native":"\u{1F3E3}"}],"version":1},"european_post_office":{"id":"european_post_office","name":"Post Office","keywords":["european","building","email"],"skins":[{"unified":"1f3e4","native":"\u{1F3E4}"}],"version":1},"hospital":{"id":"hospital","name":"Hospital","keywords":["building","health","surgery","doctor"],"skins":[{"unified":"1f3e5","native":"\u{1F3E5}"}],"version":1},"bank":{"id":"bank","name":"Bank","keywords":["building","money","sales","cash","business","enterprise"],"skins":[{"unified":"1f3e6","native":"\u{1F3E6}"}],"version":1},"hotel":{"id":"hotel","name":"Hotel","keywords":["building","accomodation","checkin"],"skins":[{"unified":"1f3e8","native":"\u{1F3E8}"}],"version":1},"love_hotel":{"id":"love_hotel","name":"Love Hotel","keywords":["like","affection","dating"],"skins":[{"unified":"1f3e9","native":"\u{1F3E9}"}],"version":1},"convenience_store":{"id":"convenience_store","name":"Convenience Store","keywords":["building","shopping","groceries"],"skins":[{"unified":"1f3ea","native":"\u{1F3EA}"}],"version":1},"school":{"id":"school","name":"School","keywords":["building","student","education","learn","teach"],"skins":[{"unified":"1f3eb","native":"\u{1F3EB}"}],"version":1},"department_store":{"id":"department_store","name":"Department Store","keywords":["building","shopping","mall"],"skins":[{"unified":"1f3ec","native":"\u{1F3EC}"}],"version":1},"factory":{"id":"factory","name":"Factory","keywords":["building","industry","pollution","smoke"],"skins":[{"unified":"1f3ed","native":"\u{1F3ED}"}],"version":1},"japanese_castle":{"id":"japanese_castle","name":"Japanese Castle","keywords":["photo","building"],"skins":[{"unified":"1f3ef","native":"\u{1F3EF}"}],"version":1},"european_castle":{"id":"european_castle","name":"Castle","keywords":["european","building","royalty","history"],"skins":[{"unified":"1f3f0","native":"\u{1F3F0}"}],"version":1},"wedding":{"id":"wedding","name":"Wedding","keywords":["love","like","affection","couple","marriage","bride","groom"],"skins":[{"unified":"1f492","native":"\u{1F492}"}],"version":1},"tokyo_tower":{"id":"tokyo_tower","name":"Tokyo Tower","keywords":["photo","japanese"],"skins":[{"unified":"1f5fc","native":"\u{1F5FC}"}],"version":1},"statue_of_liberty":{"id":"statue_of_liberty","name":"Statue of Liberty","keywords":["american","newyork"],"skins":[{"unified":"1f5fd","native":"\u{1F5FD}"}],"version":1},"church":{"id":"church","name":"Church","keywords":["building","religion","christ"],"skins":[{"unified":"26ea","native":"\u26EA"}],"version":1},"mosque":{"id":"mosque","name":"Mosque","keywords":["islam","worship","minaret"],"skins":[{"unified":"1f54c","native":"\u{1F54C}"}],"version":1},"hindu_temple":{"id":"hindu_temple","name":"Hindu Temple","keywords":["religion"],"skins":[{"unified":"1f6d5","native":"\u{1F6D5}"}],"version":12},"synagogue":{"id":"synagogue","name":"Synagogue","keywords":["judaism","worship","temple","jewish"],"skins":[{"unified":"1f54d","native":"\u{1F54D}"}],"version":1},"shinto_shrine":{"id":"shinto_shrine","name":"Shinto Shrine","keywords":["temple","japan","kyoto"],"skins":[{"unified":"26e9-fe0f","native":"\u26E9\uFE0F"}],"version":1},"kaaba":{"id":"kaaba","name":"Kaaba","keywords":["mecca","mosque","islam"],"skins":[{"unified":"1f54b","native":"\u{1F54B}"}],"version":1},"fountain":{"id":"fountain","name":"Fountain","keywords":["photo","summer","water","fresh"],"skins":[{"unified":"26f2","native":"\u26F2"}],"version":1},"tent":{"id":"tent","name":"Tent","keywords":["photo","camping","outdoors"],"skins":[{"unified":"26fa","native":"\u26FA"}],"version":1},"foggy":{"id":"foggy","name":"Foggy","keywords":["photo","mountain"],"skins":[{"unified":"1f301","native":"\u{1F301}"}],"version":1},"night_with_stars":{"id":"night_with_stars","name":"Night with Stars","keywords":["evening","city","downtown"],"skins":[{"unified":"1f303","native":"\u{1F303}"}],"version":1},"cityscape":{"id":"cityscape","name":"Cityscape","keywords":["photo","night","life","urban"],"skins":[{"unified":"1f3d9-fe0f","native":"\u{1F3D9}\uFE0F"}],"version":1},"sunrise_over_mountains":{"id":"sunrise_over_mountains","name":"Sunrise over Mountains","keywords":["view","vacation","photo"],"skins":[{"unified":"1f304","native":"\u{1F304}"}],"version":1},"sunrise":{"id":"sunrise","name":"Sunrise","keywords":["morning","view","vacation","photo"],"skins":[{"unified":"1f305","native":"\u{1F305}"}],"version":1},"city_sunset":{"id":"city_sunset","name":"Cityscape at Dusk","keywords":["city","sunset","photo","evening","sky","buildings"],"skins":[{"unified":"1f306","native":"\u{1F306}"}],"version":1},"city_sunrise":{"id":"city_sunrise","name":"Sunset","keywords":["city","sunrise","photo","good","morning","dawn"],"skins":[{"unified":"1f307","native":"\u{1F307}"}],"version":1},"bridge_at_night":{"id":"bridge_at_night","name":"Bridge at Night","keywords":["photo","sanfrancisco"],"skins":[{"unified":"1f309","native":"\u{1F309}"}],"version":1},"hotsprings":{"id":"hotsprings","name":"Hot Springs","keywords":["hotsprings","bath","warm","relax"],"skins":[{"unified":"2668-fe0f","native":"\u2668\uFE0F"}],"version":1},"carousel_horse":{"id":"carousel_horse","name":"Carousel Horse","keywords":["photo","carnival"],"skins":[{"unified":"1f3a0","native":"\u{1F3A0}"}],"version":1},"playground_slide":{"id":"playground_slide","name":"Playground Slide","keywords":["fun","park"],"skins":[{"unified":"1f6dd","native":"\u{1F6DD}"}],"version":14},"ferris_wheel":{"id":"ferris_wheel","name":"Ferris Wheel","keywords":["photo","carnival","londoneye"],"skins":[{"unified":"1f3a1","native":"\u{1F3A1}"}],"version":1},"roller_coaster":{"id":"roller_coaster","name":"Roller Coaster","keywords":["carnival","playground","photo","fun"],"skins":[{"unified":"1f3a2","native":"\u{1F3A2}"}],"version":1},"barber":{"id":"barber","name":"Barber Pole","keywords":["hair","salon","style"],"skins":[{"unified":"1f488","native":"\u{1F488}"}],"version":1},"circus_tent":{"id":"circus_tent","name":"Circus Tent","keywords":["festival","carnival","party"],"skins":[{"unified":"1f3aa","native":"\u{1F3AA}"}],"version":1},"steam_locomotive":{"id":"steam_locomotive","name":"Locomotive","keywords":["steam","transportation","vehicle","train"],"skins":[{"unified":"1f682","native":"\u{1F682}"}],"version":1},"railway_car":{"id":"railway_car","name":"Railway Car","keywords":["transportation","vehicle"],"skins":[{"unified":"1f683","native":"\u{1F683}"}],"version":1},"bullettrain_side":{"id":"bullettrain_side","name":"High-Speed Train","keywords":["bullettrain","side","high","speed","transportation","vehicle"],"skins":[{"unified":"1f684","native":"\u{1F684}"}],"version":1},"bullettrain_front":{"id":"bullettrain_front","name":"Bullet Train","keywords":["bullettrain","front","transportation","vehicle","speed","fast","public","travel"],"skins":[{"unified":"1f685","native":"\u{1F685}"}],"version":1},"train2":{"id":"train2","name":"Train","keywords":["train2","transportation","vehicle"],"skins":[{"unified":"1f686","native":"\u{1F686}"}],"version":1},"metro":{"id":"metro","name":"Metro","keywords":["transportation","blue","square","mrt","underground","tube"],"skins":[{"unified":"1f687","native":"\u{1F687}"}],"version":1},"light_rail":{"id":"light_rail","name":"Light Rail","keywords":["transportation","vehicle"],"skins":[{"unified":"1f688","native":"\u{1F688}"}],"version":1},"station":{"id":"station","name":"Station","keywords":["transportation","vehicle","public"],"skins":[{"unified":"1f689","native":"\u{1F689}"}],"version":1},"tram":{"id":"tram","name":"Tram","keywords":["transportation","vehicle"],"skins":[{"unified":"1f68a","native":"\u{1F68A}"}],"version":1},"monorail":{"id":"monorail","name":"Monorail","keywords":["transportation","vehicle"],"skins":[{"unified":"1f69d","native":"\u{1F69D}"}],"version":1},"mountain_railway":{"id":"mountain_railway","name":"Mountain Railway","keywords":["transportation","vehicle"],"skins":[{"unified":"1f69e","native":"\u{1F69E}"}],"version":1},"train":{"id":"train","name":"Tram Car","keywords":["train","transportation","vehicle","carriage","public","travel"],"skins":[{"unified":"1f68b","native":"\u{1F68B}"}],"version":1},"bus":{"id":"bus","name":"Bus","keywords":["car","vehicle","transportation"],"skins":[{"unified":"1f68c","native":"\u{1F68C}"}],"version":1},"oncoming_bus":{"id":"oncoming_bus","name":"Oncoming Bus","keywords":["vehicle","transportation"],"skins":[{"unified":"1f68d","native":"\u{1F68D}"}],"version":1},"trolleybus":{"id":"trolleybus","name":"Trolleybus","keywords":["bart","transportation","vehicle"],"skins":[{"unified":"1f68e","native":"\u{1F68E}"}],"version":1},"minibus":{"id":"minibus","name":"Minibus","keywords":["vehicle","car","transportation"],"skins":[{"unified":"1f690","native":"\u{1F690}"}],"version":1},"ambulance":{"id":"ambulance","name":"Ambulance","keywords":["health","911","hospital"],"skins":[{"unified":"1f691","native":"\u{1F691}"}],"version":1},"fire_engine":{"id":"fire_engine","name":"Fire Engine","keywords":["transportation","cars","vehicle"],"skins":[{"unified":"1f692","native":"\u{1F692}"}],"version":1},"police_car":{"id":"police_car","name":"Police Car","keywords":["vehicle","cars","transportation","law","legal","enforcement"],"skins":[{"unified":"1f693","native":"\u{1F693}"}],"version":1},"oncoming_police_car":{"id":"oncoming_police_car","name":"Oncoming Police Car","keywords":["vehicle","law","legal","enforcement","911"],"skins":[{"unified":"1f694","native":"\u{1F694}"}],"version":1},"taxi":{"id":"taxi","name":"Taxi","keywords":["uber","vehicle","cars","transportation"],"skins":[{"unified":"1f695","native":"\u{1F695}"}],"version":1},"oncoming_taxi":{"id":"oncoming_taxi","name":"Oncoming Taxi","keywords":["vehicle","cars","uber"],"skins":[{"unified":"1f696","native":"\u{1F696}"}],"version":1},"car":{"id":"car","name":"Automobile","keywords":["car","red","transportation","vehicle"],"skins":[{"unified":"1f697","native":"\u{1F697}"}],"version":1},"oncoming_automobile":{"id":"oncoming_automobile","name":"Oncoming Automobile","keywords":["car","vehicle","transportation"],"skins":[{"unified":"1f698","native":"\u{1F698}"}],"version":1},"blue_car":{"id":"blue_car","name":"Recreational Vehicle","keywords":["blue","car","sport","utility","transportation"],"skins":[{"unified":"1f699","native":"\u{1F699}"}],"version":1},"pickup_truck":{"id":"pickup_truck","name":"Pickup Truck","keywords":["car","transportation"],"skins":[{"unified":"1f6fb","native":"\u{1F6FB}"}],"version":13},"truck":{"id":"truck","name":"Delivery Truck","keywords":["cars","transportation"],"skins":[{"unified":"1f69a","native":"\u{1F69A}"}],"version":1},"articulated_lorry":{"id":"articulated_lorry","name":"Articulated Lorry","keywords":["vehicle","cars","transportation","express"],"skins":[{"unified":"1f69b","native":"\u{1F69B}"}],"version":1},"tractor":{"id":"tractor","name":"Tractor","keywords":["vehicle","car","farming","agriculture"],"skins":[{"unified":"1f69c","native":"\u{1F69C}"}],"version":1},"racing_car":{"id":"racing_car","name":"Racing Car","keywords":["sports","race","fast","formula","f1"],"skins":[{"unified":"1f3ce-fe0f","native":"\u{1F3CE}\uFE0F"}],"version":1},"racing_motorcycle":{"id":"racing_motorcycle","name":"Motorcycle","keywords":["racing","race","sports","fast"],"skins":[{"unified":"1f3cd-fe0f","native":"\u{1F3CD}\uFE0F"}],"version":1},"motor_scooter":{"id":"motor_scooter","name":"Motor Scooter","keywords":["vehicle","vespa","sasha"],"skins":[{"unified":"1f6f5","native":"\u{1F6F5}"}],"version":3},"manual_wheelchair":{"id":"manual_wheelchair","name":"Manual Wheelchair","keywords":["accessibility"],"skins":[{"unified":"1f9bd","native":"\u{1F9BD}"}],"version":12},"motorized_wheelchair":{"id":"motorized_wheelchair","name":"Motorized Wheelchair","keywords":["accessibility"],"skins":[{"unified":"1f9bc","native":"\u{1F9BC}"}],"version":12},"auto_rickshaw":{"id":"auto_rickshaw","name":"Auto Rickshaw","keywords":["move","transportation"],"skins":[{"unified":"1f6fa","native":"\u{1F6FA}"}],"version":12},"bike":{"id":"bike","name":"Bicycle","keywords":["bike","sports","exercise","hipster"],"skins":[{"unified":"1f6b2","native":"\u{1F6B2}"}],"version":1},"scooter":{"id":"scooter","name":"Scooter","keywords":["kick","vehicle","razor"],"skins":[{"unified":"1f6f4","native":"\u{1F6F4}"}],"version":3},"skateboard":{"id":"skateboard","name":"Skateboard","keywords":["board"],"skins":[{"unified":"1f6f9","native":"\u{1F6F9}"}],"version":11},"roller_skate":{"id":"roller_skate","name":"Roller Skate","keywords":["footwear","sports"],"skins":[{"unified":"1f6fc","native":"\u{1F6FC}"}],"version":13},"busstop":{"id":"busstop","name":"Bus Stop","keywords":["busstop","transportation","wait"],"skins":[{"unified":"1f68f","native":"\u{1F68F}"}],"version":1},"motorway":{"id":"motorway","name":"Motorway","keywords":["road","cupertino","interstate","highway"],"skins":[{"unified":"1f6e3-fe0f","native":"\u{1F6E3}\uFE0F"}],"version":1},"railway_track":{"id":"railway_track","name":"Railway Track","keywords":["train","transportation"],"skins":[{"unified":"1f6e4-fe0f","native":"\u{1F6E4}\uFE0F"}],"version":1},"oil_drum":{"id":"oil_drum","name":"Oil Drum","keywords":["barrell"],"skins":[{"unified":"1f6e2-fe0f","native":"\u{1F6E2}\uFE0F"}],"version":1},"fuelpump":{"id":"fuelpump","name":"Fuel Pump","keywords":["fuelpump","gas","station","petroleum"],"skins":[{"unified":"26fd","native":"\u26FD"}],"version":1},"wheel":{"id":"wheel","name":"Wheel","keywords":["car","transport"],"skins":[{"unified":"1f6de","native":"\u{1F6DE}"}],"version":14},"rotating_light":{"id":"rotating_light","name":"Police Car Light","keywords":["rotating","ambulance","911","emergency","alert","error","pinged","law","legal"],"skins":[{"unified":"1f6a8","native":"\u{1F6A8}"}],"version":1},"traffic_light":{"id":"traffic_light","name":"Horizontal Traffic Light","keywords":["transportation","signal"],"skins":[{"unified":"1f6a5","native":"\u{1F6A5}"}],"version":1},"vertical_traffic_light":{"id":"vertical_traffic_light","name":"Vertical Traffic Light","keywords":["transportation","driving"],"skins":[{"unified":"1f6a6","native":"\u{1F6A6}"}],"version":1},"octagonal_sign":{"id":"octagonal_sign","name":"Stop Sign","keywords":["octagonal"],"skins":[{"unified":"1f6d1","native":"\u{1F6D1}"}],"version":3},"construction":{"id":"construction","name":"Construction","keywords":["wip","progress","caution","warning"],"skins":[{"unified":"1f6a7","native":"\u{1F6A7}"}],"version":1},"anchor":{"id":"anchor","name":"Anchor","keywords":["ship","ferry","sea","boat"],"skins":[{"unified":"2693","native":"\u2693"}],"version":1},"ring_buoy":{"id":"ring_buoy","name":"Ring Buoy","keywords":["life","saver","preserver"],"skins":[{"unified":"1f6df","native":"\u{1F6DF}"}],"version":14},"boat":{"id":"boat","name":"Sailboat","keywords":["boat","ship","summer","transportation","water","sailing"],"skins":[{"unified":"26f5","native":"\u26F5"}],"version":1},"canoe":{"id":"canoe","name":"Canoe","keywords":["boat","paddle","water","ship"],"skins":[{"unified":"1f6f6","native":"\u{1F6F6}"}],"version":3},"speedboat":{"id":"speedboat","name":"Speedboat","keywords":["ship","transportation","vehicle","summer"],"skins":[{"unified":"1f6a4","native":"\u{1F6A4}"}],"version":1},"passenger_ship":{"id":"passenger_ship","name":"Passenger Ship","keywords":["yacht","cruise","ferry"],"skins":[{"unified":"1f6f3-fe0f","native":"\u{1F6F3}\uFE0F"}],"version":1},"ferry":{"id":"ferry","name":"Ferry","keywords":["boat","ship","yacht"],"skins":[{"unified":"26f4-fe0f","native":"\u26F4\uFE0F"}],"version":1},"motor_boat":{"id":"motor_boat","name":"Motor Boat","keywords":["ship"],"skins":[{"unified":"1f6e5-fe0f","native":"\u{1F6E5}\uFE0F"}],"version":1},"ship":{"id":"ship","name":"Ship","keywords":["transportation","titanic","deploy"],"skins":[{"unified":"1f6a2","native":"\u{1F6A2}"}],"version":1},"airplane":{"id":"airplane","name":"Airplane","keywords":["vehicle","transportation","flight","fly"],"skins":[{"unified":"2708-fe0f","native":"\u2708\uFE0F"}],"version":1},"small_airplane":{"id":"small_airplane","name":"Small Airplane","keywords":["flight","transportation","fly","vehicle"],"skins":[{"unified":"1f6e9-fe0f","native":"\u{1F6E9}\uFE0F"}],"version":1},"airplane_departure":{"id":"airplane_departure","name":"Airplane Departure","keywords":["airport","flight","landing"],"skins":[{"unified":"1f6eb","native":"\u{1F6EB}"}],"version":1},"airplane_arriving":{"id":"airplane_arriving","name":"Airplane Arrival","keywords":["arriving","airport","flight","boarding"],"skins":[{"unified":"1f6ec","native":"\u{1F6EC}"}],"version":1},"parachute":{"id":"parachute","name":"Parachute","keywords":["fly","glide"],"skins":[{"unified":"1fa82","native":"\u{1FA82}"}],"version":12},"seat":{"id":"seat","name":"Seat","keywords":["sit","airplane","transport","bus","flight","fly"],"skins":[{"unified":"1f4ba","native":"\u{1F4BA}"}],"version":1},"helicopter":{"id":"helicopter","name":"Helicopter","keywords":["transportation","vehicle","fly"],"skins":[{"unified":"1f681","native":"\u{1F681}"}],"version":1},"suspension_railway":{"id":"suspension_railway","name":"Suspension Railway","keywords":["vehicle","transportation"],"skins":[{"unified":"1f69f","native":"\u{1F69F}"}],"version":1},"mountain_cableway":{"id":"mountain_cableway","name":"Mountain Cableway","keywords":["transportation","vehicle","ski"],"skins":[{"unified":"1f6a0","native":"\u{1F6A0}"}],"version":1},"aerial_tramway":{"id":"aerial_tramway","name":"Aerial Tramway","keywords":["transportation","vehicle","ski"],"skins":[{"unified":"1f6a1","native":"\u{1F6A1}"}],"version":1},"satellite":{"id":"satellite","name":"Satellite","keywords":["communication","gps","orbit","spaceflight","NASA","ISS"],"skins":[{"unified":"1f6f0-fe0f","native":"\u{1F6F0}\uFE0F"}],"version":1},"rocket":{"id":"rocket","name":"Rocket","keywords":["launch","ship","staffmode","NASA","outer","space","fly"],"skins":[{"unified":"1f680","native":"\u{1F680}"}],"version":1},"flying_saucer":{"id":"flying_saucer","name":"Flying Saucer","keywords":["transportation","vehicle","ufo"],"skins":[{"unified":"1f6f8","native":"\u{1F6F8}"}],"version":5},"bellhop_bell":{"id":"bellhop_bell","name":"Bellhop Bell","keywords":["service"],"skins":[{"unified":"1f6ce-fe0f","native":"\u{1F6CE}\uFE0F"}],"version":1},"luggage":{"id":"luggage","name":"Luggage","keywords":["packing","travel"],"skins":[{"unified":"1f9f3","native":"\u{1F9F3}"}],"version":11},"hourglass":{"id":"hourglass","name":"Hourglass","keywords":["done","time","clock","oldschool","limit","exam","quiz","test"],"skins":[{"unified":"231b","native":"\u231B"}],"version":1},"hourglass_flowing_sand":{"id":"hourglass_flowing_sand","name":"Hourglass Not Done","keywords":["flowing","sand","oldschool","time","countdown"],"skins":[{"unified":"23f3","native":"\u23F3"}],"version":1},"watch":{"id":"watch","name":"Watch","keywords":["time","accessories"],"skins":[{"unified":"231a","native":"\u231A"}],"version":1},"alarm_clock":{"id":"alarm_clock","name":"Alarm Clock","keywords":["time","wake"],"skins":[{"unified":"23f0","native":"\u23F0"}],"version":1},"stopwatch":{"id":"stopwatch","name":"Stopwatch","keywords":["time","deadline"],"skins":[{"unified":"23f1-fe0f","native":"\u23F1\uFE0F"}],"version":1},"timer_clock":{"id":"timer_clock","name":"Timer Clock","keywords":["alarm"],"skins":[{"unified":"23f2-fe0f","native":"\u23F2\uFE0F"}],"version":1},"mantelpiece_clock":{"id":"mantelpiece_clock","name":"Mantelpiece Clock","keywords":["time"],"skins":[{"unified":"1f570-fe0f","native":"\u{1F570}\uFE0F"}],"version":1},"clock12":{"id":"clock12","name":"Twelve O\u2019clock","keywords":["clock12","o","clock","12","00:00","0000","12:00","1200","time","noon","midnight","midday","late","early","schedule"],"skins":[{"unified":"1f55b","native":"\u{1F55B}"}],"version":1},"clock1230":{"id":"clock1230","name":"Twelve-Thirty","keywords":["clock1230","twelve","thirty","00:30","0030","12:30","1230","time","late","early","schedule"],"skins":[{"unified":"1f567","native":"\u{1F567}"}],"version":1},"clock1":{"id":"clock1","name":"One O\u2019clock","keywords":["clock1","o","clock","1","1:00","100","13:00","1300","time","late","early","schedule"],"skins":[{"unified":"1f550","native":"\u{1F550}"}],"version":1},"clock130":{"id":"clock130","name":"One-Thirty","keywords":["clock130","one","thirty","1:30","130","13:30","1330","time","late","early","schedule"],"skins":[{"unified":"1f55c","native":"\u{1F55C}"}],"version":1},"clock2":{"id":"clock2","name":"Two O\u2019clock","keywords":["clock2","o","clock","2","2:00","200","14:00","1400","time","late","early","schedule"],"skins":[{"unified":"1f551","native":"\u{1F551}"}],"version":1},"clock230":{"id":"clock230","name":"Two-Thirty","keywords":["clock230","two","thirty","2:30","230","14:30","1430","time","late","early","schedule"],"skins":[{"unified":"1f55d","native":"\u{1F55D}"}],"version":1},"clock3":{"id":"clock3","name":"Three O\u2019clock","keywords":["clock3","o","clock","3","3:00","300","15:00","1500","time","late","early","schedule"],"skins":[{"unified":"1f552","native":"\u{1F552}"}],"version":1},"clock330":{"id":"clock330","name":"Three-Thirty","keywords":["clock330","three","thirty","3:30","330","15:30","1530","time","late","early","schedule"],"skins":[{"unified":"1f55e","native":"\u{1F55E}"}],"version":1},"clock4":{"id":"clock4","name":"Four O\u2019clock","keywords":["clock4","o","clock","4","4:00","400","16:00","1600","time","late","early","schedule"],"skins":[{"unified":"1f553","native":"\u{1F553}"}],"version":1},"clock430":{"id":"clock430","name":"Four-Thirty","keywords":["clock430","four","thirty","4:30","430","16:30","1630","time","late","early","schedule"],"skins":[{"unified":"1f55f","native":"\u{1F55F}"}],"version":1},"clock5":{"id":"clock5","name":"Five O\u2019clock","keywords":["clock5","o","clock","5","5:00","500","17:00","1700","time","late","early","schedule"],"skins":[{"unified":"1f554","native":"\u{1F554}"}],"version":1},"clock530":{"id":"clock530","name":"Five-Thirty","keywords":["clock530","five","thirty","5:30","530","17:30","1730","time","late","early","schedule"],"skins":[{"unified":"1f560","native":"\u{1F560}"}],"version":1},"clock6":{"id":"clock6","name":"Six O\u2019clock","keywords":["clock6","o","clock","6","6:00","600","18:00","1800","time","late","early","schedule","dawn","dusk"],"skins":[{"unified":"1f555","native":"\u{1F555}"}],"version":1},"clock630":{"id":"clock630","name":"Six-Thirty","keywords":["clock630","six","thirty","6:30","630","18:30","1830","time","late","early","schedule"],"skins":[{"unified":"1f561","native":"\u{1F561}"}],"version":1},"clock7":{"id":"clock7","name":"Seven O\u2019clock","keywords":["clock7","o","clock","7","7:00","700","19:00","1900","time","late","early","schedule"],"skins":[{"unified":"1f556","native":"\u{1F556}"}],"version":1},"clock730":{"id":"clock730","name":"Seven-Thirty","keywords":["clock730","seven","thirty","7:30","730","19:30","1930","time","late","early","schedule"],"skins":[{"unified":"1f562","native":"\u{1F562}"}],"version":1},"clock8":{"id":"clock8","name":"Eight O\u2019clock","keywords":["clock8","o","clock","8","8:00","800","20:00","2000","time","late","early","schedule"],"skins":[{"unified":"1f557","native":"\u{1F557}"}],"version":1},"clock830":{"id":"clock830","name":"Eight-Thirty","keywords":["clock830","eight","thirty","8:30","830","20:30","2030","time","late","early","schedule"],"skins":[{"unified":"1f563","native":"\u{1F563}"}],"version":1},"clock9":{"id":"clock9","name":"Nine O\u2019clock","keywords":["clock9","o","clock","9","9:00","900","21:00","2100","time","late","early","schedule"],"skins":[{"unified":"1f558","native":"\u{1F558}"}],"version":1},"clock930":{"id":"clock930","name":"Nine-Thirty","keywords":["clock930","nine","thirty","9:30","930","21:30","2130","time","late","early","schedule"],"skins":[{"unified":"1f564","native":"\u{1F564}"}],"version":1},"clock10":{"id":"clock10","name":"Ten O\u2019clock","keywords":["clock10","o","clock","10","10:00","1000","22:00","2200","time","late","early","schedule"],"skins":[{"unified":"1f559","native":"\u{1F559}"}],"version":1},"clock1030":{"id":"clock1030","name":"Ten-Thirty","keywords":["clock1030","ten","thirty","10:30","1030","22:30","2230","time","late","early","schedule"],"skins":[{"unified":"1f565","native":"\u{1F565}"}],"version":1},"clock11":{"id":"clock11","name":"Eleven O\u2019clock","keywords":["clock11","o","clock","11","11:00","1100","23:00","2300","time","late","early","schedule"],"skins":[{"unified":"1f55a","native":"\u{1F55A}"}],"version":1},"clock1130":{"id":"clock1130","name":"Eleven-Thirty","keywords":["clock1130","eleven","thirty","11:30","1130","23:30","2330","time","late","early","schedule"],"skins":[{"unified":"1f566","native":"\u{1F566}"}],"version":1},"new_moon":{"id":"new_moon","name":"New Moon","keywords":["nature","twilight","planet","space","night","evening","sleep"],"skins":[{"unified":"1f311","native":"\u{1F311}"}],"version":1},"waxing_crescent_moon":{"id":"waxing_crescent_moon","name":"Waxing Crescent Moon","keywords":["nature","twilight","planet","space","night","evening","sleep"],"skins":[{"unified":"1f312","native":"\u{1F312}"}],"version":1},"first_quarter_moon":{"id":"first_quarter_moon","name":"First Quarter Moon","keywords":["nature","twilight","planet","space","night","evening","sleep"],"skins":[{"unified":"1f313","native":"\u{1F313}"}],"version":1},"moon":{"id":"moon","name":"Waxing Gibbous Moon","keywords":["nature","night","sky","gray","twilight","planet","space","evening","sleep"],"skins":[{"unified":"1f314","native":"\u{1F314}"}],"version":1},"full_moon":{"id":"full_moon","name":"Full Moon","keywords":["nature","yellow","twilight","planet","space","night","evening","sleep"],"skins":[{"unified":"1f315","native":"\u{1F315}"}],"version":1},"waning_gibbous_moon":{"id":"waning_gibbous_moon","name":"Waning Gibbous Moon","keywords":["nature","twilight","planet","space","night","evening","sleep","waxing"],"skins":[{"unified":"1f316","native":"\u{1F316}"}],"version":1},"last_quarter_moon":{"id":"last_quarter_moon","name":"Last Quarter Moon","keywords":["nature","twilight","planet","space","night","evening","sleep"],"skins":[{"unified":"1f317","native":"\u{1F317}"}],"version":1},"waning_crescent_moon":{"id":"waning_crescent_moon","name":"Waning Crescent Moon","keywords":["nature","twilight","planet","space","night","evening","sleep"],"skins":[{"unified":"1f318","native":"\u{1F318}"}],"version":1},"crescent_moon":{"id":"crescent_moon","name":"Crescent Moon","keywords":["night","sleep","sky","evening","magic"],"skins":[{"unified":"1f319","native":"\u{1F319}"}],"version":1},"new_moon_with_face":{"id":"new_moon_with_face","name":"New Moon Face","keywords":["with","nature","twilight","planet","space","night","evening","sleep"],"skins":[{"unified":"1f31a","native":"\u{1F31A}"}],"version":1},"first_quarter_moon_with_face":{"id":"first_quarter_moon_with_face","name":"First Quarter Moon Face","keywords":["with","nature","twilight","planet","space","night","evening","sleep"],"skins":[{"unified":"1f31b","native":"\u{1F31B}"}],"version":1},"last_quarter_moon_with_face":{"id":"last_quarter_moon_with_face","name":"Last Quarter Moon Face","keywords":["with","nature","twilight","planet","space","night","evening","sleep"],"skins":[{"unified":"1f31c","native":"\u{1F31C}"}],"version":1},"thermometer":{"id":"thermometer","name":"Thermometer","keywords":["weather","temperature","hot","cold"],"skins":[{"unified":"1f321-fe0f","native":"\u{1F321}\uFE0F"}],"version":1},"sunny":{"id":"sunny","name":"Sun","keywords":["sunny","weather","nature","brightness","summer","beach","spring"],"skins":[{"unified":"2600-fe0f","native":"\u2600\uFE0F"}],"version":1},"full_moon_with_face":{"id":"full_moon_with_face","name":"Full Moon Face","keywords":["with","nature","twilight","planet","space","night","evening","sleep"],"skins":[{"unified":"1f31d","native":"\u{1F31D}"}],"version":1},"sun_with_face":{"id":"sun_with_face","name":"Sun with Face","keywords":["nature","morning","sky"],"skins":[{"unified":"1f31e","native":"\u{1F31E}"}],"version":1},"ringed_planet":{"id":"ringed_planet","name":"Ringed Planet","keywords":["outerspace"],"skins":[{"unified":"1fa90","native":"\u{1FA90}"}],"version":12},"star":{"id":"star","name":"Star","keywords":["night","yellow"],"skins":[{"unified":"2b50","native":"\u2B50"}],"version":1},"star2":{"id":"star2","name":"Glowing Star","keywords":["star2","night","sparkle","awesome","good","magic"],"skins":[{"unified":"1f31f","native":"\u{1F31F}"}],"version":1},"stars":{"id":"stars","name":"Shooting Star","keywords":["stars","night","photo"],"skins":[{"unified":"1f320","native":"\u{1F320}"}],"version":1},"milky_way":{"id":"milky_way","name":"Milky Way","keywords":["photo","space","stars"],"skins":[{"unified":"1f30c","native":"\u{1F30C}"}],"version":1},"cloud":{"id":"cloud","name":"Cloud","keywords":["weather","sky"],"skins":[{"unified":"2601-fe0f","native":"\u2601\uFE0F"}],"version":1},"partly_sunny":{"id":"partly_sunny","name":"Sun Behind Cloud","keywords":["partly","sunny","weather","nature","cloudy","morning","fall","spring"],"skins":[{"unified":"26c5","native":"\u26C5"}],"version":1},"thunder_cloud_and_rain":{"id":"thunder_cloud_and_rain","name":"Cloud with Lightning and Rain","keywords":["thunder","weather"],"skins":[{"unified":"26c8-fe0f","native":"\u26C8\uFE0F"}],"version":1},"mostly_sunny":{"id":"mostly_sunny","name":"Sun Behind Small Cloud","keywords":["mostly","sunny","weather"],"skins":[{"unified":"1f324-fe0f","native":"\u{1F324}\uFE0F"}],"version":1},"barely_sunny":{"id":"barely_sunny","name":"Sun Behind Large Cloud","keywords":["barely","sunny","weather"],"skins":[{"unified":"1f325-fe0f","native":"\u{1F325}\uFE0F"}],"version":1},"partly_sunny_rain":{"id":"partly_sunny_rain","name":"Sun Behind Rain Cloud","keywords":["partly","sunny","weather"],"skins":[{"unified":"1f326-fe0f","native":"\u{1F326}\uFE0F"}],"version":1},"rain_cloud":{"id":"rain_cloud","name":"Cloud with Rain","keywords":["weather"],"skins":[{"unified":"1f327-fe0f","native":"\u{1F327}\uFE0F"}],"version":1},"snow_cloud":{"id":"snow_cloud","name":"Cloud with Snow","keywords":["weather"],"skins":[{"unified":"1f328-fe0f","native":"\u{1F328}\uFE0F"}],"version":1},"lightning":{"id":"lightning","name":"Cloud with Lightning","keywords":["weather","thunder"],"skins":[{"unified":"1f329-fe0f","native":"\u{1F329}\uFE0F"}],"version":1},"tornado":{"id":"tornado","name":"Tornado","keywords":["cloud","weather","cyclone","twister"],"skins":[{"unified":"1f32a-fe0f","native":"\u{1F32A}\uFE0F"}],"version":1},"fog":{"id":"fog","name":"Fog","keywords":["weather"],"skins":[{"unified":"1f32b-fe0f","native":"\u{1F32B}\uFE0F"}],"version":1},"wind_blowing_face":{"id":"wind_blowing_face","name":"Wind Face","keywords":["blowing","gust","air"],"skins":[{"unified":"1f32c-fe0f","native":"\u{1F32C}\uFE0F"}],"version":1},"cyclone":{"id":"cyclone","name":"Cyclone","keywords":["weather","swirl","blue","cloud","vortex","spiral","whirlpool","spin","tornado","hurricane","typhoon"],"skins":[{"unified":"1f300","native":"\u{1F300}"}],"version":1},"rainbow":{"id":"rainbow","name":"Rainbow","keywords":["nature","happy","unicorn","face","photo","sky","spring"],"skins":[{"unified":"1f308","native":"\u{1F308}"}],"version":1},"closed_umbrella":{"id":"closed_umbrella","name":"Closed Umbrella","keywords":["weather","rain","drizzle"],"skins":[{"unified":"1f302","native":"\u{1F302}"}],"version":1},"umbrella":{"id":"umbrella","name":"Umbrella","keywords":["weather","spring"],"skins":[{"unified":"2602-fe0f","native":"\u2602\uFE0F"}],"version":1},"umbrella_with_rain_drops":{"id":"umbrella_with_rain_drops","name":"Umbrella with Rain Drops","keywords":["rainy","weather","spring"],"skins":[{"unified":"2614","native":"\u2614"}],"version":1},"umbrella_on_ground":{"id":"umbrella_on_ground","name":"Umbrella on Ground","keywords":["weather","summer"],"skins":[{"unified":"26f1-fe0f","native":"\u26F1\uFE0F"}],"version":1},"zap":{"id":"zap","name":"High Voltage","keywords":["zap","thunder","weather","lightning","bolt","fast"],"skins":[{"unified":"26a1","native":"\u26A1"}],"version":1},"snowflake":{"id":"snowflake","name":"Snowflake","keywords":["winter","season","cold","weather","christmas","xmas"],"skins":[{"unified":"2744-fe0f","native":"\u2744\uFE0F"}],"version":1},"snowman":{"id":"snowman","name":"Snowman","keywords":["winter","season","cold","weather","christmas","xmas","frozen"],"skins":[{"unified":"2603-fe0f","native":"\u2603\uFE0F"}],"version":1},"snowman_without_snow":{"id":"snowman_without_snow","name":"Snowman Without Snow","keywords":["winter","season","cold","weather","christmas","xmas","frozen"],"skins":[{"unified":"26c4","native":"\u26C4"}],"version":1},"comet":{"id":"comet","name":"Comet","keywords":["space"],"skins":[{"unified":"2604-fe0f","native":"\u2604\uFE0F"}],"version":1},"fire":{"id":"fire","name":"Fire","keywords":["hot","cook","flame"],"skins":[{"unified":"1f525","native":"\u{1F525}"}],"version":1},"droplet":{"id":"droplet","name":"Droplet","keywords":["water","drip","faucet","spring"],"skins":[{"unified":"1f4a7","native":"\u{1F4A7}"}],"version":1},"ocean":{"id":"ocean","name":"Water Wave","keywords":["ocean","sea","nature","tsunami","disaster"],"skins":[{"unified":"1f30a","native":"\u{1F30A}"}],"version":1},"jack_o_lantern":{"id":"jack_o_lantern","name":"Jack-O-Lantern","keywords":["jack","o","lantern","halloween","light","pumpkin","creepy","fall"],"skins":[{"unified":"1f383","native":"\u{1F383}"}],"version":1},"christmas_tree":{"id":"christmas_tree","name":"Christmas Tree","keywords":["festival","vacation","december","xmas","celebration"],"skins":[{"unified":"1f384","native":"\u{1F384}"}],"version":1},"fireworks":{"id":"fireworks","name":"Fireworks","keywords":["photo","festival","carnival","congratulations"],"skins":[{"unified":"1f386","native":"\u{1F386}"}],"version":1},"sparkler":{"id":"sparkler","name":"Sparkler","keywords":["stars","night","shine"],"skins":[{"unified":"1f387","native":"\u{1F387}"}],"version":1},"firecracker":{"id":"firecracker","name":"Firecracker","keywords":["dynamite","boom","explode","explosion","explosive"],"skins":[{"unified":"1f9e8","native":"\u{1F9E8}"}],"version":11},"sparkles":{"id":"sparkles","name":"Sparkles","keywords":["stars","shine","shiny","cool","awesome","good","magic"],"skins":[{"unified":"2728","native":"\u2728"}],"version":1},"balloon":{"id":"balloon","name":"Balloon","keywords":["party","celebration","birthday","circus"],"skins":[{"unified":"1f388","native":"\u{1F388}"}],"version":1},"tada":{"id":"tada","name":"Party Popper","keywords":["tada","congratulations","birthday","magic","circus","celebration"],"skins":[{"unified":"1f389","native":"\u{1F389}"}],"version":1},"confetti_ball":{"id":"confetti_ball","name":"Confetti Ball","keywords":["festival","party","birthday","circus"],"skins":[{"unified":"1f38a","native":"\u{1F38A}"}],"version":1},"tanabata_tree":{"id":"tanabata_tree","name":"Tanabata Tree","keywords":["plant","nature","branch","summer","bamboo","wish","star","festival","tanzaku"],"skins":[{"unified":"1f38b","native":"\u{1F38B}"}],"version":1},"bamboo":{"id":"bamboo","name":"Pine Decoration","keywords":["bamboo","japanese","plant","nature","vegetable","panda","new","years"],"skins":[{"unified":"1f38d","native":"\u{1F38D}"}],"version":1},"dolls":{"id":"dolls","name":"Japanese Dolls","keywords":["toy","kimono"],"skins":[{"unified":"1f38e","native":"\u{1F38E}"}],"version":1},"flags":{"id":"flags","name":"Carp Streamer","keywords":["flags","fish","japanese","koinobori","banner"],"skins":[{"unified":"1f38f","native":"\u{1F38F}"}],"version":1},"wind_chime":{"id":"wind_chime","name":"Wind Chime","keywords":["nature","ding","spring","bell"],"skins":[{"unified":"1f390","native":"\u{1F390}"}],"version":1},"rice_scene":{"id":"rice_scene","name":"Moon Viewing Ceremony","keywords":["rice","scene","photo","japan","asia","tsukimi"],"skins":[{"unified":"1f391","native":"\u{1F391}"}],"version":1},"red_envelope":{"id":"red_envelope","name":"Red Envelope","keywords":["gift"],"skins":[{"unified":"1f9e7","native":"\u{1F9E7}"}],"version":11},"ribbon":{"id":"ribbon","name":"Ribbon","keywords":["decoration","pink","girl","bowtie"],"skins":[{"unified":"1f380","native":"\u{1F380}"}],"version":1},"gift":{"id":"gift","name":"Wrapped Gift","keywords":["present","birthday","christmas","xmas"],"skins":[{"unified":"1f381","native":"\u{1F381}"}],"version":1},"reminder_ribbon":{"id":"reminder_ribbon","name":"Reminder Ribbon","keywords":["sports","cause","support","awareness"],"skins":[{"unified":"1f397-fe0f","native":"\u{1F397}\uFE0F"}],"version":1},"admission_tickets":{"id":"admission_tickets","name":"Admission Tickets","keywords":["sports","concert","entrance"],"skins":[{"unified":"1f39f-fe0f","native":"\u{1F39F}\uFE0F"}],"version":1},"ticket":{"id":"ticket","name":"Ticket","keywords":["event","concert","pass"],"skins":[{"unified":"1f3ab","native":"\u{1F3AB}"}],"version":1},"medal":{"id":"medal","name":"Military Medal","keywords":["award","winning","army"],"skins":[{"unified":"1f396-fe0f","native":"\u{1F396}\uFE0F"}],"version":1},"trophy":{"id":"trophy","name":"Trophy","keywords":["win","award","contest","place","ftw","ceremony"],"skins":[{"unified":"1f3c6","native":"\u{1F3C6}"}],"version":1},"sports_medal":{"id":"sports_medal","name":"Sports Medal","keywords":["award","winning"],"skins":[{"unified":"1f3c5","native":"\u{1F3C5}"}],"version":1},"first_place_medal":{"id":"first_place_medal","name":"1st Place Medal","keywords":["first","award","winning"],"skins":[{"unified":"1f947","native":"\u{1F947}"}],"version":3},"second_place_medal":{"id":"second_place_medal","name":"2nd Place Medal","keywords":["second","award"],"skins":[{"unified":"1f948","native":"\u{1F948}"}],"version":3},"third_place_medal":{"id":"third_place_medal","name":"3rd Place Medal","keywords":["third","award"],"skins":[{"unified":"1f949","native":"\u{1F949}"}],"version":3},"soccer":{"id":"soccer","name":"Soccer Ball","keywords":["sports","football"],"skins":[{"unified":"26bd","native":"\u26BD"}],"version":1},"baseball":{"id":"baseball","name":"Baseball","keywords":["sports","balls"],"skins":[{"unified":"26be","native":"\u26BE"}],"version":1},"softball":{"id":"softball","name":"Softball","keywords":["sports","balls"],"skins":[{"unified":"1f94e","native":"\u{1F94E}"}],"version":11},"basketball":{"id":"basketball","name":"Basketball","keywords":["sports","balls","NBA"],"skins":[{"unified":"1f3c0","native":"\u{1F3C0}"}],"version":1},"volleyball":{"id":"volleyball","name":"Volleyball","keywords":["sports","balls"],"skins":[{"unified":"1f3d0","native":"\u{1F3D0}"}],"version":1},"football":{"id":"football","name":"American Football","keywords":["sports","balls","NFL"],"skins":[{"unified":"1f3c8","native":"\u{1F3C8}"}],"version":1},"rugby_football":{"id":"rugby_football","name":"Rugby Football","keywords":["sports","team"],"skins":[{"unified":"1f3c9","native":"\u{1F3C9}"}],"version":1},"tennis":{"id":"tennis","name":"Tennis","keywords":["sports","balls","green"],"skins":[{"unified":"1f3be","native":"\u{1F3BE}"}],"version":1},"flying_disc":{"id":"flying_disc","name":"Flying Disc","keywords":["sports","frisbee","ultimate"],"skins":[{"unified":"1f94f","native":"\u{1F94F}"}],"version":11},"bowling":{"id":"bowling","name":"Bowling","keywords":["sports","fun","play"],"skins":[{"unified":"1f3b3","native":"\u{1F3B3}"}],"version":1},"cricket_bat_and_ball":{"id":"cricket_bat_and_ball","name":"Cricket Game","keywords":["bat","and","ball","sports"],"skins":[{"unified":"1f3cf","native":"\u{1F3CF}"}],"version":1},"field_hockey_stick_and_ball":{"id":"field_hockey_stick_and_ball","name":"Field Hockey","keywords":["stick","and","ball","sports"],"skins":[{"unified":"1f3d1","native":"\u{1F3D1}"}],"version":1},"ice_hockey_stick_and_puck":{"id":"ice_hockey_stick_and_puck","name":"Ice Hockey","keywords":["stick","and","puck","sports"],"skins":[{"unified":"1f3d2","native":"\u{1F3D2}"}],"version":1},"lacrosse":{"id":"lacrosse","name":"Lacrosse","keywords":["sports","ball","stick"],"skins":[{"unified":"1f94d","native":"\u{1F94D}"}],"version":11},"table_tennis_paddle_and_ball":{"id":"table_tennis_paddle_and_ball","name":"Ping Pong","keywords":["table","tennis","paddle","and","ball","sports","pingpong"],"skins":[{"unified":"1f3d3","native":"\u{1F3D3}"}],"version":1},"badminton_racquet_and_shuttlecock":{"id":"badminton_racquet_and_shuttlecock","name":"Badminton","keywords":["racquet","and","shuttlecock","sports"],"skins":[{"unified":"1f3f8","native":"\u{1F3F8}"}],"version":1},"boxing_glove":{"id":"boxing_glove","name":"Boxing Glove","keywords":["sports","fighting"],"skins":[{"unified":"1f94a","native":"\u{1F94A}"}],"version":3},"martial_arts_uniform":{"id":"martial_arts_uniform","name":"Martial Arts Uniform","keywords":["judo","karate","taekwondo"],"skins":[{"unified":"1f94b","native":"\u{1F94B}"}],"version":3},"goal_net":{"id":"goal_net","name":"Goal Net","keywords":["sports"],"skins":[{"unified":"1f945","native":"\u{1F945}"}],"version":3},"golf":{"id":"golf","name":"Flag in Hole","keywords":["golf","sports","business","summer"],"skins":[{"unified":"26f3","native":"\u26F3"}],"version":1},"ice_skate":{"id":"ice_skate","name":"Ice Skate","keywords":["sports"],"skins":[{"unified":"26f8-fe0f","native":"\u26F8\uFE0F"}],"version":1},"fishing_pole_and_fish":{"id":"fishing_pole_and_fish","name":"Fishing Pole","keywords":["and","fish","food","hobby","summer"],"skins":[{"unified":"1f3a3","native":"\u{1F3A3}"}],"version":1},"diving_mask":{"id":"diving_mask","name":"Diving Mask","keywords":["sport","ocean"],"skins":[{"unified":"1f93f","native":"\u{1F93F}"}],"version":12},"running_shirt_with_sash":{"id":"running_shirt_with_sash","name":"Running Shirt","keywords":["with","sash","play","pageant"],"skins":[{"unified":"1f3bd","native":"\u{1F3BD}"}],"version":1},"ski":{"id":"ski","name":"Skis","keywords":["ski","sports","winter","cold","snow"],"skins":[{"unified":"1f3bf","native":"\u{1F3BF}"}],"version":1},"sled":{"id":"sled","name":"Sled","keywords":["sleigh","luge","toboggan"],"skins":[{"unified":"1f6f7","native":"\u{1F6F7}"}],"version":5},"curling_stone":{"id":"curling_stone","name":"Curling Stone","keywords":["sports"],"skins":[{"unified":"1f94c","native":"\u{1F94C}"}],"version":5},"dart":{"id":"dart","name":"Bullseye","keywords":["dart","direct","hit","game","play","bar","target"],"skins":[{"unified":"1f3af","native":"\u{1F3AF}"}],"version":1},"yo-yo":{"id":"yo-yo","name":"Yo-Yo","keywords":["yo","toy"],"skins":[{"unified":"1fa80","native":"\u{1FA80}"}],"version":12},"kite":{"id":"kite","name":"Kite","keywords":["wind","fly"],"skins":[{"unified":"1fa81","native":"\u{1FA81}"}],"version":12},"gun":{"id":"gun","name":"Pistol","keywords":["gun","violence","weapon","revolver"],"skins":[{"unified":"1f52b","native":"\u{1F52B}"}],"version":1},"8ball":{"id":"8ball","name":"Billiards","keywords":["8ball","pool","8","ball","hobby","game","luck","magic"],"skins":[{"unified":"1f3b1","native":"\u{1F3B1}"}],"version":1},"crystal_ball":{"id":"crystal_ball","name":"Crystal Ball","keywords":["disco","party","magic","circus","fortune","teller"],"skins":[{"unified":"1f52e","native":"\u{1F52E}"}],"version":1},"magic_wand":{"id":"magic_wand","name":"Magic Wand","keywords":["supernature","power"],"skins":[{"unified":"1fa84","native":"\u{1FA84}"}],"version":13},"video_game":{"id":"video_game","name":"Video Game","keywords":["play","console","PS4","controller"],"skins":[{"unified":"1f3ae","native":"\u{1F3AE}"}],"version":1},"joystick":{"id":"joystick","name":"Joystick","keywords":["game","play"],"skins":[{"unified":"1f579-fe0f","native":"\u{1F579}\uFE0F"}],"version":1},"slot_machine":{"id":"slot_machine","name":"Slot Machine","keywords":["bet","gamble","vegas","fruit","luck","casino"],"skins":[{"unified":"1f3b0","native":"\u{1F3B0}"}],"version":1},"game_die":{"id":"game_die","name":"Game Die","keywords":["dice","random","tabletop","play","luck"],"skins":[{"unified":"1f3b2","native":"\u{1F3B2}"}],"version":1},"jigsaw":{"id":"jigsaw","name":"Puzzle Piece","keywords":["jigsaw","interlocking"],"skins":[{"unified":"1f9e9","native":"\u{1F9E9}"}],"version":11},"teddy_bear":{"id":"teddy_bear","name":"Teddy Bear","keywords":["plush","stuffed"],"skins":[{"unified":"1f9f8","native":"\u{1F9F8}"}],"version":11},"pinata":{"id":"pinata","name":"Pinata","keywords":["mexico","candy","celebration"],"skins":[{"unified":"1fa85","native":"\u{1FA85}"}],"version":13},"mirror_ball":{"id":"mirror_ball","name":"Mirror Ball","keywords":["disco","dance","party"],"skins":[{"unified":"1faa9","native":"\u{1FAA9}"}],"version":14},"nesting_dolls":{"id":"nesting_dolls","name":"Nesting Dolls","keywords":["matryoshka","toy"],"skins":[{"unified":"1fa86","native":"\u{1FA86}"}],"version":13},"spades":{"id":"spades","name":"Spade Suit","keywords":["spades","poker","cards","suits","magic"],"skins":[{"unified":"2660-fe0f","native":"\u2660\uFE0F"}],"version":1},"hearts":{"id":"hearts","name":"Heart Suit","keywords":["hearts","poker","cards","magic","suits"],"skins":[{"unified":"2665-fe0f","native":"\u2665\uFE0F"}],"version":1},"diamonds":{"id":"diamonds","name":"Diamond Suit","keywords":["diamonds","poker","cards","magic","suits"],"skins":[{"unified":"2666-fe0f","native":"\u2666\uFE0F"}],"version":1},"clubs":{"id":"clubs","name":"Club Suit","keywords":["clubs","poker","cards","magic","suits"],"skins":[{"unified":"2663-fe0f","native":"\u2663\uFE0F"}],"version":1},"chess_pawn":{"id":"chess_pawn","name":"Chess Pawn","keywords":["expendable"],"skins":[{"unified":"265f-fe0f","native":"\u265F\uFE0F"}],"version":11},"black_joker":{"id":"black_joker","name":"Joker","keywords":["black","poker","cards","game","play","magic"],"skins":[{"unified":"1f0cf","native":"\u{1F0CF}"}],"version":1},"mahjong":{"id":"mahjong","name":"Mahjong Red Dragon","keywords":["game","play","chinese","kanji"],"skins":[{"unified":"1f004","native":"\u{1F004}"}],"version":1},"flower_playing_cards":{"id":"flower_playing_cards","name":"Flower Playing Cards","keywords":["game","sunset","red"],"skins":[{"unified":"1f3b4","native":"\u{1F3B4}"}],"version":1},"performing_arts":{"id":"performing_arts","name":"Performing Arts","keywords":["acting","theater","drama"],"skins":[{"unified":"1f3ad","native":"\u{1F3AD}"}],"version":1},"frame_with_picture":{"id":"frame_with_picture","name":"Framed Picture","keywords":["frame","with","photography"],"skins":[{"unified":"1f5bc-fe0f","native":"\u{1F5BC}\uFE0F"}],"version":1},"art":{"id":"art","name":"Artist Palette","keywords":["art","design","paint","draw","colors"],"skins":[{"unified":"1f3a8","native":"\u{1F3A8}"}],"version":1},"thread":{"id":"thread","name":"Thread","keywords":["needle","sewing","spool","string"],"skins":[{"unified":"1f9f5","native":"\u{1F9F5}"}],"version":11},"sewing_needle":{"id":"sewing_needle","name":"Sewing Needle","keywords":["stitches"],"skins":[{"unified":"1faa1","native":"\u{1FAA1}"}],"version":13},"yarn":{"id":"yarn","name":"Yarn","keywords":["ball","crochet","knit"],"skins":[{"unified":"1f9f6","native":"\u{1F9F6}"}],"version":11},"knot":{"id":"knot","name":"Knot","keywords":["rope","scout"],"skins":[{"unified":"1faa2","native":"\u{1FAA2}"}],"version":13},"eyeglasses":{"id":"eyeglasses","name":"Glasses","keywords":["eyeglasses","fashion","accessories","eyesight","nerdy","dork","geek"],"skins":[{"unified":"1f453","native":"\u{1F453}"}],"version":1},"dark_sunglasses":{"id":"dark_sunglasses","name":"Sunglasses","keywords":["dark","face","cool","accessories"],"skins":[{"unified":"1f576-fe0f","native":"\u{1F576}\uFE0F"}],"version":1},"goggles":{"id":"goggles","name":"Goggles","keywords":["eyes","protection","safety"],"skins":[{"unified":"1f97d","native":"\u{1F97D}"}],"version":11},"lab_coat":{"id":"lab_coat","name":"Lab Coat","keywords":["doctor","experiment","scientist","chemist"],"skins":[{"unified":"1f97c","native":"\u{1F97C}"}],"version":11},"safety_vest":{"id":"safety_vest","name":"Safety Vest","keywords":["protection"],"skins":[{"unified":"1f9ba","native":"\u{1F9BA}"}],"version":12},"necktie":{"id":"necktie","name":"Necktie","keywords":["shirt","suitup","formal","fashion","cloth","business"],"skins":[{"unified":"1f454","native":"\u{1F454}"}],"version":1},"shirt":{"id":"shirt","name":"T-Shirt","keywords":["shirt","tshirt","t","fashion","cloth","casual","tee"],"skins":[{"unified":"1f455","native":"\u{1F455}"}],"version":1},"jeans":{"id":"jeans","name":"Jeans","keywords":["fashion","shopping"],"skins":[{"unified":"1f456","native":"\u{1F456}"}],"version":1},"scarf":{"id":"scarf","name":"Scarf","keywords":["neck","winter","clothes"],"skins":[{"unified":"1f9e3","native":"\u{1F9E3}"}],"version":5},"gloves":{"id":"gloves","name":"Gloves","keywords":["hands","winter","clothes"],"skins":[{"unified":"1f9e4","native":"\u{1F9E4}"}],"version":5},"coat":{"id":"coat","name":"Coat","keywords":["jacket"],"skins":[{"unified":"1f9e5","native":"\u{1F9E5}"}],"version":5},"socks":{"id":"socks","name":"Socks","keywords":["stockings","clothes"],"skins":[{"unified":"1f9e6","native":"\u{1F9E6}"}],"version":5},"dress":{"id":"dress","name":"Dress","keywords":["clothes","fashion","shopping"],"skins":[{"unified":"1f457","native":"\u{1F457}"}],"version":1},"kimono":{"id":"kimono","name":"Kimono","keywords":["dress","fashion","women","female","japanese"],"skins":[{"unified":"1f458","native":"\u{1F458}"}],"version":1},"sari":{"id":"sari","name":"Sari","keywords":["dress"],"skins":[{"unified":"1f97b","native":"\u{1F97B}"}],"version":12},"one-piece_swimsuit":{"id":"one-piece_swimsuit","name":"One-Piece Swimsuit","keywords":["one","piece","fashion"],"skins":[{"unified":"1fa71","native":"\u{1FA71}"}],"version":12},"briefs":{"id":"briefs","name":"Briefs","keywords":["clothing"],"skins":[{"unified":"1fa72","native":"\u{1FA72}"}],"version":12},"shorts":{"id":"shorts","name":"Shorts","keywords":["clothing"],"skins":[{"unified":"1fa73","native":"\u{1FA73}"}],"version":12},"bikini":{"id":"bikini","name":"Bikini","keywords":["swimming","female","woman","girl","fashion","beach","summer"],"skins":[{"unified":"1f459","native":"\u{1F459}"}],"version":1},"womans_clothes":{"id":"womans_clothes","name":"Womans Clothes","keywords":["woman","s","fashion","shopping","bags","female"],"skins":[{"unified":"1f45a","native":"\u{1F45A}"}],"version":1},"folding_hand_fan":{"id":"folding_hand_fan","name":"Folding Hand Fan","keywords":["flamenco","hot"],"skins":[{"unified":"1faad","native":"\u{1FAAD}"}],"version":15},"purse":{"id":"purse","name":"Purse","keywords":["fashion","accessories","money","sales","shopping"],"skins":[{"unified":"1f45b","native":"\u{1F45B}"}],"version":1},"handbag":{"id":"handbag","name":"Handbag","keywords":["fashion","accessory","accessories","shopping"],"skins":[{"unified":"1f45c","native":"\u{1F45C}"}],"version":1},"pouch":{"id":"pouch","name":"Pouch","keywords":["clutch","bag","accessories","shopping"],"skins":[{"unified":"1f45d","native":"\u{1F45D}"}],"version":1},"shopping_bags":{"id":"shopping_bags","name":"Shopping Bags","keywords":["mall","buy","purchase"],"skins":[{"unified":"1f6cd-fe0f","native":"\u{1F6CD}\uFE0F"}],"version":1},"school_satchel":{"id":"school_satchel","name":"Backpack","keywords":["school","satchel","student","education","bag"],"skins":[{"unified":"1f392","native":"\u{1F392}"}],"version":1},"thong_sandal":{"id":"thong_sandal","name":"Thong Sandal","keywords":["footwear","summer"],"skins":[{"unified":"1fa74","native":"\u{1FA74}"}],"version":13},"mans_shoe":{"id":"mans_shoe","name":"Mans Shoe","keywords":["man","s","fashion","male"],"skins":[{"unified":"1f45e","native":"\u{1F45E}"}],"version":1},"athletic_shoe":{"id":"athletic_shoe","name":"Running Shoe","keywords":["athletic","shoes","sports","sneakers"],"skins":[{"unified":"1f45f","native":"\u{1F45F}"}],"version":1},"hiking_boot":{"id":"hiking_boot","name":"Hiking Boot","keywords":["backpacking","camping"],"skins":[{"unified":"1f97e","native":"\u{1F97E}"}],"version":11},"womans_flat_shoe":{"id":"womans_flat_shoe","name":"Flat Shoe","keywords":["womans","ballet","slip","on","slipper"],"skins":[{"unified":"1f97f","native":"\u{1F97F}"}],"version":11},"high_heel":{"id":"high_heel","name":"High-Heeled Shoe","keywords":["high","heel","heeled","fashion","shoes","female","pumps","stiletto"],"skins":[{"unified":"1f460","native":"\u{1F460}"}],"version":1},"sandal":{"id":"sandal","name":"Womans Sandal","keywords":["woman","s","shoes","fashion","flip","flops"],"skins":[{"unified":"1f461","native":"\u{1F461}"}],"version":1},"ballet_shoes":{"id":"ballet_shoes","name":"Ballet Shoes","keywords":["dance"],"skins":[{"unified":"1fa70","native":"\u{1FA70}"}],"version":12},"boot":{"id":"boot","name":"Womans Boots","keywords":["boot","woman","s","shoes","fashion"],"skins":[{"unified":"1f462","native":"\u{1F462}"}],"version":1},"hair_pick":{"id":"hair_pick","name":"Hair Pick","keywords":["afro","comb"],"skins":[{"unified":"1faae","native":"\u{1FAAE}"}],"version":15},"crown":{"id":"crown","name":"Crown","keywords":["king","kod","leader","royalty","lord"],"skins":[{"unified":"1f451","native":"\u{1F451}"}],"version":1},"womans_hat":{"id":"womans_hat","name":"Womans Hat","keywords":["woman","s","fashion","accessories","female","lady","spring"],"skins":[{"unified":"1f452","native":"\u{1F452}"}],"version":1},"tophat":{"id":"tophat","name":"Top Hat","keywords":["tophat","magic","gentleman","classy","circus"],"skins":[{"unified":"1f3a9","native":"\u{1F3A9}"}],"version":1},"mortar_board":{"id":"mortar_board","name":"Graduation Cap","keywords":["mortar","board","school","college","degree","university","hat","legal","learn","education"],"skins":[{"unified":"1f393","native":"\u{1F393}"}],"version":1},"billed_cap":{"id":"billed_cap","name":"Billed Cap","keywords":["baseball"],"skins":[{"unified":"1f9e2","native":"\u{1F9E2}"}],"version":5},"military_helmet":{"id":"military_helmet","name":"Military Helmet","keywords":["army","protection"],"skins":[{"unified":"1fa96","native":"\u{1FA96}"}],"version":13},"helmet_with_white_cross":{"id":"helmet_with_white_cross","name":"Rescue Worker\u2019s Helmet","keywords":["with","white","cross","worker","s","construction","build"],"skins":[{"unified":"26d1-fe0f","native":"\u26D1\uFE0F"}],"version":1},"prayer_beads":{"id":"prayer_beads","name":"Prayer Beads","keywords":["dhikr","religious"],"skins":[{"unified":"1f4ff","native":"\u{1F4FF}"}],"version":1},"lipstick":{"id":"lipstick","name":"Lipstick","keywords":["female","girl","fashion","woman"],"skins":[{"unified":"1f484","native":"\u{1F484}"}],"version":1},"ring":{"id":"ring","name":"Ring","keywords":["wedding","propose","marriage","valentines","diamond","fashion","jewelry","gem","engagement"],"skins":[{"unified":"1f48d","native":"\u{1F48D}"}],"version":1},"gem":{"id":"gem","name":"Gem Stone","keywords":["blue","ruby","diamond","jewelry"],"skins":[{"unified":"1f48e","native":"\u{1F48E}"}],"version":1},"mute":{"id":"mute","name":"Muted Speaker","keywords":["mute","sound","volume","silence","quiet"],"skins":[{"unified":"1f507","native":"\u{1F507}"}],"version":1},"speaker":{"id":"speaker","name":"Speaker","keywords":["low","volume","sound","silence","broadcast"],"skins":[{"unified":"1f508","native":"\u{1F508}"}],"version":1},"sound":{"id":"sound","name":"Speaker Medium Volume","keywords":["sound","broadcast"],"skins":[{"unified":"1f509","native":"\u{1F509}"}],"version":1},"loud_sound":{"id":"loud_sound","name":"Speaker High Volume","keywords":["loud","sound","noise","noisy","broadcast"],"skins":[{"unified":"1f50a","native":"\u{1F50A}"}],"version":1},"loudspeaker":{"id":"loudspeaker","name":"Loudspeaker","keywords":["volume","sound"],"skins":[{"unified":"1f4e2","native":"\u{1F4E2}"}],"version":1},"mega":{"id":"mega","name":"Megaphone","keywords":["mega","sound","speaker","volume"],"skins":[{"unified":"1f4e3","native":"\u{1F4E3}"}],"version":1},"postal_horn":{"id":"postal_horn","name":"Postal Horn","keywords":["instrument","music"],"skins":[{"unified":"1f4ef","native":"\u{1F4EF}"}],"version":1},"bell":{"id":"bell","name":"Bell","keywords":["sound","notification","christmas","xmas","chime"],"skins":[{"unified":"1f514","native":"\u{1F514}"}],"version":1},"no_bell":{"id":"no_bell","name":"Bell with Slash","keywords":["no","sound","volume","mute","quiet","silent"],"skins":[{"unified":"1f515","native":"\u{1F515}"}],"version":1},"musical_score":{"id":"musical_score","name":"Musical Score","keywords":["treble","clef","compose"],"skins":[{"unified":"1f3bc","native":"\u{1F3BC}"}],"version":1},"musical_note":{"id":"musical_note","name":"Musical Note","keywords":["score","tone","sound"],"skins":[{"unified":"1f3b5","native":"\u{1F3B5}"}],"version":1},"notes":{"id":"notes","name":"Musical Notes","keywords":["music","score"],"skins":[{"unified":"1f3b6","native":"\u{1F3B6}"}],"version":1},"studio_microphone":{"id":"studio_microphone","name":"Studio Microphone","keywords":["sing","recording","artist","talkshow"],"skins":[{"unified":"1f399-fe0f","native":"\u{1F399}\uFE0F"}],"version":1},"level_slider":{"id":"level_slider","name":"Level Slider","keywords":["scale"],"skins":[{"unified":"1f39a-fe0f","native":"\u{1F39A}\uFE0F"}],"version":1},"control_knobs":{"id":"control_knobs","name":"Control Knobs","keywords":["dial"],"skins":[{"unified":"1f39b-fe0f","native":"\u{1F39B}\uFE0F"}],"version":1},"microphone":{"id":"microphone","name":"Microphone","keywords":["sound","music","PA","sing","talkshow"],"skins":[{"unified":"1f3a4","native":"\u{1F3A4}"}],"version":1},"headphones":{"id":"headphones","name":"Headphone","keywords":["headphones","music","score","gadgets"],"skins":[{"unified":"1f3a7","native":"\u{1F3A7}"}],"version":1},"radio":{"id":"radio","name":"Radio","keywords":["communication","music","podcast","program"],"skins":[{"unified":"1f4fb","native":"\u{1F4FB}"}],"version":1},"saxophone":{"id":"saxophone","name":"Saxophone","keywords":["music","instrument","jazz","blues"],"skins":[{"unified":"1f3b7","native":"\u{1F3B7}"}],"version":1},"accordion":{"id":"accordion","name":"Accordion","keywords":["music"],"skins":[{"unified":"1fa97","native":"\u{1FA97}"}],"version":13},"guitar":{"id":"guitar","name":"Guitar","keywords":["music","instrument"],"skins":[{"unified":"1f3b8","native":"\u{1F3B8}"}],"version":1},"musical_keyboard":{"id":"musical_keyboard","name":"Musical Keyboard","keywords":["piano","instrument","compose"],"skins":[{"unified":"1f3b9","native":"\u{1F3B9}"}],"version":1},"trumpet":{"id":"trumpet","name":"Trumpet","keywords":["music","brass"],"skins":[{"unified":"1f3ba","native":"\u{1F3BA}"}],"version":1},"violin":{"id":"violin","name":"Violin","keywords":["music","instrument","orchestra","symphony"],"skins":[{"unified":"1f3bb","native":"\u{1F3BB}"}],"version":1},"banjo":{"id":"banjo","name":"Banjo","keywords":["music","instructment"],"skins":[{"unified":"1fa95","native":"\u{1FA95}"}],"version":12},"drum_with_drumsticks":{"id":"drum_with_drumsticks","name":"Drum","keywords":["with","drumsticks","music","instrument","snare"],"skins":[{"unified":"1f941","native":"\u{1F941}"}],"version":3},"long_drum":{"id":"long_drum","name":"Long Drum","keywords":["music"],"skins":[{"unified":"1fa98","native":"\u{1FA98}"}],"version":13},"maracas":{"id":"maracas","name":"Maracas","keywords":["music","instrument","percussion"],"skins":[{"unified":"1fa87","native":"\u{1FA87}"}],"version":15},"flute":{"id":"flute","name":"Flute","keywords":["bamboo","music","instrument","pied","piper"],"skins":[{"unified":"1fa88","native":"\u{1FA88}"}],"version":15},"iphone":{"id":"iphone","name":"Mobile Phone","keywords":["iphone","technology","apple","gadgets","dial"],"skins":[{"unified":"1f4f1","native":"\u{1F4F1}"}],"version":1},"calling":{"id":"calling","name":"Mobile Phone with Arrow","keywords":["calling","iphone","incoming"],"skins":[{"unified":"1f4f2","native":"\u{1F4F2}"}],"version":1},"phone":{"id":"phone","name":"Telephone","keywords":["phone","technology","communication","dial"],"skins":[{"unified":"260e-fe0f","native":"\u260E\uFE0F"}],"version":1},"telephone_receiver":{"id":"telephone_receiver","name":"Telephone Receiver","keywords":["technology","communication","dial"],"skins":[{"unified":"1f4de","native":"\u{1F4DE}"}],"version":1},"pager":{"id":"pager","name":"Pager","keywords":["bbcall","oldschool","90s"],"skins":[{"unified":"1f4df","native":"\u{1F4DF}"}],"version":1},"fax":{"id":"fax","name":"Fax Machine","keywords":["communication","technology"],"skins":[{"unified":"1f4e0","native":"\u{1F4E0}"}],"version":1},"battery":{"id":"battery","name":"Battery","keywords":["power","energy","sustain"],"skins":[{"unified":"1f50b","native":"\u{1F50B}"}],"version":1},"low_battery":{"id":"low_battery","name":"Low Battery","keywords":["drained","dead"],"skins":[{"unified":"1faab","native":"\u{1FAAB}"}],"version":14},"electric_plug":{"id":"electric_plug","name":"Electric Plug","keywords":["charger","power"],"skins":[{"unified":"1f50c","native":"\u{1F50C}"}],"version":1},"computer":{"id":"computer","name":"Laptop","keywords":["computer","technology","screen","display","monitor"],"skins":[{"unified":"1f4bb","native":"\u{1F4BB}"}],"version":1},"desktop_computer":{"id":"desktop_computer","name":"Desktop Computer","keywords":["technology","computing","screen"],"skins":[{"unified":"1f5a5-fe0f","native":"\u{1F5A5}\uFE0F"}],"version":1},"printer":{"id":"printer","name":"Printer","keywords":["paper","ink"],"skins":[{"unified":"1f5a8-fe0f","native":"\u{1F5A8}\uFE0F"}],"version":1},"keyboard":{"id":"keyboard","name":"Keyboard","keywords":["technology","computer","type","input","text"],"skins":[{"unified":"2328-fe0f","native":"\u2328\uFE0F"}],"version":1},"three_button_mouse":{"id":"three_button_mouse","name":"Computer Mouse","keywords":["three","button","click"],"skins":[{"unified":"1f5b1-fe0f","native":"\u{1F5B1}\uFE0F"}],"version":1},"trackball":{"id":"trackball","name":"Trackball","keywords":["technology","trackpad"],"skins":[{"unified":"1f5b2-fe0f","native":"\u{1F5B2}\uFE0F"}],"version":1},"minidisc":{"id":"minidisc","name":"Minidisc","keywords":["computer","disk","technology","record","data","90s"],"skins":[{"unified":"1f4bd","native":"\u{1F4BD}"}],"version":1},"floppy_disk":{"id":"floppy_disk","name":"Floppy Disk","keywords":["oldschool","technology","save","90s","80s"],"skins":[{"unified":"1f4be","native":"\u{1F4BE}"}],"version":1},"cd":{"id":"cd","name":"Optical Disc","keywords":["cd","disk","technology","dvd","90s"],"skins":[{"unified":"1f4bf","native":"\u{1F4BF}"}],"version":1},"dvd":{"id":"dvd","name":"Dvd","keywords":["cd","disk","disc"],"skins":[{"unified":"1f4c0","native":"\u{1F4C0}"}],"version":1},"abacus":{"id":"abacus","name":"Abacus","keywords":["calculation"],"skins":[{"unified":"1f9ee","native":"\u{1F9EE}"}],"version":11},"movie_camera":{"id":"movie_camera","name":"Movie Camera","keywords":["film","record"],"skins":[{"unified":"1f3a5","native":"\u{1F3A5}"}],"version":1},"film_frames":{"id":"film_frames","name":"Film Frames","keywords":["movie"],"skins":[{"unified":"1f39e-fe0f","native":"\u{1F39E}\uFE0F"}],"version":1},"film_projector":{"id":"film_projector","name":"Film Projector","keywords":["video","tape","record","movie"],"skins":[{"unified":"1f4fd-fe0f","native":"\u{1F4FD}\uFE0F"}],"version":1},"clapper":{"id":"clapper","name":"Clapper Board","keywords":["movie","film","record"],"skins":[{"unified":"1f3ac","native":"\u{1F3AC}"}],"version":1},"tv":{"id":"tv","name":"Television","keywords":["tv","technology","program","oldschool","show"],"skins":[{"unified":"1f4fa","native":"\u{1F4FA}"}],"version":1},"camera":{"id":"camera","name":"Camera","keywords":["gadgets","photography"],"skins":[{"unified":"1f4f7","native":"\u{1F4F7}"}],"version":1},"camera_with_flash":{"id":"camera_with_flash","name":"Camera with Flash","keywords":["photography","gadgets"],"skins":[{"unified":"1f4f8","native":"\u{1F4F8}"}],"version":1},"video_camera":{"id":"video_camera","name":"Video Camera","keywords":["film","record"],"skins":[{"unified":"1f4f9","native":"\u{1F4F9}"}],"version":1},"vhs":{"id":"vhs","name":"Videocassette","keywords":["vhs","record","video","oldschool","90s","80s"],"skins":[{"unified":"1f4fc","native":"\u{1F4FC}"}],"version":1},"mag":{"id":"mag","name":"Magnifying Glass Tilted Left","keywords":["mag","search","zoom","find","detective"],"skins":[{"unified":"1f50d","native":"\u{1F50D}"}],"version":1},"mag_right":{"id":"mag_right","name":"Magnifying Glass Tilted Right","keywords":["mag","search","zoom","find","detective"],"skins":[{"unified":"1f50e","native":"\u{1F50E}"}],"version":1},"candle":{"id":"candle","name":"Candle","keywords":["fire","wax"],"skins":[{"unified":"1f56f-fe0f","native":"\u{1F56F}\uFE0F"}],"version":1},"bulb":{"id":"bulb","name":"Light Bulb","keywords":["electricity","idea"],"skins":[{"unified":"1f4a1","native":"\u{1F4A1}"}],"version":1},"flashlight":{"id":"flashlight","name":"Flashlight","keywords":["dark","camping","sight","night"],"skins":[{"unified":"1f526","native":"\u{1F526}"}],"version":1},"izakaya_lantern":{"id":"izakaya_lantern","name":"Izakaya Lantern","keywords":["red","paper","light","halloween","spooky"],"skins":[{"unified":"1f3ee","native":"\u{1F3EE}"}],"version":1},"diya_lamp":{"id":"diya_lamp","name":"Diya Lamp","keywords":["lighting"],"skins":[{"unified":"1fa94","native":"\u{1FA94}"}],"version":12},"notebook_with_decorative_cover":{"id":"notebook_with_decorative_cover","name":"Notebook with Decorative Cover","keywords":["classroom","notes","record","paper","study"],"skins":[{"unified":"1f4d4","native":"\u{1F4D4}"}],"version":1},"closed_book":{"id":"closed_book","name":"Closed Book","keywords":["read","library","knowledge","textbook","learn"],"skins":[{"unified":"1f4d5","native":"\u{1F4D5}"}],"version":1},"book":{"id":"book","name":"Open Book","keywords":["read","library","knowledge","literature","learn","study"],"skins":[{"unified":"1f4d6","native":"\u{1F4D6}"}],"version":1},"green_book":{"id":"green_book","name":"Green Book","keywords":["read","library","knowledge","study"],"skins":[{"unified":"1f4d7","native":"\u{1F4D7}"}],"version":1},"blue_book":{"id":"blue_book","name":"Blue Book","keywords":["read","library","knowledge","learn","study"],"skins":[{"unified":"1f4d8","native":"\u{1F4D8}"}],"version":1},"orange_book":{"id":"orange_book","name":"Orange Book","keywords":["read","library","knowledge","textbook","study"],"skins":[{"unified":"1f4d9","native":"\u{1F4D9}"}],"version":1},"books":{"id":"books","name":"Books","keywords":["literature","library","study"],"skins":[{"unified":"1f4da","native":"\u{1F4DA}"}],"version":1},"notebook":{"id":"notebook","name":"Notebook","keywords":["stationery","record","notes","paper","study"],"skins":[{"unified":"1f4d3","native":"\u{1F4D3}"}],"version":1},"ledger":{"id":"ledger","name":"Ledger","keywords":["notes","paper"],"skins":[{"unified":"1f4d2","native":"\u{1F4D2}"}],"version":1},"page_with_curl":{"id":"page_with_curl","name":"Page with Curl","keywords":["documents","office","paper"],"skins":[{"unified":"1f4c3","native":"\u{1F4C3}"}],"version":1},"scroll":{"id":"scroll","name":"Scroll","keywords":["documents","ancient","history","paper"],"skins":[{"unified":"1f4dc","native":"\u{1F4DC}"}],"version":1},"page_facing_up":{"id":"page_facing_up","name":"Page Facing Up","keywords":["documents","office","paper","information"],"skins":[{"unified":"1f4c4","native":"\u{1F4C4}"}],"version":1},"newspaper":{"id":"newspaper","name":"Newspaper","keywords":["press","headline"],"skins":[{"unified":"1f4f0","native":"\u{1F4F0}"}],"version":1},"rolled_up_newspaper":{"id":"rolled_up_newspaper","name":"Rolled-Up Newspaper","keywords":["rolled","up","press","headline"],"skins":[{"unified":"1f5de-fe0f","native":"\u{1F5DE}\uFE0F"}],"version":1},"bookmark_tabs":{"id":"bookmark_tabs","name":"Bookmark Tabs","keywords":["favorite","save","order","tidy"],"skins":[{"unified":"1f4d1","native":"\u{1F4D1}"}],"version":1},"bookmark":{"id":"bookmark","name":"Bookmark","keywords":["favorite","label","save"],"skins":[{"unified":"1f516","native":"\u{1F516}"}],"version":1},"label":{"id":"label","name":"Label","keywords":["sale","tag"],"skins":[{"unified":"1f3f7-fe0f","native":"\u{1F3F7}\uFE0F"}],"version":1},"moneybag":{"id":"moneybag","name":"Money Bag","keywords":["moneybag","dollar","payment","coins","sale"],"skins":[{"unified":"1f4b0","native":"\u{1F4B0}"}],"version":1},"coin":{"id":"coin","name":"Coin","keywords":["money","currency"],"skins":[{"unified":"1fa99","native":"\u{1FA99}"}],"version":13},"yen":{"id":"yen","name":"Yen Banknote","keywords":["money","sales","japanese","dollar","currency"],"skins":[{"unified":"1f4b4","native":"\u{1F4B4}"}],"version":1},"dollar":{"id":"dollar","name":"Dollar Banknote","keywords":["money","sales","bill","currency"],"skins":[{"unified":"1f4b5","native":"\u{1F4B5}"}],"version":1},"euro":{"id":"euro","name":"Euro Banknote","keywords":["money","sales","dollar","currency"],"skins":[{"unified":"1f4b6","native":"\u{1F4B6}"}],"version":1},"pound":{"id":"pound","name":"Pound Banknote","keywords":["british","sterling","money","sales","bills","uk","england","currency"],"skins":[{"unified":"1f4b7","native":"\u{1F4B7}"}],"version":1},"money_with_wings":{"id":"money_with_wings","name":"Money with Wings","keywords":["dollar","bills","payment","sale"],"skins":[{"unified":"1f4b8","native":"\u{1F4B8}"}],"version":1},"credit_card":{"id":"credit_card","name":"Credit Card","keywords":["money","sales","dollar","bill","payment","shopping"],"skins":[{"unified":"1f4b3","native":"\u{1F4B3}"}],"version":1},"receipt":{"id":"receipt","name":"Receipt","keywords":["accounting","expenses"],"skins":[{"unified":"1f9fe","native":"\u{1F9FE}"}],"version":11},"chart":{"id":"chart","name":"Chart Increasing with Yen","keywords":["green","square","graph","presentation","stats"],"skins":[{"unified":"1f4b9","native":"\u{1F4B9}"}],"version":1},"email":{"id":"email","name":"Envelope","keywords":["email","letter","postal","inbox","communication"],"skins":[{"unified":"2709-fe0f","native":"\u2709\uFE0F"}],"version":1},"e-mail":{"id":"e-mail","name":"E-Mail","keywords":["e","mail","communication","inbox"],"skins":[{"unified":"1f4e7","native":"\u{1F4E7}"}],"version":1},"incoming_envelope":{"id":"incoming_envelope","name":"Incoming Envelope","keywords":["email","inbox"],"skins":[{"unified":"1f4e8","native":"\u{1F4E8}"}],"version":1},"envelope_with_arrow":{"id":"envelope_with_arrow","name":"Envelope with Arrow","keywords":["email","communication"],"skins":[{"unified":"1f4e9","native":"\u{1F4E9}"}],"version":1},"outbox_tray":{"id":"outbox_tray","name":"Outbox Tray","keywords":["inbox","email"],"skins":[{"unified":"1f4e4","native":"\u{1F4E4}"}],"version":1},"inbox_tray":{"id":"inbox_tray","name":"Inbox Tray","keywords":["email","documents"],"skins":[{"unified":"1f4e5","native":"\u{1F4E5}"}],"version":1},"package":{"id":"package","name":"Package","keywords":["mail","gift","cardboard","box","moving"],"skins":[{"unified":"1f4e6","native":"\u{1F4E6}"}],"version":1},"mailbox":{"id":"mailbox","name":"Closed Mailbox with Raised Flag","keywords":["email","inbox","communication"],"skins":[{"unified":"1f4eb","native":"\u{1F4EB}"}],"version":1},"mailbox_closed":{"id":"mailbox_closed","name":"Closed Mailbox with Lowered Flag","keywords":["email","communication","inbox"],"skins":[{"unified":"1f4ea","native":"\u{1F4EA}"}],"version":1},"mailbox_with_mail":{"id":"mailbox_with_mail","name":"Open Mailbox with Raised Flag","keywords":["mail","email","inbox","communication"],"skins":[{"unified":"1f4ec","native":"\u{1F4EC}"}],"version":1},"mailbox_with_no_mail":{"id":"mailbox_with_no_mail","name":"Open Mailbox with Lowered Flag","keywords":["no","mail","email","inbox"],"skins":[{"unified":"1f4ed","native":"\u{1F4ED}"}],"version":1},"postbox":{"id":"postbox","name":"Postbox","keywords":["email","letter","envelope"],"skins":[{"unified":"1f4ee","native":"\u{1F4EE}"}],"version":1},"ballot_box_with_ballot":{"id":"ballot_box_with_ballot","name":"Ballot Box with Ballot","keywords":["election","vote"],"skins":[{"unified":"1f5f3-fe0f","native":"\u{1F5F3}\uFE0F"}],"version":1},"pencil2":{"id":"pencil2","name":"Pencil","keywords":["pencil2","stationery","write","paper","writing","school","study"],"skins":[{"unified":"270f-fe0f","native":"\u270F\uFE0F"}],"version":1},"black_nib":{"id":"black_nib","name":"Black Nib","keywords":["pen","stationery","writing","write"],"skins":[{"unified":"2712-fe0f","native":"\u2712\uFE0F"}],"version":1},"lower_left_fountain_pen":{"id":"lower_left_fountain_pen","name":"Fountain Pen","keywords":["lower","left","stationery","writing","write"],"skins":[{"unified":"1f58b-fe0f","native":"\u{1F58B}\uFE0F"}],"version":1},"lower_left_ballpoint_pen":{"id":"lower_left_ballpoint_pen","name":"Pen","keywords":["lower","left","ballpoint","stationery","writing","write"],"skins":[{"unified":"1f58a-fe0f","native":"\u{1F58A}\uFE0F"}],"version":1},"lower_left_paintbrush":{"id":"lower_left_paintbrush","name":"Paintbrush","keywords":["lower","left","drawing","creativity","art"],"skins":[{"unified":"1f58c-fe0f","native":"\u{1F58C}\uFE0F"}],"version":1},"lower_left_crayon":{"id":"lower_left_crayon","name":"Crayon","keywords":["lower","left","drawing","creativity"],"skins":[{"unified":"1f58d-fe0f","native":"\u{1F58D}\uFE0F"}],"version":1},"memo":{"id":"memo","name":"Memo","keywords":["pencil","write","documents","stationery","paper","writing","legal","exam","quiz","test","study","compose"],"skins":[{"unified":"1f4dd","native":"\u{1F4DD}"}],"version":1},"briefcase":{"id":"briefcase","name":"Briefcase","keywords":["business","documents","work","law","legal","job","career"],"skins":[{"unified":"1f4bc","native":"\u{1F4BC}"}],"version":1},"file_folder":{"id":"file_folder","name":"File Folder","keywords":["documents","business","office"],"skins":[{"unified":"1f4c1","native":"\u{1F4C1}"}],"version":1},"open_file_folder":{"id":"open_file_folder","name":"Open File Folder","keywords":["documents","load"],"skins":[{"unified":"1f4c2","native":"\u{1F4C2}"}],"version":1},"card_index_dividers":{"id":"card_index_dividers","name":"Card Index Dividers","keywords":["organizing","business","stationery"],"skins":[{"unified":"1f5c2-fe0f","native":"\u{1F5C2}\uFE0F"}],"version":1},"date":{"id":"date","name":"Calendar","keywords":["date","schedule"],"skins":[{"unified":"1f4c5","native":"\u{1F4C5}"}],"version":1},"calendar":{"id":"calendar","name":"Tear-off Calendar","keywords":["tear","off","schedule","date","planning"],"skins":[{"unified":"1f4c6","native":"\u{1F4C6}"}],"version":1},"spiral_note_pad":{"id":"spiral_note_pad","name":"Spiral Notepad","keywords":["note","pad","memo","stationery"],"skins":[{"unified":"1f5d2-fe0f","native":"\u{1F5D2}\uFE0F"}],"version":1},"spiral_calendar_pad":{"id":"spiral_calendar_pad","name":"Spiral Calendar","keywords":["pad","date","schedule","planning"],"skins":[{"unified":"1f5d3-fe0f","native":"\u{1F5D3}\uFE0F"}],"version":1},"card_index":{"id":"card_index","name":"Card Index","keywords":["business","stationery"],"skins":[{"unified":"1f4c7","native":"\u{1F4C7}"}],"version":1},"chart_with_upwards_trend":{"id":"chart_with_upwards_trend","name":"Chart Increasing","keywords":["with","upwards","trend","graph","presentation","stats","recovery","business","economics","money","sales","good","success"],"skins":[{"unified":"1f4c8","native":"\u{1F4C8}"}],"version":1},"chart_with_downwards_trend":{"id":"chart_with_downwards_trend","name":"Chart Decreasing","keywords":["with","downwards","trend","graph","presentation","stats","recession","business","economics","money","sales","bad","failure"],"skins":[{"unified":"1f4c9","native":"\u{1F4C9}"}],"version":1},"bar_chart":{"id":"bar_chart","name":"Bar Chart","keywords":["graph","presentation","stats"],"skins":[{"unified":"1f4ca","native":"\u{1F4CA}"}],"version":1},"clipboard":{"id":"clipboard","name":"Clipboard","keywords":["stationery","documents"],"skins":[{"unified":"1f4cb","native":"\u{1F4CB}"}],"version":1},"pushpin":{"id":"pushpin","name":"Pushpin","keywords":["stationery","mark","here"],"skins":[{"unified":"1f4cc","native":"\u{1F4CC}"}],"version":1},"round_pushpin":{"id":"round_pushpin","name":"Round Pushpin","keywords":["stationery","location","map","here"],"skins":[{"unified":"1f4cd","native":"\u{1F4CD}"}],"version":1},"paperclip":{"id":"paperclip","name":"Paperclip","keywords":["documents","stationery"],"skins":[{"unified":"1f4ce","native":"\u{1F4CE}"}],"version":1},"linked_paperclips":{"id":"linked_paperclips","name":"Linked Paperclips","keywords":["documents","stationery"],"skins":[{"unified":"1f587-fe0f","native":"\u{1F587}\uFE0F"}],"version":1},"straight_ruler":{"id":"straight_ruler","name":"Straight Ruler","keywords":["stationery","calculate","length","math","school","drawing","architect","sketch"],"skins":[{"unified":"1f4cf","native":"\u{1F4CF}"}],"version":1},"triangular_ruler":{"id":"triangular_ruler","name":"Triangular Ruler","keywords":["stationery","math","architect","sketch"],"skins":[{"unified":"1f4d0","native":"\u{1F4D0}"}],"version":1},"scissors":{"id":"scissors","name":"Scissors","keywords":["stationery","cut"],"skins":[{"unified":"2702-fe0f","native":"\u2702\uFE0F"}],"version":1},"card_file_box":{"id":"card_file_box","name":"Card File Box","keywords":["business","stationery"],"skins":[{"unified":"1f5c3-fe0f","native":"\u{1F5C3}\uFE0F"}],"version":1},"file_cabinet":{"id":"file_cabinet","name":"File Cabinet","keywords":["filing","organizing"],"skins":[{"unified":"1f5c4-fe0f","native":"\u{1F5C4}\uFE0F"}],"version":1},"wastebasket":{"id":"wastebasket","name":"Wastebasket","keywords":["bin","trash","rubbish","garbage","toss"],"skins":[{"unified":"1f5d1-fe0f","native":"\u{1F5D1}\uFE0F"}],"version":1},"lock":{"id":"lock","name":"Lock","keywords":["locked","security","password","padlock"],"skins":[{"unified":"1f512","native":"\u{1F512}"}],"version":1},"unlock":{"id":"unlock","name":"Unlocked","keywords":["unlock","privacy","security"],"skins":[{"unified":"1f513","native":"\u{1F513}"}],"version":1},"lock_with_ink_pen":{"id":"lock_with_ink_pen","name":"Locked with Pen","keywords":["lock","ink","security","secret"],"skins":[{"unified":"1f50f","native":"\u{1F50F}"}],"version":1},"closed_lock_with_key":{"id":"closed_lock_with_key","name":"Locked with Key","keywords":["closed","lock","security","privacy"],"skins":[{"unified":"1f510","native":"\u{1F510}"}],"version":1},"key":{"id":"key","name":"Key","keywords":["lock","door","password"],"skins":[{"unified":"1f511","native":"\u{1F511}"}],"version":1},"old_key":{"id":"old_key","name":"Old Key","keywords":["lock","door","password"],"skins":[{"unified":"1f5dd-fe0f","native":"\u{1F5DD}\uFE0F"}],"version":1},"hammer":{"id":"hammer","name":"Hammer","keywords":["tools","build","create"],"skins":[{"unified":"1f528","native":"\u{1F528}"}],"version":1},"axe":{"id":"axe","name":"Axe","keywords":["tool","chop","cut"],"skins":[{"unified":"1fa93","native":"\u{1FA93}"}],"version":12},"pick":{"id":"pick","name":"Pick","keywords":["tools","dig"],"skins":[{"unified":"26cf-fe0f","native":"\u26CF\uFE0F"}],"version":1},"hammer_and_pick":{"id":"hammer_and_pick","name":"Hammer and Pick","keywords":["tools","build","create"],"skins":[{"unified":"2692-fe0f","native":"\u2692\uFE0F"}],"version":1},"hammer_and_wrench":{"id":"hammer_and_wrench","name":"Hammer and Wrench","keywords":["tools","build","create"],"skins":[{"unified":"1f6e0-fe0f","native":"\u{1F6E0}\uFE0F"}],"version":1},"dagger_knife":{"id":"dagger_knife","name":"Dagger","keywords":["knife","weapon"],"skins":[{"unified":"1f5e1-fe0f","native":"\u{1F5E1}\uFE0F"}],"version":1},"crossed_swords":{"id":"crossed_swords","name":"Crossed Swords","keywords":["weapon"],"skins":[{"unified":"2694-fe0f","native":"\u2694\uFE0F"}],"version":1},"bomb":{"id":"bomb","name":"Bomb","keywords":["boom","explode","explosion","terrorism"],"skins":[{"unified":"1f4a3","native":"\u{1F4A3}"}],"version":1},"boomerang":{"id":"boomerang","name":"Boomerang","keywords":["weapon"],"skins":[{"unified":"1fa83","native":"\u{1FA83}"}],"version":13},"bow_and_arrow":{"id":"bow_and_arrow","name":"Bow and Arrow","keywords":["sports"],"skins":[{"unified":"1f3f9","native":"\u{1F3F9}"}],"version":1},"shield":{"id":"shield","name":"Shield","keywords":["protection","security"],"skins":[{"unified":"1f6e1-fe0f","native":"\u{1F6E1}\uFE0F"}],"version":1},"carpentry_saw":{"id":"carpentry_saw","name":"Carpentry Saw","keywords":["cut","chop"],"skins":[{"unified":"1fa9a","native":"\u{1FA9A}"}],"version":13},"wrench":{"id":"wrench","name":"Wrench","keywords":["tools","diy","ikea","fix","maintainer"],"skins":[{"unified":"1f527","native":"\u{1F527}"}],"version":1},"screwdriver":{"id":"screwdriver","name":"Screwdriver","keywords":["tools"],"skins":[{"unified":"1fa9b","native":"\u{1FA9B}"}],"version":13},"nut_and_bolt":{"id":"nut_and_bolt","name":"Nut and Bolt","keywords":["handy","tools","fix"],"skins":[{"unified":"1f529","native":"\u{1F529}"}],"version":1},"gear":{"id":"gear","name":"Gear","keywords":["cog"],"skins":[{"unified":"2699-fe0f","native":"\u2699\uFE0F"}],"version":1},"compression":{"id":"compression","name":"Clamp","keywords":["compression","tool"],"skins":[{"unified":"1f5dc-fe0f","native":"\u{1F5DC}\uFE0F"}],"version":1},"scales":{"id":"scales","name":"Balance Scale","keywords":["scales","law","fairness","weight"],"skins":[{"unified":"2696-fe0f","native":"\u2696\uFE0F"}],"version":1},"probing_cane":{"id":"probing_cane","name":"White Cane","keywords":["probing","accessibility"],"skins":[{"unified":"1f9af","native":"\u{1F9AF}"}],"version":12},"link":{"id":"link","name":"Link","keywords":["rings","url"],"skins":[{"unified":"1f517","native":"\u{1F517}"}],"version":1},"chains":{"id":"chains","name":"Chains","keywords":["lock","arrest"],"skins":[{"unified":"26d3-fe0f","native":"\u26D3\uFE0F"}],"version":1},"hook":{"id":"hook","name":"Hook","keywords":["tools"],"skins":[{"unified":"1fa9d","native":"\u{1FA9D}"}],"version":13},"toolbox":{"id":"toolbox","name":"Toolbox","keywords":["tools","diy","fix","maintainer","mechanic"],"skins":[{"unified":"1f9f0","native":"\u{1F9F0}"}],"version":11},"magnet":{"id":"magnet","name":"Magnet","keywords":["attraction","magnetic"],"skins":[{"unified":"1f9f2","native":"\u{1F9F2}"}],"version":11},"ladder":{"id":"ladder","name":"Ladder","keywords":["tools"],"skins":[{"unified":"1fa9c","native":"\u{1FA9C}"}],"version":13},"alembic":{"id":"alembic","name":"Alembic","keywords":["distilling","science","experiment","chemistry"],"skins":[{"unified":"2697-fe0f","native":"\u2697\uFE0F"}],"version":1},"test_tube":{"id":"test_tube","name":"Test Tube","keywords":["chemistry","experiment","lab","science"],"skins":[{"unified":"1f9ea","native":"\u{1F9EA}"}],"version":11},"petri_dish":{"id":"petri_dish","name":"Petri Dish","keywords":["bacteria","biology","culture","lab"],"skins":[{"unified":"1f9eb","native":"\u{1F9EB}"}],"version":11},"dna":{"id":"dna","name":"Dna","keywords":["biologist","genetics","life"],"skins":[{"unified":"1f9ec","native":"\u{1F9EC}"}],"version":11},"microscope":{"id":"microscope","name":"Microscope","keywords":["laboratory","experiment","zoomin","science","study"],"skins":[{"unified":"1f52c","native":"\u{1F52C}"}],"version":1},"telescope":{"id":"telescope","name":"Telescope","keywords":["stars","space","zoom","science","astronomy"],"skins":[{"unified":"1f52d","native":"\u{1F52D}"}],"version":1},"satellite_antenna":{"id":"satellite_antenna","name":"Satellite Antenna","keywords":["communication","future","radio","space"],"skins":[{"unified":"1f4e1","native":"\u{1F4E1}"}],"version":1},"syringe":{"id":"syringe","name":"Syringe","keywords":["health","hospital","drugs","blood","medicine","needle","doctor","nurse"],"skins":[{"unified":"1f489","native":"\u{1F489}"}],"version":1},"drop_of_blood":{"id":"drop_of_blood","name":"Drop of Blood","keywords":["period","hurt","harm","wound"],"skins":[{"unified":"1fa78","native":"\u{1FA78}"}],"version":12},"pill":{"id":"pill","name":"Pill","keywords":["health","medicine","doctor","pharmacy","drug"],"skins":[{"unified":"1f48a","native":"\u{1F48A}"}],"version":1},"adhesive_bandage":{"id":"adhesive_bandage","name":"Adhesive Bandage","keywords":["heal"],"skins":[{"unified":"1fa79","native":"\u{1FA79}"}],"version":12},"crutch":{"id":"crutch","name":"Crutch","keywords":["accessibility","assist"],"skins":[{"unified":"1fa7c","native":"\u{1FA7C}"}],"version":14},"stethoscope":{"id":"stethoscope","name":"Stethoscope","keywords":["health"],"skins":[{"unified":"1fa7a","native":"\u{1FA7A}"}],"version":12},"x-ray":{"id":"x-ray","name":"X-Ray","keywords":["x","ray","skeleton","medicine"],"skins":[{"unified":"1fa7b","native":"\u{1FA7B}"}],"version":14},"door":{"id":"door","name":"Door","keywords":["house","entry","exit"],"skins":[{"unified":"1f6aa","native":"\u{1F6AA}"}],"version":1},"elevator":{"id":"elevator","name":"Elevator","keywords":["lift"],"skins":[{"unified":"1f6d7","native":"\u{1F6D7}"}],"version":13},"mirror":{"id":"mirror","name":"Mirror","keywords":["reflection"],"skins":[{"unified":"1fa9e","native":"\u{1FA9E}"}],"version":13},"window":{"id":"window","name":"Window","keywords":["scenery"],"skins":[{"unified":"1fa9f","native":"\u{1FA9F}"}],"version":13},"bed":{"id":"bed","name":"Bed","keywords":["sleep","rest"],"skins":[{"unified":"1f6cf-fe0f","native":"\u{1F6CF}\uFE0F"}],"version":1},"couch_and_lamp":{"id":"couch_and_lamp","name":"Couch and Lamp","keywords":["read","chill"],"skins":[{"unified":"1f6cb-fe0f","native":"\u{1F6CB}\uFE0F"}],"version":1},"chair":{"id":"chair","name":"Chair","keywords":["sit","furniture"],"skins":[{"unified":"1fa91","native":"\u{1FA91}"}],"version":12},"toilet":{"id":"toilet","name":"Toilet","keywords":["restroom","wc","washroom","bathroom","potty"],"skins":[{"unified":"1f6bd","native":"\u{1F6BD}"}],"version":1},"plunger":{"id":"plunger","name":"Plunger","keywords":["toilet"],"skins":[{"unified":"1faa0","native":"\u{1FAA0}"}],"version":13},"shower":{"id":"shower","name":"Shower","keywords":["clean","water","bathroom"],"skins":[{"unified":"1f6bf","native":"\u{1F6BF}"}],"version":1},"bathtub":{"id":"bathtub","name":"Bathtub","keywords":["clean","shower","bathroom"],"skins":[{"unified":"1f6c1","native":"\u{1F6C1}"}],"version":1},"mouse_trap":{"id":"mouse_trap","name":"Mouse Trap","keywords":["cheese"],"skins":[{"unified":"1faa4","native":"\u{1FAA4}"}],"version":13},"razor":{"id":"razor","name":"Razor","keywords":["cut"],"skins":[{"unified":"1fa92","native":"\u{1FA92}"}],"version":12},"lotion_bottle":{"id":"lotion_bottle","name":"Lotion Bottle","keywords":["moisturizer","sunscreen"],"skins":[{"unified":"1f9f4","native":"\u{1F9F4}"}],"version":11},"safety_pin":{"id":"safety_pin","name":"Safety Pin","keywords":["diaper"],"skins":[{"unified":"1f9f7","native":"\u{1F9F7}"}],"version":11},"broom":{"id":"broom","name":"Broom","keywords":["cleaning","sweeping","witch"],"skins":[{"unified":"1f9f9","native":"\u{1F9F9}"}],"version":11},"basket":{"id":"basket","name":"Basket","keywords":["laundry"],"skins":[{"unified":"1f9fa","native":"\u{1F9FA}"}],"version":11},"roll_of_paper":{"id":"roll_of_paper","name":"Roll of Paper","keywords":[],"skins":[{"unified":"1f9fb","native":"\u{1F9FB}"}],"version":11},"bucket":{"id":"bucket","name":"Bucket","keywords":["water","container"],"skins":[{"unified":"1faa3","native":"\u{1FAA3}"}],"version":13},"soap":{"id":"soap","name":"Soap","keywords":["bar","bathing","cleaning","lather"],"skins":[{"unified":"1f9fc","native":"\u{1F9FC}"}],"version":11},"bubbles":{"id":"bubbles","name":"Bubbles","keywords":["soap","fun","carbonation","sparkling"],"skins":[{"unified":"1fae7","native":"\u{1FAE7}"}],"version":14},"toothbrush":{"id":"toothbrush","name":"Toothbrush","keywords":["hygiene","dental"],"skins":[{"unified":"1faa5","native":"\u{1FAA5}"}],"version":13},"sponge":{"id":"sponge","name":"Sponge","keywords":["absorbing","cleaning","porous"],"skins":[{"unified":"1f9fd","native":"\u{1F9FD}"}],"version":11},"fire_extinguisher":{"id":"fire_extinguisher","name":"Fire Extinguisher","keywords":["quench"],"skins":[{"unified":"1f9ef","native":"\u{1F9EF}"}],"version":11},"shopping_trolley":{"id":"shopping_trolley","name":"Shopping Cart","keywords":["trolley"],"skins":[{"unified":"1f6d2","native":"\u{1F6D2}"}],"version":3},"smoking":{"id":"smoking","name":"Cigarette","keywords":["smoking","kills","tobacco","joint","smoke"],"skins":[{"unified":"1f6ac","native":"\u{1F6AC}"}],"version":1},"coffin":{"id":"coffin","name":"Coffin","keywords":["vampire","dead","die","death","rip","graveyard","cemetery","casket","funeral","box"],"skins":[{"unified":"26b0-fe0f","native":"\u26B0\uFE0F"}],"version":1},"headstone":{"id":"headstone","name":"Headstone","keywords":["death","rip","grave"],"skins":[{"unified":"1faa6","native":"\u{1FAA6}"}],"version":13},"funeral_urn":{"id":"funeral_urn","name":"Funeral Urn","keywords":["dead","die","death","rip","ashes"],"skins":[{"unified":"26b1-fe0f","native":"\u26B1\uFE0F"}],"version":1},"nazar_amulet":{"id":"nazar_amulet","name":"Nazar Amulet","keywords":["bead","charm"],"skins":[{"unified":"1f9ff","native":"\u{1F9FF}"}],"version":11},"hamsa":{"id":"hamsa","name":"Hamsa","keywords":["religion","protection"],"skins":[{"unified":"1faac","native":"\u{1FAAC}"}],"version":14},"moyai":{"id":"moyai","name":"Moai","keywords":["moyai","rock","easter","island"],"skins":[{"unified":"1f5ff","native":"\u{1F5FF}"}],"version":1},"placard":{"id":"placard","name":"Placard","keywords":["announcement"],"skins":[{"unified":"1faa7","native":"\u{1FAA7}"}],"version":13},"identification_card":{"id":"identification_card","name":"Identification Card","keywords":["document"],"skins":[{"unified":"1faaa","native":"\u{1FAAA}"}],"version":14},"atm":{"id":"atm","name":"Atm Sign","keywords":["money","sales","cash","blue","square","payment","bank"],"skins":[{"unified":"1f3e7","native":"\u{1F3E7}"}],"version":1},"put_litter_in_its_place":{"id":"put_litter_in_its_place","name":"Litter in Bin Sign","keywords":["put","its","place","blue","square","human","info"],"skins":[{"unified":"1f6ae","native":"\u{1F6AE}"}],"version":1},"potable_water":{"id":"potable_water","name":"Potable Water","keywords":["blue","square","liquid","restroom","cleaning","faucet"],"skins":[{"unified":"1f6b0","native":"\u{1F6B0}"}],"version":1},"wheelchair":{"id":"wheelchair","name":"Wheelchair Symbol","keywords":["blue","square","disabled","accessibility"],"skins":[{"unified":"267f","native":"\u267F"}],"version":1},"mens":{"id":"mens","name":"Men\u2019s Room","keywords":["mens","men","s","toilet","restroom","wc","blue","square","gender","male"],"skins":[{"unified":"1f6b9","native":"\u{1F6B9}"}],"version":1},"womens":{"id":"womens","name":"Women\u2019s Room","keywords":["womens","women","s","purple","square","woman","female","toilet","loo","restroom","gender"],"skins":[{"unified":"1f6ba","native":"\u{1F6BA}"}],"version":1},"restroom":{"id":"restroom","name":"Restroom","keywords":["blue","square","toilet","refresh","wc","gender"],"skins":[{"unified":"1f6bb","native":"\u{1F6BB}"}],"version":1},"baby_symbol":{"id":"baby_symbol","name":"Baby Symbol","keywords":["orange","square","child"],"skins":[{"unified":"1f6bc","native":"\u{1F6BC}"}],"version":1},"wc":{"id":"wc","name":"Water Closet","keywords":["wc","toilet","restroom","blue","square"],"skins":[{"unified":"1f6be","native":"\u{1F6BE}"}],"version":1},"passport_control":{"id":"passport_control","name":"Passport Control","keywords":["custom","blue","square"],"skins":[{"unified":"1f6c2","native":"\u{1F6C2}"}],"version":1},"customs":{"id":"customs","name":"Customs","keywords":["passport","border","blue","square"],"skins":[{"unified":"1f6c3","native":"\u{1F6C3}"}],"version":1},"baggage_claim":{"id":"baggage_claim","name":"Baggage Claim","keywords":["blue","square","airport","transport"],"skins":[{"unified":"1f6c4","native":"\u{1F6C4}"}],"version":1},"left_luggage":{"id":"left_luggage","name":"Left Luggage","keywords":["blue","square","travel"],"skins":[{"unified":"1f6c5","native":"\u{1F6C5}"}],"version":1},"warning":{"id":"warning","name":"Warning","keywords":["exclamation","wip","alert","error","problem","issue"],"skins":[{"unified":"26a0-fe0f","native":"\u26A0\uFE0F"}],"version":1},"children_crossing":{"id":"children_crossing","name":"Children Crossing","keywords":["school","warning","danger","sign","driving","yellow","diamond"],"skins":[{"unified":"1f6b8","native":"\u{1F6B8}"}],"version":1},"no_entry":{"id":"no_entry","name":"No Entry","keywords":["limit","security","privacy","bad","denied","stop","circle"],"skins":[{"unified":"26d4","native":"\u26D4"}],"version":1},"no_entry_sign":{"id":"no_entry_sign","name":"Prohibited","keywords":["no","entry","sign","forbid","stop","limit","denied","disallow","circle"],"skins":[{"unified":"1f6ab","native":"\u{1F6AB}"}],"version":1},"no_bicycles":{"id":"no_bicycles","name":"No Bicycles","keywords":["cyclist","prohibited","circle"],"skins":[{"unified":"1f6b3","native":"\u{1F6B3}"}],"version":1},"no_smoking":{"id":"no_smoking","name":"No Smoking","keywords":["cigarette","blue","square","smell","smoke"],"skins":[{"unified":"1f6ad","native":"\u{1F6AD}"}],"version":1},"do_not_litter":{"id":"do_not_litter","name":"No Littering","keywords":["do","not","litter","trash","bin","garbage","circle"],"skins":[{"unified":"1f6af","native":"\u{1F6AF}"}],"version":1},"non-potable_water":{"id":"non-potable_water","name":"Non-Potable Water","keywords":["non","potable","drink","faucet","tap","circle"],"skins":[{"unified":"1f6b1","native":"\u{1F6B1}"}],"version":1},"no_pedestrians":{"id":"no_pedestrians","name":"No Pedestrians","keywords":["rules","crossing","walking","circle"],"skins":[{"unified":"1f6b7","native":"\u{1F6B7}"}],"version":1},"no_mobile_phones":{"id":"no_mobile_phones","name":"No Mobile Phones","keywords":["iphone","mute","circle"],"skins":[{"unified":"1f4f5","native":"\u{1F4F5}"}],"version":1},"underage":{"id":"underage","name":"No One Under Eighteen","keywords":["underage","18","drink","pub","night","minor","circle"],"skins":[{"unified":"1f51e","native":"\u{1F51E}"}],"version":1},"radioactive_sign":{"id":"radioactive_sign","name":"Radioactive","keywords":["sign","nuclear","danger"],"skins":[{"unified":"2622-fe0f","native":"\u2622\uFE0F"}],"version":1},"biohazard_sign":{"id":"biohazard_sign","name":"Biohazard","keywords":["sign","danger"],"skins":[{"unified":"2623-fe0f","native":"\u2623\uFE0F"}],"version":1},"arrow_up":{"id":"arrow_up","name":"Up Arrow","keywords":["blue","square","continue","top","direction"],"skins":[{"unified":"2b06-fe0f","native":"\u2B06\uFE0F"}],"version":1},"arrow_upper_right":{"id":"arrow_upper_right","name":"Up-Right Arrow","keywords":["upper","right","up","blue","square","point","direction","diagonal","northeast"],"skins":[{"unified":"2197-fe0f","native":"\u2197\uFE0F"}],"version":1},"arrow_right":{"id":"arrow_right","name":"Right Arrow","keywords":["blue","square","next"],"skins":[{"unified":"27a1-fe0f","native":"\u27A1\uFE0F"}],"version":1},"arrow_lower_right":{"id":"arrow_lower_right","name":"South East Arrow","keywords":["lower","right","down","blue","square","direction","diagonal","southeast"],"skins":[{"unified":"2198-fe0f","native":"\u2198\uFE0F"}],"version":1},"arrow_down":{"id":"arrow_down","name":"Down Arrow","keywords":["blue","square","direction","bottom"],"skins":[{"unified":"2b07-fe0f","native":"\u2B07\uFE0F"}],"version":1},"arrow_lower_left":{"id":"arrow_lower_left","name":"Down-Left Arrow","keywords":["lower","left","down","blue","square","direction","diagonal","southwest"],"skins":[{"unified":"2199-fe0f","native":"\u2199\uFE0F"}],"version":1},"arrow_left":{"id":"arrow_left","name":"Left Arrow","keywords":["blue","square","previous","back"],"skins":[{"unified":"2b05-fe0f","native":"\u2B05\uFE0F"}],"version":1},"arrow_upper_left":{"id":"arrow_upper_left","name":"Up-Left Arrow","keywords":["upper","left","up","blue","square","point","direction","diagonal","northwest"],"skins":[{"unified":"2196-fe0f","native":"\u2196\uFE0F"}],"version":1},"arrow_up_down":{"id":"arrow_up_down","name":"Up Down Arrow","keywords":["blue","square","direction","way","vertical"],"skins":[{"unified":"2195-fe0f","native":"\u2195\uFE0F"}],"version":1},"left_right_arrow":{"id":"left_right_arrow","name":"Left Right Arrow","keywords":["shape","direction","horizontal","sideways"],"skins":[{"unified":"2194-fe0f","native":"\u2194\uFE0F"}],"version":1},"leftwards_arrow_with_hook":{"id":"leftwards_arrow_with_hook","name":"Right Arrow Curving Left","keywords":["leftwards","with","hook","back","return","blue","square","undo","enter"],"skins":[{"unified":"21a9-fe0f","native":"\u21A9\uFE0F"}],"version":1},"arrow_right_hook":{"id":"arrow_right_hook","name":"Left Arrow Curving Right","keywords":["hook","blue","square","return","rotate","direction"],"skins":[{"unified":"21aa-fe0f","native":"\u21AA\uFE0F"}],"version":1},"arrow_heading_up":{"id":"arrow_heading_up","name":"Right Arrow Curving Up","keywords":["heading","blue","square","direction","top"],"skins":[{"unified":"2934-fe0f","native":"\u2934\uFE0F"}],"version":1},"arrow_heading_down":{"id":"arrow_heading_down","name":"Right Arrow Curving Down","keywords":["heading","blue","square","direction","bottom"],"skins":[{"unified":"2935-fe0f","native":"\u2935\uFE0F"}],"version":1},"arrows_clockwise":{"id":"arrows_clockwise","name":"Clockwise Vertical Arrows","keywords":["sync","cycle","round","repeat"],"skins":[{"unified":"1f503","native":"\u{1F503}"}],"version":1},"arrows_counterclockwise":{"id":"arrows_counterclockwise","name":"Counterclockwise Arrows Button","keywords":["blue","square","sync","cycle"],"skins":[{"unified":"1f504","native":"\u{1F504}"}],"version":1},"back":{"id":"back","name":"Back Arrow","keywords":["words","return"],"skins":[{"unified":"1f519","native":"\u{1F519}"}],"version":1},"end":{"id":"end","name":"End Arrow","keywords":["words"],"skins":[{"unified":"1f51a","native":"\u{1F51A}"}],"version":1},"on":{"id":"on","name":"On! Arrow","keywords":["on","words"],"skins":[{"unified":"1f51b","native":"\u{1F51B}"}],"version":1},"soon":{"id":"soon","name":"Soon Arrow","keywords":["words"],"skins":[{"unified":"1f51c","native":"\u{1F51C}"}],"version":1},"top":{"id":"top","name":"Top Arrow","keywords":["words","blue","square"],"skins":[{"unified":"1f51d","native":"\u{1F51D}"}],"version":1},"place_of_worship":{"id":"place_of_worship","name":"Place of Worship","keywords":["religion","church","temple","prayer"],"skins":[{"unified":"1f6d0","native":"\u{1F6D0}"}],"version":1},"atom_symbol":{"id":"atom_symbol","name":"Atom Symbol","keywords":["science","physics","chemistry"],"skins":[{"unified":"269b-fe0f","native":"\u269B\uFE0F"}],"version":1},"om_symbol":{"id":"om_symbol","name":"Om","keywords":["symbol","hinduism","buddhism","sikhism","jainism"],"skins":[{"unified":"1f549-fe0f","native":"\u{1F549}\uFE0F"}],"version":1},"star_of_david":{"id":"star_of_david","name":"Star of David","keywords":["judaism"],"skins":[{"unified":"2721-fe0f","native":"\u2721\uFE0F"}],"version":1},"wheel_of_dharma":{"id":"wheel_of_dharma","name":"Wheel of Dharma","keywords":["hinduism","buddhism","sikhism","jainism"],"skins":[{"unified":"2638-fe0f","native":"\u2638\uFE0F"}],"version":1},"yin_yang":{"id":"yin_yang","name":"Yin Yang","keywords":["balance"],"skins":[{"unified":"262f-fe0f","native":"\u262F\uFE0F"}],"version":1},"latin_cross":{"id":"latin_cross","name":"Latin Cross","keywords":["christianity"],"skins":[{"unified":"271d-fe0f","native":"\u271D\uFE0F"}],"version":1},"orthodox_cross":{"id":"orthodox_cross","name":"Orthodox Cross","keywords":["suppedaneum","religion"],"skins":[{"unified":"2626-fe0f","native":"\u2626\uFE0F"}],"version":1},"star_and_crescent":{"id":"star_and_crescent","name":"Star and Crescent","keywords":["islam"],"skins":[{"unified":"262a-fe0f","native":"\u262A\uFE0F"}],"version":1},"peace_symbol":{"id":"peace_symbol","name":"Peace Symbol","keywords":["hippie"],"skins":[{"unified":"262e-fe0f","native":"\u262E\uFE0F"}],"version":1},"menorah_with_nine_branches":{"id":"menorah_with_nine_branches","name":"Menorah","keywords":["with","nine","branches","hanukkah","candles","jewish"],"skins":[{"unified":"1f54e","native":"\u{1F54E}"}],"version":1},"six_pointed_star":{"id":"six_pointed_star","name":"Dotted Six-Pointed Star","keywords":["six","pointed","purple","square","religion","jewish","hexagram"],"skins":[{"unified":"1f52f","native":"\u{1F52F}"}],"version":1},"khanda":{"id":"khanda","name":"Khanda","keywords":["Sikhism","religion"],"skins":[{"unified":"1faaf","native":"\u{1FAAF}"}],"version":15},"aries":{"id":"aries","name":"Aries","keywords":["sign","purple","square","zodiac","astrology"],"skins":[{"unified":"2648","native":"\u2648"}],"version":1},"taurus":{"id":"taurus","name":"Taurus","keywords":["purple","square","sign","zodiac","astrology"],"skins":[{"unified":"2649","native":"\u2649"}],"version":1},"gemini":{"id":"gemini","name":"Gemini","keywords":["sign","zodiac","purple","square","astrology"],"skins":[{"unified":"264a","native":"\u264A"}],"version":1},"cancer":{"id":"cancer","name":"Cancer","keywords":["sign","zodiac","purple","square","astrology"],"skins":[{"unified":"264b","native":"\u264B"}],"version":1},"leo":{"id":"leo","name":"Leo","keywords":["sign","purple","square","zodiac","astrology"],"skins":[{"unified":"264c","native":"\u264C"}],"version":1},"virgo":{"id":"virgo","name":"Virgo","keywords":["sign","zodiac","purple","square","astrology"],"skins":[{"unified":"264d","native":"\u264D"}],"version":1},"libra":{"id":"libra","name":"Libra","keywords":["sign","purple","square","zodiac","astrology"],"skins":[{"unified":"264e","native":"\u264E"}],"version":1},"scorpius":{"id":"scorpius","name":"Scorpio","keywords":["scorpius","sign","zodiac","purple","square","astrology"],"skins":[{"unified":"264f","native":"\u264F"}],"version":1},"sagittarius":{"id":"sagittarius","name":"Sagittarius","keywords":["sign","zodiac","purple","square","astrology"],"skins":[{"unified":"2650","native":"\u2650"}],"version":1},"capricorn":{"id":"capricorn","name":"Capricorn","keywords":["sign","zodiac","purple","square","astrology"],"skins":[{"unified":"2651","native":"\u2651"}],"version":1},"aquarius":{"id":"aquarius","name":"Aquarius","keywords":["sign","purple","square","zodiac","astrology"],"skins":[{"unified":"2652","native":"\u2652"}],"version":1},"pisces":{"id":"pisces","name":"Pisces","keywords":["purple","square","sign","zodiac","astrology"],"skins":[{"unified":"2653","native":"\u2653"}],"version":1},"ophiuchus":{"id":"ophiuchus","name":"Ophiuchus","keywords":["sign","purple","square","constellation","astrology"],"skins":[{"unified":"26ce","native":"\u26CE"}],"version":1},"twisted_rightwards_arrows":{"id":"twisted_rightwards_arrows","name":"Shuffle Tracks Button","keywords":["twisted","rightwards","arrows","blue","square","music","random"],"skins":[{"unified":"1f500","native":"\u{1F500}"}],"version":1},"repeat":{"id":"repeat","name":"Repeat Button","keywords":["loop","record"],"skins":[{"unified":"1f501","native":"\u{1F501}"}],"version":1},"repeat_one":{"id":"repeat_one","name":"Repeat Single Button","keywords":["one","blue","square","loop"],"skins":[{"unified":"1f502","native":"\u{1F502}"}],"version":1},"arrow_forward":{"id":"arrow_forward","name":"Play Button","keywords":["arrow","forward","blue","square","right","direction"],"skins":[{"unified":"25b6-fe0f","native":"\u25B6\uFE0F"}],"version":1},"fast_forward":{"id":"fast_forward","name":"Fast-Forward Button","keywords":["fast","forward","blue","square","play","speed","continue"],"skins":[{"unified":"23e9","native":"\u23E9"}],"version":1},"black_right_pointing_double_triangle_with_vertical_bar":{"id":"black_right_pointing_double_triangle_with_vertical_bar","name":"Next Track Button","keywords":["black","right","pointing","double","triangle","with","vertical","bar","forward","blue","square"],"skins":[{"unified":"23ed-fe0f","native":"\u23ED\uFE0F"}],"version":1},"black_right_pointing_triangle_with_double_vertical_bar":{"id":"black_right_pointing_triangle_with_double_vertical_bar","name":"Play or Pause Button","keywords":["black","right","pointing","triangle","with","double","vertical","bar","blue","square"],"skins":[{"unified":"23ef-fe0f","native":"\u23EF\uFE0F"}],"version":1},"arrow_backward":{"id":"arrow_backward","name":"Reverse Button","keywords":["arrow","backward","blue","square","left","direction"],"skins":[{"unified":"25c0-fe0f","native":"\u25C0\uFE0F"}],"version":1},"rewind":{"id":"rewind","name":"Fast Reverse Button","keywords":["rewind","play","blue","square"],"skins":[{"unified":"23ea","native":"\u23EA"}],"version":1},"black_left_pointing_double_triangle_with_vertical_bar":{"id":"black_left_pointing_double_triangle_with_vertical_bar","name":"Last Track Button","keywords":["black","left","pointing","double","triangle","with","vertical","bar","backward"],"skins":[{"unified":"23ee-fe0f","native":"\u23EE\uFE0F"}],"version":1},"arrow_up_small":{"id":"arrow_up_small","name":"Upwards Button","keywords":["arrow","up","small","blue","square","triangle","direction","point","forward","top"],"skins":[{"unified":"1f53c","native":"\u{1F53C}"}],"version":1},"arrow_double_up":{"id":"arrow_double_up","name":"Fast Up Button","keywords":["arrow","double","blue","square","direction","top"],"skins":[{"unified":"23eb","native":"\u23EB"}],"version":1},"arrow_down_small":{"id":"arrow_down_small","name":"Downwards Button","keywords":["arrow","down","small","blue","square","direction","bottom"],"skins":[{"unified":"1f53d","native":"\u{1F53D}"}],"version":1},"arrow_double_down":{"id":"arrow_double_down","name":"Fast Down Button","keywords":["arrow","double","blue","square","direction","bottom"],"skins":[{"unified":"23ec","native":"\u23EC"}],"version":1},"double_vertical_bar":{"id":"double_vertical_bar","name":"Pause Button","keywords":["double","vertical","bar","blue","square"],"skins":[{"unified":"23f8-fe0f","native":"\u23F8\uFE0F"}],"version":1},"black_square_for_stop":{"id":"black_square_for_stop","name":"Stop Button","keywords":["black","square","for","blue"],"skins":[{"unified":"23f9-fe0f","native":"\u23F9\uFE0F"}],"version":1},"black_circle_for_record":{"id":"black_circle_for_record","name":"Record Button","keywords":["black","circle","for","blue","square"],"skins":[{"unified":"23fa-fe0f","native":"\u23FA\uFE0F"}],"version":1},"eject":{"id":"eject","name":"Eject Button","keywords":["blue","square"],"skins":[{"unified":"23cf-fe0f","native":"\u23CF\uFE0F"}],"version":1},"cinema":{"id":"cinema","name":"Cinema","keywords":["blue","square","record","film","movie","curtain","stage","theater"],"skins":[{"unified":"1f3a6","native":"\u{1F3A6}"}],"version":1},"low_brightness":{"id":"low_brightness","name":"Dim Button","keywords":["low","brightness","sun","afternoon","warm","summer"],"skins":[{"unified":"1f505","native":"\u{1F505}"}],"version":1},"high_brightness":{"id":"high_brightness","name":"Bright Button","keywords":["high","brightness","sun","light"],"skins":[{"unified":"1f506","native":"\u{1F506}"}],"version":1},"signal_strength":{"id":"signal_strength","name":"Antenna Bars","keywords":["signal","strength","blue","square","reception","phone","internet","connection","wifi","bluetooth"],"skins":[{"unified":"1f4f6","native":"\u{1F4F6}"}],"version":1},"wireless":{"id":"wireless","name":"Wireless","keywords":["wifi","internet","contactless","signal"],"skins":[{"unified":"1f6dc","native":"\u{1F6DC}"}],"version":15},"vibration_mode":{"id":"vibration_mode","name":"Vibration Mode","keywords":["orange","square","phone"],"skins":[{"unified":"1f4f3","native":"\u{1F4F3}"}],"version":1},"mobile_phone_off":{"id":"mobile_phone_off","name":"Mobile Phone off","keywords":["mute","orange","square","silence","quiet"],"skins":[{"unified":"1f4f4","native":"\u{1F4F4}"}],"version":1},"female_sign":{"id":"female_sign","name":"Female Sign","keywords":["woman","women","lady","girl"],"skins":[{"unified":"2640-fe0f","native":"\u2640\uFE0F"}],"version":4},"male_sign":{"id":"male_sign","name":"Male Sign","keywords":["man","boy","men"],"skins":[{"unified":"2642-fe0f","native":"\u2642\uFE0F"}],"version":4},"transgender_symbol":{"id":"transgender_symbol","name":"Transgender Symbol","keywords":["lgbtq"],"skins":[{"unified":"26a7-fe0f","native":"\u26A7\uFE0F"}],"version":13},"heavy_multiplication_x":{"id":"heavy_multiplication_x","name":"Multiply","keywords":["heavy","multiplication","x","sign","math","calculation"],"skins":[{"unified":"2716-fe0f","native":"\u2716\uFE0F"}],"version":1},"heavy_plus_sign":{"id":"heavy_plus_sign","name":"Plus","keywords":["heavy","sign","math","calculation","addition","more","increase"],"skins":[{"unified":"2795","native":"\u2795"}],"version":1},"heavy_minus_sign":{"id":"heavy_minus_sign","name":"Minus","keywords":["heavy","sign","math","calculation","subtract","less"],"skins":[{"unified":"2796","native":"\u2796"}],"version":1},"heavy_division_sign":{"id":"heavy_division_sign","name":"Divide","keywords":["heavy","division","sign","math","calculation"],"skins":[{"unified":"2797","native":"\u2797"}],"version":1},"heavy_equals_sign":{"id":"heavy_equals_sign","name":"Heavy Equals Sign","keywords":["math"],"skins":[{"unified":"1f7f0","native":"\u{1F7F0}"}],"version":14},"infinity":{"id":"infinity","name":"Infinity","keywords":["forever"],"skins":[{"unified":"267e-fe0f","native":"\u267E\uFE0F"}],"version":11},"bangbang":{"id":"bangbang","name":"Double Exclamation Mark","keywords":["bangbang","surprise"],"skins":[{"unified":"203c-fe0f","native":"\u203C\uFE0F"}],"version":1},"interrobang":{"id":"interrobang","name":"Exclamation Question Mark","keywords":["interrobang","wat","punctuation","surprise"],"skins":[{"unified":"2049-fe0f","native":"\u2049\uFE0F"}],"version":1},"question":{"id":"question","name":"Red Question Mark","keywords":["doubt","confused"],"skins":[{"unified":"2753","native":"\u2753"}],"version":1},"grey_question":{"id":"grey_question","name":"White Question Mark","keywords":["grey","doubts","gray","huh","confused"],"skins":[{"unified":"2754","native":"\u2754"}],"version":1},"grey_exclamation":{"id":"grey_exclamation","name":"White Exclamation Mark","keywords":["grey","surprise","punctuation","gray","wow","warning"],"skins":[{"unified":"2755","native":"\u2755"}],"version":1},"exclamation":{"id":"exclamation","name":"Red Exclamation Mark","keywords":["heavy","danger","surprise","punctuation","wow","warning"],"skins":[{"unified":"2757","native":"\u2757"}],"version":1},"wavy_dash":{"id":"wavy_dash","name":"Wavy Dash","keywords":["draw","line","moustache","mustache","squiggle","scribble"],"skins":[{"unified":"3030-fe0f","native":"\u3030\uFE0F"}],"version":1},"currency_exchange":{"id":"currency_exchange","name":"Currency Exchange","keywords":["money","sales","dollar","travel"],"skins":[{"unified":"1f4b1","native":"\u{1F4B1}"}],"version":1},"heavy_dollar_sign":{"id":"heavy_dollar_sign","name":"Heavy Dollar Sign","keywords":["money","sales","payment","currency","buck"],"skins":[{"unified":"1f4b2","native":"\u{1F4B2}"}],"version":1},"medical_symbol":{"id":"medical_symbol","name":"Medical Symbol","keywords":["staff","of","aesculapius","health","hospital"],"skins":[{"unified":"2695-fe0f","native":"\u2695\uFE0F"}],"version":4},"recycle":{"id":"recycle","name":"Recycling Symbol","keywords":["recycle","arrow","environment","garbage","trash"],"skins":[{"unified":"267b-fe0f","native":"\u267B\uFE0F"}],"version":1},"fleur_de_lis":{"id":"fleur_de_lis","name":"Fleur-De-Lis","keywords":["fleur","de","lis","decorative","scout"],"skins":[{"unified":"269c-fe0f","native":"\u269C\uFE0F"}],"version":1},"trident":{"id":"trident","name":"Trident Emblem","keywords":["weapon","spear"],"skins":[{"unified":"1f531","native":"\u{1F531}"}],"version":1},"name_badge":{"id":"name_badge","name":"Name Badge","keywords":["fire","forbid"],"skins":[{"unified":"1f4db","native":"\u{1F4DB}"}],"version":1},"beginner":{"id":"beginner","name":"Japanese Symbol for Beginner","keywords":["badge","shield"],"skins":[{"unified":"1f530","native":"\u{1F530}"}],"version":1},"o":{"id":"o","name":"Hollow Red Circle","keywords":["o","round"],"skins":[{"unified":"2b55","native":"\u2B55"}],"version":1},"white_check_mark":{"id":"white_check_mark","name":"Check Mark Button","keywords":["white","green","square","ok","agree","vote","election","answer","tick"],"skins":[{"unified":"2705","native":"\u2705"}],"version":1},"ballot_box_with_check":{"id":"ballot_box_with_check","name":"Check Box with Check","keywords":["ballot","ok","agree","confirm","black","square","vote","election","yes","tick"],"skins":[{"unified":"2611-fe0f","native":"\u2611\uFE0F"}],"version":1},"heavy_check_mark":{"id":"heavy_check_mark","name":"Check Mark","keywords":["heavy","ok","nike","answer","yes","tick"],"skins":[{"unified":"2714-fe0f","native":"\u2714\uFE0F"}],"version":1},"x":{"id":"x","name":"Cross Mark","keywords":["x","no","delete","remove","cancel","red"],"skins":[{"unified":"274c","native":"\u274C"}],"version":1},"negative_squared_cross_mark":{"id":"negative_squared_cross_mark","name":"Cross Mark Button","keywords":["negative","squared","x","green","square","no","deny"],"skins":[{"unified":"274e","native":"\u274E"}],"version":1},"curly_loop":{"id":"curly_loop","name":"Curly Loop","keywords":["scribble","draw","shape","squiggle"],"skins":[{"unified":"27b0","native":"\u27B0"}],"version":1},"loop":{"id":"loop","name":"Double Curly Loop","keywords":["tape","cassette"],"skins":[{"unified":"27bf","native":"\u27BF"}],"version":1},"part_alternation_mark":{"id":"part_alternation_mark","name":"Part Alternation Mark","keywords":["graph","presentation","stats","business","economics","bad"],"skins":[{"unified":"303d-fe0f","native":"\u303D\uFE0F"}],"version":1},"eight_spoked_asterisk":{"id":"eight_spoked_asterisk","name":"Eight Spoked Asterisk","keywords":["star","sparkle","green","square"],"skins":[{"unified":"2733-fe0f","native":"\u2733\uFE0F"}],"version":1},"eight_pointed_black_star":{"id":"eight_pointed_black_star","name":"Eight-Pointed Star","keywords":["eight","pointed","black","orange","square","shape","polygon"],"skins":[{"unified":"2734-fe0f","native":"\u2734\uFE0F"}],"version":1},"sparkle":{"id":"sparkle","name":"Sparkle","keywords":["stars","green","square","awesome","good","fireworks"],"skins":[{"unified":"2747-fe0f","native":"\u2747\uFE0F"}],"version":1},"copyright":{"id":"copyright","name":"Copyright","keywords":["ip","license","circle","law","legal"],"skins":[{"unified":"00a9-fe0f","native":"\xA9\uFE0F"}],"version":1},"registered":{"id":"registered","name":"Registered","keywords":["alphabet","circle"],"skins":[{"unified":"00ae-fe0f","native":"\xAE\uFE0F"}],"version":1},"tm":{"id":"tm","name":"Trade Mark","keywords":["tm","trademark","brand","law","legal"],"skins":[{"unified":"2122-fe0f","native":"\u2122\uFE0F"}],"version":1},"hash":{"id":"hash","name":"Hash Key","keywords":["keycap","","symbol","blue","square","twitter"],"skins":[{"unified":"0023-fe0f-20e3","native":"#\uFE0F\u20E3"}],"version":1},"keycap_star":{"id":"keycap_star","name":"Keycap: *","keywords":["keycap","star",""],"skins":[{"unified":"002a-fe0f-20e3","native":"*\uFE0F\u20E3"}],"version":2},"zero":{"id":"zero","name":"Keycap 0","keywords":["zero","numbers","blue","square","null"],"skins":[{"unified":"0030-fe0f-20e3","native":"0\uFE0F\u20E3"}],"version":1},"one":{"id":"one","name":"Keycap 1","keywords":["one","blue","square","numbers"],"skins":[{"unified":"0031-fe0f-20e3","native":"1\uFE0F\u20E3"}],"version":1},"two":{"id":"two","name":"Keycap 2","keywords":["two","numbers","prime","blue","square"],"skins":[{"unified":"0032-fe0f-20e3","native":"2\uFE0F\u20E3"}],"version":1},"three":{"id":"three","name":"Keycap 3","keywords":["three","numbers","prime","blue","square"],"skins":[{"unified":"0033-fe0f-20e3","native":"3\uFE0F\u20E3"}],"version":1},"four":{"id":"four","name":"Keycap 4","keywords":["four","numbers","blue","square"],"skins":[{"unified":"0034-fe0f-20e3","native":"4\uFE0F\u20E3"}],"version":1},"five":{"id":"five","name":"Keycap 5","keywords":["five","numbers","blue","square","prime"],"skins":[{"unified":"0035-fe0f-20e3","native":"5\uFE0F\u20E3"}],"version":1},"six":{"id":"six","name":"Keycap 6","keywords":["six","numbers","blue","square"],"skins":[{"unified":"0036-fe0f-20e3","native":"6\uFE0F\u20E3"}],"version":1},"seven":{"id":"seven","name":"Keycap 7","keywords":["seven","numbers","blue","square","prime"],"skins":[{"unified":"0037-fe0f-20e3","native":"7\uFE0F\u20E3"}],"version":1},"eight":{"id":"eight","name":"Keycap 8","keywords":["eight","blue","square","numbers"],"skins":[{"unified":"0038-fe0f-20e3","native":"8\uFE0F\u20E3"}],"version":1},"nine":{"id":"nine","name":"Keycap 9","keywords":["nine","blue","square","numbers"],"skins":[{"unified":"0039-fe0f-20e3","native":"9\uFE0F\u20E3"}],"version":1},"keycap_ten":{"id":"keycap_ten","name":"Keycap 10","keywords":["ten","numbers","blue","square"],"skins":[{"unified":"1f51f","native":"\u{1F51F}"}],"version":1},"capital_abcd":{"id":"capital_abcd","name":"Input Latin Uppercase","keywords":["capital","abcd","alphabet","words","blue","square"],"skins":[{"unified":"1f520","native":"\u{1F520}"}],"version":1},"abcd":{"id":"abcd","name":"Input Latin Lowercase","keywords":["abcd","blue","square","alphabet"],"skins":[{"unified":"1f521","native":"\u{1F521}"}],"version":1},"symbols":{"id":"symbols","name":"Input Symbols","keywords":["blue","square","music","note","ampersand","percent","glyphs","characters"],"skins":[{"unified":"1f523","native":"\u{1F523}"}],"version":1},"abc":{"id":"abc","name":"Input Latin Letters","keywords":["abc","blue","square","alphabet"],"skins":[{"unified":"1f524","native":"\u{1F524}"}],"version":1},"a":{"id":"a","name":"A Button (blood Type)","keywords":["red","square","alphabet","letter"],"skins":[{"unified":"1f170-fe0f","native":"\u{1F170}\uFE0F"}],"version":1},"ab":{"id":"ab","name":"Negative Squared Ab","keywords":["button","red","square","alphabet"],"skins":[{"unified":"1f18e","native":"\u{1F18E}"}],"version":1},"b":{"id":"b","name":"B Button (blood Type)","keywords":["red","square","alphabet","letter"],"skins":[{"unified":"1f171-fe0f","native":"\u{1F171}\uFE0F"}],"version":1},"cl":{"id":"cl","name":"Cl Button","keywords":["alphabet","words","red","square"],"skins":[{"unified":"1f191","native":"\u{1F191}"}],"version":1},"cool":{"id":"cool","name":"Cool Button","keywords":["words","blue","square"],"skins":[{"unified":"1f192","native":"\u{1F192}"}],"version":1},"free":{"id":"free","name":"Free Button","keywords":["blue","square","words"],"skins":[{"unified":"1f193","native":"\u{1F193}"}],"version":1},"information_source":{"id":"information_source","name":"Information","keywords":["source","blue","square","alphabet","letter"],"skins":[{"unified":"2139-fe0f","native":"\u2139\uFE0F"}],"version":1},"id":{"id":"id","name":"Id Button","keywords":["purple","square","words"],"skins":[{"unified":"1f194","native":"\u{1F194}"}],"version":1},"m":{"id":"m","name":"Circled M","keywords":["alphabet","blue","circle","letter"],"skins":[{"unified":"24c2-fe0f","native":"\u24C2\uFE0F"}],"version":1},"new":{"id":"new","name":"New Button","keywords":["blue","square","words","start"],"skins":[{"unified":"1f195","native":"\u{1F195}"}],"version":1},"ng":{"id":"ng","name":"Ng Button","keywords":["blue","square","words","shape","icon"],"skins":[{"unified":"1f196","native":"\u{1F196}"}],"version":1},"o2":{"id":"o2","name":"O Button (blood Type)","keywords":["o2","alphabet","red","square","letter"],"skins":[{"unified":"1f17e-fe0f","native":"\u{1F17E}\uFE0F"}],"version":1},"ok":{"id":"ok","name":"Ok Button","keywords":["good","agree","yes","blue","square"],"skins":[{"unified":"1f197","native":"\u{1F197}"}],"version":1},"parking":{"id":"parking","name":"P Button","keywords":["parking","cars","blue","square","alphabet","letter"],"skins":[{"unified":"1f17f-fe0f","native":"\u{1F17F}\uFE0F"}],"version":1},"sos":{"id":"sos","name":"Sos Button","keywords":["help","red","square","words","emergency","911"],"skins":[{"unified":"1f198","native":"\u{1F198}"}],"version":1},"up":{"id":"up","name":"Up! Button","keywords":["up","blue","square","above","high"],"skins":[{"unified":"1f199","native":"\u{1F199}"}],"version":1},"vs":{"id":"vs","name":"Vs Button","keywords":["words","orange","square"],"skins":[{"unified":"1f19a","native":"\u{1F19A}"}],"version":1},"koko":{"id":"koko","name":"Squared Katakana Koko","keywords":["japanese","here","button","blue","square","destination"],"skins":[{"unified":"1f201","native":"\u{1F201}"}],"version":1},"sa":{"id":"sa","name":"Squared Katakana Sa","keywords":["japanese","service","charge","button","blue","square"],"skins":[{"unified":"1f202-fe0f","native":"\u{1F202}\uFE0F"}],"version":1},"u6708":{"id":"u6708","name":"Japanese \u201Cmonthly Amount\u201D Button","keywords":["u6708","monthly","amount","chinese","month","moon","orange","square","kanji"],"skins":[{"unified":"1f237-fe0f","native":"\u{1F237}\uFE0F"}],"version":1},"u6709":{"id":"u6709","name":"Squared Cjk Unified Ideograph-6709","keywords":["u6709","japanese","not","free","of","charge","button","orange","square","chinese","have","kanji"],"skins":[{"unified":"1f236","native":"\u{1F236}"}],"version":1},"u6307":{"id":"u6307","name":"Japanese \u201Creserved\u201D Button","keywords":["u6307","reserved","chinese","point","green","square","kanji"],"skins":[{"unified":"1f22f","native":"\u{1F22F}"}],"version":1},"ideograph_advantage":{"id":"ideograph_advantage","name":"Japanese \u201Cbargain\u201D Button","keywords":["ideograph","advantage","bargain","chinese","kanji","obtain","get","circle"],"skins":[{"unified":"1f250","native":"\u{1F250}"}],"version":1},"u5272":{"id":"u5272","name":"Japanese \u201Cdiscount\u201D Button","keywords":["u5272","discount","cut","divide","chinese","kanji","pink","square"],"skins":[{"unified":"1f239","native":"\u{1F239}"}],"version":1},"u7121":{"id":"u7121","name":"Japanese \u201Cfree of Charge\u201D Button","keywords":["u7121","free","charge","nothing","chinese","kanji","orange","square"],"skins":[{"unified":"1f21a","native":"\u{1F21A}"}],"version":1},"u7981":{"id":"u7981","name":"Japanese \u201Cprohibited\u201D Button","keywords":["u7981","prohibited","kanji","chinese","forbidden","limit","restricted","red","square"],"skins":[{"unified":"1f232","native":"\u{1F232}"}],"version":1},"accept":{"id":"accept","name":"Circled Ideograph Accept","keywords":["japanese","acceptable","button","ok","good","chinese","kanji","agree","yes","orange","circle"],"skins":[{"unified":"1f251","native":"\u{1F251}"}],"version":1},"u7533":{"id":"u7533","name":"Japanese \u201Capplication\u201D Button","keywords":["u7533","application","chinese","kanji","orange","square"],"skins":[{"unified":"1f238","native":"\u{1F238}"}],"version":1},"u5408":{"id":"u5408","name":"Japanese \u201Cpassing Grade\u201D Button","keywords":["u5408","passing","grade","chinese","join","kanji","red","square"],"skins":[{"unified":"1f234","native":"\u{1F234}"}],"version":1},"u7a7a":{"id":"u7a7a","name":"Japanese \u201Cvacancy\u201D Button","keywords":["u7a7a","vacancy","kanji","chinese","empty","sky","blue","square"],"skins":[{"unified":"1f233","native":"\u{1F233}"}],"version":1},"congratulations":{"id":"congratulations","name":"Circled Ideograph Congratulation","keywords":["congratulations","japanese","button","chinese","kanji","red","circle"],"skins":[{"unified":"3297-fe0f","native":"\u3297\uFE0F"}],"version":1},"secret":{"id":"secret","name":"Circled Ideograph Secret","keywords":["japanese","button","privacy","chinese","sshh","kanji","red","circle"],"skins":[{"unified":"3299-fe0f","native":"\u3299\uFE0F"}],"version":1},"u55b6":{"id":"u55b6","name":"Squared Cjk Unified Ideograph-55b6","keywords":["u55b6","japanese","open","for","business","button","opening","hours","orange","square"],"skins":[{"unified":"1f23a","native":"\u{1F23A}"}],"version":1},"u6e80":{"id":"u6e80","name":"Japanese \u201Cno Vacancy\u201D Button","keywords":["u6e80","no","vacancy","full","chinese","red","square","kanji"],"skins":[{"unified":"1f235","native":"\u{1F235}"}],"version":1},"red_circle":{"id":"red_circle","name":"Red Circle","keywords":["shape","error","danger"],"skins":[{"unified":"1f534","native":"\u{1F534}"}],"version":1},"large_orange_circle":{"id":"large_orange_circle","name":"Orange Circle","keywords":["large","round"],"skins":[{"unified":"1f7e0","native":"\u{1F7E0}"}],"version":12},"large_yellow_circle":{"id":"large_yellow_circle","name":"Yellow Circle","keywords":["large","round"],"skins":[{"unified":"1f7e1","native":"\u{1F7E1}"}],"version":12},"large_green_circle":{"id":"large_green_circle","name":"Green Circle","keywords":["large","round"],"skins":[{"unified":"1f7e2","native":"\u{1F7E2}"}],"version":12},"large_blue_circle":{"id":"large_blue_circle","name":"Blue Circle","keywords":["large","shape","icon","button"],"skins":[{"unified":"1f535","native":"\u{1F535}"}],"version":1},"large_purple_circle":{"id":"large_purple_circle","name":"Purple Circle","keywords":["large","round"],"skins":[{"unified":"1f7e3","native":"\u{1F7E3}"}],"version":12},"large_brown_circle":{"id":"large_brown_circle","name":"Brown Circle","keywords":["large","round"],"skins":[{"unified":"1f7e4","native":"\u{1F7E4}"}],"version":12},"black_circle":{"id":"black_circle","name":"Black Circle","keywords":["shape","button","round"],"skins":[{"unified":"26ab","native":"\u26AB"}],"version":1},"white_circle":{"id":"white_circle","name":"White Circle","keywords":["shape","round"],"skins":[{"unified":"26aa","native":"\u26AA"}],"version":1},"large_red_square":{"id":"large_red_square","name":"Red Square","keywords":["large"],"skins":[{"unified":"1f7e5","native":"\u{1F7E5}"}],"version":12},"large_orange_square":{"id":"large_orange_square","name":"Orange Square","keywords":["large"],"skins":[{"unified":"1f7e7","native":"\u{1F7E7}"}],"version":12},"large_yellow_square":{"id":"large_yellow_square","name":"Yellow Square","keywords":["large"],"skins":[{"unified":"1f7e8","native":"\u{1F7E8}"}],"version":12},"large_green_square":{"id":"large_green_square","name":"Green Square","keywords":["large"],"skins":[{"unified":"1f7e9","native":"\u{1F7E9}"}],"version":12},"large_blue_square":{"id":"large_blue_square","name":"Blue Square","keywords":["large"],"skins":[{"unified":"1f7e6","native":"\u{1F7E6}"}],"version":12},"large_purple_square":{"id":"large_purple_square","name":"Purple Square","keywords":["large"],"skins":[{"unified":"1f7ea","native":"\u{1F7EA}"}],"version":12},"large_brown_square":{"id":"large_brown_square","name":"Brown Square","keywords":["large"],"skins":[{"unified":"1f7eb","native":"\u{1F7EB}"}],"version":12},"black_large_square":{"id":"black_large_square","name":"Black Large Square","keywords":["shape","icon","button"],"skins":[{"unified":"2b1b","native":"\u2B1B"}],"version":1},"white_large_square":{"id":"white_large_square","name":"White Large Square","keywords":["shape","icon","stone","button"],"skins":[{"unified":"2b1c","native":"\u2B1C"}],"version":1},"black_medium_square":{"id":"black_medium_square","name":"Black Medium Square","keywords":["shape","button","icon"],"skins":[{"unified":"25fc-fe0f","native":"\u25FC\uFE0F"}],"version":1},"white_medium_square":{"id":"white_medium_square","name":"White Medium Square","keywords":["shape","stone","icon"],"skins":[{"unified":"25fb-fe0f","native":"\u25FB\uFE0F"}],"version":1},"black_medium_small_square":{"id":"black_medium_small_square","name":"Black Medium Small Square","keywords":["icon","shape","button"],"skins":[{"unified":"25fe","native":"\u25FE"}],"version":1},"white_medium_small_square":{"id":"white_medium_small_square","name":"White Medium Small Square","keywords":["shape","stone","icon","button"],"skins":[{"unified":"25fd","native":"\u25FD"}],"version":1},"black_small_square":{"id":"black_small_square","name":"Black Small Square","keywords":["shape","icon"],"skins":[{"unified":"25aa-fe0f","native":"\u25AA\uFE0F"}],"version":1},"white_small_square":{"id":"white_small_square","name":"White Small Square","keywords":["shape","icon"],"skins":[{"unified":"25ab-fe0f","native":"\u25AB\uFE0F"}],"version":1},"large_orange_diamond":{"id":"large_orange_diamond","name":"Large Orange Diamond","keywords":["shape","jewel","gem"],"skins":[{"unified":"1f536","native":"\u{1F536}"}],"version":1},"large_blue_diamond":{"id":"large_blue_diamond","name":"Large Blue Diamond","keywords":["shape","jewel","gem"],"skins":[{"unified":"1f537","native":"\u{1F537}"}],"version":1},"small_orange_diamond":{"id":"small_orange_diamond","name":"Small Orange Diamond","keywords":["shape","jewel","gem"],"skins":[{"unified":"1f538","native":"\u{1F538}"}],"version":1},"small_blue_diamond":{"id":"small_blue_diamond","name":"Small Blue Diamond","keywords":["shape","jewel","gem"],"skins":[{"unified":"1f539","native":"\u{1F539}"}],"version":1},"small_red_triangle":{"id":"small_red_triangle","name":"Red Triangle Pointed Up","keywords":["small","shape","direction","top"],"skins":[{"unified":"1f53a","native":"\u{1F53A}"}],"version":1},"small_red_triangle_down":{"id":"small_red_triangle_down","name":"Red Triangle Pointed Down","keywords":["small","shape","direction","bottom"],"skins":[{"unified":"1f53b","native":"\u{1F53B}"}],"version":1},"diamond_shape_with_a_dot_inside":{"id":"diamond_shape_with_a_dot_inside","name":"Diamond with a Dot","keywords":["shape","inside","jewel","blue","gem","crystal","fancy"],"skins":[{"unified":"1f4a0","native":"\u{1F4A0}"}],"version":1},"radio_button":{"id":"radio_button","name":"Radio Button","keywords":["input","old","music","circle"],"skins":[{"unified":"1f518","native":"\u{1F518}"}],"version":1},"white_square_button":{"id":"white_square_button","name":"White Square Button","keywords":["shape","input"],"skins":[{"unified":"1f533","native":"\u{1F533}"}],"version":1},"black_square_button":{"id":"black_square_button","name":"Black Square Button","keywords":["shape","input","frame"],"skins":[{"unified":"1f532","native":"\u{1F532}"}],"version":1},"checkered_flag":{"id":"checkered_flag","name":"Chequered Flag","keywords":["checkered","contest","finishline","race","gokart"],"skins":[{"unified":"1f3c1","native":"\u{1F3C1}"}],"version":1},"triangular_flag_on_post":{"id":"triangular_flag_on_post","name":"Triangular Flag","keywords":["on","post","mark","milestone","place"],"skins":[{"unified":"1f6a9","native":"\u{1F6A9}"}],"version":1},"crossed_flags":{"id":"crossed_flags","name":"Crossed Flags","keywords":["japanese","nation","country","border"],"skins":[{"unified":"1f38c","native":"\u{1F38C}"}],"version":1},"waving_black_flag":{"id":"waving_black_flag","name":"Black Flag","keywords":["waving","pirate"],"skins":[{"unified":"1f3f4","native":"\u{1F3F4}"}],"version":1},"waving_white_flag":{"id":"waving_white_flag","name":"White Flag","keywords":["waving","losing","loser","lost","surrender","give","up","fail"],"skins":[{"unified":"1f3f3-fe0f","native":"\u{1F3F3}\uFE0F"}],"version":1},"rainbow-flag":{"id":"rainbow-flag","name":"Rainbow Flag","keywords":["pride","gay","lgbt","glbt","queer","homosexual","lesbian","bisexual","transgender"],"skins":[{"unified":"1f3f3-fe0f-200d-1f308","native":"\u{1F3F3}\uFE0F\u200D\u{1F308}"}],"version":4},"transgender_flag":{"id":"transgender_flag","name":"Transgender Flag","keywords":["lgbtq"],"skins":[{"unified":"1f3f3-fe0f-200d-26a7-fe0f","native":"\u{1F3F3}\uFE0F\u200D\u26A7\uFE0F"}],"version":13},"pirate_flag":{"id":"pirate_flag","name":"Pirate Flag","keywords":["skull","crossbones","banner"],"skins":[{"unified":"1f3f4-200d-2620-fe0f","native":"\u{1F3F4}\u200D\u2620\uFE0F"}],"version":11},"flag-ac":{"id":"flag-ac","name":"Ascension Island Flag","keywords":["ac"],"skins":[{"unified":"1f1e6-1f1e8","native":"\u{1F1E6}\u{1F1E8}"}],"version":2},"flag-ad":{"id":"flag-ad","name":"Andorra Flag","keywords":["ad","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1e9","native":"\u{1F1E6}\u{1F1E9}"}],"version":2},"flag-ae":{"id":"flag-ae","name":"United Arab Emirates Flag","keywords":["ae","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1ea","native":"\u{1F1E6}\u{1F1EA}"}],"version":2},"flag-af":{"id":"flag-af","name":"Afghanistan Flag","keywords":["af","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1eb","native":"\u{1F1E6}\u{1F1EB}"}],"version":2},"flag-ag":{"id":"flag-ag","name":"Antigua & Barbuda Flag","keywords":["ag","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1ec","native":"\u{1F1E6}\u{1F1EC}"}],"version":2},"flag-ai":{"id":"flag-ai","name":"Anguilla Flag","keywords":["ai","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1ee","native":"\u{1F1E6}\u{1F1EE}"}],"version":2},"flag-al":{"id":"flag-al","name":"Albania Flag","keywords":["al","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1f1","native":"\u{1F1E6}\u{1F1F1}"}],"version":2},"flag-am":{"id":"flag-am","name":"Armenia Flag","keywords":["am","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1f2","native":"\u{1F1E6}\u{1F1F2}"}],"version":2},"flag-ao":{"id":"flag-ao","name":"Angola Flag","keywords":["ao","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1f4","native":"\u{1F1E6}\u{1F1F4}"}],"version":2},"flag-aq":{"id":"flag-aq","name":"Antarctica Flag","keywords":["aq","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1f6","native":"\u{1F1E6}\u{1F1F6}"}],"version":2},"flag-ar":{"id":"flag-ar","name":"Argentina Flag","keywords":["ar","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1f7","native":"\u{1F1E6}\u{1F1F7}"}],"version":2},"flag-as":{"id":"flag-as","name":"American Samoa Flag","keywords":["as","ws","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1f8","native":"\u{1F1E6}\u{1F1F8}"}],"version":2},"flag-at":{"id":"flag-at","name":"Austria Flag","keywords":["at","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1f9","native":"\u{1F1E6}\u{1F1F9}"}],"version":2},"flag-au":{"id":"flag-au","name":"Australia Flag","keywords":["au","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1fa","native":"\u{1F1E6}\u{1F1FA}"}],"version":2},"flag-aw":{"id":"flag-aw","name":"Aruba Flag","keywords":["aw","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1fc","native":"\u{1F1E6}\u{1F1FC}"}],"version":2},"flag-ax":{"id":"flag-ax","name":"\xC5land Islands Flag","keywords":["ax","aland","Aland","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1fd","native":"\u{1F1E6}\u{1F1FD}"}],"version":2},"flag-az":{"id":"flag-az","name":"Azerbaijan Flag","keywords":["az","nation","country","banner"],"skins":[{"unified":"1f1e6-1f1ff","native":"\u{1F1E6}\u{1F1FF}"}],"version":2},"flag-ba":{"id":"flag-ba","name":"Bosnia & Herzegovina Flag","keywords":["ba","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1e6","native":"\u{1F1E7}\u{1F1E6}"}],"version":2},"flag-bb":{"id":"flag-bb","name":"Barbados Flag","keywords":["bb","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1e7","native":"\u{1F1E7}\u{1F1E7}"}],"version":2},"flag-bd":{"id":"flag-bd","name":"Bangladesh Flag","keywords":["bd","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1e9","native":"\u{1F1E7}\u{1F1E9}"}],"version":2},"flag-be":{"id":"flag-be","name":"Belgium Flag","keywords":["be","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1ea","native":"\u{1F1E7}\u{1F1EA}"}],"version":2},"flag-bf":{"id":"flag-bf","name":"Burkina Faso Flag","keywords":["bf","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1eb","native":"\u{1F1E7}\u{1F1EB}"}],"version":2},"flag-bg":{"id":"flag-bg","name":"Bulgaria Flag","keywords":["bg","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1ec","native":"\u{1F1E7}\u{1F1EC}"}],"version":2},"flag-bh":{"id":"flag-bh","name":"Bahrain Flag","keywords":["bh","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1ed","native":"\u{1F1E7}\u{1F1ED}"}],"version":2},"flag-bi":{"id":"flag-bi","name":"Burundi Flag","keywords":["bi","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1ee","native":"\u{1F1E7}\u{1F1EE}"}],"version":2},"flag-bj":{"id":"flag-bj","name":"Benin Flag","keywords":["bj","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1ef","native":"\u{1F1E7}\u{1F1EF}"}],"version":2},"flag-bl":{"id":"flag-bl","name":"St. Barth\xE9lemy Flag","keywords":["bl","st","barthelemy","saint","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1f1","native":"\u{1F1E7}\u{1F1F1}"}],"version":2},"flag-bm":{"id":"flag-bm","name":"Bermuda Flag","keywords":["bm","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1f2","native":"\u{1F1E7}\u{1F1F2}"}],"version":2},"flag-bn":{"id":"flag-bn","name":"Brunei Flag","keywords":["bn","darussalam","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1f3","native":"\u{1F1E7}\u{1F1F3}"}],"version":2},"flag-bo":{"id":"flag-bo","name":"Bolivia Flag","keywords":["bo","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1f4","native":"\u{1F1E7}\u{1F1F4}"}],"version":2},"flag-bq":{"id":"flag-bq","name":"Caribbean Netherlands Flag","keywords":["bq","bonaire","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1f6","native":"\u{1F1E7}\u{1F1F6}"}],"version":2},"flag-br":{"id":"flag-br","name":"Brazil Flag","keywords":["br","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1f7","native":"\u{1F1E7}\u{1F1F7}"}],"version":2},"flag-bs":{"id":"flag-bs","name":"Bahamas Flag","keywords":["bs","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1f8","native":"\u{1F1E7}\u{1F1F8}"}],"version":2},"flag-bt":{"id":"flag-bt","name":"Bhutan Flag","keywords":["bt","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1f9","native":"\u{1F1E7}\u{1F1F9}"}],"version":2},"flag-bv":{"id":"flag-bv","name":"Bouvet Island Flag","keywords":["bv","norway"],"skins":[{"unified":"1f1e7-1f1fb","native":"\u{1F1E7}\u{1F1FB}"}],"version":2},"flag-bw":{"id":"flag-bw","name":"Botswana Flag","keywords":["bw","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1fc","native":"\u{1F1E7}\u{1F1FC}"}],"version":2},"flag-by":{"id":"flag-by","name":"Belarus Flag","keywords":["by","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1fe","native":"\u{1F1E7}\u{1F1FE}"}],"version":2},"flag-bz":{"id":"flag-bz","name":"Belize Flag","keywords":["bz","nation","country","banner"],"skins":[{"unified":"1f1e7-1f1ff","native":"\u{1F1E7}\u{1F1FF}"}],"version":2},"flag-ca":{"id":"flag-ca","name":"Canada Flag","keywords":["ca","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1e6","native":"\u{1F1E8}\u{1F1E6}"}],"version":2},"flag-cc":{"id":"flag-cc","name":"Cocos (keeling) Islands Flag","keywords":["cc","keeling","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1e8","native":"\u{1F1E8}\u{1F1E8}"}],"version":2},"flag-cd":{"id":"flag-cd","name":"Congo - Kinshasa Flag","keywords":["cd","democratic","republic","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1e9","native":"\u{1F1E8}\u{1F1E9}"}],"version":2},"flag-cf":{"id":"flag-cf","name":"Central African Republic Flag","keywords":["cf","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1eb","native":"\u{1F1E8}\u{1F1EB}"}],"version":2},"flag-cg":{"id":"flag-cg","name":"Congo - Brazzaville Flag","keywords":["cg","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1ec","native":"\u{1F1E8}\u{1F1EC}"}],"version":2},"flag-ch":{"id":"flag-ch","name":"Switzerland Flag","keywords":["ch","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1ed","native":"\u{1F1E8}\u{1F1ED}"}],"version":2},"flag-ci":{"id":"flag-ci","name":"C\xF4te D\u2019ivoire Flag","keywords":["ci","cote","d","ivoire","ivory","coast","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1ee","native":"\u{1F1E8}\u{1F1EE}"}],"version":2},"flag-ck":{"id":"flag-ck","name":"Cook Islands Flag","keywords":["ck","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1f0","native":"\u{1F1E8}\u{1F1F0}"}],"version":2},"flag-cl":{"id":"flag-cl","name":"Chile Flag","keywords":["cl","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1f1","native":"\u{1F1E8}\u{1F1F1}"}],"version":2},"flag-cm":{"id":"flag-cm","name":"Cameroon Flag","keywords":["cm","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1f2","native":"\u{1F1E8}\u{1F1F2}"}],"version":2},"cn":{"id":"cn","name":"China Flag","keywords":["cn","chinese","prc","country","nation","banner"],"skins":[{"unified":"1f1e8-1f1f3","native":"\u{1F1E8}\u{1F1F3}"}],"version":1},"flag-co":{"id":"flag-co","name":"Colombia Flag","keywords":["co","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1f4","native":"\u{1F1E8}\u{1F1F4}"}],"version":2},"flag-cp":{"id":"flag-cp","name":"Clipperton Island Flag","keywords":["cp"],"skins":[{"unified":"1f1e8-1f1f5","native":"\u{1F1E8}\u{1F1F5}"}],"version":2},"flag-cr":{"id":"flag-cr","name":"Costa Rica Flag","keywords":["cr","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1f7","native":"\u{1F1E8}\u{1F1F7}"}],"version":2},"flag-cu":{"id":"flag-cu","name":"Cuba Flag","keywords":["cu","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1fa","native":"\u{1F1E8}\u{1F1FA}"}],"version":2},"flag-cv":{"id":"flag-cv","name":"Cape Verde Flag","keywords":["cv","cabo","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1fb","native":"\u{1F1E8}\u{1F1FB}"}],"version":2},"flag-cw":{"id":"flag-cw","name":"Cura\xE7ao Flag","keywords":["cw","curacao","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1fc","native":"\u{1F1E8}\u{1F1FC}"}],"version":2},"flag-cx":{"id":"flag-cx","name":"Christmas Island Flag","keywords":["cx","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1fd","native":"\u{1F1E8}\u{1F1FD}"}],"version":2},"flag-cy":{"id":"flag-cy","name":"Cyprus Flag","keywords":["cy","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1fe","native":"\u{1F1E8}\u{1F1FE}"}],"version":2},"flag-cz":{"id":"flag-cz","name":"Czechia Flag","keywords":["cz","nation","country","banner"],"skins":[{"unified":"1f1e8-1f1ff","native":"\u{1F1E8}\u{1F1FF}"}],"version":2},"de":{"id":"de","name":"Germany Flag","keywords":["de","german","nation","country","banner"],"skins":[{"unified":"1f1e9-1f1ea","native":"\u{1F1E9}\u{1F1EA}"}],"version":1},"flag-dg":{"id":"flag-dg","name":"Diego Garcia Flag","keywords":["dg"],"skins":[{"unified":"1f1e9-1f1ec","native":"\u{1F1E9}\u{1F1EC}"}],"version":2},"flag-dj":{"id":"flag-dj","name":"Djibouti Flag","keywords":["dj","nation","country","banner"],"skins":[{"unified":"1f1e9-1f1ef","native":"\u{1F1E9}\u{1F1EF}"}],"version":2},"flag-dk":{"id":"flag-dk","name":"Denmark Flag","keywords":["dk","nation","country","banner"],"skins":[{"unified":"1f1e9-1f1f0","native":"\u{1F1E9}\u{1F1F0}"}],"version":2},"flag-dm":{"id":"flag-dm","name":"Dominica Flag","keywords":["dm","nation","country","banner"],"skins":[{"unified":"1f1e9-1f1f2","native":"\u{1F1E9}\u{1F1F2}"}],"version":2},"flag-do":{"id":"flag-do","name":"Dominican Republic Flag","keywords":["do","nation","country","banner"],"skins":[{"unified":"1f1e9-1f1f4","native":"\u{1F1E9}\u{1F1F4}"}],"version":2},"flag-dz":{"id":"flag-dz","name":"Algeria Flag","keywords":["dz","nation","country","banner"],"skins":[{"unified":"1f1e9-1f1ff","native":"\u{1F1E9}\u{1F1FF}"}],"version":2},"flag-ea":{"id":"flag-ea","name":"Ceuta & Melilla Flag","keywords":["ea"],"skins":[{"unified":"1f1ea-1f1e6","native":"\u{1F1EA}\u{1F1E6}"}],"version":2},"flag-ec":{"id":"flag-ec","name":"Ecuador Flag","keywords":["ec","nation","country","banner"],"skins":[{"unified":"1f1ea-1f1e8","native":"\u{1F1EA}\u{1F1E8}"}],"version":2},"flag-ee":{"id":"flag-ee","name":"Estonia Flag","keywords":["ee","nation","country","banner"],"skins":[{"unified":"1f1ea-1f1ea","native":"\u{1F1EA}\u{1F1EA}"}],"version":2},"flag-eg":{"id":"flag-eg","name":"Egypt Flag","keywords":["eg","nation","country","banner"],"skins":[{"unified":"1f1ea-1f1ec","native":"\u{1F1EA}\u{1F1EC}"}],"version":2},"flag-eh":{"id":"flag-eh","name":"Western Sahara Flag","keywords":["eh","nation","country","banner"],"skins":[{"unified":"1f1ea-1f1ed","native":"\u{1F1EA}\u{1F1ED}"}],"version":2},"flag-er":{"id":"flag-er","name":"Eritrea Flag","keywords":["er","nation","country","banner"],"skins":[{"unified":"1f1ea-1f1f7","native":"\u{1F1EA}\u{1F1F7}"}],"version":2},"es":{"id":"es","name":"Spain Flag","keywords":["es","nation","country","banner"],"skins":[{"unified":"1f1ea-1f1f8","native":"\u{1F1EA}\u{1F1F8}"}],"version":1},"flag-et":{"id":"flag-et","name":"Ethiopia Flag","keywords":["et","nation","country","banner"],"skins":[{"unified":"1f1ea-1f1f9","native":"\u{1F1EA}\u{1F1F9}"}],"version":2},"flag-eu":{"id":"flag-eu","name":"European Union Flag","keywords":["eu","banner"],"skins":[{"unified":"1f1ea-1f1fa","native":"\u{1F1EA}\u{1F1FA}"}],"version":2},"flag-fi":{"id":"flag-fi","name":"Finland Flag","keywords":["fi","nation","country","banner"],"skins":[{"unified":"1f1eb-1f1ee","native":"\u{1F1EB}\u{1F1EE}"}],"version":2},"flag-fj":{"id":"flag-fj","name":"Fiji Flag","keywords":["fj","nation","country","banner"],"skins":[{"unified":"1f1eb-1f1ef","native":"\u{1F1EB}\u{1F1EF}"}],"version":2},"flag-fk":{"id":"flag-fk","name":"Falkland Islands Flag","keywords":["fk","malvinas","nation","country","banner"],"skins":[{"unified":"1f1eb-1f1f0","native":"\u{1F1EB}\u{1F1F0}"}],"version":2},"flag-fm":{"id":"flag-fm","name":"Micronesia Flag","keywords":["fm","federated","states","nation","country","banner"],"skins":[{"unified":"1f1eb-1f1f2","native":"\u{1F1EB}\u{1F1F2}"}],"version":2},"flag-fo":{"id":"flag-fo","name":"Faroe Islands Flag","keywords":["fo","nation","country","banner"],"skins":[{"unified":"1f1eb-1f1f4","native":"\u{1F1EB}\u{1F1F4}"}],"version":2},"fr":{"id":"fr","name":"France Flag","keywords":["fr","banner","nation","french","country"],"skins":[{"unified":"1f1eb-1f1f7","native":"\u{1F1EB}\u{1F1F7}"}],"version":1},"flag-ga":{"id":"flag-ga","name":"Gabon Flag","keywords":["ga","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1e6","native":"\u{1F1EC}\u{1F1E6}"}],"version":2},"gb":{"id":"gb","name":"United Kingdom Flag","keywords":["gb","uk","great","britain","northern","ireland","nation","country","banner","british","UK","english","england","union","jack"],"skins":[{"unified":"1f1ec-1f1e7","native":"\u{1F1EC}\u{1F1E7}"}],"version":1},"flag-gd":{"id":"flag-gd","name":"Grenada Flag","keywords":["gd","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1e9","native":"\u{1F1EC}\u{1F1E9}"}],"version":2},"flag-ge":{"id":"flag-ge","name":"Georgia Flag","keywords":["ge","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1ea","native":"\u{1F1EC}\u{1F1EA}"}],"version":2},"flag-gf":{"id":"flag-gf","name":"French Guiana Flag","keywords":["gf","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1eb","native":"\u{1F1EC}\u{1F1EB}"}],"version":2},"flag-gg":{"id":"flag-gg","name":"Guernsey Flag","keywords":["gg","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1ec","native":"\u{1F1EC}\u{1F1EC}"}],"version":2},"flag-gh":{"id":"flag-gh","name":"Ghana Flag","keywords":["gh","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1ed","native":"\u{1F1EC}\u{1F1ED}"}],"version":2},"flag-gi":{"id":"flag-gi","name":"Gibraltar Flag","keywords":["gi","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1ee","native":"\u{1F1EC}\u{1F1EE}"}],"version":2},"flag-gl":{"id":"flag-gl","name":"Greenland Flag","keywords":["gl","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1f1","native":"\u{1F1EC}\u{1F1F1}"}],"version":2},"flag-gm":{"id":"flag-gm","name":"Gambia Flag","keywords":["gm","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1f2","native":"\u{1F1EC}\u{1F1F2}"}],"version":2},"flag-gn":{"id":"flag-gn","name":"Guinea Flag","keywords":["gn","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1f3","native":"\u{1F1EC}\u{1F1F3}"}],"version":2},"flag-gp":{"id":"flag-gp","name":"Guadeloupe Flag","keywords":["gp","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1f5","native":"\u{1F1EC}\u{1F1F5}"}],"version":2},"flag-gq":{"id":"flag-gq","name":"Equatorial Guinea Flag","keywords":["gq","gn","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1f6","native":"\u{1F1EC}\u{1F1F6}"}],"version":2},"flag-gr":{"id":"flag-gr","name":"Greece Flag","keywords":["gr","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1f7","native":"\u{1F1EC}\u{1F1F7}"}],"version":2},"flag-gs":{"id":"flag-gs","name":"South Georgia & South Sandwich Islands Flag","keywords":["gs","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1f8","native":"\u{1F1EC}\u{1F1F8}"}],"version":2},"flag-gt":{"id":"flag-gt","name":"Guatemala Flag","keywords":["gt","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1f9","native":"\u{1F1EC}\u{1F1F9}"}],"version":2},"flag-gu":{"id":"flag-gu","name":"Guam Flag","keywords":["gu","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1fa","native":"\u{1F1EC}\u{1F1FA}"}],"version":2},"flag-gw":{"id":"flag-gw","name":"Guinea-Bissau Flag","keywords":["gw","guinea","bissau","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1fc","native":"\u{1F1EC}\u{1F1FC}"}],"version":2},"flag-gy":{"id":"flag-gy","name":"Guyana Flag","keywords":["gy","nation","country","banner"],"skins":[{"unified":"1f1ec-1f1fe","native":"\u{1F1EC}\u{1F1FE}"}],"version":2},"flag-hk":{"id":"flag-hk","name":"Hong Kong Sar China Flag","keywords":["hk","nation","country","banner"],"skins":[{"unified":"1f1ed-1f1f0","native":"\u{1F1ED}\u{1F1F0}"}],"version":2},"flag-hm":{"id":"flag-hm","name":"Heard & Mcdonald Islands Flag","keywords":["hm"],"skins":[{"unified":"1f1ed-1f1f2","native":"\u{1F1ED}\u{1F1F2}"}],"version":2},"flag-hn":{"id":"flag-hn","name":"Honduras Flag","keywords":["hn","nation","country","banner"],"skins":[{"unified":"1f1ed-1f1f3","native":"\u{1F1ED}\u{1F1F3}"}],"version":2},"flag-hr":{"id":"flag-hr","name":"Croatia Flag","keywords":["hr","nation","country","banner"],"skins":[{"unified":"1f1ed-1f1f7","native":"\u{1F1ED}\u{1F1F7}"}],"version":2},"flag-ht":{"id":"flag-ht","name":"Haiti Flag","keywords":["ht","nation","country","banner"],"skins":[{"unified":"1f1ed-1f1f9","native":"\u{1F1ED}\u{1F1F9}"}],"version":2},"flag-hu":{"id":"flag-hu","name":"Hungary Flag","keywords":["hu","nation","country","banner"],"skins":[{"unified":"1f1ed-1f1fa","native":"\u{1F1ED}\u{1F1FA}"}],"version":2},"flag-ic":{"id":"flag-ic","name":"Canary Islands Flag","keywords":["ic","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1e8","native":"\u{1F1EE}\u{1F1E8}"}],"version":2},"flag-id":{"id":"flag-id","name":"Indonesia Flag","keywords":["id","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1e9","native":"\u{1F1EE}\u{1F1E9}"}],"version":2},"flag-ie":{"id":"flag-ie","name":"Ireland Flag","keywords":["ie","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1ea","native":"\u{1F1EE}\u{1F1EA}"}],"version":2},"flag-il":{"id":"flag-il","name":"Israel Flag","keywords":["il","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1f1","native":"\u{1F1EE}\u{1F1F1}"}],"version":2},"flag-im":{"id":"flag-im","name":"Isle of Man Flag","keywords":["im","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1f2","native":"\u{1F1EE}\u{1F1F2}"}],"version":2},"flag-in":{"id":"flag-in","name":"India Flag","keywords":["in","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1f3","native":"\u{1F1EE}\u{1F1F3}"}],"version":2},"flag-io":{"id":"flag-io","name":"British Indian Ocean Territory Flag","keywords":["io","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1f4","native":"\u{1F1EE}\u{1F1F4}"}],"version":2},"flag-iq":{"id":"flag-iq","name":"Iraq Flag","keywords":["iq","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1f6","native":"\u{1F1EE}\u{1F1F6}"}],"version":2},"flag-ir":{"id":"flag-ir","name":"Iran Flag","keywords":["ir","islamic","republic","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1f7","native":"\u{1F1EE}\u{1F1F7}"}],"version":2},"flag-is":{"id":"flag-is","name":"Iceland Flag","keywords":["is","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1f8","native":"\u{1F1EE}\u{1F1F8}"}],"version":2},"it":{"id":"it","name":"Italy Flag","keywords":["it","nation","country","banner"],"skins":[{"unified":"1f1ee-1f1f9","native":"\u{1F1EE}\u{1F1F9}"}],"version":1},"flag-je":{"id":"flag-je","name":"Jersey Flag","keywords":["je","nation","country","banner"],"skins":[{"unified":"1f1ef-1f1ea","native":"\u{1F1EF}\u{1F1EA}"}],"version":2},"flag-jm":{"id":"flag-jm","name":"Jamaica Flag","keywords":["jm","nation","country","banner"],"skins":[{"unified":"1f1ef-1f1f2","native":"\u{1F1EF}\u{1F1F2}"}],"version":2},"flag-jo":{"id":"flag-jo","name":"Jordan Flag","keywords":["jo","nation","country","banner"],"skins":[{"unified":"1f1ef-1f1f4","native":"\u{1F1EF}\u{1F1F4}"}],"version":2},"jp":{"id":"jp","name":"Japan Flag","keywords":["jp","japanese","nation","country","banner","ja"],"skins":[{"unified":"1f1ef-1f1f5","native":"\u{1F1EF}\u{1F1F5}"}],"version":1},"flag-ke":{"id":"flag-ke","name":"Kenya Flag","keywords":["ke","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1ea","native":"\u{1F1F0}\u{1F1EA}"}],"version":2},"flag-kg":{"id":"flag-kg","name":"Kyrgyzstan Flag","keywords":["kg","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1ec","native":"\u{1F1F0}\u{1F1EC}"}],"version":2},"flag-kh":{"id":"flag-kh","name":"Cambodia Flag","keywords":["kh","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1ed","native":"\u{1F1F0}\u{1F1ED}"}],"version":2},"flag-ki":{"id":"flag-ki","name":"Kiribati Flag","keywords":["ki","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1ee","native":"\u{1F1F0}\u{1F1EE}"}],"version":2},"flag-km":{"id":"flag-km","name":"Comoros Flag","keywords":["km","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1f2","native":"\u{1F1F0}\u{1F1F2}"}],"version":2},"flag-kn":{"id":"flag-kn","name":"St. Kitts & Nevis Flag","keywords":["kn","st","saint","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1f3","native":"\u{1F1F0}\u{1F1F3}"}],"version":2},"flag-kp":{"id":"flag-kp","name":"North Korea Flag","keywords":["kp","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1f5","native":"\u{1F1F0}\u{1F1F5}"}],"version":2},"kr":{"id":"kr","name":"South Korea Flag","keywords":["kr","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1f7","native":"\u{1F1F0}\u{1F1F7}"}],"version":1},"flag-kw":{"id":"flag-kw","name":"Kuwait Flag","keywords":["kw","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1fc","native":"\u{1F1F0}\u{1F1FC}"}],"version":2},"flag-ky":{"id":"flag-ky","name":"Cayman Islands Flag","keywords":["ky","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1fe","native":"\u{1F1F0}\u{1F1FE}"}],"version":2},"flag-kz":{"id":"flag-kz","name":"Kazakhstan Flag","keywords":["kz","nation","country","banner"],"skins":[{"unified":"1f1f0-1f1ff","native":"\u{1F1F0}\u{1F1FF}"}],"version":2},"flag-la":{"id":"flag-la","name":"Laos Flag","keywords":["la","lao","democratic","republic","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1e6","native":"\u{1F1F1}\u{1F1E6}"}],"version":2},"flag-lb":{"id":"flag-lb","name":"Lebanon Flag","keywords":["lb","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1e7","native":"\u{1F1F1}\u{1F1E7}"}],"version":2},"flag-lc":{"id":"flag-lc","name":"St. Lucia Flag","keywords":["lc","st","saint","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1e8","native":"\u{1F1F1}\u{1F1E8}"}],"version":2},"flag-li":{"id":"flag-li","name":"Liechtenstein Flag","keywords":["li","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1ee","native":"\u{1F1F1}\u{1F1EE}"}],"version":2},"flag-lk":{"id":"flag-lk","name":"Sri Lanka Flag","keywords":["lk","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1f0","native":"\u{1F1F1}\u{1F1F0}"}],"version":2},"flag-lr":{"id":"flag-lr","name":"Liberia Flag","keywords":["lr","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1f7","native":"\u{1F1F1}\u{1F1F7}"}],"version":2},"flag-ls":{"id":"flag-ls","name":"Lesotho Flag","keywords":["ls","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1f8","native":"\u{1F1F1}\u{1F1F8}"}],"version":2},"flag-lt":{"id":"flag-lt","name":"Lithuania Flag","keywords":["lt","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1f9","native":"\u{1F1F1}\u{1F1F9}"}],"version":2},"flag-lu":{"id":"flag-lu","name":"Luxembourg Flag","keywords":["lu","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1fa","native":"\u{1F1F1}\u{1F1FA}"}],"version":2},"flag-lv":{"id":"flag-lv","name":"Latvia Flag","keywords":["lv","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1fb","native":"\u{1F1F1}\u{1F1FB}"}],"version":2},"flag-ly":{"id":"flag-ly","name":"Libya Flag","keywords":["ly","nation","country","banner"],"skins":[{"unified":"1f1f1-1f1fe","native":"\u{1F1F1}\u{1F1FE}"}],"version":2},"flag-ma":{"id":"flag-ma","name":"Morocco Flag","keywords":["ma","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1e6","native":"\u{1F1F2}\u{1F1E6}"}],"version":2},"flag-mc":{"id":"flag-mc","name":"Monaco Flag","keywords":["mc","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1e8","native":"\u{1F1F2}\u{1F1E8}"}],"version":2},"flag-md":{"id":"flag-md","name":"Moldova Flag","keywords":["md","republic","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1e9","native":"\u{1F1F2}\u{1F1E9}"}],"version":2},"flag-me":{"id":"flag-me","name":"Montenegro Flag","keywords":["me","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1ea","native":"\u{1F1F2}\u{1F1EA}"}],"version":2},"flag-mf":{"id":"flag-mf","name":"St. Martin Flag","keywords":["mf","st"],"skins":[{"unified":"1f1f2-1f1eb","native":"\u{1F1F2}\u{1F1EB}"}],"version":2},"flag-mg":{"id":"flag-mg","name":"Madagascar Flag","keywords":["mg","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1ec","native":"\u{1F1F2}\u{1F1EC}"}],"version":2},"flag-mh":{"id":"flag-mh","name":"Marshall Islands Flag","keywords":["mh","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1ed","native":"\u{1F1F2}\u{1F1ED}"}],"version":2},"flag-mk":{"id":"flag-mk","name":"North Macedonia Flag","keywords":["mk","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1f0","native":"\u{1F1F2}\u{1F1F0}"}],"version":2},"flag-ml":{"id":"flag-ml","name":"Mali Flag","keywords":["ml","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1f1","native":"\u{1F1F2}\u{1F1F1}"}],"version":2},"flag-mm":{"id":"flag-mm","name":"Myanmar (burma) Flag","keywords":["mm","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1f2","native":"\u{1F1F2}\u{1F1F2}"}],"version":2},"flag-mn":{"id":"flag-mn","name":"Mongolia Flag","keywords":["mn","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1f3","native":"\u{1F1F2}\u{1F1F3}"}],"version":2},"flag-mo":{"id":"flag-mo","name":"Macao Sar China Flag","keywords":["mo","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1f4","native":"\u{1F1F2}\u{1F1F4}"}],"version":2},"flag-mp":{"id":"flag-mp","name":"Northern Mariana Islands Flag","keywords":["mp","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1f5","native":"\u{1F1F2}\u{1F1F5}"}],"version":2},"flag-mq":{"id":"flag-mq","name":"Martinique Flag","keywords":["mq","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1f6","native":"\u{1F1F2}\u{1F1F6}"}],"version":2},"flag-mr":{"id":"flag-mr","name":"Mauritania Flag","keywords":["mr","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1f7","native":"\u{1F1F2}\u{1F1F7}"}],"version":2},"flag-ms":{"id":"flag-ms","name":"Montserrat Flag","keywords":["ms","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1f8","native":"\u{1F1F2}\u{1F1F8}"}],"version":2},"flag-mt":{"id":"flag-mt","name":"Malta Flag","keywords":["mt","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1f9","native":"\u{1F1F2}\u{1F1F9}"}],"version":2},"flag-mu":{"id":"flag-mu","name":"Mauritius Flag","keywords":["mu","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1fa","native":"\u{1F1F2}\u{1F1FA}"}],"version":2},"flag-mv":{"id":"flag-mv","name":"Maldives Flag","keywords":["mv","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1fb","native":"\u{1F1F2}\u{1F1FB}"}],"version":2},"flag-mw":{"id":"flag-mw","name":"Malawi Flag","keywords":["mw","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1fc","native":"\u{1F1F2}\u{1F1FC}"}],"version":2},"flag-mx":{"id":"flag-mx","name":"Mexico Flag","keywords":["mx","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1fd","native":"\u{1F1F2}\u{1F1FD}"}],"version":2},"flag-my":{"id":"flag-my","name":"Malaysia Flag","keywords":["my","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1fe","native":"\u{1F1F2}\u{1F1FE}"}],"version":2},"flag-mz":{"id":"flag-mz","name":"Mozambique Flag","keywords":["mz","nation","country","banner"],"skins":[{"unified":"1f1f2-1f1ff","native":"\u{1F1F2}\u{1F1FF}"}],"version":2},"flag-na":{"id":"flag-na","name":"Namibia Flag","keywords":["na","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1e6","native":"\u{1F1F3}\u{1F1E6}"}],"version":2},"flag-nc":{"id":"flag-nc","name":"New Caledonia Flag","keywords":["nc","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1e8","native":"\u{1F1F3}\u{1F1E8}"}],"version":2},"flag-ne":{"id":"flag-ne","name":"Niger Flag","keywords":["ne","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1ea","native":"\u{1F1F3}\u{1F1EA}"}],"version":2},"flag-nf":{"id":"flag-nf","name":"Norfolk Island Flag","keywords":["nf","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1eb","native":"\u{1F1F3}\u{1F1EB}"}],"version":2},"flag-ng":{"id":"flag-ng","name":"Nigeria Flag","keywords":["ng","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1ec","native":"\u{1F1F3}\u{1F1EC}"}],"version":2},"flag-ni":{"id":"flag-ni","name":"Nicaragua Flag","keywords":["ni","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1ee","native":"\u{1F1F3}\u{1F1EE}"}],"version":2},"flag-nl":{"id":"flag-nl","name":"Netherlands Flag","keywords":["nl","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1f1","native":"\u{1F1F3}\u{1F1F1}"}],"version":2},"flag-no":{"id":"flag-no","name":"Norway Flag","keywords":["no","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1f4","native":"\u{1F1F3}\u{1F1F4}"}],"version":2},"flag-np":{"id":"flag-np","name":"Nepal Flag","keywords":["np","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1f5","native":"\u{1F1F3}\u{1F1F5}"}],"version":2},"flag-nr":{"id":"flag-nr","name":"Nauru Flag","keywords":["nr","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1f7","native":"\u{1F1F3}\u{1F1F7}"}],"version":2},"flag-nu":{"id":"flag-nu","name":"Niue Flag","keywords":["nu","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1fa","native":"\u{1F1F3}\u{1F1FA}"}],"version":2},"flag-nz":{"id":"flag-nz","name":"New Zealand Flag","keywords":["nz","nation","country","banner"],"skins":[{"unified":"1f1f3-1f1ff","native":"\u{1F1F3}\u{1F1FF}"}],"version":2},"flag-om":{"id":"flag-om","name":"Oman Flag","keywords":["om","symbol","nation","country","banner"],"skins":[{"unified":"1f1f4-1f1f2","native":"\u{1F1F4}\u{1F1F2}"}],"version":2},"flag-pa":{"id":"flag-pa","name":"Panama Flag","keywords":["pa","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1e6","native":"\u{1F1F5}\u{1F1E6}"}],"version":2},"flag-pe":{"id":"flag-pe","name":"Peru Flag","keywords":["pe","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1ea","native":"\u{1F1F5}\u{1F1EA}"}],"version":2},"flag-pf":{"id":"flag-pf","name":"French Polynesia Flag","keywords":["pf","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1eb","native":"\u{1F1F5}\u{1F1EB}"}],"version":2},"flag-pg":{"id":"flag-pg","name":"Papua New Guinea Flag","keywords":["pg","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1ec","native":"\u{1F1F5}\u{1F1EC}"}],"version":2},"flag-ph":{"id":"flag-ph","name":"Philippines Flag","keywords":["ph","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1ed","native":"\u{1F1F5}\u{1F1ED}"}],"version":2},"flag-pk":{"id":"flag-pk","name":"Pakistan Flag","keywords":["pk","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1f0","native":"\u{1F1F5}\u{1F1F0}"}],"version":2},"flag-pl":{"id":"flag-pl","name":"Poland Flag","keywords":["pl","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1f1","native":"\u{1F1F5}\u{1F1F1}"}],"version":2},"flag-pm":{"id":"flag-pm","name":"St. Pierre & Miquelon Flag","keywords":["pm","st","saint","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1f2","native":"\u{1F1F5}\u{1F1F2}"}],"version":2},"flag-pn":{"id":"flag-pn","name":"Pitcairn Islands Flag","keywords":["pn","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1f3","native":"\u{1F1F5}\u{1F1F3}"}],"version":2},"flag-pr":{"id":"flag-pr","name":"Puerto Rico Flag","keywords":["pr","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1f7","native":"\u{1F1F5}\u{1F1F7}"}],"version":2},"flag-ps":{"id":"flag-ps","name":"Palestinian Territories Flag","keywords":["ps","palestine","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1f8","native":"\u{1F1F5}\u{1F1F8}"}],"version":2},"flag-pt":{"id":"flag-pt","name":"Portugal Flag","keywords":["pt","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1f9","native":"\u{1F1F5}\u{1F1F9}"}],"version":2},"flag-pw":{"id":"flag-pw","name":"Palau Flag","keywords":["pw","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1fc","native":"\u{1F1F5}\u{1F1FC}"}],"version":2},"flag-py":{"id":"flag-py","name":"Paraguay Flag","keywords":["py","nation","country","banner"],"skins":[{"unified":"1f1f5-1f1fe","native":"\u{1F1F5}\u{1F1FE}"}],"version":2},"flag-qa":{"id":"flag-qa","name":"Qatar Flag","keywords":["qa","nation","country","banner"],"skins":[{"unified":"1f1f6-1f1e6","native":"\u{1F1F6}\u{1F1E6}"}],"version":2},"flag-re":{"id":"flag-re","name":"R\xE9union Flag","keywords":["re","reunion","nation","country","banner"],"skins":[{"unified":"1f1f7-1f1ea","native":"\u{1F1F7}\u{1F1EA}"}],"version":2},"flag-ro":{"id":"flag-ro","name":"Romania Flag","keywords":["ro","nation","country","banner"],"skins":[{"unified":"1f1f7-1f1f4","native":"\u{1F1F7}\u{1F1F4}"}],"version":2},"flag-rs":{"id":"flag-rs","name":"Serbia Flag","keywords":["rs","nation","country","banner"],"skins":[{"unified":"1f1f7-1f1f8","native":"\u{1F1F7}\u{1F1F8}"}],"version":2},"ru":{"id":"ru","name":"Russia Flag","keywords":["ru","russian","federation","nation","country","banner"],"skins":[{"unified":"1f1f7-1f1fa","native":"\u{1F1F7}\u{1F1FA}"}],"version":1},"flag-rw":{"id":"flag-rw","name":"Rwanda Flag","keywords":["rw","nation","country","banner"],"skins":[{"unified":"1f1f7-1f1fc","native":"\u{1F1F7}\u{1F1FC}"}],"version":2},"flag-sa":{"id":"flag-sa","name":"Saudi Arabia Flag","keywords":["sa","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1e6","native":"\u{1F1F8}\u{1F1E6}"}],"version":2},"flag-sb":{"id":"flag-sb","name":"Solomon Islands Flag","keywords":["sb","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1e7","native":"\u{1F1F8}\u{1F1E7}"}],"version":2},"flag-sc":{"id":"flag-sc","name":"Seychelles Flag","keywords":["sc","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1e8","native":"\u{1F1F8}\u{1F1E8}"}],"version":2},"flag-sd":{"id":"flag-sd","name":"Sudan Flag","keywords":["sd","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1e9","native":"\u{1F1F8}\u{1F1E9}"}],"version":2},"flag-se":{"id":"flag-se","name":"Sweden Flag","keywords":["se","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1ea","native":"\u{1F1F8}\u{1F1EA}"}],"version":2},"flag-sg":{"id":"flag-sg","name":"Singapore Flag","keywords":["sg","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1ec","native":"\u{1F1F8}\u{1F1EC}"}],"version":2},"flag-sh":{"id":"flag-sh","name":"St. Helena Flag","keywords":["sh","st","saint","ascension","tristan","cunha","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1ed","native":"\u{1F1F8}\u{1F1ED}"}],"version":2},"flag-si":{"id":"flag-si","name":"Slovenia Flag","keywords":["si","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1ee","native":"\u{1F1F8}\u{1F1EE}"}],"version":2},"flag-sj":{"id":"flag-sj","name":"Svalbard & Jan Mayen Flag","keywords":["sj"],"skins":[{"unified":"1f1f8-1f1ef","native":"\u{1F1F8}\u{1F1EF}"}],"version":2},"flag-sk":{"id":"flag-sk","name":"Slovakia Flag","keywords":["sk","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1f0","native":"\u{1F1F8}\u{1F1F0}"}],"version":2},"flag-sl":{"id":"flag-sl","name":"Sierra Leone Flag","keywords":["sl","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1f1","native":"\u{1F1F8}\u{1F1F1}"}],"version":2},"flag-sm":{"id":"flag-sm","name":"San Marino Flag","keywords":["sm","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1f2","native":"\u{1F1F8}\u{1F1F2}"}],"version":2},"flag-sn":{"id":"flag-sn","name":"Senegal Flag","keywords":["sn","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1f3","native":"\u{1F1F8}\u{1F1F3}"}],"version":2},"flag-so":{"id":"flag-so","name":"Somalia Flag","keywords":["so","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1f4","native":"\u{1F1F8}\u{1F1F4}"}],"version":2},"flag-sr":{"id":"flag-sr","name":"Suriname Flag","keywords":["sr","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1f7","native":"\u{1F1F8}\u{1F1F7}"}],"version":2},"flag-ss":{"id":"flag-ss","name":"South Sudan Flag","keywords":["ss","sd","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1f8","native":"\u{1F1F8}\u{1F1F8}"}],"version":2},"flag-st":{"id":"flag-st","name":"S\xE3o Tom\xE9 & Pr\xEDncipe Flag","keywords":["st","sao","tome","principe","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1f9","native":"\u{1F1F8}\u{1F1F9}"}],"version":2},"flag-sv":{"id":"flag-sv","name":"El Salvador Flag","keywords":["sv","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1fb","native":"\u{1F1F8}\u{1F1FB}"}],"version":2},"flag-sx":{"id":"flag-sx","name":"Sint Maarten Flag","keywords":["sx","dutch","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1fd","native":"\u{1F1F8}\u{1F1FD}"}],"version":2},"flag-sy":{"id":"flag-sy","name":"Syria Flag","keywords":["sy","syrian","arab","republic","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1fe","native":"\u{1F1F8}\u{1F1FE}"}],"version":2},"flag-sz":{"id":"flag-sz","name":"Eswatini Flag","keywords":["sz","nation","country","banner"],"skins":[{"unified":"1f1f8-1f1ff","native":"\u{1F1F8}\u{1F1FF}"}],"version":2},"flag-ta":{"id":"flag-ta","name":"Tristan Da Cunha Flag","keywords":["ta"],"skins":[{"unified":"1f1f9-1f1e6","native":"\u{1F1F9}\u{1F1E6}"}],"version":2},"flag-tc":{"id":"flag-tc","name":"Turks & Caicos Islands Flag","keywords":["tc","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1e8","native":"\u{1F1F9}\u{1F1E8}"}],"version":2},"flag-td":{"id":"flag-td","name":"Chad Flag","keywords":["td","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1e9","native":"\u{1F1F9}\u{1F1E9}"}],"version":2},"flag-tf":{"id":"flag-tf","name":"French Southern Territories Flag","keywords":["tf","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1eb","native":"\u{1F1F9}\u{1F1EB}"}],"version":2},"flag-tg":{"id":"flag-tg","name":"Togo Flag","keywords":["tg","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1ec","native":"\u{1F1F9}\u{1F1EC}"}],"version":2},"flag-th":{"id":"flag-th","name":"Thailand Flag","keywords":["th","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1ed","native":"\u{1F1F9}\u{1F1ED}"}],"version":2},"flag-tj":{"id":"flag-tj","name":"Tajikistan Flag","keywords":["tj","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1ef","native":"\u{1F1F9}\u{1F1EF}"}],"version":2},"flag-tk":{"id":"flag-tk","name":"Tokelau Flag","keywords":["tk","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1f0","native":"\u{1F1F9}\u{1F1F0}"}],"version":2},"flag-tl":{"id":"flag-tl","name":"Timor-Leste Flag","keywords":["tl","timor","leste","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1f1","native":"\u{1F1F9}\u{1F1F1}"}],"version":2},"flag-tm":{"id":"flag-tm","name":"Turkmenistan Flag","keywords":["tm","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1f2","native":"\u{1F1F9}\u{1F1F2}"}],"version":2},"flag-tn":{"id":"flag-tn","name":"Tunisia Flag","keywords":["tn","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1f3","native":"\u{1F1F9}\u{1F1F3}"}],"version":2},"flag-to":{"id":"flag-to","name":"Tonga Flag","keywords":["to","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1f4","native":"\u{1F1F9}\u{1F1F4}"}],"version":2},"flag-tr":{"id":"flag-tr","name":"Turkey Flag","keywords":["tr","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1f7","native":"\u{1F1F9}\u{1F1F7}"}],"version":2},"flag-tt":{"id":"flag-tt","name":"Trinidad & Tobago Flag","keywords":["tt","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1f9","native":"\u{1F1F9}\u{1F1F9}"}],"version":2},"flag-tv":{"id":"flag-tv","name":"Tuvalu Flag","keywords":["tv","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1fb","native":"\u{1F1F9}\u{1F1FB}"}],"version":2},"flag-tw":{"id":"flag-tw","name":"Taiwan Flag","keywords":["tw","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1fc","native":"\u{1F1F9}\u{1F1FC}"}],"version":2},"flag-tz":{"id":"flag-tz","name":"Tanzania Flag","keywords":["tz","united","republic","nation","country","banner"],"skins":[{"unified":"1f1f9-1f1ff","native":"\u{1F1F9}\u{1F1FF}"}],"version":2},"flag-ua":{"id":"flag-ua","name":"Ukraine Flag","keywords":["ua","nation","country","banner"],"skins":[{"unified":"1f1fa-1f1e6","native":"\u{1F1FA}\u{1F1E6}"}],"version":2},"flag-ug":{"id":"flag-ug","name":"Uganda Flag","keywords":["ug","nation","country","banner"],"skins":[{"unified":"1f1fa-1f1ec","native":"\u{1F1FA}\u{1F1EC}"}],"version":2},"flag-um":{"id":"flag-um","name":"U.s. Outlying Islands Flag","keywords":["um","u","s"],"skins":[{"unified":"1f1fa-1f1f2","native":"\u{1F1FA}\u{1F1F2}"}],"version":2},"flag-un":{"id":"flag-un","name":"United Nations Flag","keywords":["un","banner"],"skins":[{"unified":"1f1fa-1f1f3","native":"\u{1F1FA}\u{1F1F3}"}],"version":4},"us":{"id":"us","name":"United States Flag","keywords":["us","america","nation","country","banner"],"skins":[{"unified":"1f1fa-1f1f8","native":"\u{1F1FA}\u{1F1F8}"}],"version":1},"flag-uy":{"id":"flag-uy","name":"Uruguay Flag","keywords":["uy","nation","country","banner"],"skins":[{"unified":"1f1fa-1f1fe","native":"\u{1F1FA}\u{1F1FE}"}],"version":2},"flag-uz":{"id":"flag-uz","name":"Uzbekistan Flag","keywords":["uz","nation","country","banner"],"skins":[{"unified":"1f1fa-1f1ff","native":"\u{1F1FA}\u{1F1FF}"}],"version":2},"flag-va":{"id":"flag-va","name":"Vatican City Flag","keywords":["va","nation","country","banner"],"skins":[{"unified":"1f1fb-1f1e6","native":"\u{1F1FB}\u{1F1E6}"}],"version":2},"flag-vc":{"id":"flag-vc","name":"St. Vincent & Grenadines Flag","keywords":["vc","st","saint","nation","country","banner"],"skins":[{"unified":"1f1fb-1f1e8","native":"\u{1F1FB}\u{1F1E8}"}],"version":2},"flag-ve":{"id":"flag-ve","name":"Venezuela Flag","keywords":["ve","bolivarian","republic","nation","country","banner"],"skins":[{"unified":"1f1fb-1f1ea","native":"\u{1F1FB}\u{1F1EA}"}],"version":2},"flag-vg":{"id":"flag-vg","name":"British Virgin Islands Flag","keywords":["vg","bvi","nation","country","banner"],"skins":[{"unified":"1f1fb-1f1ec","native":"\u{1F1FB}\u{1F1EC}"}],"version":2},"flag-vi":{"id":"flag-vi","name":"U.s. Virgin Islands Flag","keywords":["vi","u","s","us","nation","country","banner"],"skins":[{"unified":"1f1fb-1f1ee","native":"\u{1F1FB}\u{1F1EE}"}],"version":2},"flag-vn":{"id":"flag-vn","name":"Vietnam Flag","keywords":["vn","viet","nam","nation","country","banner"],"skins":[{"unified":"1f1fb-1f1f3","native":"\u{1F1FB}\u{1F1F3}"}],"version":2},"flag-vu":{"id":"flag-vu","name":"Vanuatu Flag","keywords":["vu","nation","country","banner"],"skins":[{"unified":"1f1fb-1f1fa","native":"\u{1F1FB}\u{1F1FA}"}],"version":2},"flag-wf":{"id":"flag-wf","name":"Wallis & Futuna Flag","keywords":["wf","nation","country","banner"],"skins":[{"unified":"1f1fc-1f1eb","native":"\u{1F1FC}\u{1F1EB}"}],"version":2},"flag-ws":{"id":"flag-ws","name":"Samoa Flag","keywords":["ws","nation","country","banner"],"skins":[{"unified":"1f1fc-1f1f8","native":"\u{1F1FC}\u{1F1F8}"}],"version":2},"flag-xk":{"id":"flag-xk","name":"Kosovo Flag","keywords":["xk","nation","country","banner"],"skins":[{"unified":"1f1fd-1f1f0","native":"\u{1F1FD}\u{1F1F0}"}],"version":2},"flag-ye":{"id":"flag-ye","name":"Yemen Flag","keywords":["ye","nation","country","banner"],"skins":[{"unified":"1f1fe-1f1ea","native":"\u{1F1FE}\u{1F1EA}"}],"version":2},"flag-yt":{"id":"flag-yt","name":"Mayotte Flag","keywords":["yt","nation","country","banner"],"skins":[{"unified":"1f1fe-1f1f9","native":"\u{1F1FE}\u{1F1F9}"}],"version":2},"flag-za":{"id":"flag-za","name":"South Africa Flag","keywords":["za","nation","country","banner"],"skins":[{"unified":"1f1ff-1f1e6","native":"\u{1F1FF}\u{1F1E6}"}],"version":2},"flag-zm":{"id":"flag-zm","name":"Zambia Flag","keywords":["zm","nation","country","banner"],"skins":[{"unified":"1f1ff-1f1f2","native":"\u{1F1FF}\u{1F1F2}"}],"version":2},"flag-zw":{"id":"flag-zw","name":"Zimbabwe Flag","keywords":["zw","nation","country","banner"],"skins":[{"unified":"1f1ff-1f1fc","native":"\u{1F1FF}\u{1F1FC}"}],"version":2},"flag-england":{"id":"flag-england","name":"England Flag","keywords":["english"],"skins":[{"unified":"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f","native":"\u{1F3F4}\u{E0067}\u{E0062}\u{E0065}\u{E006E}\u{E0067}\u{E007F}"}],"version":5},"flag-scotland":{"id":"flag-scotland","name":"Scotland Flag","keywords":["scottish"],"skins":[{"unified":"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f","native":"\u{1F3F4}\u{E0067}\u{E0062}\u{E0073}\u{E0063}\u{E0074}\u{E007F}"}],"version":5},"flag-wales":{"id":"flag-wales","name":"Wales Flag","keywords":["welsh"],"skins":[{"unified":"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f","native":"\u{1F3F4}\u{E0067}\u{E0062}\u{E0077}\u{E006C}\u{E0073}\u{E007F}"}],"version":5}},"aliases":{"satisfied":"laughing","grinning_face_with_star_eyes":"star-struck","grinning_face_with_one_large_and_one_small_eye":"zany_face","smiling_face_with_smiling_eyes_and_hand_covering_mouth":"face_with_hand_over_mouth","face_with_finger_covering_closed_lips":"shushing_face","face_with_one_eyebrow_raised":"face_with_raised_eyebrow","face_with_open_mouth_vomiting":"face_vomiting","shocked_face_with_exploding_head":"exploding_head","serious_face_with_symbols_covering_mouth":"face_with_symbols_on_mouth","poop":"hankey","shit":"hankey","collision":"boom","raised_hand":"hand","hand_with_index_and_middle_fingers_crossed":"crossed_fingers","sign_of_the_horns":"the_horns","reversed_hand_with_middle_finger_extended":"middle_finger","thumbsup":"+1","thumbsdown":"-1","punch":"facepunch","mother_christmas":"mrs_claus","running":"runner","man-with-bunny-ears-partying":"men-with-bunny-ears-partying","woman-with-bunny-ears-partying":"women-with-bunny-ears-partying","women_holding_hands":"two_women_holding_hands","woman_and_man_holding_hands":"man_and_woman_holding_hands","couple":"man_and_woman_holding_hands","men_holding_hands":"two_men_holding_hands","paw_prints":"feet","flipper":"dolphin","honeybee":"bee","lady_beetle":"ladybug","cooking":"fried_egg","knife":"hocho","red_car":"car","sailboat":"boat","waxing_gibbous_moon":"moon","sun_small_cloud":"mostly_sunny","sun_behind_cloud":"barely_sunny","sun_behind_rain_cloud":"partly_sunny_rain","lightning_cloud":"lightning","tornado_cloud":"tornado","tshirt":"shirt","shoe":"mans_shoe","telephone":"phone","lantern":"izakaya_lantern","open_book":"book","envelope":"email","pencil":"memo","heavy_exclamation_mark":"exclamation","staff_of_aesculapius":"medical_symbol","flag-cn":"cn","flag-de":"de","flag-es":"es","flag-fr":"fr","uk":"gb","flag-gb":"gb","flag-it":"it","flag-jp":"jp","flag-kr":"kr","flag-ru":"ru","flag-us":"us"},"sheet":{"cols":61,"rows":61}}`);function ig(t){return t&&t.__esModule?t.default:t}function Ea(t,i,r){return i in t?Object.defineProperty(t,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[i]=r,t}var ec,Lt,ng,ol,_u,xy,_y,rg,Qh={},Ja=[],_s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function xo(t,i){for(var r in i)t[r]=i[r];return t}function ky(t){var i=t.parentNode;i&&i.removeChild(t)}function _o(t,i,r){var s,l,d,c={};for(d in i)d=="key"?s=i[d]:d=="ref"?l=i[d]:c[d]=i[d];if(arguments.length>2&&(c.children=arguments.length>3?ec.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(d in t.defaultProps)c[d]===void 0&&(c[d]=t.defaultProps[d]);return tc(t,c,s,l,null)}function tc(t,i,r,s,l){var d={type:t,props:i,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:l==null?++ng:l};return l==null&&Lt.vnode!=null&&Lt.vnode(d),d}function Hs(){return{current:null}}function ko(t){return t.children}function ks(t,i){this.props=t,this.context=i}function ld(t,i){if(i==null)return t.__?ld(t.__,t.__.__k.indexOf(t)+1):null;for(var r;i<t.__k.length;i++)if((r=t.__k[i])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?ld(t):null}function ag(t){var i,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,i=0;i<t.__k.length;i++)if((r=t.__k[i])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return ag(t)}}function Jh(t){(!t.__d&&(t.__d=!0)&&_u.push(t)&&!ef.__r++||_y!==Lt.debounceRendering)&&((_y=Lt.debounceRendering)||xy)(ef)}function ef(){for(var t;ef.__r=_u.length;)t=_u.sort(function(i,r){return i.__v.__b-r.__v.__b}),_u=[],t.some(function(i){var r,s,l,d,c,u;i.__d&&(c=(d=(r=i).__v).__e,(u=r.__P)&&(s=[],(l=xo({},d)).__v=d.__v+1,Sn(u,d,l,r.__n,u.ownerSVGElement!==void 0,d.__h!=null?[c]:null,s,c==null?ld(d):c,d.__h),lg(s,d),d.__e!=c&&ag(d)))})}function ik(t,i,r,s,l,d,c,u,h,f){var m,p,g,v,w,x,_,k=s&&s.__k||Ja,A=k.length;for(r.__k=[],m=0;m<i.length;m++)if((v=r.__k[m]=(v=i[m])==null||typeof v=="boolean"?null:typeof v=="string"||typeof v=="number"||typeof v=="bigint"?tc(null,v,null,null,v):Array.isArray(v)?tc(ko,{children:v},null,null,null):v.__b>0?tc(v.type,v.props,v.key,null,v.__v):v)!=null){if(v.__=r,v.__b=r.__b+1,(g=k[m])===null||g&&v.key==g.key&&v.type===g.type)k[m]=void 0;else for(p=0;p<A;p++){if((g=k[p])&&v.key==g.key&&v.type===g.type){k[p]=void 0;break}g=null}Sn(t,v,g=g||Qh,l,d,c,u,h,f),w=v.__e,(p=v.ref)&&g.ref!=p&&(_||(_=[]),g.ref&&_.push(g.ref,null,v),_.push(p,v.__c||w,v)),w!=null?(x==null&&(x=w),typeof v.type=="function"&&v.__k===g.__k?v.__d=h=Sy(v,h,t):h=Ay(t,v,g,k,w,h),typeof r.type=="function"&&(r.__d=h)):h&&g.__e==h&&h.parentNode!=t&&(h=ld(g))}for(r.__e=x,m=A;m--;)k[m]!=null&&(typeof r.type=="function"&&k[m].__e!=null&&k[m].__e==r.__d&&(r.__d=ld(s,m+1)),nf(k[m],k[m]));if(_)for(m=0;m<_.length;m++)tf(_[m],_[++m],_[++m])}function Sy(t,i,r){for(var s,l=t.__k,d=0;l&&d<l.length;d++)(s=l[d])&&(s.__=t,i=typeof s.type=="function"?Sy(s,i,r):Ay(r,s,s,l,s.__e,i));return i}function So(t,i){return i=i||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(r){So(r,i)}):i.push(t)),i}function Ay(t,i,r,s,l,d){var c,u,h;if(i.__d!==void 0)c=i.__d,i.__d=void 0;else if(r==null||l!=d||l.parentNode==null)e:if(d==null||d.parentNode!==t)t.appendChild(l),c=null;else{for(u=d,h=0;(u=u.nextSibling)&&h<s.length;h+=2)if(u==l)break e;t.insertBefore(l,d),c=d}return c!==void 0?c:l.nextSibling}function Cy(t,i,r,s,l){var d;for(d in r)d==="children"||d==="key"||d in i||ku(t,d,null,r[d],s);for(d in i)l&&typeof i[d]!="function"||d==="children"||d==="key"||d==="value"||d==="checked"||r[d]===i[d]||ku(t,d,i[d],r[d],s)}function Ey(t,i,r){i[0]==="-"?t.setProperty(i,r):t[i]=r==null?"":typeof r!="number"||_s.test(i)?r:r+"px"}function ku(t,i,r,s,l){var d;e:if(i==="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(i in s)r&&i in r||Ey(t.style,i,"");if(r)for(i in r)s&&r[i]===s[i]||Ey(t.style,i,r[i])}else if(i[0]==="o"&&i[1]==="n")d=i!==(i=i.replace(/Capture$/,"")),i=i.toLowerCase()in t?i.toLowerCase().slice(2):i.slice(2),t.l||(t.l={}),t.l[i+d]=r,r?s||t.addEventListener(i,d?og:sg,d):t.removeEventListener(i,d?og:sg,d);else if(i!=="dangerouslySetInnerHTML"){if(l)i=i.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(i!=="href"&&i!=="list"&&i!=="form"&&i!=="tabIndex"&&i!=="download"&&i in t)try{t[i]=r==null?"":r;break e}catch(c){}typeof r=="function"||(r!=null&&(r!==!1||i[0]==="a"&&i[1]==="r")?t.setAttribute(i,r):t.removeAttribute(i))}}function sg(t){this.l[t.type+!1](Lt.event?Lt.event(t):t)}function og(t){this.l[t.type+!0](Lt.event?Lt.event(t):t)}function Sn(t,i,r,s,l,d,c,u,h){var f,m,p,g,v,w,x,_,k,A,C,M=i.type;if(i.constructor!==void 0)return null;r.__h!=null&&(h=r.__h,u=i.__e=r.__e,i.__h=null,d=[u]),(f=Lt.__b)&&f(i);try{e:if(typeof M=="function"){if(_=i.props,k=(f=M.contextType)&&s[f.__c],A=f?k?k.props.value:f.__:s,r.__c?x=(m=i.__c=r.__c).__=m.__E:("prototype"in M&&M.prototype.render?i.__c=m=new M(_,A):(i.__c=m=new ks(_,A),m.constructor=M,m.render=My),k&&k.sub(m),m.props=_,m.state||(m.state={}),m.context=A,m.__n=s,p=m.__d=!0,m.__h=[]),m.__s==null&&(m.__s=m.state),M.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=xo({},m.__s)),xo(m.__s,M.getDerivedStateFromProps(_,m.__s))),g=m.props,v=m.state,p)M.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(M.getDerivedStateFromProps==null&&_!==g&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(_,A),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(_,m.__s,A)===!1||i.__v===r.__v){m.props=_,m.state=m.__s,i.__v!==r.__v&&(m.__d=!1),m.__v=i,i.__e=r.__e,i.__k=r.__k,i.__k.forEach(function(D){D&&(D.__=i)}),m.__h.length&&c.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(_,m.__s,A),m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(g,v,w)})}m.context=A,m.props=_,m.state=m.__s,(f=Lt.__r)&&f(i),m.__d=!1,m.__v=i,m.__P=t,f=m.render(m.props,m.state,m.context),m.state=m.__s,m.getChildContext!=null&&(s=xo(xo({},s),m.getChildContext())),p||m.getSnapshotBeforeUpdate==null||(w=m.getSnapshotBeforeUpdate(g,v)),C=f!=null&&f.type===ko&&f.key==null?f.props.children:f,ik(t,Array.isArray(C)?C:[C],i,r,s,l,d,c,u,h),m.base=i.__e,i.__h=null,m.__h.length&&c.push(m),x&&(m.__E=m.__=null),m.__e=!1}else d==null&&i.__v===r.__v?(i.__k=r.__k,i.__e=r.__e):i.__e=Br(r.__e,i,r,s,l,d,c,h);(f=Lt.diffed)&&f(i)}catch(D){i.__v=null,(h||d!=null)&&(i.__e=u,i.__h=!!h,d[d.indexOf(u)]=null),Lt.__e(D,i,r)}}function lg(t,i){Lt.__c&&Lt.__c(i,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(s){s.call(r)})}catch(s){Lt.__e(s,r.__v)}})}function Br(t,i,r,s,l,d,c,u){var h,f,m,p=r.props,g=i.props,v=i.type,w=0;if(v==="svg"&&(l=!0),d!=null){for(;w<d.length;w++)if((h=d[w])&&"setAttribute"in h==!!v&&(v?h.localName===v:h.nodeType===3)){t=h,d[w]=null;break}}if(t==null){if(v===null)return document.createTextNode(g);t=l?document.createElementNS("http://www.w3.org/2000/svg",v):document.createElement(v,g.is&&g),d=null,u=!1}if(v===null)p===g||u&&t.data===g||(t.data=g);else{if(d=d&&ec.call(t.childNodes),f=(p=r.props||Qh).dangerouslySetInnerHTML,m=g.dangerouslySetInnerHTML,!u){if(d!=null)for(p={},w=0;w<t.attributes.length;w++)p[t.attributes[w].name]=t.attributes[w].value;(m||f)&&(m&&(f&&m.__html==f.__html||m.__html===t.innerHTML)||(t.innerHTML=m&&m.__html||""))}if(Cy(t,g,p,l,u),m)i.__k=[];else if(w=i.props.children,ik(t,Array.isArray(w)?w:[w],i,r,s,l&&v!=="foreignObject",d,c,d?d[0]:r.__k&&ld(r,0),u),d!=null)for(w=d.length;w--;)d[w]!=null&&ky(d[w]);u||("value"in g&&(w=g.value)!==void 0&&(w!==p.value||w!==t.value||v==="progress"&&!w)&&ku(t,"value",w,p.value,!1),"checked"in g&&(w=g.checked)!==void 0&&w!==t.checked&&ku(t,"checked",w,p.checked,!1))}return t}function tf(t,i,r){try{typeof t=="function"?t(i):t.current=i}catch(s){Lt.__e(s,r)}}function nf(t,i,r){var s,l;if(Lt.unmount&&Lt.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||tf(s,null,i)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(d){Lt.__e(d,i)}s.base=s.__P=null}if(s=t.__k)for(l=0;l<s.length;l++)s[l]&&nf(s[l],i,typeof t.type!="function");r||t.__e==null||ky(t.__e),t.__e=t.__d=void 0}function My(t,i,r){return this.constructor(t,r)}function es(t,i,r){var s,l,d;Lt.__&&Lt.__(t,i),l=(s=typeof r=="function")?null:r&&r.__k||i.__k,d=[],Sn(i,t=(!s&&r||i).__k=_o(ko,null,[t]),l||Qh,Qh,i.ownerSVGElement!==void 0,!s&&r?[r]:l?null:i.firstChild?ec.call(i.childNodes):null,d,!s&&r?r:l?l.__e:i.firstChild,s),lg(d,t)}function Ty(t,i){es(t,i,Ty)}function rD(t,i,r){var s,l,d,c=xo({},t.props);for(d in i)d=="key"?s=i[d]:d=="ref"?l=i[d]:c[d]=i[d];return arguments.length>2&&(c.children=arguments.length>3?ec.call(arguments,2):r),tc(t.type,c,s||t.key,l||t.ref,null)}function Dy(t,i){var r={__c:i="__cC"+rg++,__:t,Consumer:function(s,l){return s.children(l)},Provider:function(s){var l,d;return this.getChildContext||(l=[],(d={})[i]=this,this.getChildContext=function(){return d},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&l.some(Jh)},this.sub=function(c){l.push(c);var u=c.componentWillUnmount;c.componentWillUnmount=function(){l.splice(l.indexOf(c),1),u&&u.call(c)}}),s.children}};return r.Provider.__=r.Consumer.contextType=r}ec=Ja.slice,Lt={__e:function(t,i){for(var r,s,l;i=i.__;)if((r=i.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(t)),l=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t),l=r.__d),l)return r.__E=r}catch(d){t=d}throw t}},ng=0,ol=function(t){return t!=null&&t.constructor===void 0},ks.prototype.setState=function(t,i){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=xo({},this.state),typeof t=="function"&&(t=t(xo({},r),this.props)),t&&xo(r,t),t!=null&&this.__v&&(i&&this.__h.push(i),Jh(this))},ks.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Jh(this))},ks.prototype.render=ko,_u=[],xy=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ef.__r=0,rg=0;var rf=0;function qe(t,i,r,s,l){var d,c,u={};for(c in i)c=="ref"?d=i[c]:u[c]=i[c];var h={type:t,props:u,key:r,ref:d,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--rf,__source:s,__self:l};if(typeof t=="function"&&(d=t.defaultProps))for(c in d)u[c]===void 0&&(u[c]=d[c]);return Lt.vnode&&Lt.vnode(h),h}function qt(t,i){try{window.localStorage[`emoji-mart.${t}`]=JSON.stringify(i)}catch(r){}}function aD(t){try{const i=window.localStorage[`emoji-mart.${t}`];if(i)return JSON.parse(i)}catch(i){}}var ll={set:qt,get:aD};const dg=new Map,sD=[{v:15,emoji:"\u{1FAE8}"},{v:14,emoji:"\u{1FAE0}"},{v:13.1,emoji:"\u{1F636}\u200D\u{1F32B}\uFE0F"},{v:13,emoji:"\u{1F978}"},{v:12.1,emoji:"\u{1F9D1}\u200D\u{1F9B0}"},{v:12,emoji:"\u{1F971}"},{v:11,emoji:"\u{1F970}"},{v:5,emoji:"\u{1F929}"},{v:4,emoji:"\u{1F471}\u200D\u2640\uFE0F"},{v:3,emoji:"\u{1F923}"},{v:2,emoji:"\u{1F44B}\u{1F3FB}"},{v:1,emoji:"\u{1F643}"}];function nk(){for(const{v:t,emoji:i}of sD)if(Gs(i))return t}function rk(){return!Gs("\u{1F1E8}\u{1F1E6}")}function Gs(t){if(dg.has(t))return dg.get(t);const i=Py(t);return dg.set(t,i),i}const Py=(()=>{let t=null;try{navigator.userAgent.includes("jsdom")||(t=document.createElement("canvas").getContext("2d",{willReadFrequently:!0}))}catch(l){}if(!t)return()=>!1;const i=25,r=20,s=Math.floor(i/2);return t.font=s+"px Arial, Sans-Serif",t.textBaseline="top",t.canvas.width=r*2,t.canvas.height=i,l=>{t.clearRect(0,0,r*2,i),t.fillStyle="#FF0000",t.fillText(l,0,22),t.fillStyle="#0000FF",t.fillText(l,r,22);const d=t.getImageData(0,0,r,i).data,c=d.length;let u=0;for(;u<c&&!d[u+3];u+=4);if(u>=c)return!1;const h=r+u/4%r,f=Math.floor(u/4/r),m=t.getImageData(h,f,1,1).data;return!(d[u]!==m[0]||d[u+2]!==m[2]||t.measureText(l).width>=r)}})();var cg={latestVersion:nk,noCountryFlags:rk};const ug=["+1","grinning","kissing_heart","heart_eyes","laughing","stuck_out_tongue_winking_eye","sweat_smile","joy","scream","disappointed","unamused","weary","sob","sunglasses","heart"];let Ar=null;function ak(t){Ar||(Ar=ll.get("frequently")||{});const i=t.id||t;i&&(Ar[i]||(Ar[i]=0),Ar[i]+=1,ll.set("last",i),ll.set("frequently",Ar))}function sk({maxFrequentRows:t,perLine:i}){if(!t)return[];Ar||(Ar=ll.get("frequently"));let r=[];if(!Ar){Ar={};for(let d in ug.slice(0,i)){const c=ug[d];Ar[c]=i-d,r.push(c)}return r}const s=t*i,l=ll.get("last");for(let d in Ar)r.push(d);if(r.sort((d,c)=>{const u=Ar[c],h=Ar[d];return u==h?d.localeCompare(c):u-h}),r.length>s){const d=r.slice(s);r=r.slice(0,s);for(let c of d)c!=l&&delete Ar[c];l&&r.indexOf(l)==-1&&(delete Ar[r[r.length-1]],r.splice(-1,1,l)),ll.set("frequently",Ar)}return r}var af={add:ak,get:sk,DEFAULTS:ug},Oy={};Oy=JSON.parse('{"search":"Search","search_no_results_1":"Oh no!","search_no_results_2":"That emoji couldn\u2019t be found","pick":"Pick an emoji\u2026","add_custom":"Add custom emoji","categories":{"activity":"Activity","custom":"Custom","flags":"Flags","foods":"Food & Drink","frequent":"Frequently used","nature":"Animals & Nature","objects":"Objects","people":"Smileys & People","places":"Travel & Places","search":"Search Results","symbols":"Symbols"},"skins":{"1":"Default","2":"Light","3":"Medium-Light","4":"Medium","5":"Medium-Dark","6":"Dark","choose":"Choose default skin tone"}}');var ts={autoFocus:{value:!1},dynamicWidth:{value:!1},emojiButtonColors:{value:null},emojiButtonRadius:{value:"100%"},emojiButtonSize:{value:36},emojiSize:{value:24},emojiVersion:{value:15,choices:[1,2,3,4,5,11,12,12.1,13,13.1,14,15]},exceptEmojis:{value:[]},icons:{value:"auto",choices:["auto","outline","solid"]},locale:{value:"en",choices:["en","ar","be","cs","de","es","fa","fi","fr","hi","it","ja","ko","nl","pl","pt","ru","sa","tr","uk","vi","zh"]},maxFrequentRows:{value:4},navPosition:{value:"top",choices:["top","bottom","none"]},noCountryFlags:{value:!1},noResultsEmoji:{value:null},perLine:{value:9},previewEmoji:{value:null},previewPosition:{value:"bottom",choices:["top","bottom","none"]},searchPosition:{value:"sticky",choices:["sticky","static","none"]},set:{value:"native",choices:["native","apple","facebook","google","twitter"]},skin:{value:1,choices:[1,2,3,4,5,6]},skinTonePosition:{value:"preview",choices:["preview","search","none"]},theme:{value:"auto",choices:["auto","light","dark"]},categories:null,categoryIcons:null,custom:null,data:null,i18n:null,getImageURL:null,getSpritesheetURL:null,onAddCustomEmoji:null,onClickOutside:null,onEmojiSelect:null,stickySearch:{deprecated:!0,value:!0}};let fr=null,Ci=null;const sf={};function hg(t){return qi(this,null,function*(){if(sf[t])return sf[t];const r=yield(yield fetch(t)).json();return sf[t]=r,r})}let of=null,oD=!1,Iy=null,lf=!1;function df(t,{caller:i}={}){return of||(of=new Promise(r=>{Iy=r})),t?Ry(t):i&&!lf&&console.warn(`\`${i}\` requires data to be initialized first. Promise will be pending until \`init\` is called.`),of}function Ry(t){return qi(this,null,function*(){lf=!0;let{emojiVersion:i,set:r,locale:s}=t;if(i||(i=ts.emojiVersion.value),r||(r=ts.set.value),s||(s=ts.locale.value),Ci)Ci.categories=Ci.categories.filter(h=>!h.name);else{Ci=(typeof t.data=="function"?yield t.data():t.data)||(yield hg(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/sets/${i}/${r}.json`)),Ci.emoticons={},Ci.natives={},Ci.categories.unshift({id:"frequent",emojis:[]});for(const h in Ci.aliases){const f=Ci.aliases[h],m=Ci.emojis[f];m&&(m.aliases||(m.aliases=[]),m.aliases.push(h))}Ci.originalCategories=Ci.categories}if(fr=(typeof t.i18n=="function"?yield t.i18n():t.i18n)||(s=="en"?ig(Oy):yield hg(`https://cdn.jsdelivr.net/npm/@emoji-mart/data@latest/i18n/${s}.json`)),t.custom)for(let h in t.custom){h=parseInt(h);const f=t.custom[h],m=t.custom[h-1];if(!(!f.emojis||!f.emojis.length)){f.id||(f.id=`custom_${h+1}`),f.name||(f.name=fr.categories.custom),m&&!f.icon&&(f.target=m.target||m),Ci.categories.push(f);for(const p of f.emojis)Ci.emojis[p.id]=p}}t.categories&&(Ci.categories=Ci.originalCategories.filter(h=>t.categories.indexOf(h.id)!=-1).sort((h,f)=>{const m=t.categories.indexOf(h.id),p=t.categories.indexOf(f.id);return m-p}));let l=null,d=null;r=="native"&&(l=cg.latestVersion(),d=t.noCountryFlags||cg.noCountryFlags());let c=Ci.categories.length,u=!1;for(;c--;){const h=Ci.categories[c];if(h.id=="frequent"){let{maxFrequentRows:p,perLine:g}=t;p=p>=0?p:ts.maxFrequentRows.value,g||(g=ts.perLine.value),h.emojis=af.get({maxFrequentRows:p,perLine:g})}if(!h.emojis||!h.emojis.length){Ci.categories.splice(c,1);continue}const{categoryIcons:f}=t;if(f){const p=f[h.id];p&&!h.icon&&(h.icon=p)}let m=h.emojis.length;for(;m--;){const p=h.emojis[m],g=p.id?p:Ci.emojis[p],v=()=>{h.emojis.splice(m,1)};if(!g||t.exceptEmojis&&t.exceptEmojis.includes(g.id)){v();continue}if(l&&g.version>l){v();continue}if(d&&h.id=="flags"&&!dk.includes(g.id)){v();continue}if(!g.search){if(u=!0,g.search=","+[[g.id,!1],[g.name,!0],[g.keywords,!1],[g.emoticons,!1]].map(([x,_])=>{if(x)return(Array.isArray(x)?x:[x]).map(k=>(_?k.split(/[-|_|\s]+/):[k]).map(A=>A.toLowerCase())).flat()}).flat().filter(x=>x&&x.trim()).join(","),g.emoticons)for(const x of g.emoticons)Ci.emoticons[x]||(Ci.emoticons[x]=g.id);let w=0;for(const x of g.skins){if(!x)continue;w++;const{native:_}=x;_&&(Ci.natives[_]=g.id,g.search+=`,${_}`);const k=w==1?"":`:skin-tone-${w}:`;x.shortcodes=`:${g.id}:${k}`}}}}u&&dd.reset(),Iy()})}function zy(t,i,r){t||(t={});const s={};for(let l in i)s[l]=Ly(l,t,i,r);return s}function Ly(t,i,r,s){const l=r[t];let d=s&&s.getAttribute(t)||(i[t]!=null&&i[t]!=null?i[t]:null);return l&&(d!=null&&l.value&&typeof l.value!=typeof d&&(typeof l.value=="boolean"?d=d!="false":d=l.value.constructor(d)),l.transform&&d&&(d=l.transform(d)),(d==null||l.choices&&l.choices.indexOf(d)==-1)&&(d=l.value)),d}const fg=/^(?:\:([^\:]+)\:)(?:\:skin-tone-(\d)\:)?$/;let pg=null;function ok(t){return t.id?t:Ci.emojis[t]||Ci.emojis[Ci.aliases[t]]||Ci.emojis[Ci.natives[t]]}function lk(){pg=null}function Ss(s){return qi(this,arguments,function*(t,{maxResults:i,caller:r}={}){if(!t||!t.trim().length)return null;i||(i=90),yield df(null,{caller:r||"SearchIndex.search"});const l=t.toLowerCase().replace(/(\w)-/,"$1 ").split(/[\s|,]+/).filter((h,f,m)=>h.trim()&&m.indexOf(h)==f);if(!l.length)return;let d=pg||(pg=Object.values(Ci.emojis)),c,u;for(const h of l){if(!d.length)break;c=[],u={};for(const f of d){if(!f.search)continue;const m=f.search.indexOf(`,${h}`);m!=-1&&(c.push(f),u[f.id]||(u[f.id]=0),u[f.id]+=f.id==h?0:m+1)}d=c}return c.length<2||(c.sort((h,f)=>{const m=u[h.id],p=u[f.id];return m==p?h.id.localeCompare(f.id):m-p}),c.length>i&&(c=c.slice(0,i))),c})}var dd={search:Ss,get:ok,reset:lk,SHORTCODES_REGEX:fg};const dk=["checkered_flag","crossed_flags","pirate_flag","rainbow-flag","transgender_flag","triangular_flag_on_post","waving_black_flag","waving_white_flag"];function mg(t,i){return Array.isArray(t)&&Array.isArray(i)&&t.length===i.length&&t.every((r,s)=>r==i[s])}function ck(t=1){return qi(this,null,function*(){for(let i in[...Array(t).keys()])yield new Promise(requestAnimationFrame)})}function Ma(t,{skinIndex:i=0}={}){const r=t.skins[i]||(()=>(i=0,t.skins[i]))(),s={id:t.id,name:t.name,native:r.native,unified:r.unified,keywords:t.keywords,shortcodes:r.shortcodes||t.shortcodes};return t.skins.length>1&&(s.skin=i+1),r.src&&(s.src=r.src),t.aliases&&t.aliases.length&&(s.aliases=t.aliases),t.emoticons&&t.emoticons.length&&(s.emoticons=t.emoticons),s}function uk(t){return qi(this,null,function*(){const i=yield dd.search(t,{maxResults:1,caller:"getEmojiDataFromNative"});if(!i||!i.length)return null;const r=i[0];let s=0;for(let l of r.skins){if(l.native==t)break;s++}return Ma(r,{skinIndex:s})})}var Su={categories:{activity:{outline:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:qe("path",{d:"M12 0C5.373 0 0 5.372 0 12c0 6.627 5.373 12 12 12 6.628 0 12-5.373 12-12 0-6.628-5.372-12-12-12m9.949 11H17.05c.224-2.527 1.232-4.773 1.968-6.113A9.966 9.966 0 0 1 21.949 11M13 11V2.051a9.945 9.945 0 0 1 4.432 1.564c-.858 1.491-2.156 4.22-2.392 7.385H13zm-2 0H8.961c-.238-3.165-1.536-5.894-2.393-7.385A9.95 9.95 0 0 1 11 2.051V11zm0 2v8.949a9.937 9.937 0 0 1-4.432-1.564c.857-1.492 2.155-4.221 2.393-7.385H11zm4.04 0c.236 3.164 1.534 5.893 2.392 7.385A9.92 9.92 0 0 1 13 21.949V13h2.04zM4.982 4.887C5.718 6.227 6.726 8.473 6.951 11h-4.9a9.977 9.977 0 0 1 2.931-6.113M2.051 13h4.9c-.226 2.527-1.233 4.771-1.969 6.113A9.972 9.972 0 0 1 2.051 13m16.967 6.113c-.735-1.342-1.744-3.586-1.968-6.113h4.899a9.961 9.961 0 0 1-2.931 6.113"})}),solid:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:qe("path",{d:"M16.17 337.5c0 44.98 7.565 83.54 13.98 107.9C35.22 464.3 50.46 496 174.9 496c9.566 0 19.59-.4707 29.84-1.271L17.33 307.3C16.53 317.6 16.17 327.7 16.17 337.5zM495.8 174.5c0-44.98-7.565-83.53-13.98-107.9c-4.688-17.54-18.34-31.23-36.04-35.95C435.5 27.91 392.9 16 337 16c-9.564 0-19.59 .4707-29.84 1.271l187.5 187.5C495.5 194.4 495.8 184.3 495.8 174.5zM26.77 248.8l236.3 236.3c142-36.1 203.9-150.4 222.2-221.1L248.9 26.87C106.9 62.96 45.07 177.2 26.77 248.8zM256 335.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L164.7 283.3C161.6 280.2 160 276.1 160 271.1c0-8.529 6.865-16 16-16c4.095 0 8.189 1.562 11.31 4.688l64.01 64C254.4 327.8 256 331.9 256 335.1zM304 287.1c0 9.141-7.474 16-16 16c-4.094 0-8.188-1.564-11.31-4.689L212.7 235.3C209.6 232.2 208 228.1 208 223.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01C302.5 279.8 304 283.9 304 287.1zM256 175.1c0-9.141 7.473-16 16-16c4.094 0 8.188 1.562 11.31 4.688l64.01 64.01c3.125 3.125 4.688 7.219 4.688 11.31c0 9.133-7.468 16-16 16c-4.094 0-8.189-1.562-11.31-4.688l-64.01-64.01C257.6 184.2 256 180.1 256 175.1z"})})},custom:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",children:qe("path",{d:"M417.1 368c-5.937 10.27-16.69 16-27.75 16c-5.422 0-10.92-1.375-15.97-4.281L256 311.4V448c0 17.67-14.33 32-31.1 32S192 465.7 192 448V311.4l-118.3 68.29C68.67 382.6 63.17 384 57.75 384c-11.06 0-21.81-5.734-27.75-16c-8.828-15.31-3.594-34.88 11.72-43.72L159.1 256L41.72 187.7C26.41 178.9 21.17 159.3 29.1 144C36.63 132.5 49.26 126.7 61.65 128.2C65.78 128.7 69.88 130.1 73.72 132.3L192 200.6V64c0-17.67 14.33-32 32-32S256 46.33 256 64v136.6l118.3-68.29c3.838-2.213 7.939-3.539 12.07-4.051C398.7 126.7 411.4 132.5 417.1 144c8.828 15.31 3.594 34.88-11.72 43.72L288 256l118.3 68.28C421.6 333.1 426.8 352.7 417.1 368z"})}),flags:{outline:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:qe("path",{d:"M0 0l6.084 24H8L1.916 0zM21 5h-4l-1-4H4l3 12h3l1 4h13L21 5zM6.563 3h7.875l2 8H8.563l-2-8zm8.832 10l-2.856 1.904L12.063 13h3.332zM19 13l-1.5-6h1.938l2 8H16l3-2z"})}),solid:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:qe("path",{d:"M64 496C64 504.8 56.75 512 48 512h-32C7.25 512 0 504.8 0 496V32c0-17.75 14.25-32 32-32s32 14.25 32 32V496zM476.3 0c-6.365 0-13.01 1.35-19.34 4.233c-45.69 20.86-79.56 27.94-107.8 27.94c-59.96 0-94.81-31.86-163.9-31.87C160.9 .3055 131.6 4.867 96 15.75v350.5c32-9.984 59.87-14.1 84.85-14.1c73.63 0 124.9 31.78 198.6 31.78c31.91 0 68.02-5.971 111.1-23.09C504.1 355.9 512 344.4 512 332.1V30.73C512 11.1 495.3 0 476.3 0z"})})},foods:{outline:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:qe("path",{d:"M17 4.978c-1.838 0-2.876.396-3.68.934.513-1.172 1.768-2.934 4.68-2.934a1 1 0 0 0 0-2c-2.921 0-4.629 1.365-5.547 2.512-.064.078-.119.162-.18.244C11.73 1.838 10.798.023 9.207.023 8.579.022 7.85.306 7 .978 5.027 2.54 5.329 3.902 6.492 4.999 3.609 5.222 0 7.352 0 12.969c0 4.582 4.961 11.009 9 11.009 1.975 0 2.371-.486 3-1 .629.514 1.025 1 3 1 4.039 0 9-6.418 9-11 0-5.953-4.055-8-7-8M8.242 2.546c.641-.508.943-.523.965-.523.426.169.975 1.405 1.357 3.055-1.527-.629-2.741-1.352-2.98-1.846.059-.112.241-.356.658-.686M15 21.978c-1.08 0-1.21-.109-1.559-.402l-.176-.146c-.367-.302-.816-.452-1.266-.452s-.898.15-1.266.452l-.176.146c-.347.292-.477.402-1.557.402-2.813 0-7-5.389-7-9.009 0-5.823 4.488-5.991 5-5.991 1.939 0 2.484.471 3.387 1.251l.323.276a1.995 1.995 0 0 0 2.58 0l.323-.276c.902-.78 1.447-1.251 3.387-1.251.512 0 5 .168 5 6 0 3.617-4.187 9-7 9"})}),solid:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:qe("path",{d:"M481.9 270.1C490.9 279.1 496 291.3 496 304C496 316.7 490.9 328.9 481.9 337.9C472.9 346.9 460.7 352 448 352H64C51.27 352 39.06 346.9 30.06 337.9C21.06 328.9 16 316.7 16 304C16 291.3 21.06 279.1 30.06 270.1C39.06 261.1 51.27 256 64 256H448C460.7 256 472.9 261.1 481.9 270.1zM475.3 388.7C478.3 391.7 480 395.8 480 400V416C480 432.1 473.3 449.3 461.3 461.3C449.3 473.3 432.1 480 416 480H96C79.03 480 62.75 473.3 50.75 461.3C38.74 449.3 32 432.1 32 416V400C32 395.8 33.69 391.7 36.69 388.7C39.69 385.7 43.76 384 48 384H464C468.2 384 472.3 385.7 475.3 388.7zM50.39 220.8C45.93 218.6 42.03 215.5 38.97 211.6C35.91 207.7 33.79 203.2 32.75 198.4C31.71 193.5 31.8 188.5 32.99 183.7C54.98 97.02 146.5 32 256 32C365.5 32 457 97.02 479 183.7C480.2 188.5 480.3 193.5 479.2 198.4C478.2 203.2 476.1 207.7 473 211.6C469.1 215.5 466.1 218.6 461.6 220.8C457.2 222.9 452.3 224 447.3 224H64.67C59.73 224 54.84 222.9 50.39 220.8zM372.7 116.7C369.7 119.7 368 123.8 368 128C368 131.2 368.9 134.3 370.7 136.9C372.5 139.5 374.1 141.6 377.9 142.8C380.8 143.1 384 144.3 387.1 143.7C390.2 143.1 393.1 141.6 395.3 139.3C397.6 137.1 399.1 134.2 399.7 131.1C400.3 128 399.1 124.8 398.8 121.9C397.6 118.1 395.5 116.5 392.9 114.7C390.3 112.9 387.2 111.1 384 111.1C379.8 111.1 375.7 113.7 372.7 116.7V116.7zM244.7 84.69C241.7 87.69 240 91.76 240 96C240 99.16 240.9 102.3 242.7 104.9C244.5 107.5 246.1 109.6 249.9 110.8C252.8 111.1 256 112.3 259.1 111.7C262.2 111.1 265.1 109.6 267.3 107.3C269.6 105.1 271.1 102.2 271.7 99.12C272.3 96.02 271.1 92.8 270.8 89.88C269.6 86.95 267.5 84.45 264.9 82.7C262.3 80.94 259.2 79.1 256 79.1C251.8 79.1 247.7 81.69 244.7 84.69V84.69zM116.7 116.7C113.7 119.7 112 123.8 112 128C112 131.2 112.9 134.3 114.7 136.9C116.5 139.5 118.1 141.6 121.9 142.8C124.8 143.1 128 144.3 131.1 143.7C134.2 143.1 137.1 141.6 139.3 139.3C141.6 137.1 143.1 134.2 143.7 131.1C144.3 128 143.1 124.8 142.8 121.9C141.6 118.1 139.5 116.5 136.9 114.7C134.3 112.9 131.2 111.1 128 111.1C123.8 111.1 119.7 113.7 116.7 116.7L116.7 116.7z"})})},frequent:{outline:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[qe("path",{d:"M13 4h-2l-.001 7H9v2h2v2h2v-2h4v-2h-4z"}),qe("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"})]}),solid:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:qe("path",{d:"M256 512C114.6 512 0 397.4 0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512zM232 256C232 264 236 271.5 242.7 275.1L338.7 339.1C349.7 347.3 364.6 344.3 371.1 333.3C379.3 322.3 376.3 307.4 365.3 300L280 243.2V120C280 106.7 269.3 96 255.1 96C242.7 96 231.1 106.7 231.1 120L232 256z"})})},nature:{outline:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[qe("path",{d:"M15.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 15.5 8M8.5 8a1.5 1.5 0 1 0 .001 3.001A1.5 1.5 0 0 0 8.5 8"}),qe("path",{d:"M18.933 0h-.027c-.97 0-2.138.787-3.018 1.497-1.274-.374-2.612-.51-3.887-.51-1.285 0-2.616.133-3.874.517C7.245.79 6.069 0 5.093 0h-.027C3.352 0 .07 2.67.002 7.026c-.039 2.479.276 4.238 1.04 5.013.254.258.882.677 1.295.882.191 3.177.922 5.238 2.536 6.38.897.637 2.187.949 3.2 1.102C8.04 20.6 8 20.795 8 21c0 1.773 2.35 3 4 3 1.648 0 4-1.227 4-3 0-.201-.038-.393-.072-.586 2.573-.385 5.435-1.877 5.925-7.587.396-.22.887-.568 1.104-.788.763-.774 1.079-2.534 1.04-5.013C23.929 2.67 20.646 0 18.933 0M3.223 9.135c-.237.281-.837 1.155-.884 1.238-.15-.41-.368-1.349-.337-3.291.051-3.281 2.478-4.972 3.091-5.031.256.015.731.27 1.265.646-1.11 1.171-2.275 2.915-2.352 5.125-.133.546-.398.858-.783 1.313M12 22c-.901 0-1.954-.693-2-1 0-.654.475-1.236 1-1.602V20a1 1 0 1 0 2 0v-.602c.524.365 1 .947 1 1.602-.046.307-1.099 1-2 1m3-3.48v.02a4.752 4.752 0 0 0-1.262-1.02c1.092-.516 2.239-1.334 2.239-2.217 0-1.842-1.781-2.195-3.977-2.195-2.196 0-3.978.354-3.978 2.195 0 .883 1.148 1.701 2.238 2.217A4.8 4.8 0 0 0 9 18.539v-.025c-1-.076-2.182-.281-2.973-.842-1.301-.92-1.838-3.045-1.853-6.478l.023-.041c.496-.826 1.49-1.45 1.804-3.102 0-2.047 1.357-3.631 2.362-4.522C9.37 3.178 10.555 3 11.948 3c1.447 0 2.685.192 3.733.57 1 .9 2.316 2.465 2.316 4.48.313 1.651 1.307 2.275 1.803 3.102.035.058.068.117.102.178-.059 5.967-1.949 7.01-4.902 7.19m6.628-8.202c-.037-.065-.074-.13-.113-.195a7.587 7.587 0 0 0-.739-.987c-.385-.455-.648-.768-.782-1.313-.076-2.209-1.241-3.954-2.353-5.124.531-.376 1.004-.63 1.261-.647.636.071 3.044 1.764 3.096 5.031.027 1.81-.347 3.218-.37 3.235"})]}),solid:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512",children:qe("path",{d:"M332.7 19.85C334.6 8.395 344.5 0 356.1 0C363.6 0 370.6 3.52 375.1 9.502L392 32H444.1C456.8 32 469.1 37.06 478.1 46.06L496 64H552C565.3 64 576 74.75 576 88V112C576 156.2 540.2 192 496 192H426.7L421.6 222.5L309.6 158.5L332.7 19.85zM448 64C439.2 64 432 71.16 432 80C432 88.84 439.2 96 448 96C456.8 96 464 88.84 464 80C464 71.16 456.8 64 448 64zM416 256.1V480C416 497.7 401.7 512 384 512H352C334.3 512 320 497.7 320 480V364.8C295.1 377.1 268.8 384 240 384C211.2 384 184 377.1 160 364.8V480C160 497.7 145.7 512 128 512H96C78.33 512 64 497.7 64 480V249.8C35.23 238.9 12.64 214.5 4.836 183.3L.9558 167.8C-3.331 150.6 7.094 133.2 24.24 128.1C41.38 124.7 58.76 135.1 63.05 152.2L66.93 167.8C70.49 182 83.29 191.1 97.97 191.1H303.8L416 256.1z"})})},objects:{outline:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[qe("path",{d:"M12 0a9 9 0 0 0-5 16.482V21s2.035 3 5 3 5-3 5-3v-4.518A9 9 0 0 0 12 0zm0 2c3.86 0 7 3.141 7 7s-3.14 7-7 7-7-3.141-7-7 3.14-7 7-7zM9 17.477c.94.332 1.946.523 3 .523s2.06-.19 3-.523v.834c-.91.436-1.925.689-3 .689a6.924 6.924 0 0 1-3-.69v-.833zm.236 3.07A8.854 8.854 0 0 0 12 21c.965 0 1.888-.167 2.758-.451C14.155 21.173 13.153 22 12 22c-1.102 0-2.117-.789-2.764-1.453z"}),qe("path",{d:"M14.745 12.449h-.004c-.852-.024-1.188-.858-1.577-1.824-.421-1.061-.703-1.561-1.182-1.566h-.009c-.481 0-.783.497-1.235 1.537-.436.982-.801 1.811-1.636 1.791l-.276-.043c-.565-.171-.853-.691-1.284-1.794-.125-.313-.202-.632-.27-.913-.051-.213-.127-.53-.195-.634C7.067 9.004 7.039 9 6.99 9A1 1 0 0 1 7 7h.01c1.662.017 2.015 1.373 2.198 2.134.486-.981 1.304-2.058 2.797-2.075 1.531.018 2.28 1.153 2.731 2.141l.002-.008C14.944 8.424 15.327 7 16.979 7h.032A1 1 0 1 1 17 9h-.011c-.149.076-.256.474-.319.709a6.484 6.484 0 0 1-.311.951c-.429.973-.79 1.789-1.614 1.789"})]}),solid:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",children:qe("path",{d:"M112.1 454.3c0 6.297 1.816 12.44 5.284 17.69l17.14 25.69c5.25 7.875 17.17 14.28 26.64 14.28h61.67c9.438 0 21.36-6.401 26.61-14.28l17.08-25.68c2.938-4.438 5.348-12.37 5.348-17.7L272 415.1h-160L112.1 454.3zM191.4 .0132C89.44 .3257 16 82.97 16 175.1c0 44.38 16.44 84.84 43.56 115.8c16.53 18.84 42.34 58.23 52.22 91.45c.0313 .25 .0938 .5166 .125 .7823h160.2c.0313-.2656 .0938-.5166 .125-.7823c9.875-33.22 35.69-72.61 52.22-91.45C351.6 260.8 368 220.4 368 175.1C368 78.61 288.9-.2837 191.4 .0132zM192 96.01c-44.13 0-80 35.89-80 79.1C112 184.8 104.8 192 96 192S80 184.8 80 176c0-61.76 50.25-111.1 112-111.1c8.844 0 16 7.159 16 16S200.8 96.01 192 96.01z"})})},people:{outline:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[qe("path",{d:"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10"}),qe("path",{d:"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0"})]}),solid:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:qe("path",{d:"M0 256C0 114.6 114.6 0 256 0C397.4 0 512 114.6 512 256C512 397.4 397.4 512 256 512C114.6 512 0 397.4 0 256zM256 432C332.1 432 396.2 382 415.2 314.1C419.1 300.4 407.8 288 393.6 288H118.4C104.2 288 92.92 300.4 96.76 314.1C115.8 382 179.9 432 256 432V432zM176.4 160C158.7 160 144.4 174.3 144.4 192C144.4 209.7 158.7 224 176.4 224C194 224 208.4 209.7 208.4 192C208.4 174.3 194 160 176.4 160zM336.4 224C354 224 368.4 209.7 368.4 192C368.4 174.3 354 160 336.4 160C318.7 160 304.4 174.3 304.4 192C304.4 209.7 318.7 224 336.4 224z"})})},places:{outline:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:[qe("path",{d:"M6.5 12C5.122 12 4 13.121 4 14.5S5.122 17 6.5 17 9 15.879 9 14.5 7.878 12 6.5 12m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5M17.5 12c-1.378 0-2.5 1.121-2.5 2.5s1.122 2.5 2.5 2.5 2.5-1.121 2.5-2.5-1.122-2.5-2.5-2.5m0 3c-.275 0-.5-.225-.5-.5s.225-.5.5-.5.5.225.5.5-.225.5-.5.5"}),qe("path",{d:"M22.482 9.494l-1.039-.346L21.4 9h.6c.552 0 1-.439 1-.992 0-.006-.003-.008-.003-.008H23c0-1-.889-2-1.984-2h-.642l-.731-1.717C19.262 3.012 18.091 2 16.764 2H7.236C5.909 2 4.738 3.012 4.357 4.283L3.626 6h-.642C1.889 6 1 7 1 8h.003S1 8.002 1 8.008C1 8.561 1.448 9 2 9h.6l-.043.148-1.039.346a2.001 2.001 0 0 0-1.359 2.097l.751 7.508a1 1 0 0 0 .994.901H3v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h6v1c0 1.103.896 2 2 2h2c1.104 0 2-.897 2-2v-1h1.096a.999.999 0 0 0 .994-.901l.751-7.508a2.001 2.001 0 0 0-1.359-2.097M6.273 4.857C6.402 4.43 6.788 4 7.236 4h9.527c.448 0 .834.43.963.857L19.313 9H4.688l1.585-4.143zM7 21H5v-1h2v1zm12 0h-2v-1h2v1zm2.189-3H2.811l-.662-6.607L3 11h18l.852.393L21.189 18z"})]}),solid:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:qe("path",{d:"M39.61 196.8L74.8 96.29C88.27 57.78 124.6 32 165.4 32H346.6C387.4 32 423.7 57.78 437.2 96.29L472.4 196.8C495.6 206.4 512 229.3 512 256V448C512 465.7 497.7 480 480 480H448C430.3 480 416 465.7 416 448V400H96V448C96 465.7 81.67 480 64 480H32C14.33 480 0 465.7 0 448V256C0 229.3 16.36 206.4 39.61 196.8V196.8zM109.1 192H402.9L376.8 117.4C372.3 104.6 360.2 96 346.6 96H165.4C151.8 96 139.7 104.6 135.2 117.4L109.1 192zM96 256C78.33 256 64 270.3 64 288C64 305.7 78.33 320 96 320C113.7 320 128 305.7 128 288C128 270.3 113.7 256 96 256zM416 320C433.7 320 448 305.7 448 288C448 270.3 433.7 256 416 256C398.3 256 384 270.3 384 288C384 305.7 398.3 320 416 320z"})})},symbols:{outline:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:qe("path",{d:"M0 0h11v2H0zM4 11h3V6h4V4H0v2h4zM15.5 17c1.381 0 2.5-1.116 2.5-2.493s-1.119-2.493-2.5-2.493S13 13.13 13 14.507 14.119 17 15.5 17m0-2.986c.276 0 .5.222.5.493 0 .272-.224.493-.5.493s-.5-.221-.5-.493.224-.493.5-.493M21.5 19.014c-1.381 0-2.5 1.116-2.5 2.493S20.119 24 21.5 24s2.5-1.116 2.5-2.493-1.119-2.493-2.5-2.493m0 2.986a.497.497 0 0 1-.5-.493c0-.271.224-.493.5-.493s.5.222.5.493a.497.497 0 0 1-.5.493M22 13l-9 9 1.513 1.5 8.99-9.009zM17 11c2.209 0 4-1.119 4-2.5V2s.985-.161 1.498.949C23.01 4.055 23 6 23 6s1-1.119 1-3.135C24-.02 21 0 21 0h-2v6.347A5.853 5.853 0 0 0 17 6c-2.209 0-4 1.119-4 2.5s1.791 2.5 4 2.5M10.297 20.482l-1.475-1.585a47.54 47.54 0 0 1-1.442 1.129c-.307-.288-.989-1.016-2.045-2.183.902-.836 1.479-1.466 1.729-1.892s.376-.871.376-1.336c0-.592-.273-1.178-.818-1.759-.546-.581-1.329-.871-2.349-.871-1.008 0-1.79.293-2.344.879-.556.587-.832 1.181-.832 1.784 0 .813.419 1.748 1.256 2.805-.847.614-1.444 1.208-1.794 1.784a3.465 3.465 0 0 0-.523 1.833c0 .857.308 1.56.924 2.107.616.549 1.423.823 2.42.823 1.173 0 2.444-.379 3.813-1.137L8.235 24h2.819l-2.09-2.383 1.333-1.135zm-6.736-6.389a1.02 1.02 0 0 1 .73-.286c.31 0 .559.085.747.254a.849.849 0 0 1 .283.659c0 .518-.419 1.112-1.257 1.784-.536-.651-.805-1.231-.805-1.742a.901.901 0 0 1 .302-.669M3.74 22c-.427 0-.778-.116-1.057-.349-.279-.232-.418-.487-.418-.766 0-.594.509-1.288 1.527-2.083.968 1.134 1.717 1.946 2.248 2.438-.921.507-1.686.76-2.3.76"})}),solid:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:qe("path",{d:"M500.3 7.251C507.7 13.33 512 22.41 512 31.1V175.1C512 202.5 483.3 223.1 447.1 223.1C412.7 223.1 383.1 202.5 383.1 175.1C383.1 149.5 412.7 127.1 447.1 127.1V71.03L351.1 90.23V207.1C351.1 234.5 323.3 255.1 287.1 255.1C252.7 255.1 223.1 234.5 223.1 207.1C223.1 181.5 252.7 159.1 287.1 159.1V63.1C287.1 48.74 298.8 35.61 313.7 32.62L473.7 .6198C483.1-1.261 492.9 1.173 500.3 7.251H500.3zM74.66 303.1L86.5 286.2C92.43 277.3 102.4 271.1 113.1 271.1H174.9C185.6 271.1 195.6 277.3 201.5 286.2L213.3 303.1H239.1C266.5 303.1 287.1 325.5 287.1 351.1V463.1C287.1 490.5 266.5 511.1 239.1 511.1H47.1C21.49 511.1-.0019 490.5-.0019 463.1V351.1C-.0019 325.5 21.49 303.1 47.1 303.1H74.66zM143.1 359.1C117.5 359.1 95.1 381.5 95.1 407.1C95.1 434.5 117.5 455.1 143.1 455.1C170.5 455.1 191.1 434.5 191.1 407.1C191.1 381.5 170.5 359.1 143.1 359.1zM440.3 367.1H496C502.7 367.1 508.6 372.1 510.1 378.4C513.3 384.6 511.6 391.7 506.5 396L378.5 508C372.9 512.1 364.6 513.3 358.6 508.9C352.6 504.6 350.3 496.6 353.3 489.7L391.7 399.1H336C329.3 399.1 323.4 395.9 321 389.6C318.7 383.4 320.4 376.3 325.5 371.1L453.5 259.1C459.1 255 467.4 254.7 473.4 259.1C479.4 263.4 481.6 271.4 478.7 278.3L440.3 367.1zM116.7 219.1L19.85 119.2C-8.112 90.26-6.614 42.31 24.85 15.34C51.82-8.137 93.26-3.642 118.2 21.83L128.2 32.32L137.7 21.83C162.7-3.642 203.6-8.137 231.6 15.34C262.6 42.31 264.1 90.26 236.1 119.2L139.7 219.1C133.2 225.6 122.7 225.6 116.7 219.1H116.7z"})})}},search:{loupe:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:qe("path",{d:"M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z"})}),delete:qe("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:qe("path",{d:"M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z"})})}};function gg(t){let{id:i,skin:r,emoji:s}=t;if(t.shortcodes){const u=t.shortcodes.match(dd.SHORTCODES_REGEX);u&&(i=u[1],u[2]&&(r=u[2]))}if(s||(s=dd.get(i||t.native)),!s)return t.fallback;const l=s.skins[r-1]||s.skins[0],d=l.src||(t.set!="native"&&!t.spritesheet?typeof t.getImageURL=="function"?t.getImageURL(t.set,l.unified):`https://cdn.jsdelivr.net/npm/emoji-datasource-${t.set}@15.0.1/img/${t.set}/64/${l.unified}.png`:void 0),c=typeof t.getSpritesheetURL=="function"?t.getSpritesheetURL(t.set):`https://cdn.jsdelivr.net/npm/emoji-datasource-${t.set}@15.0.1/img/${t.set}/sheets-256/64.png`;return qe("span",{class:"emoji-mart-emoji","data-emoji-set":t.set,children:d?qe("img",{style:{maxWidth:t.size||"1em",maxHeight:t.size||"1em",display:"inline-block"},alt:l.native||l.shortcodes,src:d}):t.set=="native"?qe("span",{style:{fontSize:t.size,fontFamily:'"EmojiMart", "Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "Android Emoji"'},children:l.native}):qe("span",{style:{display:"block",width:t.size,height:t.size,backgroundImage:`url(${c})`,backgroundSize:`${100*Ci.sheet.cols}% ${100*Ci.sheet.rows}%`,backgroundPosition:`${100/(Ci.sheet.cols-1)*l.x}% ${100/(Ci.sheet.rows-1)*l.y}%`}})})}const vg=typeof window!="undefined"&&window.HTMLElement?window.HTMLElement:Object;class By extends vg{static get observedAttributes(){return Object.keys(this.Props)}update(i={}){for(let r in i)this.attributeChangedCallback(r,null,i[r])}attributeChangedCallback(i,r,s){if(!this.component)return;const l=Ly(i,{[i]:s},this.constructor.Props,this);this.component.componentWillReceiveProps?this.component.componentWillReceiveProps({[i]:l}):(this.component.props[i]=l,this.component.forceUpdate())}disconnectedCallback(){this.disconnected=!0,this.component&&this.component.unregister&&this.component.unregister()}constructor(i={}){if(super(),this.props=i,i.parent||i.ref){let r=null;const s=i.parent||(r=i.ref&&i.ref.current);r&&(r.innerHTML=""),s&&s.appendChild(this)}}}class hk extends By{setShadow(){this.attachShadow({mode:"open"})}injectStyles(i){if(!i)return;const r=document.createElement("style");r.textContent=i,this.shadowRoot.insertBefore(r,this.shadowRoot.firstChild)}constructor(i,{styles:r}={}){super(i),this.setShadow(),this.injectStyles(r)}}var yg={fallback:"",id:"",native:"",shortcodes:"",size:{value:"",transform:t=>/\D/.test(t)?t:`${t}px`},set:ts.set,skin:ts.skin};class uf extends By{connectedCallback(){return qi(this,null,function*(){const i=zy(this.props,yg,this);i.element=this,i.ref=r=>{this.component=r},yield df(),!this.disconnected&&es(qe(gg,Z({},i)),this)})}constructor(i){super(i)}}Ea(uf,"Props",yg),typeof customElements!="undefined"&&!customElements.get("em-emoji")&&customElements.define("em-emoji",uf);var dl,pr,Fy,ic=0,hf=[],Ny=Lt.__b,jy=Lt.__r,Uy=Lt.diffed,Vy=Lt.__c,fk=Lt.unmount;function Au(t,i){Lt.__h&&Lt.__h(pr,t,ic||i),ic=0;var r=pr.__H||(pr.__H={__:[],__h:[]});return t>=r.__.length&&r.__.push({}),r.__[t]}function pk(t){return ic=1,mk(Wy,t)}function mk(t,i,r){var s=Au(dl++,2);return s.t=t,s.__c||(s.__=[r?r(i):Wy(void 0,i),function(l){var d=s.t(s.__[0],l);s.__[0]!==d&&(s.__=[d,s.__[1]],s.__c.setState({}))}],s.__c=pr),s.__}function gk(t,i){var r=Au(dl++,3);!Lt.__s&&_g(r.__H,i)&&(r.__=t,r.__H=i,pr.__H.__h.push(r))}function Hy(t,i){var r=Au(dl++,4);!Lt.__s&&_g(r.__H,i)&&(r.__=t,r.__H=i,pr.__h.push(r))}function bg(t){return ic=5,wg(function(){return{current:t}},[])}function vk(t,i,r){ic=6,Hy(function(){typeof t=="function"?t(i()):t&&(t.current=i())},r==null?r:r.concat(t))}function wg(t,i){var r=Au(dl++,7);return _g(r.__H,i)&&(r.__=t(),r.__H=i,r.__h=t),r.__}function yk(t,i){return ic=8,wg(function(){return t},i)}function bk(t){var i=pr.context[t.__c],r=Au(dl++,9);return r.c=t,i?(r.__==null&&(r.__=!0,i.sub(pr)),i.props.value):t.__}function dD(t,i){Lt.useDebugValue&&Lt.useDebugValue(i?i(t):t)}function TF(t){var i=Au(dl++,10),r=pk();return i.__=t,pr.componentDidCatch||(pr.componentDidCatch=function(s){i.__&&i.__(s),r[1](s)}),[r[0],function(){r[1](void 0)}]}function cD(){var t;for(hf.sort(function(i,r){return i.__v.__b-r.__v.__b});t=hf.pop();)if(t.__P)try{t.__H.__h.forEach(ff),t.__H.__h.forEach(xg),t.__H.__h=[]}catch(i){t.__H.__h=[],Lt.__e(i,t.__v)}}Lt.__b=function(t){pr=null,Ny&&Ny(t)},Lt.__r=function(t){jy&&jy(t),dl=0;var i=(pr=t.__c).__H;i&&(i.__h.forEach(ff),i.__h.forEach(xg),i.__h=[])},Lt.diffed=function(t){Uy&&Uy(t);var i=t.__c;i&&i.__H&&i.__H.__h.length&&(hf.push(i)!==1&&Fy===Lt.requestAnimationFrame||((Fy=Lt.requestAnimationFrame)||function(r){var s,l=function(){clearTimeout(d),Gy&&cancelAnimationFrame(s),setTimeout(r)},d=setTimeout(l,100);Gy&&(s=requestAnimationFrame(l))})(cD)),pr=null},Lt.__c=function(t,i){i.some(function(r){try{r.__h.forEach(ff),r.__h=r.__h.filter(function(s){return!s.__||xg(s)})}catch(s){i.some(function(l){l.__h&&(l.__h=[])}),i=[],Lt.__e(s,r.__v)}}),Vy&&Vy(t,i)},Lt.unmount=function(t){fk&&fk(t);var i,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(s){try{ff(s)}catch(l){i=l}}),i&&Lt.__e(i,r.__v))};var Gy=typeof requestAnimationFrame=="function";function ff(t){var i=pr,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),pr=i}function xg(t){var i=pr;t.__c=t.__(),pr=i}function _g(t,i){return!t||t.length!==i.length||i.some(function(r,s){return r!==t[s]})}function Wy(t,i){return typeof i=="function"?i(t):i}function qy(t,i){for(var r in i)t[r]=i[r];return t}function $y(t,i){for(var r in t)if(r!=="__source"&&!(r in i))return!0;for(var s in i)if(s!=="__source"&&t[s]!==i[s])return!0;return!1}function pf(t){this.props=t}function wk(t,i){function r(l){var d=this.props.ref,c=d==l.ref;return!c&&d&&(d.call?d(null):d.current=null),i?!i(this.props,l)||!c:$y(this.props,l)}function s(l){return this.shouldComponentUpdate=r,_o(t,l)}return s.displayName="Memo("+(t.displayName||t.name)+")",s.prototype.isReactComponent=!0,s.__f=!0,s}(pf.prototype=new ks).isPureReactComponent=!0,pf.prototype.shouldComponentUpdate=function(t,i){return $y(this.props,t)||$y(this.state,i)};var Zy=Lt.__b;Lt.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),Zy&&Zy(t)};var xk=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function _k(t){function i(r,s){var l=qy({},r);return delete l.ref,t(l,(s=r.ref||s)&&(typeof s!="object"||"current"in s)?s:null)}return i.$$typeof=xk,i.render=i,i.prototype.isReactComponent=i.__f=!0,i.displayName="ForwardRef("+(t.displayName||t.name)+")",i}var Yy=function(t,i){return t==null?null:So(So(t).map(i))},kk={map:Yy,forEach:Yy,count:function(t){return t?So(t).length:0},only:function(t){var i=So(t);if(i.length!==1)throw"Children.only";return i[0]},toArray:So},Sk=Lt.__e;Lt.__e=function(t,i,r){if(t.then){for(var s,l=i;l=l.__;)if((s=l.__c)&&s.__c)return i.__e==null&&(i.__e=r.__e,i.__k=r.__k),s.__c(t,i)}Sk(t,i,r)};var Xy=Lt.unmount;function mf(){this.__u=0,this.t=null,this.__b=null}function gf(t){var i=t.__.__c;return i&&i.__e&&i.__e(t)}function Ky(t){var i,r,s;function l(d){if(i||(i=t()).then(function(c){r=c.default||c},function(c){s=c}),s)throw s;if(!r)throw i;return _o(r,d)}return l.displayName="Lazy",l.__f=!0,l}function Cu(){this.u=null,this.o=null}Lt.unmount=function(t){var i=t.__c;i&&i.__R&&i.__R(),i&&t.__h===!0&&(t.type=null),Xy&&Xy(t)},(mf.prototype=new ks).__c=function(t,i){var r=i.__c,s=this;s.t==null&&(s.t=[]),s.t.push(r);var l=gf(s.__v),d=!1,c=function(){d||(d=!0,r.__R=null,l?l(u):u())};r.__R=c;var u=function(){if(!--s.__u){if(s.state.__e){var f=s.state.__e;s.__v.__k[0]=function p(g,v,w){return g&&(g.__v=null,g.__k=g.__k&&g.__k.map(function(x){return p(x,v,w)}),g.__c&&g.__c.__P===v&&(g.__e&&w.insertBefore(g.__e,g.__d),g.__c.__e=!0,g.__c.__P=w)),g}(f,f.__c.__P,f.__c.__O)}var m;for(s.setState({__e:s.__b=null});m=s.t.pop();)m.forceUpdate()}},h=i.__h===!0;s.__u++||h||s.setState({__e:s.__b=s.__v.__k[0]}),t.then(c,c)},mf.prototype.componentWillUnmount=function(){this.t=[]},mf.prototype.render=function(t,i){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=function d(c,u,h){return c&&(c.__c&&c.__c.__H&&(c.__c.__H.__.forEach(function(f){typeof f.__c=="function"&&f.__c()}),c.__c.__H=null),(c=qy({},c)).__c!=null&&(c.__c.__P===h&&(c.__c.__P=u),c.__c=null),c.__k=c.__k&&c.__k.map(function(f){return d(f,u,h)})),c}(this.__b,r,s.__O=s.__P)}this.__b=null}var l=i.__e&&_o(ko,null,t.fallback);return l&&(l.__h=null),[_o(ko,null,i.__e?null:t.children),l]};var Qy=function(t,i,r){if(++r[1]===r[0]&&t.o.delete(i),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(r=t.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.u=r=r[2]}};function Ak(t){return this.getChildContext=function(){return t.context},t.children}function Ck(t){var i=this,r=t.i;i.componentWillUnmount=function(){es(null,i.l),i.l=null,i.i=null},i.i&&i.i!==r&&i.componentWillUnmount(),t.__v?(i.l||(i.i=r,i.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(s){this.childNodes.push(s),i.i.appendChild(s)},insertBefore:function(s,l){this.childNodes.push(s),i.i.appendChild(s)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),i.i.removeChild(s)}}),es(_o(Ak,{context:i.context},t.__v),i.l)):i.l&&i.componentWillUnmount()}function Eu(t,i){return _o(Ck,{__v:t,i})}(Cu.prototype=new ks).__e=function(t){var i=this,r=gf(i.__v),s=i.o.get(t);return s[0]++,function(l){var d=function(){i.props.revealOrder?(s.push(l),Qy(i,t,s)):l()};r?r(d):d()}},Cu.prototype.render=function(t){this.u=null,this.o=new Map;var i=So(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&i.reverse();for(var r=i.length;r--;)this.o.set(i[r],this.u=[1,0,this.u]);return t.children},Cu.prototype.componentDidUpdate=Cu.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(i,r){Qy(t,r,i)})};var Jy=typeof Symbol!="undefined"&&Symbol.for&&Symbol.for("react.element")||60103,Ek=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Mk=typeof document!="undefined",Tk=function(t){return(typeof Symbol!="undefined"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};function eb(t,i,r){return i.__k==null&&(i.textContent=""),es(t,i),typeof r=="function"&&r(),t?t.__c:null}function Dk(t,i,r){return Ty(t,i),typeof r=="function"&&r(),t?t.__c:null}ks.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(ks.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(i){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:i})}})});var Ws=Lt.event;function mr(){}function is(){return this.cancelBubble}function tb(){return this.defaultPrevented}Lt.event=function(t){return Ws&&(t=Ws(t)),t.persist=mr,t.isPropagationStopped=is,t.isDefaultPrevented=tb,t.nativeEvent=t};var kg,vf={configurable:!0,get:function(){return this.class}},ib=Lt.vnode;Lt.vnode=function(t){var i=t.type,r=t.props,s=r;if(typeof i=="string"){var l=i.indexOf("-")===-1;for(var d in s={},r){var c=r[d];Mk&&d==="children"&&i==="noscript"||d==="value"&&"defaultValue"in r&&c==null||(d==="defaultValue"&&"value"in r&&r.value==null?d="value":d==="download"&&c===!0?c="":/ondoubleclick/i.test(d)?d="ondblclick":/^onchange(textarea|input)/i.test(d+i)&&!Tk(r.type)?d="oninput":/^onfocus$/i.test(d)?d="onfocusin":/^onblur$/i.test(d)?d="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(d)?d=d.toLowerCase():l&&Ek.test(d)?d=d.replace(/[A-Z0-9]/,"-$&").toLowerCase():c===null&&(c=void 0),s[d]=c)}i=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=So(r.children).forEach(function(u){u.props.selected=s.value.indexOf(u.props.value)!=-1})),i=="select"&&s.defaultValue!=null&&(s.value=So(r.children).forEach(function(u){u.props.selected=s.multiple?s.defaultValue.indexOf(u.props.value)!=-1:s.defaultValue==u.props.value})),t.props=s,r.class!=r.className&&(vf.enumerable="className"in r,r.className!=null&&(s.class=r.className),Object.defineProperty(s,"className",vf))}t.$$typeof=Jy,ib&&ib(t)};var Mu=Lt.__r;Lt.__r=function(t){Mu&&Mu(t),kg=t.__c};var nb={ReactCurrentDispatcher:{current:{readContext:function(t){return kg.__n[t.__c].props.value}}}},Pk="17.0.2";function rb(t){return _o.bind(null,t)}function Sg(t){return!!t&&t.$$typeof===Jy}function ab(t){return Sg(t)?rD.apply(null,arguments):t}function Tu(t){return!!t.__k&&(es(null,t),!0)}function Ok(t){return t&&(t.base||t.nodeType===1&&t)||null}var Ik=function(t,i){return t(i)},Rk=function(t,i){return t(i)},uD=null,sb={useState:pk,useReducer:mk,useEffect:gk,useLayoutEffect:Hy,useRef:bg,useImperativeHandle:vk,useMemo:wg,useCallback:yk,useContext:bk,useDebugValue:dD,version:"17.0.2",Children:kk,render:eb,hydrate:Dk,unmountComponentAtNode:Tu,createPortal:Eu,createElement:_o,createContext:Dy,createFactory:rb,cloneElement:ab,createRef:Hs,Fragment:ko,isValidElement:Sg,findDOMNode:Ok,Component:ks,PureComponent:pf,memo:wk,forwardRef:_k,flushSync:Rk,unstable_batchedUpdates:Ik,StrictMode:ko,Suspense:mf,SuspenseList:Cu,lazy:Ky,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:nb};const ob={light:"outline",dark:"solid"};class lb extends pf{renderIcon(i){const{icon:r}=i;if(r){if(r.svg)return qe("span",{class:"flex",dangerouslySetInnerHTML:{__html:r.svg}});if(r.src)return qe("img",{src:r.src})}const s=Su.categories[i.id]||Su.categories.custom,l=this.props.icons=="auto"?ob[this.props.theme]:this.props.icons;return s[l]||s}render(){let i=null;return qe("nav",{id:"nav",class:"padding","data-position":this.props.position,dir:this.props.dir,children:qe("div",{class:"flex relative",children:[this.categories.map((r,s)=>{const l=r.name||fr.categories[r.id],d=!this.props.unfocused&&r.id==this.state.categoryId;return d&&(i=s),qe("button",{"aria-label":l,"aria-selected":d||void 0,title:l,type:"button",class:"flex flex-grow flex-center",onMouseDown:c=>c.preventDefault(),onClick:()=>{this.props.onClick({category:r,i:s})},children:this.renderIcon(r)})}),qe("div",{class:"bar",style:{width:`${100/this.categories.length}%`,opacity:i==null?0:1,transform:this.props.dir==="rtl"?`scaleX(-1) translateX(${i*100}%)`:`translateX(${i*100}%)`}})]})})}constructor(){super(),this.categories=Ci.categories.filter(i=>!i.target),this.state={categoryId:this.categories[0].id}}}class zk extends pf{shouldComponentUpdate(i){for(let r in i)if(r!="children"&&i[r]!=this.props[r])return!0;return!1}render(){return this.props.children}}const nc={rowsPerRender:10};class Ag extends ks{getInitialState(i=this.props){return{skin:ll.get("skin")||i.skin,theme:this.initTheme(i.theme)}}componentWillMount(){this.dir=fr.rtl?"rtl":"ltr",this.refs={menu:Hs(),navigation:Hs(),scroll:Hs(),search:Hs(),searchInput:Hs(),skinToneButton:Hs(),skinToneRadio:Hs()},this.initGrid(),this.props.stickySearch==!1&&this.props.searchPosition=="sticky"&&(console.warn("[EmojiMart] Deprecation warning: `stickySearch` has been renamed `searchPosition`."),this.props.searchPosition="static")}componentDidMount(){if(this.register(),this.shadowRoot=this.base.parentNode,this.props.autoFocus){const{searchInput:i}=this.refs;i.current&&i.current.focus()}}componentWillReceiveProps(i){this.nextState||(this.nextState={});for(const r in i)this.nextState[r]=i[r];clearTimeout(this.nextStateTimer),this.nextStateTimer=setTimeout(()=>{let r=!1;for(const l in this.nextState)this.props[l]=this.nextState[l],(l==="custom"||l==="categories")&&(r=!0);delete this.nextState;const s=this.getInitialState();if(r)return this.reset(s);this.setState(s)})}componentWillUnmount(){this.unregister()}reset(){return qi(this,arguments,function*(i={}){yield df(this.props),this.initGrid(),this.unobserve(),this.setState(i,()=>{this.observeCategories(),this.observeRows()})})}register(){document.addEventListener("click",this.handleClickOutside),this.observe()}unregister(){var i;document.removeEventListener("click",this.handleClickOutside),(i=this.darkMedia)==null||i.removeEventListener("change",this.darkMediaCallback),this.unobserve()}observe(){this.observeCategories(),this.observeRows()}unobserve({except:i=[]}={}){Array.isArray(i)||(i=[i]);for(const r of this.observers)i.includes(r)||r.disconnect();this.observers=[].concat(i)}initGrid(){const{categories:i}=Ci;this.refs.categories=new Map;const r=Ci.categories.map(l=>l.id).join(",");this.navKey&&this.navKey!=r&&this.refs.scroll.current&&(this.refs.scroll.current.scrollTop=0),this.navKey=r,this.grid=[],this.grid.setsize=0;const s=(l,d)=>{const c=[];c.__categoryId=d.id,c.__index=l.length,this.grid.push(c);const u=this.grid.length-1,h=u%nc.rowsPerRender?{}:Hs();return h.index=u,h.posinset=this.grid.setsize+1,l.push(h),c};for(let l of i){const d=[];let c=s(d,l);for(let u of l.emojis)c.length==this.getPerLine()&&(c=s(d,l)),this.grid.setsize+=1,c.push(u);this.refs.categories.set(l.id,{root:Hs(),rows:d})}}initTheme(i){if(i!="auto")return i;if(!this.darkMedia){if(this.darkMedia=matchMedia("(prefers-color-scheme: dark)"),this.darkMedia.media.match(/^not/))return"light";this.darkMedia.addEventListener("change",this.darkMediaCallback)}return this.darkMedia.matches?"dark":"light"}initDynamicPerLine(i=this.props){if(!i.dynamicWidth)return;const{element:r,emojiButtonSize:s}=i,l=()=>{const{width:c}=r.getBoundingClientRect();return Math.floor(c/s)},d=new ResizeObserver(()=>{this.unobserve({except:d}),this.setState({perLine:l()},()=>{this.initGrid(),this.forceUpdate(()=>{this.observeCategories(),this.observeRows()})})});return d.observe(r),this.observers.push(d),l()}getPerLine(){return this.state.perLine||this.props.perLine}getEmojiByPos([i,r]){const s=this.state.searchResults||this.grid,l=s[i]&&s[i][r];if(l)return dd.get(l)}observeCategories(){const i=this.refs.navigation.current;if(!i)return;const r=new Map,s=c=>{c!=i.state.categoryId&&i.setState({categoryId:c})},l={root:this.refs.scroll.current,threshold:[0,1]},d=new IntersectionObserver(c=>{for(const h of c){const f=h.target.dataset.id;r.set(f,h.intersectionRatio)}const u=[...r];for(const[h,f]of u)if(f){s(h);break}},l);for(const{root:c}of this.refs.categories.values())d.observe(c.current);this.observers.push(d)}observeRows(){const i=Z({},this.state.visibleRows),r=new IntersectionObserver(s=>{for(const l of s){const d=parseInt(l.target.dataset.index);l.isIntersecting?i[d]=!0:delete i[d]}this.setState({visibleRows:i})},{root:this.refs.scroll.current,rootMargin:`${this.props.emojiButtonSize*(nc.rowsPerRender+5)}px 0px ${this.props.emojiButtonSize*nc.rowsPerRender}px`});for(const{rows:s}of this.refs.categories.values())for(const l of s)l.current&&r.observe(l.current);this.observers.push(r)}preventDefault(i){i.preventDefault()}unfocusSearch(){const i=this.refs.searchInput.current;i&&i.blur()}navigate({e:i,input:r,left:s,right:l,up:d,down:c}){const u=this.state.searchResults||this.grid;if(!u.length)return;let[h,f]=this.state.pos;const m=(()=>{if(h==0&&f==0&&!i.repeat&&(s||d))return null;if(h==-1)return!i.repeat&&(l||c)&&r.selectionStart==r.value.length?[0,0]:null;if(s||l){let p=u[h];const g=s?-1:1;if(f+=g,!p[f]){if(h+=g,p=u[h],!p)return h=s?0:u.length-1,f=s?0:u[h].length-1,[h,f];f=s?p.length-1:0}return[h,f]}if(d||c){h+=d?-1:1;const p=u[h];return p?(p[f]||(f=p.length-1),[h,f]):(h=d?0:u.length-1,f=d?0:u[h].length-1,[h,f])}})();if(m)i.preventDefault();else{this.state.pos[0]>-1&&this.setState({pos:[-1,-1]});return}this.setState({pos:m,keyboard:!0},()=>{this.scrollTo({row:m[0]})})}scrollTo({categoryId:i,row:r}){const s=this.state.searchResults||this.grid;if(!s.length)return;const l=this.refs.scroll.current,d=l.getBoundingClientRect();let c=0;if(r>=0&&(i=s[r].__categoryId),i&&(c=(this.refs[i]||this.refs.categories.get(i).root).current.getBoundingClientRect().top-(d.top-l.scrollTop)+1),r>=0)if(!r)c=0;else{const u=s[r].__index,h=c+u*this.props.emojiButtonSize,f=h+this.props.emojiButtonSize+this.props.emojiButtonSize*.88;if(h<l.scrollTop)c=h;else if(f>l.scrollTop+d.height)c=f-d.height;else return}this.ignoreMouse(),l.scrollTop=c}ignoreMouse(){this.mouseIsIgnored=!0,clearTimeout(this.ignoreMouseTimer),this.ignoreMouseTimer=setTimeout(()=>{delete this.mouseIsIgnored},100)}handleEmojiOver(i){this.mouseIsIgnored||this.state.showSkins||this.setState({pos:i||[-1,-1],keyboard:!1})}handleEmojiClick({e:i,emoji:r,pos:s}){if(this.props.onEmojiSelect&&(!r&&s&&(r=this.getEmojiByPos(s)),r)){const l=Ma(r,{skinIndex:this.state.skin-1});this.props.maxFrequentRows&&af.add(l,this.props),this.props.onEmojiSelect(l,i)}}closeSkins(){this.state.showSkins&&(this.setState({showSkins:null,tempSkin:null}),this.base.removeEventListener("click",this.handleBaseClick),this.base.removeEventListener("keydown",this.handleBaseKeydown))}handleSkinMouseOver(i){this.setState({tempSkin:i})}handleSkinClick(i){this.ignoreMouse(),this.closeSkins(),this.setState({skin:i,tempSkin:null}),ll.set("skin",i)}renderNav(){return qe(lb,{ref:this.refs.navigation,icons:this.props.icons,theme:this.state.theme,dir:this.dir,unfocused:!!this.state.searchResults,position:this.props.navPosition,onClick:this.handleCategoryClick},this.navKey)}renderPreview(){const i=this.getEmojiByPos(this.state.pos),r=this.state.searchResults&&!this.state.searchResults.length;return qe("div",{id:"preview",class:"flex flex-middle",dir:this.dir,"data-position":this.props.previewPosition,children:[qe("div",{class:"flex flex-middle flex-grow",children:[qe("div",{class:"flex flex-auto flex-middle flex-center",style:{height:this.props.emojiButtonSize,fontSize:this.props.emojiButtonSize},children:qe(gg,{emoji:i,id:r?this.props.noResultsEmoji||"cry":this.props.previewEmoji||(this.props.previewPosition=="top"?"point_down":"point_up"),set:this.props.set,size:this.props.emojiButtonSize,skin:this.state.tempSkin||this.state.skin,spritesheet:!0,getSpritesheetURL:this.props.getSpritesheetURL})}),qe("div",{class:`margin-${this.dir[0]}`,children:i||r?qe("div",{class:`padding-${this.dir[2]} align-${this.dir[0]}`,children:[qe("div",{class:"preview-title ellipsis",children:i?i.name:fr.search_no_results_1}),qe("div",{class:"preview-subtitle ellipsis color-c",children:i?i.skins[0].shortcodes:fr.search_no_results_2})]}):qe("div",{class:"preview-placeholder color-c",children:fr.pick})})]}),!i&&this.props.skinTonePosition=="preview"&&this.renderSkinToneButton()]})}renderEmojiButton(i,{pos:r,posinset:s,grid:l}){const d=this.props.emojiButtonSize,c=this.state.tempSkin||this.state.skin,h=(i.skins[c-1]||i.skins[0]).native,f=mg(this.state.pos,r),m=r.concat(i.id).join("");return qe(zk,{selected:f,skin:c,size:d,children:qe("button",{"aria-label":h,"aria-selected":f||void 0,"aria-posinset":s,"aria-setsize":l.setsize,"data-keyboard":this.state.keyboard,title:this.props.previewPosition=="none"?i.name:void 0,type:"button",class:"flex flex-center flex-middle",tabindex:"-1",onClick:p=>this.handleEmojiClick({e:p,emoji:i}),onMouseEnter:()=>this.handleEmojiOver(r),onMouseLeave:()=>this.handleEmojiOver(),style:{width:this.props.emojiButtonSize,height:this.props.emojiButtonSize,fontSize:this.props.emojiSize,lineHeight:0},children:[qe("div",{"aria-hidden":"true",class:"background",style:{borderRadius:this.props.emojiButtonRadius,backgroundColor:this.props.emojiButtonColors?this.props.emojiButtonColors[(s-1)%this.props.emojiButtonColors.length]:void 0}}),qe(gg,{emoji:i,set:this.props.set,size:this.props.emojiSize,skin:c,spritesheet:!0,getSpritesheetURL:this.props.getSpritesheetURL})]})},m)}renderSearch(){const i=this.props.previewPosition=="none"||this.props.skinTonePosition=="search";return qe("div",{children:[qe("div",{class:"spacer"}),qe("div",{class:"flex flex-middle",children:[qe("div",{class:"search relative flex-grow",children:[qe("input",{type:"search",ref:this.refs.searchInput,placeholder:fr.search,onClick:this.handleSearchClick,onInput:this.handleSearchInput,onKeyDown:this.handleSearchKeyDown,autoComplete:"off"}),qe("span",{class:"icon loupe flex",children:Su.search.loupe}),this.state.searchResults&&qe("button",{title:"Clear","aria-label":"Clear",type:"button",class:"icon delete flex",onClick:this.clearSearch,onMouseDown:this.preventDefault,children:Su.search.delete})]}),i&&this.renderSkinToneButton()]})]})}renderSearchResults(){const{searchResults:i}=this.state;return i?qe("div",{class:"category",ref:this.refs.search,children:[qe("div",{class:`sticky padding-small align-${this.dir[0]}`,children:fr.categories.search}),qe("div",{children:i.length?i.map((r,s)=>qe("div",{class:"flex",children:r.map((l,d)=>this.renderEmojiButton(l,{pos:[s,d],posinset:s*this.props.perLine+d+1,grid:i}))})):qe("div",{class:`padding-small align-${this.dir[0]}`,children:this.props.onAddCustomEmoji&&qe("a",{onClick:this.props.onAddCustomEmoji,children:fr.add_custom})})})]}):null}renderCategories(){const{categories:i}=Ci,r=!!this.state.searchResults,s=this.getPerLine();return qe("div",{style:{visibility:r?"hidden":void 0,display:r?"none":void 0,height:"100%"},children:i.map(l=>{const{root:d,rows:c}=this.refs.categories.get(l.id);return qe("div",{"data-id":l.target?l.target.id:l.id,class:"category",ref:d,children:[qe("div",{class:`sticky padding-small align-${this.dir[0]}`,children:l.name||fr.categories[l.id]}),qe("div",{class:"relative",style:{height:c.length*this.props.emojiButtonSize},children:c.map((u,h)=>{const f=u.index-u.index%nc.rowsPerRender,m=this.state.visibleRows[f],p="current"in u?u:void 0;if(!m&&!p)return null;const g=h*s,v=g+s,w=l.emojis.slice(g,v);return w.length<s&&w.push(...new Array(s-w.length)),qe("div",{"data-index":u.index,ref:p,class:"flex row",style:{top:h*this.props.emojiButtonSize},children:m&&w.map((x,_)=>{if(!x)return qe("div",{style:{width:this.props.emojiButtonSize,height:this.props.emojiButtonSize}});const k=dd.get(x);return this.renderEmojiButton(k,{pos:[u.index,_],posinset:u.posinset+_,grid:this.grid})})},u.index)})})]})})})}renderSkinToneButton(){return this.props.skinTonePosition=="none"?null:qe("div",{class:"flex flex-auto flex-center flex-middle",style:{position:"relative",width:this.props.emojiButtonSize,height:this.props.emojiButtonSize},children:qe("button",{type:"button",ref:this.refs.skinToneButton,class:"skin-tone-button flex flex-auto flex-center flex-middle","aria-selected":this.state.showSkins?"":void 0,"aria-label":fr.skins.choose,title:fr.skins.choose,onClick:this.openSkins,style:{width:this.props.emojiSize,height:this.props.emojiSize},children:qe("span",{class:`skin-tone skin-tone-${this.state.skin}`})})})}renderLiveRegion(){const i=this.getEmojiByPos(this.state.pos),r=i?i.name:"";return qe("div",{"aria-live":"polite",class:"sr-only",children:r})}renderSkins(){const r=this.refs.skinToneButton.current.getBoundingClientRect(),s=this.base.getBoundingClientRect(),l={};return this.dir=="ltr"?l.right=s.right-r.right-3:l.left=r.left-s.left-3,this.props.previewPosition=="bottom"&&this.props.skinTonePosition=="preview"?l.bottom=s.bottom-r.top+6:(l.top=r.bottom-s.top+3,l.bottom="auto"),qe("div",{ref:this.refs.menu,role:"radiogroup",dir:this.dir,"aria-label":fr.skins.choose,class:"menu hidden","data-position":l.top?"top":"bottom",style:l,children:[...Array(6).keys()].map(d=>{const c=d+1,u=this.state.skin==c;return qe("div",{children:[qe("input",{type:"radio",name:"skin-tone",value:c,"aria-label":fr.skins[c],ref:u?this.refs.skinToneRadio:null,defaultChecked:u,onChange:()=>this.handleSkinMouseOver(c),onKeyDown:h=>{(h.code=="Enter"||h.code=="Space"||h.code=="Tab")&&(h.preventDefault(),this.handleSkinClick(c))}}),qe("button",{"aria-hidden":"true",tabindex:"-1",onClick:()=>this.handleSkinClick(c),onMouseEnter:()=>this.handleSkinMouseOver(c),onMouseLeave:()=>this.handleSkinMouseOver(),class:"option flex flex-grow flex-middle",children:[qe("span",{class:`skin-tone skin-tone-${c}`}),qe("span",{class:"margin-small-lr",children:fr.skins[c]})]})]})})})}render(){const i=this.props.perLine*this.props.emojiButtonSize;return qe("section",{id:"root",class:"flex flex-column",dir:this.dir,style:{width:this.props.dynamicWidth?"100%":`calc(${i}px + (var(--padding) + var(--sidebar-width)))`},"data-emoji-set":this.props.set,"data-theme":this.state.theme,"data-menu":this.state.showSkins?"":void 0,children:[this.props.previewPosition=="top"&&this.renderPreview(),this.props.navPosition=="top"&&this.renderNav(),this.props.searchPosition=="sticky"&&qe("div",{class:"padding-lr",children:this.renderSearch()}),qe("div",{ref:this.refs.scroll,class:"scroll flex-grow padding-lr",children:qe("div",{style:{width:this.props.dynamicWidth?"100%":i,height:"100%"},children:[this.props.searchPosition=="static"&&this.renderSearch(),this.renderSearchResults(),this.renderCategories()]})}),this.props.navPosition=="bottom"&&this.renderNav(),this.props.previewPosition=="bottom"&&this.renderPreview(),this.state.showSkins&&this.renderSkins(),this.renderLiveRegion()]})}constructor(i){super(),Ea(this,"darkMediaCallback",()=>{this.props.theme=="auto"&&this.setState({theme:this.darkMedia.matches?"dark":"light"})}),Ea(this,"handleClickOutside",r=>{const{element:s}=this.props;r.target!=s&&(this.state.showSkins&&this.closeSkins(),this.props.onClickOutside&&this.props.onClickOutside(r))}),Ea(this,"handleBaseClick",r=>{this.state.showSkins&&(r.target.closest(".menu")||(r.preventDefault(),r.stopImmediatePropagation(),this.closeSkins()))}),Ea(this,"handleBaseKeydown",r=>{this.state.showSkins&&r.key=="Escape"&&(r.preventDefault(),r.stopImmediatePropagation(),this.closeSkins())}),Ea(this,"handleSearchClick",()=>{this.getEmojiByPos(this.state.pos)&&this.setState({pos:[-1,-1]})}),Ea(this,"handleSearchInput",()=>qi(this,null,function*(){const r=this.refs.searchInput.current;if(!r)return;const{value:s}=r,l=yield dd.search(s),d=()=>{this.refs.scroll.current&&(this.refs.scroll.current.scrollTop=0)};if(!l)return this.setState({searchResults:l,pos:[-1,-1]},d);const c=r.selectionStart==r.value.length?[0,0]:[-1,-1],u=[];u.setsize=l.length;let h=null;for(let f of l)(!u.length||h.length==this.getPerLine())&&(h=[],h.__categoryId="search",h.__index=u.length,u.push(h)),h.push(f);this.ignoreMouse(),this.setState({searchResults:u,pos:c},d)})),Ea(this,"handleSearchKeyDown",r=>{const s=r.currentTarget;switch(r.stopImmediatePropagation(),r.key){case"ArrowLeft":this.navigate({e:r,input:s,left:!0});break;case"ArrowRight":this.navigate({e:r,input:s,right:!0});break;case"ArrowUp":this.navigate({e:r,input:s,up:!0});break;case"ArrowDown":this.navigate({e:r,input:s,down:!0});break;case"Enter":r.preventDefault(),this.handleEmojiClick({e:r,pos:this.state.pos});break;case"Escape":r.preventDefault(),this.state.searchResults?this.clearSearch():this.unfocusSearch();break;default:break}}),Ea(this,"clearSearch",()=>{const r=this.refs.searchInput.current;r&&(r.value="",r.focus(),this.handleSearchInput())}),Ea(this,"handleCategoryClick",({category:r,i:s})=>{this.scrollTo(s==0?{row:-1}:{categoryId:r.id})}),Ea(this,"openSkins",r=>{const{currentTarget:s}=r,l=s.getBoundingClientRect();this.setState({showSkins:l},()=>qi(this,null,function*(){yield ck(2);const d=this.refs.menu.current;d&&(d.classList.remove("hidden"),this.refs.skinToneRadio.current.focus(),this.base.addEventListener("click",this.handleBaseClick,!0),this.base.addEventListener("keydown",this.handleBaseKeydown,!0))}))}),this.observers=[],this.state=Z({pos:[-1,-1],perLine:this.initDynamicPerLine(i),visibleRows:{0:!0}},this.getInitialState(i))}}class yf extends hk{connectedCallback(){return qi(this,null,function*(){const i=zy(this.props,ts,this);i.element=this,i.ref=r=>{this.component=r},yield df(i),!this.disconnected&&es(qe(Ag,Z({},i)),this.shadowRoot)})}constructor(i){super(i,{styles:ig(Du)})}}Ea(yf,"Props",ts),typeof customElements!="undefined"&&!customElements.get("em-emoji-picker")&&customElements.define("em-emoji-picker",yf);var Du={};Du=`:host {
  width: min-content;
  height: 435px;
  min-height: 230px;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
  --border-radius: 10px;
  --category-icon-size: 18px;
  --font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
  --font-size: 15px;
  --preview-placeholder-size: 21px;
  --preview-title-size: 1.1em;
  --preview-subtitle-size: .9em;
  --shadow-color: 0deg 0% 0%;
  --shadow: .3px .5px 2.7px hsl(var(--shadow-color) / .14), .4px .8px 1px -3.2px hsl(var(--shadow-color) / .14), 1px 2px 2.5px -4.5px hsl(var(--shadow-color) / .14);
  display: flex;
}

[data-theme="light"] {
  --em-rgb-color: var(--rgb-color, 34, 36, 39);
  --em-rgb-accent: var(--rgb-accent, 34, 102, 237);
  --em-rgb-background: var(--rgb-background, 255, 255, 255);
  --em-rgb-input: var(--rgb-input, 255, 255, 255);
  --em-color-border: var(--color-border, rgba(0, 0, 0, .05));
  --em-color-border-over: var(--color-border-over, rgba(0, 0, 0, .1));
}

[data-theme="dark"] {
  --em-rgb-color: var(--rgb-color, 222, 222, 221);
  --em-rgb-accent: var(--rgb-accent, 58, 130, 247);
  --em-rgb-background: var(--rgb-background, 21, 22, 23);
  --em-rgb-input: var(--rgb-input, 0, 0, 0);
  --em-color-border: var(--color-border, rgba(255, 255, 255, .1));
  --em-color-border-over: var(--color-border-over, rgba(255, 255, 255, .2));
}

#root {
  --color-a: rgb(var(--em-rgb-color));
  --color-b: rgba(var(--em-rgb-color), .65);
  --color-c: rgba(var(--em-rgb-color), .45);
  --padding: 12px;
  --padding-small: calc(var(--padding) / 2);
  --sidebar-width: 16px;
  --duration: 225ms;
  --duration-fast: 125ms;
  --duration-instant: 50ms;
  --easing: cubic-bezier(.4, 0, .2, 1);
  width: 100%;
  text-align: left;
  border-radius: var(--border-radius);
  background-color: rgb(var(--em-rgb-background));
  position: relative;
}

@media (prefers-reduced-motion) {
  #root {
    --duration: 0;
    --duration-fast: 0;
    --duration-instant: 0;
  }
}

#root[data-menu] button {
  cursor: auto;
}

#root[data-menu] .menu button {
  cursor: pointer;
}

:host, #root, input, button {
  color: rgb(var(--em-rgb-color));
  font-family: var(--font-family);
  font-size: var(--font-size);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: normal;
}

*, :before, :after {
  box-sizing: border-box;
  min-width: 0;
  margin: 0;
  padding: 0;
}

.relative {
  position: relative;
}

.flex {
  display: flex;
}

.flex-auto {
  flex: none;
}

.flex-center {
  justify-content: center;
}

.flex-column {
  flex-direction: column;
}

.flex-grow {
  flex: auto;
}

.flex-middle {
  align-items: center;
}

.flex-wrap {
  flex-wrap: wrap;
}

.padding {
  padding: var(--padding);
}

.padding-t {
  padding-top: var(--padding);
}

.padding-lr {
  padding-left: var(--padding);
  padding-right: var(--padding);
}

.padding-r {
  padding-right: var(--padding);
}

.padding-small {
  padding: var(--padding-small);
}

.padding-small-b {
  padding-bottom: var(--padding-small);
}

.padding-small-lr {
  padding-left: var(--padding-small);
  padding-right: var(--padding-small);
}

.margin {
  margin: var(--padding);
}

.margin-r {
  margin-right: var(--padding);
}

.margin-l {
  margin-left: var(--padding);
}

.margin-small-l {
  margin-left: var(--padding-small);
}

.margin-small-lr {
  margin-left: var(--padding-small);
  margin-right: var(--padding-small);
}

.align-l {
  text-align: left;
}

.align-r {
  text-align: right;
}

.color-a {
  color: var(--color-a);
}

.color-b {
  color: var(--color-b);
}

.color-c {
  color: var(--color-c);
}

.ellipsis {
  white-space: nowrap;
  max-width: 100%;
  width: auto;
  text-overflow: ellipsis;
  overflow: hidden;
}

.sr-only {
  width: 1px;
  height: 1px;
  position: absolute;
  top: auto;
  left: -10000px;
  overflow: hidden;
}

a {
  cursor: pointer;
  color: rgb(var(--em-rgb-accent));
}

a:hover {
  text-decoration: underline;
}

.spacer {
  height: 10px;
}

[dir="rtl"] .scroll {
  padding-left: 0;
  padding-right: var(--padding);
}

.scroll {
  padding-right: 0;
  overflow-x: hidden;
  overflow-y: auto;
}

.scroll::-webkit-scrollbar {
  width: var(--sidebar-width);
  height: var(--sidebar-width);
}

.scroll::-webkit-scrollbar-track {
  border: 0;
}

.scroll::-webkit-scrollbar-button {
  width: 0;
  height: 0;
  display: none;
}

.scroll::-webkit-scrollbar-corner {
  background-color: rgba(0, 0, 0, 0);
}

.scroll::-webkit-scrollbar-thumb {
  min-height: 20%;
  min-height: 65px;
  border: 4px solid rgb(var(--em-rgb-background));
  border-radius: 8px;
}

.scroll::-webkit-scrollbar-thumb:hover {
  background-color: var(--em-color-border-over) !important;
}

.scroll:hover::-webkit-scrollbar-thumb {
  background-color: var(--em-color-border);
}

.sticky {
  z-index: 1;
  background-color: rgba(var(--em-rgb-background), .9);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  font-weight: 500;
  position: sticky;
  top: -1px;
}

[dir="rtl"] .search input[type="search"] {
  padding: 10px 2.2em 10px 2em;
}

[dir="rtl"] .search .loupe {
  left: auto;
  right: .7em;
}

[dir="rtl"] .search .delete {
  left: .7em;
  right: auto;
}

.search {
  z-index: 2;
  position: relative;
}

.search input, .search button {
  font-size: calc(var(--font-size)  - 1px);
}

.search input[type="search"] {
  width: 100%;
  background-color: var(--em-color-border);
  transition-duration: var(--duration);
  transition-property: background-color, box-shadow;
  transition-timing-function: var(--easing);
  border: 0;
  border-radius: 10px;
  outline: 0;
  padding: 10px 2em 10px 2.2em;
  display: block;
}

.search input[type="search"]::-ms-input-placeholder {
  color: inherit;
  opacity: .6;
}

.search input[type="search"]::placeholder {
  color: inherit;
  opacity: .6;
}

.search input[type="search"], .search input[type="search"]::-webkit-search-decoration, .search input[type="search"]::-webkit-search-cancel-button, .search input[type="search"]::-webkit-search-results-button, .search input[type="search"]::-webkit-search-results-decoration {
  -webkit-appearance: none;
  -ms-appearance: none;
  appearance: none;
}

.search input[type="search"]:focus {
  background-color: rgb(var(--em-rgb-input));
  box-shadow: inset 0 0 0 1px rgb(var(--em-rgb-accent)), 0 1px 3px rgba(65, 69, 73, .2);
}

.search .icon {
  z-index: 1;
  color: rgba(var(--em-rgb-color), .7);
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
}

.search .loupe {
  pointer-events: none;
  left: .7em;
}

.search .delete {
  right: .7em;
}

svg {
  fill: currentColor;
  width: 1em;
  height: 1em;
}

button {
  -webkit-appearance: none;
  -ms-appearance: none;
  appearance: none;
  cursor: pointer;
  color: currentColor;
  background-color: rgba(0, 0, 0, 0);
  border: 0;
}

#nav {
  z-index: 2;
  padding-top: 12px;
  padding-bottom: 12px;
  padding-right: var(--sidebar-width);
  position: relative;
}

#nav button {
  color: var(--color-b);
  transition: color var(--duration) var(--easing);
}

#nav button:hover {
  color: var(--color-a);
}

#nav svg, #nav img {
  width: var(--category-icon-size);
  height: var(--category-icon-size);
}

#nav[dir="rtl"] .bar {
  left: auto;
  right: 0;
}

#nav .bar {
  width: 100%;
  height: 3px;
  background-color: rgb(var(--em-rgb-accent));
  transition: transform var(--duration) var(--easing);
  border-radius: 3px 3px 0 0;
  position: absolute;
  bottom: -12px;
  left: 0;
}

#nav button[aria-selected] {
  color: rgb(var(--em-rgb-accent));
}

#preview {
  z-index: 2;
  padding: calc(var(--padding)  + 4px) var(--padding);
  padding-right: var(--sidebar-width);
  position: relative;
}

#preview .preview-placeholder {
  font-size: var(--preview-placeholder-size);
}

#preview .preview-title {
  font-size: var(--preview-title-size);
}

#preview .preview-subtitle {
  font-size: var(--preview-subtitle-size);
}

#nav:before, #preview:before {
  content: "";
  height: 2px;
  position: absolute;
  left: 0;
  right: 0;
}

#nav[data-position="top"]:before, #preview[data-position="top"]:before {
  background: linear-gradient(to bottom, var(--em-color-border), transparent);
  top: 100%;
}

#nav[data-position="bottom"]:before, #preview[data-position="bottom"]:before {
  background: linear-gradient(to top, var(--em-color-border), transparent);
  bottom: 100%;
}

.category:last-child {
  min-height: calc(100% + 1px);
}

.category button {
  font-family: -apple-system, BlinkMacSystemFont, Helvetica Neue, sans-serif;
  position: relative;
}

.category button > * {
  position: relative;
}

.category button .background {
  opacity: 0;
  background-color: var(--em-color-border);
  transition: opacity var(--duration-fast) var(--easing) var(--duration-instant);
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}

.category button:hover .background {
  transition-duration: var(--duration-instant);
  transition-delay: 0s;
}

.category button[aria-selected] .background {
  opacity: 1;
}

.category button[data-keyboard] .background {
  transition: none;
}

.row {
  width: 100%;
  position: absolute;
  top: 0;
  left: 0;
}

.skin-tone-button {
  border: 1px solid rgba(0, 0, 0, 0);
  border-radius: 100%;
}

.skin-tone-button:hover {
  border-color: var(--em-color-border);
}

.skin-tone-button:active .skin-tone {
  transform: scale(.85) !important;
}

.skin-tone-button .skin-tone {
  transition: transform var(--duration) var(--easing);
}

.skin-tone-button[aria-selected] {
  background-color: var(--em-color-border);
  border-top-color: rgba(0, 0, 0, .05);
  border-bottom-color: rgba(0, 0, 0, 0);
  border-left-width: 0;
  border-right-width: 0;
}

.skin-tone-button[aria-selected] .skin-tone {
  transform: scale(.9);
}

.menu {
  z-index: 2;
  white-space: nowrap;
  border: 1px solid var(--em-color-border);
  background-color: rgba(var(--em-rgb-background), .9);
  -webkit-backdrop-filter: blur(4px);
  backdrop-filter: blur(4px);
  transition-property: opacity, transform;
  transition-duration: var(--duration);
  transition-timing-function: var(--easing);
  border-radius: 10px;
  padding: 4px;
  position: absolute;
  box-shadow: 1px 1px 5px rgba(0, 0, 0, .05);
}

.menu.hidden {
  opacity: 0;
}

.menu[data-position="bottom"] {
  transform-origin: 100% 100%;
}

.menu[data-position="bottom"].hidden {
  transform: scale(.9)rotate(-3deg)translateY(5%);
}

.menu[data-position="top"] {
  transform-origin: 100% 0;
}

.menu[data-position="top"].hidden {
  transform: scale(.9)rotate(3deg)translateY(-5%);
}

.menu input[type="radio"] {
  clip: rect(0 0 0 0);
  width: 1px;
  height: 1px;
  border: 0;
  margin: 0;
  padding: 0;
  position: absolute;
  overflow: hidden;
}

.menu input[type="radio"]:checked + .option {
  box-shadow: 0 0 0 2px rgb(var(--em-rgb-accent));
}

.option {
  width: 100%;
  border-radius: 6px;
  padding: 4px 6px;
}

.option:hover {
  color: #fff;
  background-color: rgb(var(--em-rgb-accent));
}

.skin-tone {
  width: 16px;
  height: 16px;
  border-radius: 100%;
  display: inline-block;
  position: relative;
  overflow: hidden;
}

.skin-tone:after {
  content: "";
  mix-blend-mode: overlay;
  background: linear-gradient(rgba(255, 255, 255, .2), rgba(0, 0, 0, 0));
  border: 1px solid rgba(0, 0, 0, .8);
  border-radius: 100%;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  box-shadow: inset 0 -2px 3px #000, inset 0 1px 2px #fff;
}

.skin-tone-1 {
  background-color: #ffc93a;
}

.skin-tone-2 {
  background-color: #ffdab7;
}

.skin-tone-3 {
  background-color: #e7b98f;
}

.skin-tone-4 {
  background-color: #c88c61;
}

.skin-tone-5 {
  background-color: #a46134;
}

.skin-tone-6 {
  background-color: #5d4437;
}

[data-index] {
  justify-content: space-between;
}

[data-emoji-set="twitter"] .skin-tone:after {
  box-shadow: none;
  border-color: rgba(0, 0, 0, .5);
}

[data-emoji-set="twitter"] .skin-tone-1 {
  background-color: #fade72;
}

[data-emoji-set="twitter"] .skin-tone-2 {
  background-color: #f3dfd0;
}

[data-emoji-set="twitter"] .skin-tone-3 {
  background-color: #eed3a8;
}

[data-emoji-set="twitter"] .skin-tone-4 {
  background-color: #cfad8d;
}

[data-emoji-set="twitter"] .skin-tone-5 {
  background-color: #a8805d;
}

[data-emoji-set="twitter"] .skin-tone-6 {
  background-color: #765542;
}

[data-emoji-set="google"] .skin-tone:after {
  box-shadow: inset 0 0 2px 2px rgba(0, 0, 0, .4);
}

[data-emoji-set="google"] .skin-tone-1 {
  background-color: #f5c748;
}

[data-emoji-set="google"] .skin-tone-2 {
  background-color: #f1d5aa;
}

[data-emoji-set="google"] .skin-tone-3 {
  background-color: #d4b48d;
}

[data-emoji-set="google"] .skin-tone-4 {
  background-color: #aa876b;
}

[data-emoji-set="google"] .skin-tone-5 {
  background-color: #916544;
}

[data-emoji-set="google"] .skin-tone-6 {
  background-color: #61493f;
}

[data-emoji-set="facebook"] .skin-tone:after {
  border-color: rgba(0, 0, 0, .4);
  box-shadow: inset 0 -2px 3px #000, inset 0 1px 4px #fff;
}

[data-emoji-set="facebook"] .skin-tone-1 {
  background-color: #f5c748;
}

[data-emoji-set="facebook"] .skin-tone-2 {
  background-color: #f1d5aa;
}

[data-emoji-set="facebook"] .skin-tone-3 {
  background-color: #d4b48d;
}

[data-emoji-set="facebook"] .skin-tone-4 {
  background-color: #aa876b;
}

[data-emoji-set="facebook"] .skin-tone-5 {
  background-color: #916544;
}

[data-emoji-set="facebook"] .skin-tone-6 {
  background-color: #61493f;
}

`;function Qr(t){const i=(0,X.useRef)(null),r=(0,X.useRef)(null);return r.current&&r.current.update(t),(0,X.useEffect)(()=>(r.current=new yf(ge(Z({},t),{ref:i})),()=>{r.current=null}),[]),X.createElement("div",{ref:i})}var db=de(90084),Lk=de(49505),hD=de(48453),Bk=de.n(hD),Vn,rc,ac,sc=(0,Et.kc)(function(t){var i=t.css,r=t.token,s=t.prefixCls;return{avatar:i(Vn||(Vn=(0,be.Z)([`
    border-radius: 50%;
    transition:
      scale 400ms `,`,
      box-shadow 100ms `,`;

    &:hover {
      box-shadow: 0 0 0 3px `,`;
    }

    &:active {
      scale: 0.8;
    }
  `])),r.motionEaseOut,r.motionEaseOut,r.colorText),picker:i(rc||(rc=(0,be.Z)([`
    em-emoji-picker {
      --rgb-accent: `,`;
      --shadow: none;
    }
  `])),Bk()(r.colorPrimary).rgb().join(",")),popover:i(ac||(ac=(0,be.Z)([`
    .`,`-popover-inner {
      padding: 0;
    }
  `])),s)}}),Pu=(0,X.memo)(function(t){var i=t.value,r=t.defaultAvatar,s=r===void 0?"\u{1F916}":r,l=t.backgroundColor,d=l===void 0?"rgba(0,0,0,0)":l,c=t.onChange,u=t.locale,h=u===void 0?"en-US":u,f=sc(),m=f.styles,p=(0,Lk.ZP)(h,(0,Rm.Z)((0,Aa.Z)().mark(function k(){return(0,Aa.Z)().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,de(34862)("./".concat(h.split("-")[0],".json"));case 2:return C.abrupt("return",C.sent);case 3:case"end":return C.stop()}},k)})),{revalidateOnFocus:!1}),g=p.data,v=(0,Ns.Z)("\u{1F916}",{defaultValue:s,onChange:c,value:i}),w=(0,Xt.Z)(v,2),x=w[0],_=w[1];return(0,J.jsx)(db.Z,{content:(0,J.jsx)("div",{className:m.picker,children:(0,J.jsx)(Qr,{data:wy,i18n:g,locale:h.split("-")[0],onEmojiSelect:function(A){return _(A.native)},skinTonePosition:"none",theme:"auto"})}),placement:"left",rootClassName:m.popover,trigger:"click",children:(0,J.jsx)("div",{className:m.avatar,style:{width:"fit-content"},children:(0,J.jsx)(Yl.Z,{avatar:x,background:d,size:44})})})}),Cg=Pu,bf=de(82857),Eg,wf,oc,xf,In,Fk=(0,Et.kc)(function(t){var i=t.css,r=t.token,s=t.isDarkMode;return{close:i(Eg||(Eg=(0,be.Z)([`
    position: absolute;
    inset-block-start: 8px;
    inset-inline-end: 8px;
  `]))),container:i(wf||(wf=(0,be.Z)([`
    position: relative;

    overflow: hidden;

    background: linear-gradient(
      to bottom,
      `,`,
      `,`
    );
    border: 1px solid `,`;
    border-radius: `,`px;
  `])),s?r.colorBgElevated:r.colorBgLayout,r.colorBgContainer,r.colorBorderSecondary,r.borderRadius),content:i(oc||(oc=(0,be.Z)([`
    padding-block: 0 16px;
    padding-inline: 16px;
  `]))),desc:i(xf||(xf=(0,be.Z)([`
    color: `,`;
  `])),r.colorTextDescription),image:i(In||(In=(0,be.Z)([`
    align-self: center;
  `])))}}),cb=["cover","visible","defaultVisible","onVisibleChange","alt","title","desc","width","height","imageProps"],Mg=(0,X.memo)(function(t){var i=t.cover,r=t.visible,s=t.defaultVisible,l=t.onVisibleChange,d=t.alt,c=t.title,u=t.desc,h=t.width,f=t.height,m=t.imageProps,p=(0,ht.Z)(t,cb),g=(0,Ns.Z)(!0,{defaultValue:s,onChange:l,value:r}),v=(0,Xt.Z)(g,2),w=v[0],x=v[1],_=Fk(),k=_.styles;return w?(0,J.jsxs)(Ae.D,(0,R.Z)((0,R.Z)({className:k.container},p),{},{children:[(0,J.jsx)(st.Z,{className:k.close,icon:hi.Z,onClick:function(){return x(!1)},size:{blockSize:24,fontSize:16}}),i&&(0,J.jsx)(bf.Z,(0,R.Z)({alt:d,className:k.image,height:f,src:i,width:h},m)),(0,J.jsxs)("div",{className:k.content,children:[c&&(0,J.jsx)("h3",{children:c}),u&&(0,J.jsx)("p",{className:k.desc,children:u})]})]})):null}),ub=Mg,hb=de(83345),fb=de(80626),Tg=de(4578),pb=de(27772),lc=de(36970),_f=["className","children"],kf=(0,X.memo)(function(t){var i=t.className,r=t.children,s=(0,ht.Z)(t,_f);return(0,J.jsx)(Ae.D,(0,R.Z)((0,R.Z)({className:i,gap:8,justify:"flex-end"},s),{},{horizontal:!0,children:r}))}),dc=kf,mb=de(78071),Nk=["className","icon","title","children","extra","itemsType","variant","defaultActive"],Dg,gb,Ou,vb,Iu,cc,Pg,Og,Ao,cd,Ig,Rg,zg,jk=(0,Et.kc)(function(t){var i=t.css,r=t.cx,s=t.token,l=t.isDarkMode,d=t.responsive,c=t.prefixCls,u=i(Dg||(Dg=(0,be.Z)([`
    background: transparent;
    border: none;
    border-radius: 0;

    .`,`-collapse-header {
      padding-block: 0 20px !important;
      padding-inline: 2px !important;
      background: transparent !important;
      border-radius: 0 !important;
    }

    .`,`-collapse-content {
      background: transparent;
      border-color: `,`;
    }

    .`,`-collapse-content-box {
      padding-inline: 2px !important;
      background: transparent;
      border-radius: 0;
    }
  `])),c,c,s.colorFillSecondary,c),h=i(gb||(gb=(0,be.Z)([`
    background: `,`;
    border: none;
    border-radius: `,`px;

    .`,`-collapse-content {
      border: none !important;
    }
  `])),s.colorFillQuaternary,s.borderRadiusLG,c),f=i(Ou||(Ou=(0,be.Z)([`
    background: transparent;
    border: 1px solid `,`;
    .`,`-collapse-header {
      background: transparent !important;
    }

    .`,`-collapse-content-box {
      background: transparent;
    }
  `])),s.colorBorderSecondary,c,c),m=i(vb||(vb=(0,be.Z)([`
    background: `,`;
    border: 1px solid `,`;
    border-radius: `,`px;
  `])),s.colorFillQuaternary,s.colorBorderSecondary,s.borderRadiusLG);return{blockStyle:h,defaultStyle:m,flatGroup:i(Iu||(Iu=(0,be.Z)([`
      overflow: hidden;
      padding-inline: 16px;
    `]))),ghostStyle:f,group:r(l&&i(cc||(cc=(0,be.Z)([`
          .`,`-collapse-content {
            background: transparent;
            border-color: `,`;
          }

          .`,`-collapse-header {
            background: `,`;
          }
        `])),c,s.colorBorderSecondary,c,s.colorFillTertiary),i(Pg||(Pg=(0,be.Z)([`
        overflow: hidden;
        flex: none;

        .`,`-collapse-item {
          border: none;
        }

        .`,`-collapse-header {
          align-items: center !important;
          border-radius: 0 !important;
        }

        .`,`-collapse-content-box {
          padding-block: 0 !important;
        }

        .`,`-form-item-label {
          display: flex;
          flex-direction: column;
          justify-content: center;
        }
      `])),c,c,c,c)),icon:i(Og||(Og=(0,be.Z)([`
      transition: all 100ms `,`;
    `])),s.motionEaseOut),mobileFlatGroup:i(Ao||(Ao=(0,be.Z)([`
      border-radius: `,`px;
    `])),s.borderRadiusLG),mobileGroupBody:i(cd||(cd=(0,be.Z)([`
      padding-block: 0;
      padding-inline: 16px;
      background: `,`;
    `])),s.colorBgContainer),mobileGroupHeader:i(Ig||(Ig=(0,be.Z)([`
      padding: 16px;
      background: `,`;
    `])),s.colorBgLayout),pureStyle:u,pureTitle:i(Rg||(Rg=(0,be.Z)([`
      font-size: 18px;
      font-weight: 700;
      line-height: 24px;
    `]))),title:i(zg||(zg=(0,be.Z)([`
      align-items: center;
      font-size: 16px;
      font-weight: 600;

      .anticon {
        color: `,`;
      }

      `,` {
        font-size: 14px;
        font-weight: 400;
        opacity: 0.5;
      }
    `])),s.colorPrimary,d.mobile)}}),Uk=(0,X.memo)(function(t){var i=t.className,r=t.icon,s=t.title,l=t.children,d=t.extra,c=t.itemsType,u=t.variant,h=u===void 0?"default":u,f=t.defaultActive,m=f===void 0?!0:f,p=(0,ht.Z)(t,Nk),g=(0,Ql.F)(),v=g.mobile,w=jk(h),x=w.cx,_=w.styles,k=x(h==="default"&&_.defaultStyle,h==="block"&&_.blockStyle,h==="ghost"&&_.ghostStyle,h==="pure"&&_.pureStyle),A=(0,J.jsxs)(Ae.D,{className:x(_.title,h==="pure"&&_.pureTitle),gap:8,horizontal:!0,children:[r&&(0,J.jsx)(yt.Z,{icon:r}),s]});return c==="flat"?v?(0,J.jsx)(Ae.D,{className:x(_.mobileFlatGroup,_.mobileGroupBody,i),children:l}):(0,J.jsx)(Ae.D,{className:x(_.flatGroup,k,i),children:l}):v?(0,J.jsxs)(Ae.D,{className:i,children:[(0,J.jsxs)(Ae.D,{className:_.mobileGroupHeader,horizontal:!0,justify:"space-between",children:[A,d]}),(0,J.jsx)("div",{className:_.mobileGroupBody,children:l})]}):(0,J.jsx)(mb.Z,(0,R.Z)({className:x(_.group,k,i),defaultActiveKey:m?[1]:void 0,expandIcon:function(M){var D=M.isActive;return h==="pure"?null:(0,J.jsx)(yt.Z,{className:_.icon,icon:wi.Z,size:{fontSize:16},style:D?{}:{rotate:"-90deg"}})},items:[{children:l,extra:d,key:1,label:A}]},p),1)}),Lg=Uk,yb=["style"],bb=(0,X.memo)(function(t){var i=t.style,r=(0,ht.Z)(t,yb);return(0,J.jsx)(id.Z,(0,R.Z)({style:(0,R.Z)({margin:0,opacity:.66},i)},r))}),cl=bb,wb,fD=(0,Et.kc)(function(t){var i=t.css,r=t.token,s=t.prefixCls;return{formTitle:i(wb||(wb=(0,be.Z)([`
    position: relative;
    text-align: start;

    > div {
      font-weight: 500;
      line-height: 1;
    }

    > small {
      display: block;

      line-height: 1.2;
      color: `,`;
      word-wrap: break-word;
      white-space: pre-wrap;
    }

    .`,`-tag {
      font-family: `,`;
    }
  `])),r.colorTextDescription,s,r.fontFamilyCode)}}),Vk=(0,X.memo)(function(t){var i=t.className,r=t.tag,s=t.title,l=t.desc,d=t.avatar,c=fD(),u=c.cx,h=c.styles,f=(0,J.jsxs)(Ae.D,{className:u(h.formTitle,i),gap:6,children:[(0,J.jsxs)(Ae.D,{align:"center",direction:"horizontal",gap:8,children:[s,r&&(0,J.jsx)(jh.Z,{children:r})]}),l&&(0,J.jsx)("small",{children:l})]});return d?(0,J.jsxs)(Ae.D,{align:"center",gap:8,horizontal:!0,children:[d,f]}):f}),ul=Vk,Hk=["desc","tag","minWidth","avatar","className","label","children","divider"],Gk,xb,Wk,qk=lc.Z.Item,pD=(0,Et.kc)(function(t,i){var r=t.css,s=t.responsive,l=t.prefixCls;return{item:r(Gk||(Gk=(0,be.Z)([`
      &.`,`-form-item {
        padding-block: 16px;
        padding-inline: 0;

        .`,`-row {
          gap: 12px;
          justify-content: space-between;

          > div {
            flex: unset;
            flex-grow: unset;
          }
        }

        .`,`-form-item-required::before {
          align-self: flex-start;
        }

        `,` {
          .`,`-row {
            flex-direction: column;
            align-items: stretch;

            > div {
              width: 100%;
            }
          }
        }

        `,` {
          padding-block: 16px;
          padding-inline: 0;

          .`,`-row {
            flex-wrap: wrap;
            gap: 4px;
          }
        }
      }
    `])),l,l,l,s.md,l,s.mobile,l),itemMinWidth:r(xb||(xb=(0,be.Z)([`
      .`,`-form-item-control {
        width: `,`;
      }
      `,` {
        .`,`-row {
          flex-direction: column;
          gap: 4px;
        }

        .`,`-form-item-control {
          flex: 1;
          width: 100%;
        }
      }
    `])),l,j1(i)?"".concat(i,"px"):i,s.mobile,l,l),itemNoDivider:r(Wk||(Wk=(0,be.Z)([`
      &:not(:first-child) {
        padding-block-start: 0;
      }
    `])))}}),$k=(0,X.memo)(function(t){var i=t.desc,r=t.tag,s=t.minWidth,l=t.avatar,d=t.className,c=t.label,u=t.children,h=t.divider,f=(0,ht.Z)(t,Hk),m=pD(s),p=m.cx,g=m.styles;return(0,J.jsxs)(J.Fragment,{children:[h&&(0,J.jsx)(cl,{}),(0,J.jsx)(qk,(0,R.Z)((0,R.Z)({className:p(g.item,!!s&&g.itemMinWidth,!h&&g.itemNoDivider,d),label:(0,J.jsx)(ul,{avatar:l,desc:i,tag:r,title:c})},f),{},{children:u}))]})}),_b=$k,kb,Zk,Yk=(0,Et.kc)(function(t){var i=t.css,r=t.token,s=t.prefixCls,l=t.responsive;return{form:i(kb||(kb=(0,be.Z)([`
    position: relative;

    display: flex;
    flex-direction: column;
    gap: 16px;

    width: 100%;

    `,` {
      gap: 0;
    }

    .`,`-form-item {
      margin: 0 !important;
    }

    .`,"-form-item .",`-form-item-label > label {
      height: unset;
    }

    .`,`-row {
      position: relative;
      flex-wrap: nowrap;
    }

    .`,`-form-item-label {
      position: relative;
      flex: 1;
      max-width: 100%;
    }

    .`,`-form-item-row {
      align-items: center;
      `,` {
        align-items: stretch;
      }
    }

    .`,`-form-item-control {
      position: relative;
      flex: 0;
      min-width: unset !important;
    }

    .`,`-collapse-item {
      overflow: hidden !important;
      border-radius: `,`px !important;
    }
  `])),l.mobile,s,s,s,s,s,s,l.mobile,s,s,r.borderRadius),pure:i(Zk||(Zk=(0,be.Z)([`
    gap: 64px;
  `])))}}),mD=["className","itemMinWidth","footer","form","items","children","itemsType","variant"],Xk=(0,X.forwardRef)(function(t,i){var r=t.className,s=t.itemMinWidth,l=t.footer,d=t.form,c=t.items,u=c===void 0?[]:c,h=t.children,f=t.itemsType,m=f===void 0?"group":f,p=t.variant,g=p===void 0?"default":p,v=(0,ht.Z)(t,mD),w=Yk(),x=w.cx,_=w.styles,k=function(M,D){return(0,J.jsx)(_b,(0,R.Z)({divider:D!==0,minWidth:s},M),D)},A=function(M,D){return(0,J.jsx)(Lg,{defaultActive:M==null?void 0:M.defaultActive,extra:M==null?void 0:M.extra,icon:M==null?void 0:M.icon,title:M.title,variant:g,children:Array.isArray(M.children)?M.children.filter(function(P){return!P.hidden}).map(function(P,T){return k(P,T)}):M.children},D)};return(0,J.jsxs)(lc.Z,(0,R.Z)((0,R.Z)({className:x(_.form,g==="pure"&&_.pure,r),colon:!1,form:d,layout:"horizontal",ref:i},v),{},{children:[(u==null?void 0:u.length)>0?m==="group"?u==null?void 0:u.map(function(C,M){return A(C,M)}):(0,J.jsx)(Lg,{itemsType:"flat",variant:g,children:u==null?void 0:u.filter(function(C){return!C.hidden}).map(function(C,M){return k(C,M)})}):null,h,l&&(0,J.jsx)(dc,{children:l})]}))}),Bg=Xk;Bg.Item=_b,Bg.Group=Lg,Bg.useForm=lc.Z.useForm;var Kk=Bg,Qk=de(68190),Sb=de(90396),Jr=de(55250),Jk=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],eS=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],Ab=(0,Sb.Z)(function t(){(0,Qk.Z)(this,t),(0,Jr.Z)(this,"r",0),(0,Jr.Z)(this,"g",0),(0,Jr.Z)(this,"b",0),(0,Jr.Z)(this,"a",0),(0,Jr.Z)(this,"next",void 0)}),gD=function(i){if(typeof i=="string")return document.getElementById(i);if(i.nodeType===1)return i},tS=function(i,r,s,l,d,c){if(!(Number.isNaN(c)||c<1)){c=Math.trunc(c);var u=gD(i);if(!(!u&&!(u!=null&&u.getContext))){var h=u.getContext("2d"),f=h==null?void 0:h.getImageData(r,s,l,d),m=f.data,p,g,v,w,x,_,k,A,C,M,D,P,T,O,z,L,B,j,V,H,Y,se=c+c+1,re=l-1,$=d-1,te=c+1,he=te*(te+1)/2,oe=new Ab,ee=oe;for(v=1;v<se;v++)ee=ee.next=new Ab,v===te&&(Y=ee);ee.next=oe;var pe,ce;k=_=0;var ve=Jk[c],le=eS[c];for(g=0;g<d;g++){for(O=z=L=A=C=M=0,D=te*(B=m[_]),P=te*(j=m[_+1]),T=te*(V=m[_+2]),A+=he*B,C+=he*j,M+=he*V,ee=oe,v=0;v<te;v++)ee.r=B,ee.g=j,ee.b=V,ee=ee.next;for(v=1;v<te;v++)w=_+((re<v?re:v)<<2),A+=(ee.r=B=m[w])*(H=te-v),C+=(ee.g=j=m[w+1])*H,M+=(ee.b=V=m[w+2])*H,O+=B,z+=j,L+=V,ee=ee.next;for(pe=oe,ce=Y,p=0;p<l;p++)m[_]=A*ve>>le,m[_+1]=C*ve>>le,m[_+2]=M*ve>>le,A-=D,C-=P,M-=T,D-=pe.r,P-=pe.g,T-=pe.b,w=k+((w=p+c+1)<re?w:re)<<2,O+=pe.r=m[w],z+=pe.g=m[w+1],L+=pe.b=m[w+2],A+=O,C+=z,M+=L,pe=pe.next,D+=B=ce.r,P+=j=ce.g,T+=V=ce.b,O-=B,z-=j,L-=V,ce=ce.next,_+=4;k+=l}for(p=0;p<l;p++){for(z=L=O=C=M=A=0,_=p<<2,D=te*(B=m[_]),P=te*(j=m[_+1]),T=te*(V=m[_+2]),A+=he*B,C+=he*j,M+=he*V,ee=oe,v=0;v<te;v++)ee.r=B,ee.g=j,ee.b=V,ee=ee.next;for(x=l,v=1;v<=c;v++)_=x+p<<2,A+=(ee.r=B=m[_])*(H=te-v),C+=(ee.g=j=m[_+1])*H,M+=(ee.b=V=m[_+2])*H,O+=B,z+=j,L+=V,ee=ee.next,v<$&&(x+=l);for(_=p,pe=oe,ce=Y,g=0;g<d;g++)w=_<<2,m[w]=A*ve>>le,m[w+1]=C*ve>>le,m[w+2]=M*ve>>le,A-=D,C-=P,M-=T,D-=pe.r,P-=pe.g,T-=pe.b,w=p+((w=g+te)<$?w:$)*l<<2,A+=O+=pe.r=m[w],C+=z+=pe.g=m[w+1],M+=L+=pe.b=m[w+2],pe=pe.next,D+=B=ce.r,P+=j=ce.g,T+=V=ce.b,O-=B,z-=j,L-=V,ce=ce.next,_+=l}h==null||h.putImageData(f,r,s)}}},iS=function(){function t(i,r){if((0,Qk.Z)(this,t),(0,Jr.Z)(this,"fpsAverage",void 0),(0,Jr.Z)(this,"canvas",void 0),(0,Jr.Z)(this,"context",void 0),(0,Jr.Z)(this,"animationFrame",null),(0,Jr.Z)(this,"timestep",0),(0,Jr.Z)(this,"firstCallTime",0),(0,Jr.Z)(this,"lastCallTime",0),(0,Jr.Z)(this,"timeElapsed",0),(0,Jr.Z)(this,"fpsTotal",0),(0,Jr.Z)(this,"layers",[]),(0,Jr.Z)(this,"options",{blurRadius:16,fpsCap:30,height:32,scale:20,width:64}),this.canvas=i,this.context=this.canvas.getContext("2d"),!this.context)throw new Error("ERROR: Could not load canvas");r&&this.updateOptions(r)}return(0,Sb.Z)(t,[{key:"run",value:function(r){this.updateLayers(r),this.firstCallTime=Date.now(),this.lastCallTime=this.firstCallTime,this.animationFrame&&window.cancelAnimationFrame(this.animationFrame),this.animationFrame=window.requestAnimationFrame(this.displayLoop.bind(this)),this.play()}},{key:"generateLayer",value:function(r,s){var l=r.orbs,d=l===void 0?0:l,c=r.radius,u=c===void 0?0:c,h=r.maxVelocity,f=h===void 0?0:h,m=r.color,p=r.splitX,g=r.splitY,v=document.createElement("canvas"),w=v.getContext("2d");if(!w)throw new Error("Failed to get 2D context for layer ".concat(s));for(var x=[],_=0;_<d;_++){var k=this.createOrb(u,f,p,g);x.push(k)}return{color:m,context:w,orbs:x}}},{key:"createOrb",value:function(r,s,l,d){var c=this.options.width,u=this.options.height,h=l?Math.random()*(c/l):Math.random()*c,f=d?Math.random()*(u/d):Math.random()*u;return{maxX:c,maxY:u,minX:0,minY:0,posX:h,posY:f,radius:r,velX:(Math.random()-.5)*2*s,velY:(Math.random()-.5)*2*s}}},{key:"displayLoop",value:function(){this.animationFrame=window.requestAnimationFrame(this.displayLoop.bind(this));var r=Date.now(),s=r-this.lastCallTime;s>this.timestep&&(this.lastCallTime=r-s%this.timestep,this.timeElapsed=this.lastCallTime-this.firstCallTime,this.fpsTotal++,this.fpsAverage=this.fpsTotal/(this.timeElapsed/1e3),this.drawBackground(),this.drawBlur())}},{key:"drawBackground",value:function(){for(var r=Object.keys(this.layers).length-1;r>=0;r--){var s=this.layers[r].context,l=this.layers[r].orbs;s.fillStyle=this.layers[r].color,s.fillRect(0,0,this.options.width,this.options.height);for(var d=Object.keys(l).length-1;d>=0;d--){l[d].posX+=l[d].velX,l[d].posY+=l[d].velY;var c=void 0,u=void 0,h=void 0,f=void 0;l[d].maxX&&l[d].maxY?(c=l[d].minX,u=l[d].maxX,h=l[d].minY,f=l[d].maxY):(c=0,u=this.options.width,h=0,f=this.options.height),l[d].posX>=u?(l[d].posX=u,l[d].velX=-l[d].velX):l[d].posX<=c&&(l[d].posX=c,l[d].velX=-l[d].velX),l[d].posY>=f?(l[d].posY=f,l[d].velY=-l[d].velY):l[d].posY<=h&&(l[d].posY=h,l[d].velY=-l[d].velY),s.save(),s.globalCompositeOperation="destination-out",s.beginPath(),s.arc(l[d].posX,l[d].posY,l[d].radius,0,2*Math.PI,!1),s.fill(),s.restore()}this.context.drawImage(s.canvas,0,0)}}},{key:"drawBlur",value:function(){tS(this.canvas,0,0,this.options.width,this.options.height,this.options.blurRadius)}},{key:"updateLayers",value:function(r){var s=this;this.layers=r.map(function(l,d){return s.generateLayer(l,d)})}},{key:"updateOptions",value:function(r){var s=r.blurRadius,l=s===void 0?16:s,d=r.fpsCap,c=d===void 0?30:d,u=r.scale,h=u===void 0?20:u;this.options=(0,R.Z)((0,R.Z)({},this.options),{},{blurRadius:l,fpsCap:c,scale:h}),this.options.height=Math.round(this.canvas.clientHeight/this.options.scale),this.options.width=Math.round(this.canvas.clientWidth/this.options.scale),this.timestep=1e3/this.options.fpsCap,this.context.canvas.width=this.options.width,this.context.canvas.height=this.options.height}},{key:"prototype",value:function(){window.cancelAnimationFrame(this.animationFrame)}},{key:"play",value:function(){var r=this;window.cancelAnimationFrame(this.animationFrame),this.animationFrame=window.requestAnimationFrame(function(){return r.displayLoop()})}}]),t}(),nS=iS,vD=function(i){var r=(0,X.useState)(),s=(0,Xt.Z)(r,2),l=s[0],d=s[1];(0,X.useEffect)(function(){i.current&&d(new nS(i.current))},[]);var c=(0,X.useCallback)(function(u,h){l&&(h&&l.updateOptions(h),l.run(u))},[l]);return c},Cb,Eb,Fg,yD=(0,Et.kc)(function(t){var i=t.css;return{canvas:i(Cb||(Cb=(0,be.Z)([`
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
  `]))),container:i(Eb||(Eb=(0,be.Z)([`
    position: relative;
    width: 100%;
    height: 100%;
  `]))),content:i(Fg||(Fg=(0,be.Z)([`
    position: relative;
    z-index: 1;
    width: 100%;
    height: 100%;
  `])))}}),rS=["layers","options","className","children","classNames","style"],pn={blurRadius:16,fpsCap:60,scale:16},Ta=(0,X.memo)(function(t){var i=t.layers,r=t.options,s=r===void 0?pn:r,l=t.className,d=t.children,c=t.classNames,u=t.style,h=(0,ht.Z)(t,rS),f=(0,X.useRef)(null),m=yD(),p=m.cx,g=m.styles,v=vD(f);return(0,X.useEffect)(function(){v&&v(i,s)},[v,s,i]),(0,J.jsxs)("div",(0,R.Z)((0,R.Z)({className:p(g.container,l),style:u},h),{},{children:[(0,J.jsx)("canvas",{className:p(g.canvas,c==null?void 0:c.canvas),ref:f}),(0,J.jsx)(Ae.D,{className:p(g.content,c==null?void 0:c.content),children:d})]}))}),aS=Ta,Ru=de(30766),sS=de(87743),oS=de(54030),Ng=de(70612),lS=["style","children","backgroundColor","innerProps"],dS=(0,X.memo)(function(t){var i=t.style,r=t.children,s=t.backgroundColor,l=s===void 0?"#001dff":s,d=t.innerProps,c=(0,ht.Z)(t,lS),u=(0,Et.Fg)();return(0,J.jsxs)(Ae.D,(0,R.Z)((0,R.Z)({style:(0,R.Z)({position:"relative"},i)},c),{},{children:[(0,J.jsx)(Ng.Z,{animation:!0,colorBack:(0,ka.m4)(u.colorText,.12),colorFront:(0,ka.m4)(u.colorText,.6),flip:!0}),(0,J.jsx)(Ae.D,(0,R.Z)((0,R.Z)({align:"center"},d),{},{style:(0,R.Z)({zIndex:4},d==null?void 0:d.style),children:r})),(0,J.jsx)(Ng.Z,{animation:!0,backgroundColor:l,colorBack:(0,ka.m4)(u.colorText,.24),colorFront:u.colorText,random:!0,reverse:!0,showBackground:!0,style:{zIndex:0}})]}))}),Sf=dS,cS=de(48375),uS=de(89687),hS=de(69122),Mb=de(93279),jg=(0,Mb.Z)("Discord",[["path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z",key:"18tl5t"}]]),fS=function(i){return(0,J.jsx)(jg,(0,R.Z)({style:{overflow:"visible"}},i))},Tb=fS,Db=de(4960),pS=de(86958),hl=de(98909),mS=de(26421),Pb,Ug,Vg,Hg,Af,Gg,Ob,Ib,Wg,gS=(0,Et.kc)(function(t){var i=t.css,r=t.token;return{actions:i(Pb||(Pb=(0,be.Z)([`
      position: absolute;
      inset-block-start: 50%;
      inset-inline-end: 16px;
      transform: translateY(-50%);
    `]))),active:i(Ug||(Ug=(0,be.Z)([`
      color: `,`;
      background-color: `,`;

      &:hover {
        background-color: `,`;
      }
    `])),r.colorText,r.colorFillSecondary,r.colorFill),container:i(Vg||(Vg=(0,be.Z)([`
      cursor: pointer;
      color: `,`;
      background: transparent;
      transition: background-color 200ms `,`;

      &:active {
        background-color: `,`;
      }

      &:hover {
        background-color: `,`;
      }
    `])),r.colorTextTertiary,r.motionEaseOut,r.colorFillSecondary,r.colorFillTertiary),content:i(Hg||(Hg=(0,be.Z)([`
      position: relative;
      overflow: hidden;
      flex: 1;
      align-self: center;
    `]))),desc:i(Af||(Af=(0,be.Z)([`
      overflow: hidden;

      width: 100%;

      font-size: 12px;
      line-height: 1;
      color: `,`;
      text-overflow: ellipsis;
      white-space: nowrap;
    `])),r.colorTextDescription),pin:i(Gg||(Gg=(0,be.Z)([`
      position: absolute;
      inset-block-start: 6px;
      inset-inline-end: 6px;
    `]))),time:i(Ob||(Ob=(0,be.Z)([`
      font-size: 12px;
      color: `,`;
    `])),r.colorTextPlaceholder),title:i(Ib||(Ib=(0,be.Z)([`
      overflow: hidden;

      width: 100%;

      font-size: 16px;
      line-height: 1;
      color: `,`;
      text-overflow: ellipsis;
      white-space: nowrap;
    `])),r.colorText),triangle:i(Wg||(Wg=(0,be.Z)([`
      width: 10px;
      height: 10px;

      opacity: 0.5;
      background: `,`;
      clip-path: polygon(0% 0%, 100% 0%, 100% 100%);
      border-radius: 2px;
    `])),r.colorPrimaryBorder)}}),vS=function(i){var r=Fh()(i);return r.isSame(Fh()(),"day")?r.format("HH:mm"):r.format("MM-DD")},Rb=["active","avatar","loading","description","date","title","onHoverChange","actions","className","style","showAction","children","classNames","addon","pin"],zb=(0,X.forwardRef)(function(t,i){var r=t.active,s=t.avatar,l=t.loading,d=t.description,c=t.date,u=t.title,h=t.onHoverChange,f=t.actions,m=t.className,p=t.style,g=t.showAction,v=t.children,w=t.classNames,x=t.addon,_=t.pin,k=(0,ht.Z)(t,Rb),A=gS(),C=A.styles,M=A.cx;return(0,J.jsxs)(Ae.D,(0,R.Z)((0,R.Z)({align:"flex-start",className:M(C.container,r&&C.active,m),distribution:"space-between",gap:8,horizontal:!0,onMouseEnter:function(){h==null||h(!0)},onMouseLeave:function(){h==null||h(!1)},padding:12,ref:i,style:p},k),{},{children:[_&&(0,J.jsx)("div",{className:C.pin,children:(0,J.jsx)("div",{className:C.triangle})}),s!=null?s:(0,J.jsx)(yt.Z,{icon:mS.Z,style:{marginTop:4}}),(0,J.jsxs)(Ae.D,{className:C.content,gap:8,children:[(0,J.jsx)(Ae.D,{distribution:"space-between",horizontal:!0,children:(0,J.jsx)("div",{className:C.title,children:u})}),d&&(0,J.jsx)("div",{className:C.desc,children:d}),x]}),l?(0,J.jsx)(yt.Z,{icon:cu.Z,spin:!0}):(0,J.jsxs)(J.Fragment,{children:[g&&(0,J.jsx)(Ae.D,{className:C.actions,gap:4,horizontal:!0,onClick:function(P){P.preventDefault(),P.stopPropagation()},style:{display:g?void 0:"none"},children:f}),c&&(0,J.jsx)("div",{className:M(C.time,w==null?void 0:w.time),style:g?{opacity:0}:{},children:vS(c)})]}),v]}))}),Lb=zb,Bb={Item:Lb},bD=Bb,yS=de(21503),Fb=de(31847),qg=de(5552),bS=de(14224),zu=de(36379).Buffer,Nb=Object.create,fl=Object.defineProperty,wS=Object.getOwnPropertyDescriptor,Cf=Object.getOwnPropertyNames,Ef=Object.getPrototypeOf,wD=Object.prototype.hasOwnProperty,jb=(t,i,r)=>i in t?fl(t,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[i]=r,Fr=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports),xS=(t,i)=>{for(var r in i)fl(t,r,{get:i[r],enumerable:!0})},_S=(t,i,r,s)=>{if(i&&typeof i=="object"||typeof i=="function")for(let l of Cf(i))!wD.call(t,l)&&l!==r&&fl(t,l,{get:()=>i[l],enumerable:!(s=wS(i,l))||s.enumerable});return t},sn=(t,i,r)=>(r=t!=null?Nb(Ef(t)):{},_S(i||!t||!t.__esModule?fl(r,"default",{value:t,enumerable:!0}):r,t)),ea=(t,i,r)=>(jb(t,typeof i!="symbol"?i+"":i,r),r),kS=Fr((t,i)=>{(function(r,s){typeof t=="object"?i.exports=s():typeof define=="function"&&define.amd?define(s):r.Alea=s()})(t,function(){"use strict";return r.importState=function(l){var d=new r;return d.importState(l),d},r;function r(){return function(l){var d=0,c=0,u=0,h=1;l.length==0&&(l=[+new Date]);var f=s();d=f(" "),c=f(" "),u=f(" ");for(var m=0;m<l.length;m++)d-=f(l[m]),d<0&&(d+=1),c-=f(l[m]),c<0&&(c+=1),u-=f(l[m]),u<0&&(u+=1);f=null;var p=function(){var g=2091639*d+h*23283064365386963e-26;return d=c,c=u,u=g-(h=g|0)};return p.next=p,p.uint32=function(){return p()*4294967296},p.fract53=function(){return p()+(p()*2097152|0)*11102230246251565e-32},p.version="Alea 0.9",p.args=l,p.exportState=function(){return[d,c,u,h]},p.importState=function(g){d=+g[0]||0,c=+g[1]||0,u=+g[2]||0,h=+g[3]||0},p}(Array.prototype.slice.call(arguments))}function s(){var l=4022871197,d=function(c){c=c.toString();for(var u=0;u<c.length;u++){l+=c.charCodeAt(u);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return d.version="Mash 0.9",d}})}),Ub=Fr((t,i)=>{(function(r,s){typeof t=="object"&&typeof i<"u"?s(t):typeof define=="function"&&define.amd?define(["exports"],s):s((r=typeof globalThis<"u"?globalThis:r||self).SVDJS={})})(t,function(r){"use strict";r.SVD=function(s,l,d,c,u){if(l=l===void 0||l,d=d===void 0||d,u=1e-64/(c=c||Math.pow(2,-52)),!s)throw new TypeError("Matrix a is not defined");var h,f,m,p,g,v,w,x,_,k,A,C,M=s[0].length,D=s.length;if(D<M)throw new TypeError("Invalid matrix: m < n");for(var P=[],T=[],O=[],z=l==="f"?D:M,L=k=w=0;L<D;L++)T[L]=new Array(z).fill(0);for(L=0;L<M;L++)O[L]=new Array(M).fill(0);var B,j=new Array(M).fill(0);for(L=0;L<D;L++)for(h=0;h<M;h++)T[L][h]=s[L][h];for(L=0;L<M;L++){for(P[L]=w,_=0,m=L+1,h=L;h<D;h++)_+=Math.pow(T[h][L],2);if(_<u)w=0;else for(x=(v=T[L][L])*(w=v<0?Math.sqrt(_):-Math.sqrt(_))-_,T[L][L]=v-w,h=m;h<M;h++){for(_=0,f=L;f<D;f++)_+=T[f][L]*T[f][h];for(v=_/x,f=L;f<D;f++)T[f][h]=T[f][h]+v*T[f][L]}for(j[L]=w,_=0,h=m;h<M;h++)_+=Math.pow(T[L][h],2);if(_<u)w=0;else{for(x=(v=T[L][L+1])*(w=v<0?Math.sqrt(_):-Math.sqrt(_))-_,T[L][L+1]=v-w,h=m;h<M;h++)P[h]=T[L][h]/x;for(h=m;h<D;h++){for(_=0,f=m;f<M;f++)_+=T[h][f]*T[L][f];for(f=m;f<M;f++)T[h][f]=T[h][f]+_*P[f]}}k<(A=Math.abs(j[L])+Math.abs(P[L]))&&(k=A)}if(d)for(L=M-1;0<=L;L--){if(w!==0){for(x=T[L][L+1]*w,h=m;h<M;h++)O[h][L]=T[L][h]/x;for(h=m;h<M;h++){for(_=0,f=m;f<M;f++)_+=T[L][f]*O[f][h];for(f=m;f<M;f++)O[f][h]=O[f][h]+_*O[f][L]}}for(h=m;h<M;h++)O[L][h]=0,O[h][L]=0;O[L][L]=1,w=P[L],m=L}if(l){if(l==="f")for(L=M;L<D;L++){for(h=M;h<D;h++)T[L][h]=0;T[L][L]=1}for(L=M-1;0<=L;L--){for(m=L+1,w=j[L],h=m;h<z;h++)T[L][h]=0;if(w!==0){for(x=T[L][L]*w,h=m;h<z;h++){for(_=0,f=m;f<D;f++)_+=T[f][L]*T[f][h];for(v=_/x,f=L;f<D;f++)T[f][h]=T[f][h]+v*T[f][L]}for(h=L;h<D;h++)T[h][L]=T[h][L]/w}else for(h=L;h<D;h++)T[h][L]=0;T[L][L]=T[L][L]+1}}for(c*=k,f=M-1;0<=f;f--)for(var V=0;V<50;V++){for(B=!1,m=f;0<=m;m--){if(Math.abs(P[m])<=c){B=!0;break}if(Math.abs(j[m-1])<=c)break}if(!B){for(g=0,p=m-(_=1),L=m;L<f+1&&(v=_*P[L],P[L]=g*P[L],!(Math.abs(v)<=c));L++)if(w=j[L],j[L]=Math.sqrt(v*v+w*w),g=w/(x=j[L]),_=-v/x,l)for(h=0;h<D;h++)A=T[h][p],C=T[h][L],T[h][p]=A*g+C*_,T[h][L]=-A*_+C*g}if(C=j[f],m===f){if(C<0&&(j[f]=-C,d))for(h=0;h<M;h++)O[h][f]=-O[h][f];break}for(k=j[m],v=(((A=j[f-1])-C)*(A+C)+((w=P[f-1])-(x=P[f]))*(w+x))/(2*x*A),w=Math.sqrt(v*v+1),v=((k-C)*(k+C)+x*(A/(v<0?v-w:v+w)-x))/k,L=m+(_=g=1);L<f+1;L++){if(w=P[L],A=j[L],x=_*w,w*=g,C=Math.sqrt(v*v+x*x),v=k*(g=v/(P[L-1]=C))+w*(_=x/C),w=-k*_+w*g,x=A*_,A*=g,d)for(h=0;h<M;h++)k=O[h][L-1],C=O[h][L],O[h][L-1]=k*g+C*_,O[h][L]=-k*_+C*g;if(C=Math.sqrt(v*v+x*x),v=(g=v/(j[L-1]=C))*w+(_=x/C)*A,k=-_*w+g*A,l)for(h=0;h<D;h++)A=T[h][L-1],C=T[h][L],T[h][L-1]=A*g+C*_,T[h][L]=-A*_+C*g}P[m]=0,P[f]=v,j[f]=k}for(L=0;L<M;L++)j[L]<c&&(j[L]=0);return{u:T,q:j,v:O}},r.VERSION="1.1.1",Object.defineProperty(r,"__esModule",{value:!0})})}),SS=Fr((t,i)=>{(function(r,s){typeof t=="object"&&typeof i<"u"?i.exports=s():typeof define=="function"&&define.amd?define(s):(r=r||self,r.TinyQueue=s())})(t,function(){"use strict";var r=function(l,d){if(l===void 0&&(l=[]),d===void 0&&(d=s),this.data=l,this.length=this.data.length,this.compare=d,this.length>0)for(var c=(this.length>>1)-1;c>=0;c--)this._down(c)};r.prototype.push=function(l){this.data.push(l),this.length++,this._up(this.length-1)},r.prototype.pop=function(){if(this.length!==0){var l=this.data[0],d=this.data.pop();return this.length--,this.length>0&&(this.data[0]=d,this._down(0)),l}},r.prototype.peek=function(){return this.data[0]},r.prototype._up=function(l){for(var d=this,c=d.data,u=d.compare,h=c[l];l>0;){var f=l-1>>1,m=c[f];if(u(h,m)>=0)break;c[l]=m,l=f}c[l]=h},r.prototype._down=function(l){for(var d=this,c=d.data,u=d.compare,h=this.length>>1,f=c[l];l<h;){var m=(l<<1)+1,p=c[m],g=m+1;if(g<this.length&&u(c[g],p)<0&&(m=g,p=c[g]),u(p,f)>=0)break;c[l]=p,l=m}c[l]=f};function s(l,d){return l<d?-1:l>d?1:0}return r})}),AS=Fr((t,i)=>{"use strict";var r=SS();r.default&&(r=r.default),i.exports=s,i.exports.default=s;function s(f,m,p){m=m||1;for(var g,v,w,x,_=0;_<f[0].length;_++){var k=f[0][_];(!_||k[0]<g)&&(g=k[0]),(!_||k[1]<v)&&(v=k[1]),(!_||k[0]>w)&&(w=k[0]),(!_||k[1]>x)&&(x=k[1])}var A=w-g,C=x-v,M=Math.min(A,C),D=M/2;if(M===0){var P=[g,v];return P.distance=0,P}for(var T=new r(void 0,l),O=g;O<w;O+=M)for(var z=v;z<x;z+=M)T.push(new d(O+D,z+D,D,f));var L=u(f),B=new d(g+A/2,v+C/2,0,f);B.d>L.d&&(L=B);for(var j=T.length;T.length;){var V=T.pop();V.d>L.d&&(L=V,p&&console.log("found best %d after %d probes",Math.round(1e4*V.d)/1e4,j)),!(V.max-L.d<=m)&&(D=V.h/2,T.push(new d(V.x-D,V.y-D,D,f)),T.push(new d(V.x+D,V.y-D,D,f)),T.push(new d(V.x-D,V.y+D,D,f)),T.push(new d(V.x+D,V.y+D,D,f)),j+=4)}p&&(console.log("num probes: "+j),console.log("best distance: "+L.d));var H=[L.x,L.y];return H.distance=L.d,H}function l(f,m){return m.max-f.max}function d(f,m,p,g){this.x=f,this.y=m,this.h=p,this.d=c(f,m,g),this.max=this.d+this.h*Math.SQRT2}function c(f,m,p){for(var g=!1,v=1/0,w=0;w<p.length;w++)for(var x=p[w],_=0,k=x.length,A=k-1;_<k;A=_++){var C=x[_],M=x[A];C[1]>m!=M[1]>m&&f<(M[0]-C[0])*(m-C[1])/(M[1]-C[1])+C[0]&&(g=!g),v=Math.min(v,h(f,m,C,M))}return v===0?0:(g?1:-1)*Math.sqrt(v)}function u(f){for(var m=0,p=0,g=0,v=f[0],w=0,x=v.length,_=x-1;w<x;_=w++){var k=v[w],A=v[_],C=k[0]*A[1]-A[0]*k[1];p+=(k[0]+A[0])*C,g+=(k[1]+A[1])*C,m+=C*3}return m===0?new d(v[0][0],v[0][1],0,f):new d(p/m,g/m,0,f)}function h(f,m,p,g){var v=p[0],w=p[1],x=g[0]-v,_=g[1]-w;if(x!==0||_!==0){var k=((f-v)*x+(m-w)*_)/(x*x+_*_);k>1?(v=g[0],w=g[1]):k>0&&(v+=x*k,w+=_*k)}return x=f-v,_=m-w,x*x+_*_}}),CS=Fr((t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(s){if(s===null||s===!0||s===!1)return NaN;var l=Number(s);return isNaN(l)?l:l<0?Math.ceil(l):Math.floor(l)}i.exports=t.default}),ES=Fr((t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;function r(s){var l=new Date(Date.UTC(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()));return l.setUTCFullYear(s.getFullYear()),s.getTime()-l.getTime()}i.exports=t.default}),MS=Fr(t=>{(function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var p=this||r;return p._counter=1e3,p._html5AudioPool=[],p.html5PoolSize=10,p._codecs={},p._howls=[],p._muted=!1,p._volume=1,p._canPlayEvent="canplaythrough",p._navigator=typeof window<"u"&&window.navigator?window.navigator:null,p.masterGain=null,p.noAudio=!1,p.usingWebAudio=!0,p.autoSuspend=!0,p.ctx=null,p.autoUnlock=!0,p._setup(),p},volume:function(p){var g=this||r;if(p=parseFloat(p),g.ctx||m(),typeof p<"u"&&p>=0&&p<=1){if(g._volume=p,g._muted)return g;g.usingWebAudio&&g.masterGain.gain.setValueAtTime(p,r.ctx.currentTime);for(var v=0;v<g._howls.length;v++)if(!g._howls[v]._webAudio)for(var w=g._howls[v]._getSoundIds(),x=0;x<w.length;x++){var _=g._howls[v]._soundById(w[x]);_&&_._node&&(_._node.volume=_._volume*p)}return g}return g._volume},mute:function(p){var g=this||r;g.ctx||m(),g._muted=p,g.usingWebAudio&&g.masterGain.gain.setValueAtTime(p?0:g._volume,r.ctx.currentTime);for(var v=0;v<g._howls.length;v++)if(!g._howls[v]._webAudio)for(var w=g._howls[v]._getSoundIds(),x=0;x<w.length;x++){var _=g._howls[v]._soundById(w[x]);_&&_._node&&(_._node.muted=p?!0:_._muted)}return g},stop:function(){for(var p=this||r,g=0;g<p._howls.length;g++)p._howls[g].stop();return p},unload:function(){for(var p=this||r,g=p._howls.length-1;g>=0;g--)p._howls[g].unload();return p.usingWebAudio&&p.ctx&&typeof p.ctx.close<"u"&&(p.ctx.close(),p.ctx=null,m()),p},codecs:function(p){return(this||r)._codecs[p.replace(/^x-/,"")]},_setup:function(){var p=this||r;if(p.state=p.ctx&&p.ctx.state||"suspended",p._autoSuspend(),!p.usingWebAudio)if(typeof Audio<"u")try{var g=new Audio;typeof g.oncanplaythrough>"u"&&(p._canPlayEvent="canplay")}catch(v){p.noAudio=!0}else p.noAudio=!0;try{var g=new Audio;g.muted&&(p.noAudio=!0)}catch(v){}return p.noAudio||p._setupCodecs(),p},_setupCodecs:function(){var p=this||r,g=null;try{g=typeof Audio<"u"?new Audio:null}catch(M){return p}if(!g||typeof g.canPlayType!="function")return p;var v=g.canPlayType("audio/mpeg;").replace(/^no$/,""),w=p._navigator?p._navigator.userAgent:"",x=w.match(/OPR\/([0-6].)/g),_=x&&parseInt(x[0].split("/")[1],10)<33,k=w.indexOf("Safari")!==-1&&w.indexOf("Chrome")===-1,A=w.match(/Version\/(.*?) /),C=k&&A&&parseInt(A[1],10)<15;return p._codecs={mp3:!!(!_&&(v||g.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!v,opus:!!g.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!g.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!g.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(g.canPlayType('audio/wav; codecs="1"')||g.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!g.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!g.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(g.canPlayType("audio/x-m4a;")||g.canPlayType("audio/m4a;")||g.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(g.canPlayType("audio/x-m4b;")||g.canPlayType("audio/m4b;")||g.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(g.canPlayType("audio/x-mp4;")||g.canPlayType("audio/mp4;")||g.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!C&&g.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!C&&g.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!g.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(g.canPlayType("audio/x-flac;")||g.canPlayType("audio/flac;")).replace(/^no$/,"")},p},_unlockAudio:function(){var p=this||r;if(!(p._audioUnlocked||!p.ctx)){p._audioUnlocked=!1,p.autoUnlock=!1,!p._mobileUnloaded&&p.ctx.sampleRate!==44100&&(p._mobileUnloaded=!0,p.unload()),p._scratchBuffer=p.ctx.createBuffer(1,1,22050);var g=function(v){for(;p._html5AudioPool.length<p.html5PoolSize;)try{var w=new Audio;w._unlocked=!0,p._releaseHtml5Audio(w)}catch(M){p.noAudio=!0;break}for(var x=0;x<p._howls.length;x++)if(!p._howls[x]._webAudio)for(var _=p._howls[x]._getSoundIds(),k=0;k<_.length;k++){var A=p._howls[x]._soundById(_[k]);A&&A._node&&!A._node._unlocked&&(A._node._unlocked=!0,A._node.load())}p._autoResume();var C=p.ctx.createBufferSource();C.buffer=p._scratchBuffer,C.connect(p.ctx.destination),typeof C.start>"u"?C.noteOn(0):C.start(0),typeof p.ctx.resume=="function"&&p.ctx.resume(),C.onended=function(){C.disconnect(0),p._audioUnlocked=!0,document.removeEventListener("touchstart",g,!0),document.removeEventListener("touchend",g,!0),document.removeEventListener("click",g,!0),document.removeEventListener("keydown",g,!0);for(var M=0;M<p._howls.length;M++)p._howls[M]._emit("unlock")}};return document.addEventListener("touchstart",g,!0),document.addEventListener("touchend",g,!0),document.addEventListener("click",g,!0),document.addEventListener("keydown",g,!0),p}},_obtainHtml5Audio:function(){var p=this||r;if(p._html5AudioPool.length)return p._html5AudioPool.pop();var g=new Audio().play();return g&&typeof Promise<"u"&&(g instanceof Promise||typeof g.then=="function")&&g.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(p){var g=this||r;return p._unlocked&&g._html5AudioPool.push(p),g},_autoSuspend:function(){var p=this;if(!(!p.autoSuspend||!p.ctx||typeof p.ctx.suspend>"u"||!r.usingWebAudio)){for(var g=0;g<p._howls.length;g++)if(p._howls[g]._webAudio){for(var v=0;v<p._howls[g]._sounds.length;v++)if(!p._howls[g]._sounds[v]._paused)return p}return p._suspendTimer&&clearTimeout(p._suspendTimer),p._suspendTimer=setTimeout(function(){if(p.autoSuspend){p._suspendTimer=null,p.state="suspending";var w=function(){p.state="suspended",p._resumeAfterSuspend&&(delete p._resumeAfterSuspend,p._autoResume())};p.ctx.suspend().then(w,w)}},3e4),p}},_autoResume:function(){var p=this;if(!(!p.ctx||typeof p.ctx.resume>"u"||!r.usingWebAudio))return p.state==="running"&&p.ctx.state!=="interrupted"&&p._suspendTimer?(clearTimeout(p._suspendTimer),p._suspendTimer=null):p.state==="suspended"||p.state==="running"&&p.ctx.state==="interrupted"?(p.ctx.resume().then(function(){p.state="running";for(var g=0;g<p._howls.length;g++)p._howls[g]._emit("resume")}),p._suspendTimer&&(clearTimeout(p._suspendTimer),p._suspendTimer=null)):p.state==="suspending"&&(p._resumeAfterSuspend=!0),p}};var r=new i,s=function(p){var g=this;if(!p.src||p.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}g.init(p)};s.prototype={init:function(p){var g=this;return r.ctx||m(),g._autoplay=p.autoplay||!1,g._format=typeof p.format!="string"?p.format:[p.format],g._html5=p.html5||!1,g._muted=p.mute||!1,g._loop=p.loop||!1,g._pool=p.pool||5,g._preload=typeof p.preload=="boolean"||p.preload==="metadata"?p.preload:!0,g._rate=p.rate||1,g._sprite=p.sprite||{},g._src=typeof p.src!="string"?p.src:[p.src],g._volume=p.volume!==void 0?p.volume:1,g._xhr={method:p.xhr&&p.xhr.method?p.xhr.method:"GET",headers:p.xhr&&p.xhr.headers?p.xhr.headers:null,withCredentials:p.xhr&&p.xhr.withCredentials?p.xhr.withCredentials:!1},g._duration=0,g._state="unloaded",g._sounds=[],g._endTimers={},g._queue=[],g._playLock=!1,g._onend=p.onend?[{fn:p.onend}]:[],g._onfade=p.onfade?[{fn:p.onfade}]:[],g._onload=p.onload?[{fn:p.onload}]:[],g._onloaderror=p.onloaderror?[{fn:p.onloaderror}]:[],g._onplayerror=p.onplayerror?[{fn:p.onplayerror}]:[],g._onpause=p.onpause?[{fn:p.onpause}]:[],g._onplay=p.onplay?[{fn:p.onplay}]:[],g._onstop=p.onstop?[{fn:p.onstop}]:[],g._onmute=p.onmute?[{fn:p.onmute}]:[],g._onvolume=p.onvolume?[{fn:p.onvolume}]:[],g._onrate=p.onrate?[{fn:p.onrate}]:[],g._onseek=p.onseek?[{fn:p.onseek}]:[],g._onunlock=p.onunlock?[{fn:p.onunlock}]:[],g._onresume=[],g._webAudio=r.usingWebAudio&&!g._html5,typeof r.ctx<"u"&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(g),g._autoplay&&g._queue.push({event:"play",action:function(){g.play()}}),g._preload&&g._preload!=="none"&&g.load(),g},load:function(){var p=this,g=null;if(r.noAudio){p._emit("loaderror",null,"No audio support.");return}typeof p._src=="string"&&(p._src=[p._src]);for(var v=0;v<p._src.length;v++){var w,x;if(p._format&&p._format[v])w=p._format[v];else{if(x=p._src[v],typeof x!="string"){p._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}w=/^data:audio\/([^;,]+);/i.exec(x),w||(w=/\.([^.]+)$/.exec(x.split("?",1)[0])),w&&(w=w[1].toLowerCase())}if(w||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),w&&r.codecs(w)){g=p._src[v];break}}if(!g){p._emit("loaderror",null,"No codec support for selected audio sources.");return}return p._src=g,p._state="loading",window.location.protocol==="https:"&&g.slice(0,5)==="http:"&&(p._html5=!0,p._webAudio=!1),new l(p),p._webAudio&&c(p),p},play:function(p,g){var v=this,w=null;if(typeof p=="number")w=p,p=null;else{if(typeof p=="string"&&v._state==="loaded"&&!v._sprite[p])return null;if(typeof p>"u"&&(p="__default",!v._playLock)){for(var x=0,_=0;_<v._sounds.length;_++)v._sounds[_]._paused&&!v._sounds[_]._ended&&(x++,w=v._sounds[_]._id);x===1?p=null:w=null}}var k=w?v._soundById(w):v._inactiveSound();if(!k)return null;if(w&&!p&&(p=k._sprite||"__default"),v._state!=="loaded"){k._sprite=p,k._ended=!1;var A=k._id;return v._queue.push({event:"play",action:function(){v.play(A)}}),A}if(w&&!k._paused)return g||v._loadQueue("play"),k._id;v._webAudio&&r._autoResume();var C=Math.max(0,k._seek>0?k._seek:v._sprite[p][0]/1e3),M=Math.max(0,(v._sprite[p][0]+v._sprite[p][1])/1e3-C),D=M*1e3/Math.abs(k._rate),P=v._sprite[p][0]/1e3,T=(v._sprite[p][0]+v._sprite[p][1])/1e3;k._sprite=p,k._ended=!1;var O=function(){k._paused=!1,k._seek=C,k._start=P,k._stop=T,k._loop=!!(k._loop||v._sprite[p][2])};if(C>=T){v._ended(k);return}var z=k._node;if(v._webAudio){var L=function(){v._playLock=!1,O(),v._refreshBuffer(k);var H=k._muted||v._muted?0:k._volume;z.gain.setValueAtTime(H,r.ctx.currentTime),k._playStart=r.ctx.currentTime,typeof z.bufferSource.start>"u"?k._loop?z.bufferSource.noteGrainOn(0,C,86400):z.bufferSource.noteGrainOn(0,C,M):k._loop?z.bufferSource.start(0,C,86400):z.bufferSource.start(0,C,M),D!==1/0&&(v._endTimers[k._id]=setTimeout(v._ended.bind(v,k),D)),g||setTimeout(function(){v._emit("play",k._id),v._loadQueue()},0)};r.state==="running"&&r.ctx.state!=="interrupted"?L():(v._playLock=!0,v.once("resume",L),v._clearTimer(k._id))}else{var B=function(){z.currentTime=C,z.muted=k._muted||v._muted||r._muted||z.muted,z.volume=k._volume*r.volume(),z.playbackRate=k._rate;try{var H=z.play();if(H&&typeof Promise<"u"&&(H instanceof Promise||typeof H.then=="function")?(v._playLock=!0,O(),H.then(function(){v._playLock=!1,z._unlocked=!0,g?v._loadQueue():v._emit("play",k._id)}).catch(function(){v._playLock=!1,v._emit("playerror",k._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),k._ended=!0,k._paused=!0})):g||(v._playLock=!1,O(),v._emit("play",k._id)),z.playbackRate=k._rate,z.paused){v._emit("playerror",k._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}p!=="__default"||k._loop?v._endTimers[k._id]=setTimeout(v._ended.bind(v,k),D):(v._endTimers[k._id]=function(){v._ended(k),z.removeEventListener("ended",v._endTimers[k._id],!1)},z.addEventListener("ended",v._endTimers[k._id],!1))}catch(Y){v._emit("playerror",k._id,Y)}};z.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(z.src=v._src,z.load());var j=window&&window.ejecta||!z.readyState&&r._navigator.isCocoonJS;if(z.readyState>=3||j)B();else{v._playLock=!0,v._state="loading";var V=function(){v._state="loaded",B(),z.removeEventListener(r._canPlayEvent,V,!1)};z.addEventListener(r._canPlayEvent,V,!1),v._clearTimer(k._id)}}return k._id},pause:function(p){var g=this;if(g._state!=="loaded"||g._playLock)return g._queue.push({event:"pause",action:function(){g.pause(p)}}),g;for(var v=g._getSoundIds(p),w=0;w<v.length;w++){g._clearTimer(v[w]);var x=g._soundById(v[w]);if(x&&!x._paused&&(x._seek=g.seek(v[w]),x._rateSeek=0,x._paused=!0,g._stopFade(v[w]),x._node))if(g._webAudio){if(!x._node.bufferSource)continue;typeof x._node.bufferSource.stop>"u"?x._node.bufferSource.noteOff(0):x._node.bufferSource.stop(0),g._cleanBuffer(x._node)}else(!isNaN(x._node.duration)||x._node.duration===1/0)&&x._node.pause();arguments[1]||g._emit("pause",x?x._id:null)}return g},stop:function(p,g){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"stop",action:function(){v.stop(p)}}),v;for(var w=v._getSoundIds(p),x=0;x<w.length;x++){v._clearTimer(w[x]);var _=v._soundById(w[x]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,v._stopFade(w[x]),_._node&&(v._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),v._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&v._clearSound(_._node))),g||v._emit("stop",_._id))}return v},mute:function(p,g){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"mute",action:function(){v.mute(p,g)}}),v;if(typeof g>"u")if(typeof p=="boolean")v._muted=p;else return v._muted;for(var w=v._getSoundIds(g),x=0;x<w.length;x++){var _=v._soundById(w[x]);_&&(_._muted=p,_._interval&&v._stopFade(_._id),v._webAudio&&_._node?_._node.gain.setValueAtTime(p?0:_._volume,r.ctx.currentTime):_._node&&(_._node.muted=r._muted?!0:p),v._emit("mute",_._id))}return v},volume:function(){var p=this,g=arguments,v,w;if(g.length===0)return p._volume;if(g.length===1||g.length===2&&typeof g[1]>"u"){var x=p._getSoundIds(),_=x.indexOf(g[0]);_>=0?w=parseInt(g[0],10):v=parseFloat(g[0])}else g.length>=2&&(v=parseFloat(g[0]),w=parseInt(g[1],10));var k;if(typeof v<"u"&&v>=0&&v<=1){if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"volume",action:function(){p.volume.apply(p,g)}}),p;typeof w>"u"&&(p._volume=v),w=p._getSoundIds(w);for(var A=0;A<w.length;A++)k=p._soundById(w[A]),k&&(k._volume=v,g[2]||p._stopFade(w[A]),p._webAudio&&k._node&&!k._muted?k._node.gain.setValueAtTime(v,r.ctx.currentTime):k._node&&!k._muted&&(k._node.volume=v*r.volume()),p._emit("volume",k._id))}else return k=w?p._soundById(w):p._sounds[0],k?k._volume:0;return p},fade:function(p,g,v,w){var x=this;if(x._state!=="loaded"||x._playLock)return x._queue.push({event:"fade",action:function(){x.fade(p,g,v,w)}}),x;p=Math.min(Math.max(0,parseFloat(p)),1),g=Math.min(Math.max(0,parseFloat(g)),1),v=parseFloat(v),x.volume(p,w);for(var _=x._getSoundIds(w),k=0;k<_.length;k++){var A=x._soundById(_[k]);if(A){if(w||x._stopFade(_[k]),x._webAudio&&!A._muted){var C=r.ctx.currentTime,M=C+v/1e3;A._volume=p,A._node.gain.setValueAtTime(p,C),A._node.gain.linearRampToValueAtTime(g,M)}x._startFadeInterval(A,p,g,v,_[k],typeof w>"u")}}return x},_startFadeInterval:function(p,g,v,w,x,_){var k=this,A=g,C=v-g,M=Math.abs(C/.01),D=Math.max(4,M>0?w/M:w),P=Date.now();p._fadeTo=v,p._interval=setInterval(function(){var T=(Date.now()-P)/w;P=Date.now(),A+=C*T,A=Math.round(A*100)/100,C<0?A=Math.max(v,A):A=Math.min(v,A),k._webAudio?p._volume=A:k.volume(A,p._id,!0),_&&(k._volume=A),(v<g&&A<=v||v>g&&A>=v)&&(clearInterval(p._interval),p._interval=null,p._fadeTo=null,k.volume(v,p._id),k._emit("fade",p._id))},D)},_stopFade:function(p){var g=this,v=g._soundById(p);return v&&v._interval&&(g._webAudio&&v._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(v._interval),v._interval=null,g.volume(v._fadeTo,p),v._fadeTo=null,g._emit("fade",p)),g},loop:function(){var p=this,g=arguments,v,w,x;if(g.length===0)return p._loop;if(g.length===1)if(typeof g[0]=="boolean")v=g[0],p._loop=v;else return x=p._soundById(parseInt(g[0],10)),x?x._loop:!1;else g.length===2&&(v=g[0],w=parseInt(g[1],10));for(var _=p._getSoundIds(w),k=0;k<_.length;k++)x=p._soundById(_[k]),x&&(x._loop=v,p._webAudio&&x._node&&x._node.bufferSource&&(x._node.bufferSource.loop=v,v&&(x._node.bufferSource.loopStart=x._start||0,x._node.bufferSource.loopEnd=x._stop,p.playing(_[k])&&(p.pause(_[k],!0),p.play(_[k],!0)))));return p},rate:function(){var p=this,g=arguments,v,w;if(g.length===0)w=p._sounds[0]._id;else if(g.length===1){var x=p._getSoundIds(),_=x.indexOf(g[0]);_>=0?w=parseInt(g[0],10):v=parseFloat(g[0])}else g.length===2&&(v=parseFloat(g[0]),w=parseInt(g[1],10));var k;if(typeof v=="number"){if(p._state!=="loaded"||p._playLock)return p._queue.push({event:"rate",action:function(){p.rate.apply(p,g)}}),p;typeof w>"u"&&(p._rate=v),w=p._getSoundIds(w);for(var A=0;A<w.length;A++)if(k=p._soundById(w[A]),k){p.playing(w[A])&&(k._rateSeek=p.seek(w[A]),k._playStart=p._webAudio?r.ctx.currentTime:k._playStart),k._rate=v,p._webAudio&&k._node&&k._node.bufferSource?k._node.bufferSource.playbackRate.setValueAtTime(v,r.ctx.currentTime):k._node&&(k._node.playbackRate=v);var C=p.seek(w[A]),M=(p._sprite[k._sprite][0]+p._sprite[k._sprite][1])/1e3-C,D=M*1e3/Math.abs(k._rate);(p._endTimers[w[A]]||!k._paused)&&(p._clearTimer(w[A]),p._endTimers[w[A]]=setTimeout(p._ended.bind(p,k),D)),p._emit("rate",k._id)}}else return k=p._soundById(w),k?k._rate:p._rate;return p},seek:function(){var p=this,g=arguments,v,w;if(g.length===0)p._sounds.length&&(w=p._sounds[0]._id);else if(g.length===1){var x=p._getSoundIds(),_=x.indexOf(g[0]);_>=0?w=parseInt(g[0],10):p._sounds.length&&(w=p._sounds[0]._id,v=parseFloat(g[0]))}else g.length===2&&(v=parseFloat(g[0]),w=parseInt(g[1],10));if(typeof w>"u")return 0;if(typeof v=="number"&&(p._state!=="loaded"||p._playLock))return p._queue.push({event:"seek",action:function(){p.seek.apply(p,g)}}),p;var k=p._soundById(w);if(k)if(typeof v=="number"&&v>=0){var A=p.playing(w);A&&p.pause(w,!0),k._seek=v,k._ended=!1,p._clearTimer(w),!p._webAudio&&k._node&&!isNaN(k._node.duration)&&(k._node.currentTime=v);var C=function(){A&&p.play(w,!0),p._emit("seek",w)};if(A&&!p._webAudio){var M=function(){p._playLock?setTimeout(M,0):C()};setTimeout(M,0)}else C()}else if(p._webAudio){var D=p.playing(w)?r.ctx.currentTime-k._playStart:0,P=k._rateSeek?k._rateSeek-k._seek:0;return k._seek+(P+D*Math.abs(k._rate))}else return k._node.currentTime;return p},playing:function(p){var g=this;if(typeof p=="number"){var v=g._soundById(p);return v?!v._paused:!1}for(var w=0;w<g._sounds.length;w++)if(!g._sounds[w]._paused)return!0;return!1},duration:function(p){var g=this,v=g._duration,w=g._soundById(p);return w&&(v=g._sprite[w._sprite][1]/1e3),v},state:function(){return this._state},unload:function(){for(var p=this,g=p._sounds,v=0;v<g.length;v++)g[v]._paused||p.stop(g[v]._id),p._webAudio||(p._clearSound(g[v]._node),g[v]._node.removeEventListener("error",g[v]._errorFn,!1),g[v]._node.removeEventListener(r._canPlayEvent,g[v]._loadFn,!1),g[v]._node.removeEventListener("ended",g[v]._endFn,!1),r._releaseHtml5Audio(g[v]._node)),delete g[v]._node,p._clearTimer(g[v]._id);var w=r._howls.indexOf(p);w>=0&&r._howls.splice(w,1);var x=!0;for(v=0;v<r._howls.length;v++)if(r._howls[v]._src===p._src||p._src.indexOf(r._howls[v]._src)>=0){x=!1;break}return d&&x&&delete d[p._src],r.noAudio=!1,p._state="unloaded",p._sounds=[],p=null,null},on:function(p,g,v,w){var x=this,_=x["_on"+p];return typeof g=="function"&&_.push(w?{id:v,fn:g,once:w}:{id:v,fn:g}),x},off:function(p,g,v){var w=this,x=w["_on"+p],_=0;if(typeof g=="number"&&(v=g,g=null),g||v)for(_=0;_<x.length;_++){var k=v===x[_].id;if(g===x[_].fn&&k||!g&&k){x.splice(_,1);break}}else if(p)w["_on"+p]=[];else{var A=Object.keys(w);for(_=0;_<A.length;_++)A[_].indexOf("_on")===0&&Array.isArray(w[A[_]])&&(w[A[_]]=[])}return w},once:function(p,g,v){var w=this;return w.on(p,g,v,1),w},_emit:function(p,g,v){for(var w=this,x=w["_on"+p],_=x.length-1;_>=0;_--)(!x[_].id||x[_].id===g||p==="load")&&(setTimeout(function(k){k.call(this,g,v)}.bind(w,x[_].fn),0),x[_].once&&w.off(p,x[_].fn,x[_].id));return w._loadQueue(p),w},_loadQueue:function(p){var g=this;if(g._queue.length>0){var v=g._queue[0];v.event===p&&(g._queue.shift(),g._loadQueue()),p||v.action()}return g},_ended:function(p){var g=this,v=p._sprite;if(!g._webAudio&&p._node&&!p._node.paused&&!p._node.ended&&p._node.currentTime<p._stop)return setTimeout(g._ended.bind(g,p),100),g;var w=!!(p._loop||g._sprite[v][2]);if(g._emit("end",p._id),!g._webAudio&&w&&g.stop(p._id,!0).play(p._id),g._webAudio&&w){g._emit("play",p._id),p._seek=p._start||0,p._rateSeek=0,p._playStart=r.ctx.currentTime;var x=(p._stop-p._start)*1e3/Math.abs(p._rate);g._endTimers[p._id]=setTimeout(g._ended.bind(g,p),x)}return g._webAudio&&!w&&(p._paused=!0,p._ended=!0,p._seek=p._start||0,p._rateSeek=0,g._clearTimer(p._id),g._cleanBuffer(p._node),r._autoSuspend()),!g._webAudio&&!w&&g.stop(p._id,!0),g},_clearTimer:function(p){var g=this;if(g._endTimers[p]){if(typeof g._endTimers[p]!="function")clearTimeout(g._endTimers[p]);else{var v=g._soundById(p);v&&v._node&&v._node.removeEventListener("ended",g._endTimers[p],!1)}delete g._endTimers[p]}return g},_soundById:function(p){for(var g=this,v=0;v<g._sounds.length;v++)if(p===g._sounds[v]._id)return g._sounds[v];return null},_inactiveSound:function(){var p=this;p._drain();for(var g=0;g<p._sounds.length;g++)if(p._sounds[g]._ended)return p._sounds[g].reset();return new l(p)},_drain:function(){var p=this,g=p._pool,v=0,w=0;if(!(p._sounds.length<g)){for(w=0;w<p._sounds.length;w++)p._sounds[w]._ended&&v++;for(w=p._sounds.length-1;w>=0;w--){if(v<=g)return;p._sounds[w]._ended&&(p._webAudio&&p._sounds[w]._node&&p._sounds[w]._node.disconnect(0),p._sounds.splice(w,1),v--)}}},_getSoundIds:function(p){var g=this;if(typeof p>"u"){for(var v=[],w=0;w<g._sounds.length;w++)v.push(g._sounds[w]._id);return v}else return[p]},_refreshBuffer:function(p){var g=this;return p._node.bufferSource=r.ctx.createBufferSource(),p._node.bufferSource.buffer=d[g._src],p._panner?p._node.bufferSource.connect(p._panner):p._node.bufferSource.connect(p._node),p._node.bufferSource.loop=p._loop,p._loop&&(p._node.bufferSource.loopStart=p._start||0,p._node.bufferSource.loopEnd=p._stop||0),p._node.bufferSource.playbackRate.setValueAtTime(p._rate,r.ctx.currentTime),g},_cleanBuffer:function(p){var g=this,v=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&p.bufferSource&&(p.bufferSource.onended=null,p.bufferSource.disconnect(0),v))try{p.bufferSource.buffer=r._scratchBuffer}catch(w){}return p.bufferSource=null,g},_clearSound:function(p){var g=/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent);g||(p.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var l=function(p){this._parent=p,this.init()};l.prototype={init:function(){var p=this,g=p._parent;return p._muted=g._muted,p._loop=g._loop,p._volume=g._volume,p._rate=g._rate,p._seek=0,p._paused=!0,p._ended=!0,p._sprite="__default",p._id=++r._counter,g._sounds.push(p),p.create(),p},create:function(){var p=this,g=p._parent,v=r._muted||p._muted||p._parent._muted?0:p._volume;return g._webAudio?(p._node=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),p._node.gain.setValueAtTime(v,r.ctx.currentTime),p._node.paused=!0,p._node.connect(r.masterGain)):r.noAudio||(p._node=r._obtainHtml5Audio(),p._errorFn=p._errorListener.bind(p),p._node.addEventListener("error",p._errorFn,!1),p._loadFn=p._loadListener.bind(p),p._node.addEventListener(r._canPlayEvent,p._loadFn,!1),p._endFn=p._endListener.bind(p),p._node.addEventListener("ended",p._endFn,!1),p._node.src=g._src,p._node.preload=g._preload===!0?"auto":g._preload,p._node.volume=v*r.volume(),p._node.load()),p},reset:function(){var p=this,g=p._parent;return p._muted=g._muted,p._loop=g._loop,p._volume=g._volume,p._rate=g._rate,p._seek=0,p._rateSeek=0,p._paused=!0,p._ended=!0,p._sprite="__default",p._id=++r._counter,p},_errorListener:function(){var p=this;p._parent._emit("loaderror",p._id,p._node.error?p._node.error.code:0),p._node.removeEventListener("error",p._errorFn,!1)},_loadListener:function(){var p=this,g=p._parent;g._duration=Math.ceil(p._node.duration*10)/10,Object.keys(g._sprite).length===0&&(g._sprite={__default:[0,g._duration*1e3]}),g._state!=="loaded"&&(g._state="loaded",g._emit("load"),g._loadQueue()),p._node.removeEventListener(r._canPlayEvent,p._loadFn,!1)},_endListener:function(){var p=this,g=p._parent;g._duration===1/0&&(g._duration=Math.ceil(p._node.duration*10)/10,g._sprite.__default[1]===1/0&&(g._sprite.__default[1]=g._duration*1e3),g._ended(p)),p._node.removeEventListener("ended",p._endFn,!1)}};var d={},c=function(p){var g=p._src;if(d[g]){p._duration=d[g].duration,f(p);return}if(/^data:[^;]+;base64,/.test(g)){for(var v=atob(g.split(",")[1]),w=new Uint8Array(v.length),x=0;x<v.length;++x)w[x]=v.charCodeAt(x);h(w.buffer,p)}else{var _=new XMLHttpRequest;_.open(p._xhr.method,g,!0),_.withCredentials=p._xhr.withCredentials,_.responseType="arraybuffer",p._xhr.headers&&Object.keys(p._xhr.headers).forEach(function(k){_.setRequestHeader(k,p._xhr.headers[k])}),_.onload=function(){var k=(_.status+"")[0];if(k!=="0"&&k!=="2"&&k!=="3"){p._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}h(_.response,p)},_.onerror=function(){p._webAudio&&(p._html5=!0,p._webAudio=!1,p._sounds=[],delete d[g],p.load())},u(_)}},u=function(p){try{p.send()}catch(g){p.onerror()}},h=function(p,g){var v=function(){g._emit("loaderror",null,"Decoding audio data failed.")},w=function(x){x&&g._sounds.length>0?(d[g._src]=x,f(g,x)):v()};typeof Promise<"u"&&r.ctx.decodeAudioData.length===1?r.ctx.decodeAudioData(p).then(w).catch(v):r.ctx.decodeAudioData(p,w,v)},f=function(p,g){g&&!p._duration&&(p._duration=g.duration),Object.keys(p._sprite).length===0&&(p._sprite={__default:[0,p._duration*1e3]}),p._state!=="loaded"&&(p._state="loaded",p._emit("load"),p._loadQueue())},m=function(){if(r.usingWebAudio){try{typeof AudioContext<"u"?r.ctx=new AudioContext:typeof webkitAudioContext<"u"?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(x){r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var p=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),g=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),v=g?parseInt(g[1],10):null;if(p&&v&&v<9){var w=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!w&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=typeof r.ctx.createGain>"u"?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:r,Howl:s}}),typeof t<"u"&&(t.Howler=r,t.Howl=s),typeof global<"u"?(global.HowlerGlobal=i,global.Howler=r,global.Howl=s,global.Sound=l):typeof window<"u"&&(window.HowlerGlobal=i,window.Howler=r,window.Howl=s,window.Sound=l)})(),function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(r){var s=this;if(!s.ctx||!s.ctx.listener)return s;for(var l=s._howls.length-1;l>=0;l--)s._howls[l].stereo(r);return s},HowlerGlobal.prototype.pos=function(r,s,l){var d=this;if(!d.ctx||!d.ctx.listener)return d;if(s=typeof s!="number"?d._pos[1]:s,l=typeof l!="number"?d._pos[2]:l,typeof r=="number")d._pos=[r,s,l],typeof d.ctx.listener.positionX<"u"?(d.ctx.listener.positionX.setTargetAtTime(d._pos[0],Howler.ctx.currentTime,.1),d.ctx.listener.positionY.setTargetAtTime(d._pos[1],Howler.ctx.currentTime,.1),d.ctx.listener.positionZ.setTargetAtTime(d._pos[2],Howler.ctx.currentTime,.1)):d.ctx.listener.setPosition(d._pos[0],d._pos[1],d._pos[2]);else return d._pos;return d},HowlerGlobal.prototype.orientation=function(r,s,l,d,c,u){var h=this;if(!h.ctx||!h.ctx.listener)return h;var f=h._orientation;if(s=typeof s!="number"?f[1]:s,l=typeof l!="number"?f[2]:l,d=typeof d!="number"?f[3]:d,c=typeof c!="number"?f[4]:c,u=typeof u!="number"?f[5]:u,typeof r=="number")h._orientation=[r,s,l,d,c,u],typeof h.ctx.listener.forwardX<"u"?(h.ctx.listener.forwardX.setTargetAtTime(r,Howler.ctx.currentTime,.1),h.ctx.listener.forwardY.setTargetAtTime(s,Howler.ctx.currentTime,.1),h.ctx.listener.forwardZ.setTargetAtTime(l,Howler.ctx.currentTime,.1),h.ctx.listener.upX.setTargetAtTime(d,Howler.ctx.currentTime,.1),h.ctx.listener.upY.setTargetAtTime(c,Howler.ctx.currentTime,.1),h.ctx.listener.upZ.setTargetAtTime(u,Howler.ctx.currentTime,.1)):h.ctx.listener.setOrientation(r,s,l,d,c,u);else return f;return h},Howl.prototype.init=function(r){return function(s){var l=this;return l._orientation=s.orientation||[1,0,0],l._stereo=s.stereo||null,l._pos=s.pos||null,l._pannerAttr={coneInnerAngle:typeof s.coneInnerAngle<"u"?s.coneInnerAngle:360,coneOuterAngle:typeof s.coneOuterAngle<"u"?s.coneOuterAngle:360,coneOuterGain:typeof s.coneOuterGain<"u"?s.coneOuterGain:0,distanceModel:typeof s.distanceModel<"u"?s.distanceModel:"inverse",maxDistance:typeof s.maxDistance<"u"?s.maxDistance:1e4,panningModel:typeof s.panningModel<"u"?s.panningModel:"HRTF",refDistance:typeof s.refDistance<"u"?s.refDistance:1,rolloffFactor:typeof s.rolloffFactor<"u"?s.rolloffFactor:1},l._onstereo=s.onstereo?[{fn:s.onstereo}]:[],l._onpos=s.onpos?[{fn:s.onpos}]:[],l._onorientation=s.onorientation?[{fn:s.onorientation}]:[],r.call(this,s)}}(Howl.prototype.init),Howl.prototype.stereo=function(r,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"stereo",action:function(){l.stereo(r,s)}}),l;var d=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof s>"u")if(typeof r=="number")l._stereo=r,l._pos=[r,0,0];else return l._stereo;for(var c=l._getSoundIds(s),u=0;u<c.length;u++){var h=l._soundById(c[u]);if(h)if(typeof r=="number")h._stereo=r,h._pos=[r,0,0],h._node&&(h._pannerAttr.panningModel="equalpower",(!h._panner||!h._panner.pan)&&i(h,d),d==="spatial"?typeof h._panner.positionX<"u"?(h._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):h._panner.setPosition(r,0,0):h._panner.pan.setValueAtTime(r,Howler.ctx.currentTime)),l._emit("stereo",h._id);else return h._stereo}return l},Howl.prototype.pos=function(r,s,l,d){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"pos",action:function(){c.pos(r,s,l,d)}}),c;if(s=typeof s!="number"?0:s,l=typeof l!="number"?-.5:l,typeof d>"u")if(typeof r=="number")c._pos=[r,s,l];else return c._pos;for(var u=c._getSoundIds(d),h=0;h<u.length;h++){var f=c._soundById(u[h]);if(f)if(typeof r=="number")f._pos=[r,s,l],f._node&&((!f._panner||f._panner.pan)&&i(f,"spatial"),typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(r,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(s,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(l,Howler.ctx.currentTime)):f._panner.setPosition(r,s,l)),c._emit("pos",f._id);else return f._pos}return c},Howl.prototype.orientation=function(r,s,l,d){var c=this;if(!c._webAudio)return c;if(c._state!=="loaded")return c._queue.push({event:"orientation",action:function(){c.orientation(r,s,l,d)}}),c;if(s=typeof s!="number"?c._orientation[1]:s,l=typeof l!="number"?c._orientation[2]:l,typeof d>"u")if(typeof r=="number")c._orientation=[r,s,l];else return c._orientation;for(var u=c._getSoundIds(d),h=0;h<u.length;h++){var f=c._soundById(u[h]);if(f)if(typeof r=="number")f._orientation=[r,s,l],f._node&&(f._panner||(f._pos||(f._pos=c._pos||[0,0,-.5]),i(f,"spatial")),typeof f._panner.orientationX<"u"?(f._panner.orientationX.setValueAtTime(r,Howler.ctx.currentTime),f._panner.orientationY.setValueAtTime(s,Howler.ctx.currentTime),f._panner.orientationZ.setValueAtTime(l,Howler.ctx.currentTime)):f._panner.setOrientation(r,s,l)),c._emit("orientation",f._id);else return f._orientation}return c},Howl.prototype.pannerAttr=function(){var r=this,s=arguments,l,d,c;if(!r._webAudio)return r;if(s.length===0)return r._pannerAttr;if(s.length===1)if(typeof s[0]=="object")l=s[0],typeof d>"u"&&(l.pannerAttr||(l.pannerAttr={coneInnerAngle:l.coneInnerAngle,coneOuterAngle:l.coneOuterAngle,coneOuterGain:l.coneOuterGain,distanceModel:l.distanceModel,maxDistance:l.maxDistance,refDistance:l.refDistance,rolloffFactor:l.rolloffFactor,panningModel:l.panningModel}),r._pannerAttr={coneInnerAngle:typeof l.pannerAttr.coneInnerAngle<"u"?l.pannerAttr.coneInnerAngle:r._coneInnerAngle,coneOuterAngle:typeof l.pannerAttr.coneOuterAngle<"u"?l.pannerAttr.coneOuterAngle:r._coneOuterAngle,coneOuterGain:typeof l.pannerAttr.coneOuterGain<"u"?l.pannerAttr.coneOuterGain:r._coneOuterGain,distanceModel:typeof l.pannerAttr.distanceModel<"u"?l.pannerAttr.distanceModel:r._distanceModel,maxDistance:typeof l.pannerAttr.maxDistance<"u"?l.pannerAttr.maxDistance:r._maxDistance,refDistance:typeof l.pannerAttr.refDistance<"u"?l.pannerAttr.refDistance:r._refDistance,rolloffFactor:typeof l.pannerAttr.rolloffFactor<"u"?l.pannerAttr.rolloffFactor:r._rolloffFactor,panningModel:typeof l.pannerAttr.panningModel<"u"?l.pannerAttr.panningModel:r._panningModel});else return c=r._soundById(parseInt(s[0],10)),c?c._pannerAttr:r._pannerAttr;else s.length===2&&(l=s[0],d=parseInt(s[1],10));for(var u=r._getSoundIds(d),h=0;h<u.length;h++)if(c=r._soundById(u[h]),c){var f=c._pannerAttr;f={coneInnerAngle:typeof l.coneInnerAngle<"u"?l.coneInnerAngle:f.coneInnerAngle,coneOuterAngle:typeof l.coneOuterAngle<"u"?l.coneOuterAngle:f.coneOuterAngle,coneOuterGain:typeof l.coneOuterGain<"u"?l.coneOuterGain:f.coneOuterGain,distanceModel:typeof l.distanceModel<"u"?l.distanceModel:f.distanceModel,maxDistance:typeof l.maxDistance<"u"?l.maxDistance:f.maxDistance,refDistance:typeof l.refDistance<"u"?l.refDistance:f.refDistance,rolloffFactor:typeof l.rolloffFactor<"u"?l.rolloffFactor:f.rolloffFactor,panningModel:typeof l.panningModel<"u"?l.panningModel:f.panningModel};var m=c._panner;m?(m.coneInnerAngle=f.coneInnerAngle,m.coneOuterAngle=f.coneOuterAngle,m.coneOuterGain=f.coneOuterGain,m.distanceModel=f.distanceModel,m.maxDistance=f.maxDistance,m.refDistance=f.refDistance,m.rolloffFactor=f.rolloffFactor,m.panningModel=f.panningModel):(c._pos||(c._pos=r._pos||[0,0,-.5]),i(c,"spatial"))}return r},Sound.prototype.init=function(r){return function(){var s=this,l=s._parent;s._orientation=l._orientation,s._stereo=l._stereo,s._pos=l._pos,s._pannerAttr=l._pannerAttr,r.call(this),s._stereo?l.stereo(s._stereo):s._pos&&l.pos(s._pos[0],s._pos[1],s._pos[2],s._id)}}(Sound.prototype.init),Sound.prototype.reset=function(r){return function(){var s=this,l=s._parent;return s._orientation=l._orientation,s._stereo=l._stereo,s._pos=l._pos,s._pannerAttr=l._pannerAttr,s._stereo?l.stereo(s._stereo):s._pos?l.pos(s._pos[0],s._pos[1],s._pos[2],s._id):s._panner&&(s._panner.disconnect(0),s._panner=void 0,l._refreshBuffer(s)),r.call(this)}}(Sound.prototype.reset);var i=function(r,s){s=s||"spatial",s==="spatial"?(r._panner=Howler.ctx.createPanner(),r._panner.coneInnerAngle=r._pannerAttr.coneInnerAngle,r._panner.coneOuterAngle=r._pannerAttr.coneOuterAngle,r._panner.coneOuterGain=r._pannerAttr.coneOuterGain,r._panner.distanceModel=r._pannerAttr.distanceModel,r._panner.maxDistance=r._pannerAttr.maxDistance,r._panner.refDistance=r._pannerAttr.refDistance,r._panner.rolloffFactor=r._pannerAttr.rolloffFactor,r._panner.panningModel=r._pannerAttr.panningModel,typeof r._panner.positionX<"u"?(r._panner.positionX.setValueAtTime(r._pos[0],Howler.ctx.currentTime),r._panner.positionY.setValueAtTime(r._pos[1],Howler.ctx.currentTime),r._panner.positionZ.setValueAtTime(r._pos[2],Howler.ctx.currentTime)):r._panner.setPosition(r._pos[0],r._pos[1],r._pos[2]),typeof r._panner.orientationX<"u"?(r._panner.orientationX.setValueAtTime(r._orientation[0],Howler.ctx.currentTime),r._panner.orientationY.setValueAtTime(r._orientation[1],Howler.ctx.currentTime),r._panner.orientationZ.setValueAtTime(r._orientation[2],Howler.ctx.currentTime)):r._panner.setOrientation(r._orientation[0],r._orientation[1],r._orientation[2])):(r._panner=Howler.ctx.createStereoPanner(),r._panner.pan.setValueAtTime(r._stereo,Howler.ctx.currentTime)),r._panner.connect(r._node),r._paused||r._parent.pause(r._id,!0).play(r._id,!0)}}()}),TS=Fr((t,i)=>{"use strict";function r(s){for(var l=new Array(s),d=0;d<s;++d)l[d]=d;return l}i.exports=r}),DS=Fr((t,i)=>{i.exports=function(l){return l!=null&&(r(l)||s(l)||!!l._isBuffer)};function r(l){return!!l.constructor&&typeof l.constructor.isBuffer=="function"&&l.constructor.isBuffer(l)}function s(l){return typeof l.readFloatLE=="function"&&typeof l.slice=="function"&&r(l.slice(0,0))}}),Lu=Fr((t,i)=>{var r=TS(),s=DS(),l=typeof Float64Array<"u";function d(p,g){return p[0]-g[0]}function c(){var p=this.stride,g=new Array(p.length),v;for(v=0;v<g.length;++v)g[v]=[Math.abs(p[v]),v];g.sort(d);var w=new Array(g.length);for(v=0;v<w.length;++v)w[v]=g[v][1];return w}function u(p,g){var v=["View",g,"d",p].join("");g<0&&(v="View_Nil"+p);var w=p==="generic";if(g===-1){var x="function "+v+"(a){this.data=a;};var proto="+v+".prototype;proto.dtype='"+p+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+v+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+v+"(a){return new "+v+"(a);}",L=new Function(x);return L()}else if(g===0){var x="function "+v+"(a,d) {this.data = a;this.offset = d};var proto="+v+".prototype;proto.dtype='"+p+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+v+"_copy() {return new "+v+"(this.data,this.offset)};proto.pick=function "+v+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+v+"_get(){return "+(w?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+v+"_set(v){return "+(w?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+v+"(a,b,c,d){return new "+v+"(a,d)}",L=new Function("TrivialArray",x);return L(f[p][0])}var x=["'use strict'"],_=r(g),k=_.map(function(B){return"i"+B}),A="this.offset+"+_.map(function(B){return"this.stride["+B+"]*i"+B}).join("+"),C=_.map(function(B){return"b"+B}).join(","),M=_.map(function(B){return"c"+B}).join(",");x.push("function "+v+"(a,"+C+","+M+",d){this.data=a","this.shape=["+C+"]","this.stride=["+M+"]","this.offset=d|0}","var proto="+v+".prototype","proto.dtype='"+p+"'","proto.dimension="+g),x.push("Object.defineProperty(proto,'size',{get:function "+v+"_size(){return "+_.map(function(B){return"this.shape["+B+"]"}).join("*"),"}})"),g===1?x.push("proto.order=[0]"):(x.push("Object.defineProperty(proto,'order',{get:"),g<4?(x.push("function "+v+"_order(){"),g===2?x.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):g===3&&x.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):x.push("ORDER})")),x.push("proto.set=function "+v+"_set("+k.join(",")+",v){"),w?x.push("return this.data.set("+A+",v)}"):x.push("return this.data["+A+"]=v}"),x.push("proto.get=function "+v+"_get("+k.join(",")+"){"),w?x.push("return this.data.get("+A+")}"):x.push("return this.data["+A+"]}"),x.push("proto.index=function "+v+"_index(",k.join(),"){return "+A+"}"),x.push("proto.hi=function "+v+"_hi("+k.join(",")+"){return new "+v+"(this.data,"+_.map(function(B){return["(typeof i",B,"!=='number'||i",B,"<0)?this.shape[",B,"]:i",B,"|0"].join("")}).join(",")+","+_.map(function(B){return"this.stride["+B+"]"}).join(",")+",this.offset)}");var D=_.map(function(B){return"a"+B+"=this.shape["+B+"]"}),P=_.map(function(B){return"c"+B+"=this.stride["+B+"]"});x.push("proto.lo=function "+v+"_lo("+k.join(",")+"){var b=this.offset,d=0,"+D.join(",")+","+P.join(","));for(var T=0;T<g;++T)x.push("if(typeof i"+T+"==='number'&&i"+T+">=0){d=i"+T+"|0;b+=c"+T+"*d;a"+T+"-=d}");x.push("return new "+v+"(this.data,"+_.map(function(B){return"a"+B}).join(",")+","+_.map(function(B){return"c"+B}).join(",")+",b)}"),x.push("proto.step=function "+v+"_step("+k.join(",")+"){var "+_.map(function(B){return"a"+B+"=this.shape["+B+"]"}).join(",")+","+_.map(function(B){return"b"+B+"=this.stride["+B+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var T=0;T<g;++T)x.push("if(typeof i"+T+"==='number'){d=i"+T+"|0;if(d<0){c+=b"+T+"*(a"+T+"-1);a"+T+"=ceil(-a"+T+"/d)}else{a"+T+"=ceil(a"+T+"/d)}b"+T+"*=d}");x.push("return new "+v+"(this.data,"+_.map(function(B){return"a"+B}).join(",")+","+_.map(function(B){return"b"+B}).join(",")+",c)}");for(var O=new Array(g),z=new Array(g),T=0;T<g;++T)O[T]="a[i"+T+"]",z[T]="b[i"+T+"]";x.push("proto.transpose=function "+v+"_transpose("+k+"){"+k.map(function(B,j){return B+"=("+B+"===undefined?"+j+":"+B+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+v+"(this.data,"+O.join(",")+","+z.join(",")+",this.offset)}"),x.push("proto.pick=function "+v+"_pick("+k+"){var a=[],b=[],c=this.offset");for(var T=0;T<g;++T)x.push("if(typeof i"+T+"==='number'&&i"+T+">=0){c=(c+this.stride["+T+"]*i"+T+")|0}else{a.push(this.shape["+T+"]);b.push(this.stride["+T+"])}");x.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),x.push("return function construct_"+v+"(data,shape,stride,offset){return new "+v+"(data,"+_.map(function(B){return"shape["+B+"]"}).join(",")+","+_.map(function(B){return"stride["+B+"]"}).join(",")+",offset)}");var L=new Function("CTOR_LIST","ORDER",x.join(`
`));return L(f[p],c)}function h(p){if(s(p))return"buffer";if(l)switch(Object.prototype.toString.call(p)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(p)?"array":"generic"}var f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function m(p,g,v,w){if(p===void 0){var M=f.array[0];return M([])}else typeof p=="number"&&(p=[p]);g===void 0&&(g=[p.length]);var x=g.length;if(v===void 0){v=new Array(x);for(var _=x-1,k=1;_>=0;--_)v[_]=k,k*=g[_]}if(w===void 0){w=0;for(var _=0;_<x;++_)v[_]<0&&(w-=(g[_]-1)*v[_])}for(var A=h(p),C=f[A];C.length<=x+1;)C.push(u(A,C.length-1));var M=C[x+1];return M(p,g,v,w)}i.exports=m}),PS=Fr((t,i)=>{"use strict";function r(d,c){for(var u=1,h=d.length,f=d[0],m=d[0],p=1;p<h;++p)if(m=f,f=d[p],c(f,m)){if(p===u){u++;continue}d[u++]=f}return d.length=u,d}function s(d){for(var c=1,u=d.length,h=d[0],f=d[0],m=1;m<u;++m,f=h)if(f=h,h=d[m],h!==f){if(m===c){c++;continue}d[c++]=h}return d.length=c,d}function l(d,c,u){return d.length===0?d:c?(u||d.sort(c),r(d,c)):(u||d.sort(),s(d))}i.exports=l}),$g=Fr((t,i)=>{"use strict";var r=PS();function s(f,m,p){var g=f.length,v=m.arrayArgs.length,w=m.indexArgs.length>0,x=[],_=[],k=0,A=0,C,M;for(C=0;C<g;++C)_.push(["i",C,"=0"].join(""));for(M=0;M<v;++M)for(C=0;C<g;++C)A=k,k=f[C],C===0?_.push(["d",M,"s",C,"=t",M,"p",k].join("")):_.push(["d",M,"s",C,"=(t",M,"p",k,"-s",A,"*t",M,"p",A,")"].join(""));for(_.length>0&&x.push("var "+_.join(",")),C=g-1;C>=0;--C)k=f[C],x.push(["for(i",C,"=0;i",C,"<s",k,";++i",C,"){"].join(""));for(x.push(p),C=0;C<g;++C){for(A=k,k=f[C],M=0;M<v;++M)x.push(["p",M,"+=d",M,"s",C].join(""));w&&(C>0&&x.push(["index[",A,"]-=s",A].join("")),x.push(["++index[",k,"]"].join(""))),x.push("}")}return x.join(`
`)}function l(f,m,p,g){for(var v=m.length,w=p.arrayArgs.length,x=p.blockSize,_=p.indexArgs.length>0,k=[],A=0;A<w;++A)k.push(["var offset",A,"=p",A].join(""));for(var A=f;A<v;++A)k.push(["for(var j"+A+"=SS[",m[A],"]|0;j",A,">0;){"].join("")),k.push(["if(j",A,"<",x,"){"].join("")),k.push(["s",m[A],"=j",A].join("")),k.push(["j",A,"=0"].join("")),k.push(["}else{s",m[A],"=",x].join("")),k.push(["j",A,"-=",x,"}"].join("")),_&&k.push(["index[",m[A],"]=j",A].join(""));for(var A=0;A<w;++A){for(var C=["offset"+A],M=f;M<v;++M)C.push(["j",M,"*t",A,"p",m[M]].join(""));k.push(["p",A,"=(",C.join("+"),")"].join(""))}k.push(s(m,p,g));for(var A=f;A<v;++A)k.push("}");return k.join(`
`)}function d(f){for(var m=0,p=f[0].length;m<p;){for(var g=1;g<f.length;++g)if(f[g][m]!==f[0][m])return m;++m}return m}function c(f,m,p){for(var g=f.body,v=[],w=[],x=0;x<f.args.length;++x){var _=f.args[x];if(!(_.count<=0)){var k=new RegExp(_.name,"g"),A="",C=m.arrayArgs.indexOf(x);switch(m.argTypes[x]){case"offset":var M=m.offsetArgIndex.indexOf(x),D=m.offsetArgs[M];C=D.array,A="+q"+M;case"array":A="p"+C+A;var P="l"+x,T="a"+C;if(m.arrayBlockIndices[C]===0)_.count===1?p[C]==="generic"?_.lvalue?(v.push(["var ",P,"=",T,".get(",A,")"].join("")),g=g.replace(k,P),w.push([T,".set(",A,",",P,")"].join(""))):g=g.replace(k,[T,".get(",A,")"].join("")):g=g.replace(k,[T,"[",A,"]"].join("")):p[C]==="generic"?(v.push(["var ",P,"=",T,".get(",A,")"].join("")),g=g.replace(k,P),_.lvalue&&w.push([T,".set(",A,",",P,")"].join(""))):(v.push(["var ",P,"=",T,"[",A,"]"].join("")),g=g.replace(k,P),_.lvalue&&w.push([T,"[",A,"]=",P].join("")));else{for(var O=[_.name],z=[A],L=0;L<Math.abs(m.arrayBlockIndices[C]);L++)O.push("\\s*\\[([^\\]]+)\\]"),z.push("$"+(L+1)+"*t"+C+"b"+L);if(k=new RegExp(O.join(""),"g"),A=z.join("+"),p[C]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");g=g.replace(k,[T,"[",A,"]"].join(""))}break;case"scalar":g=g.replace(k,"Y"+m.scalarArgs.indexOf(x));break;case"index":g=g.replace(k,"index");break;case"shape":g=g.replace(k,"shape");break}}}return[v.join(`
`),g,w.join(`
`)].join(`
`).trim()}function u(f){for(var m=new Array(f.length),p=!0,g=0;g<f.length;++g){var v=f[g],w=v.match(/\d+/);w?w=w[0]:w="",v.charAt(0)===0?m[g]="u"+v.charAt(1)+w:m[g]=v.charAt(0)+w,g>0&&(p=p&&m[g]===m[g-1])}return p?m[0]:m.join("")}function h(f,m){for(var p=m[1].length-Math.abs(f.arrayBlockIndices[0])|0,g=new Array(f.arrayArgs.length),v=new Array(f.arrayArgs.length),w=0;w<f.arrayArgs.length;++w)v[w]=m[2*w],g[w]=m[2*w+1];for(var x=[],_=[],k=[],A=[],C=[],w=0;w<f.arrayArgs.length;++w){f.arrayBlockIndices[w]<0?(k.push(0),A.push(p),x.push(p),_.push(p+f.arrayBlockIndices[w])):(k.push(f.arrayBlockIndices[w]),A.push(f.arrayBlockIndices[w]+p),x.push(0),_.push(f.arrayBlockIndices[w]));for(var M=[],D=0;D<g[w].length;D++)k[w]<=g[w][D]&&g[w][D]<A[w]&&M.push(g[w][D]-k[w]);C.push(M)}for(var P=["SS"],T=["'use strict'"],O=[],D=0;D<p;++D)O.push(["s",D,"=SS[",D,"]"].join(""));for(var w=0;w<f.arrayArgs.length;++w){P.push("a"+w),P.push("t"+w),P.push("p"+w);for(var D=0;D<p;++D)O.push(["t",w,"p",D,"=t",w,"[",k[w]+D,"]"].join(""));for(var D=0;D<Math.abs(f.arrayBlockIndices[w]);++D)O.push(["t",w,"b",D,"=t",w,"[",x[w]+D,"]"].join(""))}for(var w=0;w<f.scalarArgs.length;++w)P.push("Y"+w);if(f.shapeArgs.length>0&&O.push("shape=SS.slice(0)"),f.indexArgs.length>0){for(var z=new Array(p),w=0;w<p;++w)z[w]="0";O.push(["index=[",z.join(","),"]"].join(""))}for(var w=0;w<f.offsetArgs.length;++w){for(var L=f.offsetArgs[w],B=[],D=0;D<L.offset.length;++D)L.offset[D]!==0&&(L.offset[D]===1?B.push(["t",L.array,"p",D].join("")):B.push([L.offset[D],"*t",L.array,"p",D].join("")));B.length===0?O.push("q"+w+"=0"):O.push(["q",w,"=",B.join("+")].join(""))}var j=r([].concat(f.pre.thisVars).concat(f.body.thisVars).concat(f.post.thisVars));O=O.concat(j),O.length>0&&T.push("var "+O.join(","));for(var w=0;w<f.arrayArgs.length;++w)T.push("p"+w+"|=0");f.pre.body.length>3&&T.push(c(f.pre,f,v));var V=c(f.body,f,v),H=d(C);H<p?T.push(l(H,C[0],f,V)):T.push(s(C[0],f,V)),f.post.body.length>3&&T.push(c(f.post,f,v)),f.debug&&console.log("-----Generated cwise routine for ",m,`:
`+T.join(`
`)+`
----------`);var Y=[f.funcName||"unnamed","_cwise_loop_",g[0].join("s"),"m",H,u(v)].join(""),se=new Function(["function ",Y,"(",P.join(","),"){",T.join(`
`),"} return ",Y].join(""));return se()}i.exports=h}),OS=Fr((t,i)=>{"use strict";var r=$g();function s(l){var d=["'use strict'","var CACHED={}"],c=[],u=l.funcName+"_cwise_thunk";d.push(["return function ",u,"(",l.shimArgs.join(","),"){"].join(""));for(var h=[],f=[],m=[["array",l.arrayArgs[0],".shape.slice(",Math.max(0,l.arrayBlockIndices[0]),l.arrayBlockIndices[0]<0?","+l.arrayBlockIndices[0]+")":")"].join("")],p=[],g=[],v=0;v<l.arrayArgs.length;++v){var w=l.arrayArgs[v];c.push(["t",w,"=array",w,".dtype,","r",w,"=array",w,".order"].join("")),h.push("t"+w),h.push("r"+w),f.push("t"+w),f.push("r"+w+".join()"),m.push("array"+w+".data"),m.push("array"+w+".stride"),m.push("array"+w+".offset|0"),v>0&&(p.push("array"+l.arrayArgs[0]+".shape.length===array"+w+".shape.length+"+(Math.abs(l.arrayBlockIndices[0])-Math.abs(l.arrayBlockIndices[v]))),g.push("array"+l.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,l.arrayBlockIndices[0])+"]===array"+w+".shape[shapeIndex+"+Math.max(0,l.arrayBlockIndices[v])+"]"))}l.arrayArgs.length>1&&(d.push("if (!("+p.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),d.push("for(var shapeIndex=array"+l.arrayArgs[0]+".shape.length-"+Math.abs(l.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),d.push("if (!("+g.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),d.push("}"));for(var v=0;v<l.scalarArgs.length;++v)m.push("scalar"+l.scalarArgs[v]);c.push(["type=[",f.join(","),"].join()"].join("")),c.push("proc=CACHED[type]"),d.push("var "+c.join(",")),d.push(["if(!proc){","CACHED[type]=proc=compile([",h.join(","),"])}","return proc(",m.join(","),")}"].join("")),l.debug&&console.log(`-----Generated thunk:
`+d.join(`
`)+`
----------`);var x=new Function("compile",d.join(`
`));return x(r.bind(void 0,l))}i.exports=s}),Vb=Fr((t,i)=>{"use strict";var r=OS();function s(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function l(d){var c=new s;c.pre=d.pre,c.body=d.body,c.post=d.post;var u=d.args.slice(0);c.argTypes=u;for(var h=0;h<u.length;++h){var f=u[h];if(f==="array"||typeof f=="object"&&f.blockIndices){if(c.argTypes[h]="array",c.arrayArgs.push(h),c.arrayBlockIndices.push(f.blockIndices?f.blockIndices:0),c.shimArgs.push("array"+h),h<c.pre.args.length&&c.pre.args[h].count>0)throw new Error("cwise: pre() block may not reference array args");if(h<c.post.args.length&&c.post.args[h].count>0)throw new Error("cwise: post() block may not reference array args")}else if(f==="scalar")c.scalarArgs.push(h),c.shimArgs.push("scalar"+h);else if(f==="index"){if(c.indexArgs.push(h),h<c.pre.args.length&&c.pre.args[h].count>0)throw new Error("cwise: pre() block may not reference array index");if(h<c.body.args.length&&c.body.args[h].lvalue)throw new Error("cwise: body() block may not write to array index");if(h<c.post.args.length&&c.post.args[h].count>0)throw new Error("cwise: post() block may not reference array index")}else if(f==="shape"){if(c.shapeArgs.push(h),h<c.pre.args.length&&c.pre.args[h].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(h<c.body.args.length&&c.body.args[h].lvalue)throw new Error("cwise: body() block may not write to array shape");if(h<c.post.args.length&&c.post.args[h].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof f=="object"&&f.offset)c.argTypes[h]="offset",c.offsetArgs.push({array:f.array,offset:f.offset}),c.offsetArgIndex.push(h);else throw new Error("cwise: Unknown argument type "+u[h])}if(c.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(c.pre.args.length>u.length)throw new Error("cwise: Too many arguments in pre() block");if(c.body.args.length>u.length)throw new Error("cwise: Too many arguments in body() block");if(c.post.args.length>u.length)throw new Error("cwise: Too many arguments in post() block");return c.debug=!!d.printCode||!!d.debug,c.funcName=d.funcName||"cwise",c.blockSize=d.blockSize||64,r(c)}i.exports=l}),ud=Fr(t=>{"use strict";var i=Vb(),r={body:"",args:[],thisVars:[],localVars:[]};function s(g){if(!g)return r;for(var v=0;v<g.args.length;++v){var w=g.args[v];v===0?g.args[v]={name:w,lvalue:!0,rvalue:!!g.rvalue,count:g.count||1}:g.args[v]={name:w,lvalue:!1,rvalue:!0,count:1}}return g.thisVars||(g.thisVars=[]),g.localVars||(g.localVars=[]),g}function l(g){return i({args:g.args,pre:s(g.pre),body:s(g.body),post:s(g.proc),funcName:g.funcName})}function d(g){for(var v=[],w=0;w<g.args.length;++w)v.push("a"+w);var x=new Function("P",["return function ",g.funcName,"_ndarrayops(",v.join(","),") {P(",v.join(","),");return a0}"].join(""));return x(l(g))}var c={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var g in c){var v=c[g];t[g]=d({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+v+"c"},funcName:g}),t[g+"eq"]=d({args:["array","array"],body:{args:["a","b"],body:"a"+v+"=b"},rvalue:!0,funcName:g+"eq"}),t[g+"s"]=d({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+v+"s"},funcName:g+"s"}),t[g+"seq"]=d({args:["array","scalar"],body:{args:["a","s"],body:"a"+v+"=s"},rvalue:!0,funcName:g+"seq"})}})();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var g in u){var v=u[g];t[g]=d({args:["array","array"],body:{args:["a","b"],body:"a="+v+"b"},funcName:g}),t[g+"eq"]=d({args:["array"],body:{args:["a"],body:"a="+v+"a"},rvalue:!0,count:2,funcName:g+"eq"})}})();var h={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var g in h){var v=h[g];t[g]=d({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+v+"c"},funcName:g}),t[g+"s"]=d({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+v+"s"},funcName:g+"s"}),t[g+"eq"]=d({args:["array","array"],body:{args:["a","b"],body:"a=a"+v+"b"},rvalue:!0,count:2,funcName:g+"eq"}),t[g+"seq"]=d({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+v+"s"},rvalue:!0,count:2,funcName:g+"seq"})}})();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var g=0;g<f.length;++g){var v=f[g];t[v]=d({args:["array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:v}),t[v+"eq"]=d({args:["array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:v+"eq"})}})();var m=["max","min","atan2","pow"];(function(){for(var g=0;g<m.length;++g){var v=m[g];t[v]=d({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:v}),t[v+"s"]=d({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:v+"s"}),t[v+"eq"]=d({args:["array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:v+"eq"}),t[v+"seq"]=d({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:v+"seq"})}})();var p=["atan2","pow"];(function(){for(var g=0;g<p.length;++g){var v=p[g];t[v+"op"]=d({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:v+"op"}),t[v+"ops"]=d({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:v+"ops"}),t[v+"opeq"]=d({args:["array","array"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:v+"opeq"}),t[v+"opseq"]=d({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+v,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:v+"opseq"})}})(),t.any=i({args:["array"],pre:r,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=i({args:["array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=i({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=i({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=i({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=i({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=i({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=d({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=d({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=d({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=i({args:["array","array"],pre:r,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})}),IS=Fr((t,i)=>{i.exports=function(r,s){for(var l=r.split("."),d=s.split("."),c=0;c<3;c++){var u=Number(l[c]),h=Number(d[c]);if(u>h)return 1;if(h>u)return-1;if(!isNaN(u)&&isNaN(h))return 1;if(isNaN(u)&&!isNaN(h))return-1}return 0}}),uc="149",Da={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Rn=0,Mf=1,Tf=2,Zg=1,Yg=2,hc=3,qs=0,qn=1,ta=2,$n=0,pl=1,Hb=2,RS=3,Xg=4,zS=5,fc=100,Gb=101,LS=102,Wb=103,Kg=104,BS=200,xD=201,_D=202,Qg=203,qb=204,FS=205,NS=206,$b=207,jS=208,US=209,Zb=210,pc=0,Df=1,kD=2,Jg=3,VS=4,ev=5,HS=6,GS=7,Yb=0,Xb=1,WS=2,Co=0,qS=1,Kb=2,$S=3,ZS=4,Qb=5,tv=300,mc=301,gc=302,iv=303,nv=304,Bu=306,Eo=1e3,Nn=1001,rv=1002,on=1003,Jb=1004,av=1005,yi=1006,YS=1007,vc=1008,Nr=1009,XS=1010,KS=1011,ew=1012,tw=1013,Mo=1014,ia=1015,yc=1016,SD=1017,AD=1018,hd=1020,QS=1021,Pa=1023,JS=1024,eA=1025,fd=1026,pd=1027,tA=1028,iA=1029,Fu=1030,nA=1031,Nu=1033,Pf=33776,iw=33777,sv=33778,ov=33779,nw=35840,rw=35841,aw=35842,sw=35843,rA=36196,ow=37492,lw=37496,dw=37808,lv=37809,dv=37810,cw=37811,uw=37812,hw=37813,fw=37814,aA=37815,sA=37816,pw=37817,oA=37818,cv=37819,mw=37820,gw=37821,uv=36492,lA=36283,vw=36284,yw=36285,bw=36286,ww=2200,xw=2201,hv=2202,ju=2300,Of=2301,fv=2302,md=2400,bc=2401,Uu=2402,pv=2500,dA=2501,$s=3e3,ci=3001,To=3200,_w=3201,kw=0,cA=1,As="srgb",gd="srgb-linear",mv=7680,uA=519,gv=35044,hA=35048,Sw="300 es",vv=1035,Cr=class{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});let r=this._listeners;r[t]===void 0&&(r[t]=[]),r[t].indexOf(i)===-1&&r[t].push(i)}hasEventListener(t,i){if(this._listeners===void 0)return!1;let r=this._listeners;return r[t]!==void 0&&r[t].indexOf(i)!==-1}removeEventListener(t,i){if(this._listeners===void 0)return;let r=this._listeners[t];if(r!==void 0){let s=r.indexOf(i);s!==-1&&r.splice(s,1)}}dispatchEvent(t){if(this._listeners===void 0)return;let i=this._listeners[t.type];if(i!==void 0){t.target=this;let r=i.slice(0);for(let s=0,l=r.length;s<l;s++)r[s].call(this,t);t.target=null}}},Er=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Aw=1234567,Vu=Math.PI/180,ml=180/Math.PI;function gr(){let t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,r=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(Er[t&255]+Er[t>>8&255]+Er[t>>16&255]+Er[t>>24&255]+"-"+Er[i&255]+Er[i>>8&255]+"-"+Er[i>>16&15|64]+Er[i>>24&255]+"-"+Er[r&63|128]+Er[r>>8&255]+"-"+Er[r>>16&255]+Er[r>>24&255]+Er[s&255]+Er[s>>8&255]+Er[s>>16&255]+Er[s>>24&255]).toLowerCase()}function Zn(t,i,r){return Math.max(i,Math.min(r,t))}function yv(t,i){return(t%i+i)%i}function fA(t,i,r,s,l){return s+(t-i)*(l-s)/(r-i)}function pA(t,i,r){return t!==i?(r-t)/(i-t):0}function Hu(t,i,r){return(1-r)*t+r*i}function mA(t,i,r,s){return Hu(t,i,1-Math.exp(-r*s))}function y(t,i=1){return i-Math.abs(yv(t,i*2)-i)}function b(t,i,r){return t<=i?0:t>=r?1:(t=(t-i)/(r-i),t*t*(3-2*t))}function S(t,i,r){return t<=i?0:t>=r?1:(t=(t-i)/(r-i),t*t*t*(t*(t*6-15)+10))}function E(t,i){return t+Math.floor(Math.random()*(i-t+1))}function I(t,i){return t+Math.random()*(i-t)}function F(t){return t*(.5-Math.random())}function U(t){t!==void 0&&(Aw=t);let i=Aw+=1831565813;return i=Math.imul(i^i>>>15,i|1),i^=i+Math.imul(i^i>>>7,i|61),((i^i>>>14)>>>0)/4294967296}function G(t){return t*Vu}function W(t){return t*ml}function K(t){return(t&t-1)===0&&t!==0}function ie(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function ue(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function me(t,i,r,s,l){let d=Math.cos,c=Math.sin,u=d(r/2),h=c(r/2),f=d((i+s)/2),m=c((i+s)/2),p=d((i-s)/2),g=c((i-s)/2),v=d((s-i)/2),w=c((s-i)/2);switch(l){case"XYX":t.set(u*m,h*p,h*g,u*f);break;case"YZY":t.set(h*g,u*m,h*p,u*f);break;case"ZXZ":t.set(h*p,h*g,u*m,u*f);break;case"XZX":t.set(u*m,h*w,h*v,u*f);break;case"YXY":t.set(h*v,u*m,h*w,u*f);break;case"ZYZ":t.set(h*w,h*v,u*m,u*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+l)}}function _e(t,i){switch(i.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ke(t,i){switch(i.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}var fe=Object.freeze({__proto__:null,DEG2RAD:Vu,RAD2DEG:ml,ceilPowerOfTwo:ie,clamp:Zn,damp:mA,degToRad:G,denormalize:_e,euclideanModulo:yv,floorPowerOfTwo:ue,generateUUID:gr,inverseLerp:pA,isPowerOfTwo:K,lerp:Hu,mapLinear:fA,normalize:ke,pingpong:y,radToDeg:W,randFloat:I,randFloatSpread:F,randInt:E,seededRandom:U,setQuaternionFromProperEuler:me,smootherstep:S,smoothstep:b}),q=class{constructor(t=0,i=0){q.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let i=this.x,r=this.y,s=t.elements;return this.x=s[0]*i+s[3]*r+s[6],this.y=s[1]*i+s[4]*r+s[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this}clampLength(t,i){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let i=this.x-t.x,r=this.y-t.y;return i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){let r=Math.cos(i),s=Math.sin(i),l=this.x-t.x,d=this.y-t.y;return this.x=l*r-d*s+t.x,this.y=l*s+d*r+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Me=class{constructor(){Me.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(t,i,r,s,l,d,c,u,h){let f=this.elements;return f[0]=t,f[1]=s,f[2]=c,f[3]=i,f[4]=l,f[5]=u,f[6]=r,f[7]=d,f[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let i=this.elements,r=t.elements;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],this}extractBasis(t,i,r){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){let r=t.elements,s=i.elements,l=this.elements,d=r[0],c=r[3],u=r[6],h=r[1],f=r[4],m=r[7],p=r[2],g=r[5],v=r[8],w=s[0],x=s[3],_=s[6],k=s[1],A=s[4],C=s[7],M=s[2],D=s[5],P=s[8];return l[0]=d*w+c*k+u*M,l[3]=d*x+c*A+u*D,l[6]=d*_+c*C+u*P,l[1]=h*w+f*k+m*M,l[4]=h*x+f*A+m*D,l[7]=h*_+f*C+m*P,l[2]=p*w+g*k+v*M,l[5]=p*x+g*A+v*D,l[8]=p*_+g*C+v*P,this}multiplyScalar(t){let i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){let t=this.elements,i=t[0],r=t[1],s=t[2],l=t[3],d=t[4],c=t[5],u=t[6],h=t[7],f=t[8];return i*d*f-i*c*h-r*l*f+r*c*u+s*l*h-s*d*u}invert(){let t=this.elements,i=t[0],r=t[1],s=t[2],l=t[3],d=t[4],c=t[5],u=t[6],h=t[7],f=t[8],m=f*d-c*h,p=c*u-f*l,g=h*l-d*u,v=i*m+r*p+s*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);let w=1/v;return t[0]=m*w,t[1]=(s*h-f*r)*w,t[2]=(c*r-s*d)*w,t[3]=p*w,t[4]=(f*i-s*u)*w,t[5]=(s*l-c*i)*w,t[6]=g*w,t[7]=(r*u-h*i)*w,t[8]=(d*i-r*l)*w,this}transpose(){let t,i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,r,s,l,d,c){let u=Math.cos(l),h=Math.sin(l);return this.set(r*u,r*h,-r*(u*d+h*c)+d+t,-s*h,s*u,-s*(-h*d+u*c)+c+i,0,0,1),this}scale(t,i){return this.premultiply(Oe.makeScale(t,i)),this}rotate(t){return this.premultiply(Oe.makeRotation(-t)),this}translate(t,i){return this.premultiply(Oe.makeTranslation(t,i)),this}makeTranslation(t,i){return this.set(1,0,t,0,1,i,0,0,1),this}makeRotation(t){let i=Math.cos(t),r=Math.sin(t);return this.set(i,-r,0,r,i,0,0,0,1),this}makeScale(t,i){return this.set(t,0,0,0,i,0,0,0,1),this}equals(t){let i=this.elements,r=t.elements;for(let s=0;s<9;s++)if(i[s]!==r[s])return!1;return!0}fromArray(t,i=0){for(let r=0;r<9;r++)this.elements[r]=t[r+i];return this}toArray(t=[],i=0){let r=this.elements;return t[i]=r[0],t[i+1]=r[1],t[i+2]=r[2],t[i+3]=r[3],t[i+4]=r[4],t[i+5]=r[5],t[i+6]=r[6],t[i+7]=r[7],t[i+8]=r[8],t}clone(){return new this.constructor().fromArray(this.elements)}},Oe=new Me;function tt(t){for(let i=t.length-1;i>=0;--i)if(t[i]>=65535)return!0;return!1}var Mt={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function li(t,i){return new Mt[t](i)}function gt(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function jt(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function mi(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}var di={[As]:{[gd]:jt},[gd]:{[As]:mi}},Ot={legacyMode:!0,get workingColorSpace(){return gd},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,i,r){if(this.legacyMode||i===r||!i||!r)return t;if(di[i]&&di[i][r]!==void 0){let s=di[i][r];return t.r=s(t.r),t.g=s(t.g),t.b=s(t.b),t}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(t,i){return this.convert(t,this.workingColorSpace,i)},toWorkingColorSpace:function(t,i){return this.convert(t,i,this.workingColorSpace)}},$t={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vt={r:0,g:0,b:0},xi={h:0,s:0,l:0},Bi={h:0,s:0,l:0};function Pi(t,i,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(i-t)*6*r:r<1/2?i:r<2/3?t+(i-t)*6*(2/3-r):t}function mn(t,i){return i.r=t.r,i.g=t.g,i.b=t.b,i}var _t=class{constructor(t,i,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,i===void 0&&r===void 0?this.set(t):this.setRGB(t,i,r)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=As){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Ot.toWorkingColorSpace(this,i),this}setRGB(t,i,r,s=Ot.workingColorSpace){return this.r=t,this.g=i,this.b=r,Ot.toWorkingColorSpace(this,s),this}setHSL(t,i,r,s=Ot.workingColorSpace){if(t=yv(t,1),i=Zn(i,0,1),r=Zn(r,0,1),i===0)this.r=this.g=this.b=r;else{let l=r<=.5?r*(1+i):r+i-r*i,d=2*r-l;this.r=Pi(d,l,t+1/3),this.g=Pi(d,l,t),this.b=Pi(d,l,t-1/3)}return Ot.toWorkingColorSpace(this,s),this}setStyle(t,i=As){function r(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let s;if(s=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let l,d=s[1],c=s[2];switch(d){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(255,parseInt(l[1],10))/255,this.g=Math.min(255,parseInt(l[2],10))/255,this.b=Math.min(255,parseInt(l[3],10))/255,Ot.toWorkingColorSpace(this,i),r(l[4]),this;if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return this.r=Math.min(100,parseInt(l[1],10))/100,this.g=Math.min(100,parseInt(l[2],10))/100,this.b=Math.min(100,parseInt(l[3],10))/100,Ot.toWorkingColorSpace(this,i),r(l[4]),this;break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c)){let u=parseFloat(l[1])/360,h=parseFloat(l[2])/100,f=parseFloat(l[3])/100;return r(l[4]),this.setHSL(u,h,f,i)}break}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(t)){let l=s[1],d=l.length;if(d===3)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,Ot.toWorkingColorSpace(this,i),this;if(d===6)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,Ot.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=As){let r=$t[t.toLowerCase()];return r!==void 0?this.setHex(r,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=jt(t.r),this.g=jt(t.g),this.b=jt(t.b),this}copyLinearToSRGB(t){return this.r=mi(t.r),this.g=mi(t.g),this.b=mi(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=As){return Ot.fromWorkingColorSpace(mn(this,vt),t),Zn(vt.r*255,0,255)<<16^Zn(vt.g*255,0,255)<<8^Zn(vt.b*255,0,255)<<0}getHexString(t=As){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=Ot.workingColorSpace){Ot.fromWorkingColorSpace(mn(this,vt),i);let r=vt.r,s=vt.g,l=vt.b,d=Math.max(r,s,l),c=Math.min(r,s,l),u,h,f=(c+d)/2;if(c===d)u=0,h=0;else{let m=d-c;switch(h=f<=.5?m/(d+c):m/(2-d-c),d){case r:u=(s-l)/m+(s<l?6:0);break;case s:u=(l-r)/m+2;break;case l:u=(r-s)/m+4;break}u/=6}return t.h=u,t.s=h,t.l=f,t}getRGB(t,i=Ot.workingColorSpace){return Ot.fromWorkingColorSpace(mn(this,vt),i),t.r=vt.r,t.g=vt.g,t.b=vt.b,t}getStyle(t=As){return Ot.fromWorkingColorSpace(mn(this,vt),t),t!==As?`color(${t} ${vt.r} ${vt.g} ${vt.b})`:`rgb(${vt.r*255|0},${vt.g*255|0},${vt.b*255|0})`}offsetHSL(t,i,r){return this.getHSL(xi),xi.h+=t,xi.s+=i,xi.l+=r,this.setHSL(xi.h,xi.s,xi.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,r){return this.r=t.r+(i.r-t.r)*r,this.g=t.g+(i.g-t.g)*r,this.b=t.b+(i.b-t.b)*r,this}lerpHSL(t,i){this.getHSL(xi),t.getHSL(Bi);let r=Hu(xi.h,Bi.h,i),s=Hu(xi.s,Bi.s,i),l=Hu(xi.l,Bi.l,i);return this.setHSL(r,s,l),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};_t.NAMES=$t;var Yn,na=class{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{Yn===void 0&&(Yn=gt("canvas")),Yn.width=t.width,Yn.height=t.height;let r=Yn.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),i=Yn}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let i=gt("canvas");i.width=t.width,i.height=t.height;let r=i.getContext("2d");r.drawImage(t,0,0,t.width,t.height);let s=r.getImageData(0,0,t.width,t.height),l=s.data;for(let d=0;d<l.length;d++)l[d]=jt(l[d]/255)*255;return r.putImageData(s,0,0),i}else if(t.data){let i=t.data.slice(0);for(let r=0;r<i.length;r++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[r]=Math.floor(jt(i[r]/255)*255):i[r]=jt(i[r]);return{data:i,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},Zs=class{constructor(t=null){this.isSource=!0,this.uuid=gr(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let r={uuid:this.uuid,url:""},s=this.data;if(s!==null){let l;if(Array.isArray(s)){l=[];for(let d=0,c=s.length;d<c;d++)s[d].isDataTexture?l.push(jr(s[d].image)):l.push(jr(s[d]))}else l=jr(s);r.url=l}return i||(t.images[this.uuid]=r),r}};function jr(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?na.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}var If=0,zn=class extends Cr{constructor(t=zn.DEFAULT_IMAGE,i=zn.DEFAULT_MAPPING,r=Nn,s=Nn,l=yi,d=vc,c=Pa,u=Nr,h=zn.DEFAULT_ANISOTROPY,f=$s){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:If++}),this.uuid=gr(),this.name="",this.source=new Zs(t),this.mipmaps=[],this.mapping=i,this.wrapS=r,this.wrapT=s,this.magFilter=l,this.minFilter=d,this.anisotropy=h,this.format=c,this.internalFormat=null,this.type=u,this.offset=new q(0,0),this.repeat=new q(1,1),this.center=new q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Me,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){let i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];let r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==tv)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Eo:t.x=t.x-Math.floor(t.x);break;case Nn:t.x=t.x<0?0:1;break;case rv:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Eo:t.y=t.y-Math.floor(t.y);break;case Nn:t.y=t.y<0?0:1;break;case rv:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}};zn.DEFAULT_IMAGE=null,zn.DEFAULT_MAPPING=tv,zn.DEFAULT_ANISOTROPY=1;var ri=class{constructor(t=0,i=0,r=0,s=1){ri.prototype.isVector4=!0,this.x=t,this.y=i,this.z=r,this.w=s}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,r,s){return this.x=t,this.y=i,this.z=r,this.w=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let i=this.x,r=this.y,s=this.z,l=this.w,d=t.elements;return this.x=d[0]*i+d[4]*r+d[8]*s+d[12]*l,this.y=d[1]*i+d[5]*r+d[9]*s+d[13]*l,this.z=d[2]*i+d[6]*r+d[10]*s+d[14]*l,this.w=d[3]*i+d[7]*r+d[11]*s+d[15]*l,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,r,s,l,d=t.elements,c=d[0],u=d[4],h=d[8],f=d[1],m=d[5],p=d[9],g=d[2],v=d[6],w=d[10];if(Math.abs(u-f)<.01&&Math.abs(h-g)<.01&&Math.abs(p-v)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+g)<.1&&Math.abs(p+v)<.1&&Math.abs(c+m+w-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;let _=(c+1)/2,k=(m+1)/2,A=(w+1)/2,C=(u+f)/4,M=(h+g)/4,D=(p+v)/4;return _>k&&_>A?_<.01?(r=0,s=.707106781,l=.707106781):(r=Math.sqrt(_),s=C/r,l=M/r):k>A?k<.01?(r=.707106781,s=0,l=.707106781):(s=Math.sqrt(k),r=C/s,l=D/s):A<.01?(r=.707106781,s=.707106781,l=0):(l=Math.sqrt(A),r=M/l,s=D/l),this.set(r,s,l,i),this}let x=Math.sqrt((v-p)*(v-p)+(h-g)*(h-g)+(f-u)*(f-u));return Math.abs(x)<.001&&(x=1),this.x=(v-p)/x,this.y=(h-g)/x,this.z=(f-u)/x,this.w=Math.acos((c+m+w-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this}clampLength(t,i){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this.w=t.w+(i.w-t.w)*r,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},Oi=class extends Cr{constructor(t=1,i=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=i,this.depth=1,this.scissor=new ri(0,0,t,i),this.scissorTest=!1,this.viewport=new ri(0,0,t,i);let s={width:t,height:i,depth:1};this.texture=new zn(s,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:yi,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(t,i,r=1){(this.width!==t||this.height!==i||this.depth!==r)&&(this.width=t,this.height=i,this.depth=r,this.texture.image.width=t,this.texture.image.height=i,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;let i=Object.assign({},t.texture.image);return this.texture.source=new Zs(i),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ns=class extends zn{constructor(t=null,i=1,r=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:i,height:r,depth:s},this.magFilter=on,this.minFilter=on,this.wrapR=Nn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},vd=class extends zn{constructor(t=null,i=1,r=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:i,height:r,depth:s},this.magFilter=on,this.minFilter=on,this.wrapR=Nn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},gl=class extends Oi{constructor(t=1,i=1,r=1,s={}){super(t,i,s),this.isWebGLMultipleRenderTargets=!0;let l=this.texture;this.texture=[];for(let d=0;d<r;d++)this.texture[d]=l.clone(),this.texture[d].isRenderTargetTexture=!0}setSize(t,i,r=1){if(this.width!==t||this.height!==i||this.depth!==r){this.width=t,this.height=i,this.depth=r;for(let s=0,l=this.texture.length;s<l;s++)this.texture[s].image.width=t,this.texture[s].image.height=i,this.texture[s].image.depth=r;this.dispose()}return this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.texture.length=0;for(let i=0,r=t.texture.length;i<r;i++)this.texture[i]=t.texture[i].clone(),this.texture[i].isRenderTargetTexture=!0;return this}},Ut=class{constructor(t=0,i=0,r=0,s=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=r,this._w=s}static slerpFlat(t,i,r,s,l,d,c){let u=r[s+0],h=r[s+1],f=r[s+2],m=r[s+3],p=l[d+0],g=l[d+1],v=l[d+2],w=l[d+3];if(c===0){t[i+0]=u,t[i+1]=h,t[i+2]=f,t[i+3]=m;return}if(c===1){t[i+0]=p,t[i+1]=g,t[i+2]=v,t[i+3]=w;return}if(m!==w||u!==p||h!==g||f!==v){let x=1-c,_=u*p+h*g+f*v+m*w,k=_>=0?1:-1,A=1-_*_;if(A>Number.EPSILON){let M=Math.sqrt(A),D=Math.atan2(M,_*k);x=Math.sin(x*D)/M,c=Math.sin(c*D)/M}let C=c*k;if(u=u*x+p*C,h=h*x+g*C,f=f*x+v*C,m=m*x+w*C,x===1-c){let M=1/Math.sqrt(u*u+h*h+f*f+m*m);u*=M,h*=M,f*=M,m*=M}}t[i]=u,t[i+1]=h,t[i+2]=f,t[i+3]=m}static multiplyQuaternionsFlat(t,i,r,s,l,d){let c=r[s],u=r[s+1],h=r[s+2],f=r[s+3],m=l[d],p=l[d+1],g=l[d+2],v=l[d+3];return t[i]=c*v+f*m+u*g-h*p,t[i+1]=u*v+f*p+h*m-c*g,t[i+2]=h*v+f*g+c*p-u*m,t[i+3]=f*v-c*m-u*p-h*g,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,r,s){return this._x=t,this._y=i,this._z=r,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i){let r=t._x,s=t._y,l=t._z,d=t._order,c=Math.cos,u=Math.sin,h=c(r/2),f=c(s/2),m=c(l/2),p=u(r/2),g=u(s/2),v=u(l/2);switch(d){case"XYZ":this._x=p*f*m+h*g*v,this._y=h*g*m-p*f*v,this._z=h*f*v+p*g*m,this._w=h*f*m-p*g*v;break;case"YXZ":this._x=p*f*m+h*g*v,this._y=h*g*m-p*f*v,this._z=h*f*v-p*g*m,this._w=h*f*m+p*g*v;break;case"ZXY":this._x=p*f*m-h*g*v,this._y=h*g*m+p*f*v,this._z=h*f*v+p*g*m,this._w=h*f*m-p*g*v;break;case"ZYX":this._x=p*f*m-h*g*v,this._y=h*g*m+p*f*v,this._z=h*f*v-p*g*m,this._w=h*f*m+p*g*v;break;case"YZX":this._x=p*f*m+h*g*v,this._y=h*g*m+p*f*v,this._z=h*f*v-p*g*m,this._w=h*f*m-p*g*v;break;case"XZY":this._x=p*f*m-h*g*v,this._y=h*g*m-p*f*v,this._z=h*f*v+p*g*m,this._w=h*f*m+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return i!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,i){let r=i/2,s=Math.sin(r);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(t){let i=t.elements,r=i[0],s=i[4],l=i[8],d=i[1],c=i[5],u=i[9],h=i[2],f=i[6],m=i[10],p=r+c+m;if(p>0){let g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(f-u)*g,this._y=(l-h)*g,this._z=(d-s)*g}else if(r>c&&r>m){let g=2*Math.sqrt(1+r-c-m);this._w=(f-u)/g,this._x=.25*g,this._y=(s+d)/g,this._z=(l+h)/g}else if(c>m){let g=2*Math.sqrt(1+c-r-m);this._w=(l-h)/g,this._x=(s+d)/g,this._y=.25*g,this._z=(u+f)/g}else{let g=2*Math.sqrt(1+m-r-c);this._w=(d-s)/g,this._x=(l+h)/g,this._y=(u+f)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let r=t.dot(i)+1;return r<Number.EPSILON?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Zn(this.dot(t),-1,1)))}rotateTowards(t,i){let r=this.angleTo(t);if(r===0)return this;let s=Math.min(1,i/r);return this.slerp(t,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){let r=t._x,s=t._y,l=t._z,d=t._w,c=i._x,u=i._y,h=i._z,f=i._w;return this._x=r*f+d*c+s*h-l*u,this._y=s*f+d*u+l*c-r*h,this._z=l*f+d*h+r*u-s*c,this._w=d*f-r*c-s*u-l*h,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);let r=this._x,s=this._y,l=this._z,d=this._w,c=d*t._w+r*t._x+s*t._y+l*t._z;if(c<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,c=-c):this.copy(t),c>=1)return this._w=d,this._x=r,this._y=s,this._z=l,this;let u=1-c*c;if(u<=Number.EPSILON){let g=1-i;return this._w=g*d+i*this._w,this._x=g*r+i*this._x,this._y=g*s+i*this._y,this._z=g*l+i*this._z,this.normalize(),this._onChangeCallback(),this}let h=Math.sqrt(u),f=Math.atan2(h,c),m=Math.sin((1-i)*f)/h,p=Math.sin(i*f)/h;return this._w=d*m+this._w*p,this._x=r*m+this._x*p,this._y=s*m+this._y*p,this._z=l*m+this._z*p,this._onChangeCallback(),this}slerpQuaternions(t,i,r){return this.copy(t).slerp(i,r)}random(){let t=Math.random(),i=Math.sqrt(1-t),r=Math.sqrt(t),s=2*Math.PI*Math.random(),l=2*Math.PI*Math.random();return this.set(i*Math.cos(s),r*Math.sin(l),r*Math.cos(l),i*Math.sin(s))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},N=class{constructor(t=0,i=0,r=0){N.prototype.isVector3=!0,this.x=t,this.y=i,this.z=r}set(t,i,r){return r===void 0&&(r=this.z),this.x=t,this.y=i,this.z=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(Gu.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(Gu.setFromAxisAngle(t,i))}applyMatrix3(t){let i=this.x,r=this.y,s=this.z,l=t.elements;return this.x=l[0]*i+l[3]*r+l[6]*s,this.y=l[1]*i+l[4]*r+l[7]*s,this.z=l[2]*i+l[5]*r+l[8]*s,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let i=this.x,r=this.y,s=this.z,l=t.elements,d=1/(l[3]*i+l[7]*r+l[11]*s+l[15]);return this.x=(l[0]*i+l[4]*r+l[8]*s+l[12])*d,this.y=(l[1]*i+l[5]*r+l[9]*s+l[13])*d,this.z=(l[2]*i+l[6]*r+l[10]*s+l[14])*d,this}applyQuaternion(t){let i=this.x,r=this.y,s=this.z,l=t.x,d=t.y,c=t.z,u=t.w,h=u*i+d*s-c*r,f=u*r+c*i-l*s,m=u*s+l*r-d*i,p=-l*i-d*r-c*s;return this.x=h*u+p*-l+f*-c-m*-d,this.y=f*u+p*-d+m*-l-h*-c,this.z=m*u+p*-c+h*-d-f*-l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let i=this.x,r=this.y,s=this.z,l=t.elements;return this.x=l[0]*i+l[4]*r+l[8]*s,this.y=l[1]*i+l[5]*r+l[9]*s,this.z=l[2]*i+l[6]*r+l[10]*s,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){let r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(t,Math.min(i,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,r){return this.x=t.x+(i.x-t.x)*r,this.y=t.y+(i.y-t.y)*r,this.z=t.z+(i.z-t.z)*r,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){let r=t.x,s=t.y,l=t.z,d=i.x,c=i.y,u=i.z;return this.x=s*u-l*c,this.y=l*d-r*u,this.z=r*c-s*d,this}projectOnVector(t){let i=t.lengthSq();if(i===0)return this.set(0,0,0);let r=t.dot(this)/i;return this.copy(t).multiplyScalar(r)}projectOnPlane(t){return wc.copy(this).projectOnVector(t),this.sub(wc)}reflect(t){return this.sub(wc.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;let r=this.dot(t)/i;return Math.acos(Zn(r,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let i=this.x-t.x,r=this.y-t.y,s=this.z-t.z;return i*i+r*r+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,r){let s=Math.sin(i)*t;return this.x=s*Math.sin(r),this.y=Math.cos(i)*t,this.z=s*Math.cos(r),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,r){return this.x=t*Math.sin(i),this.y=r,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){let i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){let i=this.setFromMatrixColumn(t,0).length(),r=this.setFromMatrixColumn(t,1).length(),s=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=r,this.z=s,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=(Math.random()-.5)*2,i=Math.random()*Math.PI*2,r=Math.sqrt(1-wn(t,2));return this.x=r*Math.cos(i),this.y=r*Math.sin(i),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},wc=new N,Gu=new Ut,nn=class{constructor(t=new N(1/0,1/0,1/0),i=new N(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){let i=1/0,r=1/0,s=1/0,l=-1/0,d=-1/0,c=-1/0;for(let u=0,h=t.length;u<h;u+=3){let f=t[u],m=t[u+1],p=t[u+2];f<i&&(i=f),m<r&&(r=m),p<s&&(s=p),f>l&&(l=f),m>d&&(d=m),p>c&&(c=p)}return this.min.set(i,r,s),this.max.set(l,d,c),this}setFromBufferAttribute(t){let i=1/0,r=1/0,s=1/0,l=-1/0,d=-1/0,c=-1/0;for(let u=0,h=t.count;u<h;u++){let f=t.getX(u),m=t.getY(u),p=t.getZ(u);f<i&&(i=f),m<r&&(r=m),p<s&&(s=p),f>l&&(l=f),m>d&&(d=m),p>c&&(c=p)}return this.min.set(i,r,s),this.max.set(l,d,c),this}setFromPoints(t){this.makeEmpty();for(let i=0,r=t.length;i<r;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){let r=Ia.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}setFromObject(t,i=!1){return this.makeEmpty(),this.expandByObject(t,i)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,i=!1){t.updateWorldMatrix(!1,!1);let r=t.geometry;if(r!==void 0)if(i&&r.attributes!=null&&r.attributes.position!==void 0){let l=r.attributes.position;for(let d=0,c=l.count;d<c;d++)Ia.fromBufferAttribute(l,d).applyMatrix4(t.matrixWorld),this.expandByPoint(Ia)}else r.boundingBox===null&&r.computeBoundingBox(),rs.copy(r.boundingBox),rs.applyMatrix4(t.matrixWorld),this.union(rs);let s=t.children;for(let l=0,d=s.length;l<d;l++)this.expandByObject(s[l],i);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Ia),Ia.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,r;return t.normal.x>0?(i=t.normal.x*this.min.x,r=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,r=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,r+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,r+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,r+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,r+=t.normal.z*this.min.z),i<=-t.constant&&r>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(bt),ui.subVectors(this.max,bt),Do.subVectors(t.a,bt),vl.subVectors(t.b,bt),yl.subVectors(t.c,bt),Cs.subVectors(vl,Do),Es.subVectors(yl,vl),as.subVectors(Do,yl);let i=[0,-Cs.z,Cs.y,0,-Es.z,Es.y,0,-as.z,as.y,Cs.z,0,-Cs.x,Es.z,0,-Es.x,as.z,0,-as.x,-Cs.y,Cs.x,0,-Es.y,Es.x,0,-as.y,as.x,0];return!Ra(i,Do,vl,yl,ui)||(i=[1,0,0,0,1,0,0,0,1],!Ra(i,Do,vl,yl,ui))?!1:(Xn.crossVectors(Cs,Es),i=[Xn.x,Xn.y,Xn.z],Ra(i,Do,vl,yl,ui))}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Ia.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(Ia).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Oa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Oa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Oa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Oa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Oa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Oa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Oa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Oa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Oa),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},Oa=[new N,new N,new N,new N,new N,new N,new N,new N],Ia=new N,rs=new nn,Do=new N,vl=new N,yl=new N,Cs=new N,Es=new N,as=new N,bt=new N,ui=new N,Xn=new N,Kn=new N;function Ra(t,i,r,s,l){for(let d=0,c=t.length-3;d<=c;d+=3){Kn.fromArray(t,d);let u=l.x*Math.abs(Kn.x)+l.y*Math.abs(Kn.y)+l.z*Math.abs(Kn.z),h=i.dot(Kn),f=r.dot(Kn),m=s.dot(Kn);if(Math.max(-Math.max(h,f,m),Math.min(h,f,m))>u)return!1}return!0}var Wu=new nn,Ys=new N,qu=new N,Ur=class{constructor(t=new N,i=-1){this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){let r=this.center;i!==void 0?r.copy(i):Wu.setFromPoints(t).getCenter(r);let s=0;for(let l=0,d=t.length;l<d;l++)s=Math.max(s,r.distanceToSquared(t[l]));return this.radius=Math.sqrt(s),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){let r=this.center.distanceToSquared(t);return i.copy(t),r>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Ys.subVectors(t,this.center);let i=Ys.lengthSq();if(i>this.radius*this.radius){let r=Math.sqrt(i),s=(r-this.radius)*.5;this.center.addScaledVector(Ys,s/r),this.radius+=s}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(qu.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Ys.copy(t.center).add(qu)),this.expandByPoint(Ys.copy(t.center).sub(qu))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}},Ms=new N,xc=new N,_c=new N,Xs=new N,$u=new N,kc=new N,bv=new N,Rf=class{constructor(t=new N,i=new N(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ms)),this}closestPointToPoint(t,i){i.subVectors(t,this.origin);let r=i.dot(this.direction);return r<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(r).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let i=Ms.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(Ms.copy(this.direction).multiplyScalar(i).add(this.origin),Ms.distanceToSquared(t))}distanceSqToSegment(t,i,r,s){xc.copy(t).add(i).multiplyScalar(.5),_c.copy(i).sub(t).normalize(),Xs.copy(this.origin).sub(xc);let l=t.distanceTo(i)*.5,d=-this.direction.dot(_c),c=Xs.dot(this.direction),u=-Xs.dot(_c),h=Xs.lengthSq(),f=Math.abs(1-d*d),m,p,g,v;if(f>0)if(m=d*u-c,p=d*c-u,v=l*f,m>=0)if(p>=-v)if(p<=v){let w=1/f;m*=w,p*=w,g=m*(m+d*p+2*c)+p*(d*m+p+2*u)+h}else p=l,m=Math.max(0,-(d*p+c)),g=-m*m+p*(p+2*u)+h;else p=-l,m=Math.max(0,-(d*p+c)),g=-m*m+p*(p+2*u)+h;else p<=-v?(m=Math.max(0,-(-d*l+c)),p=m>0?-l:Math.min(Math.max(-l,-u),l),g=-m*m+p*(p+2*u)+h):p<=v?(m=0,p=Math.min(Math.max(-l,-u),l),g=p*(p+2*u)+h):(m=Math.max(0,-(d*l+c)),p=m>0?l:Math.min(Math.max(-l,-u),l),g=-m*m+p*(p+2*u)+h);else p=d>0?-l:l,m=Math.max(0,-(d*p+c)),g=-m*m+p*(p+2*u)+h;return r&&r.copy(this.direction).multiplyScalar(m).add(this.origin),s&&s.copy(_c).multiplyScalar(p).add(xc),g}intersectSphere(t,i){Ms.subVectors(t.center,this.origin);let r=Ms.dot(this.direction),s=Ms.dot(Ms)-r*r,l=t.radius*t.radius;if(s>l)return null;let d=Math.sqrt(l-s),c=r-d,u=r+d;return c<0&&u<0?null:c<0?this.at(u,i):this.at(c,i)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let i=t.normal.dot(this.direction);if(i===0)return t.distanceToPoint(this.origin)===0?0:null;let r=-(this.origin.dot(t.normal)+t.constant)/i;return r>=0?r:null}intersectPlane(t,i){let r=this.distanceToPlane(t);return r===null?null:this.at(r,i)}intersectsPlane(t){let i=t.distanceToPoint(this.origin);return i===0||t.normal.dot(this.direction)*i<0}intersectBox(t,i){let r,s,l,d,c,u,h=1/this.direction.x,f=1/this.direction.y,m=1/this.direction.z,p=this.origin;return h>=0?(r=(t.min.x-p.x)*h,s=(t.max.x-p.x)*h):(r=(t.max.x-p.x)*h,s=(t.min.x-p.x)*h),f>=0?(l=(t.min.y-p.y)*f,d=(t.max.y-p.y)*f):(l=(t.max.y-p.y)*f,d=(t.min.y-p.y)*f),r>d||l>s||((l>r||isNaN(r))&&(r=l),(d<s||isNaN(s))&&(s=d),m>=0?(c=(t.min.z-p.z)*m,u=(t.max.z-p.z)*m):(c=(t.max.z-p.z)*m,u=(t.min.z-p.z)*m),r>u||c>s)||((c>r||r!==r)&&(r=c),(u<s||s!==s)&&(s=u),s<0)?null:this.at(r>=0?r:s,i)}intersectsBox(t){return this.intersectBox(t,Ms)!==null}intersectTriangle(t,i,r,s,l){$u.subVectors(i,t),kc.subVectors(r,t),bv.crossVectors($u,kc);let d=this.direction.dot(bv),c;if(d>0){if(s)return null;c=1}else if(d<0)c=-1,d=-d;else return null;Xs.subVectors(this.origin,t);let u=c*this.direction.dot(kc.crossVectors(Xs,kc));if(u<0)return null;let h=c*this.direction.dot($u.cross(Xs));if(h<0||u+h>d)return null;let f=-c*Xs.dot(bv);return f<0?null:this.at(f/d,l)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},Ze=class{constructor(){Ze.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(t,i,r,s,l,d,c,u,h,f,m,p,g,v,w,x){let _=this.elements;return _[0]=t,_[4]=i,_[8]=r,_[12]=s,_[1]=l,_[5]=d,_[9]=c,_[13]=u,_[2]=h,_[6]=f,_[10]=m,_[14]=p,_[3]=g,_[7]=v,_[11]=w,_[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ze().fromArray(this.elements)}copy(t){let i=this.elements,r=t.elements;return i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=r[12],i[13]=r[13],i[14]=r[14],i[15]=r[15],this}copyPosition(t){let i=this.elements,r=t.elements;return i[12]=r[12],i[13]=r[13],i[14]=r[14],this}setFromMatrix3(t){let i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,r){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,i,r){return this.set(t.x,i.x,r.x,0,t.y,i.y,r.y,0,t.z,i.z,r.z,0,0,0,0,1),this}extractRotation(t){let i=this.elements,r=t.elements,s=1/zf.setFromMatrixColumn(t,0).length(),l=1/zf.setFromMatrixColumn(t,1).length(),d=1/zf.setFromMatrixColumn(t,2).length();return i[0]=r[0]*s,i[1]=r[1]*s,i[2]=r[2]*s,i[3]=0,i[4]=r[4]*l,i[5]=r[5]*l,i[6]=r[6]*l,i[7]=0,i[8]=r[8]*d,i[9]=r[9]*d,i[10]=r[10]*d,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){let i=this.elements,r=t.x,s=t.y,l=t.z,d=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s),f=Math.cos(l),m=Math.sin(l);if(t.order==="XYZ"){let p=d*f,g=d*m,v=c*f,w=c*m;i[0]=u*f,i[4]=-u*m,i[8]=h,i[1]=g+v*h,i[5]=p-w*h,i[9]=-c*u,i[2]=w-p*h,i[6]=v+g*h,i[10]=d*u}else if(t.order==="YXZ"){let p=u*f,g=u*m,v=h*f,w=h*m;i[0]=p+w*c,i[4]=v*c-g,i[8]=d*h,i[1]=d*m,i[5]=d*f,i[9]=-c,i[2]=g*c-v,i[6]=w+p*c,i[10]=d*u}else if(t.order==="ZXY"){let p=u*f,g=u*m,v=h*f,w=h*m;i[0]=p-w*c,i[4]=-d*m,i[8]=v+g*c,i[1]=g+v*c,i[5]=d*f,i[9]=w-p*c,i[2]=-d*h,i[6]=c,i[10]=d*u}else if(t.order==="ZYX"){let p=d*f,g=d*m,v=c*f,w=c*m;i[0]=u*f,i[4]=v*h-g,i[8]=p*h+w,i[1]=u*m,i[5]=w*h+p,i[9]=g*h-v,i[2]=-h,i[6]=c*u,i[10]=d*u}else if(t.order==="YZX"){let p=d*u,g=d*h,v=c*u,w=c*h;i[0]=u*f,i[4]=w-p*m,i[8]=v*m+g,i[1]=m,i[5]=d*f,i[9]=-c*f,i[2]=-h*f,i[6]=g*m+v,i[10]=p-w*m}else if(t.order==="XZY"){let p=d*u,g=d*h,v=c*u,w=c*h;i[0]=u*f,i[4]=-m,i[8]=h*f,i[1]=p*m+w,i[5]=d*f,i[9]=g*m-v,i[2]=v*m-g,i[6]=c*f,i[10]=w*m+p}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(DF,t,PF)}lookAt(t,i,r){let s=this.elements;return Ts.subVectors(t,i),Ts.lengthSq()===0&&(Ts.z=1),Ts.normalize(),Sc.crossVectors(r,Ts),Sc.lengthSq()===0&&(Math.abs(r.z)===1?Ts.x+=1e-4:Ts.z+=1e-4,Ts.normalize(),Sc.crossVectors(r,Ts)),Sc.normalize(),Cw.crossVectors(Ts,Sc),s[0]=Sc.x,s[4]=Cw.x,s[8]=Ts.x,s[1]=Sc.y,s[5]=Cw.y,s[9]=Ts.y,s[2]=Sc.z,s[6]=Cw.z,s[10]=Ts.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){let r=t.elements,s=i.elements,l=this.elements,d=r[0],c=r[4],u=r[8],h=r[12],f=r[1],m=r[5],p=r[9],g=r[13],v=r[2],w=r[6],x=r[10],_=r[14],k=r[3],A=r[7],C=r[11],M=r[15],D=s[0],P=s[4],T=s[8],O=s[12],z=s[1],L=s[5],B=s[9],j=s[13],V=s[2],H=s[6],Y=s[10],se=s[14],re=s[3],$=s[7],te=s[11],he=s[15];return l[0]=d*D+c*z+u*V+h*re,l[4]=d*P+c*L+u*H+h*$,l[8]=d*T+c*B+u*Y+h*te,l[12]=d*O+c*j+u*se+h*he,l[1]=f*D+m*z+p*V+g*re,l[5]=f*P+m*L+p*H+g*$,l[9]=f*T+m*B+p*Y+g*te,l[13]=f*O+m*j+p*se+g*he,l[2]=v*D+w*z+x*V+_*re,l[6]=v*P+w*L+x*H+_*$,l[10]=v*T+w*B+x*Y+_*te,l[14]=v*O+w*j+x*se+_*he,l[3]=k*D+A*z+C*V+M*re,l[7]=k*P+A*L+C*H+M*$,l[11]=k*T+A*B+C*Y+M*te,l[15]=k*O+A*j+C*se+M*he,this}multiplyScalar(t){let i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){let t=this.elements,i=t[0],r=t[4],s=t[8],l=t[12],d=t[1],c=t[5],u=t[9],h=t[13],f=t[2],m=t[6],p=t[10],g=t[14],v=t[3],w=t[7],x=t[11],_=t[15];return v*(+l*u*m-s*h*m-l*c*p+r*h*p+s*c*g-r*u*g)+w*(+i*u*g-i*h*p+l*d*p-s*d*g+s*h*f-l*u*f)+x*(+i*h*m-i*c*g-l*d*m+r*d*g+l*c*f-r*h*f)+_*(-s*c*f-i*u*m+i*c*p+s*d*m-r*d*p+r*u*f)}transpose(){let t=this.elements,i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,r){let s=this.elements;return t.isVector3?(s[12]=t.x,s[13]=t.y,s[14]=t.z):(s[12]=t,s[13]=i,s[14]=r),this}invert(){let t=this.elements,i=t[0],r=t[1],s=t[2],l=t[3],d=t[4],c=t[5],u=t[6],h=t[7],f=t[8],m=t[9],p=t[10],g=t[11],v=t[12],w=t[13],x=t[14],_=t[15],k=m*x*h-w*p*h+w*u*g-c*x*g-m*u*_+c*p*_,A=v*p*h-f*x*h-v*u*g+d*x*g+f*u*_-d*p*_,C=f*w*h-v*m*h+v*c*g-d*w*g-f*c*_+d*m*_,M=v*m*u-f*w*u-v*c*p+d*w*p+f*c*x-d*m*x,D=i*k+r*A+s*C+l*M;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let P=1/D;return t[0]=k*P,t[1]=(w*p*l-m*x*l-w*s*g+r*x*g+m*s*_-r*p*_)*P,t[2]=(c*x*l-w*u*l+w*s*h-r*x*h-c*s*_+r*u*_)*P,t[3]=(m*u*l-c*p*l-m*s*h+r*p*h+c*s*g-r*u*g)*P,t[4]=A*P,t[5]=(f*x*l-v*p*l+v*s*g-i*x*g-f*s*_+i*p*_)*P,t[6]=(v*u*l-d*x*l-v*s*h+i*x*h+d*s*_-i*u*_)*P,t[7]=(d*p*l-f*u*l+f*s*h-i*p*h-d*s*g+i*u*g)*P,t[8]=C*P,t[9]=(v*m*l-f*w*l-v*r*g+i*w*g+f*r*_-i*m*_)*P,t[10]=(d*w*l-v*c*l+v*r*h-i*w*h-d*r*_+i*c*_)*P,t[11]=(f*c*l-d*m*l-f*r*h+i*m*h+d*r*g-i*c*g)*P,t[12]=M*P,t[13]=(f*w*s-v*m*s+v*r*p-i*w*p-f*r*x+i*m*x)*P,t[14]=(v*c*s-d*w*s-v*r*u+i*w*u+d*r*x-i*c*x)*P,t[15]=(d*m*s-f*c*s+f*r*u-i*m*u-d*r*p+i*c*p)*P,this}scale(t){let i=this.elements,r=t.x,s=t.y,l=t.z;return i[0]*=r,i[4]*=s,i[8]*=l,i[1]*=r,i[5]*=s,i[9]*=l,i[2]*=r,i[6]*=s,i[10]*=l,i[3]*=r,i[7]*=s,i[11]*=l,this}getMaxScaleOnAxis(){let t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],s=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,r,s))}makeTranslation(t,i,r){return this.set(1,0,0,t,0,1,0,i,0,0,1,r,0,0,0,1),this}makeRotationX(t){let i=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,i,-r,0,0,r,i,0,0,0,0,1),this}makeRotationY(t){let i=Math.cos(t),r=Math.sin(t);return this.set(i,0,r,0,0,1,0,0,-r,0,i,0,0,0,0,1),this}makeRotationZ(t){let i=Math.cos(t),r=Math.sin(t);return this.set(i,-r,0,0,r,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){let r=Math.cos(i),s=Math.sin(i),l=1-r,d=t.x,c=t.y,u=t.z,h=l*d,f=l*c;return this.set(h*d+r,h*c-s*u,h*u+s*c,0,h*c+s*u,f*c+r,f*u-s*d,0,h*u-s*c,f*u+s*d,l*u*u+r,0,0,0,0,1),this}makeScale(t,i,r){return this.set(t,0,0,0,0,i,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,i,r,s,l,d){return this.set(1,r,l,0,t,1,d,0,i,s,1,0,0,0,0,1),this}compose(t,i,r){let s=this.elements,l=i._x,d=i._y,c=i._z,u=i._w,h=l+l,f=d+d,m=c+c,p=l*h,g=l*f,v=l*m,w=d*f,x=d*m,_=c*m,k=u*h,A=u*f,C=u*m,M=r.x,D=r.y,P=r.z;return s[0]=(1-(w+_))*M,s[1]=(g+C)*M,s[2]=(v-A)*M,s[3]=0,s[4]=(g-C)*D,s[5]=(1-(p+_))*D,s[6]=(x+k)*D,s[7]=0,s[8]=(v+A)*P,s[9]=(x-k)*P,s[10]=(1-(p+w))*P,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}decompose(t,i,r){let s=this.elements,l=zf.set(s[0],s[1],s[2]).length(),d=zf.set(s[4],s[5],s[6]).length(),c=zf.set(s[8],s[9],s[10]).length();this.determinant()<0&&(l=-l),t.x=s[12],t.y=s[13],t.z=s[14],Po.copy(this);let u=1/l,h=1/d,f=1/c;return Po.elements[0]*=u,Po.elements[1]*=u,Po.elements[2]*=u,Po.elements[4]*=h,Po.elements[5]*=h,Po.elements[6]*=h,Po.elements[8]*=f,Po.elements[9]*=f,Po.elements[10]*=f,i.setFromRotationMatrix(Po),r.x=l,r.y=d,r.z=c,this}makePerspective(t,i,r,s,l,d){let c=this.elements,u=2*l/(i-t),h=2*l/(r-s),f=(i+t)/(i-t),m=(r+s)/(r-s),p=-(d+l)/(d-l),g=-2*d*l/(d-l);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=h,c[9]=m,c[13]=0,c[2]=0,c[6]=0,c[10]=p,c[14]=g,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(t,i,r,s,l,d){let c=this.elements,u=1/(i-t),h=1/(r-s),f=1/(d-l),m=(i+t)*u,p=(r+s)*h,g=(d+l)*f;return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-m,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-p,c[2]=0,c[6]=0,c[10]=-2*f,c[14]=-g,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(t){let i=this.elements,r=t.elements;for(let s=0;s<16;s++)if(i[s]!==r[s])return!1;return!0}fromArray(t,i=0){for(let r=0;r<16;r++)this.elements[r]=t[r+i];return this}toArray(t=[],i=0){let r=this.elements;return t[i]=r[0],t[i+1]=r[1],t[i+2]=r[2],t[i+3]=r[3],t[i+4]=r[4],t[i+5]=r[5],t[i+6]=r[6],t[i+7]=r[7],t[i+8]=r[8],t[i+9]=r[9],t[i+10]=r[10],t[i+11]=r[11],t[i+12]=r[12],t[i+13]=r[13],t[i+14]=r[14],t[i+15]=r[15],t}},zf=new N,Po=new Ze,DF=new N(0,0,0),PF=new N(1,1,1),Sc=new N,Cw=new N,Ts=new N,CD=new Ze,ED=new Ut,Vr=class{constructor(t=0,i=0,r=0,s=Vr.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){let s=t.elements,l=s[0],d=s[4],c=s[8],u=s[1],h=s[5],f=s[9],m=s[2],p=s[6],g=s[10];switch(i){case"XYZ":this._y=Math.asin(Zn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-d,l)):(this._x=Math.atan2(p,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Zn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,g),this._z=Math.atan2(u,h)):(this._y=Math.atan2(-m,l),this._z=0);break;case"ZXY":this._x=Math.asin(Zn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-m,g),this._z=Math.atan2(-d,h)):(this._y=0,this._z=Math.atan2(u,l));break;case"ZYX":this._y=Math.asin(-Zn(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(u,l)):(this._x=0,this._z=Math.atan2(-d,h));break;case"YZX":this._z=Math.asin(Zn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-f,h),this._y=Math.atan2(-m,l)):(this._x=0,this._y=Math.atan2(c,g));break;case"XZY":this._z=Math.asin(-Zn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(p,h),this._y=Math.atan2(c,l)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,r===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return CD.makeRotationFromQuaternion(t),this.setFromRotationMatrix(CD,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return ED.setFromEuler(this),this.setFromQuaternion(ED,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Vr.DEFAULT_ORDER="XYZ";var gA=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},OF=0,MD=new N,Lf=new Ut,yd=new Ze,Ew=new N,wv=new N,IF=new N,RF=new Ut,TD=new N(1,0,0),DD=new N(0,1,0),PD=new N(0,0,1),zF={type:"added"},OD={type:"removed"},ln=class extends Cr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:OF++}),this.uuid=gr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ln.DEFAULT_UP.clone();let t=new N,i=new Vr,r=new Ut,s=new N(1,1,1);function l(){r.setFromEuler(i,!1)}function d(){i.setFromQuaternion(r,void 0,!1)}i._onChange(l),r._onChange(d),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ze},normalMatrix:{value:new Me}}),this.matrix=new Ze,this.matrixWorld=new Ze,this.matrixAutoUpdate=ln.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new gA,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Lf.setFromAxisAngle(t,i),this.quaternion.multiply(Lf),this}rotateOnWorldAxis(t,i){return Lf.setFromAxisAngle(t,i),this.quaternion.premultiply(Lf),this}rotateX(t){return this.rotateOnAxis(TD,t)}rotateY(t){return this.rotateOnAxis(DD,t)}rotateZ(t){return this.rotateOnAxis(PD,t)}translateOnAxis(t,i){return MD.copy(t).applyQuaternion(this.quaternion),this.position.add(MD.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(TD,t)}translateY(t){return this.translateOnAxis(DD,t)}translateZ(t){return this.translateOnAxis(PD,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(yd.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?Ew.copy(t):Ew.set(t,i,r);let s=this.parent;this.updateWorldMatrix(!0,!1),wv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yd.lookAt(wv,Ew,this.up):yd.lookAt(Ew,wv,this.up),this.quaternion.setFromRotationMatrix(yd),s&&(yd.extractRotation(s.matrixWorld),Lf.setFromRotationMatrix(yd),this.quaternion.premultiply(Lf.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(zF)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(OD)),this}removeFromParent(){let t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){let i=this.children[t];i.parent=null,i.dispatchEvent(OD)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),yd.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),yd.multiply(t.parent.matrixWorld)),t.applyMatrix4(yd),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){let l=this.children[r].getObjectByProperty(t,i);if(l!==void 0)return l}}getObjectsByProperty(t,i){let r=[];this[t]===i&&r.push(this);for(let s=0,l=this.children.length;s<l;s++){let d=this.children[s].getObjectsByProperty(t,i);d.length>0&&(r=r.concat(d))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wv,t,IF),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wv,RF,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);let i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){let i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);let i=this.children;for(let r=0,s=i.length;r<s;r++){let l=i[r];(l.matrixWorldAutoUpdate===!0||t===!0)&&l.updateMatrixWorld(t)}}updateWorldMatrix(t,i){let r=this.parent;if(t===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0){let s=this.children;for(let l=0,d=s.length;l<d;l++){let c=s[l];c.matrixWorldAutoUpdate===!0&&c.updateWorldMatrix(!1,!0)}}}toJSON(t){let i=t===void 0||typeof t=="string",r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});let s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON()));function l(c,u){return c[u.uuid]===void 0&&(c[u.uuid]=u.toJSON(t)),u.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=l(t.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let u=c.shapes;if(Array.isArray(u))for(let h=0,f=u.length;h<f;h++){let m=u[h];l(t.shapes,m)}else l(t.shapes,u)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let u=0,h=this.material.length;u<h;u++)c.push(l(t.materials,this.material[u]));s.material=c}else s.material=l(t.materials,this.material);if(this.children.length>0){s.children=[];for(let c=0;c<this.children.length;c++)s.children.push(this.children[c].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let c=0;c<this.animations.length;c++){let u=this.animations[c];s.animations.push(l(t.animations,u))}}if(i){let c=d(t.geometries),u=d(t.materials),h=d(t.textures),f=d(t.images),m=d(t.shapes),p=d(t.skeletons),g=d(t.animations),v=d(t.nodes);c.length>0&&(r.geometries=c),u.length>0&&(r.materials=u),h.length>0&&(r.textures=h),f.length>0&&(r.images=f),m.length>0&&(r.shapes=m),p.length>0&&(r.skeletons=p),g.length>0&&(r.animations=g),v.length>0&&(r.nodes=v)}return r.object=s,r;function d(c){let u=[];for(let h in c){let f=c[h];delete f.metadata,u.push(f)}return u}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let r=0;r<t.children.length;r++){let s=t.children[r];this.add(s.clone())}return this}};ln.DEFAULT_UP=new N(0,1,0),ln.DEFAULT_MATRIX_AUTO_UPDATE=!0,ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Oo=new N,bd=new N,vA=new N,wd=new N,Bf=new N,Ff=new N,ID=new N,yA=new N,bA=new N,wA=new N,ua=class{constructor(t=new N,i=new N,r=new N){this.a=t,this.b=i,this.c=r}static getNormal(t,i,r,s){s.subVectors(r,i),Oo.subVectors(t,i),s.cross(Oo);let l=s.lengthSq();return l>0?s.multiplyScalar(1/Math.sqrt(l)):s.set(0,0,0)}static getBarycoord(t,i,r,s,l){Oo.subVectors(s,i),bd.subVectors(r,i),vA.subVectors(t,i);let d=Oo.dot(Oo),c=Oo.dot(bd),u=Oo.dot(vA),h=bd.dot(bd),f=bd.dot(vA),m=d*h-c*c;if(m===0)return l.set(-2,-1,-1);let p=1/m,g=(h*u-c*f)*p,v=(d*f-c*u)*p;return l.set(1-g-v,v,g)}static containsPoint(t,i,r,s){return this.getBarycoord(t,i,r,s,wd),wd.x>=0&&wd.y>=0&&wd.x+wd.y<=1}static getUV(t,i,r,s,l,d,c,u){return this.getBarycoord(t,i,r,s,wd),u.set(0,0),u.addScaledVector(l,wd.x),u.addScaledVector(d,wd.y),u.addScaledVector(c,wd.z),u}static isFrontFacing(t,i,r,s){return Oo.subVectors(r,i),bd.subVectors(t,i),Oo.cross(bd).dot(s)<0}set(t,i,r){return this.a.copy(t),this.b.copy(i),this.c.copy(r),this}setFromPointsAndIndices(t,i,r,s){return this.a.copy(t[i]),this.b.copy(t[r]),this.c.copy(t[s]),this}setFromAttributeAndIndices(t,i,r,s){return this.a.fromBufferAttribute(t,i),this.b.fromBufferAttribute(t,r),this.c.fromBufferAttribute(t,s),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Oo.subVectors(this.c,this.b),bd.subVectors(this.a,this.b),Oo.cross(bd).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ua.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return ua.getBarycoord(t,this.a,this.b,this.c,i)}getUV(t,i,r,s,l){return ua.getUV(t,this.a,this.b,this.c,i,r,s,l)}containsPoint(t){return ua.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ua.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){let r=this.a,s=this.b,l=this.c,d,c;Bf.subVectors(s,r),Ff.subVectors(l,r),yA.subVectors(t,r);let u=Bf.dot(yA),h=Ff.dot(yA);if(u<=0&&h<=0)return i.copy(r);bA.subVectors(t,s);let f=Bf.dot(bA),m=Ff.dot(bA);if(f>=0&&m<=f)return i.copy(s);let p=u*m-f*h;if(p<=0&&u>=0&&f<=0)return d=u/(u-f),i.copy(r).addScaledVector(Bf,d);wA.subVectors(t,l);let g=Bf.dot(wA),v=Ff.dot(wA);if(v>=0&&g<=v)return i.copy(l);let w=g*h-u*v;if(w<=0&&h>=0&&v<=0)return c=h/(h-v),i.copy(r).addScaledVector(Ff,c);let x=f*v-g*m;if(x<=0&&m-f>=0&&g-v>=0)return ID.subVectors(l,s),c=(m-f)/(m-f+(g-v)),i.copy(s).addScaledVector(ID,c);let _=1/(x+w+p);return d=w*_,c=p*_,i.copy(r).addScaledVector(Bf,d).addScaledVector(Ff,c)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},LF=0,xv=class extends Cr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:LF++}),this.uuid=gr(),this.name="",this.type="Material",this.blending=pl,this.side=qs,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=qb,this.blendDst=FS,this.blendEquation=fc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Jg,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=uA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=mv,this.stencilZFail=mv,this.stencilZPass=mv,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let i in t){let r=t[i];if(r===void 0){console.warn("THREE.Material: '"+i+"' parameter is undefined.");continue}let s=this[i];if(s===void 0){console.warn("THREE."+this.type+": '"+i+"' is not a property of this material.");continue}s&&s.isColor?s.set(r):s&&s.isVector3&&r&&r.isVector3?s.copy(r):this[i]=r}}toJSON(t){let i=t===void 0||typeof t=="string";i&&(t={textures:{},images:{}});let r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(t).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(t).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(t).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(t).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(t).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==pl&&(r.blending=this.blending),this.side!==qs&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function s(l){let d=[];for(let c in l){let u=l[c];delete u.metadata,d.push(u)}return d}if(i){let l=s(t.textures),d=s(t.images);l.length>0&&(r.textures=l),d.length>0&&(r.images=d)}return r}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let i=t.clippingPlanes,r=null;if(i!==null){let s=i.length;r=new Array(s);for(let l=0;l!==s;++l)r[l]=i[l].clone()}return this.clippingPlanes=r,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}},_v=class extends xv{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Yb,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}},vr=new N,Mw=new q,Qt=class{constructor(t,i,r=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=i,this.count=t!==void 0?t.length/i:0,this.normalized=r,this.usage=gv,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,i,r){t*=this.itemSize,r*=i.itemSize;for(let s=0,l=this.itemSize;s<l;s++)this.array[t+s]=i.array[r+s];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let i=0,r=this.count;i<r;i++)Mw.fromBufferAttribute(this,i),Mw.applyMatrix3(t),this.setXY(i,Mw.x,Mw.y);else if(this.itemSize===3)for(let i=0,r=this.count;i<r;i++)vr.fromBufferAttribute(this,i),vr.applyMatrix3(t),this.setXYZ(i,vr.x,vr.y,vr.z);return this}applyMatrix4(t){for(let i=0,r=this.count;i<r;i++)vr.fromBufferAttribute(this,i),vr.applyMatrix4(t),this.setXYZ(i,vr.x,vr.y,vr.z);return this}applyNormalMatrix(t){for(let i=0,r=this.count;i<r;i++)vr.fromBufferAttribute(this,i),vr.applyNormalMatrix(t),this.setXYZ(i,vr.x,vr.y,vr.z);return this}transformDirection(t){for(let i=0,r=this.count;i<r;i++)vr.fromBufferAttribute(this,i),vr.transformDirection(t),this.setXYZ(i,vr.x,vr.y,vr.z);return this}set(t,i=0){return this.array.set(t,i),this}getX(t){let i=this.array[t*this.itemSize];return this.normalized&&(i=_e(i,this.array)),i}setX(t,i){return this.normalized&&(i=ke(i,this.array)),this.array[t*this.itemSize]=i,this}getY(t){let i=this.array[t*this.itemSize+1];return this.normalized&&(i=_e(i,this.array)),i}setY(t,i){return this.normalized&&(i=ke(i,this.array)),this.array[t*this.itemSize+1]=i,this}getZ(t){let i=this.array[t*this.itemSize+2];return this.normalized&&(i=_e(i,this.array)),i}setZ(t,i){return this.normalized&&(i=ke(i,this.array)),this.array[t*this.itemSize+2]=i,this}getW(t){let i=this.array[t*this.itemSize+3];return this.normalized&&(i=_e(i,this.array)),i}setW(t,i){return this.normalized&&(i=ke(i,this.array)),this.array[t*this.itemSize+3]=i,this}setXY(t,i,r){return t*=this.itemSize,this.normalized&&(i=ke(i,this.array),r=ke(r,this.array)),this.array[t+0]=i,this.array[t+1]=r,this}setXYZ(t,i,r,s){return t*=this.itemSize,this.normalized&&(i=ke(i,this.array),r=ke(r,this.array),s=ke(s,this.array)),this.array[t+0]=i,this.array[t+1]=r,this.array[t+2]=s,this}setXYZW(t,i,r,s,l){return t*=this.itemSize,this.normalized&&(i=ke(i,this.array),r=ke(r,this.array),s=ke(s,this.array),l=ke(l,this.array)),this.array[t+0]=i,this.array[t+1]=r,this.array[t+2]=s,this.array[t+3]=l,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==gv&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}},RD=class extends Qt{constructor(t,i,r){super(new Uint16Array(t),i,r)}},Nf=class extends Qt{constructor(t,i,r){super(new Uint32Array(t),i,r)}},wt=class extends Qt{constructor(t,i,r){super(new Float32Array(t),i,r)}},BF=0,Ks=new Ze,xA=new ln,jf=new N,Ds=new nn,kv=new nn,Hr=new N,Nt=class extends Cr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:BF++}),this.uuid=gr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(tt(t)?Nf:RD)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,i){return this.attributes[t]=i,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,i,r=0){this.groups.push({start:t,count:i,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(t,i){this.drawRange.start=t,this.drawRange.count=i}applyMatrix4(t){let i=this.attributes.position;i!==void 0&&(i.applyMatrix4(t),i.needsUpdate=!0);let r=this.attributes.normal;if(r!==void 0){let l=new Me().getNormalMatrix(t);r.applyNormalMatrix(l),r.needsUpdate=!0}let s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(t),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ks.makeRotationFromQuaternion(t),this.applyMatrix4(Ks),this}rotateX(t){return Ks.makeRotationX(t),this.applyMatrix4(Ks),this}rotateY(t){return Ks.makeRotationY(t),this.applyMatrix4(Ks),this}rotateZ(t){return Ks.makeRotationZ(t),this.applyMatrix4(Ks),this}translate(t,i,r){return Ks.makeTranslation(t,i,r),this.applyMatrix4(Ks),this}scale(t,i,r){return Ks.makeScale(t,i,r),this.applyMatrix4(Ks),this}lookAt(t){return xA.lookAt(t),xA.updateMatrix(),this.applyMatrix4(xA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(jf).negate(),this.translate(jf.x,jf.y,jf.z),this}setFromPoints(t){let i=[];for(let r=0,s=t.length;r<s;r++){let l=t[r];i.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new wt(i,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new nn);let t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new N(-1/0,-1/0,-1/0),new N(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),i)for(let r=0,s=i.length;r<s;r++){let l=i[r];Ds.setFromBufferAttribute(l),this.morphTargetsRelative?(Hr.addVectors(this.boundingBox.min,Ds.min),this.boundingBox.expandByPoint(Hr),Hr.addVectors(this.boundingBox.max,Ds.max),this.boundingBox.expandByPoint(Hr)):(this.boundingBox.expandByPoint(Ds.min),this.boundingBox.expandByPoint(Ds.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ur);let t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new N,1/0);return}if(t){let r=this.boundingSphere.center;if(Ds.setFromBufferAttribute(t),i)for(let l=0,d=i.length;l<d;l++){let c=i[l];kv.setFromBufferAttribute(c),this.morphTargetsRelative?(Hr.addVectors(Ds.min,kv.min),Ds.expandByPoint(Hr),Hr.addVectors(Ds.max,kv.max),Ds.expandByPoint(Hr)):(Ds.expandByPoint(kv.min),Ds.expandByPoint(kv.max))}Ds.getCenter(r);let s=0;for(let l=0,d=t.count;l<d;l++)Hr.fromBufferAttribute(t,l),s=Math.max(s,r.distanceToSquared(Hr));if(i)for(let l=0,d=i.length;l<d;l++){let c=i[l],u=this.morphTargetsRelative;for(let h=0,f=c.count;h<f;h++)Hr.fromBufferAttribute(c,h),u&&(jf.fromBufferAttribute(t,h),Hr.add(jf)),s=Math.max(s,r.distanceToSquared(Hr))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,i=this.attributes;if(t===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let r=t.array,s=i.position.array,l=i.normal.array,d=i.uv.array,c=s.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Qt(new Float32Array(4*c),4));let u=this.getAttribute("tangent").array,h=[],f=[];for(let z=0;z<c;z++)h[z]=new N,f[z]=new N;let m=new N,p=new N,g=new N,v=new q,w=new q,x=new q,_=new N,k=new N;function A(z,L,B){m.fromArray(s,z*3),p.fromArray(s,L*3),g.fromArray(s,B*3),v.fromArray(d,z*2),w.fromArray(d,L*2),x.fromArray(d,B*2),p.sub(m),g.sub(m),w.sub(v),x.sub(v);let j=1/(w.x*x.y-x.x*w.y);!isFinite(j)||(_.copy(p).multiplyScalar(x.y).addScaledVector(g,-w.y).multiplyScalar(j),k.copy(g).multiplyScalar(w.x).addScaledVector(p,-x.x).multiplyScalar(j),h[z].add(_),h[L].add(_),h[B].add(_),f[z].add(k),f[L].add(k),f[B].add(k))}let C=this.groups;C.length===0&&(C=[{start:0,count:r.length}]);for(let z=0,L=C.length;z<L;++z){let B=C[z],j=B.start,V=B.count;for(let H=j,Y=j+V;H<Y;H+=3)A(r[H+0],r[H+1],r[H+2])}let M=new N,D=new N,P=new N,T=new N;function O(z){P.fromArray(l,z*3),T.copy(P);let L=h[z];M.copy(L),M.sub(P.multiplyScalar(P.dot(L))).normalize(),D.crossVectors(T,L);let B=D.dot(f[z])<0?-1:1;u[z*4]=M.x,u[z*4+1]=M.y,u[z*4+2]=M.z,u[z*4+3]=B}for(let z=0,L=C.length;z<L;++z){let B=C[z],j=B.start,V=B.count;for(let H=j,Y=j+V;H<Y;H+=3)O(r[H+0]),O(r[H+1]),O(r[H+2])}}computeVertexNormals(){let t=this.index,i=this.getAttribute("position");if(i!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Qt(new Float32Array(i.count*3),3),this.setAttribute("normal",r);else for(let p=0,g=r.count;p<g;p++)r.setXYZ(p,0,0,0);let s=new N,l=new N,d=new N,c=new N,u=new N,h=new N,f=new N,m=new N;if(t)for(let p=0,g=t.count;p<g;p+=3){let v=t.getX(p+0),w=t.getX(p+1),x=t.getX(p+2);s.fromBufferAttribute(i,v),l.fromBufferAttribute(i,w),d.fromBufferAttribute(i,x),f.subVectors(d,l),m.subVectors(s,l),f.cross(m),c.fromBufferAttribute(r,v),u.fromBufferAttribute(r,w),h.fromBufferAttribute(r,x),c.add(f),u.add(f),h.add(f),r.setXYZ(v,c.x,c.y,c.z),r.setXYZ(w,u.x,u.y,u.z),r.setXYZ(x,h.x,h.y,h.z)}else for(let p=0,g=i.count;p<g;p+=3)s.fromBufferAttribute(i,p+0),l.fromBufferAttribute(i,p+1),d.fromBufferAttribute(i,p+2),f.subVectors(d,l),m.subVectors(s,l),f.cross(m),r.setXYZ(p+0,f.x,f.y,f.z),r.setXYZ(p+1,f.x,f.y,f.z),r.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){let t=this.attributes.normal;for(let i=0,r=t.count;i<r;i++)Hr.fromBufferAttribute(t,i),Hr.normalize(),t.setXYZ(i,Hr.x,Hr.y,Hr.z)}toNonIndexed(){function t(c,u){let h=c.array,f=c.itemSize,m=c.normalized,p=new h.constructor(u.length*f),g=0,v=0;for(let w=0,x=u.length;w<x;w++){c.isInterleavedBufferAttribute?g=u[w]*c.data.stride+c.offset:g=u[w]*f;for(let _=0;_<f;_++)p[v++]=h[g++]}return new Qt(p,f,m)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let i=new Nt,r=this.index.array,s=this.attributes;for(let c in s){let u=s[c],h=t(u,r);i.setAttribute(c,h)}let l=this.morphAttributes;for(let c in l){let u=[],h=l[c];for(let f=0,m=h.length;f<m;f++){let p=h[f],g=t(p,r);u.push(g)}i.morphAttributes[c]=u}i.morphTargetsRelative=this.morphTargetsRelative;let d=this.groups;for(let c=0,u=d.length;c<u;c++){let h=d[c];i.addGroup(h.start,h.count,h.materialIndex)}return i}toJSON(){let t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let u=this.parameters;for(let h in u)u[h]!==void 0&&(t[h]=u[h]);return t}t.data={attributes:{}};let i=this.index;i!==null&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});let r=this.attributes;for(let u in r){let h=r[u];t.data.attributes[u]=h.toJSON(t.data)}let s={},l=!1;for(let u in this.morphAttributes){let h=this.morphAttributes[u],f=[];for(let m=0,p=h.length;m<p;m++){let g=h[m];f.push(g.toJSON(t.data))}f.length>0&&(s[u]=f,l=!0)}l&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);let d=this.groups;d.length>0&&(t.data.groups=JSON.parse(JSON.stringify(d)));let c=this.boundingSphere;return c!==null&&(t.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let i={};this.name=t.name;let r=t.index;r!==null&&this.setIndex(r.clone(i));let s=t.attributes;for(let h in s){let f=s[h];this.setAttribute(h,f.clone(i))}let l=t.morphAttributes;for(let h in l){let f=[],m=l[h];for(let p=0,g=m.length;p<g;p++)f.push(m[p].clone(i));this.morphAttributes[h]=f}this.morphTargetsRelative=t.morphTargetsRelative;let d=t.groups;for(let h=0,f=d.length;h<f;h++){let m=d[h];this.addGroup(m.start,m.count,m.materialIndex)}let c=t.boundingBox;c!==null&&(this.boundingBox=c.clone());let u=t.boundingSphere;return u!==null&&(this.boundingSphere=u.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}},zD=new Ze,Uf=new Rf,_A=new Ur,Sv=new N,Av=new N,Cv=new N,kA=new N,Tw=new N,Dw=new q,Pw=new q,Ow=new q,SA=new N,Iw=new N,za=class extends ln{constructor(t=new Nt,i=new _v){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=r.length;s<l;s++){let d=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=s}}}}getVertexPosition(t,i){let r=this.geometry,s=r.attributes.position,l=r.morphAttributes.position,d=r.morphTargetsRelative;i.fromBufferAttribute(s,t);let c=this.morphTargetInfluences;if(l&&c){Tw.set(0,0,0);for(let u=0,h=l.length;u<h;u++){let f=c[u],m=l[u];f!==0&&(kA.fromBufferAttribute(m,t),d?Tw.addScaledVector(kA,f):Tw.addScaledVector(kA.sub(i),f))}i.add(Tw)}return this.isSkinnedMesh&&this.boneTransform(t,i),i}raycast(t,i){let r=this.geometry,s=this.material,l=this.matrixWorld;if(s===void 0||(r.boundingSphere===null&&r.computeBoundingSphere(),_A.copy(r.boundingSphere),_A.applyMatrix4(l),t.ray.intersectsSphere(_A)===!1)||(zD.copy(l).invert(),Uf.copy(t.ray).applyMatrix4(zD),r.boundingBox!==null&&Uf.intersectsBox(r.boundingBox)===!1))return;let d,c=r.index,u=r.attributes.position,h=r.attributes.uv,f=r.attributes.uv2,m=r.groups,p=r.drawRange;if(c!==null)if(Array.isArray(s))for(let g=0,v=m.length;g<v;g++){let w=m[g],x=s[w.materialIndex],_=Math.max(w.start,p.start),k=Math.min(c.count,Math.min(w.start+w.count,p.start+p.count));for(let A=_,C=k;A<C;A+=3){let M=c.getX(A),D=c.getX(A+1),P=c.getX(A+2);d=Rw(this,x,t,Uf,h,f,M,D,P),d&&(d.faceIndex=Math.floor(A/3),d.face.materialIndex=w.materialIndex,i.push(d))}}else{let g=Math.max(0,p.start),v=Math.min(c.count,p.start+p.count);for(let w=g,x=v;w<x;w+=3){let _=c.getX(w),k=c.getX(w+1),A=c.getX(w+2);d=Rw(this,s,t,Uf,h,f,_,k,A),d&&(d.faceIndex=Math.floor(w/3),i.push(d))}}else if(u!==void 0)if(Array.isArray(s))for(let g=0,v=m.length;g<v;g++){let w=m[g],x=s[w.materialIndex],_=Math.max(w.start,p.start),k=Math.min(u.count,Math.min(w.start+w.count,p.start+p.count));for(let A=_,C=k;A<C;A+=3){let M=A,D=A+1,P=A+2;d=Rw(this,x,t,Uf,h,f,M,D,P),d&&(d.faceIndex=Math.floor(A/3),d.face.materialIndex=w.materialIndex,i.push(d))}}else{let g=Math.max(0,p.start),v=Math.min(u.count,p.start+p.count);for(let w=g,x=v;w<x;w+=3){let _=w,k=w+1,A=w+2;d=Rw(this,s,t,Uf,h,f,_,k,A),d&&(d.faceIndex=Math.floor(w/3),i.push(d))}}}};function FF(t,i,r,s,l,d,c,u){let h;if(i.side===qn?h=s.intersectTriangle(c,d,l,!0,u):h=s.intersectTriangle(l,d,c,i.side===qs,u),h===null)return null;Iw.copy(u),Iw.applyMatrix4(t.matrixWorld);let f=r.ray.origin.distanceTo(Iw);return f<r.near||f>r.far?null:{distance:f,point:Iw.clone(),object:t}}function Rw(t,i,r,s,l,d,c,u,h){t.getVertexPosition(c,Sv),t.getVertexPosition(u,Av),t.getVertexPosition(h,Cv);let f=FF(t,i,r,s,Sv,Av,Cv,SA);if(f){l&&(Dw.fromBufferAttribute(l,c),Pw.fromBufferAttribute(l,u),Ow.fromBufferAttribute(l,h),f.uv=ua.getUV(SA,Sv,Av,Cv,Dw,Pw,Ow,new q)),d&&(Dw.fromBufferAttribute(d,c),Pw.fromBufferAttribute(d,u),Ow.fromBufferAttribute(d,h),f.uv2=ua.getUV(SA,Sv,Av,Cv,Dw,Pw,Ow,new q));let m={a:c,b:u,c:h,normal:new N,materialIndex:0};ua.getNormal(Sv,Av,Cv,m.normal),f.face=m}return f}var bl=class extends Nt{constructor(t=1,i=1,r=1,s=1,l=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:i,depth:r,widthSegments:s,heightSegments:l,depthSegments:d};let c=this;s=Math.floor(s),l=Math.floor(l),d=Math.floor(d);let u=[],h=[],f=[],m=[],p=0,g=0;v("z","y","x",-1,-1,r,i,t,d,l,0),v("z","y","x",1,-1,r,i,-t,d,l,1),v("x","z","y",1,1,t,r,i,s,d,2),v("x","z","y",1,-1,t,r,-i,s,d,3),v("x","y","z",1,-1,t,i,r,s,l,4),v("x","y","z",-1,-1,t,i,-r,s,l,5),this.setIndex(u),this.setAttribute("position",new wt(h,3)),this.setAttribute("normal",new wt(f,3)),this.setAttribute("uv",new wt(m,2));function v(w,x,_,k,A,C,M,D,P,T,O){let z=C/P,L=M/T,B=C/2,j=M/2,V=D/2,H=P+1,Y=T+1,se=0,re=0,$=new N;for(let te=0;te<Y;te++){let he=te*L-j;for(let oe=0;oe<H;oe++){let ee=oe*z-B;$[w]=ee*k,$[x]=he*A,$[_]=V,h.push($.x,$.y,$.z),$[w]=0,$[x]=0,$[_]=D>0?1:-1,f.push($.x,$.y,$.z),m.push(oe/P),m.push(1-te/T),se+=1}}for(let te=0;te<T;te++)for(let he=0;he<P;he++){let oe=p+he+H*te,ee=p+he+H*(te+1),pe=p+(he+1)+H*(te+1),ce=p+(he+1)+H*te;u.push(oe,ee,ce),u.push(ee,pe,ce),re+=6}c.addGroup(g,re,O),g+=re,p+=se}}static fromJSON(t){return new bl(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function Vf(t){let i={};for(let r in t){i[r]={};for(let s in t[r]){let l=t[r][s];l&&(l.isColor||l.isMatrix3||l.isMatrix4||l.isVector2||l.isVector3||l.isVector4||l.isTexture||l.isQuaternion)?i[r][s]=l.clone():Array.isArray(l)?i[r][s]=l.slice():i[r][s]=l}}return i}function La(t){let i={};for(let r=0;r<t.length;r++){let s=Vf(t[r]);for(let l in s)i[l]=s[l]}return i}function NF(t){let i=[];for(let r=0;r<t.length;r++)i.push(t[r].clone());return i}function LD(t){return t.getRenderTarget()===null&&t.outputEncoding===ci?As:gd}var Hf={clone:Vf,merge:La},jF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,UF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,gn=class extends xv{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=jF,this.fragmentShader=UF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Vf(t.uniforms),this.uniformsGroups=NF(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){let i=super.toJSON(t);i.glslVersion=this.glslVersion,i.uniforms={};for(let s in this.uniforms){let l=this.uniforms[s].value;l&&l.isTexture?i.uniforms[s]={type:"t",value:l.toJSON(t).uuid}:l&&l.isColor?i.uniforms[s]={type:"c",value:l.getHex()}:l&&l.isVector2?i.uniforms[s]={type:"v2",value:l.toArray()}:l&&l.isVector3?i.uniforms[s]={type:"v3",value:l.toArray()}:l&&l.isVector4?i.uniforms[s]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?i.uniforms[s]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?i.uniforms[s]={type:"m4",value:l.toArray()}:i.uniforms[s]={value:l}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader;let r={};for(let s in this.extensions)this.extensions[s]===!0&&(r[s]=!0);return Object.keys(r).length>0&&(i.extensions=r),i}},Gf=class extends ln{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ze,this.projectionMatrix=new Ze,this.projectionMatrixInverse=new Ze}copy(t,i){return super.copy(t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);let i=this.matrixWorld.elements;return t.set(-i[8],-i[9],-i[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},ha=class extends Gf{constructor(t=50,i=1,r=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=r,this.far=s,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let i=.5*this.getFilmHeight()/t;this.fov=ml*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(Vu*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return ml*2*Math.atan(Math.tan(Vu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,i,r,s,l,d){this.aspect=t/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=r,this.view.offsetY=s,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,i=t*Math.tan(Vu*.5*this.fov)/this.zoom,r=2*i,s=this.aspect*r,l=-.5*s,d=this.view;if(this.view!==null&&this.view.enabled){let u=d.fullWidth,h=d.fullHeight;l+=d.offsetX*s/u,i-=d.offsetY*r/h,s*=d.width/u,r*=d.height/h}let c=this.filmOffset;c!==0&&(l+=t*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+s,i,i-r,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let i=super.toJSON(t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}},Wf=-90,qf=1,VF=class extends ln{constructor(t,i,r){super(),this.type="CubeCamera",this.renderTarget=r;let s=new ha(Wf,qf,t,i);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(1,0,0),this.add(s);let l=new ha(Wf,qf,t,i);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(-1,0,0),this.add(l);let d=new ha(Wf,qf,t,i);d.layers=this.layers,d.up.set(0,0,-1),d.lookAt(0,1,0),this.add(d);let c=new ha(Wf,qf,t,i);c.layers=this.layers,c.up.set(0,0,1),c.lookAt(0,-1,0),this.add(c);let u=new ha(Wf,qf,t,i);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,1),this.add(u);let h=new ha(Wf,qf,t,i);h.layers=this.layers,h.up.set(0,1,0),h.lookAt(0,0,-1),this.add(h)}update(t,i){this.parent===null&&this.updateMatrixWorld();let r=this.renderTarget,[s,l,d,c,u,h]=this.children,f=t.getRenderTarget(),m=t.toneMapping,p=t.xr.enabled;t.toneMapping=Co,t.xr.enabled=!1;let g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0),t.render(i,s),t.setRenderTarget(r,1),t.render(i,l),t.setRenderTarget(r,2),t.render(i,d),t.setRenderTarget(r,3),t.render(i,c),t.setRenderTarget(r,4),t.render(i,u),r.texture.generateMipmaps=g,t.setRenderTarget(r,5),t.render(i,h),t.setRenderTarget(f),t.toneMapping=m,t.xr.enabled=p,r.texture.needsPMREMUpdate=!0}},AA=class extends zn{constructor(t,i,r,s,l,d,c,u,h,f){t=t!==void 0?t:[],i=i!==void 0?i:mc,super(t,i,r,s,l,d,c,u,h,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},HF=class extends Oi{constructor(t=1,i={}){super(t,t,i),this.isWebGLCubeRenderTarget=!0;let r={width:t,height:t,depth:1},s=[r,r,r,r,r,r];this.texture=new AA(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:yi}fromEquirectangularTexture(t,i){this.texture.type=i.type,this.texture.encoding=i.encoding,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;let r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new bl(5,5,5),l=new gn({name:"CubemapFromEquirect",uniforms:Vf(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:qn,blending:$n});l.uniforms.tEquirect.value=i;let d=new za(s,l),c=i.minFilter;return i.minFilter===vc&&(i.minFilter=yi),new VF(1,10,this).update(t,d),i.minFilter=c,d.geometry.dispose(),d.material.dispose(),this}clear(t,i,r,s){let l=t.getRenderTarget();for(let d=0;d<6;d++)t.setRenderTarget(this,d),t.clear(i,r,s);t.setRenderTarget(l)}},CA=new N,GF=new N,WF=new Me,Ps=class{constructor(t=new N(1,0,0),i=0){this.isPlane=!0,this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,r,s){return this.normal.set(t,i,r),this.constant=s,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,r){let s=CA.subVectors(r,i).cross(GF.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(s,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,i){let r=t.delta(CA),s=this.normal.dot(r);if(s===0)return this.distanceToPoint(t.start)===0?i.copy(t.start):null;let l=-(t.start.dot(this.normal)+this.constant)/s;return l<0||l>1?null:i.copy(r).multiplyScalar(l).add(t.start)}intersectsLine(t){let i=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return i<0&&r>0||r<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){let r=i||WF.getNormalMatrix(t),s=this.coplanarPoint(CA).applyMatrix4(t),l=this.normal.applyMatrix3(r).normalize();return this.constant=-s.dot(l),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},$f=new Ur,zw=new N,EA=class{constructor(t=new Ps,i=new Ps,r=new Ps,s=new Ps,l=new Ps,d=new Ps){this.planes=[t,i,r,s,l,d]}set(t,i,r,s,l,d){let c=this.planes;return c[0].copy(t),c[1].copy(i),c[2].copy(r),c[3].copy(s),c[4].copy(l),c[5].copy(d),this}copy(t){let i=this.planes;for(let r=0;r<6;r++)i[r].copy(t.planes[r]);return this}setFromProjectionMatrix(t){let i=this.planes,r=t.elements,s=r[0],l=r[1],d=r[2],c=r[3],u=r[4],h=r[5],f=r[6],m=r[7],p=r[8],g=r[9],v=r[10],w=r[11],x=r[12],_=r[13],k=r[14],A=r[15];return i[0].setComponents(c-s,m-u,w-p,A-x).normalize(),i[1].setComponents(c+s,m+u,w+p,A+x).normalize(),i[2].setComponents(c+l,m+h,w+g,A+_).normalize(),i[3].setComponents(c-l,m-h,w-g,A-_).normalize(),i[4].setComponents(c-d,m-f,w-v,A-k).normalize(),i[5].setComponents(c+d,m+f,w+v,A+k).normalize(),this}intersectsObject(t){let i=t.geometry;return i.boundingSphere===null&&i.computeBoundingSphere(),$f.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere($f)}intersectsSprite(t){return $f.center.set(0,0,0),$f.radius=.7071067811865476,$f.applyMatrix4(t.matrixWorld),this.intersectsSphere($f)}intersectsSphere(t){let i=this.planes,r=t.center,s=-t.radius;for(let l=0;l<6;l++)if(i[l].distanceToPoint(r)<s)return!1;return!0}intersectsBox(t){let i=this.planes;for(let r=0;r<6;r++){let s=i[r];if(zw.x=s.normal.x>0?t.max.x:t.min.x,zw.y=s.normal.y>0?t.max.y:t.min.y,zw.z=s.normal.z>0?t.max.z:t.min.z,s.distanceToPoint(zw)<0)return!1}return!0}containsPoint(t){let i=this.planes;for(let r=0;r<6;r++)if(i[r].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function BD(){let t=null,i=!1,r=null,s=null;function l(d,c){r(d,c),s=t.requestAnimationFrame(l)}return{start:function(){i!==!0&&r!==null&&(s=t.requestAnimationFrame(l),i=!0)},stop:function(){t.cancelAnimationFrame(s),i=!1},setAnimationLoop:function(d){r=d},setContext:function(d){t=d}}}function qF(t,i){let r=i.isWebGL2,s=new WeakMap;function l(f,m){let p=f.array,g=f.usage,v=t.createBuffer();t.bindBuffer(m,v),t.bufferData(m,p,g),f.onUploadCallback();let w;if(p instanceof Float32Array)w=5126;else if(p instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(r)w=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else w=5123;else if(p instanceof Int16Array)w=5122;else if(p instanceof Uint32Array)w=5125;else if(p instanceof Int32Array)w=5124;else if(p instanceof Int8Array)w=5120;else if(p instanceof Uint8Array)w=5121;else if(p instanceof Uint8ClampedArray)w=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:v,type:w,bytesPerElement:p.BYTES_PER_ELEMENT,version:f.version}}function d(f,m,p){let g=m.array,v=m.updateRange;t.bindBuffer(p,f),v.count===-1?t.bufferSubData(p,0,g):(r?t.bufferSubData(p,v.offset*g.BYTES_PER_ELEMENT,g,v.offset,v.count):t.bufferSubData(p,v.offset*g.BYTES_PER_ELEMENT,g.subarray(v.offset,v.offset+v.count)),v.count=-1),m.onUploadCallback()}function c(f){return f.isInterleavedBufferAttribute&&(f=f.data),s.get(f)}function u(f){f.isInterleavedBufferAttribute&&(f=f.data);let m=s.get(f);m&&(t.deleteBuffer(m.buffer),s.delete(f))}function h(f,m){if(f.isGLBufferAttribute){let g=s.get(f);(!g||g.version<f.version)&&s.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);let p=s.get(f);p===void 0?s.set(f,l(f,m)):p.version<f.version&&(d(p.buffer,f,m),p.version=f.version)}return{get:c,remove:u,update:h}}var Lw=class extends Nt{constructor(t=1,i=1,r=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:r,heightSegments:s};let l=t/2,d=i/2,c=Math.floor(r),u=Math.floor(s),h=c+1,f=u+1,m=t/c,p=i/u,g=[],v=[],w=[],x=[];for(let _=0;_<f;_++){let k=_*p-d;for(let A=0;A<h;A++){let C=A*m-l;v.push(C,-k,0),w.push(0,0,1),x.push(A/c),x.push(1-_/u)}}for(let _=0;_<u;_++)for(let k=0;k<c;k++){let A=k+h*_,C=k+h*(_+1),M=k+1+h*(_+1),D=k+1+h*_;g.push(A,C,D),g.push(C,M,D)}this.setIndex(g),this.setAttribute("position",new wt(v,3)),this.setAttribute("normal",new wt(w,3)),this.setAttribute("uv",new wt(x,2))}static fromJSON(t){return new Lw(t.width,t.height,t.widthSegments,t.heightSegments)}},$F=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,ZF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,YF=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,XF=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,KF=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,QF=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,JF="vec3 transformed = vec3( position );",eN=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,tN=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,iN=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,nN=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,rN=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,aN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,sN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,oN=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,lN=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,dN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,cN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,uN=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,hN=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,fN=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,pN=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,mN=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,gN=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,vN=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,yN=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,bN="gl_FragColor = linearToOutputTexel( gl_FragColor );",wN=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,xN=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,_N=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,kN=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,SN=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,AN=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,CN=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,EN=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,MN=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,TN=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,DN=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,PN=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,ON=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,IN=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,RN=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,zN=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,LN=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,BN=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,FN=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,NN=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,jN=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,UN=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,VN=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,HN=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,GN=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,WN=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,qN=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,$N=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ZN=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,YN=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,XN=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,KN=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,QN=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,JN=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,e8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,t8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,i8=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,n8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,r8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,a8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,s8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,o8=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,l8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,d8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,c8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,u8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,h8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,f8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,p8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,m8=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,g8=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,v8=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,y8=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,b8=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,w8=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,x8=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,_8=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,k8=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,S8=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,A8=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,C8=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,E8=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,M8=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,T8=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,D8=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,P8=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,O8=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,I8=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,R8=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,z8=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,L8=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,B8=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,F8=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,N8=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,j8=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,U8=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,V8=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,H8=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,G8=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,W8=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,q8=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,$8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Z8=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Y8=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,X8=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,K8=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Q8=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,J8=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,ej=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,tj=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,ij=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,nj=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,rj=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,aj=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,sj=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oj=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lj=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dj=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,cj=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uj=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,hj=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,fj=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pj=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mj=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,gj=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vj=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yj=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bj=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,wj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xj=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_j=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,kj=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Sj=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,bi={alphamap_fragment:$F,alphamap_pars_fragment:ZF,alphatest_fragment:YF,alphatest_pars_fragment:XF,aomap_fragment:KF,aomap_pars_fragment:QF,begin_vertex:JF,beginnormal_vertex:eN,bsdfs:tN,iridescence_fragment:iN,bumpmap_pars_fragment:nN,clipping_planes_fragment:rN,clipping_planes_pars_fragment:aN,clipping_planes_pars_vertex:sN,clipping_planes_vertex:oN,color_fragment:lN,color_pars_fragment:dN,color_pars_vertex:cN,color_vertex:uN,common:hN,cube_uv_reflection_fragment:fN,defaultnormal_vertex:pN,displacementmap_pars_vertex:mN,displacementmap_vertex:gN,emissivemap_fragment:vN,emissivemap_pars_fragment:yN,encodings_fragment:bN,encodings_pars_fragment:wN,envmap_fragment:xN,envmap_common_pars_fragment:_N,envmap_pars_fragment:kN,envmap_pars_vertex:SN,envmap_physical_pars_fragment:LN,envmap_vertex:AN,fog_vertex:CN,fog_pars_vertex:EN,fog_fragment:MN,fog_pars_fragment:TN,gradientmap_pars_fragment:DN,lightmap_fragment:PN,lightmap_pars_fragment:ON,lights_lambert_fragment:IN,lights_lambert_pars_fragment:RN,lights_pars_begin:zN,lights_toon_fragment:BN,lights_toon_pars_fragment:FN,lights_phong_fragment:NN,lights_phong_pars_fragment:jN,lights_physical_fragment:UN,lights_physical_pars_fragment:VN,lights_fragment_begin:HN,lights_fragment_maps:GN,lights_fragment_end:WN,logdepthbuf_fragment:qN,logdepthbuf_pars_fragment:$N,logdepthbuf_pars_vertex:ZN,logdepthbuf_vertex:YN,map_fragment:XN,map_pars_fragment:KN,map_particle_fragment:QN,map_particle_pars_fragment:JN,metalnessmap_fragment:e8,metalnessmap_pars_fragment:t8,morphcolor_vertex:i8,morphnormal_vertex:n8,morphtarget_pars_vertex:r8,morphtarget_vertex:a8,normal_fragment_begin:s8,normal_fragment_maps:o8,normal_pars_fragment:l8,normal_pars_vertex:d8,normal_vertex:c8,normalmap_pars_fragment:u8,clearcoat_normal_fragment_begin:h8,clearcoat_normal_fragment_maps:f8,clearcoat_pars_fragment:p8,iridescence_pars_fragment:m8,output_fragment:g8,packing:v8,premultiplied_alpha_fragment:y8,project_vertex:b8,dithering_fragment:w8,dithering_pars_fragment:x8,roughnessmap_fragment:_8,roughnessmap_pars_fragment:k8,shadowmap_pars_fragment:S8,shadowmap_pars_vertex:A8,shadowmap_vertex:C8,shadowmask_pars_fragment:E8,skinbase_vertex:M8,skinning_pars_vertex:T8,skinning_vertex:D8,skinnormal_vertex:P8,specularmap_fragment:O8,specularmap_pars_fragment:I8,tonemapping_fragment:R8,tonemapping_pars_fragment:z8,transmission_fragment:L8,transmission_pars_fragment:B8,uv_pars_fragment:F8,uv_pars_vertex:N8,uv_vertex:j8,uv2_pars_fragment:U8,uv2_pars_vertex:V8,uv2_vertex:H8,worldpos_vertex:G8,background_vert:W8,background_frag:q8,backgroundCube_vert:$8,backgroundCube_frag:Z8,cube_vert:Y8,cube_frag:X8,depth_vert:K8,depth_frag:Q8,distanceRGBA_vert:J8,distanceRGBA_frag:ej,equirect_vert:tj,equirect_frag:ij,linedashed_vert:nj,linedashed_frag:rj,meshbasic_vert:aj,meshbasic_frag:sj,meshlambert_vert:oj,meshlambert_frag:lj,meshmatcap_vert:dj,meshmatcap_frag:cj,meshnormal_vert:uj,meshnormal_frag:hj,meshphong_vert:fj,meshphong_frag:pj,meshphysical_vert:mj,meshphysical_frag:gj,meshtoon_vert:vj,meshtoon_frag:yj,points_vert:bj,points_frag:wj,shadow_vert:xj,shadow_frag:_j,sprite_vert:kj,sprite_frag:Sj},lt={common:{diffuse:{value:new _t(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Me},uv2Transform:{value:new Me},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new q(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _t(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _t(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Me}},sprite:{diffuse:{value:new _t(16777215)},opacity:{value:1},center:{value:new q(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Me}}},wl={basic:{uniforms:La([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.fog]),vertexShader:bi.meshbasic_vert,fragmentShader:bi.meshbasic_frag},lambert:{uniforms:La([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new _t(0)}}]),vertexShader:bi.meshlambert_vert,fragmentShader:bi.meshlambert_frag},phong:{uniforms:La([lt.common,lt.specularmap,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,lt.lights,{emissive:{value:new _t(0)},specular:{value:new _t(1118481)},shininess:{value:30}}]),vertexShader:bi.meshphong_vert,fragmentShader:bi.meshphong_frag},standard:{uniforms:La([lt.common,lt.envmap,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.roughnessmap,lt.metalnessmap,lt.fog,lt.lights,{emissive:{value:new _t(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bi.meshphysical_vert,fragmentShader:bi.meshphysical_frag},toon:{uniforms:La([lt.common,lt.aomap,lt.lightmap,lt.emissivemap,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.gradientmap,lt.fog,lt.lights,{emissive:{value:new _t(0)}}]),vertexShader:bi.meshtoon_vert,fragmentShader:bi.meshtoon_frag},matcap:{uniforms:La([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,lt.fog,{matcap:{value:null}}]),vertexShader:bi.meshmatcap_vert,fragmentShader:bi.meshmatcap_frag},points:{uniforms:La([lt.points,lt.fog]),vertexShader:bi.points_vert,fragmentShader:bi.points_frag},dashed:{uniforms:La([lt.common,lt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bi.linedashed_vert,fragmentShader:bi.linedashed_frag},depth:{uniforms:La([lt.common,lt.displacementmap]),vertexShader:bi.depth_vert,fragmentShader:bi.depth_frag},normal:{uniforms:La([lt.common,lt.bumpmap,lt.normalmap,lt.displacementmap,{opacity:{value:1}}]),vertexShader:bi.meshnormal_vert,fragmentShader:bi.meshnormal_frag},sprite:{uniforms:La([lt.sprite,lt.fog]),vertexShader:bi.sprite_vert,fragmentShader:bi.sprite_frag},background:{uniforms:{uvTransform:{value:new Me},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:bi.background_vert,fragmentShader:bi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:bi.backgroundCube_vert,fragmentShader:bi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:bi.cube_vert,fragmentShader:bi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bi.equirect_vert,fragmentShader:bi.equirect_frag},distanceRGBA:{uniforms:La([lt.common,lt.displacementmap,{referencePosition:{value:new N},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bi.distanceRGBA_vert,fragmentShader:bi.distanceRGBA_frag},shadow:{uniforms:La([lt.lights,lt.fog,{color:{value:new _t(0)},opacity:{value:1}}]),vertexShader:bi.shadow_vert,fragmentShader:bi.shadow_frag}};wl.physical={uniforms:La([wl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new q(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new _t(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new q},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new _t(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new _t(1,1,1)},specularColorMap:{value:null}}]),vertexShader:bi.meshphysical_vert,fragmentShader:bi.meshphysical_frag};var Bw={r:0,b:0,g:0};function Aj(t,i,r,s,l,d,c){let u=new _t(0),h=d===!0?0:1,f,m,p=null,g=0,v=null;function w(_,k){let A=!1,C=k.isScene===!0?k.background:null;C&&C.isTexture&&(C=(k.backgroundBlurriness>0?r:i).get(C));let M=t.xr,D=M.getSession&&M.getSession();D&&D.environmentBlendMode==="additive"&&(C=null),C===null?x(u,h):C&&C.isColor&&(x(C,1),A=!0),(t.autoClear||A)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),C&&(C.isCubeTexture||C.mapping===Bu)?(m===void 0&&(m=new za(new bl(1,1,1),new gn({name:"BackgroundCubeMaterial",uniforms:Vf(wl.backgroundCube.uniforms),vertexShader:wl.backgroundCube.vertexShader,fragmentShader:wl.backgroundCube.fragmentShader,side:qn,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(P,T,O){this.matrixWorld.copyPosition(O.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(m)),m.material.uniforms.envMap.value=C,m.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,m.material.uniforms.backgroundBlurriness.value=k.backgroundBlurriness,m.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,m.material.toneMapped=C.encoding!==ci,(p!==C||g!==C.version||v!==t.toneMapping)&&(m.material.needsUpdate=!0,p=C,g=C.version,v=t.toneMapping),m.layers.enableAll(),_.unshift(m,m.geometry,m.material,0,0,null)):C&&C.isTexture&&(f===void 0&&(f=new za(new Lw(2,2),new gn({name:"BackgroundMaterial",uniforms:Vf(wl.background.uniforms),vertexShader:wl.background.vertexShader,fragmentShader:wl.background.fragmentShader,side:qs,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(f)),f.material.uniforms.t2D.value=C,f.material.uniforms.backgroundIntensity.value=k.backgroundIntensity,f.material.toneMapped=C.encoding!==ci,C.matrixAutoUpdate===!0&&C.updateMatrix(),f.material.uniforms.uvTransform.value.copy(C.matrix),(p!==C||g!==C.version||v!==t.toneMapping)&&(f.material.needsUpdate=!0,p=C,g=C.version,v=t.toneMapping),f.layers.enableAll(),_.unshift(f,f.geometry,f.material,0,0,null))}function x(_,k){_.getRGB(Bw,LD(t)),s.buffers.color.setClear(Bw.r,Bw.g,Bw.b,k,c)}return{getClearColor:function(){return u},setClearColor:function(_,k=1){u.set(_),h=k,x(u,h)},getClearAlpha:function(){return h},setClearAlpha:function(_){h=_,x(u,h)},render:w}}function Cj(t,i,r,s){let l=t.getParameter(34921),d=s.isWebGL2?null:i.get("OES_vertex_array_object"),c=s.isWebGL2||d!==null,u={},h=_(null),f=h,m=!1;function p(H,Y,se,re,$){let te=!1;if(c){let he=x(re,se,Y);f!==he&&(f=he,v(f.object)),te=k(H,re,se,$),te&&A(H,re,se,$)}else{let he=Y.wireframe===!0;(f.geometry!==re.id||f.program!==se.id||f.wireframe!==he)&&(f.geometry=re.id,f.program=se.id,f.wireframe=he,te=!0)}$!==null&&r.update($,34963),(te||m)&&(m=!1,O(H,Y,se,re),$!==null&&t.bindBuffer(34963,r.get($).buffer))}function g(){return s.isWebGL2?t.createVertexArray():d.createVertexArrayOES()}function v(H){return s.isWebGL2?t.bindVertexArray(H):d.bindVertexArrayOES(H)}function w(H){return s.isWebGL2?t.deleteVertexArray(H):d.deleteVertexArrayOES(H)}function x(H,Y,se){let re=se.wireframe===!0,$=u[H.id];$===void 0&&($={},u[H.id]=$);let te=$[Y.id];te===void 0&&(te={},$[Y.id]=te);let he=te[re];return he===void 0&&(he=_(g()),te[re]=he),he}function _(H){let Y=[],se=[],re=[];for(let $=0;$<l;$++)Y[$]=0,se[$]=0,re[$]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:se,attributeDivisors:re,object:H,attributes:{},index:null}}function k(H,Y,se,re){let $=f.attributes,te=Y.attributes,he=0,oe=se.getAttributes();for(let ee in oe)if(oe[ee].location>=0){let pe=$[ee],ce=te[ee];if(ce===void 0&&(ee==="instanceMatrix"&&H.instanceMatrix&&(ce=H.instanceMatrix),ee==="instanceColor"&&H.instanceColor&&(ce=H.instanceColor)),pe===void 0||pe.attribute!==ce||ce&&pe.data!==ce.data)return!0;he++}return f.attributesNum!==he||f.index!==re}function A(H,Y,se,re){let $={},te=Y.attributes,he=0,oe=se.getAttributes();for(let ee in oe)if(oe[ee].location>=0){let pe=te[ee];pe===void 0&&(ee==="instanceMatrix"&&H.instanceMatrix&&(pe=H.instanceMatrix),ee==="instanceColor"&&H.instanceColor&&(pe=H.instanceColor));let ce={};ce.attribute=pe,pe&&pe.data&&(ce.data=pe.data),$[ee]=ce,he++}f.attributes=$,f.attributesNum=he,f.index=re}function C(){let H=f.newAttributes;for(let Y=0,se=H.length;Y<se;Y++)H[Y]=0}function M(H){D(H,0)}function D(H,Y){let se=f.newAttributes,re=f.enabledAttributes,$=f.attributeDivisors;se[H]=1,re[H]===0&&(t.enableVertexAttribArray(H),re[H]=1),$[H]!==Y&&((s.isWebGL2?t:i.get("ANGLE_instanced_arrays"))[s.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](H,Y),$[H]=Y)}function P(){let H=f.newAttributes,Y=f.enabledAttributes;for(let se=0,re=Y.length;se<re;se++)Y[se]!==H[se]&&(t.disableVertexAttribArray(se),Y[se]=0)}function T(H,Y,se,re,$,te){s.isWebGL2===!0&&(se===5124||se===5125)?t.vertexAttribIPointer(H,Y,se,$,te):t.vertexAttribPointer(H,Y,se,re,$,te)}function O(H,Y,se,re){if(s.isWebGL2===!1&&(H.isInstancedMesh||re.isInstancedBufferGeometry)&&i.get("ANGLE_instanced_arrays")===null)return;C();let $=re.attributes,te=se.getAttributes(),he=Y.defaultAttributeValues;for(let oe in te){let ee=te[oe];if(ee.location>=0){let pe=$[oe];if(pe===void 0&&(oe==="instanceMatrix"&&H.instanceMatrix&&(pe=H.instanceMatrix),oe==="instanceColor"&&H.instanceColor&&(pe=H.instanceColor)),pe!==void 0){let ce=pe.normalized,ve=pe.itemSize,le=r.get(pe);if(le===void 0)continue;let Pe=le.buffer,we=le.type,Ee=le.bytesPerElement;if(pe.isInterleavedBufferAttribute){let xe=pe.data,Ue=xe.stride,Le=pe.offset;if(xe.isInstancedInterleavedBuffer){for(let Ie=0;Ie<ee.locationSize;Ie++)D(ee.location+Ie,xe.meshPerAttribute);H.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=xe.meshPerAttribute*xe.count)}else for(let Ie=0;Ie<ee.locationSize;Ie++)M(ee.location+Ie);t.bindBuffer(34962,Pe);for(let Ie=0;Ie<ee.locationSize;Ie++)T(ee.location+Ie,ve/ee.locationSize,we,ce,Ue*Ee,(Le+ve/ee.locationSize*Ie)*Ee)}else{if(pe.isInstancedBufferAttribute){for(let xe=0;xe<ee.locationSize;xe++)D(ee.location+xe,pe.meshPerAttribute);H.isInstancedMesh!==!0&&re._maxInstanceCount===void 0&&(re._maxInstanceCount=pe.meshPerAttribute*pe.count)}else for(let xe=0;xe<ee.locationSize;xe++)M(ee.location+xe);t.bindBuffer(34962,Pe);for(let xe=0;xe<ee.locationSize;xe++)T(ee.location+xe,ve/ee.locationSize,we,ce,ve*Ee,ve/ee.locationSize*xe*Ee)}}else if(he!==void 0){let ce=he[oe];if(ce!==void 0)switch(ce.length){case 2:t.vertexAttrib2fv(ee.location,ce);break;case 3:t.vertexAttrib3fv(ee.location,ce);break;case 4:t.vertexAttrib4fv(ee.location,ce);break;default:t.vertexAttrib1fv(ee.location,ce)}}}}P()}function z(){j();for(let H in u){let Y=u[H];for(let se in Y){let re=Y[se];for(let $ in re)w(re[$].object),delete re[$];delete Y[se]}delete u[H]}}function L(H){if(u[H.id]===void 0)return;let Y=u[H.id];for(let se in Y){let re=Y[se];for(let $ in re)w(re[$].object),delete re[$];delete Y[se]}delete u[H.id]}function B(H){for(let Y in u){let se=u[Y];if(se[H.id]===void 0)continue;let re=se[H.id];for(let $ in re)w(re[$].object),delete re[$];delete se[H.id]}}function j(){V(),m=!0,f!==h&&(f=h,v(f.object))}function V(){h.geometry=null,h.program=null,h.wireframe=!1}return{setup:p,reset:j,resetDefaultState:V,dispose:z,releaseStatesOfGeometry:L,releaseStatesOfProgram:B,initAttributes:C,enableAttribute:M,disableUnusedAttributes:P}}function Ej(t,i,r,s){let l=s.isWebGL2,d;function c(f){d=f}function u(f,m){t.drawArrays(d,f,m),r.update(m,d,1)}function h(f,m,p){if(p===0)return;let g,v;if(l)g=t,v="drawArraysInstanced";else if(g=i.get("ANGLE_instanced_arrays"),v="drawArraysInstancedANGLE",g===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](d,f,m,p),r.update(m,d,p)}this.setMode=c,this.render=u,this.renderInstances=h}function Mj(t,i,r){let s;function l(){if(s!==void 0)return s;if(i.has("EXT_texture_filter_anisotropic")===!0){let T=i.get("EXT_texture_filter_anisotropic");s=t.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function d(T){if(T==="highp"){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";T="mediump"}return T==="mediump"&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}let c=typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext,u=r.precision!==void 0?r.precision:"highp",h=d(u);h!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",h,"instead."),u=h);let f=c||i.has("WEBGL_draw_buffers"),m=r.logarithmicDepthBuffer===!0,p=t.getParameter(34930),g=t.getParameter(35660),v=t.getParameter(3379),w=t.getParameter(34076),x=t.getParameter(34921),_=t.getParameter(36347),k=t.getParameter(36348),A=t.getParameter(36349),C=g>0,M=c||i.has("OES_texture_float"),D=C&&M,P=c?t.getParameter(36183):0;return{isWebGL2:c,drawBuffers:f,getMaxAnisotropy:l,getMaxPrecision:d,precision:u,logarithmicDepthBuffer:m,maxTextures:p,maxVertexTextures:g,maxTextureSize:v,maxCubemapSize:w,maxAttributes:x,maxVertexUniforms:_,maxVaryings:k,maxFragmentUniforms:A,vertexTextures:C,floatFragmentTextures:M,floatVertexTextures:D,maxSamples:P}}function Tj(t){let i=this,r=null,s=0,l=!1,d=!1,c=new Ps,u=new Me,h={value:null,needsUpdate:!1};this.uniform=h,this.numPlanes=0,this.numIntersection=0,this.init=function(p,g){let v=p.length!==0||g||s!==0||l;return l=g,s=p.length,v},this.beginShadows=function(){d=!0,m(null)},this.endShadows=function(){d=!1},this.setGlobalState=function(p,g){r=m(p,g,0)},this.setState=function(p,g,v){let w=p.clippingPlanes,x=p.clipIntersection,_=p.clipShadows,k=t.get(p);if(!l||w===null||w.length===0||d&&!_)d?m(null):f();else{let A=d?0:s,C=A*4,M=k.clippingState||null;h.value=M,M=m(w,g,C,v);for(let D=0;D!==C;++D)M[D]=r[D];k.clippingState=M,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=A}};function f(){h.value!==r&&(h.value=r,h.needsUpdate=s>0),i.numPlanes=s,i.numIntersection=0}function m(p,g,v,w){let x=p!==null?p.length:0,_=null;if(x!==0){if(_=h.value,w!==!0||_===null){let k=v+x*4,A=g.matrixWorldInverse;u.getNormalMatrix(A),(_===null||_.length<k)&&(_=new Float32Array(k));for(let C=0,M=v;C!==x;++C,M+=4)c.copy(p[C]).applyMatrix4(A,u),c.normal.toArray(_,M),_[M+3]=c.constant}h.value=_,h.needsUpdate=!0}return i.numPlanes=x,i.numIntersection=0,_}}function Dj(t){let i=new WeakMap;function r(c,u){return u===iv?c.mapping=mc:u===nv&&(c.mapping=gc),c}function s(c){if(c&&c.isTexture&&c.isRenderTargetTexture===!1){let u=c.mapping;if(u===iv||u===nv)if(i.has(c)){let h=i.get(c).texture;return r(h,c.mapping)}else{let h=c.image;if(h&&h.height>0){let f=new HF(h.height/2);return f.fromEquirectangularTexture(t,c),i.set(c,f),c.addEventListener("dispose",l),r(f.texture,c.mapping)}else return null}}return c}function l(c){let u=c.target;u.removeEventListener("dispose",l);let h=i.get(u);h!==void 0&&(i.delete(u),h.dispose())}function d(){i=new WeakMap}return{get:s,dispose:d}}var MA=class extends Gf{constructor(t=-1,i=1,r=1,s=-1,l=.1,d=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=r,this.bottom=s,this.near=l,this.far=d,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,i,r,s,l,d){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=r,this.view.offsetY=s,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,s=(this.top+this.bottom)/2,l=r-t,d=r+t,c=s+i,u=s-i;if(this.view!==null&&this.view.enabled){let h=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=h*this.view.offsetX,d=l+h*this.view.width,c-=f*this.view.offsetY,u=c-f*this.view.height}this.projectionMatrix.makeOrthographic(l,d,c,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let i=super.toJSON(t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}},Zf=4,FD=[.125,.215,.35,.446,.526,.582],Zu=20,TA=new MA,ND=new _t,DA=null,Yu=(1+Math.sqrt(5))/2,Yf=1/Yu,jD=[new N(1,1,1),new N(-1,1,1),new N(1,1,-1),new N(-1,1,-1),new N(0,Yu,Yf),new N(0,Yu,-Yf),new N(Yf,0,Yu),new N(-Yf,0,Yu),new N(Yu,Yf,0),new N(-Yu,Yf,0)],UD=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,i=0,r=.1,s=100){DA=this._renderer.getRenderTarget(),this._setSize(256);let l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(t,r,s,l),i>0&&this._blur(l,0,0,i),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(t,i=null){return this._fromTexture(t,i)}fromCubemap(t,i=null){return this._fromTexture(t,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=GD(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=HD(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(DA),t.scissorTest=!1,Fw(t,0,0,t.width,t.height)}_fromTexture(t,i){t.mapping===mc||t.mapping===gc?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),DA=this._renderer.getRenderTarget();let r=i||this._allocateTargets();return this._textureToCubeUV(t,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,r={magFilter:yi,minFilter:yi,generateMipmaps:!1,type:yc,format:Pa,encoding:$s,depthBuffer:!1},s=VD(t,i,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==i){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=VD(t,i,r);let{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Pj(l)),this._blurMaterial=Oj(l,t,i)}return s}_compileMaterial(t){let i=new za(this._lodPlanes[0],t);this._renderer.compile(i,TA)}_sceneToCubeUV(t,i,r,s){let l=new ha(90,1,i,r),d=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,f=u.toneMapping;u.getClearColor(ND),u.toneMapping=Co,u.autoClear=!1;let m=new _v({name:"PMREM.Background",side:qn,depthWrite:!1,depthTest:!1}),p=new za(new bl,m),g=!1,v=t.background;v?v.isColor&&(m.color.copy(v),t.background=null,g=!0):(m.color.copy(ND),g=!0);for(let w=0;w<6;w++){let x=w%3;x===0?(l.up.set(0,d[w],0),l.lookAt(c[w],0,0)):x===1?(l.up.set(0,0,d[w]),l.lookAt(0,c[w],0)):(l.up.set(0,d[w],0),l.lookAt(0,0,c[w]));let _=this._cubeSize;Fw(s,x*_,w>2?_:0,_,_),u.setRenderTarget(s),g&&u.render(p,l),u.render(t,l)}p.geometry.dispose(),p.material.dispose(),u.toneMapping=f,u.autoClear=h,t.background=v}_textureToCubeUV(t,i){let r=this._renderer,s=t.mapping===mc||t.mapping===gc;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=GD()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=HD());let l=s?this._cubemapMaterial:this._equirectMaterial,d=new za(this._lodPlanes[0],l),c=l.uniforms;c.envMap.value=t;let u=this._cubeSize;Fw(i,0,0,3*u,2*u),r.setRenderTarget(i),r.render(d,TA)}_applyPMREM(t){let i=this._renderer,r=i.autoClear;i.autoClear=!1;for(let s=1;s<this._lodPlanes.length;s++){let l=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),d=jD[(s-1)%jD.length];this._blur(t,s-1,s,l,d)}i.autoClear=r}_blur(t,i,r,s,l){let d=this._pingPongRenderTarget;this._halfBlur(t,d,i,r,s,"latitudinal",l),this._halfBlur(d,t,r,r,s,"longitudinal",l)}_halfBlur(t,i,r,s,l,d,c){let u=this._renderer,h=this._blurMaterial;d!=="latitudinal"&&d!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let f=3,m=new za(this._lodPlanes[s],h),p=h.uniforms,g=this._sizeLods[r]-1,v=isFinite(l)?Math.PI/(2*g):2*Math.PI/(2*Zu-1),w=l/v,x=isFinite(l)?1+Math.floor(f*w):Zu;x>Zu&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Zu}`);let _=[],k=0;for(let P=0;P<Zu;++P){let T=P/w,O=Math.exp(-T*T/2);_.push(O),P===0?k+=O:P<x&&(k+=2*O)}for(let P=0;P<_.length;P++)_[P]=_[P]/k;p.envMap.value=t.texture,p.samples.value=x,p.weights.value=_,p.latitudinal.value=d==="latitudinal",c&&(p.poleAxis.value=c);let{_lodMax:A}=this;p.dTheta.value=v,p.mipInt.value=A-r;let C=this._sizeLods[s],M=3*C*(s>A-Zf?s-A+Zf:0),D=4*(this._cubeSize-C);Fw(i,M,D,3*C,2*C),u.setRenderTarget(i),u.render(m,TA)}};function Pj(t){let i=[],r=[],s=[],l=t,d=t-Zf+1+FD.length;for(let c=0;c<d;c++){let u=Math.pow(2,l);r.push(u);let h=1/u;c>t-Zf?h=FD[c-t+Zf-1]:c===0&&(h=0),s.push(h);let f=1/(u-2),m=-f,p=1+f,g=[m,m,p,m,p,p,m,m,p,p,m,p],v=6,w=6,x=3,_=2,k=1,A=new Float32Array(x*w*v),C=new Float32Array(_*w*v),M=new Float32Array(k*w*v);for(let P=0;P<v;P++){let T=P%3*2/3-1,O=P>2?0:-1,z=[T,O,0,T+2/3,O,0,T+2/3,O+1,0,T,O,0,T+2/3,O+1,0,T,O+1,0];A.set(z,x*w*P),C.set(g,_*w*P);let L=[P,P,P,P,P,P];M.set(L,k*w*P)}let D=new Nt;D.setAttribute("position",new Qt(A,x)),D.setAttribute("uv",new Qt(C,_)),D.setAttribute("faceIndex",new Qt(M,k)),i.push(D),l>Zf&&l--}return{lodPlanes:i,sizeLods:r,sigmas:s}}function VD(t,i,r){let s=new Oi(t,i,r);return s.texture.mapping=Bu,s.texture.name="PMREM.cubeUv",s.scissorTest=!0,s}function Fw(t,i,r,s,l){t.viewport.set(i,r,s,l),t.scissor.set(i,r,s,l)}function Oj(t,i,r){let s=new Float32Array(Zu),l=new N(0,1,0);return new gn({name:"SphericalGaussianBlur",defines:{n:Zu,CUBEUV_TEXEL_WIDTH:1/i,CUBEUV_TEXEL_HEIGHT:1/r,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:s},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:l}},vertexShader:PA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$n,depthTest:!1,depthWrite:!1})}function HD(){return new gn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:PA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$n,depthTest:!1,depthWrite:!1})}function GD(){return new gn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:PA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$n,depthTest:!1,depthWrite:!1})}function PA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Ij(t){let i=new WeakMap,r=null;function s(u){if(u&&u.isTexture){let h=u.mapping,f=h===iv||h===nv,m=h===mc||h===gc;if(f||m)if(u.isRenderTargetTexture&&u.needsPMREMUpdate===!0){u.needsPMREMUpdate=!1;let p=i.get(u);return r===null&&(r=new UD(t)),p=f?r.fromEquirectangular(u,p):r.fromCubemap(u,p),i.set(u,p),p.texture}else{if(i.has(u))return i.get(u).texture;{let p=u.image;if(f&&p&&p.height>0||m&&p&&l(p)){r===null&&(r=new UD(t));let g=f?r.fromEquirectangular(u):r.fromCubemap(u);return i.set(u,g),u.addEventListener("dispose",d),g.texture}else return null}}}return u}function l(u){let h=0,f=6;for(let m=0;m<f;m++)u[m]!==void 0&&h++;return h===f}function d(u){let h=u.target;h.removeEventListener("dispose",d);let f=i.get(h);f!==void 0&&(i.delete(h),f.dispose())}function c(){i=new WeakMap,r!==null&&(r.dispose(),r=null)}return{get:s,dispose:c}}function Rj(t){let i={};function r(s){if(i[s]!==void 0)return i[s];let l;switch(s){case"WEBGL_depth_texture":l=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":l=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":l=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":l=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:l=t.getExtension(s)}return i[s]=l,l}return{has:function(s){return r(s)!==null},init:function(s){s.isWebGL2?r("EXT_color_buffer_float"):(r("WEBGL_depth_texture"),r("OES_texture_float"),r("OES_texture_half_float"),r("OES_texture_half_float_linear"),r("OES_standard_derivatives"),r("OES_element_index_uint"),r("OES_vertex_array_object"),r("ANGLE_instanced_arrays")),r("OES_texture_float_linear"),r("EXT_color_buffer_half_float"),r("WEBGL_multisampled_render_to_texture")},get:function(s){let l=r(s);return l===null&&console.warn("THREE.WebGLRenderer: "+s+" extension not supported."),l}}}function zj(t,i,r,s){let l={},d=new WeakMap;function c(p){let g=p.target;g.index!==null&&i.remove(g.index);for(let w in g.attributes)i.remove(g.attributes[w]);g.removeEventListener("dispose",c),delete l[g.id];let v=d.get(g);v&&(i.remove(v),d.delete(g)),s.releaseStatesOfGeometry(g),g.isInstancedBufferGeometry===!0&&delete g._maxInstanceCount,r.memory.geometries--}function u(p,g){return l[g.id]===!0||(g.addEventListener("dispose",c),l[g.id]=!0,r.memory.geometries++),g}function h(p){let g=p.attributes;for(let w in g)i.update(g[w],34962);let v=p.morphAttributes;for(let w in v){let x=v[w];for(let _=0,k=x.length;_<k;_++)i.update(x[_],34962)}}function f(p){let g=[],v=p.index,w=p.attributes.position,x=0;if(v!==null){let A=v.array;x=v.version;for(let C=0,M=A.length;C<M;C+=3){let D=A[C+0],P=A[C+1],T=A[C+2];g.push(D,P,P,T,T,D)}}else{let A=w.array;x=w.version;for(let C=0,M=A.length/3-1;C<M;C+=3){let D=C+0,P=C+1,T=C+2;g.push(D,P,P,T,T,D)}}let _=new(tt(g)?Nf:RD)(g,1);_.version=x;let k=d.get(p);k&&i.remove(k),d.set(p,_)}function m(p){let g=d.get(p);if(g){let v=p.index;v!==null&&g.version<v.version&&f(p)}else f(p);return d.get(p)}return{get:u,update:h,getWireframeAttribute:m}}function Lj(t,i,r,s){let l=s.isWebGL2,d;function c(g){d=g}let u,h;function f(g){u=g.type,h=g.bytesPerElement}function m(g,v){t.drawElements(d,v,u,g*h),r.update(v,d,1)}function p(g,v,w){if(w===0)return;let x,_;if(l)x=t,_="drawElementsInstanced";else if(x=i.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[_](d,v,u,g*h,w),r.update(v,d,w)}this.setMode=c,this.setIndex=f,this.render=m,this.renderInstances=p}function Bj(t){let i={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};function s(d,c,u){switch(r.calls++,c){case 4:r.triangles+=u*(d/3);break;case 1:r.lines+=u*(d/2);break;case 3:r.lines+=u*(d-1);break;case 2:r.lines+=u*d;break;case 0:r.points+=u*d;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function l(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}return{memory:i,render:r,programs:null,autoReset:!0,reset:l,update:s}}function Fj(t,i){return t[0]-i[0]}function Nj(t,i){return Math.abs(i[1])-Math.abs(t[1])}function jj(t,i,r){let s={},l=new Float32Array(8),d=new WeakMap,c=new ri,u=[];for(let f=0;f<8;f++)u[f]=[f,0];function h(f,m,p,g){let v=f.morphTargetInfluences;if(i.isWebGL2===!0){let w=m.morphAttributes.position||m.morphAttributes.normal||m.morphAttributes.color,x=w!==void 0?w.length:0,_=d.get(m);if(_===void 0||_.count!==x){let C=function(){H.dispose(),d.delete(m),m.removeEventListener("dispose",C)};_!==void 0&&_.texture.dispose();let M=m.morphAttributes.position!==void 0,D=m.morphAttributes.normal!==void 0,P=m.morphAttributes.color!==void 0,T=m.morphAttributes.position||[],O=m.morphAttributes.normal||[],z=m.morphAttributes.color||[],L=0;M===!0&&(L=1),D===!0&&(L=2),P===!0&&(L=3);let B=m.attributes.position.count*L,j=1;B>i.maxTextureSize&&(j=Math.ceil(B/i.maxTextureSize),B=i.maxTextureSize);let V=new Float32Array(B*j*4*x),H=new ns(V,B,j,x);H.type=ia,H.needsUpdate=!0;let Y=L*4;for(let se=0;se<x;se++){let re=T[se],$=O[se],te=z[se],he=B*j*4*se;for(let oe=0;oe<re.count;oe++){let ee=oe*Y;M===!0&&(c.fromBufferAttribute(re,oe),V[he+ee+0]=c.x,V[he+ee+1]=c.y,V[he+ee+2]=c.z,V[he+ee+3]=0),D===!0&&(c.fromBufferAttribute($,oe),V[he+ee+4]=c.x,V[he+ee+5]=c.y,V[he+ee+6]=c.z,V[he+ee+7]=0),P===!0&&(c.fromBufferAttribute(te,oe),V[he+ee+8]=c.x,V[he+ee+9]=c.y,V[he+ee+10]=c.z,V[he+ee+11]=te.itemSize===4?c.w:1)}}_={count:x,texture:H,size:new q(B,j)},d.set(m,_),m.addEventListener("dispose",C)}let k=0;for(let C=0;C<v.length;C++)k+=v[C];let A=m.morphTargetsRelative?1:1-k;g.getUniforms().setValue(t,"morphTargetBaseInfluence",A),g.getUniforms().setValue(t,"morphTargetInfluences",v),g.getUniforms().setValue(t,"morphTargetsTexture",_.texture,r),g.getUniforms().setValue(t,"morphTargetsTextureSize",_.size)}else{let w=v===void 0?0:v.length,x=s[m.id];if(x===void 0||x.length!==w){x=[];for(let M=0;M<w;M++)x[M]=[M,0];s[m.id]=x}for(let M=0;M<w;M++){let D=x[M];D[0]=M,D[1]=v[M]}x.sort(Nj);for(let M=0;M<8;M++)M<w&&x[M][1]?(u[M][0]=x[M][0],u[M][1]=x[M][1]):(u[M][0]=Number.MAX_SAFE_INTEGER,u[M][1]=0);u.sort(Fj);let _=m.morphAttributes.position,k=m.morphAttributes.normal,A=0;for(let M=0;M<8;M++){let D=u[M],P=D[0],T=D[1];P!==Number.MAX_SAFE_INTEGER&&T?(_&&m.getAttribute("morphTarget"+M)!==_[P]&&m.setAttribute("morphTarget"+M,_[P]),k&&m.getAttribute("morphNormal"+M)!==k[P]&&m.setAttribute("morphNormal"+M,k[P]),l[M]=T,A+=T):(_&&m.hasAttribute("morphTarget"+M)===!0&&m.deleteAttribute("morphTarget"+M),k&&m.hasAttribute("morphNormal"+M)===!0&&m.deleteAttribute("morphNormal"+M),l[M]=0)}let C=m.morphTargetsRelative?1:1-A;g.getUniforms().setValue(t,"morphTargetBaseInfluence",C),g.getUniforms().setValue(t,"morphTargetInfluences",l)}}return{update:h}}function Uj(t,i,r,s){let l=new WeakMap;function d(h){let f=s.render.frame,m=h.geometry,p=i.get(h,m);return l.get(p)!==f&&(i.update(p),l.set(p,f)),h.isInstancedMesh&&(h.hasEventListener("dispose",u)===!1&&h.addEventListener("dispose",u),r.update(h.instanceMatrix,34962),h.instanceColor!==null&&r.update(h.instanceColor,34962)),p}function c(){l=new WeakMap}function u(h){let f=h.target;f.removeEventListener("dispose",u),r.remove(f.instanceMatrix),f.instanceColor!==null&&r.remove(f.instanceColor)}return{update:d,dispose:c}}var WD=new zn,qD=new ns,$D=new vd,ZD=new AA,YD=[],XD=[],KD=new Float32Array(16),QD=new Float32Array(9),JD=new Float32Array(4);function Xf(t,i,r){let s=t[0];if(s<=0||s>0)return t;let l=i*r,d=YD[l];if(d===void 0&&(d=new Float32Array(l),YD[l]=d),i!==0){s.toArray(d,0);for(let c=1,u=0;c!==i;++c)u+=r,t[c].toArray(d,u)}return d}function Mr(t,i){if(t.length!==i.length)return!1;for(let r=0,s=t.length;r<s;r++)if(t[r]!==i[r])return!1;return!0}function Tr(t,i){for(let r=0,s=i.length;r<s;r++)t[r]=i[r]}function Nw(t,i){let r=XD[i];r===void 0&&(r=new Int32Array(i),XD[i]=r);for(let s=0;s!==i;++s)r[s]=t.allocateTextureUnit();return r}function Vj(t,i){let r=this.cache;r[0]!==i&&(t.uniform1f(this.addr,i),r[0]=i)}function Hj(t,i){let r=this.cache;if(i.x!==void 0)(r[0]!==i.x||r[1]!==i.y)&&(t.uniform2f(this.addr,i.x,i.y),r[0]=i.x,r[1]=i.y);else{if(Mr(r,i))return;t.uniform2fv(this.addr,i),Tr(r,i)}}function Gj(t,i){let r=this.cache;if(i.x!==void 0)(r[0]!==i.x||r[1]!==i.y||r[2]!==i.z)&&(t.uniform3f(this.addr,i.x,i.y,i.z),r[0]=i.x,r[1]=i.y,r[2]=i.z);else if(i.r!==void 0)(r[0]!==i.r||r[1]!==i.g||r[2]!==i.b)&&(t.uniform3f(this.addr,i.r,i.g,i.b),r[0]=i.r,r[1]=i.g,r[2]=i.b);else{if(Mr(r,i))return;t.uniform3fv(this.addr,i),Tr(r,i)}}function Wj(t,i){let r=this.cache;if(i.x!==void 0)(r[0]!==i.x||r[1]!==i.y||r[2]!==i.z||r[3]!==i.w)&&(t.uniform4f(this.addr,i.x,i.y,i.z,i.w),r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=i.w);else{if(Mr(r,i))return;t.uniform4fv(this.addr,i),Tr(r,i)}}function qj(t,i){let r=this.cache,s=i.elements;if(s===void 0){if(Mr(r,i))return;t.uniformMatrix2fv(this.addr,!1,i),Tr(r,i)}else{if(Mr(r,s))return;JD.set(s),t.uniformMatrix2fv(this.addr,!1,JD),Tr(r,s)}}function $j(t,i){let r=this.cache,s=i.elements;if(s===void 0){if(Mr(r,i))return;t.uniformMatrix3fv(this.addr,!1,i),Tr(r,i)}else{if(Mr(r,s))return;QD.set(s),t.uniformMatrix3fv(this.addr,!1,QD),Tr(r,s)}}function Zj(t,i){let r=this.cache,s=i.elements;if(s===void 0){if(Mr(r,i))return;t.uniformMatrix4fv(this.addr,!1,i),Tr(r,i)}else{if(Mr(r,s))return;KD.set(s),t.uniformMatrix4fv(this.addr,!1,KD),Tr(r,s)}}function Yj(t,i){let r=this.cache;r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i)}function Xj(t,i){let r=this.cache;if(i.x!==void 0)(r[0]!==i.x||r[1]!==i.y)&&(t.uniform2i(this.addr,i.x,i.y),r[0]=i.x,r[1]=i.y);else{if(Mr(r,i))return;t.uniform2iv(this.addr,i),Tr(r,i)}}function Kj(t,i){let r=this.cache;if(i.x!==void 0)(r[0]!==i.x||r[1]!==i.y||r[2]!==i.z)&&(t.uniform3i(this.addr,i.x,i.y,i.z),r[0]=i.x,r[1]=i.y,r[2]=i.z);else{if(Mr(r,i))return;t.uniform3iv(this.addr,i),Tr(r,i)}}function Qj(t,i){let r=this.cache;if(i.x!==void 0)(r[0]!==i.x||r[1]!==i.y||r[2]!==i.z||r[3]!==i.w)&&(t.uniform4i(this.addr,i.x,i.y,i.z,i.w),r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=i.w);else{if(Mr(r,i))return;t.uniform4iv(this.addr,i),Tr(r,i)}}function Jj(t,i){let r=this.cache;r[0]!==i&&(t.uniform1ui(this.addr,i),r[0]=i)}function e7(t,i){let r=this.cache;if(i.x!==void 0)(r[0]!==i.x||r[1]!==i.y)&&(t.uniform2ui(this.addr,i.x,i.y),r[0]=i.x,r[1]=i.y);else{if(Mr(r,i))return;t.uniform2uiv(this.addr,i),Tr(r,i)}}function t7(t,i){let r=this.cache;if(i.x!==void 0)(r[0]!==i.x||r[1]!==i.y||r[2]!==i.z)&&(t.uniform3ui(this.addr,i.x,i.y,i.z),r[0]=i.x,r[1]=i.y,r[2]=i.z);else{if(Mr(r,i))return;t.uniform3uiv(this.addr,i),Tr(r,i)}}function i7(t,i){let r=this.cache;if(i.x!==void 0)(r[0]!==i.x||r[1]!==i.y||r[2]!==i.z||r[3]!==i.w)&&(t.uniform4ui(this.addr,i.x,i.y,i.z,i.w),r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=i.w);else{if(Mr(r,i))return;t.uniform4uiv(this.addr,i),Tr(r,i)}}function n7(t,i,r){let s=this.cache,l=r.allocateTextureUnit();s[0]!==l&&(t.uniform1i(this.addr,l),s[0]=l),r.setTexture2D(i||WD,l)}function r7(t,i,r){let s=this.cache,l=r.allocateTextureUnit();s[0]!==l&&(t.uniform1i(this.addr,l),s[0]=l),r.setTexture3D(i||$D,l)}function a7(t,i,r){let s=this.cache,l=r.allocateTextureUnit();s[0]!==l&&(t.uniform1i(this.addr,l),s[0]=l),r.setTextureCube(i||ZD,l)}function s7(t,i,r){let s=this.cache,l=r.allocateTextureUnit();s[0]!==l&&(t.uniform1i(this.addr,l),s[0]=l),r.setTexture2DArray(i||qD,l)}function o7(t){switch(t){case 5126:return Vj;case 35664:return Hj;case 35665:return Gj;case 35666:return Wj;case 35674:return qj;case 35675:return $j;case 35676:return Zj;case 5124:case 35670:return Yj;case 35667:case 35671:return Xj;case 35668:case 35672:return Kj;case 35669:case 35673:return Qj;case 5125:return Jj;case 36294:return e7;case 36295:return t7;case 36296:return i7;case 35678:case 36198:case 36298:case 36306:case 35682:return n7;case 35679:case 36299:case 36307:return r7;case 35680:case 36300:case 36308:case 36293:return a7;case 36289:case 36303:case 36311:case 36292:return s7}}function l7(t,i){t.uniform1fv(this.addr,i)}function d7(t,i){let r=Xf(i,this.size,2);t.uniform2fv(this.addr,r)}function c7(t,i){let r=Xf(i,this.size,3);t.uniform3fv(this.addr,r)}function u7(t,i){let r=Xf(i,this.size,4);t.uniform4fv(this.addr,r)}function h7(t,i){let r=Xf(i,this.size,4);t.uniformMatrix2fv(this.addr,!1,r)}function f7(t,i){let r=Xf(i,this.size,9);t.uniformMatrix3fv(this.addr,!1,r)}function p7(t,i){let r=Xf(i,this.size,16);t.uniformMatrix4fv(this.addr,!1,r)}function m7(t,i){t.uniform1iv(this.addr,i)}function g7(t,i){t.uniform2iv(this.addr,i)}function v7(t,i){t.uniform3iv(this.addr,i)}function y7(t,i){t.uniform4iv(this.addr,i)}function b7(t,i){t.uniform1uiv(this.addr,i)}function w7(t,i){t.uniform2uiv(this.addr,i)}function x7(t,i){t.uniform3uiv(this.addr,i)}function _7(t,i){t.uniform4uiv(this.addr,i)}function k7(t,i,r){let s=this.cache,l=i.length,d=Nw(r,l);Mr(s,d)||(t.uniform1iv(this.addr,d),Tr(s,d));for(let c=0;c!==l;++c)r.setTexture2D(i[c]||WD,d[c])}function S7(t,i,r){let s=this.cache,l=i.length,d=Nw(r,l);Mr(s,d)||(t.uniform1iv(this.addr,d),Tr(s,d));for(let c=0;c!==l;++c)r.setTexture3D(i[c]||$D,d[c])}function A7(t,i,r){let s=this.cache,l=i.length,d=Nw(r,l);Mr(s,d)||(t.uniform1iv(this.addr,d),Tr(s,d));for(let c=0;c!==l;++c)r.setTextureCube(i[c]||ZD,d[c])}function C7(t,i,r){let s=this.cache,l=i.length,d=Nw(r,l);Mr(s,d)||(t.uniform1iv(this.addr,d),Tr(s,d));for(let c=0;c!==l;++c)r.setTexture2DArray(i[c]||qD,d[c])}function E7(t){switch(t){case 5126:return l7;case 35664:return d7;case 35665:return c7;case 35666:return u7;case 35674:return h7;case 35675:return f7;case 35676:return p7;case 5124:case 35670:return m7;case 35667:case 35671:return g7;case 35668:case 35672:return v7;case 35669:case 35673:return y7;case 5125:return b7;case 36294:return w7;case 36295:return x7;case 36296:return _7;case 35678:case 36198:case 36298:case 36306:case 35682:return k7;case 35679:case 36299:case 36307:return S7;case 35680:case 36300:case 36308:case 36293:return A7;case 36289:case 36303:case 36311:case 36292:return C7}}var M7=class{constructor(t,i,r){this.id=t,this.addr=r,this.cache=[],this.setValue=o7(i.type)}},T7=class{constructor(t,i,r){this.id=t,this.addr=r,this.cache=[],this.size=i.size,this.setValue=E7(i.type)}},D7=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,i,r){let s=this.seq;for(let l=0,d=s.length;l!==d;++l){let c=s[l];c.setValue(t,i[c.id],r)}}},OA=/(\w+)(\])?(\[|\.)?/g;function eP(t,i){t.seq.push(i),t.map[i.id]=i}function P7(t,i,r){let s=t.name,l=s.length;for(OA.lastIndex=0;;){let d=OA.exec(s),c=OA.lastIndex,u=d[1],h=d[2]==="]",f=d[3];if(h&&(u=u|0),f===void 0||f==="["&&c+2===l){eP(r,f===void 0?new M7(u,t,i):new T7(u,t,i));break}else{let m=r.map[u];m===void 0&&(m=new D7(u),eP(r,m)),r=m}}}var jw=class{constructor(t,i){this.seq=[],this.map={};let r=t.getProgramParameter(i,35718);for(let s=0;s<r;++s){let l=t.getActiveUniform(i,s),d=t.getUniformLocation(i,l.name);P7(l,d,this)}}setValue(t,i,r,s){let l=this.map[i];l!==void 0&&l.setValue(t,r,s)}setOptional(t,i,r){let s=i[r];s!==void 0&&this.setValue(t,r,s)}static upload(t,i,r,s){for(let l=0,d=i.length;l!==d;++l){let c=i[l],u=r[c.id];u.needsUpdate!==!1&&c.setValue(t,u.value,s)}}static seqWithValue(t,i){let r=[];for(let s=0,l=t.length;s!==l;++s){let d=t[s];d.id in i&&r.push(d)}return r}};function tP(t,i,r){let s=t.createShader(i);return t.shaderSource(s,r),t.compileShader(s),s}var O7=0;function I7(t,i){let r=t.split(`
`),s=[],l=Math.max(i-6,0),d=Math.min(i+6,r.length);for(let c=l;c<d;c++){let u=c+1;s.push(`${u===i?">":" "} ${u}: ${r[c]}`)}return s.join(`
`)}function R7(t){switch(t){case $s:return["Linear","( value )"];case ci:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function iP(t,i,r){let s=t.getShaderParameter(i,35713),l=t.getShaderInfoLog(i).trim();if(s&&l==="")return"";let d=/ERROR: 0:(\d+)/.exec(l);if(d){let c=parseInt(d[1]);return r.toUpperCase()+`

`+l+`

`+I7(t.getShaderSource(i),c)}else return l}function z7(t,i){let r=R7(i);return"vec4 "+t+"( vec4 value ) { return LinearTo"+r[0]+r[1]+"; }"}function L7(t,i){let r;switch(i){case qS:r="Linear";break;case Kb:r="Reinhard";break;case $S:r="OptimizedCineon";break;case ZS:r="ACESFilmic";break;case Qb:r="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",i),r="Linear"}return"vec3 "+t+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function B7(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ev).join(`
`)}function F7(t){let i=[];for(let r in t){let s=t[r];s!==!1&&i.push("#define "+r+" "+s)}return i.join(`
`)}function N7(t,i){let r={},s=t.getProgramParameter(i,35721);for(let l=0;l<s;l++){let d=t.getActiveAttrib(i,l),c=d.name,u=1;d.type===35674&&(u=2),d.type===35675&&(u=3),d.type===35676&&(u=4),r[c]={type:d.type,location:t.getAttribLocation(i,c),locationSize:u}}return r}function Ev(t){return t!==""}function nP(t,i){let r=i.numSpotLightShadows+i.numSpotLightMaps-i.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,i.numDirLights).replace(/NUM_SPOT_LIGHTS/g,i.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,i.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,r).replace(/NUM_RECT_AREA_LIGHTS/g,i.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,i.numPointLights).replace(/NUM_HEMI_LIGHTS/g,i.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,i.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,i.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,i.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,i.numPointLightShadows)}function rP(t,i){return t.replace(/NUM_CLIPPING_PLANES/g,i.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,i.numClippingPlanes-i.numClipIntersection)}var j7=/^[ \t]*#include +<([\w\d./]+)>/gm;function IA(t){return t.replace(j7,U7)}function U7(t,i){let r=bi[i];if(r===void 0)throw new Error("Can not resolve #include <"+i+">");return IA(r)}var V7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function aP(t){return t.replace(V7,H7)}function H7(t,i,r,s){let l="";for(let d=parseInt(i);d<parseInt(r);d++)l+=s.replace(/\[\s*i\s*\]/g,"[ "+d+" ]").replace(/UNROLLED_LOOP_INDEX/g,d);return l}function sP(t){let i="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?i+=`
#define HIGH_PRECISION`:t.precision==="mediump"?i+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(i+=`
#define LOW_PRECISION`),i}function G7(t){let i="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Zg?i="SHADOWMAP_TYPE_PCF":t.shadowMapType===Yg?i="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===hc&&(i="SHADOWMAP_TYPE_VSM"),i}function W7(t){let i="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case mc:case gc:i="ENVMAP_TYPE_CUBE";break;case Bu:i="ENVMAP_TYPE_CUBE_UV";break}return i}function q7(t){let i="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case gc:i="ENVMAP_MODE_REFRACTION";break}return i}function $7(t){let i="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Yb:i="ENVMAP_BLENDING_MULTIPLY";break;case Xb:i="ENVMAP_BLENDING_MIX";break;case WS:i="ENVMAP_BLENDING_ADD";break}return i}function Z7(t){let i=t.envMapCubeUVHeight;if(i===null)return null;let r=Math.log2(i)-2,s=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,r),7*16)),texelHeight:s,maxMip:r}}function Y7(t,i,r,s){let l=t.getContext(),d=r.defines,c=r.vertexShader,u=r.fragmentShader,h=G7(r),f=W7(r),m=q7(r),p=$7(r),g=Z7(r),v=r.isWebGL2?"":B7(r),w=F7(d),x=l.createProgram(),_,k,A=r.glslVersion?"#version "+r.glslVersion+`
`:"";r.isRawShaderMaterial?(_=[w].filter(Ev).join(`
`),_.length>0&&(_+=`
`),k=[v,w].filter(Ev).join(`
`),k.length>0&&(k+=`
`)):(_=[sP(r),"#define SHADER_NAME "+r.shaderName,w,r.instancing?"#define USE_INSTANCING":"",r.instancingColor?"#define USE_INSTANCING_COLOR":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"",r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+m:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&r.flatShading===!1?"#define USE_MORPHNORMALS":"",r.morphColors&&r.isWebGL2?"#define USE_MORPHCOLORS":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+r.morphTextureStride:"",r.morphTargetsCount>0&&r.isWebGL2?"#define MORPHTARGETS_COUNT "+r.morphTargetsCount:"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+h:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ev).join(`
`),k=[v,sP(r),"#define SHADER_NAME "+r.shaderName,w,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+f:"",r.envMap?"#define "+m:"",r.envMap?"#define "+p:"",g?"#define CUBEUV_TEXEL_WIDTH "+g.texelWidth:"",g?"#define CUBEUV_TEXEL_HEIGHT "+g.texelHeight:"",g?"#define CUBEUV_MAX_MIP "+g.maxMip+".0":"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoat?"#define USE_CLEARCOAT":"",r.clearcoatMap?"#define USE_CLEARCOATMAP":"",r.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.iridescence?"#define USE_IRIDESCENCE":"",r.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",r.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",r.specularColorMap?"#define USE_SPECULARCOLORMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.alphaTest?"#define USE_ALPHATEST":"",r.sheen?"#define USE_SHEEN":"",r.sheenColorMap?"#define USE_SHEENCOLORMAP":"",r.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",r.transmission?"#define USE_TRANSMISSION":"",r.transmissionMap?"#define USE_TRANSMISSIONMAP":"",r.thicknessMap?"#define USE_THICKNESSMAP":"",r.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors||r.instancingColor?"#define USE_COLOR":"",r.vertexAlphas?"#define USE_COLOR_ALPHA":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+h:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==Co?"#define TONE_MAPPING":"",r.toneMapping!==Co?bi.tonemapping_pars_fragment:"",r.toneMapping!==Co?L7("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.opaque?"#define OPAQUE":"",bi.encodings_pars_fragment,z7("linearToOutputTexel",r.outputEncoding),r.useDepthPacking?"#define DEPTH_PACKING "+r.depthPacking:"",`
`].filter(Ev).join(`
`)),c=IA(c),c=nP(c,r),c=rP(c,r),u=IA(u),u=nP(u,r),u=rP(u,r),c=aP(c),u=aP(u),r.isWebGL2&&r.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,k=["#define varying in",r.glslVersion===Sw?"":"layout(location = 0) out highp vec4 pc_fragColor;",r.glslVersion===Sw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+k);let C=A+_+c,M=A+k+u,D=tP(l,35633,C),P=tP(l,35632,M);if(l.attachShader(x,D),l.attachShader(x,P),r.index0AttributeName!==void 0?l.bindAttribLocation(x,0,r.index0AttributeName):r.morphTargets===!0&&l.bindAttribLocation(x,0,"position"),l.linkProgram(x),t.debug.checkShaderErrors){let z=l.getProgramInfoLog(x).trim(),L=l.getShaderInfoLog(D).trim(),B=l.getShaderInfoLog(P).trim(),j=!0,V=!0;if(l.getProgramParameter(x,35714)===!1){j=!1;let H=iP(l,D,"vertex"),Y=iP(l,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+l.getError()+" - VALIDATE_STATUS "+l.getProgramParameter(x,35715)+`

Program Info Log: `+z+`
`+H+`
`+Y)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(L===""||B==="")&&(V=!1);V&&(this.diagnostics={runnable:j,programLog:z,vertexShader:{log:L,prefix:_},fragmentShader:{log:B,prefix:k}})}l.deleteShader(D),l.deleteShader(P);let T;this.getUniforms=function(){return T===void 0&&(T=new jw(l,x)),T};let O;return this.getAttributes=function(){return O===void 0&&(O=N7(l,x)),O},this.destroy=function(){s.releaseStatesOfProgram(this),l.deleteProgram(x),this.program=void 0},this.name=r.shaderName,this.id=O7++,this.cacheKey=i,this.usedTimes=1,this.program=x,this.vertexShader=D,this.fragmentShader=P,this}var X7=0,K7=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let i=t.vertexShader,r=t.fragmentShader,s=this._getShaderStage(i),l=this._getShaderStage(r),d=this._getShaderCacheForMaterial(t);return d.has(s)===!1&&(d.add(s),s.usedTimes++),d.has(l)===!1&&(d.add(l),l.usedTimes++),this}remove(t){let i=this.materialCache.get(t);for(let r of i)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let i=this.materialCache,r=i.get(t);return r===void 0&&(r=new Set,i.set(t,r)),r}_getShaderStage(t){let i=this.shaderCache,r=i.get(t);return r===void 0&&(r=new Q7(t),i.set(t,r)),r}},Q7=class{constructor(t){this.id=X7++,this.code=t,this.usedTimes=0}};function J7(t,i,r,s,l,d,c){let u=new gA,h=new K7,f=[],m=l.isWebGL2,p=l.logarithmicDepthBuffer,g=l.vertexTextures,v=l.precision,w={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(O,z,L,B,j){let V=B.fog,H=j.geometry,Y=O.isMeshStandardMaterial?B.environment:null,se=(O.isMeshStandardMaterial?r:i).get(O.envMap||Y),re=se&&se.mapping===Bu?se.image.height:null,$=w[O.type];O.precision!==null&&(v=l.getMaxPrecision(O.precision),v!==O.precision&&console.warn("THREE.WebGLProgram.getParameters:",O.precision,"not supported, using",v,"instead."));let te=H.morphAttributes.position||H.morphAttributes.normal||H.morphAttributes.color,he=te!==void 0?te.length:0,oe=0;H.morphAttributes.position!==void 0&&(oe=1),H.morphAttributes.normal!==void 0&&(oe=2),H.morphAttributes.color!==void 0&&(oe=3);let ee,pe,ce,ve;if($){let xe=wl[$];ee=xe.vertexShader,pe=xe.fragmentShader}else ee=O.vertexShader,pe=O.fragmentShader,h.update(O),ce=h.getVertexShaderID(O),ve=h.getFragmentShaderID(O);let le=t.getRenderTarget(),Pe=O.alphaTest>0,we=O.clearcoat>0,Ee=O.iridescence>0;return{isWebGL2:m,shaderID:$,shaderName:O.type,vertexShader:ee,fragmentShader:pe,defines:O.defines,customVertexShaderID:ce,customFragmentShaderID:ve,isRawShaderMaterial:O.isRawShaderMaterial===!0,glslVersion:O.glslVersion,precision:v,instancing:j.isInstancedMesh===!0,instancingColor:j.isInstancedMesh===!0&&j.instanceColor!==null,supportsVertexTextures:g,outputEncoding:le===null?t.outputEncoding:le.isXRRenderTarget===!0?le.texture.encoding:$s,map:!!O.map,matcap:!!O.matcap,envMap:!!se,envMapMode:se&&se.mapping,envMapCubeUVHeight:re,lightMap:!!O.lightMap,aoMap:!!O.aoMap,emissiveMap:!!O.emissiveMap,bumpMap:!!O.bumpMap,normalMap:!!O.normalMap,objectSpaceNormalMap:O.normalMapType===cA,tangentSpaceNormalMap:O.normalMapType===kw,decodeVideoTexture:!!O.map&&O.map.isVideoTexture===!0&&O.map.encoding===ci,clearcoat:we,clearcoatMap:we&&!!O.clearcoatMap,clearcoatRoughnessMap:we&&!!O.clearcoatRoughnessMap,clearcoatNormalMap:we&&!!O.clearcoatNormalMap,iridescence:Ee,iridescenceMap:Ee&&!!O.iridescenceMap,iridescenceThicknessMap:Ee&&!!O.iridescenceThicknessMap,displacementMap:!!O.displacementMap,roughnessMap:!!O.roughnessMap,metalnessMap:!!O.metalnessMap,specularMap:!!O.specularMap,specularIntensityMap:!!O.specularIntensityMap,specularColorMap:!!O.specularColorMap,opaque:O.transparent===!1&&O.blending===pl,alphaMap:!!O.alphaMap,alphaTest:Pe,gradientMap:!!O.gradientMap,sheen:O.sheen>0,sheenColorMap:!!O.sheenColorMap,sheenRoughnessMap:!!O.sheenRoughnessMap,transmission:O.transmission>0,transmissionMap:!!O.transmissionMap,thicknessMap:!!O.thicknessMap,combine:O.combine,vertexTangents:!!O.normalMap&&!!H.attributes.tangent,vertexColors:O.vertexColors,vertexAlphas:O.vertexColors===!0&&!!H.attributes.color&&H.attributes.color.itemSize===4,vertexUvs:!!O.map||!!O.bumpMap||!!O.normalMap||!!O.specularMap||!!O.alphaMap||!!O.emissiveMap||!!O.roughnessMap||!!O.metalnessMap||!!O.clearcoatMap||!!O.clearcoatRoughnessMap||!!O.clearcoatNormalMap||!!O.iridescenceMap||!!O.iridescenceThicknessMap||!!O.displacementMap||!!O.transmissionMap||!!O.thicknessMap||!!O.specularIntensityMap||!!O.specularColorMap||!!O.sheenColorMap||!!O.sheenRoughnessMap,uvsVertexOnly:!(O.map||O.bumpMap||O.normalMap||O.specularMap||O.alphaMap||O.emissiveMap||O.roughnessMap||O.metalnessMap||O.clearcoatNormalMap||O.iridescenceMap||O.iridescenceThicknessMap||O.transmission>0||O.transmissionMap||O.thicknessMap||O.specularIntensityMap||O.specularColorMap||O.sheen>0||O.sheenColorMap||O.sheenRoughnessMap)&&!!O.displacementMap,fog:!!V,useFog:O.fog===!0,fogExp2:V&&V.isFogExp2,flatShading:!!O.flatShading,sizeAttenuation:O.sizeAttenuation,logarithmicDepthBuffer:p,skinning:j.isSkinnedMesh===!0,morphTargets:H.morphAttributes.position!==void 0,morphNormals:H.morphAttributes.normal!==void 0,morphColors:H.morphAttributes.color!==void 0,morphTargetsCount:he,morphTextureStride:oe,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:O.dithering,shadowMapEnabled:t.shadowMap.enabled&&L.length>0,shadowMapType:t.shadowMap.type,toneMapping:O.toneMapped?t.toneMapping:Co,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:O.premultipliedAlpha,doubleSided:O.side===ta,flipSided:O.side===qn,useDepthPacking:!!O.depthPacking,depthPacking:O.depthPacking||0,index0AttributeName:O.index0AttributeName,extensionDerivatives:O.extensions&&O.extensions.derivatives,extensionFragDepth:O.extensions&&O.extensions.fragDepth,extensionDrawBuffers:O.extensions&&O.extensions.drawBuffers,extensionShaderTextureLOD:O.extensions&&O.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||s.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||s.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||s.has("EXT_shader_texture_lod"),customProgramCacheKey:O.customProgramCacheKey()}}function _(O){let z=[];if(O.shaderID?z.push(O.shaderID):(z.push(O.customVertexShaderID),z.push(O.customFragmentShaderID)),O.defines!==void 0)for(let L in O.defines)z.push(L),z.push(O.defines[L]);return O.isRawShaderMaterial===!1&&(k(z,O),A(z,O),z.push(t.outputEncoding)),z.push(O.customProgramCacheKey),z.join()}function k(O,z){O.push(z.precision),O.push(z.outputEncoding),O.push(z.envMapMode),O.push(z.envMapCubeUVHeight),O.push(z.combine),O.push(z.vertexUvs),O.push(z.fogExp2),O.push(z.sizeAttenuation),O.push(z.morphTargetsCount),O.push(z.morphAttributeCount),O.push(z.numDirLights),O.push(z.numPointLights),O.push(z.numSpotLights),O.push(z.numSpotLightMaps),O.push(z.numHemiLights),O.push(z.numRectAreaLights),O.push(z.numDirLightShadows),O.push(z.numPointLightShadows),O.push(z.numSpotLightShadows),O.push(z.numSpotLightShadowsWithMaps),O.push(z.shadowMapType),O.push(z.toneMapping),O.push(z.numClippingPlanes),O.push(z.numClipIntersection),O.push(z.depthPacking)}function A(O,z){u.disableAll(),z.isWebGL2&&u.enable(0),z.supportsVertexTextures&&u.enable(1),z.instancing&&u.enable(2),z.instancingColor&&u.enable(3),z.map&&u.enable(4),z.matcap&&u.enable(5),z.envMap&&u.enable(6),z.lightMap&&u.enable(7),z.aoMap&&u.enable(8),z.emissiveMap&&u.enable(9),z.bumpMap&&u.enable(10),z.normalMap&&u.enable(11),z.objectSpaceNormalMap&&u.enable(12),z.tangentSpaceNormalMap&&u.enable(13),z.clearcoat&&u.enable(14),z.clearcoatMap&&u.enable(15),z.clearcoatRoughnessMap&&u.enable(16),z.clearcoatNormalMap&&u.enable(17),z.iridescence&&u.enable(18),z.iridescenceMap&&u.enable(19),z.iridescenceThicknessMap&&u.enable(20),z.displacementMap&&u.enable(21),z.specularMap&&u.enable(22),z.roughnessMap&&u.enable(23),z.metalnessMap&&u.enable(24),z.gradientMap&&u.enable(25),z.alphaMap&&u.enable(26),z.alphaTest&&u.enable(27),z.vertexColors&&u.enable(28),z.vertexAlphas&&u.enable(29),z.vertexUvs&&u.enable(30),z.vertexTangents&&u.enable(31),z.uvsVertexOnly&&u.enable(32),O.push(u.mask),u.disableAll(),z.fog&&u.enable(0),z.useFog&&u.enable(1),z.flatShading&&u.enable(2),z.logarithmicDepthBuffer&&u.enable(3),z.skinning&&u.enable(4),z.morphTargets&&u.enable(5),z.morphNormals&&u.enable(6),z.morphColors&&u.enable(7),z.premultipliedAlpha&&u.enable(8),z.shadowMapEnabled&&u.enable(9),z.physicallyCorrectLights&&u.enable(10),z.doubleSided&&u.enable(11),z.flipSided&&u.enable(12),z.useDepthPacking&&u.enable(13),z.dithering&&u.enable(14),z.specularIntensityMap&&u.enable(15),z.specularColorMap&&u.enable(16),z.transmission&&u.enable(17),z.transmissionMap&&u.enable(18),z.thicknessMap&&u.enable(19),z.sheen&&u.enable(20),z.sheenColorMap&&u.enable(21),z.sheenRoughnessMap&&u.enable(22),z.decodeVideoTexture&&u.enable(23),z.opaque&&u.enable(24),O.push(u.mask)}function C(O){let z=w[O.type],L;if(z){let B=wl[z];L=Hf.clone(B.uniforms)}else L=O.uniforms;return L}function M(O,z){let L;for(let B=0,j=f.length;B<j;B++){let V=f[B];if(V.cacheKey===z){L=V,++L.usedTimes;break}}return L===void 0&&(L=new Y7(t,z,O,d),f.push(L)),L}function D(O){if(--O.usedTimes===0){let z=f.indexOf(O);f[z]=f[f.length-1],f.pop(),O.destroy()}}function P(O){h.remove(O)}function T(){h.dispose()}return{getParameters:x,getProgramCacheKey:_,getUniforms:C,acquireProgram:M,releaseProgram:D,releaseShaderCache:P,programs:f,dispose:T}}function eU(){let t=new WeakMap;function i(d){let c=t.get(d);return c===void 0&&(c={},t.set(d,c)),c}function r(d){t.delete(d)}function s(d,c,u){t.get(d)[c]=u}function l(){t=new WeakMap}return{get:i,remove:r,update:s,dispose:l}}function tU(t,i){return t.groupOrder!==i.groupOrder?t.groupOrder-i.groupOrder:t.renderOrder!==i.renderOrder?t.renderOrder-i.renderOrder:t.material.id!==i.material.id?t.material.id-i.material.id:t.z!==i.z?t.z-i.z:t.id-i.id}function oP(t,i){return t.groupOrder!==i.groupOrder?t.groupOrder-i.groupOrder:t.renderOrder!==i.renderOrder?t.renderOrder-i.renderOrder:t.z!==i.z?i.z-t.z:t.id-i.id}function lP(){let t=[],i=0,r=[],s=[],l=[];function d(){i=0,r.length=0,s.length=0,l.length=0}function c(p,g,v,w,x,_){let k=t[i];return k===void 0?(k={id:p.id,object:p,geometry:g,material:v,groupOrder:w,renderOrder:p.renderOrder,z:x,group:_},t[i]=k):(k.id=p.id,k.object=p,k.geometry=g,k.material=v,k.groupOrder=w,k.renderOrder=p.renderOrder,k.z=x,k.group=_),i++,k}function u(p,g,v,w,x,_){let k=c(p,g,v,w,x,_);v.transmission>0?s.push(k):v.transparent===!0?l.push(k):r.push(k)}function h(p,g,v,w,x,_){let k=c(p,g,v,w,x,_);v.transmission>0?s.unshift(k):v.transparent===!0?l.unshift(k):r.unshift(k)}function f(p,g){r.length>1&&r.sort(p||tU),s.length>1&&s.sort(g||oP),l.length>1&&l.sort(g||oP)}function m(){for(let p=i,g=t.length;p<g;p++){let v=t[p];if(v.id===null)break;v.id=null,v.object=null,v.geometry=null,v.material=null,v.group=null}}return{opaque:r,transmissive:s,transparent:l,init:d,push:u,unshift:h,finish:m,sort:f}}function iU(){let t=new WeakMap;function i(s,l){let d=t.get(s),c;return d===void 0?(c=new lP,t.set(s,[c])):l>=d.length?(c=new lP,d.push(c)):c=d[l],c}function r(){t=new WeakMap}return{get:i,dispose:r}}function nU(){let t={};return{get:function(i){if(t[i.id]!==void 0)return t[i.id];let r;switch(i.type){case"DirectionalLight":r={direction:new N,color:new _t};break;case"SpotLight":r={position:new N,direction:new N,color:new _t,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":r={position:new N,color:new _t,distance:0,decay:0};break;case"HemisphereLight":r={direction:new N,skyColor:new _t,groundColor:new _t};break;case"RectAreaLight":r={color:new _t,position:new N,halfWidth:new N,halfHeight:new N};break}return t[i.id]=r,r}}}function rU(){let t={};return{get:function(i){if(t[i.id]!==void 0)return t[i.id];let r;switch(i.type){case"DirectionalLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q};break;case"SpotLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q};break;case"PointLight":r={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new q,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[i.id]=r,r}}}var aU=0;function sU(t,i){return(i.castShadow?2:0)-(t.castShadow?2:0)+(i.map?1:0)-(t.map?1:0)}function oU(t,i){let r=new nU,s=rU(),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let m=0;m<9;m++)l.probe.push(new N);let d=new N,c=new Ze,u=new Ze;function h(m,p){let g=0,v=0,w=0;for(let B=0;B<9;B++)l.probe[B].set(0,0,0);let x=0,_=0,k=0,A=0,C=0,M=0,D=0,P=0,T=0,O=0;m.sort(sU);let z=p!==!0?Math.PI:1;for(let B=0,j=m.length;B<j;B++){let V=m[B],H=V.color,Y=V.intensity,se=V.distance,re=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)g+=H.r*Y*z,v+=H.g*Y*z,w+=H.b*Y*z;else if(V.isLightProbe)for(let $=0;$<9;$++)l.probe[$].addScaledVector(V.sh.coefficients[$],Y);else if(V.isDirectionalLight){let $=r.get(V);if($.color.copy(V.color).multiplyScalar(V.intensity*z),V.castShadow){let te=V.shadow,he=s.get(V);he.shadowBias=te.bias,he.shadowNormalBias=te.normalBias,he.shadowRadius=te.radius,he.shadowMapSize=te.mapSize,l.directionalShadow[x]=he,l.directionalShadowMap[x]=re,l.directionalShadowMatrix[x]=V.shadow.matrix,M++}l.directional[x]=$,x++}else if(V.isSpotLight){let $=r.get(V);$.position.setFromMatrixPosition(V.matrixWorld),$.color.copy(H).multiplyScalar(Y*z),$.distance=se,$.coneCos=Math.cos(V.angle),$.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),$.decay=V.decay,l.spot[k]=$;let te=V.shadow;if(V.map&&(l.spotLightMap[T]=V.map,T++,te.updateMatrices(V),V.castShadow&&O++),l.spotLightMatrix[k]=te.matrix,V.castShadow){let he=s.get(V);he.shadowBias=te.bias,he.shadowNormalBias=te.normalBias,he.shadowRadius=te.radius,he.shadowMapSize=te.mapSize,l.spotShadow[k]=he,l.spotShadowMap[k]=re,P++}k++}else if(V.isRectAreaLight){let $=r.get(V);$.color.copy(H).multiplyScalar(Y),$.halfWidth.set(V.width*.5,0,0),$.halfHeight.set(0,V.height*.5,0),l.rectArea[A]=$,A++}else if(V.isPointLight){let $=r.get(V);if($.color.copy(V.color).multiplyScalar(V.intensity*z),$.distance=V.distance,$.decay=V.decay,V.castShadow){let te=V.shadow,he=s.get(V);he.shadowBias=te.bias,he.shadowNormalBias=te.normalBias,he.shadowRadius=te.radius,he.shadowMapSize=te.mapSize,he.shadowCameraNear=te.camera.near,he.shadowCameraFar=te.camera.far,l.pointShadow[_]=he,l.pointShadowMap[_]=re,l.pointShadowMatrix[_]=V.shadow.matrix,D++}l.point[_]=$,_++}else if(V.isHemisphereLight){let $=r.get(V);$.skyColor.copy(V.color).multiplyScalar(Y*z),$.groundColor.copy(V.groundColor).multiplyScalar(Y*z),l.hemi[C]=$,C++}}A>0&&(i.isWebGL2||t.has("OES_texture_float_linear")===!0?(l.rectAreaLTC1=lt.LTC_FLOAT_1,l.rectAreaLTC2=lt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(l.rectAreaLTC1=lt.LTC_HALF_1,l.rectAreaLTC2=lt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=g,l.ambient[1]=v,l.ambient[2]=w;let L=l.hash;(L.directionalLength!==x||L.pointLength!==_||L.spotLength!==k||L.rectAreaLength!==A||L.hemiLength!==C||L.numDirectionalShadows!==M||L.numPointShadows!==D||L.numSpotShadows!==P||L.numSpotMaps!==T)&&(l.directional.length=x,l.spot.length=k,l.rectArea.length=A,l.point.length=_,l.hemi.length=C,l.directionalShadow.length=M,l.directionalShadowMap.length=M,l.pointShadow.length=D,l.pointShadowMap.length=D,l.spotShadow.length=P,l.spotShadowMap.length=P,l.directionalShadowMatrix.length=M,l.pointShadowMatrix.length=D,l.spotLightMatrix.length=P+T-O,l.spotLightMap.length=T,l.numSpotLightShadowsWithMaps=O,L.directionalLength=x,L.pointLength=_,L.spotLength=k,L.rectAreaLength=A,L.hemiLength=C,L.numDirectionalShadows=M,L.numPointShadows=D,L.numSpotShadows=P,L.numSpotMaps=T,l.version=aU++)}function f(m,p){let g=0,v=0,w=0,x=0,_=0,k=p.matrixWorldInverse;for(let A=0,C=m.length;A<C;A++){let M=m[A];if(M.isDirectionalLight){let D=l.directional[g];D.direction.setFromMatrixPosition(M.matrixWorld),d.setFromMatrixPosition(M.target.matrixWorld),D.direction.sub(d),D.direction.transformDirection(k),g++}else if(M.isSpotLight){let D=l.spot[w];D.position.setFromMatrixPosition(M.matrixWorld),D.position.applyMatrix4(k),D.direction.setFromMatrixPosition(M.matrixWorld),d.setFromMatrixPosition(M.target.matrixWorld),D.direction.sub(d),D.direction.transformDirection(k),w++}else if(M.isRectAreaLight){let D=l.rectArea[x];D.position.setFromMatrixPosition(M.matrixWorld),D.position.applyMatrix4(k),u.identity(),c.copy(M.matrixWorld),c.premultiply(k),u.extractRotation(c),D.halfWidth.set(M.width*.5,0,0),D.halfHeight.set(0,M.height*.5,0),D.halfWidth.applyMatrix4(u),D.halfHeight.applyMatrix4(u),x++}else if(M.isPointLight){let D=l.point[v];D.position.setFromMatrixPosition(M.matrixWorld),D.position.applyMatrix4(k),v++}else if(M.isHemisphereLight){let D=l.hemi[_];D.direction.setFromMatrixPosition(M.matrixWorld),D.direction.transformDirection(k),_++}}}return{setup:h,setupView:f,state:l}}function dP(t,i){let r=new oU(t,i),s=[],l=[];function d(){s.length=0,l.length=0}function c(m){s.push(m)}function u(m){l.push(m)}function h(m){r.setup(s,m)}function f(m){r.setupView(s,m)}return{init:d,state:{lightsArray:s,shadowsArray:l,lights:r},setupLights:h,setupLightsView:f,pushLight:c,pushShadow:u}}function lU(t,i){let r=new WeakMap;function s(d,c=0){let u=r.get(d),h;return u===void 0?(h=new dP(t,i),r.set(d,[h])):c>=u.length?(h=new dP(t,i),u.push(h)):h=u[c],h}function l(){r=new WeakMap}return{get:s,dispose:l}}var cP=class extends xv{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=To,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},dU=class extends xv{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new N,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}},cU=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,uU=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function hU(t,i,r){let s=new EA,l=new q,d=new q,c=new ri,u=new cP({depthPacking:_w}),h=new dU,f={},m=r.maxTextureSize,p={[qs]:qn,[qn]:qs,[ta]:ta},g=new gn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new q},radius:{value:4}},vertexShader:cU,fragmentShader:uU}),v=g.clone();v.defines.HORIZONTAL_PASS=1;let w=new Nt;w.setAttribute("position",new Qt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let x=new za(w,g),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Zg,this.render=function(M,D,P){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||M.length===0)return;let T=t.getRenderTarget(),O=t.getActiveCubeFace(),z=t.getActiveMipmapLevel(),L=t.state;L.setBlending($n),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);for(let B=0,j=M.length;B<j;B++){let V=M[B],H=V.shadow;if(H===void 0){console.warn("THREE.WebGLShadowMap:",V,"has no shadow.");continue}if(H.autoUpdate===!1&&H.needsUpdate===!1)continue;l.copy(H.mapSize);let Y=H.getFrameExtents();if(l.multiply(Y),d.copy(H.mapSize),(l.x>m||l.y>m)&&(l.x>m&&(d.x=Math.floor(m/Y.x),l.x=d.x*Y.x,H.mapSize.x=d.x),l.y>m&&(d.y=Math.floor(m/Y.y),l.y=d.y*Y.y,H.mapSize.y=d.y)),H.map===null){let re=this.type!==hc?{minFilter:on,magFilter:on}:{};H.map=new Oi(l.x,l.y,re),H.map.texture.name=V.name+".shadowMap",H.camera.updateProjectionMatrix()}t.setRenderTarget(H.map),t.clear();let se=H.getViewportCount();for(let re=0;re<se;re++){let $=H.getViewport(re);c.set(d.x*$.x,d.y*$.y,d.x*$.z,d.y*$.w),L.viewport(c),H.updateMatrices(V,re),s=H.getFrustum(),C(D,P,H.camera,V,this.type)}H.isPointLightShadow!==!0&&this.type===hc&&k(H,P),H.needsUpdate=!1}_.needsUpdate=!1,t.setRenderTarget(T,O,z)};function k(M,D){let P=i.update(x);g.defines.VSM_SAMPLES!==M.blurSamples&&(g.defines.VSM_SAMPLES=M.blurSamples,v.defines.VSM_SAMPLES=M.blurSamples,g.needsUpdate=!0,v.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Oi(l.x,l.y)),g.uniforms.shadow_pass.value=M.map.texture,g.uniforms.resolution.value=M.mapSize,g.uniforms.radius.value=M.radius,t.setRenderTarget(M.mapPass),t.clear(),t.renderBufferDirect(D,null,P,g,x,null),v.uniforms.shadow_pass.value=M.mapPass.texture,v.uniforms.resolution.value=M.mapSize,v.uniforms.radius.value=M.radius,t.setRenderTarget(M.map),t.clear(),t.renderBufferDirect(D,null,P,v,x,null)}function A(M,D,P,T,O,z){let L=null,B=P.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(B!==void 0)L=B;else if(L=P.isPointLight===!0?h:u,t.localClippingEnabled&&D.clipShadows===!0&&Array.isArray(D.clippingPlanes)&&D.clippingPlanes.length!==0||D.displacementMap&&D.displacementScale!==0||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){let j=L.uuid,V=D.uuid,H=f[j];H===void 0&&(H={},f[j]=H);let Y=H[V];Y===void 0&&(Y=L.clone(),H[V]=Y),L=Y}return L.visible=D.visible,L.wireframe=D.wireframe,z===hc?L.side=D.shadowSide!==null?D.shadowSide:D.side:L.side=D.shadowSide!==null?D.shadowSide:p[D.side],L.alphaMap=D.alphaMap,L.alphaTest=D.alphaTest,L.map=D.map,L.clipShadows=D.clipShadows,L.clippingPlanes=D.clippingPlanes,L.clipIntersection=D.clipIntersection,L.displacementMap=D.displacementMap,L.displacementScale=D.displacementScale,L.displacementBias=D.displacementBias,L.wireframeLinewidth=D.wireframeLinewidth,L.linewidth=D.linewidth,P.isPointLight===!0&&L.isMeshDistanceMaterial===!0&&(L.referencePosition.setFromMatrixPosition(P.matrixWorld),L.nearDistance=T,L.farDistance=O),L}function C(M,D,P,T,O){if(M.visible===!1)return;if(M.layers.test(D.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&O===hc)&&(!M.frustumCulled||s.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,M.matrixWorld);let L=i.update(M),B=M.material;if(Array.isArray(B)){let j=L.groups;for(let V=0,H=j.length;V<H;V++){let Y=j[V],se=B[Y.materialIndex];if(se&&se.visible){let re=A(M,se,T,P.near,P.far,O);t.renderBufferDirect(P,null,L,re,M,Y)}}}else if(B.visible){let j=A(M,B,T,P.near,P.far,O);t.renderBufferDirect(P,null,L,j,M,null)}}let z=M.children;for(let L=0,B=z.length;L<B;L++)C(z[L],D,P,T,O)}}function fU(t,i,r){let s=r.isWebGL2;function l(){let ye=!1,Ne=new ri,Je=null,Fe=new ri(0,0,0,0);return{setMask:function($e){Je!==$e&&!ye&&(t.colorMask($e,$e,$e,$e),Je=$e)},setLocked:function($e){ye=$e},setClear:function($e,at,Dt,Wt,si){si===!0&&($e*=Wt,at*=Wt,Dt*=Wt),Ne.set($e,at,Dt,Wt),Fe.equals(Ne)===!1&&(t.clearColor($e,at,Dt,Wt),Fe.copy(Ne))},reset:function(){ye=!1,Je=null,Fe.set(-1,0,0,0)}}}function d(){let ye=!1,Ne=null,Je=null,Fe=null;return{setTest:function($e){$e?Pe(2929):we(2929)},setMask:function($e){Ne!==$e&&!ye&&(t.depthMask($e),Ne=$e)},setFunc:function($e){if(Je!==$e){switch($e){case pc:t.depthFunc(512);break;case Df:t.depthFunc(519);break;case kD:t.depthFunc(513);break;case Jg:t.depthFunc(515);break;case VS:t.depthFunc(514);break;case ev:t.depthFunc(518);break;case HS:t.depthFunc(516);break;case GS:t.depthFunc(517);break;default:t.depthFunc(515)}Je=$e}},setLocked:function($e){ye=$e},setClear:function($e){Fe!==$e&&(t.clearDepth($e),Fe=$e)},reset:function(){ye=!1,Ne=null,Je=null,Fe=null}}}function c(){let ye=!1,Ne=null,Je=null,Fe=null,$e=null,at=null,Dt=null,Wt=null,si=null;return{setTest:function(Pt){ye||(Pt?Pe(2960):we(2960))},setMask:function(Pt){Ne!==Pt&&!ye&&(t.stencilMask(Pt),Ne=Pt)},setFunc:function(Pt,pi,ai){(Je!==Pt||Fe!==pi||$e!==ai)&&(t.stencilFunc(Pt,pi,ai),Je=Pt,Fe=pi,$e=ai)},setOp:function(Pt,pi,ai){(at!==Pt||Dt!==pi||Wt!==ai)&&(t.stencilOp(Pt,pi,ai),at=Pt,Dt=pi,Wt=ai)},setLocked:function(Pt){ye=Pt},setClear:function(Pt){si!==Pt&&(t.clearStencil(Pt),si=Pt)},reset:function(){ye=!1,Ne=null,Je=null,Fe=null,$e=null,at=null,Dt=null,Wt=null,si=null}}}let u=new l,h=new d,f=new c,m=new WeakMap,p=new WeakMap,g={},v={},w=new WeakMap,x=[],_=null,k=!1,A=null,C=null,M=null,D=null,P=null,T=null,O=null,z=!1,L=null,B=null,j=null,V=null,H=null,Y=t.getParameter(35661),se=!1,re=0,$=t.getParameter(7938);$.indexOf("WebGL")!==-1?(re=parseFloat(/^WebGL (\d)/.exec($)[1]),se=re>=1):$.indexOf("OpenGL ES")!==-1&&(re=parseFloat(/^OpenGL ES (\d)/.exec($)[1]),se=re>=2);let te=null,he={},oe=t.getParameter(3088),ee=t.getParameter(2978),pe=new ri().fromArray(oe),ce=new ri().fromArray(ee);function ve(ye,Ne,Je){let Fe=new Uint8Array(4),$e=t.createTexture();t.bindTexture(ye,$e),t.texParameteri(ye,10241,9728),t.texParameteri(ye,10240,9728);for(let at=0;at<Je;at++)t.texImage2D(Ne+at,0,6408,1,1,0,6408,5121,Fe);return $e}let le={};le[3553]=ve(3553,3553,1),le[34067]=ve(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),f.setClear(0),Pe(2929),h.setFunc(Jg),ot(!1),mt(Mf),Pe(2884),rt($n);function Pe(ye){g[ye]!==!0&&(t.enable(ye),g[ye]=!0)}function we(ye){g[ye]!==!1&&(t.disable(ye),g[ye]=!1)}function Ee(ye,Ne){return v[ye]!==Ne?(t.bindFramebuffer(ye,Ne),v[ye]=Ne,s&&(ye===36009&&(v[36160]=Ne),ye===36160&&(v[36009]=Ne)),!0):!1}function xe(ye,Ne){let Je=x,Fe=!1;if(ye)if(Je=w.get(Ne),Je===void 0&&(Je=[],w.set(Ne,Je)),ye.isWebGLMultipleRenderTargets){let $e=ye.texture;if(Je.length!==$e.length||Je[0]!==36064){for(let at=0,Dt=$e.length;at<Dt;at++)Je[at]=36064+at;Je.length=$e.length,Fe=!0}}else Je[0]!==36064&&(Je[0]=36064,Fe=!0);else Je[0]!==1029&&(Je[0]=1029,Fe=!0);Fe&&(r.isWebGL2?t.drawBuffers(Je):i.get("WEBGL_draw_buffers").drawBuffersWEBGL(Je))}function Ue(ye){return _!==ye?(t.useProgram(ye),_=ye,!0):!1}let Le={[fc]:32774,[Gb]:32778,[LS]:32779};if(s)Le[Wb]=32775,Le[Kg]=32776;else{let ye=i.get("EXT_blend_minmax");ye!==null&&(Le[Wb]=ye.MIN_EXT,Le[Kg]=ye.MAX_EXT)}let Ie={[BS]:0,[xD]:1,[_D]:768,[qb]:770,[Zb]:776,[jS]:774,[NS]:772,[Qg]:769,[FS]:771,[US]:775,[$b]:773};function rt(ye,Ne,Je,Fe,$e,at,Dt,Wt){if(ye===$n){k===!0&&(we(3042),k=!1);return}if(k===!1&&(Pe(3042),k=!0),ye!==zS){if(ye!==A||Wt!==z){if((C!==fc||P!==fc)&&(t.blendEquation(32774),C=fc,P=fc),Wt)switch(ye){case pl:t.blendFuncSeparate(1,771,1,771);break;case Hb:t.blendFunc(1,1);break;case RS:t.blendFuncSeparate(0,769,0,1);break;case Xg:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye);break}else switch(ye){case pl:t.blendFuncSeparate(770,771,1,771);break;case Hb:t.blendFunc(770,1);break;case RS:t.blendFuncSeparate(0,769,0,1);break;case Xg:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye);break}M=null,D=null,T=null,O=null,A=ye,z=Wt}return}$e=$e||Ne,at=at||Je,Dt=Dt||Fe,(Ne!==C||$e!==P)&&(t.blendEquationSeparate(Le[Ne],Le[$e]),C=Ne,P=$e),(Je!==M||Fe!==D||at!==T||Dt!==O)&&(t.blendFuncSeparate(Ie[Je],Ie[Fe],Ie[at],Ie[Dt]),M=Je,D=Fe,T=at,O=Dt),A=ye,z=!1}function nt(ye,Ne){ye.side===ta?we(2884):Pe(2884);let Je=ye.side===qn;Ne&&(Je=!Je),ot(Je),ye.blending===pl&&ye.transparent===!1?rt($n):rt(ye.blending,ye.blendEquation,ye.blendSrc,ye.blendDst,ye.blendEquationAlpha,ye.blendSrcAlpha,ye.blendDstAlpha,ye.premultipliedAlpha),h.setFunc(ye.depthFunc),h.setTest(ye.depthTest),h.setMask(ye.depthWrite),u.setMask(ye.colorWrite);let Fe=ye.stencilWrite;f.setTest(Fe),Fe&&(f.setMask(ye.stencilWriteMask),f.setFunc(ye.stencilFunc,ye.stencilRef,ye.stencilFuncMask),f.setOp(ye.stencilFail,ye.stencilZFail,ye.stencilZPass)),Ke(ye.polygonOffset,ye.polygonOffsetFactor,ye.polygonOffsetUnits),ye.alphaToCoverage===!0?Pe(32926):we(32926)}function ot(ye){L!==ye&&(ye?t.frontFace(2304):t.frontFace(2305),L=ye)}function mt(ye){ye!==Rn?(Pe(2884),ye!==B&&(ye===Mf?t.cullFace(1029):ye===Tf?t.cullFace(1028):t.cullFace(1032))):we(2884),B=ye}function it(ye){ye!==j&&(se&&t.lineWidth(ye),j=ye)}function Ke(ye,Ne,Je){ye?(Pe(32823),(V!==Ne||H!==Je)&&(t.polygonOffset(Ne,Je),V=Ne,H=Je)):we(32823)}function pt(ye){ye?Pe(3089):we(3089)}function Rt(ye){ye===void 0&&(ye=33984+Y-1),te!==ye&&(t.activeTexture(ye),te=ye)}function ae(ye,Ne,Je){Je===void 0&&(te===null?Je=33984+Y-1:Je=te);let Fe=he[Je];Fe===void 0&&(Fe={type:void 0,texture:void 0},he[Je]=Fe),(Fe.type!==ye||Fe.texture!==Ne)&&(te!==Je&&(t.activeTexture(Je),te=Je),t.bindTexture(ye,Ne||le[ye]),Fe.type=ye,Fe.texture=Ne)}function Q(){let ye=he[te];ye!==void 0&&ye.type!==void 0&&(t.bindTexture(ye.type,null),ye.type=void 0,ye.texture=void 0)}function Te(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Qe(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function He(){try{t.texSubImage2D.apply(t,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function et(){try{t.texSubImage3D.apply(t,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ct(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function ct(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ge(){try{t.texStorage2D.apply(t,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function ut(){try{t.texStorage3D.apply(t,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Tt(){try{t.texImage2D.apply(t,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function xt(){try{t.texImage3D.apply(t,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ht(ye){pe.equals(ye)===!1&&(t.scissor(ye.x,ye.y,ye.z,ye.w),pe.copy(ye))}function Bt(ye){ce.equals(ye)===!1&&(t.viewport(ye.x,ye.y,ye.z,ye.w),ce.copy(ye))}function Ei(ye,Ne){let Je=p.get(Ne);Je===void 0&&(Je=new WeakMap,p.set(Ne,Je));let Fe=Je.get(ye);Fe===void 0&&(Fe=t.getUniformBlockIndex(Ne,ye.name),Je.set(ye,Fe))}function Xi(ye,Ne){let Je=p.get(Ne).get(ye);m.get(Ne)!==Je&&(t.uniformBlockBinding(Ne,Je,ye.__bindingPointIndex),m.set(Ne,Je))}function Bn(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),s===!0&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),g={},te=null,he={},v={},w=new WeakMap,x=[],_=null,k=!1,A=null,C=null,M=null,D=null,P=null,T=null,O=null,z=!1,L=null,B=null,j=null,V=null,H=null,pe.set(0,0,t.canvas.width,t.canvas.height),ce.set(0,0,t.canvas.width,t.canvas.height),u.reset(),h.reset(),f.reset()}return{buffers:{color:u,depth:h,stencil:f},enable:Pe,disable:we,bindFramebuffer:Ee,drawBuffers:xe,useProgram:Ue,setBlending:rt,setMaterial:nt,setFlipSided:ot,setCullFace:mt,setLineWidth:it,setPolygonOffset:Ke,setScissorTest:pt,activeTexture:Rt,bindTexture:ae,unbindTexture:Q,compressedTexImage2D:Te,compressedTexImage3D:Qe,texImage2D:Tt,texImage3D:xt,updateUBOMapping:Ei,uniformBlockBinding:Xi,texStorage2D:Ge,texStorage3D:ut,texSubImage2D:He,texSubImage3D:et,compressedTexSubImage2D:Ct,compressedTexSubImage3D:ct,scissor:Ht,viewport:Bt,reset:Bn}}function pU(t,i,r,s,l,d,c){let u=l.isWebGL2,h=l.maxTextures,f=l.maxCubemapSize,m=l.maxTextureSize,p=l.maxSamples,g=i.has("WEBGL_multisampled_render_to_texture")?i.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),w=new WeakMap,x,_=new WeakMap,k=!1;try{k=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(ae){}function A(ae,Q){return k?new OffscreenCanvas(ae,Q):gt("canvas")}function C(ae,Q,Te,Qe){let He=1;if((ae.width>Qe||ae.height>Qe)&&(He=Qe/Math.max(ae.width,ae.height)),He<1||Q===!0)if(typeof HTMLImageElement<"u"&&ae instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ae instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ae instanceof ImageBitmap){let et=Q?ue:Math.floor,Ct=et(He*ae.width),ct=et(He*ae.height);x===void 0&&(x=A(Ct,ct));let Ge=Te?A(Ct,ct):x;return Ge.width=Ct,Ge.height=ct,Ge.getContext("2d").drawImage(ae,0,0,Ct,ct),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ae.width+"x"+ae.height+") to ("+Ct+"x"+ct+")."),Ge}else return"data"in ae&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ae.width+"x"+ae.height+")."),ae;return ae}function M(ae){return K(ae.width)&&K(ae.height)}function D(ae){return u?!1:ae.wrapS!==Nn||ae.wrapT!==Nn||ae.minFilter!==on&&ae.minFilter!==yi}function P(ae,Q){return ae.generateMipmaps&&Q&&ae.minFilter!==on&&ae.minFilter!==yi}function T(ae){t.generateMipmap(ae)}function O(ae,Q,Te,Qe,He=!1){if(u===!1)return Q;if(ae!==null){if(t[ae]!==void 0)return t[ae];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ae+"'")}let et=Q;return Q===6403&&(Te===5126&&(et=33326),Te===5131&&(et=33325),Te===5121&&(et=33321)),Q===33319&&(Te===5126&&(et=33328),Te===5131&&(et=33327),Te===5121&&(et=33323)),Q===6408&&(Te===5126&&(et=34836),Te===5131&&(et=34842),Te===5121&&(et=Qe===ci&&He===!1?35907:32856),Te===32819&&(et=32854),Te===32820&&(et=32855)),(et===33325||et===33326||et===33327||et===33328||et===34842||et===34836)&&i.get("EXT_color_buffer_float"),et}function z(ae,Q,Te){return P(ae,Te)===!0||ae.isFramebufferTexture&&ae.minFilter!==on&&ae.minFilter!==yi?Math.log2(Math.max(Q.width,Q.height))+1:ae.mipmaps!==void 0&&ae.mipmaps.length>0?ae.mipmaps.length:ae.isCompressedTexture&&Array.isArray(ae.image)?Q.mipmaps.length:1}function L(ae){return ae===on||ae===Jb||ae===av?9728:9729}function B(ae){let Q=ae.target;Q.removeEventListener("dispose",B),V(Q),Q.isVideoTexture&&w.delete(Q)}function j(ae){let Q=ae.target;Q.removeEventListener("dispose",j),Y(Q)}function V(ae){let Q=s.get(ae);if(Q.__webglInit===void 0)return;let Te=ae.source,Qe=_.get(Te);if(Qe){let He=Qe[Q.__cacheKey];He.usedTimes--,He.usedTimes===0&&H(ae),Object.keys(Qe).length===0&&_.delete(Te)}s.remove(ae)}function H(ae){let Q=s.get(ae);t.deleteTexture(Q.__webglTexture);let Te=ae.source,Qe=_.get(Te);delete Qe[Q.__cacheKey],c.memory.textures--}function Y(ae){let Q=ae.texture,Te=s.get(ae),Qe=s.get(Q);if(Qe.__webglTexture!==void 0&&(t.deleteTexture(Qe.__webglTexture),c.memory.textures--),ae.depthTexture&&ae.depthTexture.dispose(),ae.isWebGLCubeRenderTarget)for(let He=0;He<6;He++)t.deleteFramebuffer(Te.__webglFramebuffer[He]),Te.__webglDepthbuffer&&t.deleteRenderbuffer(Te.__webglDepthbuffer[He]);else{if(t.deleteFramebuffer(Te.__webglFramebuffer),Te.__webglDepthbuffer&&t.deleteRenderbuffer(Te.__webglDepthbuffer),Te.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Te.__webglMultisampledFramebuffer),Te.__webglColorRenderbuffer)for(let He=0;He<Te.__webglColorRenderbuffer.length;He++)Te.__webglColorRenderbuffer[He]&&t.deleteRenderbuffer(Te.__webglColorRenderbuffer[He]);Te.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Te.__webglDepthRenderbuffer)}if(ae.isWebGLMultipleRenderTargets)for(let He=0,et=Q.length;He<et;He++){let Ct=s.get(Q[He]);Ct.__webglTexture&&(t.deleteTexture(Ct.__webglTexture),c.memory.textures--),s.remove(Q[He])}s.remove(Q),s.remove(ae)}let se=0;function re(){se=0}function $(){let ae=se;return ae>=h&&console.warn("THREE.WebGLTextures: Trying to use "+ae+" texture units while this GPU supports only "+h),se+=1,ae}function te(ae){let Q=[];return Q.push(ae.wrapS),Q.push(ae.wrapT),Q.push(ae.wrapR||0),Q.push(ae.magFilter),Q.push(ae.minFilter),Q.push(ae.anisotropy),Q.push(ae.internalFormat),Q.push(ae.format),Q.push(ae.type),Q.push(ae.generateMipmaps),Q.push(ae.premultiplyAlpha),Q.push(ae.flipY),Q.push(ae.unpackAlignment),Q.push(ae.encoding),Q.join()}function he(ae,Q){let Te=s.get(ae);if(ae.isVideoTexture&&pt(ae),ae.isRenderTargetTexture===!1&&ae.version>0&&Te.__version!==ae.version){let Qe=ae.image;if(Qe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Qe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{we(Te,ae,Q);return}}r.bindTexture(3553,Te.__webglTexture,33984+Q)}function oe(ae,Q){let Te=s.get(ae);if(ae.version>0&&Te.__version!==ae.version){we(Te,ae,Q);return}r.bindTexture(35866,Te.__webglTexture,33984+Q)}function ee(ae,Q){let Te=s.get(ae);if(ae.version>0&&Te.__version!==ae.version){we(Te,ae,Q);return}r.bindTexture(32879,Te.__webglTexture,33984+Q)}function pe(ae,Q){let Te=s.get(ae);if(ae.version>0&&Te.__version!==ae.version){Ee(Te,ae,Q);return}r.bindTexture(34067,Te.__webglTexture,33984+Q)}let ce={[Eo]:10497,[Nn]:33071,[rv]:33648},ve={[on]:9728,[Jb]:9984,[av]:9986,[yi]:9729,[YS]:9985,[vc]:9987};function le(ae,Q,Te){if(Te?(t.texParameteri(ae,10242,ce[Q.wrapS]),t.texParameteri(ae,10243,ce[Q.wrapT]),(ae===32879||ae===35866)&&t.texParameteri(ae,32882,ce[Q.wrapR]),t.texParameteri(ae,10240,ve[Q.magFilter]),t.texParameteri(ae,10241,ve[Q.minFilter])):(t.texParameteri(ae,10242,33071),t.texParameteri(ae,10243,33071),(ae===32879||ae===35866)&&t.texParameteri(ae,32882,33071),(Q.wrapS!==Nn||Q.wrapT!==Nn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(ae,10240,L(Q.magFilter)),t.texParameteri(ae,10241,L(Q.minFilter)),Q.minFilter!==on&&Q.minFilter!==yi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),i.has("EXT_texture_filter_anisotropic")===!0){let Qe=i.get("EXT_texture_filter_anisotropic");if(Q.magFilter===on||Q.minFilter!==av&&Q.minFilter!==vc||Q.type===ia&&i.has("OES_texture_float_linear")===!1||u===!1&&Q.type===yc&&i.has("OES_texture_half_float_linear")===!1)return;(Q.anisotropy>1||s.get(Q).__currentAnisotropy)&&(t.texParameterf(ae,Qe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,l.getMaxAnisotropy())),s.get(Q).__currentAnisotropy=Q.anisotropy)}}function Pe(ae,Q){let Te=!1;ae.__webglInit===void 0&&(ae.__webglInit=!0,Q.addEventListener("dispose",B));let Qe=Q.source,He=_.get(Qe);He===void 0&&(He={},_.set(Qe,He));let et=te(Q);if(et!==ae.__cacheKey){He[et]===void 0&&(He[et]={texture:t.createTexture(),usedTimes:0},c.memory.textures++,Te=!0),He[et].usedTimes++;let Ct=He[ae.__cacheKey];Ct!==void 0&&(He[ae.__cacheKey].usedTimes--,Ct.usedTimes===0&&H(Q)),ae.__cacheKey=et,ae.__webglTexture=He[et].texture}return Te}function we(ae,Q,Te){let Qe=3553;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(Qe=35866),Q.isData3DTexture&&(Qe=32879);let He=Pe(ae,Q),et=Q.source;r.bindTexture(Qe,ae.__webglTexture,33984+Te);let Ct=s.get(et);if(et.version!==Ct.__version||He===!0){r.activeTexture(33984+Te),t.pixelStorei(37440,Q.flipY),t.pixelStorei(37441,Q.premultiplyAlpha),t.pixelStorei(3317,Q.unpackAlignment),t.pixelStorei(37443,0);let ct=D(Q)&&M(Q.image)===!1,Ge=C(Q.image,ct,!1,m);Ge=Rt(Q,Ge);let ut=M(Ge)||u,Tt=d.convert(Q.format,Q.encoding),xt=d.convert(Q.type),Ht=O(Q.internalFormat,Tt,xt,Q.encoding,Q.isVideoTexture);le(Qe,Q,ut);let Bt,Ei=Q.mipmaps,Xi=u&&Q.isVideoTexture!==!0,Bn=Ct.__version===void 0||He===!0,ye=z(Q,Ge,ut);if(Q.isDepthTexture)Ht=6402,u?Q.type===ia?Ht=36012:Q.type===Mo?Ht=33190:Q.type===hd?Ht=35056:Ht=33189:Q.type===ia&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Q.format===fd&&Ht===6402&&Q.type!==ew&&Q.type!==Mo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Q.type=Mo,xt=d.convert(Q.type)),Q.format===pd&&Ht===6402&&(Ht=34041,Q.type!==hd&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Q.type=hd,xt=d.convert(Q.type))),Bn&&(Xi?r.texStorage2D(3553,1,Ht,Ge.width,Ge.height):r.texImage2D(3553,0,Ht,Ge.width,Ge.height,0,Tt,xt,null));else if(Q.isDataTexture)if(Ei.length>0&&ut){Xi&&Bn&&r.texStorage2D(3553,ye,Ht,Ei[0].width,Ei[0].height);for(let Ne=0,Je=Ei.length;Ne<Je;Ne++)Bt=Ei[Ne],Xi?r.texSubImage2D(3553,Ne,0,0,Bt.width,Bt.height,Tt,xt,Bt.data):r.texImage2D(3553,Ne,Ht,Bt.width,Bt.height,0,Tt,xt,Bt.data);Q.generateMipmaps=!1}else Xi?(Bn&&r.texStorage2D(3553,ye,Ht,Ge.width,Ge.height),r.texSubImage2D(3553,0,0,0,Ge.width,Ge.height,Tt,xt,Ge.data)):r.texImage2D(3553,0,Ht,Ge.width,Ge.height,0,Tt,xt,Ge.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){Xi&&Bn&&r.texStorage3D(35866,ye,Ht,Ei[0].width,Ei[0].height,Ge.depth);for(let Ne=0,Je=Ei.length;Ne<Je;Ne++)Bt=Ei[Ne],Q.format!==Pa?Tt!==null?Xi?r.compressedTexSubImage3D(35866,Ne,0,0,0,Bt.width,Bt.height,Ge.depth,Tt,Bt.data,0,0):r.compressedTexImage3D(35866,Ne,Ht,Bt.width,Bt.height,Ge.depth,0,Bt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xi?r.texSubImage3D(35866,Ne,0,0,0,Bt.width,Bt.height,Ge.depth,Tt,xt,Bt.data):r.texImage3D(35866,Ne,Ht,Bt.width,Bt.height,Ge.depth,0,Tt,xt,Bt.data)}else{Xi&&Bn&&r.texStorage2D(3553,ye,Ht,Ei[0].width,Ei[0].height);for(let Ne=0,Je=Ei.length;Ne<Je;Ne++)Bt=Ei[Ne],Q.format!==Pa?Tt!==null?Xi?r.compressedTexSubImage2D(3553,Ne,0,0,Bt.width,Bt.height,Tt,Bt.data):r.compressedTexImage2D(3553,Ne,Ht,Bt.width,Bt.height,0,Bt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Xi?r.texSubImage2D(3553,Ne,0,0,Bt.width,Bt.height,Tt,xt,Bt.data):r.texImage2D(3553,Ne,Ht,Bt.width,Bt.height,0,Tt,xt,Bt.data)}else if(Q.isDataArrayTexture)Xi?(Bn&&r.texStorage3D(35866,ye,Ht,Ge.width,Ge.height,Ge.depth),r.texSubImage3D(35866,0,0,0,0,Ge.width,Ge.height,Ge.depth,Tt,xt,Ge.data)):r.texImage3D(35866,0,Ht,Ge.width,Ge.height,Ge.depth,0,Tt,xt,Ge.data);else if(Q.isData3DTexture)Xi?(Bn&&r.texStorage3D(32879,ye,Ht,Ge.width,Ge.height,Ge.depth),r.texSubImage3D(32879,0,0,0,0,Ge.width,Ge.height,Ge.depth,Tt,xt,Ge.data)):r.texImage3D(32879,0,Ht,Ge.width,Ge.height,Ge.depth,0,Tt,xt,Ge.data);else if(Q.isFramebufferTexture){if(Bn)if(Xi)r.texStorage2D(3553,ye,Ht,Ge.width,Ge.height);else{let Ne=Ge.width,Je=Ge.height;for(let Fe=0;Fe<ye;Fe++)r.texImage2D(3553,Fe,Ht,Ne,Je,0,Tt,xt,null),Ne>>=1,Je>>=1}}else if(Ei.length>0&&ut){Xi&&Bn&&r.texStorage2D(3553,ye,Ht,Ei[0].width,Ei[0].height);for(let Ne=0,Je=Ei.length;Ne<Je;Ne++)Bt=Ei[Ne],Xi?r.texSubImage2D(3553,Ne,0,0,Tt,xt,Bt):r.texImage2D(3553,Ne,Ht,Tt,xt,Bt);Q.generateMipmaps=!1}else Xi?(Bn&&r.texStorage2D(3553,ye,Ht,Ge.width,Ge.height),r.texSubImage2D(3553,0,0,0,Tt,xt,Ge)):r.texImage2D(3553,0,Ht,Tt,xt,Ge);P(Q,ut)&&T(Qe),Ct.__version=et.version,Q.onUpdate&&Q.onUpdate(Q)}ae.__version=Q.version}function Ee(ae,Q,Te){if(Q.image.length!==6)return;let Qe=Pe(ae,Q),He=Q.source;r.bindTexture(34067,ae.__webglTexture,33984+Te);let et=s.get(He);if(He.version!==et.__version||Qe===!0){r.activeTexture(33984+Te),t.pixelStorei(37440,Q.flipY),t.pixelStorei(37441,Q.premultiplyAlpha),t.pixelStorei(3317,Q.unpackAlignment),t.pixelStorei(37443,0);let Ct=Q.isCompressedTexture||Q.image[0].isCompressedTexture,ct=Q.image[0]&&Q.image[0].isDataTexture,Ge=[];for(let Ne=0;Ne<6;Ne++)!Ct&&!ct?Ge[Ne]=C(Q.image[Ne],!1,!0,f):Ge[Ne]=ct?Q.image[Ne].image:Q.image[Ne],Ge[Ne]=Rt(Q,Ge[Ne]);let ut=Ge[0],Tt=M(ut)||u,xt=d.convert(Q.format,Q.encoding),Ht=d.convert(Q.type),Bt=O(Q.internalFormat,xt,Ht,Q.encoding),Ei=u&&Q.isVideoTexture!==!0,Xi=et.__version===void 0||Qe===!0,Bn=z(Q,ut,Tt);le(34067,Q,Tt);let ye;if(Ct){Ei&&Xi&&r.texStorage2D(34067,Bn,Bt,ut.width,ut.height);for(let Ne=0;Ne<6;Ne++){ye=Ge[Ne].mipmaps;for(let Je=0;Je<ye.length;Je++){let Fe=ye[Je];Q.format!==Pa?xt!==null?Ei?r.compressedTexSubImage2D(34069+Ne,Je,0,0,Fe.width,Fe.height,xt,Fe.data):r.compressedTexImage2D(34069+Ne,Je,Bt,Fe.width,Fe.height,0,Fe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ei?r.texSubImage2D(34069+Ne,Je,0,0,Fe.width,Fe.height,xt,Ht,Fe.data):r.texImage2D(34069+Ne,Je,Bt,Fe.width,Fe.height,0,xt,Ht,Fe.data)}}}else{ye=Q.mipmaps,Ei&&Xi&&(ye.length>0&&Bn++,r.texStorage2D(34067,Bn,Bt,Ge[0].width,Ge[0].height));for(let Ne=0;Ne<6;Ne++)if(ct){Ei?r.texSubImage2D(34069+Ne,0,0,0,Ge[Ne].width,Ge[Ne].height,xt,Ht,Ge[Ne].data):r.texImage2D(34069+Ne,0,Bt,Ge[Ne].width,Ge[Ne].height,0,xt,Ht,Ge[Ne].data);for(let Je=0;Je<ye.length;Je++){let Fe=ye[Je].image[Ne].image;Ei?r.texSubImage2D(34069+Ne,Je+1,0,0,Fe.width,Fe.height,xt,Ht,Fe.data):r.texImage2D(34069+Ne,Je+1,Bt,Fe.width,Fe.height,0,xt,Ht,Fe.data)}}else{Ei?r.texSubImage2D(34069+Ne,0,0,0,xt,Ht,Ge[Ne]):r.texImage2D(34069+Ne,0,Bt,xt,Ht,Ge[Ne]);for(let Je=0;Je<ye.length;Je++){let Fe=ye[Je];Ei?r.texSubImage2D(34069+Ne,Je+1,0,0,xt,Ht,Fe.image[Ne]):r.texImage2D(34069+Ne,Je+1,Bt,xt,Ht,Fe.image[Ne])}}}P(Q,Tt)&&T(34067),et.__version=He.version,Q.onUpdate&&Q.onUpdate(Q)}ae.__version=Q.version}function xe(ae,Q,Te,Qe,He){let et=d.convert(Te.format,Te.encoding),Ct=d.convert(Te.type),ct=O(Te.internalFormat,et,Ct,Te.encoding);s.get(Q).__hasExternalTextures||(He===32879||He===35866?r.texImage3D(He,0,ct,Q.width,Q.height,Q.depth,0,et,Ct,null):r.texImage2D(He,0,ct,Q.width,Q.height,0,et,Ct,null)),r.bindFramebuffer(36160,ae),Ke(Q)?g.framebufferTexture2DMultisampleEXT(36160,Qe,He,s.get(Te).__webglTexture,0,it(Q)):(He===3553||He>=34069&&He<=34074)&&t.framebufferTexture2D(36160,Qe,He,s.get(Te).__webglTexture,0),r.bindFramebuffer(36160,null)}function Ue(ae,Q,Te){if(t.bindRenderbuffer(36161,ae),Q.depthBuffer&&!Q.stencilBuffer){let Qe=33189;if(Te||Ke(Q)){let He=Q.depthTexture;He&&He.isDepthTexture&&(He.type===ia?Qe=36012:He.type===Mo&&(Qe=33190));let et=it(Q);Ke(Q)?g.renderbufferStorageMultisampleEXT(36161,et,Qe,Q.width,Q.height):t.renderbufferStorageMultisample(36161,et,Qe,Q.width,Q.height)}else t.renderbufferStorage(36161,Qe,Q.width,Q.height);t.framebufferRenderbuffer(36160,36096,36161,ae)}else if(Q.depthBuffer&&Q.stencilBuffer){let Qe=it(Q);Te&&Ke(Q)===!1?t.renderbufferStorageMultisample(36161,Qe,35056,Q.width,Q.height):Ke(Q)?g.renderbufferStorageMultisampleEXT(36161,Qe,35056,Q.width,Q.height):t.renderbufferStorage(36161,34041,Q.width,Q.height),t.framebufferRenderbuffer(36160,33306,36161,ae)}else{let Qe=Q.isWebGLMultipleRenderTargets===!0?Q.texture:[Q.texture];for(let He=0;He<Qe.length;He++){let et=Qe[He],Ct=d.convert(et.format,et.encoding),ct=d.convert(et.type),Ge=O(et.internalFormat,Ct,ct,et.encoding),ut=it(Q);Te&&Ke(Q)===!1?t.renderbufferStorageMultisample(36161,ut,Ge,Q.width,Q.height):Ke(Q)?g.renderbufferStorageMultisampleEXT(36161,ut,Ge,Q.width,Q.height):t.renderbufferStorage(36161,Ge,Q.width,Q.height)}}t.bindRenderbuffer(36161,null)}function Le(ae,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(r.bindFramebuffer(36160,ae),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!s.get(Q.depthTexture).__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),he(Q.depthTexture,0);let Te=s.get(Q.depthTexture).__webglTexture,Qe=it(Q);if(Q.depthTexture.format===fd)Ke(Q)?g.framebufferTexture2DMultisampleEXT(36160,36096,3553,Te,0,Qe):t.framebufferTexture2D(36160,36096,3553,Te,0);else if(Q.depthTexture.format===pd)Ke(Q)?g.framebufferTexture2DMultisampleEXT(36160,33306,3553,Te,0,Qe):t.framebufferTexture2D(36160,33306,3553,Te,0);else throw new Error("Unknown depthTexture format")}function Ie(ae){let Q=s.get(ae),Te=ae.isWebGLCubeRenderTarget===!0;if(ae.depthTexture&&!Q.__autoAllocateDepthBuffer){if(Te)throw new Error("target.depthTexture not supported in Cube render targets");Le(Q.__webglFramebuffer,ae)}else if(Te){Q.__webglDepthbuffer=[];for(let Qe=0;Qe<6;Qe++)r.bindFramebuffer(36160,Q.__webglFramebuffer[Qe]),Q.__webglDepthbuffer[Qe]=t.createRenderbuffer(),Ue(Q.__webglDepthbuffer[Qe],ae,!1)}else r.bindFramebuffer(36160,Q.__webglFramebuffer),Q.__webglDepthbuffer=t.createRenderbuffer(),Ue(Q.__webglDepthbuffer,ae,!1);r.bindFramebuffer(36160,null)}function rt(ae,Q,Te){let Qe=s.get(ae);Q!==void 0&&xe(Qe.__webglFramebuffer,ae,ae.texture,36064,3553),Te!==void 0&&Ie(ae)}function nt(ae){let Q=ae.texture,Te=s.get(ae),Qe=s.get(Q);ae.addEventListener("dispose",j),ae.isWebGLMultipleRenderTargets!==!0&&(Qe.__webglTexture===void 0&&(Qe.__webglTexture=t.createTexture()),Qe.__version=Q.version,c.memory.textures++);let He=ae.isWebGLCubeRenderTarget===!0,et=ae.isWebGLMultipleRenderTargets===!0,Ct=M(ae)||u;if(He){Te.__webglFramebuffer=[];for(let ct=0;ct<6;ct++)Te.__webglFramebuffer[ct]=t.createFramebuffer()}else{if(Te.__webglFramebuffer=t.createFramebuffer(),et)if(l.drawBuffers){let ct=ae.texture;for(let Ge=0,ut=ct.length;Ge<ut;Ge++){let Tt=s.get(ct[Ge]);Tt.__webglTexture===void 0&&(Tt.__webglTexture=t.createTexture(),c.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(u&&ae.samples>0&&Ke(ae)===!1){let ct=et?Q:[Q];Te.__webglMultisampledFramebuffer=t.createFramebuffer(),Te.__webglColorRenderbuffer=[],r.bindFramebuffer(36160,Te.__webglMultisampledFramebuffer);for(let Ge=0;Ge<ct.length;Ge++){let ut=ct[Ge];Te.__webglColorRenderbuffer[Ge]=t.createRenderbuffer(),t.bindRenderbuffer(36161,Te.__webglColorRenderbuffer[Ge]);let Tt=d.convert(ut.format,ut.encoding),xt=d.convert(ut.type),Ht=O(ut.internalFormat,Tt,xt,ut.encoding,ae.isXRRenderTarget===!0),Bt=it(ae);t.renderbufferStorageMultisample(36161,Bt,Ht,ae.width,ae.height),t.framebufferRenderbuffer(36160,36064+Ge,36161,Te.__webglColorRenderbuffer[Ge])}t.bindRenderbuffer(36161,null),ae.depthBuffer&&(Te.__webglDepthRenderbuffer=t.createRenderbuffer(),Ue(Te.__webglDepthRenderbuffer,ae,!0)),r.bindFramebuffer(36160,null)}}if(He){r.bindTexture(34067,Qe.__webglTexture),le(34067,Q,Ct);for(let ct=0;ct<6;ct++)xe(Te.__webglFramebuffer[ct],ae,Q,36064,34069+ct);P(Q,Ct)&&T(34067),r.unbindTexture()}else if(et){let ct=ae.texture;for(let Ge=0,ut=ct.length;Ge<ut;Ge++){let Tt=ct[Ge],xt=s.get(Tt);r.bindTexture(3553,xt.__webglTexture),le(3553,Tt,Ct),xe(Te.__webglFramebuffer,ae,Tt,36064+Ge,3553),P(Tt,Ct)&&T(3553)}r.unbindTexture()}else{let ct=3553;(ae.isWebGL3DRenderTarget||ae.isWebGLArrayRenderTarget)&&(u?ct=ae.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),r.bindTexture(ct,Qe.__webglTexture),le(ct,Q,Ct),xe(Te.__webglFramebuffer,ae,Q,36064,ct),P(Q,Ct)&&T(ct),r.unbindTexture()}ae.depthBuffer&&Ie(ae)}function ot(ae){let Q=M(ae)||u,Te=ae.isWebGLMultipleRenderTargets===!0?ae.texture:[ae.texture];for(let Qe=0,He=Te.length;Qe<He;Qe++){let et=Te[Qe];if(P(et,Q)){let Ct=ae.isWebGLCubeRenderTarget?34067:3553,ct=s.get(et).__webglTexture;r.bindTexture(Ct,ct),T(Ct),r.unbindTexture()}}}function mt(ae){if(u&&ae.samples>0&&Ke(ae)===!1){let Q=ae.isWebGLMultipleRenderTargets?ae.texture:[ae.texture],Te=ae.width,Qe=ae.height,He=16384,et=[],Ct=ae.stencilBuffer?33306:36096,ct=s.get(ae),Ge=ae.isWebGLMultipleRenderTargets===!0;if(Ge)for(let ut=0;ut<Q.length;ut++)r.bindFramebuffer(36160,ct.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+ut,36161,null),r.bindFramebuffer(36160,ct.__webglFramebuffer),t.framebufferTexture2D(36009,36064+ut,3553,null,0);r.bindFramebuffer(36008,ct.__webglMultisampledFramebuffer),r.bindFramebuffer(36009,ct.__webglFramebuffer);for(let ut=0;ut<Q.length;ut++){et.push(36064+ut),ae.depthBuffer&&et.push(Ct);let Tt=ct.__ignoreDepthValues!==void 0?ct.__ignoreDepthValues:!1;if(Tt===!1&&(ae.depthBuffer&&(He|=256),ae.stencilBuffer&&(He|=1024)),Ge&&t.framebufferRenderbuffer(36008,36064,36161,ct.__webglColorRenderbuffer[ut]),Tt===!0&&(t.invalidateFramebuffer(36008,[Ct]),t.invalidateFramebuffer(36009,[Ct])),Ge){let xt=s.get(Q[ut]).__webglTexture;t.framebufferTexture2D(36009,36064,3553,xt,0)}t.blitFramebuffer(0,0,Te,Qe,0,0,Te,Qe,He,9728),v&&t.invalidateFramebuffer(36008,et)}if(r.bindFramebuffer(36008,null),r.bindFramebuffer(36009,null),Ge)for(let ut=0;ut<Q.length;ut++){r.bindFramebuffer(36160,ct.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064+ut,36161,ct.__webglColorRenderbuffer[ut]);let Tt=s.get(Q[ut]).__webglTexture;r.bindFramebuffer(36160,ct.__webglFramebuffer),t.framebufferTexture2D(36009,36064+ut,3553,Tt,0)}r.bindFramebuffer(36009,ct.__webglMultisampledFramebuffer)}}function it(ae){return Math.min(p,ae.samples)}function Ke(ae){let Q=s.get(ae);return u&&ae.samples>0&&i.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function pt(ae){let Q=c.render.frame;w.get(ae)!==Q&&(w.set(ae,Q),ae.update())}function Rt(ae,Q){let Te=ae.encoding,Qe=ae.format,He=ae.type;return ae.isCompressedTexture===!0||ae.isVideoTexture===!0||ae.format===vv||Te!==$s&&(Te===ci?u===!1?i.has("EXT_sRGB")===!0&&Qe===Pa?(ae.format=vv,ae.minFilter=yi,ae.generateMipmaps=!1):Q=na.sRGBToLinear(Q):(Qe!==Pa||He!==Nr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Te)),Q}this.allocateTextureUnit=$,this.resetTextureUnits=re,this.setTexture2D=he,this.setTexture2DArray=oe,this.setTexture3D=ee,this.setTextureCube=pe,this.rebindTextures=rt,this.setupRenderTarget=nt,this.updateRenderTargetMipmap=ot,this.updateMultisampleRenderTarget=mt,this.setupDepthRenderbuffer=Ie,this.setupFrameBufferTexture=xe,this.useMultisampledRTT=Ke}function mU(t,i,r){let s=r.isWebGL2;function l(d,c=null){let u;if(d===Nr)return 5121;if(d===SD)return 32819;if(d===AD)return 32820;if(d===XS)return 5120;if(d===KS)return 5122;if(d===ew)return 5123;if(d===tw)return 5124;if(d===Mo)return 5125;if(d===ia)return 5126;if(d===yc)return s?5131:(u=i.get("OES_texture_half_float"),u!==null?u.HALF_FLOAT_OES:null);if(d===QS)return 6406;if(d===Pa)return 6408;if(d===JS)return 6409;if(d===eA)return 6410;if(d===fd)return 6402;if(d===pd)return 34041;if(d===vv)return u=i.get("EXT_sRGB"),u!==null?u.SRGB_ALPHA_EXT:null;if(d===tA)return 6403;if(d===iA)return 36244;if(d===Fu)return 33319;if(d===nA)return 33320;if(d===Nu)return 36249;if(d===Pf||d===iw||d===sv||d===ov)if(c===ci)if(u=i.get("WEBGL_compressed_texture_s3tc_srgb"),u!==null){if(d===Pf)return u.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(d===iw)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(d===sv)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(d===ov)return u.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(u=i.get("WEBGL_compressed_texture_s3tc"),u!==null){if(d===Pf)return u.COMPRESSED_RGB_S3TC_DXT1_EXT;if(d===iw)return u.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(d===sv)return u.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(d===ov)return u.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(d===nw||d===rw||d===aw||d===sw)if(u=i.get("WEBGL_compressed_texture_pvrtc"),u!==null){if(d===nw)return u.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(d===rw)return u.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(d===aw)return u.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(d===sw)return u.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(d===rA)return u=i.get("WEBGL_compressed_texture_etc1"),u!==null?u.COMPRESSED_RGB_ETC1_WEBGL:null;if(d===ow||d===lw)if(u=i.get("WEBGL_compressed_texture_etc"),u!==null){if(d===ow)return c===ci?u.COMPRESSED_SRGB8_ETC2:u.COMPRESSED_RGB8_ETC2;if(d===lw)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:u.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(d===dw||d===lv||d===dv||d===cw||d===uw||d===hw||d===fw||d===aA||d===sA||d===pw||d===oA||d===cv||d===mw||d===gw)if(u=i.get("WEBGL_compressed_texture_astc"),u!==null){if(d===dw)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:u.COMPRESSED_RGBA_ASTC_4x4_KHR;if(d===lv)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:u.COMPRESSED_RGBA_ASTC_5x4_KHR;if(d===dv)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:u.COMPRESSED_RGBA_ASTC_5x5_KHR;if(d===cw)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:u.COMPRESSED_RGBA_ASTC_6x5_KHR;if(d===uw)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:u.COMPRESSED_RGBA_ASTC_6x6_KHR;if(d===hw)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:u.COMPRESSED_RGBA_ASTC_8x5_KHR;if(d===fw)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:u.COMPRESSED_RGBA_ASTC_8x6_KHR;if(d===aA)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:u.COMPRESSED_RGBA_ASTC_8x8_KHR;if(d===sA)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:u.COMPRESSED_RGBA_ASTC_10x5_KHR;if(d===pw)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:u.COMPRESSED_RGBA_ASTC_10x6_KHR;if(d===oA)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:u.COMPRESSED_RGBA_ASTC_10x8_KHR;if(d===cv)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:u.COMPRESSED_RGBA_ASTC_10x10_KHR;if(d===mw)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:u.COMPRESSED_RGBA_ASTC_12x10_KHR;if(d===gw)return c===ci?u.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:u.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(d===uv)if(u=i.get("EXT_texture_compression_bptc"),u!==null){if(d===uv)return c===ci?u.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:u.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(d===lA||d===vw||d===yw||d===bw)if(u=i.get("EXT_texture_compression_rgtc"),u!==null){if(d===uv)return u.COMPRESSED_RED_RGTC1_EXT;if(d===vw)return u.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(d===yw)return u.COMPRESSED_RED_GREEN_RGTC2_EXT;if(d===bw)return u.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return d===hd?s?34042:(u=i.get("WEBGL_depth_texture"),u!==null?u.UNSIGNED_INT_24_8_WEBGL:null):t[d]!==void 0?t[d]:null}return{convert:l}}var gU=class extends ha{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}},Kf=class extends ln{constructor(){super(),this.isGroup=!0,this.type="Group"}},vU={type:"move"},RA=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new N,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new N),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new N,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new N),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let i=this._hand;if(i)for(let r of t.hand.values())this._getHandJoint(i,r)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,i,r){let s=null,l=null,d=null,c=this._targetRay,u=this._grip,h=this._hand;if(t&&i.session.visibilityState!=="visible-blurred"){if(h&&t.hand){d=!0;for(let w of t.hand.values()){let x=i.getJointPose(w,r),_=this._getHandJoint(h,w);x!==null&&(_.matrix.fromArray(x.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=x.radius),_.visible=x!==null}let f=h.joints["index-finger-tip"],m=h.joints["thumb-tip"],p=f.position.distanceTo(m.position),g=.02,v=.005;h.inputState.pinching&&p>g+v?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!h.inputState.pinching&&p<=g-v&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else u!==null&&t.gripSpace&&(l=i.getPose(t.gripSpace,r),l!==null&&(u.matrix.fromArray(l.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),l.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(l.linearVelocity)):u.hasLinearVelocity=!1,l.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(l.angularVelocity)):u.hasAngularVelocity=!1));c!==null&&(s=i.getPose(t.targetRaySpace,r),s===null&&l!==null&&(s=l),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(vU)))}return c!==null&&(c.visible=s!==null),u!==null&&(u.visible=l!==null),h!==null&&(h.visible=d!==null),this}_getHandJoint(t,i){if(t.joints[i.jointName]===void 0){let r=new Kf;r.matrixAutoUpdate=!1,r.visible=!1,t.joints[i.jointName]=r,t.add(r)}return t.joints[i.jointName]}},Qf=class extends zn{constructor(t,i,r,s,l,d,c,u,h,f){if(f=f!==void 0?f:fd,f!==fd&&f!==pd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&f===fd&&(r=Mo),r===void 0&&f===pd&&(r=hd),super(null,s,l,d,c,u,f,r,h),this.isDepthTexture=!0,this.image={width:t,height:i},this.magFilter=c!==void 0?c:on,this.minFilter=u!==void 0?u:on,this.flipY=!1,this.generateMipmaps=!1}},yU=class extends Cr{constructor(t,i){super();let r=this,s=null,l=1,d=null,c="local-floor",u=1,h=null,f=null,m=null,p=null,g=null,v=null,w=i.getContextAttributes(),x=null,_=null,k=[],A=[],C=new Set,M=new Map,D=new ha;D.layers.enable(1),D.viewport=new ri;let P=new ha;P.layers.enable(2),P.viewport=new ri;let T=[D,P],O=new gU;O.layers.enable(1),O.layers.enable(2);let z=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let ee=k[oe];return ee===void 0&&(ee=new RA,k[oe]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(oe){let ee=k[oe];return ee===void 0&&(ee=new RA,k[oe]=ee),ee.getGripSpace()},this.getHand=function(oe){let ee=k[oe];return ee===void 0&&(ee=new RA,k[oe]=ee),ee.getHandSpace()};function B(oe){let ee=A.indexOf(oe.inputSource);if(ee===-1)return;let pe=k[ee];pe!==void 0&&pe.dispatchEvent({type:oe.type,data:oe.inputSource})}function j(){s.removeEventListener("select",B),s.removeEventListener("selectstart",B),s.removeEventListener("selectend",B),s.removeEventListener("squeeze",B),s.removeEventListener("squeezestart",B),s.removeEventListener("squeezeend",B),s.removeEventListener("end",j),s.removeEventListener("inputsourceschange",V);for(let oe=0;oe<k.length;oe++){let ee=A[oe];ee!==null&&(A[oe]=null,k[oe].disconnect(ee))}z=null,L=null,t.setRenderTarget(x),g=null,p=null,m=null,s=null,_=null,he.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){l=oe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){c=oe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return h||d},this.setReferenceSpace=function(oe){h=oe},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return m},this.getFrame=function(){return v},this.getSession=function(){return s},this.setSession=function(oe){return qi(this,null,function*(){if(s=oe,s!==null){if(x=t.getRenderTarget(),s.addEventListener("select",B),s.addEventListener("selectstart",B),s.addEventListener("selectend",B),s.addEventListener("squeeze",B),s.addEventListener("squeezestart",B),s.addEventListener("squeezeend",B),s.addEventListener("end",j),s.addEventListener("inputsourceschange",V),w.xrCompatible!==!0&&(yield i.makeXRCompatible()),s.renderState.layers===void 0||t.capabilities.isWebGL2===!1){let ee={antialias:s.renderState.layers===void 0?w.antialias:!0,alpha:w.alpha,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:l};g=new XRWebGLLayer(s,i,ee),s.updateRenderState({baseLayer:g}),_=new Oi(g.framebufferWidth,g.framebufferHeight,{format:Pa,type:Nr,encoding:t.outputEncoding,stencilBuffer:w.stencil})}else{let ee=null,pe=null,ce=null;w.depth&&(ce=w.stencil?35056:33190,ee=w.stencil?pd:fd,pe=w.stencil?hd:Mo);let ve={colorFormat:32856,depthFormat:ce,scaleFactor:l};m=new XRWebGLBinding(s,i),p=m.createProjectionLayer(ve),s.updateRenderState({layers:[p]}),_=new Oi(p.textureWidth,p.textureHeight,{format:Pa,type:Nr,depthTexture:new Qf(p.textureWidth,p.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,ee),stencilBuffer:w.stencil,encoding:t.outputEncoding,samples:w.antialias?4:0});let le=t.properties.get(_);le.__ignoreDepthValues=p.ignoreDepthValues}_.isXRRenderTarget=!0,this.setFoveation(u),h=null,d=yield s.requestReferenceSpace(c),he.setContext(s),he.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}})};function V(oe){for(let ee=0;ee<oe.removed.length;ee++){let pe=oe.removed[ee],ce=A.indexOf(pe);ce>=0&&(A[ce]=null,k[ce].disconnect(pe))}for(let ee=0;ee<oe.added.length;ee++){let pe=oe.added[ee],ce=A.indexOf(pe);if(ce===-1){for(let le=0;le<k.length;le++)if(le>=A.length){A.push(pe),ce=le;break}else if(A[le]===null){A[le]=pe,ce=le;break}if(ce===-1)break}let ve=k[ce];ve&&ve.connect(pe)}}let H=new N,Y=new N;function se(oe,ee,pe){H.setFromMatrixPosition(ee.matrixWorld),Y.setFromMatrixPosition(pe.matrixWorld);let ce=H.distanceTo(Y),ve=ee.projectionMatrix.elements,le=pe.projectionMatrix.elements,Pe=ve[14]/(ve[10]-1),we=ve[14]/(ve[10]+1),Ee=(ve[9]+1)/ve[5],xe=(ve[9]-1)/ve[5],Ue=(ve[8]-1)/ve[0],Le=(le[8]+1)/le[0],Ie=Pe*Ue,rt=Pe*Le,nt=ce/(-Ue+Le),ot=nt*-Ue;ee.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(ot),oe.translateZ(nt),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert();let mt=Pe+nt,it=we+nt,Ke=Ie-ot,pt=rt+(ce-ot),Rt=Ee*we/it*mt,ae=xe*we/it*mt;oe.projectionMatrix.makePerspective(Ke,pt,Rt,ae,mt,it)}function re(oe,ee){ee===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(ee.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(s===null)return;O.near=P.near=D.near=oe.near,O.far=P.far=D.far=oe.far,(z!==O.near||L!==O.far)&&(s.updateRenderState({depthNear:O.near,depthFar:O.far}),z=O.near,L=O.far);let ee=oe.parent,pe=O.cameras;re(O,ee);for(let ve=0;ve<pe.length;ve++)re(pe[ve],ee);O.matrixWorld.decompose(O.position,O.quaternion,O.scale),oe.matrix.copy(O.matrix),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale);let ce=oe.children;for(let ve=0,le=ce.length;ve<le;ve++)ce[ve].updateMatrixWorld(!0);pe.length===2?se(O,D,P):O.projectionMatrix.copy(D.projectionMatrix)},this.getCamera=function(){return O},this.getFoveation=function(){if(!(p===null&&g===null))return u},this.setFoveation=function(oe){u=oe,p!==null&&(p.fixedFoveation=oe),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=oe)},this.getPlanes=function(){return C};let $=null;function te(oe,ee){if(f=ee.getViewerPose(h||d),v=ee,f!==null){let pe=f.views;g!==null&&(t.setRenderTargetFramebuffer(_,g.framebuffer),t.setRenderTarget(_));let ce=!1;pe.length!==O.cameras.length&&(O.cameras.length=0,ce=!0);for(let ve=0;ve<pe.length;ve++){let le=pe[ve],Pe=null;if(g!==null)Pe=g.getViewport(le);else{let Ee=m.getViewSubImage(p,le);Pe=Ee.viewport,ve===0&&(t.setRenderTargetTextures(_,Ee.colorTexture,p.ignoreDepthValues?void 0:Ee.depthStencilTexture),t.setRenderTarget(_))}let we=T[ve];we===void 0&&(we=new ha,we.layers.enable(ve),we.viewport=new ri,T[ve]=we),we.matrix.fromArray(le.transform.matrix),we.projectionMatrix.fromArray(le.projectionMatrix),we.viewport.set(Pe.x,Pe.y,Pe.width,Pe.height),ve===0&&O.matrix.copy(we.matrix),ce===!0&&O.cameras.push(we)}}for(let pe=0;pe<k.length;pe++){let ce=A[pe],ve=k[pe];ce!==null&&ve!==void 0&&ve.update(ce,ee,h||d)}if($&&$(oe,ee),ee.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:ee.detectedPlanes});let pe=null;for(let ce of C)ee.detectedPlanes.has(ce)||(pe===null&&(pe=[]),pe.push(ce));if(pe!==null)for(let ce of pe)C.delete(ce),M.delete(ce),r.dispatchEvent({type:"planeremoved",data:ce});for(let ce of ee.detectedPlanes)if(!C.has(ce))C.add(ce),M.set(ce,ee.lastChangedTime),r.dispatchEvent({type:"planeadded",data:ce});else{let ve=M.get(ce);ce.lastChangedTime>ve&&(M.set(ce,ce.lastChangedTime),r.dispatchEvent({type:"planechanged",data:ce}))}}v=null}let he=new BD;he.setAnimationLoop(te),this.setAnimationLoop=function(oe){$=oe},this.dispose=function(){}}};function bU(t,i){function r(x,_){_.color.getRGB(x.fogColor.value,LD(t)),_.isFog?(x.fogNear.value=_.near,x.fogFar.value=_.far):_.isFogExp2&&(x.fogDensity.value=_.density)}function s(x,_,k,A,C){_.isMeshBasicMaterial||_.isMeshLambertMaterial?l(x,_):_.isMeshToonMaterial?(l(x,_),m(x,_)):_.isMeshPhongMaterial?(l(x,_),f(x,_)):_.isMeshStandardMaterial?(l(x,_),p(x,_),_.isMeshPhysicalMaterial&&g(x,_,C)):_.isMeshMatcapMaterial?(l(x,_),v(x,_)):_.isMeshDepthMaterial?l(x,_):_.isMeshDistanceMaterial?(l(x,_),w(x,_)):_.isMeshNormalMaterial?l(x,_):_.isLineBasicMaterial?(d(x,_),_.isLineDashedMaterial&&c(x,_)):_.isPointsMaterial?u(x,_,k,A):_.isSpriteMaterial?h(x,_):_.isShadowMaterial?(x.color.value.copy(_.color),x.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function l(x,_){x.opacity.value=_.opacity,_.color&&x.diffuse.value.copy(_.color),_.emissive&&x.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(x.map.value=_.map),_.alphaMap&&(x.alphaMap.value=_.alphaMap),_.bumpMap&&(x.bumpMap.value=_.bumpMap,x.bumpScale.value=_.bumpScale,_.side===qn&&(x.bumpScale.value*=-1)),_.displacementMap&&(x.displacementMap.value=_.displacementMap,x.displacementScale.value=_.displacementScale,x.displacementBias.value=_.displacementBias),_.emissiveMap&&(x.emissiveMap.value=_.emissiveMap),_.normalMap&&(x.normalMap.value=_.normalMap,x.normalScale.value.copy(_.normalScale),_.side===qn&&x.normalScale.value.negate()),_.specularMap&&(x.specularMap.value=_.specularMap),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest);let k=i.get(_).envMap;if(k&&(x.envMap.value=k,x.flipEnvMap.value=k.isCubeTexture&&k.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=_.reflectivity,x.ior.value=_.ior,x.refractionRatio.value=_.refractionRatio),_.lightMap){x.lightMap.value=_.lightMap;let M=t.physicallyCorrectLights!==!0?Math.PI:1;x.lightMapIntensity.value=_.lightMapIntensity*M}_.aoMap&&(x.aoMap.value=_.aoMap,x.aoMapIntensity.value=_.aoMapIntensity);let A;_.map?A=_.map:_.specularMap?A=_.specularMap:_.displacementMap?A=_.displacementMap:_.normalMap?A=_.normalMap:_.bumpMap?A=_.bumpMap:_.roughnessMap?A=_.roughnessMap:_.metalnessMap?A=_.metalnessMap:_.alphaMap?A=_.alphaMap:_.emissiveMap?A=_.emissiveMap:_.clearcoatMap?A=_.clearcoatMap:_.clearcoatNormalMap?A=_.clearcoatNormalMap:_.clearcoatRoughnessMap?A=_.clearcoatRoughnessMap:_.iridescenceMap?A=_.iridescenceMap:_.iridescenceThicknessMap?A=_.iridescenceThicknessMap:_.specularIntensityMap?A=_.specularIntensityMap:_.specularColorMap?A=_.specularColorMap:_.transmissionMap?A=_.transmissionMap:_.thicknessMap?A=_.thicknessMap:_.sheenColorMap?A=_.sheenColorMap:_.sheenRoughnessMap&&(A=_.sheenRoughnessMap),A!==void 0&&(A.isWebGLRenderTarget&&(A=A.texture),A.matrixAutoUpdate===!0&&A.updateMatrix(),x.uvTransform.value.copy(A.matrix));let C;_.aoMap?C=_.aoMap:_.lightMap&&(C=_.lightMap),C!==void 0&&(C.isWebGLRenderTarget&&(C=C.texture),C.matrixAutoUpdate===!0&&C.updateMatrix(),x.uv2Transform.value.copy(C.matrix))}function d(x,_){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity}function c(x,_){x.dashSize.value=_.dashSize,x.totalSize.value=_.dashSize+_.gapSize,x.scale.value=_.scale}function u(x,_,k,A){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,x.size.value=_.size*k,x.scale.value=A*.5,_.map&&(x.map.value=_.map),_.alphaMap&&(x.alphaMap.value=_.alphaMap),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest);let C;_.map?C=_.map:_.alphaMap&&(C=_.alphaMap),C!==void 0&&(C.matrixAutoUpdate===!0&&C.updateMatrix(),x.uvTransform.value.copy(C.matrix))}function h(x,_){x.diffuse.value.copy(_.color),x.opacity.value=_.opacity,x.rotation.value=_.rotation,_.map&&(x.map.value=_.map),_.alphaMap&&(x.alphaMap.value=_.alphaMap),_.alphaTest>0&&(x.alphaTest.value=_.alphaTest);let k;_.map?k=_.map:_.alphaMap&&(k=_.alphaMap),k!==void 0&&(k.matrixAutoUpdate===!0&&k.updateMatrix(),x.uvTransform.value.copy(k.matrix))}function f(x,_){x.specular.value.copy(_.specular),x.shininess.value=Math.max(_.shininess,1e-4)}function m(x,_){_.gradientMap&&(x.gradientMap.value=_.gradientMap)}function p(x,_){x.roughness.value=_.roughness,x.metalness.value=_.metalness,_.roughnessMap&&(x.roughnessMap.value=_.roughnessMap),_.metalnessMap&&(x.metalnessMap.value=_.metalnessMap),i.get(_).envMap&&(x.envMapIntensity.value=_.envMapIntensity)}function g(x,_,k){x.ior.value=_.ior,_.sheen>0&&(x.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),x.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(x.sheenColorMap.value=_.sheenColorMap),_.sheenRoughnessMap&&(x.sheenRoughnessMap.value=_.sheenRoughnessMap)),_.clearcoat>0&&(x.clearcoat.value=_.clearcoat,x.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(x.clearcoatMap.value=_.clearcoatMap),_.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap),_.clearcoatNormalMap&&(x.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),x.clearcoatNormalMap.value=_.clearcoatNormalMap,_.side===qn&&x.clearcoatNormalScale.value.negate())),_.iridescence>0&&(x.iridescence.value=_.iridescence,x.iridescenceIOR.value=_.iridescenceIOR,x.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(x.iridescenceMap.value=_.iridescenceMap),_.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=_.iridescenceThicknessMap)),_.transmission>0&&(x.transmission.value=_.transmission,x.transmissionSamplerMap.value=k.texture,x.transmissionSamplerSize.value.set(k.width,k.height),_.transmissionMap&&(x.transmissionMap.value=_.transmissionMap),x.thickness.value=_.thickness,_.thicknessMap&&(x.thicknessMap.value=_.thicknessMap),x.attenuationDistance.value=_.attenuationDistance,x.attenuationColor.value.copy(_.attenuationColor)),x.specularIntensity.value=_.specularIntensity,x.specularColor.value.copy(_.specularColor),_.specularIntensityMap&&(x.specularIntensityMap.value=_.specularIntensityMap),_.specularColorMap&&(x.specularColorMap.value=_.specularColorMap)}function v(x,_){_.matcap&&(x.matcap.value=_.matcap)}function w(x,_){x.referencePosition.value.copy(_.referencePosition),x.nearDistance.value=_.nearDistance,x.farDistance.value=_.farDistance}return{refreshFogUniforms:r,refreshMaterialUniforms:s}}function wU(t,i,r,s){let l={},d={},c=[],u=r.isWebGL2?t.getParameter(35375):0;function h(A,C){let M=C.program;s.uniformBlockBinding(A,M)}function f(A,C){let M=l[A.id];M===void 0&&(w(A),M=m(A),l[A.id]=M,A.addEventListener("dispose",_));let D=C.program;s.updateUBOMapping(A,D);let P=i.render.frame;d[A.id]!==P&&(g(A),d[A.id]=P)}function m(A){let C=p();A.__bindingPointIndex=C;let M=t.createBuffer(),D=A.__size,P=A.usage;return t.bindBuffer(35345,M),t.bufferData(35345,D,P),t.bindBuffer(35345,null),t.bindBufferBase(35345,C,M),M}function p(){for(let A=0;A<u;A++)if(c.indexOf(A)===-1)return c.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function g(A){let C=l[A.id],M=A.uniforms,D=A.__cache;t.bindBuffer(35345,C);for(let P=0,T=M.length;P<T;P++){let O=M[P];if(v(O,P,D)===!0){let z=O.__offset,L=Array.isArray(O.value)?O.value:[O.value],B=0;for(let j=0;j<L.length;j++){let V=L[j],H=x(V);typeof V=="number"?(O.__data[0]=V,t.bufferSubData(35345,z+B,O.__data)):V.isMatrix3?(O.__data[0]=V.elements[0],O.__data[1]=V.elements[1],O.__data[2]=V.elements[2],O.__data[3]=V.elements[0],O.__data[4]=V.elements[3],O.__data[5]=V.elements[4],O.__data[6]=V.elements[5],O.__data[7]=V.elements[0],O.__data[8]=V.elements[6],O.__data[9]=V.elements[7],O.__data[10]=V.elements[8],O.__data[11]=V.elements[0]):(V.toArray(O.__data,B),B+=H.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(35345,z,O.__data)}}t.bindBuffer(35345,null)}function v(A,C,M){let D=A.value;if(M[C]===void 0){if(typeof D=="number")M[C]=D;else{let P=Array.isArray(D)?D:[D],T=[];for(let O=0;O<P.length;O++)T.push(P[O].clone());M[C]=T}return!0}else if(typeof D=="number"){if(M[C]!==D)return M[C]=D,!0}else{let P=Array.isArray(M[C])?M[C]:[M[C]],T=Array.isArray(D)?D:[D];for(let O=0;O<P.length;O++){let z=P[O];if(z.equals(T[O])===!1)return z.copy(T[O]),!0}}return!1}function w(A){let C=A.uniforms,M=0,D=16,P=0;for(let T=0,O=C.length;T<O;T++){let z=C[T],L={boundary:0,storage:0},B=Array.isArray(z.value)?z.value:[z.value];for(let j=0,V=B.length;j<V;j++){let H=B[j],Y=x(H);L.boundary+=Y.boundary,L.storage+=Y.storage}if(z.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=M,T>0){P=M%D;let j=D-P;P!==0&&j-L.boundary<0&&(M+=D-P,z.__offset=M)}M+=L.storage}return P=M%D,P>0&&(M+=D-P),A.__size=M,A.__cache={},this}function x(A){let C={boundary:0,storage:0};return typeof A=="number"?(C.boundary=4,C.storage=4):A.isVector2?(C.boundary=8,C.storage=8):A.isVector3||A.isColor?(C.boundary=16,C.storage=12):A.isVector4?(C.boundary=16,C.storage=16):A.isMatrix3?(C.boundary=48,C.storage=48):A.isMatrix4?(C.boundary=64,C.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),C}function _(A){let C=A.target;C.removeEventListener("dispose",_);let M=c.indexOf(C.__bindingPointIndex);c.splice(M,1),t.deleteBuffer(l[C.id]),delete l[C.id],delete d[C.id]}function k(){for(let A in l)t.deleteBuffer(l[A]);c=[],l={},d={}}return{bind:h,update:f,dispose:k}}function xU(){let t=gt("canvas");return t.style.display="block",t}function uP(t={}){this.isWebGLRenderer=!0;let i=t.canvas!==void 0?t.canvas:xU(),r=t.context!==void 0?t.context:null,s=t.depth!==void 0?t.depth:!0,l=t.stencil!==void 0?t.stencil:!0,d=t.antialias!==void 0?t.antialias:!1,c=t.premultipliedAlpha!==void 0?t.premultipliedAlpha:!0,u=t.preserveDrawingBuffer!==void 0?t.preserveDrawingBuffer:!1,h=t.powerPreference!==void 0?t.powerPreference:"default",f=t.failIfMajorPerformanceCaveat!==void 0?t.failIfMajorPerformanceCaveat:!1,m;r!==null?m=r.getContextAttributes().alpha:m=t.alpha!==void 0?t.alpha:!1;let p=null,g=null,v=[],w=[];this.domElement=i,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=$s,this.physicallyCorrectLights=!1,this.toneMapping=Co,this.toneMappingExposure=1;let x=this,_=!1,k=0,A=0,C=null,M=-1,D=null,P=new ri,T=new ri,O=null,z=i.width,L=i.height,B=1,j=null,V=null,H=new ri(0,0,z,L),Y=new ri(0,0,z,L),se=!1,re=new EA,$=!1,te=!1,he=null,oe=new Ze,ee=new q,pe=new N,ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ve(){return C===null?B:1}let le=r;function Pe(ne,De){for(let Be=0;Be<ne.length;Be++){let Se=ne[Be],Ve=i.getContext(Se,De);if(Ve!==null)return Ve}return null}try{let ne={alpha:!0,depth:s,stencil:l,antialias:d,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:f};if("setAttribute"in i&&i.setAttribute("data-engine",`three.js r${uc}`),i.addEventListener("webglcontextlost",Ht,!1),i.addEventListener("webglcontextrestored",Bt,!1),i.addEventListener("webglcontextcreationerror",Ei,!1),le===null){let De=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&De.shift(),le=Pe(De,ne),le===null)throw Pe(De)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}le.getShaderPrecisionFormat===void 0&&(le.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ne){throw console.error("THREE.WebGLRenderer: "+ne.message),ne}let we,Ee,xe,Ue,Le,Ie,rt,nt,ot,mt,it,Ke,pt,Rt,ae,Q,Te,Qe,He,et,Ct,ct,Ge,ut;function Tt(){we=new Rj(le),Ee=new Mj(le,we,t),we.init(Ee),ct=new mU(le,we,Ee),xe=new fU(le,we,Ee),Ue=new Bj,Le=new eU,Ie=new pU(le,we,xe,Le,Ee,ct,Ue),rt=new Dj(x),nt=new Ij(x),ot=new qF(le,Ee),Ge=new Cj(le,we,ot,Ee),mt=new zj(le,ot,Ue,Ge),it=new Uj(le,mt,ot,Ue),He=new jj(le,Ee,Ie),Q=new Tj(Le),Ke=new J7(x,rt,nt,we,Ee,Ge,Q),pt=new bU(x,Le),Rt=new iU,ae=new lU(we,Ee),Qe=new Aj(x,rt,nt,xe,it,m,c),Te=new hU(x,it,Ee),ut=new wU(le,Ue,Ee,xe),et=new Ej(le,we,Ue,Ee),Ct=new Lj(le,we,Ue,Ee),Ue.programs=Ke.programs,x.capabilities=Ee,x.extensions=we,x.properties=Le,x.renderLists=Rt,x.shadowMap=Te,x.state=xe,x.info=Ue}Tt();let xt=new yU(x,le);this.xr=xt,this.getContext=function(){return le},this.getContextAttributes=function(){return le.getContextAttributes()},this.forceContextLoss=function(){let ne=we.get("WEBGL_lose_context");ne&&ne.loseContext()},this.forceContextRestore=function(){let ne=we.get("WEBGL_lose_context");ne&&ne.restoreContext()},this.getPixelRatio=function(){return B},this.setPixelRatio=function(ne){ne!==void 0&&(B=ne,this.setSize(z,L,!1))},this.getSize=function(ne){return ne.set(z,L)},this.setSize=function(ne,De,Be){if(xt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=ne,L=De,i.width=Math.floor(ne*B),i.height=Math.floor(De*B),Be!==!1&&(i.style.width=ne+"px",i.style.height=De+"px"),this.setViewport(0,0,ne,De)},this.getDrawingBufferSize=function(ne){return ne.set(z*B,L*B).floor()},this.setDrawingBufferSize=function(ne,De,Be){z=ne,L=De,B=Be,i.width=Math.floor(ne*Be),i.height=Math.floor(De*Be),this.setViewport(0,0,ne,De)},this.getCurrentViewport=function(ne){return ne.copy(P)},this.getViewport=function(ne){return ne.copy(H)},this.setViewport=function(ne,De,Be,Se){ne.isVector4?H.set(ne.x,ne.y,ne.z,ne.w):H.set(ne,De,Be,Se),xe.viewport(P.copy(H).multiplyScalar(B).floor())},this.getScissor=function(ne){return ne.copy(Y)},this.setScissor=function(ne,De,Be,Se){ne.isVector4?Y.set(ne.x,ne.y,ne.z,ne.w):Y.set(ne,De,Be,Se),xe.scissor(T.copy(Y).multiplyScalar(B).floor())},this.getScissorTest=function(){return se},this.setScissorTest=function(ne){xe.setScissorTest(se=ne)},this.setOpaqueSort=function(ne){j=ne},this.setTransparentSort=function(ne){V=ne},this.getClearColor=function(ne){return ne.copy(Qe.getClearColor())},this.setClearColor=function(){Qe.setClearColor.apply(Qe,arguments)},this.getClearAlpha=function(){return Qe.getClearAlpha()},this.setClearAlpha=function(){Qe.setClearAlpha.apply(Qe,arguments)},this.clear=function(ne=!0,De=!0,Be=!0){let Se=0;ne&&(Se|=16384),De&&(Se|=256),Be&&(Se|=1024),le.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){i.removeEventListener("webglcontextlost",Ht,!1),i.removeEventListener("webglcontextrestored",Bt,!1),i.removeEventListener("webglcontextcreationerror",Ei,!1),Rt.dispose(),ae.dispose(),Le.dispose(),rt.dispose(),nt.dispose(),it.dispose(),Ge.dispose(),ut.dispose(),Ke.dispose(),xt.dispose(),xt.removeEventListener("sessionstart",Fe),xt.removeEventListener("sessionend",$e),he&&(he.dispose(),he=null),at.stop()};function Ht(ne){ne.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Bt(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;let ne=Ue.autoReset,De=Te.enabled,Be=Te.autoUpdate,Se=Te.needsUpdate,Ve=Te.type;Tt(),Ue.autoReset=ne,Te.enabled=De,Te.autoUpdate=Be,Te.needsUpdate=Se,Te.type=Ve}function Ei(ne){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ne.statusMessage)}function Xi(ne){let De=ne.target;De.removeEventListener("dispose",Xi),Bn(De)}function Bn(ne){ye(ne),Le.remove(ne)}function ye(ne){let De=Le.get(ne).programs;De!==void 0&&(De.forEach(function(Be){Ke.releaseProgram(Be)}),ne.isShaderMaterial&&Ke.releaseShaderCache(ne))}this.renderBufferDirect=function(ne,De,Be,Se,Ve,zt){De===null&&(De=ce);let vi=Ve.isMesh&&Ve.matrixWorld.determinant()<0,Di=bn(ne,De,Be,Se,Ve);xe.setMaterial(Se,vi);let zi=Be.index,An=1;Se.wireframe===!0&&(zi=mt.getWireframeAttribute(Be),An=2);let Ki=Be.drawRange,Gi=Be.attributes.position,ba=Ki.start*An,Ls=(Ki.start+Ki.count)*An;zt!==null&&(ba=Math.max(ba,zt.start*An),Ls=Math.min(Ls,(zt.start+zt.count)*An)),zi!==null?(ba=Math.max(ba,0),Ls=Math.min(Ls,zi.count)):Gi!=null&&(ba=Math.max(ba,0),Ls=Math.min(Ls,Gi.count));let qd=Ls-ba;if(qd<0||qd===1/0)return;Ge.setup(Ve,Se,Di,Be,zi);let Dh,kr=et;if(zi!==null&&(Dh=ot.get(zi),kr=Ct,kr.setIndex(Dh)),Ve.isMesh)Se.wireframe===!0?(xe.setLineWidth(Se.wireframeLinewidth*ve()),kr.setMode(1)):kr.setMode(4);else if(Ve.isLine){let Wi=Se.linewidth;Wi===void 0&&(Wi=1),xe.setLineWidth(Wi*ve()),Ve.isLineSegments?kr.setMode(1):Ve.isLineLoop?kr.setMode(2):kr.setMode(3)}else Ve.isPoints?kr.setMode(0):Ve.isSprite&&kr.setMode(4);if(Ve.isInstancedMesh)kr.renderInstances(ba,qd,Ve.count);else if(Be.isInstancedBufferGeometry){let Wi=Be._maxInstanceCount!==void 0?Be._maxInstanceCount:1/0,zT=Math.min(Be.instanceCount,Wi);kr.renderInstances(ba,qd,zT)}else kr.render(ba,qd)},this.compile=function(ne,De){function Be(Se,Ve,zt){Se.transparent===!0&&Se.side===ta&&Se.forceSinglePass===!1?(Se.side=qn,Se.needsUpdate=!0,ai(Se,Ve,zt),Se.side=qs,Se.needsUpdate=!0,ai(Se,Ve,zt),Se.side=ta):ai(Se,Ve,zt)}g=ae.get(ne),g.init(),w.push(g),ne.traverseVisible(function(Se){Se.isLight&&Se.layers.test(De.layers)&&(g.pushLight(Se),Se.castShadow&&g.pushShadow(Se))}),g.setupLights(x.physicallyCorrectLights),ne.traverse(function(Se){let Ve=Se.material;if(Ve)if(Array.isArray(Ve))for(let zt=0;zt<Ve.length;zt++){let vi=Ve[zt];Be(vi,ne,Se)}else Be(Ve,ne,Se)}),w.pop(),g=null};let Ne=null;function Je(ne){Ne&&Ne(ne)}function Fe(){at.stop()}function $e(){at.start()}let at=new BD;at.setAnimationLoop(Je),typeof self<"u"&&at.setContext(self),this.setAnimationLoop=function(ne){Ne=ne,xt.setAnimationLoop(ne),ne===null?at.stop():at.start()},xt.addEventListener("sessionstart",Fe),xt.addEventListener("sessionend",$e),this.render=function(ne,De){if(De!==void 0&&De.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),De.parent===null&&De.matrixWorldAutoUpdate===!0&&De.updateMatrixWorld(),xt.enabled===!0&&xt.isPresenting===!0&&(xt.cameraAutoUpdate===!0&&xt.updateCamera(De),De=xt.getCamera()),ne.isScene===!0&&ne.onBeforeRender(x,ne,De,C),g=ae.get(ne,w.length),g.init(),w.push(g),oe.multiplyMatrices(De.projectionMatrix,De.matrixWorldInverse),re.setFromProjectionMatrix(oe),te=this.localClippingEnabled,$=Q.init(this.clippingPlanes,te),p=Rt.get(ne,v.length),p.init(),v.push(p),Dt(ne,De,0,x.sortObjects),p.finish(),x.sortObjects===!0&&p.sort(j,V),$===!0&&Q.beginShadows();let Be=g.state.shadowsArray;if(Te.render(Be,ne,De),$===!0&&Q.endShadows(),this.info.autoReset===!0&&this.info.reset(),Qe.render(p,ne),g.setupLights(x.physicallyCorrectLights),De.isArrayCamera){let Se=De.cameras;for(let Ve=0,zt=Se.length;Ve<zt;Ve++){let vi=Se[Ve];Wt(p,ne,vi,vi.viewport)}}else Wt(p,ne,De);C!==null&&(Ie.updateMultisampleRenderTarget(C),Ie.updateRenderTargetMipmap(C)),ne.isScene===!0&&ne.onAfterRender(x,ne,De),Ge.resetDefaultState(),M=-1,D=null,w.pop(),w.length>0?g=w[w.length-1]:g=null,v.pop(),v.length>0?p=v[v.length-1]:p=null};function Dt(ne,De,Be,Se){if(ne.visible===!1)return;if(ne.layers.test(De.layers)){if(ne.isGroup)Be=ne.renderOrder;else if(ne.isLOD)ne.autoUpdate===!0&&ne.update(De);else if(ne.isLight)g.pushLight(ne),ne.castShadow&&g.pushShadow(ne);else if(ne.isSprite){if(!ne.frustumCulled||re.intersectsSprite(ne)){Se&&pe.setFromMatrixPosition(ne.matrixWorld).applyMatrix4(oe);let zt=it.update(ne),vi=ne.material;vi.visible&&p.push(ne,zt,vi,Be,pe.z,null)}}else if((ne.isMesh||ne.isLine||ne.isPoints)&&(ne.isSkinnedMesh&&ne.skeleton.frame!==Ue.render.frame&&(ne.skeleton.update(),ne.skeleton.frame=Ue.render.frame),!ne.frustumCulled||re.intersectsObject(ne))){Se&&pe.setFromMatrixPosition(ne.matrixWorld).applyMatrix4(oe);let zt=it.update(ne),vi=ne.material;if(Array.isArray(vi)){let Di=zt.groups;for(let zi=0,An=Di.length;zi<An;zi++){let Ki=Di[zi],Gi=vi[Ki.materialIndex];Gi&&Gi.visible&&p.push(ne,zt,Gi,Be,pe.z,Ki)}}else vi.visible&&p.push(ne,zt,vi,Be,pe.z,null)}}let Ve=ne.children;for(let zt=0,vi=Ve.length;zt<vi;zt++)Dt(Ve[zt],De,Be,Se)}function Wt(ne,De,Be,Se){let Ve=ne.opaque,zt=ne.transmissive,vi=ne.transparent;g.setupLightsView(Be),$===!0&&Q.setGlobalState(x.clippingPlanes,Be),zt.length>0&&si(Ve,De,Be),Se&&xe.viewport(P.copy(Se)),Ve.length>0&&Pt(Ve,De,Be),zt.length>0&&Pt(zt,De,Be),vi.length>0&&Pt(vi,De,Be),xe.buffers.depth.setTest(!0),xe.buffers.depth.setMask(!0),xe.buffers.color.setMask(!0),xe.setPolygonOffset(!1)}function si(ne,De,Be){let Se=Ee.isWebGL2;he===null&&(he=new Oi(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")?yc:Nr,minFilter:vc,samples:Se&&d===!0?4:0})),x.getDrawingBufferSize(ee),Se?he.setSize(ee.x,ee.y):he.setSize(ue(ee.x),ue(ee.y));let Ve=x.getRenderTarget();x.setRenderTarget(he),x.clear();let zt=x.toneMapping;x.toneMapping=Co,Pt(ne,De,Be),x.toneMapping=zt,Ie.updateMultisampleRenderTarget(he),Ie.updateRenderTargetMipmap(he),x.setRenderTarget(Ve)}function Pt(ne,De,Be){let Se=De.isScene===!0?De.overrideMaterial:null;for(let Ve=0,zt=ne.length;Ve<zt;Ve++){let vi=ne[Ve],Di=vi.object,zi=vi.geometry,An=Se===null?vi.material:Se,Ki=vi.group;Di.layers.test(Be.layers)&&pi(Di,De,Be,zi,An,Ki)}}function pi(ne,De,Be,Se,Ve,zt){ne.onBeforeRender(x,De,Be,Se,Ve,zt),ne.modelViewMatrix.multiplyMatrices(Be.matrixWorldInverse,ne.matrixWorld),ne.normalMatrix.getNormalMatrix(ne.modelViewMatrix),Ve.onBeforeRender(x,De,Be,Se,ne,zt),Ve.transparent===!0&&Ve.side===ta&&Ve.forceSinglePass===!1?(Ve.side=qn,Ve.needsUpdate=!0,x.renderBufferDirect(Be,De,Se,Ve,ne,zt),Ve.side=qs,Ve.needsUpdate=!0,x.renderBufferDirect(Be,De,Se,Ve,ne,zt),Ve.side=ta):x.renderBufferDirect(Be,De,Se,Ve,ne,zt),ne.onAfterRender(x,De,Be,Se,Ve,zt)}function ai(ne,De,Be){De.isScene!==!0&&(De=ce);let Se=Le.get(ne),Ve=g.state.lights,zt=g.state.shadowsArray,vi=Ve.state.version,Di=Ke.getParameters(ne,Ve.state,zt,De,Be),zi=Ke.getProgramCacheKey(Di),An=Se.programs;Se.environment=ne.isMeshStandardMaterial?De.environment:null,Se.fog=De.fog,Se.envMap=(ne.isMeshStandardMaterial?nt:rt).get(ne.envMap||Se.environment),An===void 0&&(ne.addEventListener("dispose",Xi),An=new Map,Se.programs=An);let Ki=An.get(zi);if(Ki!==void 0){if(Se.currentProgram===Ki&&Se.lightsStateVersion===vi)return Ui(ne,Di),Ki}else Di.uniforms=Ke.getUniforms(ne),ne.onBuild(Be,Di,x),ne.onBeforeCompile(Di,x),Ki=Ke.acquireProgram(Di,zi),An.set(zi,Ki),Se.uniforms=Di.uniforms;let Gi=Se.uniforms;(!ne.isShaderMaterial&&!ne.isRawShaderMaterial||ne.clipping===!0)&&(Gi.clippingPlanes=Q.uniform),Ui(ne,Di),Se.needsLights=ya(ne),Se.lightsStateVersion=vi,Se.needsLights&&(Gi.ambientLightColor.value=Ve.state.ambient,Gi.lightProbe.value=Ve.state.probe,Gi.directionalLights.value=Ve.state.directional,Gi.directionalLightShadows.value=Ve.state.directionalShadow,Gi.spotLights.value=Ve.state.spot,Gi.spotLightShadows.value=Ve.state.spotShadow,Gi.rectAreaLights.value=Ve.state.rectArea,Gi.ltc_1.value=Ve.state.rectAreaLTC1,Gi.ltc_2.value=Ve.state.rectAreaLTC2,Gi.pointLights.value=Ve.state.point,Gi.pointLightShadows.value=Ve.state.pointShadow,Gi.hemisphereLights.value=Ve.state.hemi,Gi.directionalShadowMap.value=Ve.state.directionalShadowMap,Gi.directionalShadowMatrix.value=Ve.state.directionalShadowMatrix,Gi.spotShadowMap.value=Ve.state.spotShadowMap,Gi.spotLightMatrix.value=Ve.state.spotLightMatrix,Gi.spotLightMap.value=Ve.state.spotLightMap,Gi.pointShadowMap.value=Ve.state.pointShadowMap,Gi.pointShadowMatrix.value=Ve.state.pointShadowMatrix);let ba=Ki.getUniforms(),Ls=jw.seqWithValue(ba.seq,Gi);return Se.currentProgram=Ki,Se.uniformsList=Ls,Ki}function Ui(ne,De){let Be=Le.get(ne);Be.outputEncoding=De.outputEncoding,Be.instancing=De.instancing,Be.skinning=De.skinning,Be.morphTargets=De.morphTargets,Be.morphNormals=De.morphNormals,Be.morphColors=De.morphColors,Be.morphTargetsCount=De.morphTargetsCount,Be.numClippingPlanes=De.numClippingPlanes,Be.numIntersection=De.numClipIntersection,Be.vertexAlphas=De.vertexAlphas,Be.vertexTangents=De.vertexTangents,Be.toneMapping=De.toneMapping}function bn(ne,De,Be,Se,Ve){De.isScene!==!0&&(De=ce),Ie.resetTextureUnits();let zt=De.fog,vi=Se.isMeshStandardMaterial?De.environment:null,Di=C===null?x.outputEncoding:C.isXRRenderTarget===!0?C.texture.encoding:$s,zi=(Se.isMeshStandardMaterial?nt:rt).get(Se.envMap||vi),An=Se.vertexColors===!0&&!!Be.attributes.color&&Be.attributes.color.itemSize===4,Ki=!!Se.normalMap&&!!Be.attributes.tangent,Gi=!!Be.morphAttributes.position,ba=!!Be.morphAttributes.normal,Ls=!!Be.morphAttributes.color,qd=Se.toneMapped?x.toneMapping:Co,Dh=Be.morphAttributes.position||Be.morphAttributes.normal||Be.morphAttributes.color,kr=Dh!==void 0?Dh.length:0,Wi=Le.get(Se),zT=g.state.lights;if($===!0&&(te===!0||ne!==D)){let Bs=ne===D&&Se.id===M;Q.setState(Se,ne,Bs)}let LT=!1;Se.version===Wi.__version?(Wi.needsLights&&Wi.lightsStateVersion!==zT.state.version||Wi.outputEncoding!==Di||Ve.isInstancedMesh&&Wi.instancing===!1||!Ve.isInstancedMesh&&Wi.instancing===!0||Ve.isSkinnedMesh&&Wi.skinning===!1||!Ve.isSkinnedMesh&&Wi.skinning===!0||Wi.envMap!==zi||Se.fog===!0&&Wi.fog!==zt||Wi.numClippingPlanes!==void 0&&(Wi.numClippingPlanes!==Q.numPlanes||Wi.numIntersection!==Q.numIntersection)||Wi.vertexAlphas!==An||Wi.vertexTangents!==Ki||Wi.morphTargets!==Gi||Wi.morphNormals!==ba||Wi.morphColors!==Ls||Wi.toneMapping!==qd||Ee.isWebGL2===!0&&Wi.morphTargetsCount!==kr)&&(LT=!0):(LT=!0,Wi.__version=Se.version);let Ph=Wi.currentProgram;LT===!0&&(Ph=ai(Se,De,Ve));let kF=!1,K0=!1,BT=!1,sa=Ph.getUniforms(),Oh=Wi.uniforms;if(xe.useProgram(Ph.program)&&(kF=!0,K0=!0,BT=!0),Se.id!==M&&(M=Se.id,K0=!0),kF||D!==ne){if(sa.setValue(le,"projectionMatrix",ne.projectionMatrix),Ee.logarithmicDepthBuffer&&sa.setValue(le,"logDepthBufFC",2/(Math.log(ne.far+1)/Math.LN2)),D!==ne&&(D=ne,K0=!0,BT=!0),Se.isShaderMaterial||Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshStandardMaterial||Se.envMap){let Bs=sa.map.cameraPosition;Bs!==void 0&&Bs.setValue(le,pe.setFromMatrixPosition(ne.matrixWorld))}(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&sa.setValue(le,"isOrthographic",ne.isOrthographicCamera===!0),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial||Se.isShadowMaterial||Ve.isSkinnedMesh)&&sa.setValue(le,"viewMatrix",ne.matrixWorldInverse)}if(Ve.isSkinnedMesh){sa.setOptional(le,Ve,"bindMatrix"),sa.setOptional(le,Ve,"bindMatrixInverse");let Bs=Ve.skeleton;Bs&&(Ee.floatVertexTextures?(Bs.boneTexture===null&&Bs.computeBoneTexture(),sa.setValue(le,"boneTexture",Bs.boneTexture,Ie),sa.setValue(le,"boneTextureSize",Bs.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}let FT=Be.morphAttributes;if((FT.position!==void 0||FT.normal!==void 0||FT.color!==void 0&&Ee.isWebGL2===!0)&&He.update(Ve,Be,Se,Ph),(K0||Wi.receiveShadow!==Ve.receiveShadow)&&(Wi.receiveShadow=Ve.receiveShadow,sa.setValue(le,"receiveShadow",Ve.receiveShadow)),Se.isMeshGouraudMaterial&&Se.envMap!==null&&(Oh.envMap.value=zi,Oh.flipEnvMap.value=zi.isCubeTexture&&zi.isRenderTargetTexture===!1?-1:1),K0&&(sa.setValue(le,"toneMappingExposure",x.toneMappingExposure),Wi.needsLights&&cr(Oh,BT),zt&&Se.fog===!0&&pt.refreshFogUniforms(Oh,zt),pt.refreshMaterialUniforms(Oh,Se,B,L,he),jw.upload(le,Wi.uniformsList,Oh,Ie)),Se.isShaderMaterial&&Se.uniformsNeedUpdate===!0&&(jw.upload(le,Wi.uniformsList,Oh,Ie),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&sa.setValue(le,"center",Ve.center),sa.setValue(le,"modelViewMatrix",Ve.modelViewMatrix),sa.setValue(le,"normalMatrix",Ve.normalMatrix),sa.setValue(le,"modelMatrix",Ve.matrixWorld),Ve.previousModelViewMatrix&&sa.setValue(le,"previousModelViewMatrix",Ve.previousModelViewMatrix),ne.previousProjectionMatrix&&sa.setValue(le,"previousProjectionMatrix",ne.previousProjectionMatrix),Se.isShaderMaterial||Se.isRawShaderMaterial){let Bs=Se.uniformsGroups;for(let NT=0,Nhe=Bs.length;NT<Nhe;NT++)if(Ee.isWebGL2){let SF=Bs[NT];ut.update(SF,Ph),ut.bind(SF,Ph)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ph}function cr(ne,De){ne.ambientLightColor.needsUpdate=De,ne.lightProbe.needsUpdate=De,ne.directionalLights.needsUpdate=De,ne.directionalLightShadows.needsUpdate=De,ne.pointLights.needsUpdate=De,ne.pointLightShadows.needsUpdate=De,ne.spotLights.needsUpdate=De,ne.spotLightShadows.needsUpdate=De,ne.rectAreaLights.needsUpdate=De,ne.hemisphereLights.needsUpdate=De}function ya(ne){return ne.isMeshLambertMaterial||ne.isMeshToonMaterial||ne.isMeshPhongMaterial||ne.isMeshStandardMaterial||ne.isShadowMaterial||ne.isShaderMaterial&&ne.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return C},this.setRenderTargetTextures=function(ne,De,Be){Le.get(ne.texture).__webglTexture=De,Le.get(ne.depthTexture).__webglTexture=Be;let Se=Le.get(ne);Se.__hasExternalTextures=!0,Se.__hasExternalTextures&&(Se.__autoAllocateDepthBuffer=Be===void 0,Se.__autoAllocateDepthBuffer||we.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Se.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ne,De){let Be=Le.get(ne);Be.__webglFramebuffer=De,Be.__useDefaultFramebuffer=De===void 0},this.setRenderTarget=function(ne,De=0,Be=0){C=ne,k=De,A=Be;let Se=!0,Ve=null,zt=!1,vi=!1;if(ne){let Di=Le.get(ne);Di.__useDefaultFramebuffer!==void 0?(xe.bindFramebuffer(36160,null),Se=!1):Di.__webglFramebuffer===void 0?Ie.setupRenderTarget(ne):Di.__hasExternalTextures&&Ie.rebindTextures(ne,Le.get(ne.texture).__webglTexture,Le.get(ne.depthTexture).__webglTexture);let zi=ne.texture;(zi.isData3DTexture||zi.isDataArrayTexture||zi.isCompressedArrayTexture)&&(vi=!0);let An=Le.get(ne).__webglFramebuffer;ne.isWebGLCubeRenderTarget?(Ve=An[De],zt=!0):Ee.isWebGL2&&ne.samples>0&&Ie.useMultisampledRTT(ne)===!1?Ve=Le.get(ne).__webglMultisampledFramebuffer:Ve=An,P.copy(ne.viewport),T.copy(ne.scissor),O=ne.scissorTest}else P.copy(H).multiplyScalar(B).floor(),T.copy(Y).multiplyScalar(B).floor(),O=se;if(xe.bindFramebuffer(36160,Ve)&&Ee.drawBuffers&&Se&&xe.drawBuffers(ne,Ve),xe.viewport(P),xe.scissor(T),xe.setScissorTest(O),zt){let Di=Le.get(ne.texture);le.framebufferTexture2D(36160,36064,34069+De,Di.__webglTexture,Be)}else if(vi){let Di=Le.get(ne.texture),zi=De||0;le.framebufferTextureLayer(36160,36064,Di.__webglTexture,Be||0,zi)}M=-1},this.readRenderTargetPixels=function(ne,De,Be,Se,Ve,zt,vi){if(!(ne&&ne.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Di=Le.get(ne).__webglFramebuffer;if(ne.isWebGLCubeRenderTarget&&vi!==void 0&&(Di=Di[vi]),Di){xe.bindFramebuffer(36160,Di);try{let zi=ne.texture,An=zi.format,Ki=zi.type;if(An!==Pa&&ct.convert(An)!==le.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let Gi=Ki===yc&&(we.has("EXT_color_buffer_half_float")||Ee.isWebGL2&&we.has("EXT_color_buffer_float"));if(Ki!==Nr&&ct.convert(Ki)!==le.getParameter(35738)&&!(Ki===ia&&(Ee.isWebGL2||we.has("OES_texture_float")||we.has("WEBGL_color_buffer_float")))&&!Gi){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}De>=0&&De<=ne.width-Se&&Be>=0&&Be<=ne.height-Ve&&le.readPixels(De,Be,Se,Ve,ct.convert(An),ct.convert(Ki),zt)}finally{let zi=C!==null?Le.get(C).__webglFramebuffer:null;xe.bindFramebuffer(36160,zi)}}},this.copyFramebufferToTexture=function(ne,De,Be=0){let Se=Math.pow(2,-Be),Ve=Math.floor(De.image.width*Se),zt=Math.floor(De.image.height*Se);Ie.setTexture2D(De,0),le.copyTexSubImage2D(3553,Be,0,0,ne.x,ne.y,Ve,zt),xe.unbindTexture()},this.copyTextureToTexture=function(ne,De,Be,Se=0){let Ve=De.image.width,zt=De.image.height,vi=ct.convert(Be.format),Di=ct.convert(Be.type);Ie.setTexture2D(Be,0),le.pixelStorei(37440,Be.flipY),le.pixelStorei(37441,Be.premultiplyAlpha),le.pixelStorei(3317,Be.unpackAlignment),De.isDataTexture?le.texSubImage2D(3553,Se,ne.x,ne.y,Ve,zt,vi,Di,De.image.data):De.isCompressedTexture?le.compressedTexSubImage2D(3553,Se,ne.x,ne.y,De.mipmaps[0].width,De.mipmaps[0].height,vi,De.mipmaps[0].data):le.texSubImage2D(3553,Se,ne.x,ne.y,vi,Di,De.image),Se===0&&Be.generateMipmaps&&le.generateMipmap(3553),xe.unbindTexture()},this.copyTextureToTexture3D=function(ne,De,Be,Se,Ve=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let zt=ne.max.x-ne.min.x+1,vi=ne.max.y-ne.min.y+1,Di=ne.max.z-ne.min.z+1,zi=ct.convert(Se.format),An=ct.convert(Se.type),Ki;if(Se.isData3DTexture)Ie.setTexture3D(Se,0),Ki=32879;else if(Se.isDataArrayTexture)Ie.setTexture2DArray(Se,0),Ki=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}le.pixelStorei(37440,Se.flipY),le.pixelStorei(37441,Se.premultiplyAlpha),le.pixelStorei(3317,Se.unpackAlignment);let Gi=le.getParameter(3314),ba=le.getParameter(32878),Ls=le.getParameter(3316),qd=le.getParameter(3315),Dh=le.getParameter(32877),kr=Be.isCompressedTexture?Be.mipmaps[0]:Be.image;le.pixelStorei(3314,kr.width),le.pixelStorei(32878,kr.height),le.pixelStorei(3316,ne.min.x),le.pixelStorei(3315,ne.min.y),le.pixelStorei(32877,ne.min.z),Be.isDataTexture||Be.isData3DTexture?le.texSubImage3D(Ki,Ve,De.x,De.y,De.z,zt,vi,Di,zi,An,kr.data):Be.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),le.compressedTexSubImage3D(Ki,Ve,De.x,De.y,De.z,zt,vi,Di,zi,kr.data)):le.texSubImage3D(Ki,Ve,De.x,De.y,De.z,zt,vi,Di,zi,An,kr),le.pixelStorei(3314,Gi),le.pixelStorei(32878,ba),le.pixelStorei(3316,Ls),le.pixelStorei(3315,qd),le.pixelStorei(32877,Dh),Ve===0&&Se.generateMipmaps&&le.generateMipmap(Ki),xe.unbindTexture()},this.initTexture=function(ne){ne.isCubeTexture?Ie.setTextureCube(ne,0):ne.isData3DTexture?Ie.setTexture3D(ne,0):ne.isDataArrayTexture||ne.isCompressedArrayTexture?Ie.setTexture2DArray(ne,0):Ie.setTexture2D(ne,0),xe.unbindTexture()},this.resetState=function(){k=0,A=0,C=null,xe.reset(),Ge.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var _U=class extends uP{};_U.prototype.isWebGL1Renderer=!0;var hP=class{constructor(t,i=1,r=1e3){this.isFog=!0,this.name="",this.color=new _t(t),this.near=i,this.far=r}clone(){return new hP(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},Ac=class extends ln{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let i=super.toJSON(t);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(t){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=t}},kU=class{constructor(t,i){this.isInterleavedBuffer=!0,this.array=t,this.stride=i,this.count=t!==void 0?t.length/i:0,this.usage=gv,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=gr()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,i,r){t*=this.stride,r*=i.stride;for(let s=0,l=this.stride;s<l;s++)this.array[t+s]=i.array[r+s];return this}set(t,i=0){return this.array.set(t,i),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);let i=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(i,this.stride);return r.setUsage(this.usage),r}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=gr()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}},Ba=new N,zA=class{constructor(t,i,r,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=i,this.offset=r,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let i=0,r=this.data.count;i<r;i++)Ba.fromBufferAttribute(this,i),Ba.applyMatrix4(t),this.setXYZ(i,Ba.x,Ba.y,Ba.z);return this}applyNormalMatrix(t){for(let i=0,r=this.count;i<r;i++)Ba.fromBufferAttribute(this,i),Ba.applyNormalMatrix(t),this.setXYZ(i,Ba.x,Ba.y,Ba.z);return this}transformDirection(t){for(let i=0,r=this.count;i<r;i++)Ba.fromBufferAttribute(this,i),Ba.transformDirection(t),this.setXYZ(i,Ba.x,Ba.y,Ba.z);return this}setX(t,i){return this.normalized&&(i=ke(i,this.array)),this.data.array[t*this.data.stride+this.offset]=i,this}setY(t,i){return this.normalized&&(i=ke(i,this.array)),this.data.array[t*this.data.stride+this.offset+1]=i,this}setZ(t,i){return this.normalized&&(i=ke(i,this.array)),this.data.array[t*this.data.stride+this.offset+2]=i,this}setW(t,i){return this.normalized&&(i=ke(i,this.array)),this.data.array[t*this.data.stride+this.offset+3]=i,this}getX(t){let i=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(i=_e(i,this.array)),i}getY(t){let i=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(i=_e(i,this.array)),i}getZ(t){let i=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(i=_e(i,this.array)),i}getW(t){let i=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(i=_e(i,this.array)),i}setXY(t,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(i=ke(i,this.array),r=ke(r,this.array)),this.data.array[t+0]=i,this.data.array[t+1]=r,this}setXYZ(t,i,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(i=ke(i,this.array),r=ke(r,this.array),s=ke(s,this.array)),this.data.array[t+0]=i,this.data.array[t+1]=r,this.data.array[t+2]=s,this}setXYZW(t,i,r,s,l){return t=t*this.data.stride+this.offset,this.normalized&&(i=ke(i,this.array),r=ke(r,this.array),s=ke(s,this.array),l=ke(l,this.array)),this.data.array[t+0]=i,this.data.array[t+1]=r,this.data.array[t+2]=s,this.data.array[t+3]=l,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");let i=[];for(let r=0;r<this.count;r++){let s=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)i.push(this.data.array[s+l])}return new Qt(new this.array.constructor(i),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new zA(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");let i=[];for(let r=0;r<this.count;r++){let s=r*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)i.push(this.data.array[s+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}},fP=class extends ln{constructor(){super(),this.isBone=!0,this.type="Bone"}},Cc=class extends zn{constructor(t=null,i=1,r=1,s,l,d,c,u,h=on,f=on,m,p){super(null,d,c,u,h,f,s,l,m,p),this.isDataTexture=!0,this.image={data:t,width:i,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},pP=new Ze,SU=new Ze,LA=class{constructor(t=[],i=[]){this.uuid=gr(),this.bones=t.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){let t=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),i.length===0)this.calculateInverses();else if(t.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,s=this.bones.length;r<s;r++)this.boneInverses.push(new Ze)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,i=this.bones.length;t<i;t++){let r=new Ze;this.bones[t]&&r.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];r&&r.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,i=this.bones.length;t<i;t++){let r=this.bones[t];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){let t=this.bones,i=this.boneInverses,r=this.boneMatrices,s=this.boneTexture;for(let l=0,d=t.length;l<d;l++){let c=t[l]?t[l].matrixWorld:SU;pP.multiplyMatrices(c,i[l]),pP.toArray(r,l*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new LA(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=ie(t),t=Math.max(t,4);let i=new Float32Array(t*t*4);i.set(this.boneMatrices);let r=new Cc(i,t,t,Pa,ia);return r.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=r,this.boneTextureSize=t,this}getBoneByName(t){for(let i=0,r=this.bones.length;i<r;i++){let s=this.bones[i];if(s.name===t)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,i){this.uuid=t.uuid;for(let r=0,s=t.bones.length;r<s;r++){let l=t.bones[r],d=i[l];d===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",l),d=new fP),this.bones.push(d),this.boneInverses.push(new Ze().fromArray(t.boneInverses[r]))}return this.init(),this}toJSON(){let t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;let i=this.bones,r=this.boneInverses;for(let s=0,l=i.length;s<l;s++){let d=i[s];t.bones.push(d.uuid);let c=r[s];t.boneInverses.push(c.toArray())}return t}},mP=class extends Qt{constructor(t,i,r,s=1){super(t,i,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){let t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}},Ec=class extends xv{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _t(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},gP=new N,vP=new N,yP=new Ze,BA=new Rf,Uw=new Ur,Vw=class extends ln{constructor(t=new Nt,i=new Ec){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let i=t.attributes.position,r=[0];for(let s=1,l=i.count;s<l;s++)gP.fromBufferAttribute(i,s-1),vP.fromBufferAttribute(i,s),r[s]=r[s-1],r[s]+=gP.distanceTo(vP);t.setAttribute("lineDistance",new wt(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,i){let r=this.geometry,s=this.matrixWorld,l=t.params.Line.threshold,d=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Uw.copy(r.boundingSphere),Uw.applyMatrix4(s),Uw.radius+=l,t.ray.intersectsSphere(Uw)===!1)return;yP.copy(s).invert(),BA.copy(t.ray).applyMatrix4(yP);let c=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,h=new N,f=new N,m=new N,p=new N,g=this.isLineSegments?2:1,v=r.index,w=r.attributes.position;if(v!==null){let x=Math.max(0,d.start),_=Math.min(v.count,d.start+d.count);for(let k=x,A=_-1;k<A;k+=g){let C=v.getX(k),M=v.getX(k+1);if(h.fromBufferAttribute(w,C),f.fromBufferAttribute(w,M),BA.distanceSqToSegment(h,f,p,m)>u)continue;p.applyMatrix4(this.matrixWorld);let D=t.ray.origin.distanceTo(p);D<t.near||D>t.far||i.push({distance:D,point:m.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this})}}else{let x=Math.max(0,d.start),_=Math.min(w.count,d.start+d.count);for(let k=x,A=_-1;k<A;k+=g){if(h.fromBufferAttribute(w,k),f.fromBufferAttribute(w,k+1),BA.distanceSqToSegment(h,f,p,m)>u)continue;p.applyMatrix4(this.matrixWorld);let C=t.ray.origin.distanceTo(p);C<t.near||C>t.far||i.push({distance:C,point:m.clone().applyMatrix4(this.matrixWorld),index:k,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){let r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,l=r.length;s<l;s++){let d=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=s}}}}},bP=new N,wP=new N,Mv=class extends Vw{constructor(t,i){super(t,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let i=t.attributes.position,r=[];for(let s=0,l=i.count;s<l;s+=2)bP.fromBufferAttribute(i,s),wP.fromBufferAttribute(i,s+1),r[s]=s===0?0:r[s-1],r[s+1]=r[s]+bP.distanceTo(wP);t.setAttribute("lineDistance",new wt(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}},AU=class extends zn{constructor(t,i,r,s,l,d,c,u,h){super(t,i,r,s,l,d,c,u,h),this.isVideoTexture=!0,this.minFilter=d!==void 0?d:yi,this.magFilter=l!==void 0?l:yi,this.generateMipmaps=!1;let f=this;function m(){f.needsUpdate=!0,t.requestVideoFrameCallback(m)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(m)}clone(){return new this.constructor(this.image).copy(this)}update(){let t=this.image;!("requestVideoFrameCallback"in t)&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},xl=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,i){let r=this.getUtoTmapping(t);return this.getPoint(r,i)}getPoints(t=5){let i=[];for(let r=0;r<=t;r++)i.push(this.getPoint(r/t));return i}getSpacedPoints(t=5){let i=[];for(let r=0;r<=t;r++)i.push(this.getPointAt(r/t));return i}getLength(){let t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let i=[],r,s=this.getPoint(0),l=0;i.push(0);for(let d=1;d<=t;d++)r=this.getPoint(d/t),l+=r.distanceTo(s),i.push(l),s=r;return this.cacheArcLengths=i,i}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,i){let r=this.getLengths(),s=0,l=r.length,d;i?d=i:d=t*r[l-1];let c=0,u=l-1,h;for(;c<=u;)if(s=Math.floor(c+(u-c)/2),h=r[s]-d,h<0)c=s+1;else if(h>0)u=s-1;else{u=s;break}if(s=u,r[s]===d)return s/(l-1);let f=r[s],m=r[s+1]-f,p=(d-f)/m;return(s+p)/(l-1)}getTangent(t,i){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);let l=this.getPoint(r),d=this.getPoint(s),c=i||(l.isVector2?new q:new N);return c.copy(d).sub(l).normalize(),c}getTangentAt(t,i){let r=this.getUtoTmapping(t);return this.getTangent(r,i)}computeFrenetFrames(t,i){let r=new N,s=[],l=[],d=[],c=new N,u=new Ze;for(let g=0;g<=t;g++){let v=g/t;s[g]=this.getTangentAt(v,new N)}l[0]=new N,d[0]=new N;let h=Number.MAX_VALUE,f=Math.abs(s[0].x),m=Math.abs(s[0].y),p=Math.abs(s[0].z);f<=h&&(h=f,r.set(1,0,0)),m<=h&&(h=m,r.set(0,1,0)),p<=h&&r.set(0,0,1),c.crossVectors(s[0],r).normalize(),l[0].crossVectors(s[0],c),d[0].crossVectors(s[0],l[0]);for(let g=1;g<=t;g++){if(l[g]=l[g-1].clone(),d[g]=d[g-1].clone(),c.crossVectors(s[g-1],s[g]),c.length()>Number.EPSILON){c.normalize();let v=Math.acos(Zn(s[g-1].dot(s[g]),-1,1));l[g].applyMatrix4(u.makeRotationAxis(c,v))}d[g].crossVectors(s[g],l[g])}if(i===!0){let g=Math.acos(Zn(l[0].dot(l[t]),-1,1));g/=t,s[0].dot(c.crossVectors(l[0],l[t]))>0&&(g=-g);for(let v=1;v<=t;v++)l[v].applyMatrix4(u.makeRotationAxis(s[v],g*v)),d[v].crossVectors(s[v],l[v])}return{tangents:s,normals:l,binormals:d}}clone(){return new this.constructor().copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){let t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},Hw=class extends xl{constructor(t=0,i=0,r=1,s=1,l=0,d=Math.PI*2,c=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=i,this.xRadius=r,this.yRadius=s,this.aStartAngle=l,this.aEndAngle=d,this.aClockwise=c,this.aRotation=u}getPoint(t,i){let r=i||new q,s=Math.PI*2,l=this.aEndAngle-this.aStartAngle,d=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=s;for(;l>s;)l-=s;l<Number.EPSILON&&(d?l=0:l=s),this.aClockwise===!0&&!d&&(l===s?l=-s:l=l-s);let c=this.aStartAngle+t*l,u=this.aX+this.xRadius*Math.cos(c),h=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){let f=Math.cos(this.aRotation),m=Math.sin(this.aRotation),p=u-this.aX,g=h-this.aY;u=p*f-g*m+this.aX,h=p*m+g*f+this.aY}return r.set(u,h)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){let t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},CU=class extends Hw{constructor(t,i,r,s,l,d){super(t,i,r,r,s,l,d),this.isArcCurve=!0,this.type="ArcCurve"}};function FA(){let t=0,i=0,r=0,s=0;function l(d,c,u,h){t=d,i=u,r=-3*d+3*c-2*u-h,s=2*d-2*c+u+h}return{initCatmullRom:function(d,c,u,h,f){l(c,u,f*(u-d),f*(h-c))},initNonuniformCatmullRom:function(d,c,u,h,f,m,p){let g=(c-d)/f-(u-d)/(f+m)+(u-c)/m,v=(u-c)/m-(h-c)/(m+p)+(h-u)/p;g*=m,v*=m,l(c,u,g,v)},calc:function(d){let c=d*d,u=c*d;return t+i*d+r*c+s*u}}}var Gw=new N,NA=new FA,jA=new FA,UA=new FA,EU=class extends xl{constructor(t=[],i=!1,r="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=i,this.curveType=r,this.tension=s}getPoint(t,i=new N){let r=i,s=this.points,l=s.length,d=(l-(this.closed?0:1))*t,c=Math.floor(d),u=d-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/l)+1)*l:u===0&&c===l-1&&(c=l-2,u=1);let h,f;this.closed||c>0?h=s[(c-1)%l]:(Gw.subVectors(s[0],s[1]).add(s[0]),h=Gw);let m=s[c%l],p=s[(c+1)%l];if(this.closed||c+2<l?f=s[(c+2)%l]:(Gw.subVectors(s[l-1],s[l-2]).add(s[l-1]),f=Gw),this.curveType==="centripetal"||this.curveType==="chordal"){let g=this.curveType==="chordal"?.5:.25,v=Math.pow(h.distanceToSquared(m),g),w=Math.pow(m.distanceToSquared(p),g),x=Math.pow(p.distanceToSquared(f),g);w<1e-4&&(w=1),v<1e-4&&(v=w),x<1e-4&&(x=w),NA.initNonuniformCatmullRom(h.x,m.x,p.x,f.x,v,w,x),jA.initNonuniformCatmullRom(h.y,m.y,p.y,f.y,v,w,x),UA.initNonuniformCatmullRom(h.z,m.z,p.z,f.z,v,w,x)}else this.curveType==="catmullrom"&&(NA.initCatmullRom(h.x,m.x,p.x,f.x,this.tension),jA.initCatmullRom(h.y,m.y,p.y,f.y,this.tension),UA.initCatmullRom(h.z,m.z,p.z,f.z,this.tension));return r.set(NA.calc(u),jA.calc(u),UA.calc(u)),r}copy(t){super.copy(t),this.points=[];for(let i=0,r=t.points.length;i<r;i++){let s=t.points[i];this.points.push(s.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){let t=super.toJSON();t.points=[];for(let i=0,r=this.points.length;i<r;i++){let s=this.points[i];t.points.push(s.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let i=0,r=t.points.length;i<r;i++){let s=t.points[i];this.points.push(new N().fromArray(s))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}};function xP(t,i,r,s,l){let d=(s-i)*.5,c=(l-r)*.5,u=t*t,h=t*u;return(2*r-2*s+d+c)*h+(-3*r+3*s-2*d-c)*u+d*t+r}function MU(t,i){let r=1-t;return r*r*i}function TU(t,i){return 2*(1-t)*t*i}function DU(t,i){return t*t*i}function Tv(t,i,r,s){return MU(t,i)+TU(t,r)+DU(t,s)}function PU(t,i){let r=1-t;return r*r*r*i}function OU(t,i){let r=1-t;return 3*r*r*t*i}function IU(t,i){return 3*(1-t)*t*t*i}function RU(t,i){return t*t*t*i}function Dv(t,i,r,s,l){return PU(t,i)+OU(t,r)+IU(t,s)+RU(t,l)}var Io=class extends xl{constructor(t=new q,i=new q,r=new q,s=new q){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=i,this.v2=r,this.v3=s}getPoint(t,i=new q){let r=i,s=this.v0,l=this.v1,d=this.v2,c=this.v3;return r.set(Dv(t,s.x,l.x,d.x,c.x),Dv(t,s.y,l.y,d.y,c.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},Ww=class extends xl{constructor(t=new N,i=new N,r=new N,s=new N){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=i,this.v2=r,this.v3=s}getPoint(t,i=new N){let r=i,s=this.v0,l=this.v1,d=this.v2,c=this.v3;return r.set(Dv(t,s.x,l.x,d.x,c.x),Dv(t,s.y,l.y,d.y,c.y),Dv(t,s.z,l.z,d.z,c.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},Ro=class extends xl{constructor(t=new q,i=new q){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=i}getPoint(t,i=new q){let r=i;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,i){return this.getPoint(t,i)}getTangent(t,i){let r=i||new q;return r.copy(this.v2).sub(this.v1).normalize(),r}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},_P=class extends xl{constructor(t=new N,i=new N){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=i}getPoint(t,i=new N){let r=i;return t===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(t).add(this.v1)),r}getPointAt(t,i){return this.getPoint(t,i)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},Mc=class extends xl{constructor(t=new q,i=new q,r=new q){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=i,this.v2=r}getPoint(t,i=new q){let r=i,s=this.v0,l=this.v1,d=this.v2;return r.set(Tv(t,s.x,l.x,d.x),Tv(t,s.y,l.y,d.y)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},zU=class extends xl{constructor(t=new N,i=new N,r=new N){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=i,this.v2=r}getPoint(t,i=new N){let r=i,s=this.v0,l=this.v1,d=this.v2;return r.set(Tv(t,s.x,l.x,d.x),Tv(t,s.y,l.y,d.y),Tv(t,s.z,l.z,d.z)),r}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){let t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},VA=class extends xl{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,i=new q){let r=i,s=this.points,l=(s.length-1)*t,d=Math.floor(l),c=l-d,u=s[d===0?d:d-1],h=s[d],f=s[d>s.length-2?s.length-1:d+1],m=s[d>s.length-3?s.length-1:d+2];return r.set(xP(c,u.x,h.x,f.x,m.x),xP(c,u.y,h.y,f.y,m.y)),r}copy(t){super.copy(t),this.points=[];for(let i=0,r=t.points.length;i<r;i++){let s=t.points[i];this.points.push(s.clone())}return this}toJSON(){let t=super.toJSON();t.points=[];for(let i=0,r=this.points.length;i<r;i++){let s=this.points[i];t.points.push(s.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let i=0,r=t.points.length;i<r;i++){let s=t.points[i];this.points.push(new q().fromArray(s))}return this}},LU=Object.freeze({__proto__:null,ArcCurve:CU,CatmullRomCurve3:EU,CubicBezierCurve:Io,CubicBezierCurve3:Ww,EllipseCurve:Hw,LineCurve:Ro,LineCurve3:_P,QuadraticBezierCurve:Mc,QuadraticBezierCurve3:zU,SplineCurve:VA}),kP=class extends xl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){let t=this.curves[0].getPoint(0),i=this.curves[this.curves.length-1].getPoint(1);t.equals(i)||this.curves.push(new Ro(i,t))}getPoint(t,i){let r=t*this.getLength(),s=this.getCurveLengths(),l=0;for(;l<s.length;){if(s[l]>=r){let d=s[l]-r,c=this.curves[l],u=c.getLength(),h=u===0?0:1-d/u;return c.getPointAt(h,i)}l++}return null}getLength(){let t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;let t=[],i=0;for(let r=0,s=this.curves.length;r<s;r++)i+=this.curves[r].getLength(),t.push(i);return this.cacheLengths=t,t}getSpacedPoints(t=40){let i=[];for(let r=0;r<=t;r++)i.push(this.getPoint(r/t));return this.autoClose&&i.push(i[0]),i}getPoints(t=12){let i=[],r;for(let s=0,l=this.curves;s<l.length;s++){let d=l[s],c=d.isEllipseCurve?t*2:d.isLineCurve||d.isLineCurve3?1:d.isSplineCurve?t*d.points.length:t,u=d.getPoints(c);for(let h=0;h<u.length;h++){let f=u[h];r&&r.equals(f)||(i.push(f),r=f)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}copy(t){super.copy(t),this.curves=[];for(let i=0,r=t.curves.length;i<r;i++){let s=t.curves[i];this.curves.push(s.clone())}return this.autoClose=t.autoClose,this}toJSON(){let t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let i=0,r=this.curves.length;i<r;i++){let s=this.curves[i];t.curves.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let i=0,r=t.curves.length;i<r;i++){let s=t.curves[i];this.curves.push(new LU[s.type]().fromJSON(s))}return this}},qw=class extends kP{constructor(t){super(),this.type="Path",this.currentPoint=new q,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let i=1,r=t.length;i<r;i++)this.lineTo(t[i].x,t[i].y);return this}moveTo(t,i){return this.currentPoint.set(t,i),this}lineTo(t,i){let r=new Ro(this.currentPoint.clone(),new q(t,i));return this.curves.push(r),this.currentPoint.set(t,i),this}quadraticCurveTo(t,i,r,s){let l=new Mc(this.currentPoint.clone(),new q(t,i),new q(r,s));return this.curves.push(l),this.currentPoint.set(r,s),this}bezierCurveTo(t,i,r,s,l,d){let c=new Io(this.currentPoint.clone(),new q(t,i),new q(r,s),new q(l,d));return this.curves.push(c),this.currentPoint.set(l,d),this}splineThru(t){let i=[this.currentPoint.clone()].concat(t),r=new VA(i);return this.curves.push(r),this.currentPoint.copy(t[t.length-1]),this}arc(t,i,r,s,l,d){let c=this.currentPoint.x,u=this.currentPoint.y;return this.absarc(t+c,i+u,r,s,l,d),this}absarc(t,i,r,s,l,d){return this.absellipse(t,i,r,r,s,l,d),this}ellipse(t,i,r,s,l,d,c,u){let h=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(t+h,i+f,r,s,l,d,c,u),this}absellipse(t,i,r,s,l,d,c,u){let h=new Hw(t,i,r,s,l,d,c,u);if(this.curves.length>0){let m=h.getPoint(0);m.equals(this.currentPoint)||this.lineTo(m.x,m.y)}this.curves.push(h);let f=h.getPoint(1);return this.currentPoint.copy(f),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){let t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}},SP=class extends Nt{constructor(t=[new q(0,-.5),new q(.5,0),new q(0,.5)],i=12,r=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:t,segments:i,phiStart:r,phiLength:s},i=Math.floor(i),s=Zn(s,0,Math.PI*2);let l=[],d=[],c=[],u=[],h=[],f=1/i,m=new N,p=new q,g=new N,v=new N,w=new N,x=0,_=0;for(let k=0;k<=t.length-1;k++)switch(k){case 0:x=t[k+1].x-t[k].x,_=t[k+1].y-t[k].y,g.x=_*1,g.y=-x,g.z=_*0,w.copy(g),g.normalize(),u.push(g.x,g.y,g.z);break;case t.length-1:u.push(w.x,w.y,w.z);break;default:x=t[k+1].x-t[k].x,_=t[k+1].y-t[k].y,g.x=_*1,g.y=-x,g.z=_*0,v.copy(g),g.x+=w.x,g.y+=w.y,g.z+=w.z,g.normalize(),u.push(g.x,g.y,g.z),w.copy(v)}for(let k=0;k<=i;k++){let A=r+k*f*s,C=Math.sin(A),M=Math.cos(A);for(let D=0;D<=t.length-1;D++){m.x=t[D].x*C,m.y=t[D].y,m.z=t[D].x*M,d.push(m.x,m.y,m.z),p.x=k/i,p.y=D/(t.length-1),c.push(p.x,p.y);let P=u[3*D+0]*C,T=u[3*D+1],O=u[3*D+0]*M;h.push(P,T,O)}}for(let k=0;k<i;k++)for(let A=0;A<t.length-1;A++){let C=A+k*t.length,M=C,D=C+t.length,P=C+t.length+1,T=C+1;l.push(M,D,T),l.push(P,T,D)}this.setIndex(l),this.setAttribute("position",new wt(d,3)),this.setAttribute("uv",new wt(c,2)),this.setAttribute("normal",new wt(h,3))}static fromJSON(t){return new SP(t.points,t.segments,t.phiStart,t.phiLength)}},HA=class extends Nt{constructor(t=1,i=1,r=1,s=32,l=1,d=!1,c=0,u=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:i,height:r,radialSegments:s,heightSegments:l,openEnded:d,thetaStart:c,thetaLength:u};let h=this;s=Math.floor(s),l=Math.floor(l);let f=[],m=[],p=[],g=[],v=0,w=[],x=r/2,_=0;k(),d===!1&&(t>0&&A(!0),i>0&&A(!1)),this.setIndex(f),this.setAttribute("position",new wt(m,3)),this.setAttribute("normal",new wt(p,3)),this.setAttribute("uv",new wt(g,2));function k(){let C=new N,M=new N,D=0,P=(i-t)/r;for(let T=0;T<=l;T++){let O=[],z=T/l,L=z*(i-t)+t;for(let B=0;B<=s;B++){let j=B/s,V=j*u+c,H=Math.sin(V),Y=Math.cos(V);M.x=L*H,M.y=-z*r+x,M.z=L*Y,m.push(M.x,M.y,M.z),C.set(H,P,Y).normalize(),p.push(C.x,C.y,C.z),g.push(j,1-z),O.push(v++)}w.push(O)}for(let T=0;T<s;T++)for(let O=0;O<l;O++){let z=w[O][T],L=w[O+1][T],B=w[O+1][T+1],j=w[O][T+1];f.push(z,L,j),f.push(L,B,j),D+=6}h.addGroup(_,D,0),_+=D}function A(C){let M=v,D=new q,P=new N,T=0,O=C===!0?t:i,z=C===!0?1:-1;for(let B=1;B<=s;B++)m.push(0,x*z,0),p.push(0,z,0),g.push(.5,.5),v++;let L=v;for(let B=0;B<=s;B++){let j=B/s*u+c,V=Math.cos(j),H=Math.sin(j);P.x=O*H,P.y=x*z,P.z=O*V,m.push(P.x,P.y,P.z),p.push(0,z,0),D.x=V*.5+.5,D.y=H*.5*z+.5,g.push(D.x,D.y),v++}for(let B=0;B<s;B++){let j=M+B,V=L+B;C===!0?f.push(V,V+1,j):f.push(V+1,V,j),T+=3}h.addGroup(_,T,C===!0?1:2),_+=T}}static fromJSON(t){return new HA(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},AP=class extends HA{constructor(t=1,i=1,r=32,s=1,l=!1,d=0,c=Math.PI*2){super(0,t,i,r,s,l,d,c),this.type="ConeGeometry",this.parameters={radius:t,height:i,radialSegments:r,heightSegments:s,openEnded:l,thetaStart:d,thetaLength:c}}static fromJSON(t){return new AP(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}},GA=class extends Nt{constructor(t=[],i=[],r=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:i,radius:r,detail:s};let l=[],d=[];c(s),h(r),f(),this.setAttribute("position",new wt(l,3)),this.setAttribute("normal",new wt(l.slice(),3)),this.setAttribute("uv",new wt(d,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function c(k){let A=new N,C=new N,M=new N;for(let D=0;D<i.length;D+=3)g(i[D+0],A),g(i[D+1],C),g(i[D+2],M),u(A,C,M,k)}function u(k,A,C,M){let D=M+1,P=[];for(let T=0;T<=D;T++){P[T]=[];let O=k.clone().lerp(C,T/D),z=A.clone().lerp(C,T/D),L=D-T;for(let B=0;B<=L;B++)B===0&&T===D?P[T][B]=O:P[T][B]=O.clone().lerp(z,B/L)}for(let T=0;T<D;T++)for(let O=0;O<2*(D-T)-1;O++){let z=Math.floor(O/2);O%2===0?(p(P[T][z+1]),p(P[T+1][z]),p(P[T][z])):(p(P[T][z+1]),p(P[T+1][z+1]),p(P[T+1][z]))}}function h(k){let A=new N;for(let C=0;C<l.length;C+=3)A.x=l[C+0],A.y=l[C+1],A.z=l[C+2],A.normalize().multiplyScalar(k),l[C+0]=A.x,l[C+1]=A.y,l[C+2]=A.z}function f(){let k=new N;for(let A=0;A<l.length;A+=3){k.x=l[A+0],k.y=l[A+1],k.z=l[A+2];let C=x(k)/2/Math.PI+.5,M=_(k)/Math.PI+.5;d.push(C,1-M)}v(),m()}function m(){for(let k=0;k<d.length;k+=6){let A=d[k+0],C=d[k+2],M=d[k+4],D=Math.max(A,C,M),P=Math.min(A,C,M);D>.9&&P<.1&&(A<.2&&(d[k+0]+=1),C<.2&&(d[k+2]+=1),M<.2&&(d[k+4]+=1))}}function p(k){l.push(k.x,k.y,k.z)}function g(k,A){let C=k*3;A.x=t[C+0],A.y=t[C+1],A.z=t[C+2]}function v(){let k=new N,A=new N,C=new N,M=new N,D=new q,P=new q,T=new q;for(let O=0,z=0;O<l.length;O+=9,z+=6){k.set(l[O+0],l[O+1],l[O+2]),A.set(l[O+3],l[O+4],l[O+5]),C.set(l[O+6],l[O+7],l[O+8]),D.set(d[z+0],d[z+1]),P.set(d[z+2],d[z+3]),T.set(d[z+4],d[z+5]),M.copy(k).add(A).add(C).divideScalar(3);let L=x(M);w(D,z+0,k,L),w(P,z+2,A,L),w(T,z+4,C,L)}}function w(k,A,C,M){M<0&&k.x===1&&(d[A]=k.x-1),C.x===0&&C.z===0&&(d[A]=M/2/Math.PI+.5)}function x(k){return Math.atan2(k.z,-k.x)}function _(k){return Math.atan2(-k.y,Math.sqrt(k.x*k.x+k.z*k.z))}}static fromJSON(t){return new GA(t.vertices,t.indices,t.radius,t.details)}},CP=class extends GA{constructor(t=1,i=0){let r=(1+Math.sqrt(5))/2,s=1/r,l=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-r,0,-s,r,0,s,-r,0,s,r,-s,-r,0,-s,r,0,s,-r,0,s,r,0,-r,0,-s,r,0,-s,-r,0,s,r,0,s],d=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(l,d,t,i),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:i}}static fromJSON(t){return new CP(t.radius,t.detail)}},$w=class extends qw{constructor(t){super(t),this.uuid=gr(),this.type="Shape",this.holes=[]}getPointsHoles(t){let i=[];for(let r=0,s=this.holes.length;r<s;r++)i[r]=this.holes[r].getPoints(t);return i}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let i=0,r=t.holes.length;i<r;i++){let s=t.holes[i];this.holes.push(s.clone())}return this}toJSON(){let t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let i=0,r=this.holes.length;i<r;i++){let s=this.holes[i];t.holes.push(s.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let i=0,r=t.holes.length;i<r;i++){let s=t.holes[i];this.holes.push(new qw().fromJSON(s))}return this}},BU={triangulate:function(t,i,r=2){let s=i&&i.length,l=s?i[0]*r:t.length,d=EP(t,0,l,r,!0),c=[];if(!d||d.next===d.prev)return c;let u,h,f,m,p,g,v;if(s&&(d=VU(t,i,d,r)),t.length>80*r){u=f=t[0],h=m=t[1];for(let w=r;w<l;w+=r)p=t[w],g=t[w+1],p<u&&(u=p),g<h&&(h=g),p>f&&(f=p),g>m&&(m=g);v=Math.max(f-u,m-h),v=v!==0?32767/v:0}return Pv(d,c,r,u,h,v,0),c}};function EP(t,i,r,s,l){let d,c;if(l===JU(t,i,r,s)>0)for(d=i;d<r;d+=s)c=DP(d,t[d],t[d+1],c);else for(d=r-s;d>=i;d-=s)c=DP(d,t[d],t[d+1],c);return c&&Zw(c,c.next)&&(Iv(c),c=c.next),c}function Xu(t,i){if(!t)return t;i||(i=t);let r=t,s;do if(s=!1,!r.steiner&&(Zw(r,r.next)||Hn(r.prev,r,r.next)===0)){if(Iv(r),r=i=r.prev,r===r.next)break;s=!0}else r=r.next;while(s||r!==i);return i}function Pv(t,i,r,s,l,d,c){if(!t)return;!c&&d&&$U(t,s,l,d);let u=t,h,f;for(;t.prev!==t.next;){if(h=t.prev,f=t.next,d?NU(t,s,l,d):FU(t)){i.push(h.i/r|0),i.push(t.i/r|0),i.push(f.i/r|0),Iv(t),t=f.next,u=f.next;continue}if(t=f,t===u){c?c===1?(t=jU(Xu(t),i,r),Pv(t,i,r,s,l,d,2)):c===2&&UU(t,i,r,s,l,d):Pv(Xu(t),i,r,s,l,d,1);break}}}function FU(t){let i=t.prev,r=t,s=t.next;if(Hn(i,r,s)>=0)return!1;let l=i.x,d=r.x,c=s.x,u=i.y,h=r.y,f=s.y,m=l<d?l<c?l:c:d<c?d:c,p=u<h?u<f?u:f:h<f?h:f,g=l>d?l>c?l:c:d>c?d:c,v=u>h?u>f?u:f:h>f?h:f,w=s.next;for(;w!==i;){if(w.x>=m&&w.x<=g&&w.y>=p&&w.y<=v&&Jf(l,u,d,h,c,f,w.x,w.y)&&Hn(w.prev,w,w.next)>=0)return!1;w=w.next}return!0}function NU(t,i,r,s){let l=t.prev,d=t,c=t.next;if(Hn(l,d,c)>=0)return!1;let u=l.x,h=d.x,f=c.x,m=l.y,p=d.y,g=c.y,v=u<h?u<f?u:f:h<f?h:f,w=m<p?m<g?m:g:p<g?p:g,x=u>h?u>f?u:f:h>f?h:f,_=m>p?m>g?m:g:p>g?p:g,k=WA(v,w,i,r,s),A=WA(x,_,i,r,s),C=t.prevZ,M=t.nextZ;for(;C&&C.z>=k&&M&&M.z<=A;){if(C.x>=v&&C.x<=x&&C.y>=w&&C.y<=_&&C!==l&&C!==c&&Jf(u,m,h,p,f,g,C.x,C.y)&&Hn(C.prev,C,C.next)>=0||(C=C.prevZ,M.x>=v&&M.x<=x&&M.y>=w&&M.y<=_&&M!==l&&M!==c&&Jf(u,m,h,p,f,g,M.x,M.y)&&Hn(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;C&&C.z>=k;){if(C.x>=v&&C.x<=x&&C.y>=w&&C.y<=_&&C!==l&&C!==c&&Jf(u,m,h,p,f,g,C.x,C.y)&&Hn(C.prev,C,C.next)>=0)return!1;C=C.prevZ}for(;M&&M.z<=A;){if(M.x>=v&&M.x<=x&&M.y>=w&&M.y<=_&&M!==l&&M!==c&&Jf(u,m,h,p,f,g,M.x,M.y)&&Hn(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function jU(t,i,r){let s=t;do{let l=s.prev,d=s.next.next;!Zw(l,d)&&MP(l,s,s.next,d)&&Ov(l,d)&&Ov(d,l)&&(i.push(l.i/r|0),i.push(s.i/r|0),i.push(d.i/r|0),Iv(s),Iv(s.next),s=t=d),s=s.next}while(s!==t);return Xu(s)}function UU(t,i,r,s,l,d){let c=t;do{let u=c.next.next;for(;u!==c.prev;){if(c.i!==u.i&&XU(c,u)){let h=TP(c,u);c=Xu(c,c.next),h=Xu(h,h.next),Pv(c,i,r,s,l,d,0),Pv(h,i,r,s,l,d,0);return}u=u.next}c=c.next}while(c!==t)}function VU(t,i,r,s){let l=[],d,c,u,h,f;for(d=0,c=i.length;d<c;d++)u=i[d]*s,h=d<c-1?i[d+1]*s:t.length,f=EP(t,u,h,s,!1),f===f.next&&(f.steiner=!0),l.push(YU(f));for(l.sort(HU),d=0;d<l.length;d++)r=GU(l[d],r);return r}function HU(t,i){return t.x-i.x}function GU(t,i){let r=WU(t,i);if(!r)return i;let s=TP(r,t);return Xu(s,s.next),Xu(r,r.next)}function WU(t,i){let r=i,s=-1/0,l,d=t.x,c=t.y;do{if(c<=r.y&&c>=r.next.y&&r.next.y!==r.y){let g=r.x+(c-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(g<=d&&g>s&&(s=g,l=r.x<r.next.x?r:r.next,g===d))return l}r=r.next}while(r!==i);if(!l)return null;let u=l,h=l.x,f=l.y,m=1/0,p;r=l;do d>=r.x&&r.x>=h&&d!==r.x&&Jf(c<f?d:s,c,h,f,c<f?s:d,c,r.x,r.y)&&(p=Math.abs(c-r.y)/(d-r.x),Ov(r,t)&&(p<m||p===m&&(r.x>l.x||r.x===l.x&&qU(l,r)))&&(l=r,m=p)),r=r.next;while(r!==u);return l}function qU(t,i){return Hn(t.prev,t,i.prev)<0&&Hn(i.next,t,t.next)<0}function $U(t,i,r,s){let l=t;do l.z===0&&(l.z=WA(l.x,l.y,i,r,s)),l.prevZ=l.prev,l.nextZ=l.next,l=l.next;while(l!==t);l.prevZ.nextZ=null,l.prevZ=null,ZU(l)}function ZU(t){let i,r,s,l,d,c,u,h,f=1;do{for(r=t,t=null,d=null,c=0;r;){for(c++,s=r,u=0,i=0;i<f&&(u++,s=s.nextZ,!!s);i++);for(h=f;u>0||h>0&&s;)u!==0&&(h===0||!s||r.z<=s.z)?(l=r,r=r.nextZ,u--):(l=s,s=s.nextZ,h--),d?d.nextZ=l:t=l,l.prevZ=d,d=l;r=s}d.nextZ=null,f*=2}while(c>1);return t}function WA(t,i,r,s,l){return t=(t-r)*l|0,i=(i-s)*l|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,t|i<<1}function YU(t){let i=t,r=t;do(i.x<r.x||i.x===r.x&&i.y<r.y)&&(r=i),i=i.next;while(i!==t);return r}function Jf(t,i,r,s,l,d,c,u){return(l-c)*(i-u)>=(t-c)*(d-u)&&(t-c)*(s-u)>=(r-c)*(i-u)&&(r-c)*(d-u)>=(l-c)*(s-u)}function XU(t,i){return t.next.i!==i.i&&t.prev.i!==i.i&&!KU(t,i)&&(Ov(t,i)&&Ov(i,t)&&QU(t,i)&&(Hn(t.prev,t,i.prev)||Hn(t,i.prev,i))||Zw(t,i)&&Hn(t.prev,t,t.next)>0&&Hn(i.prev,i,i.next)>0)}function Hn(t,i,r){return(i.y-t.y)*(r.x-i.x)-(i.x-t.x)*(r.y-i.y)}function Zw(t,i){return t.x===i.x&&t.y===i.y}function MP(t,i,r,s){let l=Xw(Hn(t,i,r)),d=Xw(Hn(t,i,s)),c=Xw(Hn(r,s,t)),u=Xw(Hn(r,s,i));return!!(l!==d&&c!==u||l===0&&Yw(t,r,i)||d===0&&Yw(t,s,i)||c===0&&Yw(r,t,s)||u===0&&Yw(r,i,s))}function Yw(t,i,r){return i.x<=Math.max(t.x,r.x)&&i.x>=Math.min(t.x,r.x)&&i.y<=Math.max(t.y,r.y)&&i.y>=Math.min(t.y,r.y)}function Xw(t){return t>0?1:t<0?-1:0}function KU(t,i){let r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==i.i&&r.next.i!==i.i&&MP(r,r.next,t,i))return!0;r=r.next}while(r!==t);return!1}function Ov(t,i){return Hn(t.prev,t,t.next)<0?Hn(t,i,t.next)>=0&&Hn(t,t.prev,i)>=0:Hn(t,i,t.prev)<0||Hn(t,t.next,i)<0}function QU(t,i){let r=t,s=!1,l=(t.x+i.x)/2,d=(t.y+i.y)/2;do r.y>d!=r.next.y>d&&r.next.y!==r.y&&l<(r.next.x-r.x)*(d-r.y)/(r.next.y-r.y)+r.x&&(s=!s),r=r.next;while(r!==t);return s}function TP(t,i){let r=new qA(t.i,t.x,t.y),s=new qA(i.i,i.x,i.y),l=t.next,d=i.prev;return t.next=i,i.prev=t,r.next=l,l.prev=r,s.next=r,r.prev=s,d.next=s,s.prev=d,s}function DP(t,i,r,s){let l=new qA(t,i,r);return s?(l.next=s.next,l.prev=s,s.next.prev=l,s.next=l):(l.prev=l,l.next=l),l}function Iv(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function qA(t,i,r){this.i=t,this.x=i,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function JU(t,i,r,s){let l=0;for(let d=i,c=r-s;d<r;d+=s)l+=(t[c]-t[d])*(t[d+1]+t[c+1]),c=d;return l}var PP=class{static area(t){let i=t.length,r=0;for(let s=i-1,l=0;l<i;s=l++)r+=t[s].x*t[l].y-t[l].x*t[s].y;return r*.5}static isClockWise(t){return PP.area(t)<0}static triangulateShape(t,i){let r=[],s=[],l=[];OP(t),IP(r,t);let d=t.length;i.forEach(OP);for(let u=0;u<i.length;u++)s.push(d),d+=i[u].length,IP(r,i[u]);let c=BU.triangulate(r,s);for(let u=0;u<c.length;u+=3)l.push(c.slice(u,u+3));return l}};function OP(t){let i=t.length;i>2&&t[i-1].equals(t[0])&&t.pop()}function IP(t,i){for(let r=0;r<i.length;r++)t.push(i[r].x),t.push(i[r].y)}var RP=class extends GA{constructor(t=1,i=0){let r=(1+Math.sqrt(5))/2,s=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],l=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,l,t,i),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:i}}static fromJSON(t){return new RP(t.radius,t.detail)}},$A=class extends Nt{constructor(t=1,i=32,r=16,s=0,l=Math.PI*2,d=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:i,heightSegments:r,phiStart:s,phiLength:l,thetaStart:d,thetaLength:c},i=Math.max(3,Math.floor(i)),r=Math.max(2,Math.floor(r));let u=Math.min(d+c,Math.PI),h=0,f=[],m=new N,p=new N,g=[],v=[],w=[],x=[];for(let _=0;_<=r;_++){let k=[],A=_/r,C=0;_==0&&d==0?C=.5/i:_==r&&u==Math.PI&&(C=-.5/i);for(let M=0;M<=i;M++){let D=M/i;m.x=-t*Math.cos(s+D*l)*Math.sin(d+A*c),m.y=t*Math.cos(d+A*c),m.z=t*Math.sin(s+D*l)*Math.sin(d+A*c),v.push(m.x,m.y,m.z),p.copy(m).normalize(),w.push(p.x,p.y,p.z),x.push(D+C,1-A),k.push(h++)}f.push(k)}for(let _=0;_<r;_++)for(let k=0;k<i;k++){let A=f[_][k+1],C=f[_][k],M=f[_+1][k],D=f[_+1][k+1];(_!==0||d>0)&&g.push(A,C,D),(_!==r-1||u<Math.PI)&&g.push(C,M,D)}this.setIndex(g),this.setAttribute("position",new wt(v,3)),this.setAttribute("normal",new wt(w,3)),this.setAttribute("uv",new wt(x,2))}static fromJSON(t){return new $A(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}},zP=class extends Nt{constructor(t=1,i=.4,r=64,s=8,l=2,d=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:i,tubularSegments:r,radialSegments:s,p:l,q:d},r=Math.floor(r),s=Math.floor(s);let c=[],u=[],h=[],f=[],m=new N,p=new N,g=new N,v=new N,w=new N,x=new N,_=new N;for(let A=0;A<=r;++A){let C=A/r*l*Math.PI*2;k(C,l,d,t,g),k(C+.01,l,d,t,v),x.subVectors(v,g),_.addVectors(v,g),w.crossVectors(x,_),_.crossVectors(w,x),w.normalize(),_.normalize();for(let M=0;M<=s;++M){let D=M/s*Math.PI*2,P=-i*Math.cos(D),T=i*Math.sin(D);m.x=g.x+(P*_.x+T*w.x),m.y=g.y+(P*_.y+T*w.y),m.z=g.z+(P*_.z+T*w.z),u.push(m.x,m.y,m.z),p.subVectors(m,g).normalize(),h.push(p.x,p.y,p.z),f.push(A/r),f.push(M/s)}}for(let A=1;A<=r;A++)for(let C=1;C<=s;C++){let M=(s+1)*(A-1)+(C-1),D=(s+1)*A+(C-1),P=(s+1)*A+C,T=(s+1)*(A-1)+C;c.push(M,D,T),c.push(D,P,T)}this.setIndex(c),this.setAttribute("position",new wt(u,3)),this.setAttribute("normal",new wt(h,3)),this.setAttribute("uv",new wt(f,2));function k(A,C,M,D,P){let T=Math.cos(A),O=Math.sin(A),z=M/C*A,L=Math.cos(z);P.x=D*(2+L)*.5*T,P.y=D*(2+L)*O*.5,P.z=D*Math.sin(z)*.5}}static fromJSON(t){return new zP(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}};function Tc(t,i,r){return LP(t)?new t.constructor(t.subarray(i,r!==void 0?r:t.length)):t.slice(i,r)}function Kw(t,i,r){return!t||!r&&t.constructor===i?t:typeof i.BYTES_PER_ELEMENT=="number"?new i(t):Array.prototype.slice.call(t)}function LP(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function eV(t){function i(l,d){return t[l]-t[d]}let r=t.length,s=new Array(r);for(let l=0;l!==r;++l)s[l]=l;return s.sort(i),s}function BP(t,i,r){let s=t.length,l=new t.constructor(s);for(let d=0,c=0;c!==s;++d){let u=r[d]*i;for(let h=0;h!==i;++h)l[c++]=t[u+h]}return l}function FP(t,i,r,s){let l=1,d=t[0];for(;d!==void 0&&d[s]===void 0;)d=t[l++];if(d===void 0)return;let c=d[s];if(c!==void 0)if(Array.isArray(c))do c=d[s],c!==void 0&&(i.push(d.time),r.push.apply(r,c)),d=t[l++];while(d!==void 0);else if(c.toArray!==void 0)do c=d[s],c!==void 0&&(i.push(d.time),c.toArray(r,r.length)),d=t[l++];while(d!==void 0);else do c=d[s],c!==void 0&&(i.push(d.time),r.push(c)),d=t[l++];while(d!==void 0)}var Qw=class{constructor(t,i,r,s){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new i.constructor(r),this.sampleValues=i,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(t){let i=this.parameterPositions,r=this._cachedIndex,s=i[r],l=i[r-1];e:{t:{let d;i:{n:if(!(t<s)){for(let c=r+2;;){if(s===void 0){if(t<l)break n;return r=i.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===c)break;if(l=s,s=i[++r],t<s)break t}d=i.length;break i}if(!(t>=l)){let c=i[1];t<c&&(r=2,l=c);for(let u=r-2;;){if(l===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===u)break;if(s=l,l=i[--r-1],t>=l)break t}d=r,r=0;break i}break e}for(;r<d;){let c=r+d>>>1;t<i[c]?d=c:r=c+1}if(s=i[r],l=i[r-1],l===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return r=i.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,l,s)}return this.interpolate_(r,l,t,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let i=this.resultBuffer,r=this.sampleValues,s=this.valueSize,l=t*s;for(let d=0;d!==s;++d)i[d]=r[l+d];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},tV=class extends Qw{constructor(t,i,r,s){super(t,i,r,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:md,endingEnd:md}}intervalChanged_(t,i,r){let s=this.parameterPositions,l=t-2,d=t+1,c=s[l],u=s[d];if(c===void 0)switch(this.getSettings_().endingStart){case bc:l=t,c=2*i-r;break;case Uu:l=s.length-2,c=i+s[l]-s[l+1];break;default:l=t,c=r}if(u===void 0)switch(this.getSettings_().endingEnd){case bc:d=t,u=2*r-i;break;case Uu:d=1,u=r+s[1]-s[0];break;default:d=t-1,u=i}let h=(r-i)*.5,f=this.valueSize;this._weightPrev=h/(i-c),this._weightNext=h/(u-r),this._offsetPrev=l*f,this._offsetNext=d*f}interpolate_(t,i,r,s){let l=this.resultBuffer,d=this.sampleValues,c=this.valueSize,u=t*c,h=u-c,f=this._offsetPrev,m=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(r-i)/(s-i),w=v*v,x=w*v,_=-p*x+2*p*w-p*v,k=(1+p)*x+(-1.5-2*p)*w+(-.5+p)*v+1,A=(-1-g)*x+(1.5+g)*w+.5*v,C=g*x-g*w;for(let M=0;M!==c;++M)l[M]=_*d[f+M]+k*d[h+M]+A*d[u+M]+C*d[m+M];return l}},NP=class extends Qw{constructor(t,i,r,s){super(t,i,r,s)}interpolate_(t,i,r,s){let l=this.resultBuffer,d=this.sampleValues,c=this.valueSize,u=t*c,h=u-c,f=(r-i)/(s-i),m=1-f;for(let p=0;p!==c;++p)l[p]=d[h+p]*m+d[u+p]*f;return l}},iV=class extends Qw{constructor(t,i,r,s){super(t,i,r,s)}interpolate_(t){return this.copySampleValue_(t-1)}},_l=class{constructor(t,i,r,s){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Kw(i,this.TimeBufferType),this.values=Kw(r,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(t){let i=t.constructor,r;if(i.toJSON!==this.toJSON)r=i.toJSON(t);else{r={name:t.name,times:Kw(t.times,Array),values:Kw(t.values,Array)};let s=t.getInterpolation();s!==t.DefaultInterpolation&&(r.interpolation=s)}return r.type=t.ValueTypeName,r}InterpolantFactoryMethodDiscrete(t){return new iV(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new NP(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new tV(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let i;switch(t){case ju:i=this.InterpolantFactoryMethodDiscrete;break;case Of:i=this.InterpolantFactoryMethodLinear;break;case fv:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){let r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ju;case this.InterpolantFactoryMethodLinear:return Of;case this.InterpolantFactoryMethodSmooth:return fv}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let i=this.times;for(let r=0,s=i.length;r!==s;++r)i[r]+=t}return this}scale(t){if(t!==1){let i=this.times;for(let r=0,s=i.length;r!==s;++r)i[r]*=t}return this}trim(t,i){let r=this.times,s=r.length,l=0,d=s-1;for(;l!==s&&r[l]<t;)++l;for(;d!==-1&&r[d]>i;)--d;if(++d,l!==0||d!==s){l>=d&&(d=Math.max(d,1),l=d-1);let c=this.getValueSize();this.times=Tc(r,l,d),this.values=Tc(this.values,l*c,d*c)}return this}validate(){let t=!0,i=this.getValueSize();i-Math.floor(i)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let r=this.times,s=this.values,l=r.length;l===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let d=null;for(let c=0;c!==l;c++){let u=r[c];if(typeof u=="number"&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,u),t=!1;break}if(d!==null&&d>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,u,d),t=!1;break}d=u}if(s!==void 0&&LP(s))for(let c=0,u=s.length;c!==u;++c){let h=s[c];if(isNaN(h)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,c,h),t=!1;break}}return t}optimize(){let t=Tc(this.times),i=Tc(this.values),r=this.getValueSize(),s=this.getInterpolation()===fv,l=t.length-1,d=1;for(let c=1;c<l;++c){let u=!1,h=t[c],f=t[c+1];if(h!==f&&(c!==1||h!==t[0]))if(s)u=!0;else{let m=c*r,p=m-r,g=m+r;for(let v=0;v!==r;++v){let w=i[m+v];if(w!==i[p+v]||w!==i[g+v]){u=!0;break}}}if(u){if(c!==d){t[d]=t[c];let m=c*r,p=d*r;for(let g=0;g!==r;++g)i[p+g]=i[m+g]}++d}}if(l>0){t[d]=t[l];for(let c=l*r,u=d*r,h=0;h!==r;++h)i[u+h]=i[c+h];++d}return d!==t.length?(this.times=Tc(t,0,d),this.values=Tc(i,0,d*r)):(this.times=t,this.values=i),this}clone(){let t=Tc(this.times,0),i=Tc(this.values,0),r=this.constructor,s=new r(this.name,t,i);return s.createInterpolant=this.createInterpolant,s}};_l.prototype.TimeBufferType=Float32Array,_l.prototype.ValueBufferType=Float32Array,_l.prototype.DefaultInterpolation=Of;var ep=class extends _l{};ep.prototype.ValueTypeName="bool",ep.prototype.ValueBufferType=Array,ep.prototype.DefaultInterpolation=ju,ep.prototype.InterpolantFactoryMethodLinear=void 0,ep.prototype.InterpolantFactoryMethodSmooth=void 0;var jP=class extends _l{};jP.prototype.ValueTypeName="color";var Jw=class extends _l{};Jw.prototype.ValueTypeName="number";var nV=class extends Qw{constructor(t,i,r,s){super(t,i,r,s)}interpolate_(t,i,r,s){let l=this.resultBuffer,d=this.sampleValues,c=this.valueSize,u=(r-i)/(s-i),h=t*c;for(let f=h+c;h!==f;h+=4)Ut.slerpFlat(l,0,d,h-c,d,h,u);return l}},Rv=class extends _l{InterpolantFactoryMethodLinear(t){return new nV(this.times,this.values,this.getValueSize(),t)}};Rv.prototype.ValueTypeName="quaternion",Rv.prototype.DefaultInterpolation=Of,Rv.prototype.InterpolantFactoryMethodSmooth=void 0;var tp=class extends _l{};tp.prototype.ValueTypeName="string",tp.prototype.ValueBufferType=Array,tp.prototype.DefaultInterpolation=ju,tp.prototype.InterpolantFactoryMethodLinear=void 0,tp.prototype.InterpolantFactoryMethodSmooth=void 0;var ex=class extends _l{};ex.prototype.ValueTypeName="vector";var ZA=class{constructor(t,i=-1,r,s=pv){this.name=t,this.tracks=r,this.duration=i,this.blendMode=s,this.uuid=gr(),this.duration<0&&this.resetDuration()}static parse(t){let i=[],r=t.tracks,s=1/(t.fps||1);for(let d=0,c=r.length;d!==c;++d)i.push(aV(r[d]).scale(s));let l=new this(t.name,t.duration,i,t.blendMode);return l.uuid=t.uuid,l}static toJSON(t){let i=[],r=t.tracks,s={name:t.name,duration:t.duration,tracks:i,uuid:t.uuid,blendMode:t.blendMode};for(let l=0,d=r.length;l!==d;++l)i.push(_l.toJSON(r[l]));return s}static CreateFromMorphTargetSequence(t,i,r,s){let l=i.length,d=[];for(let c=0;c<l;c++){let u=[],h=[];u.push((c+l-1)%l,c,(c+1)%l),h.push(0,1,0);let f=eV(u);u=BP(u,1,f),h=BP(h,1,f),!s&&u[0]===0&&(u.push(l),h.push(h[0])),d.push(new Jw(".morphTargetInfluences["+i[c].name+"]",u,h).scale(1/r))}return new this(t,-1,d)}static findByName(t,i){let r=t;if(!Array.isArray(t)){let s=t;r=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<r.length;s++)if(r[s].name===i)return r[s];return null}static CreateClipsFromMorphTargetSequences(t,i,r){let s={},l=/^([\w-]*?)([\d]+)$/;for(let c=0,u=t.length;c<u;c++){let h=t[c],f=h.name.match(l);if(f&&f.length>1){let m=f[1],p=s[m];p||(s[m]=p=[]),p.push(h)}}let d=[];for(let c in s)d.push(this.CreateFromMorphTargetSequence(c,s[c],i,r));return d}static parseAnimation(t,i){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;let r=function(f,m,p,g,v){if(p.length!==0){let w=[],x=[];FP(p,w,x,g),w.length!==0&&v.push(new f(m,w,x))}},s=[],l=t.name||"default",d=t.fps||30,c=t.blendMode,u=t.length||-1,h=t.hierarchy||[];for(let f=0;f<h.length;f++){let m=h[f].keys;if(!(!m||m.length===0))if(m[0].morphTargets){let p={},g;for(g=0;g<m.length;g++)if(m[g].morphTargets)for(let v=0;v<m[g].morphTargets.length;v++)p[m[g].morphTargets[v]]=-1;for(let v in p){let w=[],x=[];for(let _=0;_!==m[g].morphTargets.length;++_){let k=m[g];w.push(k.time),x.push(k.morphTarget===v?1:0)}s.push(new Jw(".morphTargetInfluence["+v+"]",w,x))}u=p.length*d}else{let p=".bones["+i[f].name+"]";r(ex,p+".position",m,"pos",s),r(Rv,p+".quaternion",m,"rot",s),r(ex,p+".scale",m,"scl",s)}}return s.length===0?null:new this(l,u,s,c)}resetDuration(){let t=this.tracks,i=0;for(let r=0,s=t.length;r!==s;++r){let l=this.tracks[r];i=Math.max(i,l.times[l.times.length-1])}return this.duration=i,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){let t=[];for(let i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}};function rV(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Jw;case"vector":case"vector2":case"vector3":case"vector4":return ex;case"color":return jP;case"quaternion":return Rv;case"bool":case"boolean":return ep;case"string":return tp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function aV(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");let i=rV(t.type);if(t.times===void 0){let r=[],s=[];FP(t.keys,r,s,"value"),t.times=r,t.values=s}return i.parse!==void 0?i.parse(t):new i(t.name,t.times,t.values,t.interpolation)}var UP={enabled:!1,files:{},add:function(t,i){this.enabled!==!1&&(this.files[t]=i)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},VP=class{constructor(t,i,r){let s=this,l=!1,d=0,c=0,u,h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=i,this.onError=r,this.itemStart=function(f){c++,l===!1&&s.onStart!==void 0&&s.onStart(f,d,c),l=!0},this.itemEnd=function(f){d++,s.onProgress!==void 0&&s.onProgress(f,d,c),d===c&&(l=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(f){s.onError!==void 0&&s.onError(f)},this.resolveURL=function(f){return u?u(f):f},this.setURLModifier=function(f){return u=f,this},this.addHandler=function(f,m){return h.push(f,m),this},this.removeHandler=function(f){let m=h.indexOf(f);return m!==-1&&h.splice(m,2),this},this.getHandler=function(f){for(let m=0,p=h.length;m<p;m+=2){let g=h[m],v=h[m+1];if(g.global&&(g.lastIndex=0),g.test(f))return v}return null}}},sV=new VP,YA=class{constructor(t){this.manager=t!==void 0?t:sV,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){let r=this;return new Promise(function(s,l){r.load(t,s,i,l)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}},xd={},oV=class extends Error{constructor(t,i){super(t),this.response=i}},XA=class extends YA{constructor(t){super(t)}load(t,i,r,s){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);let l=UP.get(t);if(l!==void 0)return this.manager.itemStart(t),setTimeout(()=>{i&&i(l),this.manager.itemEnd(t)},0),l;if(xd[t]!==void 0){xd[t].push({onLoad:i,onProgress:r,onError:s});return}xd[t]=[],xd[t].push({onLoad:i,onProgress:r,onError:s});let d=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),c=this.mimeType,u=this.responseType;fetch(d).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;let f=xd[t],m=h.body.getReader(),p=h.headers.get("Content-Length")||h.headers.get("X-File-Size"),g=p?parseInt(p):0,v=g!==0,w=0,x=new ReadableStream({start(_){k();function k(){m.read().then(({done:A,value:C})=>{if(A)_.close();else{w+=C.byteLength;let M=new ProgressEvent("progress",{lengthComputable:v,loaded:w,total:g});for(let D=0,P=f.length;D<P;D++){let T=f[D];T.onProgress&&T.onProgress(M)}_.enqueue(C),k()}})}}});return new Response(x)}else throw new oV(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(u){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(f=>new DOMParser().parseFromString(f,c));case"json":return h.json();default:if(c===void 0)return h.text();{let f=/charset="?([^;"\s]*)"?/i.exec(c),m=f&&f[1]?f[1].toLowerCase():void 0,p=new TextDecoder(m);return h.arrayBuffer().then(g=>p.decode(g))}}}).then(h=>{UP.add(t,h);let f=xd[t];delete xd[t];for(let m=0,p=f.length;m<p;m++){let g=f[m];g.onLoad&&g.onLoad(h)}}).catch(h=>{let f=xd[t];if(f===void 0)throw this.manager.itemError(t),h;delete xd[t];for(let m=0,p=f.length;m<p;m++){let g=f[m];g.onError&&g.onError(h)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}},zv=class extends ln{constructor(t,i=1){super(),this.isLight=!0,this.type="Light",this.color=new _t(t),this.intensity=i}dispose(){}copy(t,i){return super.copy(t,i),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let i=super.toJSON(t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}},lV=class extends zv{constructor(t,i,r){super(t,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ln.DEFAULT_UP),this.updateMatrix(),this.groundColor=new _t(i)}copy(t,i){return super.copy(t,i),this.groundColor.copy(t.groundColor),this}},KA=new Ze,HP=new N,GP=new N,QA=class{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new q(512,512),this.map=null,this.mapPass=null,this.matrix=new Ze,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new EA,this._frameExtents=new q(1,1),this._viewportCount=1,this._viewports=[new ri(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let i=this.camera,r=this.matrix;HP.setFromMatrixPosition(t.matrixWorld),i.position.copy(HP),GP.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(GP),i.updateMatrixWorld(),KA.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(KA),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(KA)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}},dV=class extends QA{constructor(){super(new ha(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){let i=this.camera,r=ml*2*t.angle*this.focus,s=this.mapSize.width/this.mapSize.height,l=t.distance||i.far;(r!==i.fov||s!==i.aspect||l!==i.far)&&(i.fov=r,i.aspect=s,i.far=l,i.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}},cV=class extends zv{constructor(t,i,r=0,s=Math.PI/3,l=0,d=2){super(t,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ln.DEFAULT_UP),this.updateMatrix(),this.target=new ln,this.distance=r,this.angle=s,this.penumbra=l,this.decay=d,this.map=null,this.shadow=new dV}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},WP=new Ze,Lv=new N,JA=new N,uV=class extends QA{constructor(){super(new ha(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new q(4,2),this._viewportCount=6,this._viewports=[new ri(2,1,1,1),new ri(0,1,1,1),new ri(3,1,1,1),new ri(1,1,1,1),new ri(3,0,1,1),new ri(1,0,1,1)],this._cubeDirections=[new N(1,0,0),new N(-1,0,0),new N(0,0,1),new N(0,0,-1),new N(0,1,0),new N(0,-1,0)],this._cubeUps=[new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,0,1),new N(0,0,-1)]}updateMatrices(t,i=0){let r=this.camera,s=this.matrix,l=t.distance||r.far;l!==r.far&&(r.far=l,r.updateProjectionMatrix()),Lv.setFromMatrixPosition(t.matrixWorld),r.position.copy(Lv),JA.copy(r.position),JA.add(this._cubeDirections[i]),r.up.copy(this._cubeUps[i]),r.lookAt(JA),r.updateMatrixWorld(),s.makeTranslation(-Lv.x,-Lv.y,-Lv.z),WP.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(WP)}},hV=class extends zv{constructor(t,i,r=0,s=2){super(t,i),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=s,this.shadow=new uV}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}},fV=class extends QA{constructor(){super(new MA(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},pV=class extends zv{constructor(t,i){super(t,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ln.DEFAULT_UP),this.updateMatrix(),this.target=new ln,this.shadow=new fV}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}},qP=class extends Nt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}toJSON(){let t=super.toJSON();return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}},$P=class extends YA{constructor(t){super(t)}load(t,i,r,s){let l=this,d=new XA(l.manager);d.setPath(l.path),d.setRequestHeader(l.requestHeader),d.setWithCredentials(l.withCredentials),d.load(t,function(c){try{i(l.parse(JSON.parse(c)))}catch(u){s?s(u):console.error(u),l.manager.itemError(t)}},r,s)}parse(t){let i={},r={};function s(p,g){if(i[g]!==void 0)return i[g];let v=p.interleavedBuffers[g],w=l(p,v.buffer),x=li(v.type,w),_=new kU(x,v.stride);return _.uuid=v.uuid,i[g]=_,_}function l(p,g){if(r[g]!==void 0)return r[g];let v=p.arrayBuffers[g],w=new Uint32Array(v).buffer;return r[g]=w,w}let d=t.isInstancedBufferGeometry?new qP:new Nt,c=t.data.index;if(c!==void 0){let p=li(c.type,c.array);d.setIndex(new Qt(p,1))}let u=t.data.attributes;for(let p in u){let g=u[p],v;if(g.isInterleavedBufferAttribute){let w=s(t.data,g.data);v=new zA(w,g.itemSize,g.offset,g.normalized)}else{let w=li(g.type,g.array),x=g.isInstancedBufferAttribute?mP:Qt;v=new x(w,g.itemSize,g.normalized)}g.name!==void 0&&(v.name=g.name),g.usage!==void 0&&v.setUsage(g.usage),g.updateRange!==void 0&&(v.updateRange.offset=g.updateRange.offset,v.updateRange.count=g.updateRange.count),d.setAttribute(p,v)}let h=t.data.morphAttributes;if(h)for(let p in h){let g=h[p],v=[];for(let w=0,x=g.length;w<x;w++){let _=g[w],k;if(_.isInterleavedBufferAttribute){let A=s(t.data,_.data);k=new zA(A,_.itemSize,_.offset,_.normalized)}else{let A=li(_.type,_.array);k=new Qt(A,_.itemSize,_.normalized)}_.name!==void 0&&(k.name=_.name),v.push(k)}d.morphAttributes[p]=v}t.data.morphTargetsRelative&&(d.morphTargetsRelative=!0);let f=t.data.groups||t.data.drawcalls||t.data.offsets;if(f!==void 0)for(let p=0,g=f.length;p!==g;++p){let v=f[p];d.addGroup(v.start,v.count,v.materialIndex)}let m=t.data.boundingSphere;if(m!==void 0){let p=new N;m.center!==void 0&&p.fromArray(m.center),d.boundingSphere=new Ur(p,m.radius)}return t.name&&(d.name=t.name),t.userData&&(d.userData=t.userData),d}},mV=class{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ZP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let i=ZP();t=(i-this.oldTime)/1e3,this.oldTime=i,this.elapsedTime+=t}return t}};function ZP(){return(typeof performance>"u"?Date:performance).now()}var gV=class{constructor(t,i,r){this.binding=t,this.valueSize=r;let s,l,d;switch(i){case"quaternion":s=this._slerp,l=this._slerpAdditive,d=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":s=this._select,l=this._select,d=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:s=this._lerp,l=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=l,this._setIdentity=d,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,i){let r=this.buffer,s=this.valueSize,l=t*s+s,d=this.cumulativeWeight;if(d===0){for(let c=0;c!==s;++c)r[l+c]=r[c];d=i}else{d+=i;let c=i/d;this._mixBufferRegion(r,l,0,c,s)}this.cumulativeWeight=d}accumulateAdditive(t){let i=this.buffer,r=this.valueSize,s=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(i,s,0,t,r),this.cumulativeWeightAdditive+=t}apply(t){let i=this.valueSize,r=this.buffer,s=t*i+i,l=this.cumulativeWeight,d=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1){let u=i*this._origIndex;this._mixBufferRegion(r,s,u,1-l,i)}d>0&&this._mixBufferRegionAdditive(r,s,this._addIndex*i,1,i);for(let u=i,h=i+i;u!==h;++u)if(r[u]!==r[u+i]){c.setValue(r,s);break}}saveOriginalState(){let t=this.binding,i=this.buffer,r=this.valueSize,s=r*this._origIndex;t.getValue(i,s);for(let l=r,d=s;l!==d;++l)i[l]=i[s+l%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){let t=this.valueSize*3;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){let t=this._addIndex*this.valueSize,i=t+this.valueSize;for(let r=t;r<i;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){let t=this._origIndex*this.valueSize,i=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[i+r]=this.buffer[t+r]}_select(t,i,r,s,l){if(s>=.5)for(let d=0;d!==l;++d)t[i+d]=t[r+d]}_slerp(t,i,r,s){Ut.slerpFlat(t,i,t,i,t,r,s)}_slerpAdditive(t,i,r,s,l){let d=this._workIndex*l;Ut.multiplyQuaternionsFlat(t,d,t,i,t,r),Ut.slerpFlat(t,i,t,i,t,d,s)}_lerp(t,i,r,s,l){let d=1-s;for(let c=0;c!==l;++c){let u=i+c;t[u]=t[u]*d+t[r+c]*s}}_lerpAdditive(t,i,r,s,l){for(let d=0;d!==l;++d){let c=i+d;t[c]=t[c]+t[r+d]*s}}},eC="\\[\\]\\.:\\/",vV=new RegExp("["+eC+"]","g"),tC="[^"+eC+"]",yV="[^"+eC.replace("\\.","")+"]",bV=/((?:WC+[\/:])*)/.source.replace("WC",tC),wV=/(WCOD+)?/.source.replace("WCOD",yV),xV=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tC),_V=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tC),kV=new RegExp("^"+bV+wV+xV+_V+"$"),SV=["material","materials","bones","map"],AV=class{constructor(t,i,r){let s=r||vn.parseTrackName(i);this._targetGroup=t,this._bindings=t.subscribe_(i,s)}getValue(t,i){this.bind();let r=this._targetGroup.nCachedObjects_,s=this._bindings[r];s!==void 0&&s.getValue(t,i)}setValue(t,i){let r=this._bindings;for(let s=this._targetGroup.nCachedObjects_,l=r.length;s!==l;++s)r[s].setValue(t,i)}bind(){let t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=t.length;i!==r;++i)t[i].bind()}unbind(){let t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=t.length;i!==r;++i)t[i].unbind()}},vn=class{constructor(t,i,r){this.path=i,this.parsedPath=r||vn.parseTrackName(i),this.node=vn.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new vn.Composite(t,i,r):new vn(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(vV,"")}static parseTrackName(t){let i=kV.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);let r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){let l=r.nodeName.substring(s+1);SV.indexOf(l)!==-1&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=l)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){let r=t.skeleton.getBoneByName(i);if(r!==void 0)return r}if(t.children){let r=function(l){for(let d=0;d<l.length;d++){let c=l[d];if(c.name===i||c.uuid===i)return c;let u=r(c.children);if(u)return u}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){let r=this.resolvedProperty;for(let s=0,l=r.length;s!==l;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){let r=this.resolvedProperty;for(let s=0,l=r.length;s!==l;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,l=r.length;s!==l;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){let r=this.resolvedProperty;for(let s=0,l=r.length;s!==l;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node,i=this.parsedPath,r=i.objectName,s=i.propertyName,l=i.propertyIndex;if(t||(t=vn.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let h=i.objectIndex;switch(r){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===h){h=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[r]}if(h!==void 0){if(t[h]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[h]}}let d=t[s];if(d===void 0){let h=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+h+"."+s+" but it wasn't found.",t);return}let c=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?c=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let u=this.BindingType.Direct;if(l!==void 0){if(s==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[l]!==void 0&&(l=t.morphTargetDictionary[l])}u=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=l}else d.fromArray!==void 0&&d.toArray!==void 0?(u=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(u=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=s;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};vn.Composite=AV,vn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},vn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},vn.prototype.GetterByBindingType=[vn.prototype._getValue_direct,vn.prototype._getValue_array,vn.prototype._getValue_arrayElement,vn.prototype._getValue_toArray],vn.prototype.SetterByBindingTypeAndVersioning=[[vn.prototype._setValue_direct,vn.prototype._setValue_direct_setNeedsUpdate,vn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_array,vn.prototype._setValue_array_setNeedsUpdate,vn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_arrayElement,vn.prototype._setValue_arrayElement_setNeedsUpdate,vn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vn.prototype._setValue_fromArray,vn.prototype._setValue_fromArray_setNeedsUpdate,vn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var CV=class{constructor(t,i,r=null,s=i.blendMode){this._mixer=t,this._clip=i,this._localRoot=r,this.blendMode=s;let l=i.tracks,d=l.length,c=new Array(d),u={endingStart:md,endingEnd:md};for(let h=0;h!==d;++h){let f=l[h].createInterpolant(null);c[h]=f,f.settings=u}this._interpolantSettings=u,this._interpolants=c,this._propertyBindings=new Array(d),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=xw,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,i){return this.loop=t,this.repetitions=i,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,i,r){if(t.fadeOut(i),this.fadeIn(i),r){let s=this._clip.duration,l=t._clip.duration,d=l/s,c=s/l;t.warp(1,d,i),this.warp(c,1,i)}return this}crossFadeTo(t,i,r){return t.crossFadeFrom(this,i,r)}stopFading(){let t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,i,r){let s=this._mixer,l=s.time,d=this.timeScale,c=this._timeScaleInterpolant;c===null&&(c=s._lendControlInterpolant(),this._timeScaleInterpolant=c);let u=c.parameterPositions,h=c.sampleValues;return u[0]=l,u[1]=l+r,h[0]=t/d,h[1]=i/d,this}stopWarping(){let t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,i,r,s){if(!this.enabled){this._updateWeight(t);return}let l=this._startTime;if(l!==null){let u=(t-l)*r;u<0||r===0?i=0:(this._startTime=null,i=r*u)}i*=this._updateTimeScale(t);let d=this._updateTime(i),c=this._updateWeight(t);if(c>0){let u=this._interpolants,h=this._propertyBindings;switch(this.blendMode){case dA:for(let f=0,m=u.length;f!==m;++f)u[f].evaluate(d),h[f].accumulateAdditive(c);break;case pv:default:for(let f=0,m=u.length;f!==m;++f)u[f].evaluate(d),h[f].accumulate(s,c)}}}_updateWeight(t){let i=0;if(this.enabled){i=this.weight;let r=this._weightInterpolant;if(r!==null){let s=r.evaluate(t)[0];i*=s,t>r.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=i,i}_updateTimeScale(t){let i=0;if(!this.paused){i=this.timeScale;let r=this._timeScaleInterpolant;if(r!==null){let s=r.evaluate(t)[0];i*=s,t>r.parameterPositions[1]&&(this.stopWarping(),i===0?this.paused=!0:this.timeScale=i)}}return this._effectiveTimeScale=i,i}_updateTime(t){let i=this._clip.duration,r=this.loop,s=this.time+t,l=this._loopCount,d=r===hv;if(t===0)return l===-1?s:d&&(l&1)===1?i-s:s;if(r===ww){l===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=i)s=i;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(l===-1&&(t>=0?(l=0,this._setEndings(!0,this.repetitions===0,d)):this._setEndings(this.repetitions===0,!0,d)),s>=i||s<0){let c=Math.floor(s/i);s-=i*c,l+=Math.abs(c);let u=this.repetitions-l;if(u<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=t>0?i:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(u===1){let h=t<0;this._setEndings(h,!h,d)}else this._setEndings(!1,!1,d);this._loopCount=l,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=s;if(d&&(l&1)===1)return i-s}return s}_setEndings(t,i,r){let s=this._interpolantSettings;r?(s.endingStart=bc,s.endingEnd=bc):(t?s.endingStart=this.zeroSlopeAtStart?bc:md:s.endingStart=Uu,i?s.endingEnd=this.zeroSlopeAtEnd?bc:md:s.endingEnd=Uu)}_scheduleFading(t,i,r){let s=this._mixer,l=s.time,d=this._weightInterpolant;d===null&&(d=s._lendControlInterpolant(),this._weightInterpolant=d);let c=d.parameterPositions,u=d.sampleValues;return c[0]=l,u[0]=i,c[1]=l+t,u[1]=r,this}},EV=new Float32Array(1),MV=class extends Cr{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,i){let r=t._localRoot||this._root,s=t._clip.tracks,l=s.length,d=t._propertyBindings,c=t._interpolants,u=r.uuid,h=this._bindingsByRootAndName,f=h[u];f===void 0&&(f={},h[u]=f);for(let m=0;m!==l;++m){let p=s[m],g=p.name,v=f[g];if(v!==void 0)++v.referenceCount,d[m]=v;else{if(v=d[m],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,u,g));continue}let w=i&&i._propertyBindings[m].binding.parsedPath;v=new gV(vn.create(r,g,w),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,u,g),d[m]=v}c[m].resultBuffer=v.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(t._cacheIndex===null){let r=(t._localRoot||this._root).uuid,s=t._clip.uuid,l=this._actionsByClip[s];this._bindAction(t,l&&l.knownActions[0]),this._addInactiveAction(t,s,r)}let i=t._propertyBindings;for(let r=0,s=i.length;r!==s;++r){let l=i[r];l.useCount++===0&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){let i=t._propertyBindings;for(let r=0,s=i.length;r!==s;++r){let l=i[r];--l.useCount===0&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;let t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){let i=t._cacheIndex;return i!==null&&i<this._nActiveActions}_addInactiveAction(t,i,r){let s=this._actions,l=this._actionsByClip,d=l[i];if(d===void 0)d={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,l[i]=d;else{let c=d.knownActions;t._byClipCacheIndex=c.length,c.push(t)}t._cacheIndex=s.length,s.push(t),d.actionByRoot[r]=t}_removeInactiveAction(t){let i=this._actions,r=i[i.length-1],s=t._cacheIndex;r._cacheIndex=s,i[s]=r,i.pop(),t._cacheIndex=null;let l=t._clip.uuid,d=this._actionsByClip,c=d[l],u=c.knownActions,h=u[u.length-1],f=t._byClipCacheIndex;h._byClipCacheIndex=f,u[f]=h,u.pop(),t._byClipCacheIndex=null;let m=c.actionByRoot,p=(t._localRoot||this._root).uuid;delete m[p],u.length===0&&delete d[l],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){let i=t._propertyBindings;for(let r=0,s=i.length;r!==s;++r){let l=i[r];--l.referenceCount===0&&this._removeInactiveBinding(l)}}_lendAction(t){let i=this._actions,r=t._cacheIndex,s=this._nActiveActions++,l=i[s];t._cacheIndex=s,i[s]=t,l._cacheIndex=r,i[r]=l}_takeBackAction(t){let i=this._actions,r=t._cacheIndex,s=--this._nActiveActions,l=i[s];t._cacheIndex=s,i[s]=t,l._cacheIndex=r,i[r]=l}_addInactiveBinding(t,i,r){let s=this._bindingsByRootAndName,l=this._bindings,d=s[i];d===void 0&&(d={},s[i]=d),d[r]=t,t._cacheIndex=l.length,l.push(t)}_removeInactiveBinding(t){let i=this._bindings,r=t.binding,s=r.rootNode.uuid,l=r.path,d=this._bindingsByRootAndName,c=d[s],u=i[i.length-1],h=t._cacheIndex;u._cacheIndex=h,i[h]=u,i.pop(),delete c[l],Object.keys(c).length===0&&delete d[s]}_lendBinding(t){let i=this._bindings,r=t._cacheIndex,s=this._nActiveBindings++,l=i[s];t._cacheIndex=s,i[s]=t,l._cacheIndex=r,i[r]=l}_takeBackBinding(t){let i=this._bindings,r=t._cacheIndex,s=--this._nActiveBindings,l=i[s];t._cacheIndex=s,i[s]=t,l._cacheIndex=r,i[r]=l}_lendControlInterpolant(){let t=this._controlInterpolants,i=this._nActiveControlInterpolants++,r=t[i];return r===void 0&&(r=new NP(new Float32Array(2),new Float32Array(2),1,EV),r.__cacheIndex=i,t[i]=r),r}_takeBackControlInterpolant(t){let i=this._controlInterpolants,r=t.__cacheIndex,s=--this._nActiveControlInterpolants,l=i[s];t.__cacheIndex=s,i[s]=t,l.__cacheIndex=r,i[r]=l}clipAction(t,i,r){let s=i||this._root,l=s.uuid,d=typeof t=="string"?ZA.findByName(s,t):t,c=d!==null?d.uuid:t,u=this._actionsByClip[c],h=null;if(r===void 0&&(d!==null?r=d.blendMode:r=pv),u!==void 0){let m=u.actionByRoot[l];if(m!==void 0&&m.blendMode===r)return m;h=u.knownActions[0],d===null&&(d=h._clip)}if(d===null)return null;let f=new CV(this,d,i,r);return this._bindAction(f,h),this._addInactiveAction(f,c,l),f}existingAction(t,i){let r=i||this._root,s=r.uuid,l=typeof t=="string"?ZA.findByName(r,t):t,d=l?l.uuid:t,c=this._actionsByClip[d];return c!==void 0&&c.actionByRoot[s]||null}stopAllAction(){let t=this._actions,i=this._nActiveActions;for(let r=i-1;r>=0;--r)t[r].stop();return this}update(t){t*=this.timeScale;let i=this._actions,r=this._nActiveActions,s=this.time+=t,l=Math.sign(t),d=this._accuIndex^=1;for(let h=0;h!==r;++h)i[h]._update(s,t,l,d);let c=this._bindings,u=this._nActiveBindings;for(let h=0;h!==u;++h)c[h].apply(d);return this}setTime(t){this.time=0;for(let i=0;i<this._actions.length;i++)this._actions[i].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){let i=this._actions,r=t.uuid,s=this._actionsByClip,l=s[r];if(l!==void 0){let d=l.knownActions;for(let c=0,u=d.length;c!==u;++c){let h=d[c];this._deactivateAction(h);let f=h._cacheIndex,m=i[i.length-1];h._cacheIndex=null,h._byClipCacheIndex=null,m._cacheIndex=f,i[f]=m,i.pop(),this._removeInactiveBindingsForAction(h)}delete s[r]}}uncacheRoot(t){let i=t.uuid,r=this._actionsByClip;for(let d in r){let c=r[d].actionByRoot,u=c[i];u!==void 0&&(this._deactivateAction(u),this._removeInactiveAction(u))}let s=this._bindingsByRootAndName,l=s[i];if(l!==void 0)for(let d in l){let c=l[d];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(t,i){let r=this.existingAction(t,i);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}},Ye=class{constructor(t){this.value=t}clone(){return new Ye(this.value.clone===void 0?this.value:this.value.clone())}},YP=class{constructor(t,i,r=0,s=1/0){this.ray=new Rf(t,i),this.near=r,this.far=s,this.camera=null,this.layers=new gA,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,i){this.ray.set(t,i)}setFromCamera(t,i){i.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(i.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):i.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(i.near+i.far)/(i.near-i.far)).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):console.error("THREE.Raycaster: Unsupported camera type: "+i.type)}intersectObject(t,i=!0,r=[]){return iC(t,this,r,i),r.sort(XP),r}intersectObjects(t,i=!0,r=[]){for(let s=0,l=t.length;s<l;s++)iC(t[s],this,r,i);return r.sort(XP),r}};function XP(t,i){return t.distance-i.distance}function iC(t,i,r,s){if(t.layers.test(i.layers)&&t.raycast(i,r),s===!0){let l=t.children;for(let d=0,c=l.length;d<c;d++)iC(l[d],i,r,!0)}}var KP=class{constructor(t=1,i=0,r=0){return this.radius=t,this.phi=i,this.theta=r,this}set(t,i,r){return this.radius=t,this.phi=i,this.theta=r,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,i,r){return this.radius=Math.sqrt(t*t+i*i+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,r),this.phi=Math.acos(Zn(i/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}},QP=new q,JP=class{constructor(t=new q(1/0,1/0),i=new q(-1/0,-1/0)){this.isBox2=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromPoints(t){this.makeEmpty();for(let i=0,r=t.length;i<r;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){let r=QP.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return QP.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}},e6=new N,tx=new N,Qs=class{constructor(t=new N,i=new N){this.start=t,this.end=i}set(t,i){return this.start.copy(t),this.end.copy(i),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,i){return this.delta(i).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,i){e6.subVectors(t,this.start),tx.subVectors(this.end,this.start);let r=tx.dot(tx),s=tx.dot(e6)/r;return i&&(s=Zn(s,0,1)),s}closestPointToPoint(t,i,r){let s=this.closestPointToPointParameter(t,i);return this.delta(r).multiplyScalar(s).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return new this.constructor().copy(this)}},t6=new N,TV=class extends ln{constructor(t,i){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="SpotLightHelper";let r=new Nt,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let d=0,c=1,u=32;d<u;d++,c++){let h=d/u*Math.PI*2,f=c/u*Math.PI*2;s.push(Math.cos(h),Math.sin(h),1,Math.cos(f),Math.sin(f),1)}r.setAttribute("position",new wt(s,3));let l=new Ec({fog:!1,toneMapped:!1});this.cone=new Mv(r,l),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);let t=this.light.distance?this.light.distance:1e3,i=t*Math.tan(this.light.angle);this.cone.scale.set(i,i,t),t6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},DV=class extends za{constructor(t,i,r){let s=new $A(i,4,2),l=new _v({wireframe:!0,fog:!1,toneMapped:!1});super(s,l),this.light=t,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},i6=new N,ix=new N,n6=new N,PV=class extends ln{constructor(t,i,r){super(),this.light=t,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",i===void 0&&(i=1);let s=new Nt;s.setAttribute("position",new wt([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));let l=new Ec({fog:!1,toneMapped:!1});this.lightPlane=new Vw(s,l),this.add(this.lightPlane),s=new Nt,s.setAttribute("position",new wt([0,0,0,0,0,1],3)),this.targetLine=new Vw(s,l),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),i6.setFromMatrixPosition(this.light.matrixWorld),ix.setFromMatrixPosition(this.light.target.matrixWorld),n6.subVectors(ix,i6),this.lightPlane.lookAt(ix),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ix),this.targetLine.scale.z=n6.length()}},nx=new N,Qn=new Gf,rx=class extends Mv{constructor(t){let i=new Nt,r=new Ec({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],l=[],d={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(v,w){u(v),u(w)}function u(v){s.push(0,0,0),l.push(0,0,0),d[v]===void 0&&(d[v]=[]),d[v].push(s.length/3-1)}i.setAttribute("position",new wt(s,3)),i.setAttribute("color",new wt(l,3)),super(i,r),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update();let h=new _t(16755200),f=new _t(16711680),m=new _t(43775),p=new _t(16777215),g=new _t(3355443);this.setColors(h,f,m,p,g)}setColors(t,i,r,s,l){let d=this.geometry.getAttribute("color");d.setXYZ(0,t.r,t.g,t.b),d.setXYZ(1,t.r,t.g,t.b),d.setXYZ(2,t.r,t.g,t.b),d.setXYZ(3,t.r,t.g,t.b),d.setXYZ(4,t.r,t.g,t.b),d.setXYZ(5,t.r,t.g,t.b),d.setXYZ(6,t.r,t.g,t.b),d.setXYZ(7,t.r,t.g,t.b),d.setXYZ(8,t.r,t.g,t.b),d.setXYZ(9,t.r,t.g,t.b),d.setXYZ(10,t.r,t.g,t.b),d.setXYZ(11,t.r,t.g,t.b),d.setXYZ(12,t.r,t.g,t.b),d.setXYZ(13,t.r,t.g,t.b),d.setXYZ(14,t.r,t.g,t.b),d.setXYZ(15,t.r,t.g,t.b),d.setXYZ(16,t.r,t.g,t.b),d.setXYZ(17,t.r,t.g,t.b),d.setXYZ(18,t.r,t.g,t.b),d.setXYZ(19,t.r,t.g,t.b),d.setXYZ(20,t.r,t.g,t.b),d.setXYZ(21,t.r,t.g,t.b),d.setXYZ(22,t.r,t.g,t.b),d.setXYZ(23,t.r,t.g,t.b),d.setXYZ(24,i.r,i.g,i.b),d.setXYZ(25,i.r,i.g,i.b),d.setXYZ(26,i.r,i.g,i.b),d.setXYZ(27,i.r,i.g,i.b),d.setXYZ(28,i.r,i.g,i.b),d.setXYZ(29,i.r,i.g,i.b),d.setXYZ(30,i.r,i.g,i.b),d.setXYZ(31,i.r,i.g,i.b),d.setXYZ(32,r.r,r.g,r.b),d.setXYZ(33,r.r,r.g,r.b),d.setXYZ(34,r.r,r.g,r.b),d.setXYZ(35,r.r,r.g,r.b),d.setXYZ(36,r.r,r.g,r.b),d.setXYZ(37,r.r,r.g,r.b),d.setXYZ(38,s.r,s.g,s.b),d.setXYZ(39,s.r,s.g,s.b),d.setXYZ(40,l.r,l.g,l.b),d.setXYZ(41,l.r,l.g,l.b),d.setXYZ(42,l.r,l.g,l.b),d.setXYZ(43,l.r,l.g,l.b),d.setXYZ(44,l.r,l.g,l.b),d.setXYZ(45,l.r,l.g,l.b),d.setXYZ(46,l.r,l.g,l.b),d.setXYZ(47,l.r,l.g,l.b),d.setXYZ(48,l.r,l.g,l.b),d.setXYZ(49,l.r,l.g,l.b),d.needsUpdate=!0}update(){let t=this.geometry,i=this.pointMap,r=1,s=1;Qn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),rr("c",i,t,Qn,0,0,-1),rr("t",i,t,Qn,0,0,1),rr("n1",i,t,Qn,-r,-s,-1),rr("n2",i,t,Qn,r,-s,-1),rr("n3",i,t,Qn,-r,s,-1),rr("n4",i,t,Qn,r,s,-1),rr("f1",i,t,Qn,-r,-s,1),rr("f2",i,t,Qn,r,-s,1),rr("f3",i,t,Qn,-r,s,1),rr("f4",i,t,Qn,r,s,1),rr("u1",i,t,Qn,r*.7,s*1.1,-1),rr("u2",i,t,Qn,-r*.7,s*1.1,-1),rr("u3",i,t,Qn,0,s*2,-1),rr("cf1",i,t,Qn,-r,0,1),rr("cf2",i,t,Qn,r,0,1),rr("cf3",i,t,Qn,0,-s,1),rr("cf4",i,t,Qn,0,s,1),rr("cn1",i,t,Qn,-r,0,-1),rr("cn2",i,t,Qn,r,0,-1),rr("cn3",i,t,Qn,0,-s,-1),rr("cn4",i,t,Qn,0,s,-1),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function rr(t,i,r,s,l,d,c){nx.set(l,d,c).unproject(s);let u=i[t];if(u!==void 0){let h=r.getAttribute("position");for(let f=0,m=u.length;f<m;f++)h.setXYZ(u[f],nx.x,nx.y,nx.z)}}var ax=class extends Mv{constructor(t,i=16776960){let r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],l=new Nt;l.setIndex(new Qt(r,1)),l.setAttribute("position",new wt(s,3)),super(l,new Ec({color:i,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){let i=this.box;i.isEmpty()||(i.getCenter(this.position),i.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}dispose(){this.geometry.dispose(),this.material.dispose()}},OV=class extends Mv{constructor(t=1){let i=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Nt;s.setAttribute("position",new wt(i,3)),s.setAttribute("color",new wt(r,3));let l=new Ec({vertexColors:!0,toneMapped:!1});super(s,l),this.type="AxesHelper"}setColors(t,i,r){let s=new _t,l=this.geometry.attributes.color.array;return s.set(t),s.toArray(l,0),s.toArray(l,3),s.set(i),s.toArray(l,6),s.toArray(l,9),s.set(r),s.toArray(l,12),s.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},_d=IV();function IV(){let t=new ArrayBuffer(4),i=new Float32Array(t),r=new Uint32Array(t),s=new Uint32Array(512),l=new Uint32Array(512);for(let h=0;h<256;++h){let f=h-127;f<-27?(s[h]=0,s[h|256]=32768,l[h]=24,l[h|256]=24):f<-14?(s[h]=1024>>-f-14,s[h|256]=1024>>-f-14|32768,l[h]=-f-1,l[h|256]=-f-1):f<=15?(s[h]=f+15<<10,s[h|256]=f+15<<10|32768,l[h]=13,l[h|256]=13):f<128?(s[h]=31744,s[h|256]=64512,l[h]=24,l[h|256]=24):(s[h]=31744,s[h|256]=64512,l[h]=13,l[h|256]=13)}let d=new Uint32Array(2048),c=new Uint32Array(64),u=new Uint32Array(64);for(let h=1;h<1024;++h){let f=h<<13,m=0;for(;!(f&8388608);)f<<=1,m-=8388608;f&=-8388609,m+=947912704,d[h]=f|m}for(let h=1024;h<2048;++h)d[h]=939524096+(h-1024<<13);for(let h=1;h<31;++h)c[h]=h<<23;c[31]=1199570944,c[32]=2147483648;for(let h=33;h<63;++h)c[h]=2147483648+(h-32<<23);c[63]=3347054592;for(let h=1;h<64;++h)h!==32&&(u[h]=1024);return{floatView:i,uint32View:r,baseTable:s,shiftTable:l,mantissaTable:d,exponentTable:c,offsetTable:u}}function RV(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Zn(t,-65504,65504),_d.floatView[0]=t;let i=_d.uint32View[0],r=i>>23&511;return _d.baseTable[r]+((i&8388607)>>_d.shiftTable[r])}function zV(t){let i=t>>10;return _d.uint32View[0]=_d.mantissaTable[_d.offsetTable[i]+(t&1023)]+_d.exponentTable[i],_d.floatView[0]}var LV=Object.freeze({__proto__:null,fromHalfFloat:zV,toHalfFloat:RV});typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:uc}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=uc);var Bv=".",nC=Symbol("target"),r6=Symbol("unsubscribe");function rC(t){return t instanceof Date||t instanceof Set||t instanceof Map||t instanceof WeakSet||t instanceof WeakMap||ArrayBuffer.isView(t)}function BV(t){return(typeof t=="object"?t===null:typeof t!="function")||t instanceof RegExp}var kl=Array.isArray;function aC(t){return typeof t=="symbol"}var FV={after:(t,i)=>kl(t)?t.slice(i.length):i===""?t:t.slice(i.length+1),concat:(t,i)=>kl(t)?(t=[...t],i&&t.push(i),t):i&&i.toString!==void 0?(t!==""&&(t+=Bv),aC(i)?t+i.toString():t+i):t,initial:t=>{if(kl(t))return t.slice(0,-1);if(t==="")return t;let i=t.lastIndexOf(Bv);return i===-1?"":t.slice(0,i)},last:t=>{if(kl(t))return t[t.length-1]||"";if(t==="")return t;let i=t.lastIndexOf(Bv);return i===-1?t:t.slice(i+1)},walk:(t,i)=>{if(kl(t))for(let r of t)i(r);else if(t!==""){let r=0,s=t.indexOf(Bv);if(s===-1)i(t);else for(;r<t.length;)s===-1&&(s=t.length),i(t.slice(r,s)),r=s+1,s=t.indexOf(Bv,r)}},get(t,i){return this.walk(i,r=>{t&&(t=t[r])}),t}},Js=FV;function NV(t){return typeof t=="object"&&typeof t.next=="function"}function jV(t,i,r,s,l){let d=t.next;if(i.name==="entries")t.next=function(){let c=d.call(this);return c.done===!1&&(c.value[0]=l(c.value[0],i,c.value[0],s),c.value[1]=l(c.value[1],i,c.value[0],s)),c};else if(i.name==="values"){let c=r[nC].keys();t.next=function(){let u=d.call(this);return u.done===!1&&(u.value=l(u.value,i,c.next().value,s)),u}}else t.next=function(){let c=d.call(this);return c.done===!1&&(c.value=l(c.value,i,c.value,s)),c};return t}function a6(t,i,r){return t.isUnsubscribed||i.ignoreSymbols&&aC(r)||i.ignoreUnderscores&&r.charAt(0)==="_"||"ignoreKeys"in i&&i.ignoreKeys.includes(r)}var UV=class{constructor(t){this._equals=t,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}_getDescriptorCache(){return this._descriptorCache===void 0&&(this._descriptorCache=new WeakMap),this._descriptorCache}_getProperties(t){let i=this._getDescriptorCache(),r=i.get(t);return r===void 0&&(r={},i.set(t,r)),r}_getOwnPropertyDescriptor(t,i){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(t,i);let r=this._getProperties(t),s=r[i];return s===void 0&&(s=Reflect.getOwnPropertyDescriptor(t,i),r[i]=s),s}getProxy(t,i,r,s){if(this.isUnsubscribed)return t;let l=t[s],d=l||t;this._pathCache.set(d,i);let c=this._proxyCache.get(d);return c===void 0&&(c=l===void 0?new Proxy(t,r):t,this._proxyCache.set(d,c)),c}getPath(t){return this.isUnsubscribed?void 0:this._pathCache.get(t)}isDetached(t,i){return!Object.is(t,Js.get(i,this.getPath(t)))}defineProperty(t,i,r){return Reflect.defineProperty(t,i,r)?(this.isUnsubscribed||(this._getProperties(t)[i]=r),!0):!1}setProperty(t,i,r,s,l){if(!this._equals(l,r)||!(i in t)){let d=this._getOwnPropertyDescriptor(t,i);return d!==void 0&&"set"in d?Reflect.set(t,i,r,s):Reflect.set(t,i,r)}return!0}deleteProperty(t,i,r){if(Reflect.deleteProperty(t,i)){if(!this.isUnsubscribed){let s=this._getDescriptorCache().get(t);s&&(delete s[i],this._pathCache.delete(r))}return!0}return!1}isSameDescriptor(t,i,r){let s=this._getOwnPropertyDescriptor(i,r);return t!==void 0&&s!==void 0&&Object.is(t.value,s.value)&&(t.writable||!1)===(s.writable||!1)&&(t.enumerable||!1)===(s.enumerable||!1)&&(t.configurable||!1)===(s.configurable||!1)&&t.get===s.get&&t.set===s.set}isGetInvariant(t,i){let r=this._getOwnPropertyDescriptor(t,i);return r!==void 0&&r.configurable!==!0&&r.writable!==!0}unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}};function sC(t){return toString.call(t)==="[object Object]"}function sx(){return!0}function ip(t,i){return t.length!==i.length||t.some((r,s)=>i[s]!==r)}var s6=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),VV=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),o6={push:sx,pop:sx,shift:sx,unshift:sx,copyWithin:ip,reverse:ip,sort:ip,splice:ip,flat:ip,fill:ip},HV=new Set([...s6,...VV,...Object.keys(o6)]);function ox(t,i){if(t.size!==i.size)return!0;for(let r of t)if(!i.has(r))return!0;return!1}var l6=["keys","values","entries"],d6=new Set(["has","toString"]),c6={add:ox,clear:ox,delete:ox,forEach:ox},GV=new Set([...d6,...Object.keys(c6),...l6]);function lx(t,i){if(t.size!==i.size)return!0;let r;for(let[s,l]of t)if(r=i.get(s),r!==l||r===void 0&&!i.has(s))return!0;return!1}var WV=new Set([...d6,"get"]),u6={set:lx,clear:lx,delete:lx,forEach:lx},qV=new Set([...WV,...Object.keys(u6),...l6]),Dc=class{constructor(t,i,r,s){this._path=i,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=s,this._changes=s?[]:null,this.clone=i===void 0?t:this._shallowClone(t)}static isHandledMethod(t){return s6.has(t)}_shallowClone(t){let i=t;if(sC(t))i=Z({},t);else if(kl(t))i=[...t];else if(t instanceof Date)i=new Date(t);else if(t instanceof Set)i=new Set([...t].map(r=>this._shallowClone(r)));else if(t instanceof Map){i=new Map;for(let[r,s]of t.entries())i.set(r,this._shallowClone(s))}return this._clonedCache.add(i),i}preferredThisArg(t,i,r,s){return t?(kl(s)?this._onIsChanged=o6[i]:s instanceof Set?this._onIsChanged=c6[i]:s instanceof Map&&(this._onIsChanged=u6[i]),s):r}update(t,i,r){let s=Js.after(t,this._path);if(i!=="length"){let l=this.clone;Js.walk(s,d=>{l&&l[d]&&(this._clonedCache.has(l[d])||(l[d]=this._shallowClone(l[d])),l=l[d])}),this._hasOnValidate&&this._changes.push({path:s,property:i,previous:r}),l&&l[i]&&(l[i]=r)}this._isChanged=!0}undo(t){let i;for(let r=this._changes.length-1;r!==-1;r--)i=this._changes[r],Js.get(t,i.path)[i.property]=i.previous}isChanged(t){return this._onIsChanged===void 0?this._isChanged:this._onIsChanged(this.clone,t)}},h6=class extends Dc{static isHandledMethod(t){return HV.has(t)}},$V=class extends Dc{undo(t){t.setTime(this.clone.getTime())}isChanged(t,i){return!i(this.clone.valueOf(),t.valueOf())}},f6=class extends Dc{static isHandledMethod(t){return GV.has(t)}undo(t){for(let i of this.clone)t.add(i);for(let i of t)this.clone.has(i)||t.delete(i)}},p6=class extends Dc{static isHandledMethod(t){return qV.has(t)}undo(t){for(let[i,r]of this.clone.entries())t.set(i,r);for(let i of t.keys())this.clone.has(i)||t.delete(i)}},ZV=class extends Dc{constructor(t,i,r,s){super(void 0,i,r,s),this._arg1=r[0],this._weakValue=t.has(this._arg1)}isChanged(t){return this._weakValue!==t.has(this._arg1)}undo(t){this._weakValue&&!t.has(this._arg1)?t.add(this._arg1):t.delete(this._arg1)}},YV=class extends Dc{constructor(t,i,r,s){super(void 0,i,r,s),this._weakKey=r[0],this._weakHas=t.has(this._weakKey),this._weakValue=t.get(this._weakKey)}isChanged(t){return this._weakValue!==t.get(this._weakKey)}undo(t){let i=t.has(this._weakKey);this._weakHas&&!i?t.set(this._weakKey,this._weakValue):!this._weakHas&&i?t.delete(this._weakKey):this._weakValue!==t.get(this._weakKey)&&t.set(this._weakKey,this._weakValue)}},np=class{constructor(t){this._stack=[],this._hasOnValidate=t}static isHandledType(t){return sC(t)||kl(t)||rC(t)}static isHandledMethod(t,i){return sC(t)?Dc.isHandledMethod(i):kl(t)?h6.isHandledMethod(i):t instanceof Set?f6.isHandledMethod(i):t instanceof Map?p6.isHandledMethod(i):rC(t)}get isCloning(){return this._stack.length>0}start(t,i,r){let s=Dc;kl(t)?s=h6:t instanceof Date?s=$V:t instanceof Set?s=f6:t instanceof Map?s=p6:t instanceof WeakSet?s=ZV:t instanceof WeakMap&&(s=YV),this._stack.push(new s(t,i,r,this._hasOnValidate))}update(t,i,r){this._stack[this._stack.length-1].update(t,i,r)}preferredThisArg(t,i,r){let{name:s}=t,l=np.isHandledMethod(r,s);return this._stack[this._stack.length-1].preferredThisArg(l,s,i,r)}isChanged(t,i,r){return this._stack[this._stack.length-1].isChanged(t,i,r)}undo(t){this._previousClone!==void 0&&this._previousClone.undo(t)}stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}},XV={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},oC=(t,i,r={})=>{r=Z(Z({},XV),r);let s=Symbol("ProxyTarget"),{equals:l,isShallow:d,ignoreDetached:c,details:u}=r,h=new UV(l),f=typeof r.onValidate=="function",m=new np(f),p=(A,C,M,D,P)=>!f||m.isCloning||r.onValidate(Js.concat(h.getPath(A),C),M,D,P)===!0,g=(A,C,M,D)=>{!a6(h,r,C)&&!(c&&h.isDetached(A,t))&&v(h.getPath(A),C,M,D)},v=(A,C,M,D,P)=>{m.isCloning?m.update(A,C,D):i(Js.concat(A,C),M,D,P)},w=A=>A&&(A[s]||A),x=(A,C,M,D)=>BV(A)||M==="constructor"||d&&!np.isHandledMethod(C,M)||a6(h,r,M)||h.isGetInvariant(C,M)||c&&h.isDetached(C,t)?A:(D===void 0&&(D=h.getPath(C)),h.getProxy(A,Js.concat(D,M),_,s)),_={get(A,C,M){if(aC(C)){if(C===s||C===nC)return A;if(C===r6&&!h.isUnsubscribed&&h.getPath(A).length===0)return h.unsubscribe(),A}let D=rC(A)?Reflect.get(A,C):Reflect.get(A,C,M);return x(D,A,C)},set(A,C,M,D){M=w(M);let P=A[s]||A,T=P[C];if(l(T,M)&&C in A)return!0;let O=p(A,C,M,T);return O&&h.setProperty(P,C,M,D,T)?(g(A,C,A[C],T),!0):!O},defineProperty(A,C,M){if(!h.isSameDescriptor(M,A,C)){let D=A[C];p(A,C,M.value,D)&&h.defineProperty(A,C,M,D)&&g(A,C,M.value,D)}return!0},deleteProperty(A,C){if(!Reflect.has(A,C))return!0;let M=Reflect.get(A,C),D=p(A,C,void 0,M);return D&&h.deleteProperty(A,C,M)?(g(A,C,void 0,M),!0):!D},apply(A,C,M){let D=C[s]||C;if(h.isUnsubscribed)return Reflect.apply(A,D,M);if((u===!1||u!==!0&&!u.includes(A.name))&&np.isHandledType(D)){let P=Js.initial(h.getPath(A)),T=np.isHandledMethod(D,A.name);m.start(D,P,M);let O=Reflect.apply(A,m.preferredThisArg(A,C,D),T?M.map(B=>w(B)):M),z=m.isChanged(D,l),L=m.stop();if(np.isHandledType(O)&&T&&(C instanceof Map&&A.name==="get"&&(P=Js.concat(P,M[0])),O=h.getProxy(O,P,_)),z){let B={name:A.name,args:M,result:O},j=m.isCloning?Js.initial(P):P,V=m.isCloning?Js.last(P):"";p(Js.get(t,j),V,D,L,B)?v(j,V,D,L,B):m.undo(D)}return(C instanceof Map||C instanceof Set)&&NV(O)?jV(O,A,C,P,x):O}return Reflect.apply(A,C,M)}},k=h.getProxy(t,r.pathAsArray?[]:"",_);return i=i.bind(k),f&&(r.onValidate=r.onValidate.bind(k)),k};oC.target=t=>t&&t[nC]||t,oC.unsubscribe=t=>t[r6]||t;var m6=oC,KV=typeof global=="object"&&global&&global.Object===Object&&global,g6=KV,QV=typeof self=="object"&&self&&self.Object===Object&&self,JV=g6||QV||Function("return this")(),zo=JV,eH=zo.Symbol,eo=eH,v6=Object.prototype,tH=v6.hasOwnProperty,iH=v6.toString,Fv=eo?eo.toStringTag:void 0;function nH(t){var i=tH.call(t,Fv),r=t[Fv];try{t[Fv]=void 0;var s=!0}catch(d){}var l=iH.call(t);return s&&(i?t[Fv]=r:delete t[Fv]),l}var rH=nH,aH=Object.prototype,sH=aH.toString;function oH(t){return sH.call(t)}var lH=oH,dH="[object Null]",cH="[object Undefined]",y6=eo?eo.toStringTag:void 0;function uH(t){return t==null?t===void 0?cH:dH:y6&&y6 in Object(t)?rH(t):lH(t)}var Ku=uH;function hH(t){return t!=null&&typeof t=="object"}var kd=hH,fH="[object Symbol]";function pH(t){return typeof t=="symbol"||kd(t)&&Ku(t)==fH}var dx=pH;function mH(t,i){for(var r=-1,s=t==null?0:t.length,l=Array(s);++r<s;)l[r]=i(t[r],r,t);return l}var b6=mH,gH=Array.isArray,Sl=gH,vH=1/0,w6=eo?eo.prototype:void 0,x6=w6?w6.toString:void 0;function _6(t){if(typeof t=="string")return t;if(Sl(t))return b6(t,_6)+"";if(dx(t))return x6?x6.call(t):"";var i=t+"";return i=="0"&&1/t==-vH?"-0":i}var yH=_6,bH=/\s/;function wH(t){for(var i=t.length;i--&&bH.test(t.charAt(i)););return i}var xH=wH,_H=/^\s+/;function kH(t){return t&&t.slice(0,xH(t)+1).replace(_H,"")}var SH=kH;function AH(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}var Lo=AH,k6=0/0,CH=/^[-+]0x[0-9a-f]+$/i,EH=/^0b[01]+$/i,MH=/^0o[0-7]+$/i,TH=parseInt;function DH(t){if(typeof t=="number")return t;if(dx(t))return k6;if(Lo(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Lo(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=SH(t);var r=EH.test(t);return r||MH.test(t)?TH(t.slice(2),r?2:8):CH.test(t)?k6:+t}var S6=DH;function PH(t){return t}var OH=PH,IH="[object AsyncFunction]",RH="[object Function]",zH="[object GeneratorFunction]",LH="[object Proxy]";function BH(t){if(!Lo(t))return!1;var i=Ku(t);return i==RH||i==zH||i==IH||i==LH}var A6=BH,FH=zo["__core-js_shared__"],lC=FH,C6=function(){var t=/[^.]+$/.exec(lC&&lC.keys&&lC.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function NH(t){return!!C6&&C6 in t}var jH=NH,UH=Function.prototype,VH=UH.toString;function HH(t){if(t!=null){try{return VH.call(t)}catch(i){}try{return t+""}catch(i){}}return""}var Qu=HH,GH=/[\\^$.*+?()[\]{}|]/g,WH=/^\[object .+?Constructor\]$/,qH=Function.prototype,$H=Object.prototype,ZH=qH.toString,YH=$H.hasOwnProperty,XH=RegExp("^"+ZH.call(YH).replace(GH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function KH(t){if(!Lo(t)||jH(t))return!1;var i=A6(t)?XH:WH;return i.test(Qu(t))}var QH=KH;function JH(t,i){return t==null?void 0:t[i]}var eG=JH;function tG(t,i){var r=eG(t,i);return QH(r)?r:void 0}var Ju=tG,iG=Ju(zo,"WeakMap"),dC=iG,E6=Object.create,nG=function(){function t(){}return function(i){if(!Lo(i))return{};if(E6)return E6(i);t.prototype=i;var r=new t;return t.prototype=void 0,r}}(),rG=nG;function aG(t,i,r){switch(r.length){case 0:return t.call(i);case 1:return t.call(i,r[0]);case 2:return t.call(i,r[0],r[1]);case 3:return t.call(i,r[0],r[1],r[2])}return t.apply(i,r)}var sG=aG;function oG(t,i){var r=-1,s=t.length;for(i||(i=Array(s));++r<s;)i[r]=t[r];return i}var lG=oG,dG=800,cG=16,uG=Date.now;function hG(t){var i=0,r=0;return function(){var s=uG(),l=cG-(s-r);if(r=s,l>0){if(++i>=dG)return arguments[0]}else i=0;return t.apply(void 0,arguments)}}var fG=hG;function pG(t){return function(){return t}}var mG=pG,gG=function(){try{var t=Ju(Object,"defineProperty");return t({},"",{}),t}catch(i){}}(),cx=gG,vG=cx?function(t,i){return cx(t,"toString",{configurable:!0,enumerable:!1,value:mG(i),writable:!0})}:OH,yG=vG,bG=fG(yG),wG=bG;function xG(t,i){for(var r=-1,s=t==null?0:t.length;++r<s&&i(t[r],r,t)!==!1;);return t}var _G=xG,kG=9007199254740991,SG=/^(?:0|[1-9]\d*)$/;function AG(t,i){var r=typeof t;return i=i!=null?i:kG,!!i&&(r=="number"||r!="symbol"&&SG.test(t))&&t>-1&&t%1==0&&t<i}var cC=AG;function CG(t,i,r){i=="__proto__"&&cx?cx(t,i,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[i]=r}var M6=CG;function EG(t,i){return t===i||t!==t&&i!==i}var uC=EG,MG=Object.prototype,TG=MG.hasOwnProperty;function DG(t,i,r){var s=t[i];(!(TG.call(t,i)&&uC(s,r))||r===void 0&&!(i in t))&&M6(t,i,r)}var hC=DG;function PG(t,i,r,s){var l=!r;r||(r={});for(var d=-1,c=i.length;++d<c;){var u=i[d],h=s?s(r[u],t[u],u,r,t):void 0;h===void 0&&(h=t[u]),l?M6(r,u,h):hC(r,u,h)}return r}var Nv=PG,T6=Math.max;function OG(t,i,r){return i=T6(i===void 0?t.length-1:i,0),function(){for(var s=arguments,l=-1,d=T6(s.length-i,0),c=Array(d);++l<d;)c[l]=s[i+l];l=-1;for(var u=Array(i+1);++l<i;)u[l]=s[l];return u[i]=r(c),sG(t,this,u)}}var IG=OG,RG=9007199254740991;function zG(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=RG}var fC=zG;function LG(t){return t!=null&&fC(t.length)&&!A6(t)}var D6=LG,BG=Object.prototype;function FG(t){var i=t&&t.constructor,r=typeof i=="function"&&i.prototype||BG;return t===r}var pC=FG;function NG(t,i){for(var r=-1,s=Array(t);++r<t;)s[r]=i(r);return s}var jG=NG,UG="[object Arguments]";function VG(t){return kd(t)&&Ku(t)==UG}var P6=VG,O6=Object.prototype,HG=O6.hasOwnProperty,GG=O6.propertyIsEnumerable,WG=P6(function(){return arguments}())?P6:function(t){return kd(t)&&HG.call(t,"callee")&&!GG.call(t,"callee")},mC=WG;function qG(){return!1}var $G=qG,I6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,R6=I6&&typeof module=="object"&&module&&!module.nodeType&&module,ZG=R6&&R6.exports===I6,z6=ZG?zo.Buffer:void 0,YG=z6?z6.isBuffer:void 0,XG=YG||$G,ux=XG,KG="[object Arguments]",QG="[object Array]",JG="[object Boolean]",eW="[object Date]",tW="[object Error]",iW="[object Function]",nW="[object Map]",rW="[object Number]",aW="[object Object]",sW="[object RegExp]",oW="[object Set]",lW="[object String]",dW="[object WeakMap]",cW="[object ArrayBuffer]",uW="[object DataView]",hW="[object Float32Array]",fW="[object Float64Array]",pW="[object Int8Array]",mW="[object Int16Array]",gW="[object Int32Array]",vW="[object Uint8Array]",yW="[object Uint8ClampedArray]",bW="[object Uint16Array]",wW="[object Uint32Array]",Ln={};Ln[hW]=Ln[fW]=Ln[pW]=Ln[mW]=Ln[gW]=Ln[vW]=Ln[yW]=Ln[bW]=Ln[wW]=!0,Ln[KG]=Ln[QG]=Ln[cW]=Ln[JG]=Ln[uW]=Ln[eW]=Ln[tW]=Ln[iW]=Ln[nW]=Ln[rW]=Ln[aW]=Ln[sW]=Ln[oW]=Ln[lW]=Ln[dW]=!1;function xW(t){return kd(t)&&fC(t.length)&&!!Ln[Ku(t)]}var _W=xW;function kW(t){return function(i){return t(i)}}var gC=kW,L6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,jv=L6&&typeof module=="object"&&module&&!module.nodeType&&module,SW=jv&&jv.exports===L6,vC=SW&&g6.process,AW=function(){try{var t=jv&&jv.require&&jv.require("util").types;return t||vC&&vC.binding&&vC.binding("util")}catch(i){}}(),rp=AW,B6=rp&&rp.isTypedArray,CW=B6?gC(B6):_W,F6=CW,EW=Object.prototype,MW=EW.hasOwnProperty;function TW(t,i){var r=Sl(t),s=!r&&mC(t),l=!r&&!s&&ux(t),d=!r&&!s&&!l&&F6(t),c=r||s||l||d,u=c?jG(t.length,String):[],h=u.length;for(var f in t)(i||MW.call(t,f))&&!(c&&(f=="length"||l&&(f=="offset"||f=="parent")||d&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||cC(f,h)))&&u.push(f);return u}var N6=TW;function DW(t,i){return function(r){return t(i(r))}}var j6=DW,PW=j6(Object.keys,Object),OW=PW,IW=Object.prototype,RW=IW.hasOwnProperty;function zW(t){if(!pC(t))return OW(t);var i=[];for(var r in Object(t))RW.call(t,r)&&r!="constructor"&&i.push(r);return i}var LW=zW;function BW(t){return D6(t)?N6(t):LW(t)}var yC=BW;function FW(t){var i=[];if(t!=null)for(var r in Object(t))i.push(r);return i}var NW=FW,jW=Object.prototype,UW=jW.hasOwnProperty;function VW(t){if(!Lo(t))return NW(t);var i=pC(t),r=[];for(var s in t)s=="constructor"&&(i||!UW.call(t,s))||r.push(s);return r}var HW=VW;function GW(t){return D6(t)?N6(t,!0):HW(t)}var eh=GW,WW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qW=/^\w*$/;function $W(t,i){if(Sl(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||dx(t)?!0:qW.test(t)||!WW.test(t)||i!=null&&t in Object(i)}var ZW=$W,YW=Ju(Object,"create"),Uv=YW;function XW(){this.__data__=Uv?Uv(null):{},this.size=0}var KW=XW;function QW(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}var JW=QW,eq="__lodash_hash_undefined__",tq=Object.prototype,iq=tq.hasOwnProperty;function nq(t){var i=this.__data__;if(Uv){var r=i[t];return r===eq?void 0:r}return iq.call(i,t)?i[t]:void 0}var rq=nq,aq=Object.prototype,sq=aq.hasOwnProperty;function oq(t){var i=this.__data__;return Uv?i[t]!==void 0:sq.call(i,t)}var lq=oq,dq="__lodash_hash_undefined__";function cq(t,i){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Uv&&i===void 0?dq:i,this}var uq=cq;function ap(t){var i=-1,r=t==null?0:t.length;for(this.clear();++i<r;){var s=t[i];this.set(s[0],s[1])}}ap.prototype.clear=KW,ap.prototype.delete=JW,ap.prototype.get=rq,ap.prototype.has=lq,ap.prototype.set=uq;var U6=ap;function hq(){this.__data__=[],this.size=0}var fq=hq;function pq(t,i){for(var r=t.length;r--;)if(uC(t[r][0],i))return r;return-1}var hx=pq,mq=Array.prototype,gq=mq.splice;function vq(t){var i=this.__data__,r=hx(i,t);if(r<0)return!1;var s=i.length-1;return r==s?i.pop():gq.call(i,r,1),--this.size,!0}var yq=vq;function bq(t){var i=this.__data__,r=hx(i,t);return r<0?void 0:i[r][1]}var wq=bq;function xq(t){return hx(this.__data__,t)>-1}var _q=xq;function kq(t,i){var r=this.__data__,s=hx(r,t);return s<0?(++this.size,r.push([t,i])):r[s][1]=i,this}var Sq=kq;function sp(t){var i=-1,r=t==null?0:t.length;for(this.clear();++i<r;){var s=t[i];this.set(s[0],s[1])}}sp.prototype.clear=fq,sp.prototype.delete=yq,sp.prototype.get=wq,sp.prototype.has=_q,sp.prototype.set=Sq;var fx=sp,Aq=Ju(zo,"Map"),Vv=Aq;function Cq(){this.size=0,this.__data__={hash:new U6,map:new(Vv||fx),string:new U6}}var Eq=Cq;function Mq(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}var Tq=Mq;function Dq(t,i){var r=t.__data__;return Tq(i)?r[typeof i=="string"?"string":"hash"]:r.map}var px=Dq;function Pq(t){var i=px(this,t).delete(t);return this.size-=i?1:0,i}var Oq=Pq;function Iq(t){return px(this,t).get(t)}var Rq=Iq;function zq(t){return px(this,t).has(t)}var Lq=zq;function Bq(t,i){var r=px(this,t),s=r.size;return r.set(t,i),this.size+=r.size==s?0:1,this}var Fq=Bq;function op(t){var i=-1,r=t==null?0:t.length;for(this.clear();++i<r;){var s=t[i];this.set(s[0],s[1])}}op.prototype.clear=Eq,op.prototype.delete=Oq,op.prototype.get=Rq,op.prototype.has=Lq,op.prototype.set=Fq;var mx=op,Nq="Expected a function";function bC(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new TypeError(Nq);var r=function(){var s=arguments,l=i?i.apply(this,s):s[0],d=r.cache;if(d.has(l))return d.get(l);var c=t.apply(this,s);return r.cache=d.set(l,c)||d,c};return r.cache=new(bC.Cache||mx),r}bC.Cache=mx;var jq=bC,Uq=500;function Vq(t){var i=jq(t,function(s){return r.size===Uq&&r.clear(),s}),r=i.cache;return i}var Hq=Vq,Gq=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wq=/\\(\\)?/g,qq=Hq(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Gq,function(r,s,l,d){i.push(l?d.replace(Wq,"$1"):s||r)}),i}),$q=qq;function Zq(t){return t==null?"":yH(t)}var Yq=Zq;function Xq(t,i){return Sl(t)?t:ZW(t,i)?[t]:$q(Yq(t))}var lp=Xq,Kq=1/0;function Qq(t){if(typeof t=="string"||dx(t))return t;var i=t+"";return i=="0"&&1/t==-Kq?"-0":i}var gx=Qq;function Jq(t,i){i=lp(i,t);for(var r=0,s=i.length;t!=null&&r<s;)t=t[gx(i[r++])];return r&&r==s?t:void 0}var V6=Jq;function e$(t,i){for(var r=-1,s=i.length,l=t.length;++r<s;)t[l+r]=i[r];return t}var wC=e$,H6=eo?eo.isConcatSpreadable:void 0;function t$(t){return Sl(t)||mC(t)||!!(H6&&t&&t[H6])}var i$=t$;function G6(t,i,r,s,l){var d=-1,c=t.length;for(r||(r=i$),l||(l=[]);++d<c;){var u=t[d];i>0&&r(u)?i>1?G6(u,i-1,r,s,l):wC(l,u):s||(l[l.length]=u)}return l}var n$=G6;function r$(t){var i=t==null?0:t.length;return i?n$(t,1):[]}var a$=r$;function s$(t){return wG(IG(t,void 0,a$),t+"")}var W6=s$,o$=j6(Object.getPrototypeOf,Object),xC=o$,l$="[object Object]",d$=Function.prototype,c$=Object.prototype,q6=d$.toString,u$=c$.hasOwnProperty,h$=q6.call(Object);function f$(t){if(!kd(t)||Ku(t)!=l$)return!1;var i=xC(t);if(i===null)return!0;var r=u$.call(i,"constructor")&&i.constructor;return typeof r=="function"&&r instanceof r&&q6.call(r)==h$}var p$=f$;function m$(t,i,r){var s=-1,l=t.length;i<0&&(i=-i>l?0:l+i),r=r>l?l:r,r<0&&(r+=l),l=i>r?0:r-i>>>0,i>>>=0;for(var d=Array(l);++s<l;)d[s]=t[s+i];return d}var g$=m$;function v$(){this.__data__=new fx,this.size=0}var y$=v$;function b$(t){var i=this.__data__,r=i.delete(t);return this.size=i.size,r}var w$=b$;function x$(t){return this.__data__.get(t)}var _$=x$;function k$(t){return this.__data__.has(t)}var S$=k$,A$=200;function C$(t,i){var r=this.__data__;if(r instanceof fx){var s=r.__data__;if(!Vv||s.length<A$-1)return s.push([t,i]),this.size=++r.size,this;r=this.__data__=new mx(s)}return r.set(t,i),this.size=r.size,this}var E$=C$;function dp(t){var i=this.__data__=new fx(t);this.size=i.size}dp.prototype.clear=y$,dp.prototype.delete=w$,dp.prototype.get=_$,dp.prototype.has=S$,dp.prototype.set=E$;var vx=dp;function M$(t,i){return t&&Nv(i,yC(i),t)}var T$=M$;function D$(t,i){return t&&Nv(i,eh(i),t)}var P$=D$,$6=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Z6=$6&&typeof module=="object"&&module&&!module.nodeType&&module,O$=Z6&&Z6.exports===$6,Y6=O$?zo.Buffer:void 0,X6=Y6?Y6.allocUnsafe:void 0;function I$(t,i){if(i)return t.slice();var r=t.length,s=X6?X6(r):new t.constructor(r);return t.copy(s),s}var R$=I$;function z$(t,i){for(var r=-1,s=t==null?0:t.length,l=0,d=[];++r<s;){var c=t[r];i(c,r,t)&&(d[l++]=c)}return d}var L$=z$;function B$(){return[]}var K6=B$,F$=Object.prototype,N$=F$.propertyIsEnumerable,Q6=Object.getOwnPropertySymbols,j$=Q6?function(t){return t==null?[]:(t=Object(t),L$(Q6(t),function(i){return N$.call(t,i)}))}:K6,_C=j$;function U$(t,i){return Nv(t,_C(t),i)}var V$=U$,H$=Object.getOwnPropertySymbols,G$=H$?function(t){for(var i=[];t;)wC(i,_C(t)),t=xC(t);return i}:K6,J6=G$;function W$(t,i){return Nv(t,J6(t),i)}var q$=W$;function $$(t,i,r){var s=i(t);return Sl(t)?s:wC(s,r(t))}var eO=$$;function Z$(t){return eO(t,yC,_C)}var kC=Z$;function Y$(t){return eO(t,eh,J6)}var tO=Y$,X$=Ju(zo,"DataView"),SC=X$,K$=Ju(zo,"Promise"),AC=K$,Q$=Ju(zo,"Set"),CC=Q$,iO="[object Map]",J$="[object Object]",nO="[object Promise]",rO="[object Set]",aO="[object WeakMap]",sO="[object DataView]",eZ=Qu(SC),tZ=Qu(Vv),iZ=Qu(AC),nZ=Qu(CC),rZ=Qu(dC),th=Ku;(SC&&th(new SC(new ArrayBuffer(1)))!=sO||Vv&&th(new Vv)!=iO||AC&&th(AC.resolve())!=nO||CC&&th(new CC)!=rO||dC&&th(new dC)!=aO)&&(th=function(t){var i=Ku(t),r=i==J$?t.constructor:void 0,s=r?Qu(r):"";if(s)switch(s){case eZ:return sO;case tZ:return iO;case iZ:return nO;case nZ:return rO;case rZ:return aO}return i});var Hv=th,aZ=Object.prototype,sZ=aZ.hasOwnProperty;function oZ(t){var i=t.length,r=new t.constructor(i);return i&&typeof t[0]=="string"&&sZ.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var lZ=oZ,dZ=zo.Uint8Array,yx=dZ;function cZ(t){var i=new t.constructor(t.byteLength);return new yx(i).set(new yx(t)),i}var EC=cZ;function uZ(t,i){var r=i?EC(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var hZ=uZ,fZ=/\w*$/;function pZ(t){var i=new t.constructor(t.source,fZ.exec(t));return i.lastIndex=t.lastIndex,i}var mZ=pZ,oO=eo?eo.prototype:void 0,lO=oO?oO.valueOf:void 0;function gZ(t){return lO?Object(lO.call(t)):{}}var vZ=gZ;function yZ(t,i){var r=i?EC(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var bZ=yZ,wZ="[object Boolean]",xZ="[object Date]",_Z="[object Map]",kZ="[object Number]",SZ="[object RegExp]",AZ="[object Set]",CZ="[object String]",EZ="[object Symbol]",MZ="[object ArrayBuffer]",TZ="[object DataView]",DZ="[object Float32Array]",PZ="[object Float64Array]",OZ="[object Int8Array]",IZ="[object Int16Array]",RZ="[object Int32Array]",zZ="[object Uint8Array]",LZ="[object Uint8ClampedArray]",BZ="[object Uint16Array]",FZ="[object Uint32Array]";function NZ(t,i,r){var s=t.constructor;switch(i){case MZ:return EC(t);case wZ:case xZ:return new s(+t);case TZ:return hZ(t,r);case DZ:case PZ:case OZ:case IZ:case RZ:case zZ:case LZ:case BZ:case FZ:return bZ(t,r);case _Z:return new s;case kZ:case CZ:return new s(t);case SZ:return mZ(t);case AZ:return new s;case EZ:return vZ(t)}}var jZ=NZ;function UZ(t){return typeof t.constructor=="function"&&!pC(t)?rG(xC(t)):{}}var VZ=UZ,HZ="[object Map]";function GZ(t){return kd(t)&&Hv(t)==HZ}var WZ=GZ,dO=rp&&rp.isMap,qZ=dO?gC(dO):WZ,$Z=qZ,ZZ="[object Set]";function YZ(t){return kd(t)&&Hv(t)==ZZ}var XZ=YZ,cO=rp&&rp.isSet,KZ=cO?gC(cO):XZ,QZ=KZ,JZ=1,eY=2,tY=4,uO="[object Arguments]",iY="[object Array]",nY="[object Boolean]",rY="[object Date]",aY="[object Error]",hO="[object Function]",sY="[object GeneratorFunction]",oY="[object Map]",lY="[object Number]",fO="[object Object]",dY="[object RegExp]",cY="[object Set]",uY="[object String]",hY="[object Symbol]",fY="[object WeakMap]",pY="[object ArrayBuffer]",mY="[object DataView]",gY="[object Float32Array]",vY="[object Float64Array]",yY="[object Int8Array]",bY="[object Int16Array]",wY="[object Int32Array]",xY="[object Uint8Array]",_Y="[object Uint8ClampedArray]",kY="[object Uint16Array]",SY="[object Uint32Array]",Mn={};Mn[uO]=Mn[iY]=Mn[pY]=Mn[mY]=Mn[nY]=Mn[rY]=Mn[gY]=Mn[vY]=Mn[yY]=Mn[bY]=Mn[wY]=Mn[oY]=Mn[lY]=Mn[fO]=Mn[dY]=Mn[cY]=Mn[uY]=Mn[hY]=Mn[xY]=Mn[_Y]=Mn[kY]=Mn[SY]=!0,Mn[aY]=Mn[hO]=Mn[fY]=!1;function bx(t,i,r,s,l,d){var c,u=i&JZ,h=i&eY,f=i&tY;if(r&&(c=l?r(t,s,l,d):r(t)),c!==void 0)return c;if(!Lo(t))return t;var m=Sl(t);if(m){if(c=lZ(t),!u)return lG(t,c)}else{var p=Hv(t),g=p==hO||p==sY;if(ux(t))return R$(t,u);if(p==fO||p==uO||g&&!l){if(c=h||g?{}:VZ(t),!u)return h?q$(t,P$(c,t)):V$(t,T$(c,t))}else{if(!Mn[p])return l?t:{};c=jZ(t,p,u)}}d||(d=new vx);var v=d.get(t);if(v)return v;d.set(t,c),QZ(t)?t.forEach(function(_){c.add(bx(_,i,r,_,t,d))}):$Z(t)&&t.forEach(function(_,k){c.set(k,bx(_,i,r,k,t,d))});var w=f?h?tO:kC:h?eh:yC,x=m?void 0:w(t);return _G(x||t,function(_,k){x&&(k=_,_=t[k]),hC(c,k,bx(_,i,r,k,t,d))}),c}var pO=bx,AY=1,CY=4;function EY(t){return pO(t,AY|CY)}var wx=EY,MY="__lodash_hash_undefined__";function TY(t){return this.__data__.set(t,MY),this}var DY=TY;function PY(t){return this.__data__.has(t)}var OY=PY;function xx(t){var i=-1,r=t==null?0:t.length;for(this.__data__=new mx;++i<r;)this.add(t[i])}xx.prototype.add=xx.prototype.push=DY,xx.prototype.has=OY;var IY=xx;function RY(t,i){for(var r=-1,s=t==null?0:t.length;++r<s;)if(i(t[r],r,t))return!0;return!1}var zY=RY;function LY(t,i){return t.has(i)}var BY=LY,FY=1,NY=2;function jY(t,i,r,s,l,d){var c=r&FY,u=t.length,h=i.length;if(u!=h&&!(c&&h>u))return!1;var f=d.get(t),m=d.get(i);if(f&&m)return f==i&&m==t;var p=-1,g=!0,v=r&NY?new IY:void 0;for(d.set(t,i),d.set(i,t);++p<u;){var w=t[p],x=i[p];if(s)var _=c?s(x,w,p,i,t,d):s(w,x,p,t,i,d);if(_!==void 0){if(_)continue;g=!1;break}if(v){if(!zY(i,function(k,A){if(!BY(v,A)&&(w===k||l(w,k,r,s,d)))return v.push(A)})){g=!1;break}}else if(!(w===x||l(w,x,r,s,d))){g=!1;break}}return d.delete(t),d.delete(i),g}var mO=jY;function UY(t){var i=-1,r=Array(t.size);return t.forEach(function(s,l){r[++i]=[l,s]}),r}var VY=UY;function HY(t){var i=-1,r=Array(t.size);return t.forEach(function(s){r[++i]=s}),r}var GY=HY,WY=1,qY=2,$Y="[object Boolean]",ZY="[object Date]",YY="[object Error]",XY="[object Map]",KY="[object Number]",QY="[object RegExp]",JY="[object Set]",eX="[object String]",tX="[object Symbol]",iX="[object ArrayBuffer]",nX="[object DataView]",gO=eo?eo.prototype:void 0,MC=gO?gO.valueOf:void 0;function rX(t,i,r,s,l,d,c){switch(r){case nX:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case iX:return!(t.byteLength!=i.byteLength||!d(new yx(t),new yx(i)));case $Y:case ZY:case KY:return uC(+t,+i);case YY:return t.name==i.name&&t.message==i.message;case QY:case eX:return t==i+"";case XY:var u=VY;case JY:var h=s&WY;if(u||(u=GY),t.size!=i.size&&!h)return!1;var f=c.get(t);if(f)return f==i;s|=qY,c.set(t,i);var m=mO(u(t),u(i),s,l,d,c);return c.delete(t),m;case tX:if(MC)return MC.call(t)==MC.call(i)}return!1}var aX=rX,sX=1,oX=Object.prototype,lX=oX.hasOwnProperty;function dX(t,i,r,s,l,d){var c=r&sX,u=kC(t),h=u.length,f=kC(i),m=f.length;if(h!=m&&!c)return!1;for(var p=h;p--;){var g=u[p];if(!(c?g in i:lX.call(i,g)))return!1}var v=d.get(t),w=d.get(i);if(v&&w)return v==i&&w==t;var x=!0;d.set(t,i),d.set(i,t);for(var _=c;++p<h;){g=u[p];var k=t[g],A=i[g];if(s)var C=c?s(A,k,g,i,t,d):s(k,A,g,t,i,d);if(!(C===void 0?k===A||l(k,A,r,s,d):C)){x=!1;break}_||(_=g=="constructor")}if(x&&!_){var M=t.constructor,D=i.constructor;M!=D&&"constructor"in t&&"constructor"in i&&!(typeof M=="function"&&M instanceof M&&typeof D=="function"&&D instanceof D)&&(x=!1)}return d.delete(t),d.delete(i),x}var cX=dX,uX=1,vO="[object Arguments]",yO="[object Array]",_x="[object Object]",hX=Object.prototype,bO=hX.hasOwnProperty;function fX(t,i,r,s,l,d){var c=Sl(t),u=Sl(i),h=c?yO:Hv(t),f=u?yO:Hv(i);h=h==vO?_x:h,f=f==vO?_x:f;var m=h==_x,p=f==_x,g=h==f;if(g&&ux(t)){if(!ux(i))return!1;c=!0,m=!1}if(g&&!m)return d||(d=new vx),c||F6(t)?mO(t,i,r,s,l,d):aX(t,i,h,r,s,l,d);if(!(r&uX)){var v=m&&bO.call(t,"__wrapped__"),w=p&&bO.call(i,"__wrapped__");if(v||w){var x=v?t.value():t,_=w?i.value():i;return d||(d=new vx),l(x,_,r,s,d)}}return g?(d||(d=new vx),cX(t,i,r,s,l,d)):!1}var pX=fX;function wO(t,i,r,s,l){return t===i?!0:t==null||i==null||!kd(t)&&!kd(i)?t!==t&&i!==i:pX(t,i,r,s,wO,l)}var mX=wO;function gX(t,i){return t!=null&&i in Object(t)}var vX=gX;function yX(t,i,r){i=lp(i,t);for(var s=-1,l=i.length,d=!1;++s<l;){var c=gx(i[s]);if(!(d=t!=null&&r(t,c)))break;t=t[c]}return d||++s!=l?d:(l=t==null?0:t.length,!!l&&fC(l)&&cC(c,l)&&(Sl(t)||mC(t)))}var bX=yX;function wX(t,i){return t!=null&&bX(t,i,vX)}var xX=wX,_X=function(){return zo.Date.now()},TC=_X,kX="Expected a function",SX=Math.max,AX=Math.min;function CX(t,i,r){var s,l,d,c,u,h,f=0,m=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(kX);i=S6(i)||0,Lo(r)&&(m=!!r.leading,p="maxWait"in r,d=p?SX(S6(r.maxWait)||0,i):d,g="trailing"in r?!!r.trailing:g);function v(P){var T=s,O=l;return s=l=void 0,f=P,c=t.apply(O,T),c}function w(P){return f=P,u=setTimeout(k,i),m?v(P):c}function x(P){var T=P-h,O=P-f,z=i-T;return p?AX(z,d-O):z}function _(P){var T=P-h,O=P-f;return h===void 0||T>=i||T<0||p&&O>=d}function k(){var P=TC();if(_(P))return A(P);u=setTimeout(k,x(P))}function A(P){return u=void 0,g&&s?v(P):(s=l=void 0,c)}function C(){u!==void 0&&clearTimeout(u),f=0,s=h=l=u=void 0}function M(){return u===void 0?c:A(TC())}function D(){var P=TC(),T=_(P);if(s=arguments,l=this,h=P,T){if(u===void 0)return w(h);if(p)return clearTimeout(u),u=setTimeout(k,i),v(h)}return u===void 0&&(u=setTimeout(k,i)),c}return D.cancel=C,D.flush=M,D}var DC=CX;function EX(t){var i=t==null?0:t.length;return i?t[i-1]:void 0}var MX=EX;function TX(t,i){return i.length<2?t:V6(t,g$(i,0,-1))}var DX=TX;function PX(t,i){return mX(t,i)}var xO=PX;function OX(t,i){return i=lp(i,t),t=DX(t,i),t==null||delete t[gx(MX(i))]}var IX=OX;function RX(t){return p$(t)?void 0:t}var zX=RX,LX=1,BX=2,FX=4,NX=W6(function(t,i){var r={};if(t==null)return r;var s=!1;i=b6(i,function(d){return d=lp(d,t),s||(s=d.length>1),d}),Nv(t,tO(t),r),s&&(r=pO(r,LX|BX|FX,zX));for(var l=i.length;l--;)IX(r,i[l]);return r}),PC=NX;function jX(t,i,r,s){if(!Lo(t))return t;i=lp(i,t);for(var l=-1,d=i.length,c=d-1,u=t;u!=null&&++l<d;){var h=gx(i[l]),f=r;if(h==="__proto__"||h==="constructor"||h==="prototype")return t;if(l!=c){var m=u[h];f=s?s(m,h,u):void 0,f===void 0&&(f=Lo(m)?m:cC(i[l+1])?[]:{})}hC(u,h,f),u=u[h]}return t}var UX=jX;function VX(t,i,r){for(var s=-1,l=i.length,d={};++s<l;){var c=i[s],u=V6(t,c);r(u,c)&&UX(d,lp(c,t),u)}return d}var HX=VX;function GX(t,i){return HX(t,i,function(r,s){return xX(t,s)})}var WX=GX,qX=W6(function(t,i){return t==null?{}:WX(t,i)}),Sd=qX,$X="Expected a function";function ZX(t,i,r){var s=!0,l=!0;if(typeof t!="function")throw new TypeError($X);return Lo(r)&&(s="leading"in r?!!r.leading:s,l="trailing"in r?!!r.trailing:l),DC(t,i,{leading:s,maxWait:i,trailing:l})}var YX=ZX;function XX(t){for(let i of Object.keys(t))t[i]===void 0&&delete t[i];return t}function Ad(t,i){return Object.setPrototypeOf(t,i),t}var KX=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes(" electron/"),QX=()=>typeof window>"u"?!1:window.navigator.platform.toUpperCase().includes("MAC"),JX=()=>typeof window>"u"?!1:/iPad|iPhone|iPod/.test(window.navigator.userAgent)||kx&&"ontouchend"in document,eK=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1,tK=()=>typeof window>"u"?!1:"ontouchstart"in window||navigator.maxTouchPoints>0,iK=()=>{if(typeof window>"u")return!1;let t=navigator.userAgent,i=navigator.vendor;return/Safari/i.test(t)&&/Apple Computer/.test(i)},nK=()=>{if(typeof window>"u")return null;let t=navigator.userAgent.match(/Version\/(\d+\.\d)/);return t&&t[1]},rK=()=>{var i;if(typeof window>"u")return;let t=new URLSearchParams(window.location.search).get("desktop-app-version");return t?(window.localStorage.setItem("desktop-app-version",t),t):(i=window.localStorage.getItem("desktop-app-version"))!=null?i:"0.0.6"},aK=KX(),Hhe=aK?rK():void 0,kx=QX(),OC=JX(),sK=eK(),Os=tK(),_O=iK(),kO=Number(nK());function SO(t){return Array.isArray(t)?t:[t]}function oK(t,i){let r=0;for(;r<t.length&&r<i.length;){if(t[r]<i[r])return-1;if(t[r]>i[r])return 1;r+=1}return r!==i.length?-1:r!==t.length?1:0}function Sx(t){return kx?t.metaKey:t.ctrlKey}var Jt=[],Ax={},Gv={},Cx={};function AO(t){Jt.includes(t)||Jt.push(t)}function cp(t){delete Ax[t.pointerId];for(let i=0;i<Jt.length;i++)if(Jt[i].pointerId===t.pointerId){Jt.splice(i,1);break}}function lK(){Jt.splice(0,Jt.length)}function Ex(t){if(t.pointerType!=="touch")return;let i=Ax[t.pointerId];i===void 0&&(i={x:0,y:0},Ax[t.pointerId]=i),i.x=t.pageX,i.y=t.pageY}function IC(t){let i=t.pointerId===Jt[0].pointerId?Jt[1]:Jt[0];return Ax[i.pointerId]}function CO(t){Gv[t.key]=!0,Cx[t.key]=Cx[t.key]===void 0?1:Cx[t.key]+1}function EO(t){if(kx&&Gv.Meta)for(let i in Gv)Gv[i]=!1;else Gv[t.key]=!1;Cx={}}function dK(t){t.addEventListener("pointerdown",AO,!0),t.addEventListener("pointerdown",Ex,!0),t.addEventListener("pointermove",Ex,!0),t.addEventListener("pointerup",cp,!0),t.addEventListener("pointercancel",cp,!0),t.addEventListener("pointerleave",cp,!0),window.addEventListener("keydown",CO,!0),window.addEventListener("keyup",EO,!0)}function cK(t){t.removeEventListener("pointerdown",AO,!0),t.removeEventListener("pointerdown",Ex,!0),t.removeEventListener("pointermove",Ex,!0),t.removeEventListener("pointerup",cp,!0),t.removeEventListener("pointercancel",cp,!0),t.removeEventListener("pointerleave",cp,!0),window.removeEventListener("keydown",CO,!0),window.removeEventListener("keyup",EO,!0)}var MO,uK=new Promise(t=>{MO=t}),Mx;function hK(){if(Mx)return Mx;function t(){return qi(this,null,function*(){let i="https://unpkg.com/@splinetool/navmesh-wasm@0.9.526/build",r=de.e(1305).then(de.bind(de,71305)),[s,l]=yield Promise.all([r,fetch(`${i}/navmesh.wasm`).then(u=>u.arrayBuffer())]),d=s.default,c=yield d({wasmBinary:l});MO(c)})}return Mx=t(),Mx}var TO,fK=new Promise(t=>{TO=t}),Tx;function pK(){if(Tx)return Tx;function t(){return qi(this,null,function*(){let i=yield de.e(4477).then(de.bind(de,74477));yield i.init(),TO(i)})}return Tx=t(),Tx}var ki=class{modifyById(t,i){let r=this;if(r[t]===void 0)throw new Error("not expected");{let s=ge(Z({},r),{[t]:i});return Object.setPrototypeOf(s,ki.prototype),s}}add(t,i){var r,s;return(s=(r=this.runOp({type:1,id:t,data:i}))==null?void 0:r.data)!=null?s:this}runOp(t){let i=this;if(t.type===1){let r=i[t.id],s;r===void 0?s={type:2,id:t.id}:s={type:1,id:t.id,data:r};let{id:l,data:d}=t,c=ge(Z({},i),{[l]:d});return Object.setPrototypeOf(c,ki.prototype),{data:c,actual:t,reverse:s}}else if(t.type===2){let{id:r}=t,s=i[r];if(s===void 0)return null;{let l=Z({},i);return Object.setPrototypeOf(l,ki.prototype),delete l[r],{data:l,actual:t,reverse:{type:1,id:r,data:s}}}}return null}};function RC(t){if(t.deepFreeze!==void 0){t.deepFreeze(t);return}let i=Object.getOwnPropertyNames(t);for(let r of i){let s=t[r];s&&typeof s=="object"&&RC(s)}return Object.freeze(t)}function mK(t,i){let r=0;for(;r<t.length&&r<i.length;){if(t[r]<i[r])return-1;if(t[r]>i[r])return 1;r+=1}return r!==i.length?-1:r!==t.length?1:0}var DO=class extends Error{};function zC(t){let i=Z({},t);return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}function Pc(t,i,r){if(t===void 0?i===void 0?(t=0,i=10):t=i-10:i===void 0&&(i=t+10),t>i){let d=t;t=i,i=d}let s=[],l=1/(r+1);for(let d=0;d<r;d++){let c=t+(i-t)*(d+.75+Math.random()*.5)*l;s.push(c)}return s}function LC(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array}function gK(){return typeof bS<"u"}function PO(t,i){for(let r of t)i(r.id,r.data)!==!0&&PO(r.children,i)}function OO(t,i){if(i(t.id,t.data)!==!0)for(let r of t.children)OO(r,i)}var ss=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ss.prototype)}deepFreeze(){let t=0;for(;t<this.length;)RC(this[t]),t++}fillCaches0(t,i){this.objCaches.set(t.id,t),this.parentCaches.set(t.id,i);for(let r of t.children)this.fillCaches0(r,t.id)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,this.parentCaches=new Map;for(let t of this)this.fillCaches0(t,null)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}nonExistOrDescendantOf(t,i){if(!this.has(t))return!0;for(;t;){let r=this.parent(t);if(r===i)return!0;t=r}return!1}rootAcestor(t){for(;t;){let i=this.parent(t);if(i)t=i;else return t}return t}isDescendantOf(t,i){for(;t;){let r=this.parent(t);if(r===i)return!0;t=r}return!1}data(t){var i;return(i=this.get(t))==null?void 0:i.data}has(t){return this.childrenOf(t)!==void 0}get(t){return this.fillCaches(),this.objCaches.get(t)}childrenOf(t){var i;return t===null?this:(i=this.get(t))==null?void 0:i.children}traverseFrom(t,i){if(t===null)this.traverse(i);else{let r=this.get(t);r&&OO(r,i)}}traverse(t){PO(this,t)}totalSize(){return this.fillCaches(),this.objCaches.size}parent(t){return this.fillCaches(),this.parentCaches.get(t)}childrenArray(t){return t===null?this:this.get(t).children}modifyById(t,i){if(this.get(t)===void 0)throw new Error("not expected");{let r=this.parent(t),s=this.childrenArray(r),l=s.findIndex(c=>c.id===t);if(l<0)throw new Error("not expected");let d=s[l];return s=[...s],s[l]=ge(Z({},d),{data:i}),this.modifyArrayBy(r,s)}}modifyArrayBy(t,i){let r=t,s=i;for(;r!==null;){let d=s,c=r;if(r=this.parent(r),r===void 0)throw new Error;s=this.childrenArray(r);let u=s.findIndex(h=>h.id===c);if(u<0)throw new Error;s=[...s],s[u]=ge(Z({},s[u]),{children:d})}Object.setPrototypeOf(s,ss.prototype);let l=s;return l.fillCaches(),l}runOp(t){switch(t.type){case 7:return this.addOp(t);case 8:return this.deleteOp(t);case 9:return this.moveOp(t)}return null}checkDuplicatedIdRec({id:t,children:i}){if(this.get(t)!==void 0)return!0;for(let r of i)if(this.checkDuplicatedIdRec(r))return!0;return!1}addOp(t){let{parent:i,fi:r,id:s,data:l,children:d}=t;if(i!==null&&this.get(i)===void 0||this.checkDuplicatedIdRec(t))return null;{let c=i,u=this.childrenArray(c),h={fi:r,id:s,data:l,children:d};return u=[...u,h],u.sort((f,m)=>f.fi-m.fi),t.localIndex=u.indexOf(h),{data:this.modifyArrayBy(c,u),actual:t,reverse:{type:8,id:s}}}}deleteOp(t){let{id:i}=t;if(this.get(i)===null)return null;{let r=this.parent(i);if(r===void 0)return null;let s=this.childrenArray(r),l=s.findIndex(c=>c.id===i);t.localIndex=l,s=[...s];let d=s.splice(l,1)[0];return{data:this.modifyArrayBy(r,s),actual:t,reverse:ge(Z({type:7},d),{parent:r})}}}moveOp(t){let{parent:i,fi:r,id:s}=t;if(i!==null&&this.get(i)===void 0)return this.deleteOp({type:8,id:s});if(i!==null){let p=i;for(;p!==null;){if(p===void 0)throw new Error;if(p===s)throw new DO("cyclic tree");p=this.parent(p)}}let l=this.parent(s);if(l===void 0)return null;let d=l,c=this.childrenArray(l),u=c.findIndex(p=>p.id===s);c=[...c];let h=c.splice(u,1)[0],f=this.modifyArrayBy(l,c);l=i,c=f.childrenArray(l);let m=h.fi;return h=ge(Z({},h),{fi:r}),c=[...c,h],c.sort((p,g)=>p.fi-g.fi),t.localIndex=c.indexOf(h),f=f.modifyArrayBy(l,c),{data:f,actual:t,reverse:{type:9,parent:d,fi:m,id:s}}}previous(t,i){if(i===null){let s=this.childrenArray(t);return s.length===0?null:s[s.length-1].id}let r=null;for(let s of this.childrenArray(t)){if(s.id===i)return r;r=s.id}return null}traverseSortNext(t){let i=this.parent(t);if(i!==void 0){let r=this.childrenArray(i),s=r.findIndex(l=>l.id===t)+1;if(s<r.length)return r[s].id;if(i)return this.traverseSortNext(i)}}sortNext(t){let i=this.childrenArray(t);return i.length>0?i[0].id:this.traverseSortNext(t)}traverseSortPrevious(t){let i=this.childrenArray(t);return i.length>0?this.traverseSortPrevious(i[i.length-1].id):t}sortPrevious(t){let i=this.parent(t);if(i!==void 0){let r=this.childrenArray(i),s=r.findIndex(l=>l.id===t)-1;return s>=0?this.traverseSortPrevious(r[s].id):i}}getAllSorted(t){let i=[];for(let r of t){let s=this.getWithSortKey(r.id);s!==void 0&&i.push(Z(Z({},r),s))}i.sort((r,s)=>mK(r.sortKey,s.sortKey));for(let r of i)delete r.sortKey;return i}getWithSortKey(t){var i=t;let r=[],s=this.get(i),l=s;if(s!==void 0){for(;i;)r.splice(0,0,s.fi),i=this.parent(i),i!==null&&(s=this.get(i));return ge(Z({},l),{sortKey:r})}}insertBeforeHelper(t,i,r){return this.insertAfterHelper(t,this.previous(t,i),r)}insertAfterHelper(t,i,r){let s=this.childrenArray(t);if(i===null){if(s.length===0)return Pc(0,r,r);{let l=s[0].fi;return Pc(l-r,l,r)}}else{let l=this.get(i);if(l===void 0||this.parent(i)!==t)throw new Error("illegal args");let d=s.find(c=>c.fi>l.fi);if(d===void 0){let c=s[s.length-1].fi;return Pc(c,c+r,r)}else return Pc(l.fi,d.fi,r)}}},Dx;(t=>{function i(r,s){if(s.type!==0)return null;if(Array.isArray(r)){let l=s.props,d={},c=[...r],u=!1;if(l)for(let h of Object.keys(l)){let f=parseInt(h);if(isNaN(f))throw new Error("wrong index");d[h]=c[f],c[f]=l[h],u=!0}return u?{data:c,actual:s,reverse:{type:0,props:d}}:null}else{let l=s.props,d={},c=Z({},r),u=!1;if(l)for(let h of Object.keys(l)){d[h]=c[h];let f=l[h];f===void 0?delete c[h]:c[h]=f,u=!0}return u?{data:c,actual:s,reverse:{type:0,props:d}}:null}}t.runOp=i})(Dx||(Dx={}));var Kt=class extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Kt.prototype)}deepFreeze(){let t=0;for(;t<this.length;)RC(this[t]),t++}fillCaches0(t){this.objCaches.set(t.id,t)}fillCaches(){if(this.objCaches===void 0){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;for(let t of this)this.fillCaches0(t)}}randomId(){this.fillCaches();let t=Array.from(this.objCaches.keys());if(t.length!==0)return t[Math.max(0,Math.floor(Math.random()*t.length)-1)]}data(t){var i;return(i=this.get(t))==null?void 0:i.data}get(t){return this.fillCaches(),this.objCaches.get(t)}modifyById(t,i){if(this.get(t)===void 0)throw new Error("not expected");{let r=this,s=r.findIndex(d=>d.id===t);if(s<0)throw new Error("not expected");let l=r[s];return r=[...r],r[s]=ge(Z({},l),{data:i}),this.modifyArrayBy(r)}}modifyArrayBy(t){Object.setPrototypeOf(t,Kt.prototype);let i=t;return gK()||i.fillCaches(),i}runOp(t){switch(t.type){case 4:return this.addOp(t);case 5:return this.deleteOp(t);case 6:return this.moveOp(t)}return null}addOp(t){let{fi:i,id:r,data:s}=t,l=this,d={fi:i,id:r,data:s};return l=[...l,d],l.sort((c,u)=>c.fi-u.fi),t.localIndex=l.indexOf(d),{data:this.modifyArrayBy(l),actual:t,reverse:{type:5,id:r}}}deleteOp(t){let{id:i}=t,r=this,s=r.findIndex(d=>d.id===i);if(s===-1)return null;t.localIndex=s,r=[...r];let l=r.splice(s,1)[0];return{data:this.modifyArrayBy(r),actual:t,reverse:Z({type:4},l)}}moveOp(t){let{fi:i,id:r}=t,s=this;s=[...s];let l=s.findIndex(u=>u.id===r);if(l===-1)return null;let d=s[l].fi,c=ge(Z({},s[l]),{fi:i});return s[l]=c,s.sort((u,h)=>u.fi-h.fi),t.localIndex=s.indexOf(c),{data:this.modifyArrayBy(s),actual:t,reverse:{type:6,fi:d,id:r}}}previous(t){if(t===null)return this.length===0?null:this[this.length-1].id;let i=null;for(let r of this){if(r.id===t)return i;i=r.id}return null}insertBeforeHelper(t,i){return this.insertAfterHelper(this.previous(t),i)}insertAfterHelper(t,i){let r=this;if(t===null){if(r.length===0)return Pc(0,i,i);{let s=r[0].fi;return Pc(s-i,s,i)}}else{let s=this.get(t);if(s===void 0)throw new Error("illegal args");let l=r.find(d=>d.fi>s.fi);if(l===void 0){let d=r[r.length-1].fi;return Pc(d,d+i,i)}else return Pc(s.fi,l.fi,i)}}};function up(t){return t&&typeof t=="object"&&t instanceof Dr}var Dr=class{unusedFunOverridesTable(t){}runOp(t){let i=[],r=this,s=0,l={};for(;s<t.path.length;){if(i.push(r),r=r===void 0?void 0:r[t.path[s]],r!==void 0&&!up(r))return null;s+=1}r=r?zC(r):new Dr;for(let[u,h]of Object.entries(t.props)){let f=r[u];l[u]=f,h===void 0?delete r[u]:r[u]=h}for(;s>0;){if(Object.keys(r).length===0){let u=i[s-1];u&&(r=zC(u),delete r[t.path[s-1]])}else{let u=i[s-1];if(u){let h=zC(u);h[t.path[s-1]]=r,r=h}else{let h=new Dr;h[t.path[s-1]]=r,r=h}}s-=1}let d=Object.setPrototypeOf(r,Dr.prototype),c=ge(Z({},t),{props:l});return{data:d,actual:t,reverse:c}}},Oc;(t=>{function i(l,d){var c;return(c=Wv(l,d))!=null?c:l}t.apply=i;function r(l,d){return FC(l,d)}t.merge=r;function s(l,d){let c=0,u=d.path,h=l;for(;c<u.length&&h!==void 0;){if(h=Fa.zoomOnce(h,u[c]),h===void 0)return d;if(!up(h))return;c+=1}if(h===void 0)return d;if(up(h))if(d.type===0){let f=Z({},d.props);for(let m of Object.keys(h))delete f[m];return ge(Z({},d),{props:f})}else if(d.type===1||d.type===4||d.type===7){let f=BC([d],h);return f?(console.log(f),f):d}else return d}t.filterOp=s})(Oc||(Oc={}));function BC(t,i){if(i===void 0)return;let r=!1,s=t.map(l=>{let d=l.id,c=Wv(l.data,i[d]);if(r=r||c!==void 0,c===void 0&&(c=l.data),l.children){let u=BC(l.children,i);return u!==void 0?r=!0:u=l.children,ge(Z({},l),{id:d,data:c,children:u})}else return ge(Z({},l),{id:d,data:c})});if(r)return s}function vK(t,i){if(i===void 0)return;let r=!1,s=t.map(l=>{let d=l.id,c=Wv(l.data,i[d]);return r=r||c!==void 0,c===void 0&&(c=l.data),ge(Z({},l),{id:d,data:c})});if(r)return Object.setPrototypeOf(s,Object.getPrototypeOf(t)),s}function Wv(t,i){if(!up(i))return i;if(t instanceof ss){let r=BC(t,i);return r!==void 0&&Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r}else{if(t instanceof Kt)return vK(t,i);if(Array.isArray(t)){let r=!1,s=t.map((l,d)=>{let c=Wv(l,i[d]);return r=r||c!==void 0,c===void 0&&(c=l),c});return r?(Object.setPrototypeOf(s,Object.getPrototypeOf(t)),s):void 0}else{if(t instanceof Dr)return FC(t,i);if(t&&typeof t=="object"){let r={},s=!1;for(let[l,d]of Object.entries(t)){let c=Wv(d,i[l]);s=s||c!==void 0,c===void 0&&(c=d),r[l]=c}return s?(Object.setPrototypeOf(r,Object.getPrototypeOf(t)),r):void 0}}}}function FC(t,i){if(t===void 0)return i;if(i===void 0)return t;if(!up(i))return i;if(!up(t))return Oc.apply(t,i);let r=new Set;for(let l of Object.keys(t))r.add(l);for(let l of Object.keys(i))r.add(l);let s=new Dr;for(let l of r){let d=FC(t===void 0?void 0:t[l],i===void 0?void 0:i[l]);s[l]=d}return s}function yK(t,i){var s;let r={cur:[],result:[],len:0};return t=(s=qv(t,i,r))!=null?s:t,[t,r.result]}function Px(t,i){return t===null?null:(t.cur[t.len]=i,t.len+=1,t)}function Ox(t){t&&(t.len-=1)}function bK(t){if(t===null)return null;t.result.push(t.cur.slice(0,t.len))}function IO(t,i,r){let s=!1,l=t.map(d=>{let c=d.id,u=i[c];if(u!==void 0&&typeof u=="string"&&(s=!0,c=u,r!==null))throw new Error("not supported");let h=qv(d.data,i,Px(r,c));Ox(r),s=s||h!==void 0,h===void 0&&(h=d.data);let f=IO(d.children,i,r);return f!==void 0?s=!0:f=d.children,ge(Z({},d),{id:c,data:h,children:f})});if(s)return l}function wK(t,i,r){let s=!1,l=t.map(d=>{let c=d.id,u=i[c];if(u!==void 0&&typeof u=="string"&&(s=!0,c=u,r!==null))throw new Error("not supported");let h=qv(d.data,i,Px(r,c));return Ox(r),s=s||h!==void 0,h===void 0&&(h=d.data),ge(Z({},d),{id:c,data:h})});if(s)return Object.setPrototypeOf(l,Object.getPrototypeOf(t)),l}function qv(t,i,r){if(t instanceof ss){let s=IO(t,i,r);return s!==void 0&&Object.setPrototypeOf(s,Object.getPrototypeOf(t)),s}else{if(t instanceof Kt)return wK(t,i,r);if(Array.isArray(t)){let s=!1,l=t.map((d,c)=>{let u=qv(d,i,Px(r,c));return Ox(r),s=s||u!==void 0,u===void 0&&(u=d),u});return s?(Object.setPrototypeOf(l,Object.getPrototypeOf(t)),l):void 0}else if(t&&typeof t=="object"&&!LC(t)){let s={},l=!1;for(let[d,c]of Object.entries(t))if(d!=="name"){let u=i[d];if(typeof u=="string"){if(r!==null)throw new Error("not supported");l=!0,d=u}let h=qv(c,i,Px(r,d));Ox(r),l=l||h!==void 0,h===void 0&&(h=c),s[d]=h}else s[d]=c;return l?(Object.setPrototypeOf(s,Object.getPrototypeOf(t)),s):void 0}else if(typeof t=="string"){let s=i[t];return s!==void 0&&bK(r),s}else return}}var NC;(t=>{function i(r,s){let l=Fa.zoom(s,r.path);if(typeof l=="object"){let d={};for(let c of Object.keys(r.props))d[c]=l[c];return ge(Z({},r),{props:d})}else return ge(Z({},r),{props:{}})}t.replaceProps=i})(NC||(NC={}));var fa;(t=>{function i(h,f){return ge(Z({},h),{path:h.path.slice(f)})}t.drop=i;function r(h,f){var m,p;return(p=(m=s(h,f))==null?void 0:m.data)!=null?p:h}t.applySimple=r;function s(h,f){var g,v;let m=f.path;for(var p=[];;){let w;if(h instanceof Dr&&f.type===0&&(w=h.runOp(ge(Z({},f),{path:m.slice(p.length)})),w===null&&(w=void 0)),w===void 0&&p.length===m.length&&(h instanceof ss||h instanceof Kt||h instanceof ki?w=h.runOp(f):w=Dx.runOp(h,f)),w!==void 0)if(w!==null){let k=w.data;for(let A=p.length-1;A>=0;A--){let C=m[A],M=p[A];if(M instanceof ss){if(typeof C=="number")throw new Error("illegal arg");k=M.modifyById(C,k)}else if(M instanceof Kt){if(typeof C=="number")throw new Error("illegal arg");k=M.modifyById(C,k)}else if(M instanceof ki){if(typeof C=="number")throw new Error("illegal arg");k=M.modifyById(C,k)}else if(M instanceof Dr){let D=ge(Z({},M),{[C]:k});k=Object.setPrototypeOf(D,Dr.prototype)}else if(typeof M=="object")if(Array.isArray(M)){if(typeof C=="string"&&(C=parseInt(C),isNaN(C)))throw new Error("Invalid path");let D=k;k=[...M],k[C]=D}else k=ge(Z({},M),{[C]:k});else return null}return{data:k,actual:ge(Z({},w.actual),{path:m}),reverse:ge(Z({},w.reverse),{path:m})}}else return null;let x=m[p.length],_;if(h instanceof ss){if(typeof x=="number")throw new Error("");_=(g=h.get(x))==null?void 0:g.data}else if(h instanceof Kt){if(typeof x=="number")throw new Error("");_=(v=h.get(x))==null?void 0:v.data}else h!==null&&(_=h[x]);if(_!==void 0)p.push(h),h=_;else return null}}t.apply=s;function l(h,f){for(let m=0;m<h.length&&m<f.length;m++)if(h[m]!==f[m])return!0;return!1}t.pathDisjoint=l;function d(h,f){if(h.length!==f.length)return!1;for(let m=0;m<h.length;m++)if(h[m]!==f[m])return!1;return!0}t.pathEq=d;function c(h,f){return l(h.path,f.path)}t.commutative=c;function u(h,f){return h.type===0&&f.type===0&&d(h.path,f.path)?Object.keys(h.props).every(m=>f.props[m]!==void 0):!1}t.subsumed=u})(fa||(fa={}));var jC;(t=>{function i(){return[]}t.empty=i;function r(f,m){let p=[];for(let g of f){let[v,...w]=g.path;v===m&&p.push(ge(Z({},g),{path:w}))}return p}t.removePrefix=r;function s(f,m){return f.map(p=>ge(Z({},p),{path:[m,...p.path]}))}t.addPrefix=s;function l(f,m){return[...f,...m]}t.concat=l;function d(f,m){return[...f.filter(p=>!m.some(g=>fa.subsumed(p,g))),...m]}t.compress=d;function c(f,m){return f.every(p=>m.every(g=>fa.commutative(p,g)))}t.commutative=c;function u(f,m){for(let p of m){let g=h(f,p);g!==null&&(f=g.data)}return f}t.applyAll=u;function h(f,m){var p=f;let g=[],v=[];for(let w of m)try{if(w.type===3||w.type===5&&w.path[w.path.length-1]==="variables"){let x,_,k;if(w.type===3?(x=Fa.zoom(p,[...w.path,w.id]),k=fa.apply(p,ge(Z({},w),{type:2}))):(x=Fa.zoom(p,[...w.path,w.id,"value"]),k=fa.apply(p,w)),k!==null){p=k.data;let[A,C]=yK(p,{[w.id]:x});p=A;for(let M=0;M<C.length;M++){let D=C[M],P=D.pop();if(typeof P=="number"){let T=[P];for(let z=M+1;z<C.length;z++){let L=C[z],B=L[L.length-1];if(typeof B=="number"&&Fa.equal(D,L.slice(0,L.length-1)))T.push(B),C.splice(z,1);else break}let O=Fa.zoom(p,D);_=O.map((z,L)=>T.includes(L)?w.id:z),x=O,P=D.pop()}else{if(P==="alphaOverride"||P==="alpha"){x/=100;let T=x,O=Fa.zoom(p,D.slice(0,D.length-2)),z=O.layers.map(L=>L.id===D[D.length-1]?ge(Z({},L),{data:ge(Z({},L.data),{[P]:T})}):L);Object.setPrototypeOf(z,Object.getPrototypeOf(O.layers)),O.layers=z}_=w.id}g.push({type:0,path:D,props:{[P]:x}}),v.push({type:0,path:D,props:{[P]:_}})}v.push(k.reverse),g.push(k.actual)}}else{let x=fa.apply(p,w);x!==null&&(g.push(x.actual),p=x.data,v.push(x.reverse))}}catch(x){if(x instanceof DO)return null;throw x}return{data:p,actual:g,reverse:v.reverse()}}t.apply=h})(jC||(jC={}));var RO=Symbol(),xK=Symbol(),Ix=Symbol(),$v=class{reportOp(t,i,r=[]){let s=this;if(i===null)return;s._current=i.data;let l=r;for(;!(s instanceof LO);){let d=s._path,c=s._current;if(d!==""&&l.splice(0,0,d),s=s._parent,s===null)return;s.update(d,c)}s.push(l,t,i.actual,i.reverse)}deleteChildren(t){if(this._children){let i=this._children[t];if(i){let r=i[Ix];r&&r(),delete this._children[t]}}}},_K=class extends $v{constructor(t,i,r){super(),this._parent=t,this._path=i,this._current=r}update(t,i){if(Array.isArray(this._current)){if(typeof t=="string"&&(t=parseInt(t),isNaN(t)))throw new Error("Invalid path");this._current=[...this._current],this._current[t]=i}else this._current=ge(Z({},this._current),{[t]:i})}runOp(t){this.reportOp(t,Dx.runOp(this._current,t),t.path)}},kK=class extends $v{constructor(t,i,r){super(),this._parent=t,this._path=i,this._current=r}update(t,i){this._current=ge(Z({},this._current),{[t]:i}),Object.setPrototypeOf(this._current,ki.prototype)}runOp(t){this.reportOp(t,this._current.runOp(t))}},zO={get(t,i){if(i===Ix)return()=>{t._parent=null};if(i===RO)return t._current;if(i===xK)return t;let{_current:r,_children:s}=t;if(i==="push"&&Array.isArray(r))throw new Error("not supported to expand array");let l=s===void 0?void 0:s[i];if(l!==void 0)return l;let d=r[i],c=Rx(t,i,d);return c!==d?(s===void 0&&(s={},t._children=s),s[i]=c,c):d},has(t,i){return i in t._current},ownKeys(t){return Reflect.ownKeys(t._current)},defineProperty(){throw Error("not supported")},getPrototypeOf(t){return Object.getPrototypeOf(t._current)},setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor(t,i){let r=t._current,s=Reflect.getOwnPropertyDescriptor(r,i);return s&&{writable:!0,configurable:!0,enumerable:s.enumerable,value:r[i]}}},SK=ge(Z({},zO),{set(t,i,r){var l;let s={type:0,props:{[i]:(l=yr(r))!=null?l:r}};return t.deleteChildren(i),t.runOp(s),!0},deleteProperty(t,i){let r={type:0,props:{[i]:void 0}};return t.deleteChildren(i),t.runOp(r),!0}}),AK=ge(Z({},zO),{set(t,i,r){return r===void 0?this.deleteProperty(t,i):(t.deleteChildren(i),t.runOp({type:1,id:i,data:r})),!0},deleteProperty(t,i){return t.runOp({type:2,id:i}),!0}}),UC=class extends $v{constructor(t,i,r){super(),this._children={},this._parent=t,this._path=i,this._current=r,this[Ix]=()=>{this._parent=null}}unproxy(){return this._current}update(t,i){this._current=this._current.modifyById(t,i)}runOp(t){this.reportOp(t,this._current.runOp(t))}randomId(){return this._current.randomId()}isDescendantOf(t,i){return this._current.isDescendantOf(t,i)}childrenOf(t){return this._current.childrenOf(t)}traverse(t){return this._current.traverse(t)}get(t){return this._current.get(t)}parent(t){return this._current.parent(t)}traverse(t){this._current.traverse((i,r)=>{t(i,this.data(i))})}data(t){var c;let{_current:i,_children:r}=this,s=r===void 0?void 0:r[t];if(s!==void 0)return s;let l=(c=i.get(t))==null?void 0:c.data,d=Rx(this,t,l);return d!==l?(r===void 0&&(r={},this._children=r),r[t]=d,d):l}add(t,i,r,s,l){this.runOp({type:7,parent:t,fi:i,id:r,data:s,children:l})}move(t,i,r){this.runOp({type:9,parent:t,fi:i,id:r})}insertAfter(t,i,r){let s=this._current.insertAfterHelper(t,i,r.length);for(let l=0;l<r.length;l++){let d=r[l];this.add(t,s[l],d.id,d.data,d.children)}}insertBefore(t,i,r){let s=this._current.insertBeforeHelper(t,i,r.length);for(let l=0;l<r.length;l++){let d=r[l];this.add(t,s[l],d.id,d.data,d.children)}}moveAfter(t,i,r){let s=this._current.insertAfterHelper(t,i,r.length);for(let l=0;l<r.length;l++){let d=r[l];this.move(t,s[l],d)}}moveBefore(t,i,r){let s=this._current.insertBeforeHelper(t,i,r.length);for(let l=0;l<r.length;l++){let d=r[l];this.move(t,s[l],d)}}delete(t){this.deleteChildren(t),this.runOp({type:8,id:t})}sortNext(t){return this._current.sortNext(t)}sortPrevious(t){return this._current.sortPrevious(t)}getAllSorted(t){return this._current.getAllSorted(t)}},VC=class extends $v{constructor(t,i,r){super(),this._children={},this._parent=t,this._path=i,this._current=r,this[Ix]=()=>{this._parent=null}}unproxy(){return this._current}get length(){return this._current.length}forEach(t){let i=this.length;for(let r=0;r<i;r++){let s=this._current[r].id,l=this._current[r].fi;t(this.data(this._current[r].id),s,l)}}find(t){let i=this.length;for(let r=0;r<i;r++){let s=this._current[r].id;if(t(this.data(s),s))return this.get(s)}}update(t,i){this._current=this._current.modifyById(t,i)}randomId(){return this._current.randomId()}get(t){return ge(Z({},this._current.get(t)),{data:this.data(t)})}data(t){var c;let{_current:i,_children:r}=this,s=r===void 0?void 0:r[t];if(s!==void 0)return s;let l=(c=i.get(t))==null?void 0:c.data,d=Rx(this,t,l);return d!==l?(r===void 0&&(r={},this._children=r),r[t]=d,d):l}runOp(t){this.reportOp(t,this._current.runOp(t))}add(t,i,r){this.runOp({type:4,fi:t,id:i,data:r})}move(t,i){this.runOp({type:6,fi:t,id:i})}insertAfter(t,i){let r=this._current.insertAfterHelper(t,i.length);for(let s=0;s<i.length;s++){let l=i[s];this.add(r[s],l.id,l.data)}}insertBefore(t,i){let r=this._current.insertBeforeHelper(t,i.length);for(let s=0;s<i.length;s++){let l=i[s];this.add(r[s],l.id,l.data)}}moveAfter(t,i){let r=this._current.insertAfterHelper(t,i.length);for(let s=0;s<i.length;s++){let l=i[s];this.move(r[s],l)}}moveBefore(t,i){let r=this._current.insertBeforeHelper(t,i.length);for(let s=0;s<i.length;s++){let l=i[s];this.move(r[s],l)}}delete(t){this.deleteChildren(t),this.runOp({type:5,id:t})}};function HC(t,i,r){if(t.length>0){let s=t[t.length-1];if(s.type===0&&i.type===0&&Fa.equal(s.path,r)){Object.assign(s.props,i.props);return}}t.push(ge(Z({},i),{path:r}))}var LO=class extends $v{constructor(t){super(),this.ts=[],this.actual=[],this.reverse=[],this._current=t}update(t,i){if(t!=="")throw new Error("");this._current=i}push(t,i,r,s){HC(this.ts,i,t),HC(this.actual,r,t),HC(this.reverse,s,t)}result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}};function Rx(t,i,r){return r instanceof ss?new UC(t,i,r):r instanceof Kt?new VC(t,i,r):r instanceof ki?new Proxy(new kK(t,i,r),AK):r!==null&&typeof r=="object"?LC(r)?r:new Proxy(new _K(t,i,r),SK):r}function BO(t){let i=new LO(t);return[Rx(i,"",t),i]}function Zv(t,i){let[r,s]=BO(t);return i(r),s.result()}function yr(t){return t instanceof UC||t instanceof VC?t._current:t!==null&&typeof t=="object"?t[RO]:t}var Fa;(t=>{function i(d,c){if(c.length===d.length)for(var u=0;u<d.length;){if(d[u]!==c[u])return!1;u+=1}else return!1;return!0}t.equal=i;function r(d,c,u){let h=l(u,d);if(h!==void 0&&typeof h=="object"&&h!==null){let f=Z({},c);return Object.keys(h).forEach(m=>{delete f[m]}),f}else return c}t.removeOverridden=r;function s(d,c){if((d instanceof ss||d instanceof UC)&&typeof c=="string"||(d instanceof Kt||d instanceof VC)&&typeof c=="string")return d.data(c);if(typeof c=="number"&&Array.isArray(d)||typeof c=="string"&&typeof d=="object"&&d!==null)return d[c]}t.zoomOnce=s;function l(d,c,u=0){for(;u<c.length&&d!==void 0;)d=s(d,c[u]),u+=1;return d}t.zoom=l})(Fa||(Fa={}));function CK(t,i){let r=[];if(i.length===t.length)for(var s=0;s<t.length;){if(i[s]==="*")r.push(t[s]);else if(t[s]!==i[s])return null;s+=1}else return null;return r}function to(t,i){let r=[];if(i.length<=t.length)for(var s=0;s<i.length;){if(i[s]==="*")r.push(t[s]);else if(t[s]!==i[s])return null;s+=1}else return null;return r}var FO=class{},NO=class extends FO{constructor(t){super(),this.id=t}},jO=class extends FO{constructor(t){super(),this.data=t}},GC;try{GC=new TextDecoder}catch(t){}var At,Ic,Ce=0,UO=[],WC=UO,qC=0,os={},Yi,Rc,io=0,Al=0,Is,Cd,Na=[],rn,VO={useRecords:!1,mapsAsObjects:!0},HO=class{},GO=new HO;GO.name="MessagePack 0xC1";var hp=!1,zx=class{constructor(t){t&&(t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.structures?t.structures.sharedLength=t.structures.length:t.getStructures&&((t.structures=[]).uninitialized=!0,t.structures.sharedLength=0)),Object.assign(this,t)}unpack(t,i){if(At)return iI(()=>(KC(),this?this.unpack(t,i):zx.prototype.unpack.call(VO,t,i)));Ic=i>-1?i:t.length,Ce=0,qC=0,Al=0,Rc=null,WC=UO,Is=null,At=t;try{rn=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(r){throw At=null,t instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof zx){if(os=this,this.structures)return Yi=this.structures,Lx();(!Yi||Yi.length>0)&&(Yi=[])}else os=VO,(!Yi||Yi.length>0)&&(Yi=[]);return Lx()}unpackMultiple(t,i){let r,s=0;try{hp=!0;let l=t.length,d=this?this.unpack(t,l):Fx.unpack(t,l);if(i){for(i(d);Ce<l;)if(s=Ce,i(Lx())===!1)return}else{for(r=[d];Ce<l;)s=Ce,r.push(Lx());return r}}catch(l){throw l.lastPosition=s,l.values=r,l}finally{hp=!1,KC()}}_mergeStructures(t,i){t=t||[];for(let r=0,s=t.length;r<s;r++){let l=t[r];l&&(l.isShared=!0,r>=32&&(l.highByte=r-32>>5))}t.sharedLength=t.length;for(let r in i||[])if(r>=0){let s=t[r],l=i[r];l&&(s&&((t.restoreStructures||(t.restoreStructures=[]))[r]=s),t[r]=l)}return this.structures=t}decode(t,i){return this.unpack(t,i)}};function Lx(){try{if(!os.trusted&&!hp){let i=Yi.sharedLength||0;i<Yi.length&&(Yi.length=i)}let t=Jn();if(Ce==Ic)Yi.restoreStructures&&WO(),Yi=null,At=null,Cd&&(Cd=null);else if(Ce>Ic){let i=new Error("Unexpected end of MessagePack data");throw i.incomplete=!0,i}else if(!hp)throw new Error("Data read, but end of buffer not reached");return t}catch(t){throw Yi.restoreStructures&&WO(),KC(),(t instanceof RangeError||t.message.startsWith("Unexpected end of buffer"))&&(t.incomplete=!0),t}}function WO(){for(let t in Yi.restoreStructures)Yi[t]=Yi.restoreStructures[t];Yi.restoreStructures=null}function Jn(){let t=At[Ce++];if(t<160)if(t<128){if(t<64)return t;{let i=Yi[t&63]||os.getStructures&&$O()[t&63];return i?(i.read||(i.read=$C(i,t&63)),i.read()):t}}else if(t<144)if(t-=128,os.mapsAsObjects){let i={};for(let r=0;r<t;r++)i[QO()]=Jn();return i}else{let i=new Map;for(let r=0;r<t;r++)i.set(Jn(),Jn());return i}else{t-=144;let i=new Array(t);for(let r=0;r<t;r++)i[r]=Jn();return i}else if(t<192){let i=t-160;if(Al>=Ce)return Rc.slice(Ce-io,(Ce+=i)-io);if(Al==0&&Ic<140){let r=i<16?YC(i):XO(i);if(r!=null)return r}return ZC(i)}else{let i;switch(t){case 192:return null;case 193:return Is?(i=Jn(),i>0?Is[1].slice(Is.position1,Is.position1+=i):Is[0].slice(Is.position0,Is.position0-=i)):GO;case 194:return!1;case 195:return!0;case 196:return XC(At[Ce++]);case 197:return i=rn.getUint16(Ce),Ce+=2,XC(i);case 198:return i=rn.getUint32(Ce),Ce+=4,XC(i);case 199:return ih(At[Ce++]);case 200:return i=rn.getUint16(Ce),Ce+=2,ih(i);case 201:return i=rn.getUint32(Ce),Ce+=4,ih(i);case 202:if(i=rn.getFloat32(Ce),os.useFloat32>2){let r=QC[(At[Ce]&127)<<1|At[Ce+1]>>7];return Ce+=4,(r*i+(i>0?.5:-.5)>>0)/r}return Ce+=4,i;case 203:return i=rn.getFloat64(Ce),Ce+=8,i;case 204:return At[Ce++];case 205:return i=rn.getUint16(Ce),Ce+=2,i;case 206:return i=rn.getUint32(Ce),Ce+=4,i;case 207:return os.int64AsNumber?(i=rn.getUint32(Ce)*4294967296,i+=rn.getUint32(Ce+4)):i=rn.getBigUint64(Ce),Ce+=8,i;case 208:return rn.getInt8(Ce++);case 209:return i=rn.getInt16(Ce),Ce+=2,i;case 210:return i=rn.getInt32(Ce),Ce+=4,i;case 211:return os.int64AsNumber?(i=rn.getInt32(Ce)*4294967296,i+=rn.getUint32(Ce+4)):i=rn.getBigInt64(Ce),Ce+=8,i;case 212:if(i=At[Ce++],i==114)return JO(At[Ce++]&63);{let r=Na[i];if(r)return r.read?(Ce++,r.read(Jn())):r.noBuffer?(Ce++,r()):r(At.subarray(Ce,++Ce));throw new Error("Unknown extension "+i)}case 213:return i=At[Ce],i==114?(Ce++,JO(At[Ce++]&63,At[Ce++])):ih(2);case 214:return ih(4);case 215:return ih(8);case 216:return ih(16);case 217:return i=At[Ce++],Al>=Ce?Rc.slice(Ce-io,(Ce+=i)-io):MK(i);case 218:return i=rn.getUint16(Ce),Ce+=2,Al>=Ce?Rc.slice(Ce-io,(Ce+=i)-io):TK(i);case 219:return i=rn.getUint32(Ce),Ce+=4,Al>=Ce?Rc.slice(Ce-io,(Ce+=i)-io):DK(i);case 220:return i=rn.getUint16(Ce),Ce+=2,ZO(i);case 221:return i=rn.getUint32(Ce),Ce+=4,ZO(i);case 222:return i=rn.getUint16(Ce),Ce+=2,YO(i);case 223:return i=rn.getUint32(Ce),Ce+=4,YO(i);default:if(t>=224)return t-256;if(t===void 0){let r=new Error("Unexpected end of MessagePack data");throw r.incomplete=!0,r}throw new Error("Unknown MessagePack token "+t)}}}var EK=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function $C(t,i){function r(){if(r.count++>2){let l=t.read=new Function("r","return function(){return {"+t.map(d=>EK.test(d)?d+":r()":"["+JSON.stringify(d)+"]:r()").join(",")+"}}")(Jn);return t.highByte===0&&(t.read=qO(i,t.read)),l()}let s={};for(let l=0,d=t.length;l<d;l++){let c=t[l];s[c]=Jn()}return s}return r.count=0,t.highByte===0?qO(i,r):r}var qO=(t,i)=>function(){let r=At[Ce++];if(r===0)return i();let s=t<32?-(t+(r<<5)):t+(r<<5),l=Yi[s]||$O()[s];if(!l)throw new Error("Record id is not defined for "+s);return l.read||(l.read=$C(l,t)),l.read()};function $O(){let t=iI(()=>(At=null,os.getStructures()));return Yi=os._mergeStructures(t,Yi)}var ZC=Bx,MK=Bx,TK=Bx,DK=Bx;function Bx(t){let i;if(t<16&&(i=YC(t)))return i;if(t>64&&GC)return GC.decode(At.subarray(Ce,Ce+=t));let r=Ce+t,s=[];for(i="";Ce<r;){let l=At[Ce++];if(!(l&128))s.push(l);else if((l&224)===192){let d=At[Ce++]&63;s.push((l&31)<<6|d)}else if((l&240)===224){let d=At[Ce++]&63,c=At[Ce++]&63;s.push((l&31)<<12|d<<6|c)}else if((l&248)===240){let d=At[Ce++]&63,c=At[Ce++]&63,u=At[Ce++]&63,h=(l&7)<<18|d<<12|c<<6|u;h>65535&&(h-=65536,s.push(h>>>10&1023|55296),h=56320|h&1023),s.push(h)}else s.push(l);s.length>=4096&&(i+=Gr.apply(String,s),s.length=0)}return s.length>0&&(i+=Gr.apply(String,s)),i}function ZO(t){let i=new Array(t);for(let r=0;r<t;r++)i[r]=Jn();return i}function YO(t){if(os.mapsAsObjects){let i={};for(let r=0;r<t;r++)i[QO()]=Jn();return i}else{let i=new Map;for(let r=0;r<t;r++)i.set(Jn(),Jn());return i}}var Gr=String.fromCharCode;function XO(t){let i=Ce,r=new Array(t);for(let s=0;s<t;s++){let l=At[Ce++];if((l&128)>0){Ce=i;return}r[s]=l}return Gr.apply(String,r)}function YC(t){if(t<4)if(t<2){if(t===0)return"";{let i=At[Ce++];if((i&128)>1){Ce-=1;return}return Gr(i)}}else{let i=At[Ce++],r=At[Ce++];if((i&128)>0||(r&128)>0){Ce-=2;return}if(t<3)return Gr(i,r);let s=At[Ce++];if((s&128)>0){Ce-=3;return}return Gr(i,r,s)}else{let i=At[Ce++],r=At[Ce++],s=At[Ce++],l=At[Ce++];if((i&128)>0||(r&128)>0||(s&128)>0||(l&128)>0){Ce-=4;return}if(t<6){if(t===4)return Gr(i,r,s,l);{let d=At[Ce++];if((d&128)>0){Ce-=5;return}return Gr(i,r,s,l,d)}}else if(t<8){let d=At[Ce++],c=At[Ce++];if((d&128)>0||(c&128)>0){Ce-=6;return}if(t<7)return Gr(i,r,s,l,d,c);let u=At[Ce++];if((u&128)>0){Ce-=7;return}return Gr(i,r,s,l,d,c,u)}else{let d=At[Ce++],c=At[Ce++],u=At[Ce++],h=At[Ce++];if((d&128)>0||(c&128)>0||(u&128)>0||(h&128)>0){Ce-=8;return}if(t<10){if(t===8)return Gr(i,r,s,l,d,c,u,h);{let f=At[Ce++];if((f&128)>0){Ce-=9;return}return Gr(i,r,s,l,d,c,u,h,f)}}else if(t<12){let f=At[Ce++],m=At[Ce++];if((f&128)>0||(m&128)>0){Ce-=10;return}if(t<11)return Gr(i,r,s,l,d,c,u,h,f,m);let p=At[Ce++];if((p&128)>0){Ce-=11;return}return Gr(i,r,s,l,d,c,u,h,f,m,p)}else{let f=At[Ce++],m=At[Ce++],p=At[Ce++],g=At[Ce++];if((f&128)>0||(m&128)>0||(p&128)>0||(g&128)>0){Ce-=12;return}if(t<14){if(t===12)return Gr(i,r,s,l,d,c,u,h,f,m,p,g);{let v=At[Ce++];if((v&128)>0){Ce-=13;return}return Gr(i,r,s,l,d,c,u,h,f,m,p,g,v)}}else{let v=At[Ce++],w=At[Ce++];if((v&128)>0||(w&128)>0){Ce-=14;return}if(t<15)return Gr(i,r,s,l,d,c,u,h,f,m,p,g,v,w);let x=At[Ce++];if((x&128)>0){Ce-=15;return}return Gr(i,r,s,l,d,c,u,h,f,m,p,g,v,w,x)}}}}}function XC(t){return os.copyBuffers?Uint8Array.prototype.slice.call(At,Ce,Ce+=t):At.subarray(Ce,Ce+=t)}function ih(t){let i=At[Ce++];if(Na[i])return Na[i](At.subarray(Ce,Ce+=t));throw new Error("Unknown extension type "+i)}var KO=new Array(4096);function QO(){let t=At[Ce++];if(t>=160&&t<192){if(t=t-160,Al>=Ce)return Rc.slice(Ce-io,(Ce+=t)-io);if(!(Al==0&&Ic<180))return ZC(t)}else return Ce--,Jn();let i=(t<<5^(t>1?rn.getUint16(Ce):t>0?At[Ce]:0))&4095,r=KO[i],s=Ce,l=Ce+t-3,d,c=0;if(r&&r.bytes==t){for(;s<l;){if(d=rn.getUint32(s),d!=r[c++]){s=1879048192;break}s+=4}for(l+=3;s<l;)if(d=At[s++],d!=r[c++]){s=1879048192;break}if(s===l)return Ce=s,r.string;l-=3,s=Ce}for(r=[],KO[i]=r,r.bytes=t;s<l;)d=rn.getUint32(s),r.push(d),s+=4;for(l+=3;s<l;)d=At[s++],r.push(d);let u=t<16?YC(t):XO(t);return u!=null?r.string=u:r.string=ZC(t)}var JO=(t,i)=>{var r=Jn();let s=t;i!==void 0&&(t=t<32?-((i<<5)+t):(i<<5)+t,r.highByte=i);let l=Yi[t];return l&&l.isShared&&((Yi.restoreStructures||(Yi.restoreStructures=[]))[t]=l),Yi[t]=r,r.read=$C(r,s),r.read()},eI=typeof self=="object"?self:global;Na[0]=()=>{},Na[0].noBuffer=!0,Na[101]=()=>{let t=Jn();return(eI[t[0]]||Error)(t[1])},Na[105]=t=>{let i=rn.getUint32(Ce-4);Cd||(Cd=new Map);let r=At[Ce],s;r>=144&&r<160||r==220||r==221?s=[]:s={};let l={target:s};Cd.set(i,l);let d=Jn();return l.used?Object.assign(s,d):(l.target=d,d)},Na[112]=t=>{let i=rn.getUint32(Ce-4),r=Cd.get(i);return r.used=!0,r.target},Na[115]=()=>new Set(Jn());var tI=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map(t=>t+"Array");Na[116]=t=>{let i=t[0],r=tI[i];if(!r)throw new Error("Could not find typed array for code "+i);return new eI[r](Uint8Array.prototype.slice.call(t,1).buffer)},Na[120]=()=>{let t=Jn();return new RegExp(t[0],t[1])},Na[98]=t=>{let i=(t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3],r=Ce;Ce+=i-4,Is=[Jn(),Jn()],Is.position0=0,Is.position1=0;let s=Ce;Ce=r;try{return Jn()}finally{Ce=s}},Na[255]=t=>t.length==4?new Date((t[0]*16777216+(t[1]<<16)+(t[2]<<8)+t[3])*1e3):t.length==8?new Date(((t[0]<<22)+(t[1]<<14)+(t[2]<<6)+(t[3]>>2))/1e6+((t[3]&3)*4294967296+t[4]*16777216+(t[5]<<16)+(t[6]<<8)+t[7])*1e3):t.length==12?new Date(((t[0]<<24)+(t[1]<<16)+(t[2]<<8)+t[3])/1e6+((t[4]&128?-281474976710656:0)+t[6]*1099511627776+t[7]*4294967296+t[8]*16777216+(t[9]<<16)+(t[10]<<8)+t[11])*1e3):new Date("invalid");function iI(t){let i=Ic,r=Ce,s=qC,l=io,d=Al,c=Rc,u=WC,h=Cd,f=Is,m=new Uint8Array(At.slice(0,Ic)),p=Yi,g=Yi.slice(0,Yi.length),v=os,w=hp,x=t();return Ic=i,Ce=r,qC=s,io=l,Al=d,Rc=c,WC=u,Cd=h,Is=f,At=m,hp=w,Yi=p,Yi.splice(0,Yi.length,...g),os=v,rn=new DataView(At.buffer,At.byteOffset,At.byteLength),x}function KC(){At=null,Cd=null,Yi=null}function PK(t){t.unpack?Na[t.type]=t.unpack:Na[t.type]=t}var QC=new Array(147);for(let t=0;t<256;t++)QC[t]=+("1e"+Math.floor(45.15-t*.30103));var Fx=new zx({useRecords:!1}),Ghe=Fx.unpack,Whe=Fx.unpackMultiple,qhe=Fx.unpack,OK={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},IK=new Float32Array(1),$he=new Uint8Array(IK.buffer,0,4),Nx;try{Nx=new TextEncoder}catch(t){}var jx,JC,Ux=typeof zu<"u",eE=Ux?zu.allocUnsafeSlow:Uint8Array,nI=Ux?zu:Uint8Array,rI=Ux?4294967296:2144337920,We,ar,ze=0,Cl,El=null,RK=/[\u0080-\uFFFF]/,Yv=Symbol("record-id"),aI=class extends zx{constructor(t){super(t),this.offset=0;let i,r,s,l,d,c,u=0,h=nI.prototype.utf8Write?function(T,O,z){return We.utf8Write(T,O,z)}:Nx&&Nx.encodeInto?function(T,O){return Nx.encodeInto(T,We.subarray(O)).written}:!1,f=this;t||(t={});let m=t&&t.sequential,p=t.structures||t.saveStructures,g=t.maxSharedStructures;if(g==null&&(g=p?32:0),g>8160)throw new Error("Maximum maxSharedStructure is 8160");let v=t.maxOwnStructures;v==null&&(v=p?32:64),m&&!t.saveStructures&&(this.structures=[]);let w=g>32||v+g>64,x=g+64,_=g+v+64;if(_>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");let k=[],A=0,C=0;this.pack=this.encode=function(T,O){if(We||(We=new eE(8192),ar=new DataView(We.buffer,0,8192),ze=0),Cl=We.length-10,Cl-ze<2048?(We=new eE(We.length),ar=new DataView(We.buffer,0,We.length),Cl=We.length-10,ze=0):ze=ze+7&2147483640,r=ze,c=f.structuredClone?new Map:null,f.bundleStrings?(El=["",""],We[ze++]=214,We[ze++]=98,El.position=ze-r,ze+=4):El=null,s=f.structures,s){s.uninitialized&&(s=f._mergeStructures(f.getStructures()));let z=s.sharedLength||0;if(z>g)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+s.sharedLength);if(!s.transitions){s.transitions=Object.create(null);for(let L=0;L<z;L++){let B=s[L];if(!B)continue;let j,V=s.transitions;for(let H=0,Y=B.length;H<Y;H++){let se=B[H];j=V[se],j||(j=V[se]=Object.create(null)),V=j}V[Yv]=L+64}u=z}m||(s.nextId=z+64)}l&&(l=!1),d=s||[];try{if(M(T),El){ar.setUint32(El.position+r,ze-El.position-r);let z=El;El=null,M(z[0]),M(z[1])}if(f.offset=ze,c&&c.idsToInsert){ze+=c.idsToInsert.length*6,ze>Cl&&P(ze),f.offset=ze;let z=LK(We.subarray(r,ze),c.idsToInsert);return c=null,z}return O&BK?(We.start=r,We.end=ze,We):We.subarray(r,ze)}finally{if(s){if(C<10&&C++,A>1e4)s.transitions=null,C=0,A=0,k.length>0&&(k=[]);else if(k.length>0&&!m){for(let z=0,L=k.length;z<L;z++)k[z][Yv]=0;k=[]}if(l&&f.saveStructures){let z=s.sharedLength||g;s.length>z&&(s=s.slice(0,z));let L=We.subarray(r,ze);return f.saveStructures(s,u)===!1?(f._mergeStructures(f.getStructures()),f.pack(T)):(u=z,L)}}O&FK&&(ze=r)}};let M=T=>{ze>Cl&&(We=P(ze));var O=typeof T,z;if(O==="string"){let L=T.length;if(El&&L>=8&&L<4096){let V=RK.test(T);El[V?0:1]+=T,We[ze++]=193,M(V?-L:L);return}let B;L<32?B=1:L<256?B=2:L<65536?B=3:B=5;let j=L*3;if(ze+j>Cl&&(We=P(ze+j)),L<64||!h){let V,H,Y,se=ze+B;for(V=0;V<L;V++)H=T.charCodeAt(V),H<128?We[se++]=H:H<2048?(We[se++]=H>>6|192,We[se++]=H&63|128):(H&64512)===55296&&((Y=T.charCodeAt(V+1))&64512)===56320?(H=65536+((H&1023)<<10)+(Y&1023),V++,We[se++]=H>>18|240,We[se++]=H>>12&63|128,We[se++]=H>>6&63|128,We[se++]=H&63|128):(We[se++]=H>>12|224,We[se++]=H>>6&63|128,We[se++]=H&63|128);z=se-ze-B}else z=h(T,ze+B,j);z<32?We[ze++]=160|z:z<256?(B<2&&We.copyWithin(ze+2,ze+1,ze+1+z),We[ze++]=217,We[ze++]=z):z<65536?(B<3&&We.copyWithin(ze+3,ze+2,ze+2+z),We[ze++]=218,We[ze++]=z>>8,We[ze++]=z&255):(B<5&&We.copyWithin(ze+5,ze+3,ze+3+z),We[ze++]=219,ar.setUint32(ze,z),ze+=4),ze+=z}else if(O==="number")if(T>>>0===T)T<64?We[ze++]=T:T<256?(We[ze++]=204,We[ze++]=T):T<65536?(We[ze++]=205,We[ze++]=T>>8,We[ze++]=T&255):(We[ze++]=206,ar.setUint32(ze,T),ze+=4);else if(T>>0===T)T>=-32?We[ze++]=256+T:T>=-128?(We[ze++]=208,We[ze++]=T+256):T>=-32768?(We[ze++]=209,ar.setInt16(ze,T),ze+=2):(We[ze++]=210,ar.setInt32(ze,T),ze+=4);else{let L;if((L=this.useFloat32)>0&&T<4294967296&&T>=-2147483648){We[ze++]=202,ar.setFloat32(ze,T);let B;if(L<4||(B=T*QC[(We[ze]&127)<<1|We[ze+1]>>7])>>0===B){ze+=4;return}else ze--}We[ze++]=203,ar.setFloat64(ze,T),ze+=8}else if(O==="object")if(!T)We[ze++]=192;else{if(c){let B=c.get(T);if(B){if(!B.id){let j=c.idsToInsert||(c.idsToInsert=[]);B.id=j.push(B)}We[ze++]=214,We[ze++]=112,ar.setUint32(ze,B.id),ze+=4;return}else c.set(T,{offset:ze-r})}let L=T.constructor;if(L===Object)D(T,!0);else if(L===Array){z=T.length,z<16?We[ze++]=144|z:z<65536?(We[ze++]=220,We[ze++]=z>>8,We[ze++]=z&255):(We[ze++]=221,ar.setUint32(ze,z),ze+=4);for(let B=0;B<z;B++)M(T[B])}else if(L===Map){z=T.size,z<16?We[ze++]=128|z:z<65536?(We[ze++]=222,We[ze++]=z>>8,We[ze++]=z&255):(We[ze++]=223,ar.setUint32(ze,z),ze+=4);for(let[B,j]of T)M(B),M(j)}else{for(let B=0,j=jx.length;B<j;B++){let V=JC[B];if(T instanceof V){let H=jx[B];if(H.write){H.type&&(We[ze++]=212,We[ze++]=H.type,We[ze++]=0),M(H.write.call(this,T));return}let Y=We,se=ar,re=ze;We=null;let $;try{$=H.pack.call(this,T,te=>(We=Y,Y=null,ze+=te,ze>Cl&&P(ze),{target:We,targetView:ar,position:ze-te}),M)}finally{Y&&(We=Y,ar=se,ze=re,Cl=We.length-10)}$&&($.length+ze>Cl&&P($.length+ze),ze=zK($,We,ze,H.type));return}}D(T,!T.hasOwnProperty)}}else if(O==="boolean")We[ze++]=T?195:194;else if(O==="bigint"){if(T<BigInt(1)<<BigInt(63)&&T>=-(BigInt(1)<<BigInt(63)))We[ze++]=211,ar.setBigInt64(ze,T);else if(T<BigInt(1)<<BigInt(64)&&T>0)We[ze++]=207,ar.setBigUint64(ze,T);else if(this.largeBigIntToFloat)We[ze++]=203,ar.setFloat64(ze,Number(T));else throw new RangeError(T+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");ze+=8}else if(O==="undefined")this.encodeUndefinedAsNil?We[ze++]=192:(We[ze++]=212,We[ze++]=0,We[ze++]=0);else if(O==="function")M(this.writeFunction&&this.writeFunction());else throw new Error("Unknown type: "+O)},D=this.useRecords===!1?this.variableMapSize?T=>{let O=Object.keys(T),z=O.length;z<16?We[ze++]=128|z:z<65536?(We[ze++]=222,We[ze++]=z>>8,We[ze++]=z&255):(We[ze++]=223,ar.setUint32(ze,z),ze+=4);let L;for(let B=0;B<z;B++)M(L=O[B]),M(T[L])}:(T,O)=>{We[ze++]=222;let z=ze-r;ze+=2;let L=0;for(let B in T)(O||T.hasOwnProperty(B))&&(M(B),M(T[B]),L++);We[z+++r]=L>>8,We[z+r]=L&255}:T=>{let O=Object.keys(T),z,L=d.transitions||(d.transitions=Object.create(null)),B=0;for(let V=0,H=O.length;V<H;V++){let Y=O[V];z=L[Y],z||(z=L[Y]=Object.create(null),B++),L=z}let j=L[Yv];if(j)j>=96&&w?(We[ze++]=((j-=96)&31)+96,We[ze++]=j>>5):We[ze++]=j;else{j=d.nextId,j||(j=64),j<x&&this.shouldShareStructure&&!this.shouldShareStructure(O)?(j=d.nextOwnId,j<_||(j=x),d.nextOwnId=j+1):(j>=_&&(j=x),d.nextId=j+1);let V=O.highByte=j>=96&&w?j-96>>5:-1;L[Yv]=j,d[j-64]=O,j<x?(O.isShared=!0,d.sharedLength=j-63,l=!0,V>=0?(We[ze++]=(j&31)+96,We[ze++]=V):We[ze++]=j):(V>=0?(We[ze++]=213,We[ze++]=114,We[ze++]=(j&31)+96,We[ze++]=V):(We[ze++]=212,We[ze++]=114,We[ze++]=j),B&&(A+=C*B),k.length>=v&&(k.shift()[Yv]=0),k.push(L),M(O))}for(let V=0,H=O.length;V<H;V++)M(T[O[V]])},P=T=>{let O;if(T>16777216){if(T-r>rI)throw new Error("Packed buffer would be larger than maximum buffer size");O=Math.min(rI,Math.round(Math.max((T-r)*(T>67108864?1.25:2),4194304)/4096)*4096)}else O=(Math.max(T-r<<2,We.length-1)>>12)+1<<12;let z=new eE(O);return ar=new DataView(z.buffer,0,O),We.copy?We.copy(z,0,r,T):z.set(We.slice(r,T)),ze-=r,r=0,Cl=z.length-10,We=z}}useBuffer(t){We=t,ar=new DataView(We.buffer,We.byteOffset,We.byteLength),ze=0}};JC=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,HO],jx=[{pack(t,i,r){let s=t.getTime()/1e3;if((this.useTimestamp32||t.getMilliseconds()===0)&&s>=0&&s<4294967296){let{target:l,targetView:d,position:c}=i(6);l[c++]=214,l[c++]=255,d.setUint32(c,s)}else if(s>0&&s<17179869184){let{target:l,targetView:d,position:c}=i(10);l[c++]=215,l[c++]=255,d.setUint32(c,t.getMilliseconds()*4e6+(s/1e3/4294967296>>0)),d.setUint32(c+4,s)}else if(isNaN(s)){if(this.onInvalidDate)return i(0),r(this.onInvalidDate());let{target:l,targetView:d,position:c}=i(3);l[c++]=212,l[c++]=255,l[c++]=255}else{let{target:l,targetView:d,position:c}=i(15);l[c++]=199,l[c++]=12,l[c++]=255,d.setUint32(c,t.getMilliseconds()*1e6),d.setBigInt64(c+4,BigInt(Math.floor(s)))}}},{pack(t,i,r){let s=Array.from(t),{target:l,position:d}=i(this.structuredClone?3:0);this.structuredClone&&(l[d++]=212,l[d++]=115,l[d++]=0),r(s)}},{pack(t,i,r){let{target:s,position:l}=i(this.structuredClone?3:0);this.structuredClone&&(s[l++]=212,s[l++]=101,s[l++]=0),r([t.name,t.message])}},{pack(t,i,r){let{target:s,position:l}=i(this.structuredClone?3:0);this.structuredClone&&(s[l++]=212,s[l++]=120,s[l++]=0),r([t.source,t.flags])}},{pack(t,i){this.structuredClone?sI(t,16,i):oI(Ux?zu.from(t):new Uint8Array(t),i)}},{pack(t,i){let r=t.constructor;r!==nI&&this.structuredClone?sI(t,tI.indexOf(r.name),i):oI(t,i)}},{pack(t,i){let{target:r,position:s}=i(1);r[s]=193}}];function sI(t,i,r,s){let l=t.byteLength;if(l+1<256){var{target:d,position:c}=r(4+l);d[c++]=199,d[c++]=l+1}else if(l+1<65536){var{target:d,position:c}=r(5+l);d[c++]=200,d[c++]=l+1>>8,d[c++]=l+1&255}else{var{target:d,position:c,targetView:u}=r(7+l);d[c++]=201,u.setUint32(c,l+1),c+=4}d[c++]=116,d[c++]=i,d.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),c)}function oI(t,i){let r=t.byteLength;var s,l;if(r<256){var{target:s,position:l}=i(r+2);s[l++]=196,s[l++]=r}else if(r<65536){var{target:s,position:l}=i(r+3);s[l++]=197,s[l++]=r>>8,s[l++]=r&255}else{var{target:s,position:l,targetView:d}=i(r+5);s[l++]=198,d.setUint32(l,r),l+=4}s.set(t,l)}function zK(t,i,r,s){let l=t.length;switch(l){case 1:i[r++]=212;break;case 2:i[r++]=213;break;case 4:i[r++]=214;break;case 8:i[r++]=215;break;case 16:i[r++]=216;break;default:l<256?(i[r++]=199,i[r++]=l):l<65536?(i[r++]=200,i[r++]=l>>8,i[r++]=l&255):(i[r++]=201,i[r++]=l>>24,i[r++]=l>>16&255,i[r++]=l>>8&255,i[r++]=l&255)}return i[r++]=s,i.set(t,r),r+=l,r}function LK(t,i){let r,s=i.length*6,l=t.length-s;for(i.sort((d,c)=>d.offset>c.offset?1:-1);r=i.pop();){let d=r.offset,c=r.id;t.copyWithin(d+s,d,l),s-=6;let u=d+s;t[u++]=214,t[u++]=105,t[u++]=c>>24,t[u++]=c>>16&255,t[u++]=c>>8&255,t[u++]=c&255,l=d}return t}function fp(t){if(t.Class){if(!t.pack&&!t.write)throw new Error("Extension has no pack or write function");if(t.pack&&!t.type)throw new Error("Extension has no type (numeric code to identify the extension)");JC.unshift(t.Class),jx.unshift(t)}PK(t)}var lI=new aI({useRecords:!1}),Zhe=lI.pack,Yhe=lI.pack,{NEVER:Xhe,ALWAYS:Khe,DECIMAL_ROUND:Qhe,DECIMAL_FIT:Jhe}=OK,BK=512,FK=1024,dI=new aI({structuredClone:!0});fp({Class:ki.prototype.constructor,type:1,write(t){return Z({},t)},read(t){return Object.setPrototypeOf(t,ki.prototype),t}}),fp({Class:Kt.prototype.constructor,type:2,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,Kt.prototype),t}}),fp({Class:ss.prototype.constructor,type:3,write(t){return[...t]},read(t){return Object.setPrototypeOf(t,ss.prototype),t}}),fp({Class:NO.prototype.constructor,type:4,write(t){return t.id},read(t){return new NO(t)}}),fp({Class:jO.prototype.constructor,type:5,write(t){return t.data},read(t){return new jO(t)}}),fp({Class:Dr.prototype.constructor,type:6,write(t){return Z({},t)},read(t){return Object.setPrototypeOf(t,Dr.prototype),t}});function NK(t){var i=0;if(t.length===0)return i;for(let r=0;r<t.length;r++){let s=t[r];i=(i<<5)-i+s,i=i&i}return i}function tE(t){if(LC(t))return t;if(Array.isArray(t))return t.map(tE);if(typeof t=="object"&&t!==null){let i={};for(let r of Object.keys(t).sort())i[r]=tE(t[r]);return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),i}else return t}var iE;(t=>{function i(l){return dI.pack(l)}t.serialize=i;function r(l){return dI.unpack(l)}t.deserialize=r;function s(l){return NK(i(tE(l))).toString()}t.checksum=s})(iE||(iE={}));var cI;(t=>{function i(s){return s.type==="Conditional"?s.condition.type==="Distance"?"Distance":"StateChange":s.type}t.toEventUIType=i;function r(s){return s==="Distance"||s==="StateChange"?"Conditional":s}t.fromEventUIType=r})(cI||(cI={}));var Rs={LookAt:[],Follow:["Create"],DragDrop:["Transition","Animation","Audio","Create","SetVariable","DynamicVariablePlay","Conditional"],MouseHover:["Transition","Animation","Create","Destroy","SwitchCamera","SceneTransition","SetVariable","DynamicVariablePlay","Conditional"],Scroll:["Transition","Animation","Create","SetVariable","DynamicVariablePlay","Conditional"],Start:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Conditional:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MouseUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],MousePress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyDown:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyUp:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],KeyPress:["Transition","Animation","Audio","Video","Link","Create","SwitchCamera","Reset","SetVariable","DynamicVariablePlay","Conditional"],GameControl:["Transition","Animation","Audio","Create","Conditional"],Collision:["Transition","Animation","Audio","Video","Create","Destroy","Reset","SetVariable","DynamicVariablePlay","Conditional"],Trigger:["Transition","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],Resize:["Transition","Animation","Audio","Video","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"],VariableChange:["Transition","Animation","Audio","Video","Link","Create","Destroy","SwitchCamera","SceneTransition","Reset","SetVariable","DynamicVariablePlay","Conditional"]},uI;(t=>{function i(s){return s.type==="MouseDown"||s.type==="MouseUp"||s.type==="MousePress"||s.type==="KeyDown"||s.type==="KeyUp"||s.type==="KeyPress"}t.is=i;function r(s){return s==="MouseDown"||s==="MouseUp"||s==="MousePress"?{type:s,mode:"Object",disabled:!1,runMode:"Once",actions:new Kt}:{type:s,disabled:!1,key:void 0,runMode:"Once",actions:new Kt}}t.defaultData=r})(uI||(uI={}));var Vx;(t=>{function i(r){return{type:"Property",value:[r!=null?r:null,"position","x"]}}t.propertyDefaultData=i,t.valueDefaultData={type:"Literal",value:0}})(Vx||(Vx={}));var nE;(t=>{function i(l){return{type:"Comparison",operator:"==",lOperand:Vx.propertyDefaultData(l),rOperand:Z({},Vx.valueDefaultData)}}t.comparisonDefaultData=i;function r(l){return{type:"Distance",toObject:l!=null?l:null,fromObject:l!=null?l:null,distance:200}}t.distanceDefaultData=r;function s(l,d){return{type:"State",object:l!=null?l:null,state:d!=null?d:null}}t.stateDefaultData=s})(nE||(nE={}));var hI;(t=>{function i(s){return s.type==="Conditional"}t.is=i;function r(s){return{type:"Conditional",disabled:!1,inActions:new Kt,outActions:new Kt,condition:nE.distanceDefaultData(s)}}t.defaultData=r})(hI||(hI={}));var fI;(t=>t.defaultData={type:"DragDrop",cursor:"hand",disabled:!1,dampingFactor:1,objects:[],snapTo:"center",snapSurfaceMode:"bbox",snapSurfaceOffset:0,dropOn:"all",autoOrient:!0,dropDestinations:[],plane:"adaptive",planeMode:"locked",referenceFrame:"global",limits:[-1/0,1/0,-1/0,1/0,-1/0,1/0],drop:!1,resetOnSnapFail:!1,snapSpeed:20,resetSpeed:20,dragDropActions:{drag:new Kt,drop:new Kt}})(fI||(fI={}));var rE;(t=>t.defaultData={type:"Follow",disabled:!1,maxDelta:0,dampingFactor:1,target:"cursor",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledTranslation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5,actions:new Kt})(rE||(rE={}));var aE;(t=>t.defaultData={type:"LookAt",disabled:!1,distance:1e3,dampingFactor:1,target:"cursor",tilt:"up",axis:"z",plane:"custom",resetOnPointerLeave:!0,resetAfterDistanceLimit:!0,enabledRotation:[!0,!0,!0],limitDistanceEnabled:!1,limitDistance:1e3,snapDelay:0,resetSpeed:5})(aE||(aE={}));var pI;(t=>{function i(s){return s.type==="MouseHover"}t.is=i;function r(){return{type:"MouseHover",disabled:!1,actions:new Kt}}t.defaultData=r})(pI||(pI={}));var mI;(t=>{function i(s){return s.type==="Scroll"}t.is=i;function r(){return{type:"Scroll",disabled:!1,steps:100,trigger:"load",startFrom:"enter",enterAnchor:"top",startOffset:0,endAfter:400,actions:new Kt}}t.defaultData=r})(mI||(mI={}));var gI;(t=>{function i(s){return s.type==="Start"}t.is=i;function r(){return{type:"Start",disabled:!1,actions:new Kt}}t.defaultData=r})(gI||(gI={}));var vI;(t=>{function i(s){return s.type==="Collision"}t.is=i;function r(){return{type:"Collision",disabled:!1,runMode:"Once",target:"character",actions:new Kt}}t.defaultData=r})(vI||(vI={}));var yI;(t=>{function i(s){return s.type==="Trigger"}t.is=i;function r(s,l){return{type:"Trigger",disabled:!1,runMode:"Once",target:"all",triggeringObjects:[],actions:new Kt,triggerZone:"box",position:l.toArray(),rotation:[0,0,0],size:s.toArray(),radius:s.length()/2,helperVisible:!0}}t.defaultData=r})(yI||(yI={}));var sE;(t=>{t.defaultSizes={mobile:[480,480],tablet:[768,768],desktop:[1200,1200],custom:[769,1200]};function i(c){return c.type==="Resize"}t.is=i;function r(c){return typeof c=="string"?c:"custom"}t.sizeToDevice=r;function s(c){return typeof c=="string"?[...t.defaultSizes[c]]:[...c]}t.deviceToSize=s;function l(){let c={size:"mobile",operator:"<",actions:new Kt},u={size:"tablet",operator:"<",actions:new Kt},h={size:[...t.defaultSizes.custom],operator:"<>",actions:new Kt},f=new Kt;return f.push({id:fe.generateUUID(),fi:0,data:c},{id:fe.generateUUID(),fi:1,data:u},{id:fe.generateUUID(),fi:2,data:h}),{type:"Resize",disabled:!1,orientation:"horizontal",breakpoints:f}}t.defaultData=l;function d(){return{size:[...t.defaultSizes.custom],operator:"<>",actions:new Kt}}t.defaultBreakpointData=d})(sE||(sE={}));var oE;(t=>{t.propertyPaths={Position:["position"],"Position X":["position","x"],"Position Y":["position","y"],"Position Z":["position","z"],Rotation:["rotation"],"Rotation X":["rotation","x"],"Rotation Y":["rotation","y"],"Rotation Z":["rotation","z"],Scale:["scale"],"Scale X":["scale","x"],"Scale Y":["scale","y"],"Scale Z":["scale","z"],Width:["width"],Height:["height"],Depth:["depth"],"Mouse Position X":["mouse","x"],"Mouse Position Y":["mouse","y"],"Mouse Pressed":["mouse","pressed"],"Screen Width":["mouse","width"],"Screen Height":["mouse","height"],"Hit Position X":["raycast","x"],"Hit Position Y":["raycast","y"],"Hit Position Z":["raycast","z"],"Hit Object Position X":["raycast","objX"],"Hit Object Position Y":["raycast","objY"],"Hit Object Position Z":["raycast","objZ"]};function i(s){return s.type==="VariableChange"}t.is=i;function r(){return{disabled:!1,type:"VariableChange",actions:new Kt,variableId:"",objectId:null,property:"Position X"}}t.defaultData=r})(oE||(oE={}));var pp="personal camera",Xv="a218fcc3-276b-49b9-b485-49037fd14f5f",jK=2960946,no=5526619,mp;(t=>{function i(s,l){return s[0]===l[0]&&s[1]===l[1]}t.isEqual=i;function r(s,l,d){return[s[0]+(l[0]-s[0])*d,s[1]+(l[1]-s[1])*d]}t.lerp=r})(mp||(mp={}));var nh;(t=>{function i(h,f){return h[0]===f[0]&&h[1]===f[1]&&h[2]===f[2]}t.isEqual=i;function r(h,f){return[h[0]+f[0],h[1]+f[1],h[2]+f[2]]}t.add=r;function s(h,f){return[h[0]-f[0],h[1]-f[1],h[2]-f[2]]}t.sub=s;function l(h,f){return[h[0]/f[0],h[1]/f[1],h[2]/f[2]]}t.div=l;function d(h,f){return[h[0]*f[0],h[1]*f[1],h[2]*f[2]]}t.mul=d;function c(h,f){return Math.hypot(h[0]-f[0],h[1]-f[1],h[2]-f[2])}t.dist=c;function u(h,f,m){return[h[0]+(f[0]-h[0])*m,h[1]+(f[1]-h[1])*m,h[2]+(f[2]-h[2])*m]}t.lerp=u})(nh||(nh={}));var Hx;(t=>{function i(s,l){return s[0]===l[0]&&s[1]===l[1]&&s[2]===l[2]&&s[3]===l[3]}t.isEqual=i;function r(s,l,d){return[s[0]+(l[0]-s[0])*d,s[1]+(l[1]-s[1])*d,s[2]+(l[2]-s[2])*d,s[3]+(l[3]-s[3])*d]}t.lerp=r})(Hx||(Hx={}));var gp;(t=>{t.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(l,d){for(let c=0;c<16;c++)if(l[c]!==d[c])return!1;return!0}t.isEqual=i;function r(l){return l!=null?l:t.identity}t.simplify=r;function s(l,d){let c=d.slice(0);for(var u=0,h=d.length;u<h;u+=3){let f=l[3]*d[u]+l[7]*d[u+1]+l[11]*d[u+2]+l[15];c[u]=(l[0]*d[u]+l[4]*d[u+1]+l[8]*d[u+2]+l[12])/f,c[u+1]=(l[1]*d[u]+l[5]*d[u+1]+l[9]*d[u+2]+l[13])/f,c[u+2]=(l[2]*d[u]+l[6]*d[u+1]+l[10]*d[u+2]+l[14])/f}return c}t.applyMatrix4=s})(gp||(gp={}));var ja;(t=>{function i(h){return typeof h=="object"&&typeof h.r=="number"&&typeof h.g=="number"&&typeof h.b=="number"}t.isRGB=i,t.white={r:1,g:1,b:1},t.red={r:1,g:0,b:0},t.black={r:0,g:0,b:0};function r(h){return{r:Math.round(h.r*255),g:Math.round(h.g*255),b:Math.round(h.b*255),a:1}}t.toRgb255a1=r;function s(h){return{r:h.r,g:h.g,b:h.b}}t.clone=s;function l(h){return h=Math.floor(h),{r:(h>>16&255)/255,g:(h>>8&255)/255,b:(h&255)/255}}t.fromHex=l;function d(h){return Math.round(h.r*255)*65536+Math.round(h.g*255)*256+Math.round(h.b*255)}t.toHex=d;function c(h,f){return h.r===f.r&&h.g===f.g&&h.b===f.b}t.equals=c;function u(h,f,m){return{r:h.r+(f.r-h.r)*m,g:h.g+(f.g-h.g)*m,b:h.b+(f.b-h.b)*m}}t.lerp=u})(ja||(ja={}));var Bo;(t=>{t.white=ge(Z({},ja.white),{a:1}),t.transparent=ge(Z({},ja.white),{a:0});function i(c){return{r:c[0],g:c[1],b:c[2],a:c[3]}}t.from0to1=i;function r(c,u){return ge(Z({},ja.fromHex(c)),{a:u})}t.fromHexAndA=r;function s(c){return{r:Math.round(c.r*255),g:Math.round(c.g*255),b:Math.round(c.b*255),a:c.a}}t.toRgb255a1=s;function l(c,u){return ja.equals(c,u)&&c.a===u.a}t.equals=l;function d(c,u,h){return{r:c.r+(u.r-c.r)*h,g:c.g+(u.g-c.g)*h,b:c.b+(u.b-c.b)*h,a:c.a+(u.a-c.a)*h}}t.lerp=d})(Bo||(Bo={}));var lE;(t=>t.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]})(lE||(lE={}));var bI;(t=>t.defaultData={mass:1,stiffness:80,damping:10,velocity:0})(bI||(bI={}));var wI;(t=>t.defaultData={control1:[.5,0],control2:[.5,1]})(wI||(wI={}));var zc;(t=>(t.linear=[0,0,1,1],t.ease=[.25,.1,.25,1],t.easeIn=[.42,0,1,1],t.easeOut=[0,0,.58,1],t.easeInOut=[.42,0,.58,1]))(zc||(zc={}));function xI(t){return typeof t=="string"&&t.length===36?/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t):!1}var rh;(t=>{t.all=["PerspectiveCamera","OrthographicCamera"];function i(r){return t.all.includes(r)}t.is=i})(rh||(rh={}));var vp;(t=>{t.DefaultUp=[0,1,0],t.DefaultTargetOffset=1e3,t.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:70,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:t.DefaultUp,isUpVectorFlipped:!1,targetOffset:t.DefaultTargetOffset};function i(r){return r.type==="PerspectiveCamera"?r.perspective.zoom:r.orthographic.zoom}t.getZoom=i})(vp||(vp={}));var Lc;(t=>{function i(s,l=.1){return{disabled:!1,type:"linear",hideBase:!1,count:3,radial:{radius:Math.max(s[0],s[1])*2,start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},linear:{scale:[1,1,1],rotation:[0,0,0],position:[s[0]+s[0]*l,0,0]},grid:{count:[2,2,2],size:s.map(d=>d*(1+l)),useCenter:!0},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}}t.defaultData=i;function r(s,l){let d=Z({},s);if(_I.forEach(c=>{var u;Object.assign(d,{[c]:(u=l[c])!=null?u:s[c]})}),d.radial=Z({},s.radial),l.radial){let c=s.radial,u=l.radial;kI.forEach(h=>{var f;Object.assign(d.radial,{[h]:(f=u[h])!=null?f:c[h]})})}if(d.linear=Z({},s.linear),l.linear){let c=s.linear,u=l.linear;SI.forEach(h=>{var f;Object.assign(d.linear,{[h]:(f=u[h])!=null?f:c[h]})})}if(d.grid=Z({},s.grid),l.grid){let c=s.grid,u=l.grid;AI.forEach(h=>{var f;Object.assign(d.grid,{[h]:(f=u[h])!=null?f:c[h]})})}if(d.toObject=Z({},s.toObject),l.toObject){let c=s.toObject,u=l.toObject;CI.forEach(h=>{var f;Object.assign(d.toObject,{[h]:(f=u[h])!=null?f:c[h]})})}if(d.randomnessObject=Z({},s.randomnessObject),l.randomnessObject){let c=s.randomnessObject,u=l.randomnessObject;EI.forEach(h=>{var f;Object.assign(d.randomnessObject,{[h]:(f=u[h])!=null?f:c[h]})})}return d}t.merge=r})(Lc||(Lc={}));var dE;(t=>{t.defaultData={radial:{},linear:{},grid:{},toObject:{},randomnessObject:{}};let i=["radial","linear","grid","toObject","randomnessObject"];function r(s,l){let d=[];s.count!==void 0&&d.push({type:0,path:l,props:{count:s.count}});for(let c of i){let u=s[c];u&&Object.keys(u).length>0&&d.push({type:0,path:[...l,c],props:u})}return d}t.toOps=r})(dE||(dE={}));var _I=["count"],kI=["radius","start","end","position","scale","rotation"],SI=["position","scale","rotation"],AI=["count","size"],CI=["count","position","scale","rotation"],EI=["strength","scale","rotation","position","movement","seed","freqScale"],cE;(t=>{t.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"];function i(r){return t.all.includes(r)}t.is=i})(cE||(cE={}));var uE;(t=>{function i(s){return r(s)}t.defaultData=i;function r(s){if(s==="PointLight")return{type:s,color:Bo.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,penumbraSize:.5,depth:1e5};if(s==="SpotLight")return{type:s,color:Bo.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};if(s==="DirectionalLight")return{type:s,color:Bo.white,intensity:1,shadows:!0,size:2e3,depth:1e5,penumbraSize:.5,shadowResolution:1024,shadowRadius:1};throw new Error("not implemented")}})(uE||(uE={}));var yp;(t=>t.defaultData={enabled:"visibility",fusedBody:!0,rigidBody:"positioned",density:1,pointMass:0,gravityScale:1,friction:.5,damping:0,restitution:.2,colliderType:"convex",enabledRotation:[!0,!0,!0],enabledTranslation:[!0,!0,!0]})(yp||(yp={}));var hE;(t=>{t.defaultData={castShadow:!0,receiveShadow:!0};function i(r,s){return r.castShadow===s.castShadow&&r.receiveShadow===s.receiveShadow}t.equals=i})(hE||(hE={}));var fE;(t=>{t.defaultData={flatShading:!1,wireframe:!1,side:0};function i(r,s){return r.flatShading===s.flatShading&&r.side===s.side&&r.wireframe===s.wireframe}t.equals=i})(fE||(fE={}));var pE;(t=>t.defaultData=Z(Z({},fE.defaultData),hE.defaultData))(pE||(pE={}));var MI;(t=>{function i(r,s){var d,c,u,h;let l=[];if("material"in r){let f=typeof r.material=="string"?(c=s.materials[r.material])!=null?c:(d=s.lib.materials[r.material])==null?void 0:d.asset:r.material;f&&l.push(f)}else if("materials"in r)for(let f of r.materials){let m=typeof f=="string"?(h=s.materials[f])!=null?h:(u=s.lib.materials[f])==null?void 0:u.asset:f;m&&l.push(m)}return l}t.getMaterialData=i})(MI||(MI={}));var Gx;(t=>(t.defaultVideo={data:"",thumb:"/_assets/_videos/catThumb.png",type:"video",name:"Cat video"},t.maxSize=3e7))(Gx||(Gx={}));var TI;(t=>{function i(r){return r==="texture"||r==="video"||r==="color"||r==="depth"||r==="normal"||r==="gradient"||r==="noise"||r==="fresnel"||r==="rainbow"||r==="toon"||r==="outline"||r==="transmission"||r==="matcap"||r==="displace"||r==="pattern"||r==="light"}t.is=i})(TI||(TI={}));function UK(t){return t.type!=="displace"}var DI;(t=>{function i(r){return r==="phong"||r==="toon"||r==="lambert"||r==="physical"}t.is=i})(DI||(DI={}));var PI=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"],VK=["wrapping","image","video","name"],ls;(t=>{function i(d,c){let f=c,{texture:u}=f,h=Cn(f,["texture"]);if(Object.assign(d,h),u){let m=d.texture;m&&Object.assign(m,u)}}t.patch=i;function r(d,c){return d==="light"&&c?s(c):l(d)}t.defaultData=r;function s(d){let c={mode:0,isMask:!1,visible:!0,bumpMap:void 0,bumpMapIntensity:5,roughnessMap:void 0,alphaOverride:1};switch(d){case"phong":return ge(Z({},c),{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:5,type:"light",visible:!0,mode:0,occlusion:!0,alpha:.6});case"toon":return ge(Z({},c),{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1});case"lambert":return ge(Z({},c),{category:"lambert",emissive:{r:0,g:0,b:0},type:"light",alpha:1,visible:!0,mode:0,occlusion:!0});case"physical":return ge(Z({},c),{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0,occlusion:!0})}}function l(d){let c={alpha:1,mode:0,isMask:!1,visible:!0};switch(d){case"texture":return ge(Z({},c),{type:"texture",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{image:"image_0",wrapping:1e3,repeat:[1,1],offset:[0,0]},crop:!1});case"video":return ge(Z({},c),{type:"video",size:[128,128],blending:0,axis:"x",side:2,projection:0,texture:{video:Gx.defaultVideo,wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!1});case"color":return ge(Z({},c),{type:"color",color:ja.fromHex(no)});case"depth":return ge(Z({},c),{type:"depth",gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1]],steps:[0,1],near:50,far:200});case"normal":return ge(Z({},c),{type:"normal",cnormal:[1,1,1]});case"gradient":return ge(Z({},c),{type:"gradient",gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]});case"noise":return ge(Z({},c),{type:"noise",size:[100,100,100],noiseType:0,scale:1,move:1,colorA:ge(Z({},ja.fromHex(6710886)),{a:1}),colorB:ge(Z({},ja.fromHex(6710886)),{a:1}),colorC:ge(Z({},ja.fromHex(16777215)),{a:1}),colorD:ge(Z({},ja.fromHex(16777215)),{a:1}),distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8],voronoiStyle:0,highCut:1,lowCut:0,smoothness:.3,seed:0,quality:1});case"fresnel":return ge(Z({},c),{type:"fresnel",color:Bo.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1});case"rainbow":return ge(Z({},c),{type:"rainbow",filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]});case"toon":return ge(Z({},c),{type:"toon",positioning:2,colors:[[0,0,0,1],[.5,.5,.5,1],[.5,.5,.5,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,.475,.525,1,1,1,1,1,1,1],num:4,source:[0,1e3,0],isWorldSpace:!0,noiseStrength:0,noiseScale:1,shadowColor:Bo.fromHexAndA(0,0),offset:[0,0,0]});case"outline":return ge(Z({},c),{type:"outline",outlineColor:Bo.fromHexAndA(0,1),contourColor:Bo.fromHexAndA(0,1),outlineWidth:2,contourWidth:5,outlineThreshold:.4,contourThreshold:0,outlineSmoothing:0,contourFrequency:10,contourDirection:[0,1,0],positionalLines:!1,compensation:!0});case"matcap":return ge(Z({},c),{type:"matcap",texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}});case"transmission":return ge(Z({},c),{type:"transmission",thickness:10,ior:1.5,roughness:1});case"displace":return{visible:!0,type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,voronoiStyle:0,smoothness:.3,seed:0,highCut:1,lowCut:0,quality:1};case"pattern":return ge(Z({},c),{type:"pattern",style:0,projection:0,axis:"y",blending:0,offset:[0,0],colorA:ge(Z({},ja.fromHex(0)),{a:1}),colorB:ge(Z({},ja.fromHex(16777215)),{a:1}),frequency:[10,10],size:.5,variation:0,smoothness:.5,zigzag:0,rotation:0,vertical:[0,1],horizontal:[0,1],sides:6})}}})(ls||(ls={}));var pa;(t=>{function i(f){return!f.layers.some(m=>m.data.type==="texture"&&m.data.projection!==0||m.data.type==="depth"&&!m.data.isWorldSpace||m.data.type==="noise"||m.data.type==="displace")}t.isMergable=i;function r(f){let m="";return f.layers.forEach(p=>{Object.entries(p.data).forEach(([g,v])=>{m+=`${g}${v}`,Array.isArray(v)?v.forEach(w=>m+=`${w}`):typeof v=="object"?Object.values(v).forEach(w=>{typeof w=="number"?m+=`${w.toFixed(4)}`:m+=`${w}`}):m+=`${v}`})}),m}t.getHash=r;function s(){return{layers:new Kt}}t.defaultEmptyData=s;function l(f="layer1",m="layer2"){return c("phong",f,m)}t.defaultData=l;function d(f,m){return ge(Z({},f),{name:m})}t.withName=d;function c(f,m="layer1",p="layer2"){let g=new Kt;return g.push({fi:0,data:ls.defaultData("light",f),id:m}),g.push({fi:1,data:ls.defaultData("color"),id:p}),{layers:g}}t.defaultTwoLayerData=c;function u(f,m="phong",p="layer1",g="layer2"){let v=ls.defaultData("texture");Object.assign(v.texture,{image:f});let w=new Kt;return w.push({fi:0,data:v,id:p}),w.push({fi:1,data:ls.defaultData("light",m),id:g}),{layers:w}}t.defaultTwoLayerTextureData=u;function h(f,m="phong",p="layer1",g="layer2"){let v=ls.defaultData("video");Object.assign(v.texture,{video:f});let w=new Kt;return w.push({fi:0,data:v,id:p}),w.push({fi:1,data:ls.defaultData("light",m),id:g}),{layers:w}}t.defaultTwoLayerVideoTextureData=h})(pa||(pa={}));var Wx;(t=>{function i(){return{points:new Kt,roundness:0,shapeHoles:[],isClosed:!1}}t.defaultData=i})(Wx||(Wx={}));var qx;(t=>{function i(){return{points:new Kt,lastInsertionPlane:null,subdivisions:12,isClosed:!1}}t.defaultData=i})(qx||(qx={}));var OI={type:"Ellipse",width:50,height:50,spikes:16,angle:360,innerRadius:0},mE;(t=>{function i(r,s){let l=Z({},r);return RI.forEach(d=>{var c;Object.assign(l,{[d]:(c=s[d])!=null?c:r[d]})}),l}t.merge=i})(mE||(mE={}));var II={shape:OI,depth:1,offset:0,bevel:50,bevelSides:6,angle:0,twist:0,startScale:1,endScale:1,capType:"flat"},RI=["depth","offset","angle","twist","startScale","endScale"],$x;(t=>{function i(s){return s==="PolygonGeometry"||s==="RectangleGeometry"||s==="StarGeometry"||s==="TriangleGeometry"||s==="EllipseGeometry"}t.is2DParametricMesh=i;function r(s){return s==="PolygonGeometry"||s==="PolygonGeometry"||s==="RectangleGeometry"||s==="StarGeometry"||s==="TriangleGeometry"||s==="EllipseGeometry"||s==="PathGeometry"||s==="VectorGeometry"||s==="ConeGeometry"||s==="CubeGeometry"||s==="CylinderGeometry"||s==="DodecahedronGeometry"||s==="HelixGeometry"||s==="IcosahedronGeometry"||s==="LatheGeometry"||s==="PyramidGeometry"||s==="SphereGeometry"||s==="PlaneGeometry"||s==="BackdropGeometry"||s==="TorusGeometry"||s==="TorusKnotGeometry"||s==="BooleanGeometry"||s==="TextGeometry"}t.isParametricMesh=r})($x||($x={}));var gE;(t=>{function i(r,s){let l=Z({},r);return Object.assign(l,s),l.type==="PathGeometry"&&"extrusion"in s&&s.extrusion&&(l.extrusion=Z({},r.extrusion),Object.assign(l.extrusion,mE.merge(l.extrusion,s.extrusion))),l}t.merge=i})(gE||(gE={}));var bp;(t=>{function i(r){if(r==="RectangleGeometry")return{width:320,height:320,type:r,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="PathGeometry")return{type:r,width:1,height:1,depth:1,path:qx.defaultData(),extrusion:II};if(r==="VectorGeometry")return{width:1,height:1,type:r,subdivisions:12,shape:Wx.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="BooleanGeometry")return{type:r,operation:2,width:0,height:0,depth:0,phongAngle:35};if(r==="TextGeometry")return{type:r,width:100,height:100,depth:0,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.2,letterSpacing:0,text:{textValue:""},textTransform:1,font:"Roboto_regular",extrudeBevelSize:0,extrudeBevelSegments:1};if(r==="SphereGeometry")return{type:"SphereGeometry",width:100,height:100,depth:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180};throw new Error("not implemented")}t.defaultData=i})(bp||(bp={}));var zI=["width","height","depth"],vE;(t=>t.defaultData={enabled:!1,useBackgroundColor:!1,color:ja.white,near:.1,far:2e3})(vE||(vE={}));var Zx;(t=>{let i={opacity:1,blendFunction:13,enabled:!1};t.defaultData={enabled:!1,pixelation:ge(Z({},i),{blendFunction:16,granularity:15}),bloom:ge(Z({},i),{blendFunction:16,intensity:1,blurScale:1,luminanceThreshold:.25,luminanceSmoothing:.025,kernelSize:3}),chromaticAberration:ge(Z({},i),{offset:[2,2]}),vignette:ge(Z({},i),{darkness:1,offset:0}),hueSaturation:ge(Z({},i),{hue:3,saturation:0}),brightnessContrast:ge(Z({},i),{brightness:.25,contrast:0}),depthOfField:ge(Z({},i),{focalLength:2,focusDistance:2,bokehScale:2}),noise:ge(Z({},i),{blendFunction:16})}})(Zx||(Zx={}));var yE;(t=>t.defaultData={softShadowQuality:"low"})(yE||(yE={}));var bE;(t=>t.defaultData={enabled:!0,color:{r:.8274509803921568,g:.8274509803921568,b:.8274509803921568},intensity:.75})(bE||(bE={}));var wE;(t=>t.defaultData={occlusion:!1,aoFullRes:!1,radius:256,bias:.5,aoColor:{r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}})(wE||(wE={}));var wp;(t=>t.defaultData={usePhysics:!1,gravity:-10})(wp||(wp={}));var xE;(t=>t.defaultData={playCamera:pp,gameControlObject:null})(xE||(xE={}));var _E;(t=>t.defaultData={backgroundColor:Bo.fromHexAndA(jK,1),postprocessing:Zx.defaultData,fog:vE.defaultData,globalPhysics:wp.defaultData,ambient:bE.defaultData,ao:wE.defaultData,shadow:yE.defaultData,publish:xE.defaultData})(_E||(_E={}));var LI;(t=>{function i(s){return s==="Component"||s==="Instance"}t.isComponentRelated=i;function r(s){return s==="Empty"||s==="Instance"}t.isEmptyOrComponent=r})(LI||(LI={}));var xp;(t=>{t.identity=ge(Z({},lE.identity),{hiddenMatrix:gp.identity});function i(l){return{position:l.position,rotation:l.rotation,scale:l.scale,hiddenMatrix:l.hiddenMatrix}}t.fromObject=i;function r(l,d){return{position:(d==null?void 0:d.position)||l.position,rotation:(d==null?void 0:d.rotation)||l.rotation,scale:(d==null?void 0:d.scale)||l.scale,hiddenMatrix:(d==null?void 0:d.hiddenMatrix)||l.hiddenMatrix}}t.merge=r;function s(l,d){return XX({position:nh.isEqual(l.position,d.position)?void 0:d.position,rotation:nh.isEqual(l.rotation,d.rotation)?void 0:d.rotation,scale:nh.isEqual(l.scale,d.scale)?null:d.scale,hiddenMatrix:gp.isEqual(l.hiddenMatrix,d.hiddenMatrix)?void 0:d.hiddenMatrix})}t.diff=s})(xp||(xp={}));var Ua;(t=>t.defaultData=ge(Z({states:new Kt,events:new Kt,visible:!0,raycastLock:!1,physics:yp.defaultData,pathSnapping:{pathId:null,slide:0,offset:0,orientation:"tangential"}},xp.identity),{cloner:null}))(Ua||(Ua={}));var kE;(t=>t.defaultData=Z({type:"Empty"},Ua.defaultData))(kE||(kE={}));var BI;(t=>t.defaultData=Z({type:"Component"},Ua.defaultData))(BI||(BI={}));var _p;(t=>t.defaultData=Z(Z({type:"Mesh"},Ua.defaultData),pE.defaultData))(_p||(_p={}));var Kv;(t=>t.defaultData=Z(ge(Z(Z({},Ua.defaultData),xp.identity),{position:[0,0,vp.DefaultTargetOffset]}),vp.defaultData))(Kv||(Kv={}));var SE;(t=>{function i(r){return Z(Z({},Ua.defaultData),uE.defaultData(r))}t.defaultData=i,t.defaultDirectionalLightData=ge(Z({},t.defaultData("DirectionalLight")),{position:[200,300,300],name:"Directional Light",intensity:.7})})(SE||(SE={}));var Yx;(t=>{function i(s,l,d=0){for(;d<l.length;){let c=s?s[l[d]]:void 0;if(l.length===d+1)return c;if(c)s=c.descendants,d+=1;else return}}t.resolveWithDes=i;function r(s,l,d=0){let c=i(s,l,d);if(c){let u=Object.keys(c);if(u.length===1&&u[0]==="descendants")return}return c}t.resolve=r})(Yx||(Yx={}));var Bc;(t=>{t.rootOverrideProps=["physics","events"],t.compositeNonOptionalOverrideProps=["geometry"],t.compositeEntireOverrideOverrideProps=["material"];function i(s,l){return ge(Z(Z({},Ua.defaultData),l),{component:s,overrides:new Dr,physics:void 0,events:void 0,type:"Instance"})}t.ofComponent=i;function r(s){let l=xp.fromObject(s.data);return i(s.id,l)}t.fromComponentData=r})(Bc||(Bc={}));var kp;(t=>t.defaultData=ge(Z(ge(Z({type:"Page"},Ua.defaultData),{physics:ge(Z({},yp.defaultData),{fusedBody:!1})}),_E.defaultData),{camera:Kv.defaultData}))(kp||(kp={}));var AE;(t=>(t.defaultCamera=Z({position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:gp.identity,name:"Play Camera",visible:!0,raycastLock:!1,physics:yp.defaultData,states:new Kt,events:new Kt,cloner:null,pathSnapping:{pathId:null,orientation:"tangential",slide:0,offset:0}},vp.defaultData),t.KeysByResetCategory={States:["states"],Events:["events"],Material:["material","materials"],Geometry:["geometry"],Position:["position"],Rotation:["rotation"],Scale:["scale"],Transform:["position","scale","rotation","hiddenMatrix"],Name:["name"],Visibility:["visible","raycastLock","flatShading","wireframe","side"],Shadows:["castShadow","receiveShadow"],Cloner:["cloner"],Physics:["physics"]},t.defaultMeshObject=ge(Z(Z({name:"Rectangle"},Ua.defaultData),_p.defaultData),{geometry:bp.defaultData("RectangleGeometry"),material:pa.defaultTwoLayerData("phong","layer1","layer2")}),t.defaultBooleanObject=ge(Z(Z({name:"Boolean"},Ua.defaultData),_p.defaultData),{geometry:bp.defaultData("BooleanGeometry"),material:pa.defaultTwoLayerData("phong","layer1","layer2")}),t.defaultTextObject=ge(Z(Z({name:"Text"},Ua.defaultData),_p.defaultData),{geometry:bp.defaultData("TextGeometry"),material:pa.defaultTwoLayerData("phong","layer1","layer2")})))(AE||(AE={}));var ah;(t=>{function i(d,c){let u={name:c};return d.type==="Mesh"?(u.geometry={},"material"in d&&(u.material={layers:new Dr}),"materials"in d&&(u.materials=d.materials.map(h=>({layers:new Dr})))):rh.is(d.type)&&(u.perspective={},u.orthographic={}),u}t.newEmpty=i;function r(d,c){if(c===void 0)return d;let u=Z({},d);return"material"in u&&"material"in c&&c.material&&(u.material=Zv(u.material,h=>{if(typeof h!="string")for(let[f,m]of Object.entries(c.material.layers)){let p=h.layers.data(f);p&&ls.patch(p,m)}}).data),u.materials&&c.materials&&(u.materials=Zv(u.materials,h=>{var f,m;for(let p=0;p<u.materials.length;p++){let g=c.materials[p];if(typeof g!="string")for(let[v,w]of Object.entries(g.layers)){let x=(m=(f=h[p])==null?void 0:f.layers)==null?void 0:m.data(v);x&&ls.patch(x,w)}}}).data),u}function s(d,c){let u,h=[],f={orthographic:0,perspective:0,geometry:0};function m(p,g){for(let[w,x]of Object.entries(g.layers)){let v=x,{texture:_}=v,k=Cn(v,["texture"]);if(_!==void 0&&Object.keys(_).length>0){let A={path:[...p,"layers",w,"texture"],props:_,type:0};h.push(A)}if(Object.keys(k).length>0){let A={path:[...p,"layers",w],props:k,type:0};h.push(A)}}}for(let[p,g]of Object.entries(c))if(p!=="name")if(p==="cloner")h.push(...dE.toOps(g,["cloner"]));else if(p==="pathSnapping")h.push({path:[p],props:{slide:g.slide,offset:g.offset},type:0});else if(p==="material")m(["material"],g);else if(p==="materials")for(let[v,w]of Object.entries(g))m(["materials",v],w);else if(f[p]===0){if(p==="geometry"&&g.extrusion!==void 0){let v={path:[p,"extrusion"],props:g.extrusion,type:0};h.push(v),g=Z({},g),delete g.extrusion}if(Object.keys(g).length>0){let v={path:[p],props:g,type:0};h.push(v)}}else u===void 0&&(u={path:[],props:{},type:0},h.push(u)),u.props[p]=g;return h}t.toOps=s;function l(d,c){var h,f,m,p,g,v,w,x,_,k;if(c===void 0)return d;let u=Z({},d);if(Object.assign(u,xp.merge(u,c)),Object.assign(u,{pathSnapping:Object.assign({},u.pathSnapping,{slide:(p=(m=(h=c.pathSnapping)==null?void 0:h.slide)!=null?m:(f=u.pathSnapping)==null?void 0:f.slide)!=null?p:0,offset:(x=(w=(g=c.pathSnapping)==null?void 0:g.offset)!=null?w:(v=u.pathSnapping)==null?void 0:v.offset)!=null?x:0})}),rh.is(d.type)){u.orthographic=Z({},u.orthographic),u.perspective=Z({},u.perspective);let A=c;((_=A.orthographic)==null?void 0:_.zoom)!==void 0&&(u.orthographic.zoom=A.orthographic.zoom),((k=A.perspective)==null?void 0:k.zoom)!==void 0&&(u.perspective.zoom=A.perspective.zoom),A.isUpVectorFlipped!==void 0&&(u.isUpVectorFlipped=A.isUpVectorFlipped),A.targetOffset!==void 0&&(u.targetOffset=A.targetOffset)}else if(d.type==="Mesh")"geometry"in c&&Object.assign(u,{geometry:gE.merge(u.geometry,c.geometry)}),(c.material||c.materials)&&(u=r(u,c)),u.cloner&&"cloner"in c&&Object.assign(u,{cloner:Lc.merge(u.cloner,c.cloner)});else if(d.type==="Empty")u.cloner&&"cloner"in c&&Object.assign(u,{cloner:Lc.merge(u.cloner,c.cloner)});else if(cE.is(d.type)){let A=c;A.intensity!==void 0&&(u.intensity=A.intensity),A.color!==void 0&&(typeof A.color=="string"?u.color=A.color:u.color=ja.clone(A.color))}return u}t.patch=l})(ah||(ah={}));var Xx;(t=>t.defaultData={enablePan:!0,enableZoom:!0,enableRotate:!0,enableDamping:!0,rotationLimitsMode:0,rotationVerticalOffset:{min:Math.PI/4,max:Math.PI/4},rotationHorizontalOffset:{min:Math.PI/4,max:Math.PI/4},rotationSoftLimit:2,panLimitsMode:0,panVerticalOffset:{min:250,max:250},panHorizontalOffset:{min:250,max:250},panSoftLimit:2,zoomLimitsEnabled:!1,zoomLimits:{min:.1,max:2},autoRotate:!1,autoRotateSpeed:2,autoRotateClockwise:!0,hoverRotatePanMode:0,hoverRotatePanStrength:20,hoverRotateDamping:.125,isTouchZoom:!0,orbitTouches:2,panTouches:3,resetHoverEffectOnPointerLeave:!0})(Xx||(Xx={}));var sh;(t=>t.defaultData={orbitControls:Xx.defaultData,playPage:Xv,withBackground:!0,preventScroll:!1,preventTouchScroll:!1,hideCursor:!1,mouseEventTarget:"canvas",joystickSizeAndXYOffset:Array(12).fill(0).map((i,r)=>{let s=0,l=0;return r<5?l=-30:r<10&&(l=30),r===0||r===10||r===5?s=30:(r===4||r===11||r===9)&&(s=-30),[120,[s,l],"show"]}),settings:{image:{format:"jpg",ratio:1},video:{format:"mp4",imageFormat:"jpg",fps:30,mbps:80,ratio:Math.max(1,typeof window<"u"?Math.floor(window.devicePixelRatio):1),stopMode:"manual",duration:5e3},web:{logo:!0,compress:!0,preset:1,preload:!0,hint:!1}},stopRaycast:!0,hdTransmission:!1})(sh||(sh={}));var CE;(t=>t.defaultData={id:"basic",label:"Basic",style:"None",prompt:""})(CE||(CE={}));var EE;(t=>t.defaultData={weather:0,shadows:0,lightOrigin:0,temperature:0,sun:0,camera:0,environment:0,particles:0,nature:0,floor:0})(EE||(EE={}));var Sp;(t=>(t.defaultData=()=>({mode:"line-art-both",prompt:"",negativePrompt:"",style:Z({},CE.defaultData),isRandomSeed:!0,seed:t.generateSeed(),guessMode:!1,advanced:!1,steps:20,guidanceScale:7.5,controlNetScale:1,modifiers:EE.defaultData}),t.generateSeed=()=>Math.round(Math.random()*1e5)))(Sp||(Sp={}));var Qv;(t=>{function i(s){return s.find(l=>l.data.type==="Page"&&l.data.globalPhysics.usePhysics)!==void 0}t.physicsEnabled=i;function r(s,l,d){s.scene.objects.traverseFrom(l,(c,u)=>{var h;if(u.type==="Instance"){let f=(h=e_.getComponentData(s,u.component))==null?void 0:h.data;f&&d(c,u,f.events)}else d(c,u,u.events)})}t.traverseModuleInstances=r})(Qv||(Qv={}));var Ap;(t=>{t.TRASH_CAN_ID="830a2708-8ed9-49cf-a68e-085299892222";function i(l={withLight:!0,withSquare:!0}){let d=[],c=AE.defaultMeshObject;l.withLight===!0&&d.push({fi:-1,data:SE.defaultDirectionalLightData,id:"830a2708-8ed9-49cf-a68e-085299899103",children:[]}),l.withSquare===!0&&d.push({fi:1,id:"7ba78968-2a55-48f2-b14c-5191da3e075e",data:c,children:[]});let u=new ss;return u.push({fi:1,id:Xv,data:ge(Z({},kp.defaultData),{name:"Scene 1"}),children:d}),u}t.defaultData={objects:i(),publish:sh.defaultData,styles:Sp.defaultData()},t.emptyDataWithoutPage=function(){return{objects:new ss,publish:sh.defaultData,styles:Sp.defaultData()}},t.emptyDataWithPage=function(l){return{objects:i(l),publish:sh.defaultData,styles:Sp.defaultData()}};function r(l){return ge(Z({},t.defaultData),{objects:Ad(l,ss.prototype)})}t.withObjs=r;function s(l,d){return r([{id:l,data:d,children:[],fi:0}])}t.withObj=s})(Ap||(Ap={}));var Jv;(t=>t.defaultData={preset:"fullscreen",allowResponsive:!1,size:[512,512],coords:[0,0],sceneScale:1,color:{r:0,g:0,b:0,a:.5}})(Jv||(Jv={}));var Kx;(t=>t.emptyImage={data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",name:"empty"})(Kx||(Kx={}));var zs;(t=>{function i(c){return c.textValue!==void 0}t.isTextValue=i;function r(c){return typeof c=="number"}t.isNumber=r;function s(c){return typeof c=="boolean"}t.isBoolean=s;function l(c){return i(c)?"string":s(c)?"boolean":"number"}t.typeOfVariable=l;function d(c){var u;return t.isTextValue(c)?Array.isArray(c.textValue)?c.textValue.map(h=>{var f;return h.toString().padStart((f=c.padding)!=null?f:2,"0")}).join((u=c.deliminator)!=null?u:":")+(c.suffix!==void 0?" "+c.suffix:""):c.textValue.toString():t.isBoolean(c)?c?"True":"False":t.isNumber(c)?parseFloat(c.toFixed(3)).toString():c.toString()}t.getDisplayedValue=d})(zs||(zs={}));var ME;(t=>t.all=["images","videos","colors","audios","fonts","materials","variables"])(ME||(ME={}));var FI;(t=>t.all=[...ME.all,"components"])(FI||(FI={}));var NI;(t=>{function i(){return{images:new ki,videos:new ki,colors:new ki,audios:new ki,fonts:new ki,materials:new ki,components:new ki,variables:new ki}}t.defaultData=i})(NI||(NI={}));var Cp;(t=>{function i(){return{images:new ki,videos:new ki,colors:new ki,audios:new ki,fonts:new ki,materials:new ki,components:new ki,variables:new ki}}t.defaultData=i})(Cp||(Cp={}));var Fo;(t=>{function i(){let c={};return c["89b10010-844c-11ec-a8a3-0242ac120002"]={r:.5,g:.5,b:.5,a:1,name:"Default Color"},Ad(c,ki.prototype)}t.defaultColors=i;function r(c){let u={};return c!=null&&c.withAITexture&&(u["a1b10010-844c-a8a3-11ec-0242ac2011ec"]=ge(Z({},Kx.emptyImage),{name:"AI generated image"})),Ad(u,ki.prototype)}t.defaultImages=r;function s(){return{catelogs:new ki,materials:new ki,images:new ki,videos:new ki,colors:new ki,audios:new ki,fonts:new ki,variables:new Kt,lib:Cp.defaultData()}}t.emptyData=s;function l(c){switch(c){case"number":return{value:0,name:"Number"};case"boolean":return{value:!1,name:"Boolean"};case"string":return{value:{textValue:"String value"},name:"String"};case"time":let u=[0,0,0];return{name:"Time",value:{textValue:u,deliminator:":",padding:2,suffix:"AM"},dynamicVariableType:"time",format:"HH:mm:ss",format12h24h:"12ampm",timeZone:null,hasEnd:!1,endValue:{textValue:u,deliminator:":",padding:2,suffix:"AM"},autoStart:!0,repeat:!1};case"counter":return{name:"Counter",value:0,dynamicVariableType:"counter",updateInterval:1e3,increment:1,autoStart:!0,hasEnd:!0,endValue:60,repeat:!0,randomStart:!1,range:[0,100],decimals:0};case"random":return{name:"Random",value:0,dynamicVariableType:"random",updateInterval:1e3,increment:1,autoStart:!0,isStatic:!1,hasEnd:!0,endValue:60,repeat:!0,min:0,max:100,decimals:0};default:console.error("Unknown variable type",c)}}t.defaultVariables=l;function d(c,u){if(u.format==="HH:mm:ss"){let h=Math.floor(c/3600),f=Math.floor((c-h*3600)/60),m=Math.round(c-h*3600-f*60);return{textValue:[h,f,m]}}else if(u.format==="mm:ss"){let h=Math.floor(c/60),f=Math.round(c-h*60);return{textValue:[h,f]}}else return u.format==="number"?c=Math.round(c):c=Math.round(c*1e3)/1e3,c}t.getFormattedTimerTime=d})(Fo||(Fo={}));var Qx;(t=>t.list=["idle","move","jump","run"])(Qx||(Qx={}));var Jx;(t=>(t.defaultColliderData={type:"capsule",height:200,radius:50,position:[0,0,0],rotation:[0,0,0]},t.defaultDataThirdPerson={moveMode:"walk",forwardDirection:"+z",speedTranslate:1e3,speedRotate:100,runMultiplier:2,rotationMode:"normal",rotBy:"keys",rotByTouch:"drag",delayPos:[.3,.3],delayRot:[.3,.3],keyAssignments:[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","\u25B2"],["rotPosY","\u25C0"],["rotNegX","\u25BC"],["rotNegY","\u25B6"],["jump","Space"],["run","\u21E7"],["none","Ctrl"]],touchControl:!0,joystickPosLoc:5,joystickRotLoc:11,jumpTouchButtonLoc:9,collider:t.defaultColliderData,colliderHelperVisible:!0,collisionEnabled:!0,jumpPower:100,resetYPosition:3e3,alignToGround:!1,autoOrientMove:!0,orientWith:"camera",orientMode:"radial",delayPosCamera:.3,delayRotCamera:.3,camera:"",cameraXAxis:"Limit",cameraYAxis:"Free",cameraRotXLimits:[0,Math.PI/2],cameraRotYLimits:[-Math.PI/2,Math.PI/2],gameActions:{idle:new Kt,move:new Kt,jump:new Kt,run:new Kt},navmesh:{enabled:!1,ch:6,cs:6,walkableClimb:5,walkableHeight:1,walkableRadius:0,zones:"all",objects:[],helperVisible:!0,destinationHelperRadius:0,destinationHelperColor:Bo.fromHexAndA(3728051,1)}}))(Jx||(Jx={}));function jI(t){t.layers.forEach(i=>{if(i.type==="depth"&&i.colorA!==void 0){let r=i.colorA,s=i.colorB,l=[[r.r,r.g,r.b,r.a],[s.r,s.g,s.b,s.a]],d=[0,1];for(let u=2;u<10;u++)l.push(l[1]),d.push(1);let c=ge(Z({},Sd(yr(i),"type","visible","isVector","isWorldSpace","origin","alpha","mode")),{near:Math.max(0,i.near),far:Math.max(0,i.far),colors:l,steps:d,num:2,direction:[1,0,0],smooth:!1,gradientType:1});Object.assign(i,c)}else if(i.type==="depth"&&i.gradientType===1&&(i.near<0||i.far<0)){let r=ge(Z({},yr(i)),{near:Math.max(i.near,0),far:Math.max(i.far,0)});Object.assign(i,r)}})}function Fc(t,i){Object.values(t.shared.materials).forEach(r=>i(r))}function Nc(t,i){t.scene.objects.traverse((r,s)=>{"materials"in s?s.materials.forEach((l,d)=>{l===void 0&&(s.materials[d]=pa.defaultData(),l=s.materials[d]),typeof l!="string"&&i(l)}):"material"in s?typeof s.material!="string"&&(s.material===void 0&&(s.material=pa.defaultData()),i(s.material)):s.type==="Mesh"&&(s.material===void 0&&(s.material=pa.defaultData()),i(s.material)),"overrides"in s&&Object.values(s.overrides).forEach(l=>{l.material&&typeof l.material!="string"&&i(l.material)})})}function HK(t){Object.assign(t.scene.publish,{orbitControls:Z(Z({},Xx.defaultData),yr(t.scene.publish.orbitControls))})}function GK(t){Object.assign(t.scene.publish.settings,{video:Z(Z({},sh.defaultData.settings.video),yr(t.scene.publish.settings.video))})}function WK(t){function i(r){if(r.layers){for(let s of Object.values(r.layers))if(s){for(let[l,d]of Object.entries(s))if((PI.includes(l)||typeof d=="boolean")&&delete s[l],l==="texture")for(let[c,u]of Object.entries(d))(VK.includes(c)||typeof u=="boolean")&&delete d[c]}}}t.scene.objects.traverse((r,s)=>{s.states.forEach(l=>{let d=l;d.material?i(d.material):d.materials&&d.materials.forEach(c=>{i(c)})})})}function qK(t){t.scene.publish.withBackground=!0}function $K(t){t.scene.publish.settings.web={compress:!0,preload:!0,preset:1,logo:!0,hint:!1}}function ZK(t){t.scene.objects.traverse((i,r)=>{let s=r.cloner;s&&(s.radial.scale=s.radial.scale.map(l=>l+1),s.linear.scale=s.linear.scale.map(l=>l+1))})}function YK(t){t.scene.objects.traverse((i,r)=>{let s=r.geometry;s&&(s.type==="DodecahedronGeometry"||s.type==="IcosahedronGeometry")&&(s.detail=Math.round(s.detail))})}function XK(t){t.scene.objects.traverse((i,r)=>{let s=t.scene.objects.unproxy().parent(i);if(s){let l=yr(t.scene.objects.data(s));l&&l.type==="Mesh"&&l.geometry.type==="BooleanGeometry"&&r.type==="Mesh"&&(r.visible=yr(r).booleanExclude!==!0)}})}function KK(t){t.scene.objects.traverse((i,r)=>{if(r.type==="Mesh"){let s=r;r.geometry.type==="NonParametricGeometry"?s.material!==void 0&&delete s.material:s.materials!==void 0&&delete s.materials}})}function QK(t){function i(s){Object.setPrototypeOf(s,Dr.prototype),s.texture&&Object.setPrototypeOf(s.texture,Dr.prototype)}function r(s){Object.setPrototypeOf(s,Dr.prototype);for(let l in s)i(s[l])}t.scene.objects.traverse((s,l)=>{l.states.forEach(d=>{let c=d;if(c.material){let u=yr(c.material).layers;r(u),c.material.layers=u}if(c.materials)for(let u=0;u<c.materials.length;u++){let h=c.materials[u],f=yr(h).layers;r(f),h.layers=f}})})}function UI(t){t.layers===void 0&&Object.assign(t,pa.defaultTwoLayerData("lambert"))}function TE(t){!t.layers||t.layers.forEach(i=>{if(i.type==="depth"&&i.colors.length===10){let r=[...i.colors];r.push(i.colors[9]);let s=[...i.steps];s.push(i.steps[9]);let l=ge(Z({},yr(i)),{colors:r,steps:s});Object.assign(i,l)}})}function JK(t){t.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&(r.geometry.type==="BooleanGeometry"||r.geometry.type==="SubdivGeometry")&&(r.geometry.phongAngle=35)})}function VI(t){t.scene.objects.traverse((i,r)=>{"materials"in r?r.materials.forEach(s=>{typeof s!="string"&&TE(s)}):"material"in r&&typeof r.material!="string"&&TE(r.material)}),Object.values(t.shared.materials).forEach(i=>TE(i))}function eQ(t){t.scene.environment.ambientLight.softShadows=!1,t.scene.environment.ambientLight.softShadowQuality="low",t.scene.objects.traverse((i,r)=>{(r.type==="DirectionalLight"||r.type==="SpotLight")&&(r.shadowResolution=1024,r.shadowRadius=1,r.depth=1e5)}),t.shared.penumbraSize=new Array(5).fill(.5)}function tQ(t){t.shared.audios=Ad({},ki.prototype)}function iQ(t){t.shared.videos=Ad({},ki.prototype)}function nQ(t){let i=t.shared.materials;Object.entries(i).forEach(([r,s])=>{if(!s.layers){let l={name:"Untitled Material",layers:[{fi:0,data:{type:"light",category:"phong",alpha:.6,visible:!0,mode:0,specular:{r:.2,g:.2,b:.2},shininess:5},id:"layer1"},{fi:1,data:{type:"color",alpha:1,visible:!0,mode:0,color:{r:.2823529411764706,g:.2823529411764706,b:.30196078431372547}},id:"layer2"}]};Object.assign(i,{[r]:l})}})}function rQ(t){Object.entries(yr(t.shared.images)).filter(i=>i[1].asset===!1).map(i=>i[0]).forEach(i=>{delete t.shared.images[i]}),Object.entries(yr(t.shared.audios)).filter(i=>i[1].asset===!1).map(i=>i[0]).forEach(i=>{delete t.shared.audios[i]})}function aQ(t){t.scene.publish.settings.web.preload=!1}function HI(t){t.layers&&t.layers.forEach(i=>{i.type==="depth"&&i.num!==void 0&&(i.colors=i.colors.slice(0,i.num),i.steps=i.steps.slice(0,i.num),delete i.num)})}function GI(t){t.layers&&t.layers.forEach(i=>{UK(i)&&i.isMask===void 0&&(i.isMask=!1),(i.type==="texture"||i.type==="video")&&i.blending===void 0&&(i.blending=0),(i.type==="noise"||i.type==="displace"&&i.displacementType==="noise")&&(i.voronoiStyle===void 0&&(i.voronoiStyle=0),i.highCut===void 0&&(i.highCut=1),i.lowCut===void 0&&(i.lowCut=0),i.smoothness===void 0&&(i.smoothness=.3),i.seed===void 0&&(i.seed=0),i.quality===void 0&&(i.quality=1))})}function sQ(t){t.shared.fonts=Ad({},ki.prototype)}function oQ(t){return t.replace(".typeface","").replace(/optimer/gi,"open sans").replace("space_mono","space mono").replace(/alma_mono/gi,"varela round").replace(/droid_sans_mono/gi,"noto sans mono").replace(/droid_sans|gentilis|gnomon_(simple|foreground)|helvetiker/gi,"roboto").replace(/droid_serif/gi,"roboto slab").replace("_sans"," sans").replace("crimson_text","crimson text").replace("medium_medium","medium").replace("fatface_fatface","fatface").replace("100hairline","thin").replace("200thin","extralight").replace("300light","light").replace("500medium","medium").replace("600semi","semibold").replace("800heavy","extrabold").replace("900black","black").replace(/bodoni_(11|16|24|36|48|72|96)([^_])/gi,"bodoni_$1_$2").replace(/bodoni_(11|16|24|36|48|72|96)/gi,"bodoni moda").replace(/(thin|hairline)(_regular)?/gi,"100").replace(/(extra|ultra)light(_regular)?/gi,"200").replace(/light(_regular)?/gi,"300").replace(/_book|_normal|_roman/gi,"_regular").replace(/medium(_regular)?/gi,"500").replace(/(semi|demi)bold(_regular)?/gi,"600").replace(/(extra|ultra)bold(_regular)?/gi,"800").replace(/bold(_regular)?/gi,"700").replace(/(black|heavy|fatface)(_regular)?/gi,"900").replace(/([1-9]00)_italic/gi,"$1italic").replace(/regularitalic/gi,"italic").replace(/regularitalic/gi,"italic").split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}function lQ(t){let i=[];t.scene.objects.traverse((r,s)=>{let l=s;if(l.type==="TextFrame"){let d=pa.defaultTwoLayerData("phong"),c=typeof l.color=="string"?t.shared.colors[l.color]:l.color;d.layers[1].data.color={r:c.r,g:c.g,b:c.b},d.layers[1].data.alpha=l.alpha;let u=oQ(l.font);t.shared.fonts[u]===void 0&&(t.shared.fonts[u]={name:u});let h=ge(Z(Z({name:l.name},Ua.defaultData),_p.defaultData),{flatShading:!1,wireframe:!1,geometry:ge(Z({},bp.defaultData("TextGeometry")),{width:l.width,height:l.height,font:u,depth:0,horizontalAlign:l.horizontalAlign,verticalAlign:l.verticalAlign,fontSize:l.fontSize*1.40625,lineHeight:l.lineHeight/1.40625,letterSpacing:l.letterSpacing-1,text:l.text,textTransform:l.textTransform,extrudeBevelSize:0,extrudeBevelSegments:1}),material:d,states:yr(l.states),events:yr(l.events),visible:l.visible,raycastLock:l.raycastLock,position:l.position,rotation:l.rotation,scale:l.scale,hiddenMatrix:l.hiddenMatrix}),f=yr(t.scene.objects).parent(r);t.scene.objects.insertAfter(f!=null?f:null,r,[{id:r+"new",data:h,children:[]}]),i.push(r)}}),i.forEach(r=>{t.scene.objects.delete(r)})}function dQ(t){let i={0:"MouseDown",1:"MouseUp",2:"MouseHover",5:"KeyDown",6:"KeyUp",7:"Start",9:"LookAt",10:"Follow",11:"Scroll",12:"Audio",13:"GameControl"};t.scene.objects.traverse((r,s)=>{s.events.forEach(l=>{if(i[Number(l.type)])if(Object.assign(l,{type:i[Number(l.type)]}),l.type==="Audio"&&"audioEvent"in l&&(Object.assign(l,{playAudio:l.audioEvent}),delete l.audioEvent),l.type==="GameControl")Object.assign(l,{gameActions:{idle:new Kt,move:new Kt,jump:new Kt}});else{let d=new Kt;Object.assign(l,{actions:d}),(l.type==="MouseDown"||l.type==="MouseUp"||l.type==="KeyDown"||l.type==="KeyUp")&&"url"in l&&d.push({fi:0,id:fe.generateUUID(),data:{type:"Link",url:l.url,delay:0}}),"targets"in l&&(l.targets.forEach((c,u,h)=>{let f={state:void 0,repeat:0,delay:0,delayDirection:void 0,direction:"normal",duration:0,easing:4},m={easing:c.easing,duration:c.duration};c.easing===6?Object.assign(m,Sd(c,"mass","stiffness","damping","velocity")):c.easing===5&&Object.assign(m,{control1:Z({},c.control1),control2:Z({},c.control2)});let p={repeat:c.repeat?-1:0,delay:c.delay,delayDirection:c.delayDirection,direction:c.cycle&&c.rewind?"pingpong-rewind":c.cycle?"pingpong":"normal"},g=Z(Z({state:c.state},p),m),v={allowSlerp:!0,type:"Transition",object:c.object,repeat:0,delay:0,delayDirection:void 0,direction:"normal",tweens:new Kt({fi:0,id:fe.generateUUID(),data:f},{fi:1,id:fe.generateUUID(),data:g})};d.push({fi:h,id:u,data:v})}),delete l.targets)}})})}function cQ(t){t.scene.objects.traverse((i,r)=>{function s(l,d){var h;let c=new Kt,u=[];if(r.events.forEach((f,m,p)=>{if(f.type==="Audio"&&f.trigger===d){let g;u.push(m),f.interaction==="play"?g=ge(Z({},Sd(f,"interaction","audio","delay","volume","loop")),{triggerAfter:"after"in f?f.after:void 0,toggle:"after"in f?f.toggle:void 0,type:"Audio"}):(f.interaction==="pause"||f.interaction==="stop")&&(g=ge(Z({},Sd(f,"interaction","delay","object","playAudio")),{type:"Audio"})),g&&c.push({fi:p,id:m,data:g})}}),u.forEach(f=>r.events.delete(f)),c.length){let f=(h=r.events.find(m=>m.type===l))==null?void 0:h.data;f?"actions"in f&&f.actions.insertBefore(null,c):r.events.insertBefore(null,[{id:fe.generateUUID(),data:{type:l,actions:c}}])}}s("Start","start"),s("MouseDown","mouseDown"),s("MouseUp","mouseUp"),s("KeyDown","keyDown"),s("KeyUp","keyUp")})}function WI(t){var r;let i=(r=t.layers.find(s=>s.type==="light"))==null?void 0:r.data;if((i==null?void 0:i.category)==="basic"){let s=ls.defaultData("light","phong"),l=i;Object.assign(l,s),l.visible=!1}}function qI(t){Fc(t,WI),Nc(t,WI)}function uQ(t){t.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="SubdivGeometry"&&(r.geometry.scaleBaked||(r.geometry.scaleBaked=[1,1,1]))})}function hQ(t){t.scene.objects.traverse((i,r)=>{(r.type==="Empty"||r.type==="Mesh")&&r.cloner&&!r.cloner.randomnessObject&&!r.cloner.toObject&&!r.cloner.randomness&&(r.cloner=ge(Z({},r.cloner),{toObject:{object:"",spreadType:"random",scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],axis:"x",seed:0,count:99,align:"normal"},randomness:!1,randomnessObject:{strength:100,scale:[0,0,0],rotation:[0,0,0],position:[0,0,0],movement:1,seed:0,freqScale:10,noiseType:"perlin"}}))})}function fQ(t){t.scene.objects.traverse((i,r)=>{r.type==="Mesh"&&r.geometry.type==="NonParametricGeometry"&&!("material"in r)&&!("materials"in r)&&(r.material=pa.defaultTwoLayerData("phong"))})}function pQ(t){t.scene.publish.orbitControls.autoZoom===void 0&&(t.scene.publish.orbitControls.autoZoom=!1),t.scene.objects.traverse((i,r)=>{(r.type==="OrthographicCamera"||r.type==="PerspectiveCamera")&&(r.orthographic.autoZoom===void 0&&(r.orthographic.autoZoom=!1),r.orthographic.autoZoomFrustumSize===void 0&&(r.orthographic.autoZoomFrustumSize=790))})}function mQ(t){t.scene.objects.traverse((i,r)=>{r.pathSnapping===void 0&&(r.pathSnapping={pathId:null,slide:0,offset:0,orientation:"tangential"}),r.pathSnapping.offset===void 0&&(r.pathSnapping.offset=0)})}function gQ(t){t.scene.publish.mouseEventTarget===void 0&&(t.scene.publish.mouseEventTarget="canvas"),t.scene.publish.settings.web.hint===void 0&&(t.scene.publish.settings.web.hint=!1)}function vQ(t){let{video:i}=t.scene.publish.settings;i.format==="gif"&&i.fps>48&&(i.fps=15)}function yQ(t){t.scene.objects.traverse((i,r)=>{r.events.forEach(s=>{s.type==="GameControl"&&(s.resetYPosition=Math.abs(s.resetYPosition-r.position[1]))})})}function bQ(t){let i=t.scene.environment.usePhysics;t.scene.objects.traverse((r,s)=>{i&&s.physics===null?s.collision=!1:s.collision="visibility"})}function wQ(t){t.scene.objects.traverse((i,r)=>{r.events.forEach(s=>{s.type==="GameControl"&&(s.navmesh=Jx.defaultDataThirdPerson.navmesh)})})}function xQ(t){t.scene.styles||(t.scene.styles=Sp.defaultData())}function $I(t){t.layers.forEach(i=>{i.type==="light"&&i.category!=="toon"&&i.occlusion===void 0&&(i.occlusion=!0)})}function _Q(t){t.scene.environment.ambientLight.occlusion===void 0&&(t.scene.environment.ambientLight.occlusion=!1),t.scene.environment.ambientLight.aoFullRes===void 0&&(t.scene.environment.ambientLight.aoFullRes=!1),t.scene.environment.ambientLight.radius===void 0&&(t.scene.environment.ambientLight.radius=256),t.scene.environment.ambientLight.bias===void 0&&(t.scene.environment.ambientLight.bias=.5),t.scene.environment.ambientLight.aoColor===void 0&&(t.scene.environment.ambientLight.aoColor={r:.19607843137254902,g:.19607843137254902,b:.19607843137254902}),Nc(t,$I),Fc(t,$I)}function kQ(t){t.scene.objects.traverse((i,r)=>{r.events.forEach(s=>{s.type==="GameControl"&&Object.assign(s.gameActions,{run:new Kt})})})}function SQ(t){t.scene.objects.traverse((i,r)=>{r.events.forEach(s=>{s.type==="GameControl"&&(s.keyAssignments=[...s.keyAssignments,["run","\u21E7"],["none","Ctrl"]])})})}function ZI(t){t.layers&&t.layers.forEach(i=>{i.type==="light"&&i.bumpMapIntensity===void 0&&(i.bumpMapIntensity=5)})}function AQ(t,i){var r;if(i<1&&(Nc(t,jI),Fc(t,jI),t.schema=1),i<2&&(HK(t),t.schema=2),i<3&&(WK(t),t.schema=3),i<4&&(qK(t),t.schema=4),i<5&&($K(t),t.schema=5),i<6&&(ZK(t),t.schema=6),i<7&&(YK(t),t.schema=7),i<8&&(t.schema=8),i<9&&(VI(t),t.schema=9),i<10&&(JK(t),t.schema=10),i<11&&(eQ(t),t.schema=11),i<12&&(VI(t),t.schema=12),i<13&&(tQ(t),t.schema=13),i<14&&(nQ(t),t.schema=14),i<15&&(rQ(t),t.schema=15),i<16&&(aQ(t),t.schema=16),i<17&&(Nc(t,HI),Fc(t,HI),t.schema=17),i<18&&(Nc(t,UI),Fc(t,UI),t.schema=18),i<19&&(GK(t),t.schema=19),i<20&&(sQ(t),lQ(t),t.schema=20),i<21&&(dQ(t),cQ(t),t.schema=21),i<22&&(qI(t),t.schema=22),i<23&&(uQ(t),t.schema=23),i<24&&(hQ(t),t.schema=24),(i<25||t.shared.videos===void 0)&&(iQ(t),i<25&&(t.schema=25)),i<26&&(XK(t),t.schema=26),i<27&&(KK(t),t.schema=27),i<28&&(qI(t),t.schema=28),i<29&&(QK(t),t.schema=29),i<30&&(fQ(t),t.schema=30),i<31&&(pQ(t),t.schema=31),i<33&&(mQ(t),t.schema=33),i<34&&(gQ(t),t.schema=34),i<35&&(vQ(t),t.schema=35),i<36&&(yQ(t),t.schema=36),i<37&&(bQ(t),t.schema=37),i<38&&(Nc(t,GI),Fc(t,GI),t.schema=38),i<39&&(wQ(t),t.schema=39),i<40&&(xQ(t),t.schema=40),i<41&&(_Q(t),t.schema=41),i<42&&(kQ(t),t.schema=42),i<43&&(SQ(t),t.schema=43),i<99){Nc(t,ZI),Fc(t,ZI),t.scene.publish.playCamera===null&&(t.scene.publish.playCamera=pp);let s=yr(t.scene.objects),l=t.scene.objects;t.scene.publish.playPage=Xv,l.insertBefore(null,null,[{id:Xv,data:ge(Z({},kp.defaultData),{backgroundColor:t.scene.backgroundColor,fog:t.scene.fog,postprocessing:t.scene.postprocessing,ao:Sd(t.scene.environment.ambientLight,"occlusion","aoFullRes","radius","bias","aoColor"),publish:{playCamera:t.scene.publish.playCamera,gameControlObject:t.scene.publish.gameControlObject},shadow:Sd(t.scene.environment.ambientLight,"softShadowQuality"),globalPhysics:Z(Z({},wp.defaultData),Sd(t.scene.environment,"usePhysics","gravity")),camera:(r=yr(t.scene.ownerCamera))!=null?r:kp.defaultData.camera,name:"Scene"}),children:[]}]);for(let u of s)u.id!==Ap.TRASH_CAN_ID&&l.move(Xv,u.fi,u.id);let d=0,c=0;t.shared.penumbraSize&&t.scene.objects.traverse((u,h)=>{var f;h.type==="DirectionalLight"?(h.penumbraSize=t.shared.penumbraSize[Math.min(d,2)],d+=1):h.type==="SpotLight"&&(h.penumbraSize=t.shared.penumbraSize[3+Math.min(c,1)],c+=1),(h.physics===void 0||h.physics===null)&&h.type!=="Instance"&&(h.physics={},Object.assign(h.physics,yp.defaultData)),h.physics!==void 0&&h.physics!==null&&(h.physics.enabled=(f=h.collision)!=null?f:"visibility",delete h.collision)}),t.schema=99}}function YI(t){t.layers&&t.layers.forEach(i=>{i.type==="light"&&i.alphaOverride===void 0&&(i.alphaOverride=1)})}function CQ(t){t.scene.objects.traverse((i,r)=>{let s=r.geometry;s&&s.type==="PathGeometry"&&(s.extrusion.capType="flat",s.extrusion.bevel=50,s.extrusion.bevelSides=6,s.extrusion.shape.type==="Custom"&&(s.extrusion.shape.shapeQuality="low"))})}var Ep=180/Math.PI;function XI(t){t.rotation=t.rotation.slice(0,3).map(i=>i*Ep)}function KI(t){var r,s,l;XI(t),t.type==="Page"&&XI(t.camera),(r=t.states)==null||r.forEach(d=>{d.rotation===void 0||d.rotation===null||(d.rotation=d.rotation.slice(0,3).map(c=>c*Ep))});let i=t.geometry;i&&i.type==="SphereGeometry"&&(i.thetaLength=((s=i.thetaLength)!=null?s:180)*Ep),i&&i.type==="TorusGeometry"&&(i.arc=i.arc*Ep),i&&i.type==="PathGeometry"&&(i.extrusion.angle*=Ep,i.extrusion.twist*=Ep),t.type==="Mesh"&&t.geometry.type==="TextGeometry"&&(t.geometry.text={textValue:t.geometry.text}),Array.isArray(yr(t.events))&&((l=t.events)==null||l.forEach(d=>{(d.type==="MouseDown"||d.type==="MouseUp"||d.type==="MousePress"||d.type==="KeyDown"||d.type==="KeyUp"||d.type==="KeyPress"||d.type==="Collision"||d.type==="Trigger")&&(d.runMode=d.toggle?"Toggle":"Once")}))}function EQ(t){t.shared.variables=Ad({},ki.prototype)}function MQ(t){let i=yr(t.shared.variables);t.shared.variables=Ad(Object.entries(i!=null?i:{}).map(([r,s],l)=>({fi:l,id:r,data:s})),Kt.prototype)}var jc=107;function QI(t,i){i(t.data);for(let r of t.children)QI(r,i)}function TQ(t){var r;let i=(r=t.schema)!=null?r:104;i!==jc&&i<105&&(QI(t.asset,KI),t.schema=105)}function JI(t){var r;let i=(r=t.schema)!=null?r:0;if(i!==jc){console.warn("updating from ",i,"to ",jc),AQ(t,i),i<100&&(t.scene.publish.joystickSizeAndXYOffset===void 0&&(t.scene.publish.joystickSizeAndXYOffset=sh.defaultData.joystickSizeAndXYOffset),t.schema=100),i<101&&(Nc(t,YI),Fc(t,YI),t.schema=101),i<102&&(CQ(t),t.schema=102),i<104&&(t.shared.catelogs=new ki,t.shared.lib=Cp.defaultData(),t.schema=104),i<105&&(EQ(t),t.scene.objects.traverse((s,l)=>{KI(l)}),t.schema=105);for(let s of Object.values(t.shared.lib.components))TQ(s);i<106&&(MQ(t),t.schema=106),i<107&&(t.shared.lib.variables=Cp.defaultData().variables,t.schema=107)}}var e_;(t=>{t.defaultData={schema:jc,scene:Ap.defaultData,frames:new ki().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",Jv.defaultData),shared:ge(Z({},Fo.emptyData()),{colors:Fo.defaultColors()})},t.emptyDataForImports=function(l){let d=Ap.emptyDataWithPage(l);return{schema:jc,scene:d,frames:new ki().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",Jv.defaultData),shared:ge(Z({},Fo.emptyData()),{colors:Fo.defaultColors(),images:Fo.defaultImages(l)})}},t.emptyData=function(){return{schema:jc,scene:Ap.emptyDataWithPage(),frames:new ki().add("72fc2993-2da3-4b6b-96ac-2879db3a28bd",Jv.defaultData),shared:Fo.emptyData()}},t.collabHelper=ge(Z({},jC),{updateSchema(l){var d,c;return((d=l.schema)!=null?d:0)<jc?Zv(l,JI):((c=l.schema)!=null?c:0)-jc}});function i(l){let d=t.collabHelper.updateSchema(l);return typeof d=="number"?d===0?l:null:d.data}t.updateSchemaDirectly=i;function r(l){return ge(Z({},l),{shared:ge(Z({},l.shared),{lib:Cp.defaultData()})})}t.withoutLib=r;function s(l,d){let c=l.scene.objects.get(d);if(c&&c.data.type==="Component")return c;{let u=l.shared.lib.components[d];if(u)return u.asset}}t.getComponentData=s})(e_||(e_={}));function oh(t,i=!1){let r=t[0].index!==null,s=new Set(Object.keys(t[0].attributes)),l=new Set(Object.keys(t[0].morphAttributes)),d={},c={},u=t[0].morphTargetsRelative,h=new Nt,f=0;for(let m=0;m<t.length;++m){let p=t[m],g=0;if(r!==(p.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let v in p.attributes){if(!s.has(v))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+'. All geometries must have compatible attributes; make sure "'+v+'" attribute exists among all geometries, or in none of them.'),null;d[v]===void 0&&(d[v]=[]),d[v].push(p.attributes[v]),g++}if(g!==s.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+". Make sure all geometries have the same number of attributes."),null;if(u!==p.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let v in p.morphAttributes){if(!l.has(v))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+".  .morphAttributes must be consistent throughout all geometries."),null;c[v]===void 0&&(c[v]=[]),c[v].push(p.morphAttributes[v])}if(i){let v;if(r)v=p.index.count;else if(p.attributes.position!==void 0)v=p.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+m+". The geometry must have either an index or a position attribute"),null;h.addGroup(f,v,m),f+=v}}if(r){let m=0,p=[];for(let g=0;g<t.length;++g){let v=t[g].index;for(let w=0;w<v.count;++w)p.push(v.getX(w)+m);m+=t[g].attributes.position.count}h.setIndex(p)}for(let m in d){let p=eR(d[m]);if(!p)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+m+" attribute."),null;h.setAttribute(m,p)}for(let m in c){let p=c[m][0].length;if(p===0)break;h.morphAttributes=h.morphAttributes||{},h.morphAttributes[m]=[];for(let g=0;g<p;++g){let v=[];for(let x=0;x<c[m].length;++x)v.push(c[m][x][g]);let w=eR(v);if(!w)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+m+" morphAttribute."),null;h.morphAttributes[m].push(w)}}return h}function eR(t){let i,r,s,l=0;for(let u=0;u<t.length;++u){let h=t[u];if(h.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(i===void 0&&(i=h.array.constructor),i!==h.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=h.itemSize),r!==h.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(s===void 0&&(s=h.normalized),s!==h.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;l+=h.array.length}let d=new i(l),c=0;for(let u=0;u<t.length;++u)d.set(t[u].array,c),c+=t[u].array.length;return new Qt(d,r,s)}var DQ=Math.pow(2,-24),t_=class{constructor(){}};function Ml(t,i,r){return r.min.x=i[t],r.min.y=i[t+1],r.min.z=i[t+2],r.max.x=i[t+3],r.max.y=i[t+4],r.max.z=i[t+5],r}function tR(t){let i=-1,r=-1/0;for(let s=0;s<3;s++){let l=t[s+3]-t[s];l>r&&(r=l,i=s)}return i}function iR(t,i){i.set(t)}function nR(t,i,r){let s,l;for(let d=0;d<3;d++){let c=d+3;s=t[d],l=i[d],r[d]=s<l?s:l,s=t[c],l=i[c],r[c]=s>l?s:l}}function i_(t,i,r){for(let s=0;s<3;s++){let l=i[t+2*s],d=i[t+2*s+1],c=l-d,u=l+d;c<r[s]&&(r[s]=c),u>r[s+3]&&(r[s+3]=u)}}function e0(t){let i=t[3]-t[0],r=t[4]-t[1],s=t[5]-t[2];return 2*(i*r+r*s+s*i)}function PQ(t,i){if(!t.index){let r=t.attributes.position.count,s=i.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,l;r>65535?l=new Uint32Array(new s(4*r)):l=new Uint16Array(new s(2*r)),t.setIndex(new Qt(l,1));for(let d=0;d<r;d++)l[d]=d}}function OQ(t){if(!t.groups||!t.groups.length)return[{offset:0,count:t.index.count/3}];let i=[],r=new Set;for(let l of t.groups)r.add(l.start),r.add(l.start+l.count);let s=Array.from(r.values()).sort((l,d)=>l-d);for(let l=0;l<s.length-1;l++){let d=s[l],c=s[l+1];i.push({offset:d/3,count:(c-d)/3})}return i}function DE(t,i,r,s,l=null){let d=1/0,c=1/0,u=1/0,h=-1/0,f=-1/0,m=-1/0,p=1/0,g=1/0,v=1/0,w=-1/0,x=-1/0,_=-1/0,k=l!==null;for(let A=i*6,C=(i+r)*6;A<C;A+=6){let M=t[A+0],D=t[A+1],P=M-D,T=M+D;P<d&&(d=P),T>h&&(h=T),k&&M<p&&(p=M),k&&M>w&&(w=M);let O=t[A+2],z=t[A+3],L=O-z,B=O+z;L<c&&(c=L),B>f&&(f=B),k&&O<g&&(g=O),k&&O>x&&(x=O);let j=t[A+4],V=t[A+5],H=j-V,Y=j+V;H<u&&(u=H),Y>m&&(m=Y),k&&j<v&&(v=j),k&&j>_&&(_=j)}s[0]=d,s[1]=c,s[2]=u,s[3]=h,s[4]=f,s[5]=m,k&&(l[0]=p,l[1]=g,l[2]=v,l[3]=w,l[4]=x,l[5]=_)}function IQ(t,i,r,s){let l=1/0,d=1/0,c=1/0,u=-1/0,h=-1/0,f=-1/0;for(let m=i*6,p=(i+r)*6;m<p;m+=6){let g=t[m+0];g<l&&(l=g),g>u&&(u=g);let v=t[m+2];v<d&&(d=v),v>h&&(h=v);let w=t[m+4];w<c&&(c=w),w>f&&(f=w)}s[0]=l,s[1]=d,s[2]=c,s[3]=u,s[4]=h,s[5]=f}function RQ(t,i,r,s,l){let d=r,c=r+s-1,u=l.pos,h=l.axis*2;for(;;){for(;d<=c&&i[d*6+h]<u;)d++;for(;d<=c&&i[c*6+h]>=u;)c--;if(d<c){for(let f=0;f<3;f++){let m=t[d*3+f];t[d*3+f]=t[c*3+f],t[c*3+f]=m;let p=i[d*6+f*2+0];i[d*6+f*2+0]=i[c*6+f*2+0],i[c*6+f*2+0]=p;let g=i[d*6+f*2+1];i[d*6+f*2+1]=i[c*6+f*2+1],i[c*6+f*2+1]=g}d++,c--}else return d}}var Ed=32,zQ=(t,i)=>t.candidate-i.candidate,Uc=new Array(Ed).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),n_=new Float32Array(6);function LQ(t,i,r,s,l,d){let c=-1,u=0;if(d===0)c=tR(i),c!==-1&&(u=(i[c]+i[c+3])/2);else if(d===1)c=tR(t),c!==-1&&(u=BQ(r,s,l,c));else if(d===2){let h=e0(t),f=1.25*l,m=s*6,p=(s+l)*6;for(let g=0;g<3;g++){let v=i[g],w=(i[g+3]-v)/Ed;if(l<Ed/4){let x=[...Uc];x.length=l;let _=0;for(let A=m;A<p;A+=6,_++){let C=x[_];C.candidate=r[A+2*g],C.count=0;let{bounds:M,leftCacheBounds:D,rightCacheBounds:P}=C;for(let T=0;T<3;T++)P[T]=1/0,P[T+3]=-1/0,D[T]=1/0,D[T+3]=-1/0,M[T]=1/0,M[T+3]=-1/0;i_(A,r,M)}x.sort(zQ);let k=l;for(let A=0;A<k;A++){let C=x[A];for(;A+1<k&&x[A+1].candidate===C.candidate;)x.splice(A+1,1),k--}for(let A=m;A<p;A+=6){let C=r[A+2*g];for(let M=0;M<k;M++){let D=x[M];C>=D.candidate?i_(A,r,D.rightCacheBounds):(i_(A,r,D.leftCacheBounds),D.count++)}}for(let A=0;A<k;A++){let C=x[A],M=C.count,D=l-C.count,P=C.leftCacheBounds,T=C.rightCacheBounds,O=0;M!==0&&(O=e0(P)/h);let z=0;D!==0&&(z=e0(T)/h);let L=1+1.25*(O*M+z*D);L<f&&(c=g,f=L,u=C.candidate)}}else{for(let k=0;k<Ed;k++){let A=Uc[k];A.count=0,A.candidate=v+w+k*w;let C=A.bounds;for(let M=0;M<3;M++)C[M]=1/0,C[M+3]=-1/0}for(let k=m;k<p;k+=6){let A=~~((r[k+2*g]-v)/w);A>=Ed&&(A=Ed-1);let C=Uc[A];C.count++,i_(k,r,C.bounds)}let x=Uc[Ed-1];iR(x.bounds,x.rightCacheBounds);for(let k=Ed-2;k>=0;k--){let A=Uc[k],C=Uc[k+1];nR(A.bounds,C.rightCacheBounds,A.rightCacheBounds)}let _=0;for(let k=0;k<Ed-1;k++){let A=Uc[k],C=A.count,M=A.bounds,D=Uc[k+1].rightCacheBounds;C!==0&&(_===0?iR(M,n_):nR(M,n_,n_)),_+=C;let P=0,T=0;_!==0&&(P=e0(n_)/h);let O=l-_;O!==0&&(T=e0(D)/h);let z=1+1.25*(P*_+T*O);z<f&&(c=g,f=z,u=A.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${d} used.`);return{axis:c,pos:u}}function BQ(t,i,r,s){let l=0;for(let d=i,c=i+r;d<c;d++)l+=t[d*6+s*2];return l/r}function FQ(t,i){let r=t.attributes.position,s=t.index.array,l=s.length/3,d=new Float32Array(l*6),c=r.normalized,u=r.array,h=r.offset||0,f=3;r.isInterleavedBufferAttribute&&(f=r.data.stride);let m=["getX","getY","getZ"];for(let p=0;p<l;p++){let g=p*3,v=p*6,w,x,_;c?(w=s[g+0],x=s[g+1],_=s[g+2]):(w=s[g+0]*f+h,x=s[g+1]*f+h,_=s[g+2]*f+h);for(let k=0;k<3;k++){let A,C,M;c?(A=r[m[k]](w),C=r[m[k]](x),M=r[m[k]](_)):(A=u[w+k],C=u[x+k],M=u[_+k]);let D=A;C<D&&(D=C),M<D&&(D=M);let P=A;C>P&&(P=C),M>P&&(P=M);let T=(P-D)/2,O=k*2;d[v+O+0]=D+T,d[v+O+1]=T+(Math.abs(D)+T)*DQ,D<i[k]&&(i[k]=D),P>i[k+3]&&(i[k+3]=P)}}return d}function NQ(t,i){function r(k){g&&g(k/v)}function s(k,A,C,M=null,D=0){if(!w&&D>=h&&(w=!0,f&&(console.warn(`MeshBVH: Max depth of ${h} reached when generating BVH. Consider increasing maxDepth.`),console.warn(t))),C<=m||D>=h)return r(A+C),k.offset=A,k.count=C,k;let P=LQ(k.boundingData,M,c,A,C,p);if(P.axis===-1)return r(A+C),k.offset=A,k.count=C,k;let T=RQ(u,c,A,C,P);if(T===A||T===A+C)r(A+C),k.offset=A,k.count=C;else{k.splitAxis=P.axis;let O=new t_,z=A,L=T-A;k.left=O,O.boundingData=new Float32Array(6),DE(c,z,L,O.boundingData,d),s(O,z,L,d,D+1);let B=new t_,j=T,V=C-L;k.right=B,B.boundingData=new Float32Array(6),DE(c,j,V,B.boundingData,d),s(B,j,V,d,D+1)}return k}PQ(t,i);let l=new Float32Array(6),d=new Float32Array(6),c=FQ(t,l),u=t.index.array,h=i.maxDepth,f=i.verbose,m=i.maxLeafTris,p=i.strategy,g=i.onProgress,v=t.index.count/3,w=!1,x=[],_=OQ(t);if(_.length===1){let k=_[0],A=new t_;A.boundingData=l,IQ(c,k.offset,k.count,d),s(A,k.offset,k.count,d),x.push(A)}else for(let k of _){let A=new t_;A.boundingData=new Float32Array(6),DE(c,k.offset,k.count,A.boundingData,d),s(A,k.offset,k.count,d),x.push(A)}return x}function jQ(t,i){let r=NQ(t,i),s,l,d,c=[],u=i.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let m=0;m<r.length;m++){let p=r[m],g=h(p),v=new u(32*g);s=new Float32Array(v),l=new Uint32Array(v),d=new Uint16Array(v),f(0,p),c.push(v)}return c;function h(m){return m.count?1:1+h(m.left)+h(m.right)}function f(m,p){let g=m/4,v=m/2,w=!!p.count,x=p.boundingData;for(let _=0;_<6;_++)s[g+_]=x[_];if(w){let _=p.offset,k=p.count;return l[g+6]=_,d[v+14]=k,d[v+15]=65535,m+32}else{let _=p.left,k=p.right,A=p.splitAxis,C;if(C=f(m+32,_),C/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return l[g+6]=C/4,C=f(C,k),l[g+7]=A,C}}}var Tl=class{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,i){let r=1/0,s=-1/0;for(let l=0,d=t.length;l<d;l++){let c=t[l][i];r=c<r?c:r,s=c>s?c:s}this.min=r,this.max=s}setFromPoints(t,i){let r=1/0,s=-1/0;for(let l=0,d=i.length;l<d;l++){let c=i[l],u=t.dot(c);r=u<r?u:r,s=u>s?u:s}this.min=r,this.max=s}isSeparated(t){return this.min>t.max||t.min>this.max}};Tl.prototype.setFromBox=function(){let t=new N;return function(i,r){let s=r.min,l=r.max,d=1/0,c=-1/0;for(let u=0;u<=1;u++)for(let h=0;h<=1;h++)for(let f=0;f<=1;f++){t.x=s.x*u+l.x*(1-u),t.y=s.y*h+l.y*(1-h),t.z=s.z*f+l.z*(1-f);let m=i.dot(t);d=Math.min(m,d),c=Math.max(m,c)}this.min=d,this.max=c}}();var efe=function(){let t=new Tl;return function(i,r){let s=i.points,l=i.satAxes,d=i.satBounds,c=r.points,u=r.satAxes,h=r.satBounds;for(let f=0;f<3;f++){let m=d[f],p=l[f];if(t.setFromPoints(p,c),m.isSeparated(t))return!1}for(let f=0;f<3;f++){let m=h[f],p=u[f];if(t.setFromPoints(p,s),m.isSeparated(t))return!1}}}(),UQ=function(){let t=new N,i=new N,r=new N;return function(s,l,d){let c=s.start,u=t,h=l.start,f=i;r.subVectors(c,h),t.subVectors(s.end,s.start),i.subVectors(l.end,l.start);let m=r.dot(f),p=f.dot(u),g=f.dot(f),v=r.dot(u),w=u.dot(u)*g-p*p,x,_;w!==0?x=(m*p-v*g)/w:x=0,_=(m+x*p)/g,d.x=x,d.y=_}}(),PE=function(){let t=new q,i=new N,r=new N;return function(s,l,d,c){UQ(s,l,t);let u=t.x,h=t.y;if(u>=0&&u<=1&&h>=0&&h<=1){s.at(u,d),l.at(h,c);return}else if(u>=0&&u<=1){h<0?l.at(0,c):l.at(1,c),s.closestPointToPoint(c,!0,d);return}else if(h>=0&&h<=1){u<0?s.at(0,d):s.at(1,d),l.closestPointToPoint(d,!0,c);return}else{let f;u<0?f=s.start:f=s.end;let m;h<0?m=l.start:m=l.end;let p=i,g=r;if(s.closestPointToPoint(m,!0,i),l.closestPointToPoint(f,!0,r),p.distanceToSquared(m)<=g.distanceToSquared(f)){d.copy(p),c.copy(m);return}else{d.copy(f),c.copy(g);return}}}}(),VQ=function(){let t=new N,i=new N,r=new Ps,s=new Qs;return function(l,d){let{radius:c,center:u}=l,{a:h,b:f,c:m}=d;if(s.start=h,s.end=f,s.closestPointToPoint(u,!0,t).distanceTo(u)<=c||(s.start=h,s.end=m,s.closestPointToPoint(u,!0,t).distanceTo(u)<=c)||(s.start=f,s.end=m,s.closestPointToPoint(u,!0,t).distanceTo(u)<=c))return!0;let p=d.getPlane(r);if(Math.abs(p.distanceToPoint(u))<=c){let g=p.projectPoint(u,i);if(d.containsPoint(g))return!0}return!1}}(),HQ=1e-15;function Mp(t){return Math.abs(t)<HQ}var Md=class extends ua{constructor(...t){super(...t),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new N),this.satBounds=new Array(4).fill().map(()=>new Tl),this.points=[this.a,this.b,this.c],this.sphere=new Ur,this.plane=new Ps,this.needsUpdate=!0}intersectsSphere(t){return VQ(t,this)}update(){let t=this.a,i=this.b,r=this.c,s=this.points,l=this.satAxes,d=this.satBounds,c=l[0],u=d[0];this.getNormal(c),u.setFromPoints(c,s);let h=l[1],f=d[1];h.subVectors(t,i),f.setFromPoints(h,s);let m=l[2],p=d[2];m.subVectors(i,r),p.setFromPoints(m,s);let g=l[3],v=d[3];g.subVectors(r,t),v.setFromPoints(g,s),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(c,t),this.needsUpdate=!1}};Md.prototype.closestPointToSegment=function(){let t=new N,i=new N,r=new Qs;return function(s,l=null,d=null){let{start:c,end:u}=s,h=this.points,f,m=1/0;for(let p=0;p<3;p++){let g=(p+1)%3;r.start.copy(h[p]),r.end.copy(h[g]),PE(r,s,t,i),f=t.distanceToSquared(i),f<m&&(m=f,l&&l.copy(t),d&&d.copy(i))}return this.closestPointToPoint(c,t),f=c.distanceToSquared(t),f<m&&(m=f,l&&l.copy(t),d&&d.copy(c)),this.closestPointToPoint(u,t),f=u.distanceToSquared(t),f<m&&(m=f,l&&l.copy(t),d&&d.copy(u)),Math.sqrt(m)}}(),Md.prototype.intersectsTriangle=function(){let t=new Md,i=new Array(3),r=new Array(3),s=new Tl,l=new Tl,d=new N,c=new N,u=new N,h=new N,f=new Qs,m=new Qs,p=new Qs;return function(g,v=null,w=!1){this.needsUpdate&&this.update(),g.isExtendedTriangle?g.needsUpdate&&g.update():(t.copy(g),t.update(),g=t);let x=this.plane,_=g.plane;if(Math.abs(x.normal.dot(_.normal))>1-1e-10){let k=this.satBounds,A=this.satAxes;r[0]=g.a,r[1]=g.b,r[2]=g.c;for(let D=0;D<4;D++){let P=k[D],T=A[D];if(s.setFromPoints(T,r),P.isSeparated(s))return!1}let C=g.satBounds,M=g.satAxes;i[0]=this.a,i[1]=this.b,i[2]=this.c;for(let D=0;D<4;D++){let P=C[D],T=M[D];if(s.setFromPoints(T,i),P.isSeparated(s))return!1}for(let D=0;D<4;D++){let P=A[D];for(let T=0;T<4;T++){let O=M[T];if(d.crossVectors(P,O),s.setFromPoints(d,i),l.setFromPoints(d,r),s.isSeparated(l))return!1}}return v&&(w||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),v.start.set(0,0,0),v.end.set(0,0,0)),!0}else{let k=this.points,A=!1,C=0;for(let V=0;V<3;V++){let H=k[V],Y=k[(V+1)%3];f.start.copy(H),f.end.copy(Y),f.delta(c);let se=A?m.start:m.end,re=Mp(_.distanceToPoint(H));if(Mp(_.normal.dot(c))&&re){m.copy(f),C=2;break}if((_.intersectLine(f,se)||re)&&!Mp(se.distanceTo(Y))){if(C++,A)break;A=!0}}if(C===1&&g.containsPoint(m.end))return v&&(v.start.copy(m.end),v.end.copy(m.end)),!0;if(C!==2)return!1;let M=g.points,D=!1,P=0;for(let V=0;V<3;V++){let H=M[V],Y=M[(V+1)%3];f.start.copy(H),f.end.copy(Y),f.delta(u);let se=D?p.start:p.end,re=Mp(x.distanceToPoint(H));if(Mp(x.normal.dot(u))&&re){p.copy(f),P=2;break}if((x.intersectLine(f,se)||re)&&!Mp(se.distanceTo(Y))){if(P++,D)break;D=!0}}if(P===1&&this.containsPoint(p.end))return v&&(v.start.copy(p.end),v.end.copy(p.end)),!0;if(P!==2)return!1;if(m.delta(c),p.delta(u),c.dot(u)<0){let V=p.start;p.start=p.end,p.end=V}let T=m.start.dot(c),O=m.end.dot(c),z=p.start.dot(c),L=p.end.dot(c),B=O<z,j=T<L;return T!==L&&z!==O&&B===j?!1:(v&&(h.subVectors(m.start,p.start),h.dot(c)>0?v.start.copy(m.start):v.start.copy(p.start),h.subVectors(m.end,p.end),h.dot(c)<0?v.end.copy(m.end):v.end.copy(p.end)),!0)}}}(),Md.prototype.distanceToPoint=function(){let t=new N;return function(i){return this.closestPointToPoint(i,t),i.distanceTo(t)}}(),Md.prototype.distanceToTriangle=function(){let t=new N,i=new N,r=["a","b","c"],s=new Qs,l=new Qs;return function(d,c=null,u=null){let h=c||u?s:null;if(this.intersectsTriangle(d,h))return(c||u)&&(c&&h.getCenter(c),u&&h.getCenter(u)),0;let f=1/0;for(let m=0;m<3;m++){let p,g=r[m],v=d[g];this.closestPointToPoint(v,t),p=v.distanceToSquared(t),p<f&&(f=p,c&&c.copy(t),u&&u.copy(v));let w=this[g];d.closestPointToPoint(w,t),p=w.distanceToSquared(t),p<f&&(f=p,c&&c.copy(w),u&&u.copy(t))}for(let m=0;m<3;m++){let p=r[m],g=r[(m+1)%3];s.set(this[p],this[g]);for(let v=0;v<3;v++){let w=r[v],x=r[(v+1)%3];l.set(d[w],d[x]),PE(s,l,t,i);let _=t.distanceToSquared(i);_<f&&(f=_,c&&c.copy(t),u&&u.copy(i))}}return Math.sqrt(f)}}();var Dl=class{constructor(t,i,r){this.isOrientedBox=!0,this.min=new N,this.max=new N,this.matrix=new Ze,this.invMatrix=new Ze,this.points=new Array(8).fill().map(()=>new N),this.satAxes=new Array(3).fill().map(()=>new N),this.satBounds=new Array(3).fill().map(()=>new Tl),this.alignedSatBounds=new Array(3).fill().map(()=>new Tl),this.needsUpdate=!1,t&&this.min.copy(t),i&&this.max.copy(i),r&&this.matrix.copy(r)}set(t,i,r){this.min.copy(t),this.max.copy(i),this.matrix.copy(r),this.needsUpdate=!0}copy(t){this.min.copy(t.min),this.max.copy(t.max),this.matrix.copy(t.matrix),this.needsUpdate=!0}};Dl.prototype.update=function(){return function(){let t=this.matrix,i=this.min,r=this.max,s=this.points;for(let h=0;h<=1;h++)for(let f=0;f<=1;f++)for(let m=0;m<=1;m++){let p=1*h|2*f|4*m,g=s[p];g.x=h?r.x:i.x,g.y=f?r.y:i.y,g.z=m?r.z:i.z,g.applyMatrix4(t)}let l=this.satBounds,d=this.satAxes,c=s[0];for(let h=0;h<3;h++){let f=d[h],m=l[h],p=1<<h,g=s[p];f.subVectors(c,g),m.setFromPoints(f,s)}let u=this.alignedSatBounds;u[0].setFromPointsField(s,"x"),u[1].setFromPointsField(s,"y"),u[2].setFromPointsField(s,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}(),Dl.prototype.intersectsBox=function(){let t=new Tl;return function(i){this.needsUpdate&&this.update();let r=i.min,s=i.max,l=this.satBounds,d=this.satAxes,c=this.alignedSatBounds;if(t.min=r.x,t.max=s.x,c[0].isSeparated(t)||(t.min=r.y,t.max=s.y,c[1].isSeparated(t))||(t.min=r.z,t.max=s.z,c[2].isSeparated(t)))return!1;for(let u=0;u<3;u++){let h=d[u],f=l[u];if(t.setFromBox(h,i),f.isSeparated(t))return!1}return!0}}(),Dl.prototype.intersectsTriangle=function(){let t=new Md,i=new Array(3),r=new Tl,s=new Tl,l=new N;return function(d){this.needsUpdate&&this.update(),d.isExtendedTriangle?d.needsUpdate&&d.update():(t.copy(d),t.update(),d=t);let c=this.satBounds,u=this.satAxes;i[0]=d.a,i[1]=d.b,i[2]=d.c;for(let p=0;p<3;p++){let g=c[p],v=u[p];if(r.setFromPoints(v,i),g.isSeparated(r))return!1}let h=d.satBounds,f=d.satAxes,m=this.points;for(let p=0;p<3;p++){let g=h[p],v=f[p];if(r.setFromPoints(v,m),g.isSeparated(r))return!1}for(let p=0;p<3;p++){let g=u[p];for(let v=0;v<4;v++){let w=f[v];if(l.crossVectors(g,w),r.setFromPoints(l,i),s.setFromPoints(l,m),r.isSeparated(s))return!1}}return!0}}(),Dl.prototype.closestPointToPoint=function(){return function(t,i){return this.needsUpdate&&this.update(),i.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),i}}(),Dl.prototype.distanceToPoint=function(){let t=new N;return function(i){return this.closestPointToPoint(i,t),i.distanceTo(t)}}(),Dl.prototype.distanceToBox=function(){let t=["x","y","z"],i=new Array(12).fill().map(()=>new Qs),r=new Array(12).fill().map(()=>new Qs),s=new N,l=new N;return function(d,c=0,u=null,h=null){if(this.needsUpdate&&this.update(),this.intersectsBox(d))return(u||h)&&(d.getCenter(l),this.closestPointToPoint(l,s),d.closestPointToPoint(s,l),u&&u.copy(s),h&&h.copy(l)),0;let f=c*c,m=d.min,p=d.max,g=this.points,v=1/0;for(let x=0;x<8;x++){let _=g[x];l.copy(_).clamp(m,p);let k=_.distanceToSquared(l);if(k<v&&(v=k,u&&u.copy(_),h&&h.copy(l),k<f))return Math.sqrt(k)}let w=0;for(let x=0;x<3;x++)for(let _=0;_<=1;_++)for(let k=0;k<=1;k++){let A=(x+1)%3,C=(x+2)%3,M=_<<A|k<<C,D=1<<x|_<<A|k<<C,P=g[M],T=g[D];i[w].set(P,T);let O=t[x],z=t[A],L=t[C],B=r[w],j=B.start,V=B.end;j[O]=m[O],j[z]=_?m[z]:p[z],j[L]=k?m[L]:p[z],V[O]=p[O],V[z]=_?m[z]:p[z],V[L]=k?m[L]:p[z],w++}for(let x=0;x<=1;x++)for(let _=0;_<=1;_++)for(let k=0;k<=1;k++){l.x=x?p.x:m.x,l.y=_?p.y:m.y,l.z=k?p.z:m.z,this.closestPointToPoint(l,s);let A=l.distanceToSquared(s);if(A<v&&(v=A,u&&u.copy(s),h&&h.copy(l),A<f))return Math.sqrt(A)}for(let x=0;x<12;x++){let _=i[x];for(let k=0;k<12;k++){let A=r[k];PE(_,A,s,l);let C=s.distanceToSquared(l);if(C<v&&(v=C,u&&u.copy(s),h&&h.copy(l),C<f))return Math.sqrt(C)}}return Math.sqrt(v)}}();var Tp=new N,Dp=new N,Pp=new N,r_=new q,a_=new q,s_=new q,rR=new N,aR=new N,sR=new N,o_=new N;function GQ(t,i,r,s,l,d){let c;return d===qn?c=t.intersectTriangle(s,r,i,!0,l):c=t.intersectTriangle(i,r,s,d!==ta,l),c===null?null:{distance:t.origin.distanceTo(l),point:l.clone()}}function WQ(t,i,r,s,l,d,c,u,h){Tp.fromBufferAttribute(i,d),Dp.fromBufferAttribute(i,c),Pp.fromBufferAttribute(i,u);let f=GQ(t,Tp,Dp,Pp,o_,h);if(f){s&&(r_.fromBufferAttribute(s,d),a_.fromBufferAttribute(s,c),s_.fromBufferAttribute(s,u),f.uv=ua.getInterpolation(o_,Tp,Dp,Pp,r_,a_,s_,new q)),l&&(r_.fromBufferAttribute(l,d),a_.fromBufferAttribute(l,c),s_.fromBufferAttribute(l,u),f.uv1=ua.getInterpolation(o_,Tp,Dp,Pp,r_,a_,s_,new q)),r&&(rR.fromBufferAttribute(r,d),aR.fromBufferAttribute(r,c),sR.fromBufferAttribute(r,u),f.normal=ua.getInterpolation(o_,Tp,Dp,Pp,rR,aR,sR,new N),f.normal.dot(t.direction)>0&&f.normal.multiplyScalar(-1));let m={a:d,b:c,c:u,normal:new N,materialIndex:0};ua.getNormal(Tp,Dp,Pp,m.normal),f.face=m,f.faceIndex=d}return f}function oR(t,i,r,s,l){let d=s*3,c=t.index.getX(d),u=t.index.getX(d+1),h=t.index.getX(d+2),{position:f,normal:m,uv:p,uv1:g}=t.attributes,v=WQ(r,f,m,p,g,c,u,h,i);return v?(v.faceIndex=s,l&&l.push(v),v):null}function qQ(t,i,r,s,l,d){for(let c=s,u=s+l;c<u;c++)oR(t,i,r,c,d)}function $Q(t,i,r,s,l){let d=1/0,c=null;for(let u=s,h=s+l;u<h;u++){let f=oR(t,i,r,u);f&&f.distance<d&&(c=f,d=f.distance)}return c}function Pl(t,i,r,s){let l=t.a,d=t.b,c=t.c,u=i,h=i+1,f=i+2;r&&(u=r.getX(i),h=r.getX(i+1),f=r.getX(i+2)),l.x=s.getX(u),l.y=s.getY(u),l.z=s.getZ(u),d.x=s.getX(h),d.y=s.getY(h),d.z=s.getZ(h),c.x=s.getX(f),c.y=s.getY(f),c.z=s.getZ(f)}function lR(t,i,r,s,l,d,c){let u=r.index,h=r.attributes.position;for(let f=t,m=i+t;f<m;f++)if(Pl(c,f*3,u,h),c.needsUpdate=!0,s(c,f,l,d))return!0;return!1}var dR=class{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){let t=this._primitives;return t.length===0?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}};function Vc(t,i){return i[t+15]===65535}function Op(t,i){return i[t+6]}function t0(t,i){return i[t+14]}function i0(t){return t+8}function n0(t,i){return i[t+6]}function ZQ(t,i){return i[t+7]}var Ip=new nn,l_=new N,YQ=["x","y","z"];function OE(t,i,r,s,l){let d=t*2,c=Rp,u=Hc,h=Gc;if(Vc(d,u)){let f=Op(t,h),m=t0(d,u);qQ(i,r,s,f,m,l)}else{let f=i0(t);d_(f,c,s,l_)&&OE(f,i,r,s,l);let m=n0(t,h);d_(m,c,s,l_)&&OE(m,i,r,s,l)}}function IE(t,i,r,s){let l=t*2,d=Rp,c=Hc,u=Gc;if(Vc(l,c)){let h=Op(t,u),f=t0(l,c);return $Q(i,r,s,h,f)}else{let h=ZQ(t,u),f=YQ[h],m=s.direction[f]>=0,p,g;m?(p=i0(t),g=n0(t,u)):(p=n0(t,u),g=i0(t));let v=d_(p,d,s,l_)?IE(p,i,r,s):null;if(v){let x=v.point[f];if(m?x<=d[g+h]:x>=d[g+h+3])return v}let w=d_(g,d,s,l_)?IE(g,i,r,s):null;return v&&w?v.distance<=w.distance?v:w:v||w||null}}var XQ=function(){let t,i,r=[],s=new dR(()=>new nn);return function(...d){t=s.getPrimitive(),i=s.getPrimitive(),r.push(t,i);let c=l(...d);s.releasePrimitive(t),s.releasePrimitive(i),r.pop(),r.pop();let u=r.length;return u>0&&(i=r[u-1],t=r[u-2]),c};function l(d,c,u,h,f=null,m=0,p=0){function g(A){let C=A*2,M=Hc,D=Gc;for(;!Vc(C,M);)A=i0(A),C=A*2;return Op(A,D)}function v(A){let C=A*2,M=Hc,D=Gc;for(;!Vc(C,M);)A=n0(A,D),C=A*2;return Op(A,D)+t0(C,M)}let w=d*2,x=Rp,_=Hc,k=Gc;if(Vc(w,_)){let A=Op(d,k),C=t0(w,_);return Ml(d,x,t),h(A,C,!1,p,m+d,t)}else{let A=i0(d),C=n0(d,k),M=A,D=C,P,T,O,z;if(f&&(O=t,z=i,Ml(M,x,O),Ml(D,x,z),P=f(O),T=f(z),T<P)){M=C,D=A;let se=P;P=T,T=se,O=z}O||(O=t,Ml(M,x,O));let L=Vc(M*2,_),B=u(O,L,P,p+1,m+M),j;if(B===2){let se=g(M),re=v(M)-se;j=h(se,re,!0,p+1,m+M,O)}else j=B&&l(M,c,u,h,f,m,p+1);if(j)return!0;z=i,Ml(D,x,z);let V=Vc(D*2,_),H=u(z,V,T,p+1,m+D),Y;if(H===2){let se=g(D),re=v(D)-se;Y=h(se,re,!0,p+1,m+D,z)}else Y=H&&l(D,c,u,h,f,m,p+1);return!!Y}}}(),KQ=function(){let t=new Md,i=new Md,r=new Ze,s=new Dl,l=new Dl;return function d(c,u,h,f,m=null){let p=c*2,g=Rp,v=Hc,w=Gc;if(m===null&&(h.boundingBox||h.computeBoundingBox(),s.set(h.boundingBox.min,h.boundingBox.max,f),m=s),Vc(p,v)){let x=u,_=x.index,k=x.attributes.position,A=h.index,C=h.attributes.position,M=Op(c,w),D=t0(p,v);if(r.copy(f).invert(),h.boundsTree)return Ml(c,g,l),l.matrix.copy(r),l.needsUpdate=!0,h.boundsTree.shapecast({intersectsBounds:P=>l.intersectsBox(P),intersectsTriangle:P=>{P.a.applyMatrix4(f),P.b.applyMatrix4(f),P.c.applyMatrix4(f),P.needsUpdate=!0;for(let T=M*3,O=(D+M)*3;T<O;T+=3)if(Pl(i,T,_,k),i.needsUpdate=!0,P.intersectsTriangle(i))return!0;return!1}});for(let P=M*3,T=D+M*3;P<T;P+=3){Pl(t,P,_,k),t.a.applyMatrix4(r),t.b.applyMatrix4(r),t.c.applyMatrix4(r),t.needsUpdate=!0;for(let O=0,z=A.count;O<z;O+=3)if(Pl(i,O,A,C),i.needsUpdate=!0,t.intersectsTriangle(i))return!0}}else{let x=c+8,_=w[c+6];return Ml(x,g,Ip),!!(m.intersectsBox(Ip)&&d(x,u,h,f,m)||(Ml(_,g,Ip),m.intersectsBox(Ip)&&d(_,u,h,f,m)))}}}();function d_(t,i,r,s){return Ml(t,i,Ip),r.intersectBox(Ip,s)}var RE=[],c_,Rp,Hc,Gc;function r0(t){c_&&RE.push(c_),c_=t,Rp=new Float32Array(t),Hc=new Uint16Array(t),Gc=new Uint32Array(t)}function u_(){c_=null,Rp=null,Hc=null,Gc=null,RE.length&&r0(RE.pop())}var zE=Symbol("skip tree generation"),LE=new nn,BE=new nn,zp=new Ze,lh=new Dl,a0=new Dl,s0=new N,h_=new N,QQ=new N,JQ=new N,eJ=new N,cR=new nn,Ol=new dR(()=>new Md),o0=class{static serialize(t,i={}){if(i.isBufferGeometry)return console.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),o0.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});i=Z({cloneBuffers:!0},i);let r=t.geometry,s=t._roots,l=r.getIndex(),d;return i.cloneBuffers?d={roots:s.map(c=>c.slice()),index:l.array.slice()}:d={roots:s,index:l.array},d}static deserialize(t,i,r={}){if(typeof r=="boolean")return console.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),o0.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});r=Z({setIndex:!0},r);let{index:s,roots:l}=t,d=new o0(i,ge(Z({},r),{[zE]:!0}));if(d._roots=l,r.setIndex){let c=i.getIndex();if(c===null){let u=new Qt(t.index,1,!1);i.setIndex(u)}else c.array!==s&&(c.array.set(s),c.needsUpdate=!0)}return d}constructor(t,i={}){if(t.isBufferGeometry){if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(i=Object.assign({strategy:0,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[zE]:!1},i),i.useSharedArrayBuffer&&typeof SharedArrayBuffer>"u")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,i[zE]||(this._roots=jQ(t,i),!t.boundingBox&&i.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new nn))),this.geometry=t}refit(t=null){t&&Array.isArray(t)&&(t=new Set(t));let i=this.geometry,r=i.index.array,s=i.attributes.position,l,d,c,u,h=0,f=this._roots;for(let p=0,g=f.length;p<g;p++)l=f[p],d=new Uint32Array(l),c=new Uint16Array(l),u=new Float32Array(l),m(0,h),h+=l.byteLength;function m(p,g,v=!1){let w=p*2;if(c[w+15]===65535){let x=d[p+6],_=c[w+14],k=1/0,A=1/0,C=1/0,M=-1/0,D=-1/0,P=-1/0;for(let T=3*x,O=3*(x+_);T<O;T++){let z=r[T],L=s.getX(z),B=s.getY(z),j=s.getZ(z);L<k&&(k=L),L>M&&(M=L),B<A&&(A=B),B>D&&(D=B),j<C&&(C=j),j>P&&(P=j)}return u[p+0]!==k||u[p+1]!==A||u[p+2]!==C||u[p+3]!==M||u[p+4]!==D||u[p+5]!==P?(u[p+0]=k,u[p+1]=A,u[p+2]=C,u[p+3]=M,u[p+4]=D,u[p+5]=P,!0):!1}else{let x=p+8,_=d[p+6],k=x+g,A=_+g,C=v,M=!1,D=!1;t?C||(M=t.has(k),D=t.has(A),C=!M&&!D):(M=!0,D=!0);let P=C||M,T=C||D,O=!1;P&&(O=m(x,g,C));let z=!1;T&&(z=m(_,g,C));let L=O||z;if(L)for(let B=0;B<3;B++){let j=x+B,V=_+B,H=u[j],Y=u[j+3],se=u[V],re=u[V+3];u[p+B]=H<se?H:se,u[p+B+3]=Y>re?Y:re}return L}}}traverse(t,i=0){let r=this._roots[i],s=new Uint32Array(r),l=new Uint16Array(r);d(0);function d(c,u=0){let h=c*2,f=l[h+15]===65535;if(f){let m=s[c+6],p=l[h+14];t(u,f,new Float32Array(r,c*4,6),m,p)}else{let m=c+8,p=s[c+6],g=s[c+7];t(u,f,new Float32Array(r,c*4,6),g)||(d(m,u+1),d(p,u+1))}}}raycast(t,i=qs){let r=this._roots,s=this.geometry,l=[],d=i.isMaterial,c=Array.isArray(i),u=s.groups,h=d?i.side:i;for(let f=0,m=r.length;f<m;f++){let p=c?i[u[f].materialIndex].side:h,g=l.length;if(r0(r[f]),OE(0,s,p,t,l),u_(),c){let v=u[f].materialIndex;for(let w=g,x=l.length;w<x;w++)l[w].face.materialIndex=v}}return l}raycastFirst(t,i=qs){let r=this._roots,s=this.geometry,l=i.isMaterial,d=Array.isArray(i),c=null,u=s.groups,h=l?i.side:i;for(let f=0,m=r.length;f<m;f++){let p=d?i[u[f].materialIndex].side:h;r0(r[f]);let g=IE(0,s,p,t);u_(),g!=null&&(c==null||g.distance<c.distance)&&(c=g,d&&(g.face.materialIndex=u[f].materialIndex))}return c}intersectsGeometry(t,i){let r=this.geometry,s=!1;for(let l of this._roots)if(r0(l),s=KQ(0,r,t,i),u_(),s)break;return s}shapecast(t,i,r){let s=this.geometry;if(t instanceof Function){if(i){let p=i;i=(g,v,w,x)=>{let _=v*3;return p(g,_,_+1,_+2,w,x)}}t={boundsTraverseOrder:r,intersectsBounds:t,intersectsTriangle:i,intersectsRange:null},console.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}let l=Ol.getPrimitive(),{boundsTraverseOrder:d,intersectsBounds:c,intersectsRange:u,intersectsTriangle:h}=t;if(u&&h){let p=u;u=(g,v,w,x,_)=>p(g,v,w,x,_)?!0:lR(g,v,s,h,w,x,l)}else u||(h?u=(p,g,v,w)=>lR(p,g,s,h,v,w,l):u=(p,g,v)=>v);let f=!1,m=0;for(let p of this._roots){if(r0(p),f=XQ(0,s,c,u,d,m),u_(),f)break;m+=p.byteLength}return Ol.releasePrimitive(l),f}bvhcast(t,i,r){let{intersectsRanges:s,intersectsTriangles:l}=r,d=this.geometry.index,c=this.geometry.attributes.position,u=t.geometry.index,h=t.geometry.attributes.position;zp.copy(i).invert();let f=Ol.getPrimitive(),m=Ol.getPrimitive();if(l){let g=function(v,w,x,_,k,A,C,M){for(let D=x,P=x+_;D<P;D++){Pl(m,D*3,u,h),m.a.applyMatrix4(i),m.b.applyMatrix4(i),m.c.applyMatrix4(i),m.needsUpdate=!0;for(let T=v,O=v+w;T<O;T++)if(Pl(f,T*3,d,c),f.needsUpdate=!0,l(f,m,T,D,k,A,C,M))return!0}return!1};if(s){let v=s;s=function(w,x,_,k,A,C,M,D){return v(w,x,_,k,A,C,M,D)?!0:g(w,x,_,k,A,C,M,D)}}else s=g}t.getBoundingBox(BE),BE.applyMatrix4(i);let p=this.shapecast({intersectsBounds:g=>BE.intersectsBox(g),intersectsRange:(g,v,w,x,_,k)=>(LE.copy(k),LE.applyMatrix4(zp),t.shapecast({intersectsBounds:A=>LE.intersectsBox(A),intersectsRange:(A,C,M,D,P)=>s(g,v,A,C,x,_,D,P)}))});return Ol.releasePrimitive(f),Ol.releasePrimitive(m),p}intersectsBox(t,i){return lh.set(t.min,t.max,i),lh.needsUpdate=!0,this.shapecast({intersectsBounds:r=>lh.intersectsBox(r),intersectsTriangle:r=>lh.intersectsTriangle(r)})}intersectsSphere(t){return this.shapecast({intersectsBounds:i=>t.intersectsBox(i),intersectsTriangle:i=>i.intersectsSphere(t)})}closestPointToGeometry(t,i,r={},s={},l=0,d=1/0){t.boundingBox||t.computeBoundingBox(),lh.set(t.boundingBox.min,t.boundingBox.max,i),lh.needsUpdate=!0;let c=this.geometry,u=c.attributes.position,h=c.index,f=t.attributes.position,m=t.index,p=Ol.getPrimitive(),g=Ol.getPrimitive(),v=h_,w=QQ,x=null,_=null;s&&(x=JQ,_=eJ);let k=1/0,A=null,C=null;return zp.copy(i).invert(),a0.matrix.copy(zp),this.shapecast({boundsTraverseOrder:M=>lh.distanceToBox(M),intersectsBounds:(M,D,P)=>P<k&&P<d?(D&&(a0.min.copy(M.min),a0.max.copy(M.max),a0.needsUpdate=!0),!0):!1,intersectsRange:(M,D)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:P=>a0.distanceToBox(P),intersectsBounds:(P,T,O)=>O<k&&O<d,intersectsRange:(P,T)=>{for(let O=P*3,z=(P+T)*3;O<z;O+=3){Pl(g,O,m,f),g.a.applyMatrix4(i),g.b.applyMatrix4(i),g.c.applyMatrix4(i),g.needsUpdate=!0;for(let L=M*3,B=(M+D)*3;L<B;L+=3){Pl(p,L,h,u),p.needsUpdate=!0;let j=p.distanceToTriangle(g,v,x);if(j<k&&(w.copy(v),_&&_.copy(x),k=j,A=L/3,C=O/3),j<l)return!0}}}});{let P=m?m.count:f.count;for(let T=0,O=P;T<O;T+=3){Pl(g,T,m,f),g.a.applyMatrix4(i),g.b.applyMatrix4(i),g.c.applyMatrix4(i),g.needsUpdate=!0;for(let z=M*3,L=(M+D)*3;z<L;z+=3){Pl(p,z,h,u),p.needsUpdate=!0;let B=p.distanceToTriangle(g,v,x);if(B<k&&(w.copy(v),_&&_.copy(x),k=B,A=z/3,C=T/3),B<l)return!0}}}}}),Ol.releasePrimitive(p),Ol.releasePrimitive(g),k===1/0?null:(r.point?r.point.copy(w):r.point=w.clone(),r.distance=k,r.faceIndex=A,s&&(s.point?s.point.copy(_):s.point=_.clone(),s.point.applyMatrix4(zp),w.applyMatrix4(zp),s.distance=w.sub(s.point).length(),s.faceIndex=C),r)}closestPointToPoint(t,i={},r=0,s=1/0){let l=r*r,d=s*s,c=1/0,u=null;if(this.shapecast({boundsTraverseOrder:f=>(s0.copy(t).clamp(f.min,f.max),s0.distanceToSquared(t)),intersectsBounds:(f,m,p)=>p<c&&p<d,intersectsTriangle:(f,m)=>{f.closestPointToPoint(t,s0);let p=t.distanceToSquared(s0);return p<c&&(h_.copy(s0),c=p,u=m),p<l}}),c===1/0)return null;let h=Math.sqrt(c);return i.point?i.point.copy(h_):i.point=h_.clone(),i.distance=h,i.faceIndex=u,i}getBoundingBox(t){return t.makeEmpty(),this._roots.forEach(i=>{Ml(0,new Float32Array(i),cR),t.union(cR)}),t}},l0=sn(kS()),tJ=.5*(Math.sqrt(3)-1),d0=(3-Math.sqrt(3))/6,iJ=1/3,Il=1/6,tfe=(Math.sqrt(5)-1)/4,ife=(5-Math.sqrt(5))/20,c0=t=>Math.floor(t)|0,uR=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]),FE=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function NE(t=Math.random){let i=hR(t),r=new Float64Array(i).map(l=>uR[l%12*2]),s=new Float64Array(i).map(l=>uR[l%12*2+1]);return function(l,d){let c=0,u=0,h=0,f=(l+d)*tJ,m=c0(l+f),p=c0(d+f),g=(m+p)*d0,v=m-g,w=p-g,x=l-v,_=d-w,k,A;x>_?(k=1,A=0):(k=0,A=1);let C=x-k+d0,M=_-A+d0,D=x-1+2*d0,P=_-1+2*d0,T=m&255,O=p&255,z=.5-x*x-_*_;if(z>=0){let j=T+i[O],V=r[j],H=s[j];z*=z,c=z*z*(V*x+H*_)}let L=.5-C*C-M*M;if(L>=0){let j=T+k+i[O+A],V=r[j],H=s[j];L*=L,u=L*L*(V*C+H*M)}let B=.5-D*D-P*P;if(B>=0){let j=T+1+i[O+1],V=r[j],H=s[j];B*=B,h=B*B*(V*D+H*P)}return 70*(c+u+h)}}function nJ(t=Math.random){let i=hR(t),r=new Float64Array(i).map(d=>FE[d%12*3]),s=new Float64Array(i).map(d=>FE[d%12*3+1]),l=new Float64Array(i).map(d=>FE[d%12*3+2]);return function(d,c,u){let h,f,m,p,g=(d+c+u)*iJ,v=c0(d+g),w=c0(c+g),x=c0(u+g),_=(v+w+x)*Il,k=v-_,A=w-_,C=x-_,M=d-k,D=c-A,P=u-C,T,O,z,L,B,j;M>=D?D>=P?(T=1,O=0,z=0,L=1,B=1,j=0):M>=P?(T=1,O=0,z=0,L=1,B=0,j=1):(T=0,O=0,z=1,L=1,B=0,j=1):D<P?(T=0,O=0,z=1,L=0,B=1,j=1):M<P?(T=0,O=1,z=0,L=0,B=1,j=1):(T=0,O=1,z=0,L=1,B=1,j=0);let V=M-T+Il,H=D-O+Il,Y=P-z+Il,se=M-L+2*Il,re=D-B+2*Il,$=P-j+2*Il,te=M-1+3*Il,he=D-1+3*Il,oe=P-1+3*Il,ee=v&255,pe=w&255,ce=x&255,ve=.6-M*M-D*D-P*P;if(ve<0)h=0;else{let Ee=ee+i[pe+i[ce]];ve*=ve,h=ve*ve*(r[Ee]*M+s[Ee]*D+l[Ee]*P)}let le=.6-V*V-H*H-Y*Y;if(le<0)f=0;else{let Ee=ee+T+i[pe+O+i[ce+z]];le*=le,f=le*le*(r[Ee]*V+s[Ee]*H+l[Ee]*Y)}let Pe=.6-se*se-re*re-$*$;if(Pe<0)m=0;else{let Ee=ee+L+i[pe+B+i[ce+j]];Pe*=Pe,m=Pe*Pe*(r[Ee]*se+s[Ee]*re+l[Ee]*$)}let we=.6-te*te-he*he-oe*oe;if(we<0)p=0;else{let Ee=ee+1+i[pe+1+i[ce+1]];we*=we,p=we*we*(r[Ee]*te+s[Ee]*he+l[Ee]*oe)}return 32*(h+f+m+p)}}function hR(t){let i=new Uint8Array(512);for(let r=0;r<512/2;r++)i[r]=r;for(let r=0;r<512/2-1;r++){let s=r+~~(t()*(256-r)),l=i[r];i[r]=i[s],i[s]=l}for(let r=256;r<512;r++)i[r]=i[r-256];return i}var No=new ua,rJ=class{constructor(t){this.weightAttribute=null;let i=t.geometry;if(!i.isBufferGeometry||i.attributes.position.itemSize!==3)throw new Error("THREE.MeshSurfaceSampler: Requires BufferGeometry triangle mesh.");i.index&&(i=i.toNonIndexed()),this.geometry=i,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.distribution=null}build(){let t=this.positionAttribute,i=new Float32Array(t.count/3);for(let s=0;s<t.count;s+=3){let l=1;No.a.fromBufferAttribute(t,s),No.b.fromBufferAttribute(t,s+1),No.c.fromBufferAttribute(t,s+2),l*=No.getArea(),i[s/3]=l}this.distribution=new Float32Array(t.count/3);let r=0;for(let s=0;s<i.length;s++)r+=i[s],this.distribution[s]=r;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,i){if(this.distribution){let r=this.distribution[this.distribution.length-1],s=this.binarySearch(this.randomFunction()*r);return this.sampleFace(s,t,i)}}binarySearch(t){if(!this.distribution)return 0;let i=this.distribution,r=0,s=i.length-1,l=-1;for(;r<=s;){let d=Math.ceil((r+s)/2);if(d===0||i[d-1]<=t&&i[d]>t){l=d;break}else t<i[d]?s=d-1:r=d+1}return l}sampleFace(t,i,r){let s=this.randomFunction(),l=this.randomFunction();return s+l>1&&(s=1-s,l=1-l),No.a.fromBufferAttribute(this.positionAttribute,t*3),No.b.fromBufferAttribute(this.positionAttribute,t*3+1),No.c.fromBufferAttribute(this.positionAttribute,t*3+2),i.set(0,0,0).addScaledVector(No.a,s).addScaledVector(No.b,l).addScaledVector(No.c,1-(s+l)),No.getNormal(r),this}},aJ=sn(Ub()),sJ=new Ze,oJ=new Ze,lJ=new Ze,u0;(t=>{function i(r){return r&&r.__isSPEObject}t.is=i})(u0||(u0={}));var jE=t=>class extends t{constructor(){super(...arguments),this.previousModelViewMatrix=new Ze,this.copyPreviousMatrix=!0,this.hiddenMatrix=new Ze,this.matrixWorldRigid=new Ze,this.shearScale=new Ze,this.shearScaleInv=new Ze}get __isSPEObject(){return!0}isDescendantOf(i){i instanceof ln&&(i=i.uuid);let r=this;for(;r.parent;){if(r.parent.uuid===i)return!0;r=r.parent}return!1}updateMatrixWorld(i){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||i)&&(this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,i=!0);for(let r of this.children)r.updateMatrixWorld(i)}updateWorldMatrix(i,r){let s=this.parent;if(i&&s!==null&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),r)for(let l of this.children)l.updateWorldMatrix(!1,!0)}traverseChildren(i,r=0){for(let s of this.children)u0.is(s)&&s.traverseObject(i,r+1)}traverseObject(i,r=0){if(i(this,r)!==!0)for(let s of this.children)u0.is(s)&&s.traverseObject(i,r+1)}updateMatrixWorldSVD(){let i=this.matrixWorld.elements,r=[[i[0],i[4],i[8]],[i[1],i[5],i[9]],[i[2],i[6],i[10]]],{u:s,v:l,q:d}=(0,aJ.SVD)(r),c=sJ.set(s[0][0],s[0][1],s[0][2],0,s[1][0],s[1][1],s[1][2],0,s[2][0],s[2][1],s[2][2],0,0,0,0,1),u=oJ.set(l[0][0],l[0][1],l[0][2],0,l[1][0],l[1][1],l[1][2],0,l[2][0],l[2][1],l[2][2],0,0,0,0,1),h=lJ.copy(u).transpose();this.shearScale.makeScale(d[0],d[1],d[2]).multiply(h).premultiply(u),this.shearScaleInv.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(c,h).copyPosition(this.matrixWorld),d.every(f=>Math.abs(d[0]-f)<.01)?this.hasNonUniformScale=!1:this.hasNonUniformScale=!0}attach(i,r){this.updateWorldMatrix(!0,!1);let s=new Ze().copy(this.matrixWorld).invert();return i.parent!==null&&(i.parent.updateWorldMatrix(!0,!1),s.multiply(i.parent.matrixWorld)),"hiddenMatrix"in i&&i.hiddenMatrix instanceof Ze?i.hiddenMatrix.premultiply(s):i.applyMatrix4(s),i.updateWorldMatrix(!1,!1),this.add(i),r!==void 0&&(this.children.pop(),this.children.splice(r,0,i)),this}copy(i,r=!1){return super.copy(i,r),this.hasNonUniformScale=i.hasNonUniformScale,this}onAfterRender(i,r,s,l,d,c){this.copyPreviousMatrix&&this.previousModelViewMatrix.copy(this.modelViewMatrix)}},dJ=class extends jE(ln){},cJ=t=>t.type==="Mesh",ma=class extends dJ{constructor(t){super(),this.object=t,this.matrixAutoUpdate=!1,this.hasNonUniformScale=t.hasNonUniformScale}raycast(t,i){}expand(){let t=0,i=this.object.entityChildren(t);for(;i;){let r=this.children[t];(r==null?void 0:r.object)!==i&&(r&&this.remove(r),r=new ma(i),this.add(r),this.children.splice(t,0,this.children.pop()),r.matrixWorldNeedsUpdate=!0,r.matrixAutoUpdate=!1,r.matrix=i.matrix,r.hiddenMatrix=i.hiddenMatrix),r.expand(),t+=1,i=this.object.entityChildren(t)}for(;this.children.length>t;)this.remove(this.children[t])}get visible(){var t;return this.playModeVisible!==void 0?this.playModeVisible:this.object.visible||this.object.dataPatched.visible&&((t=this.object.dataPatched.cloner)==null?void 0:t.hideBase)===!0}set visible(t){}get castShadow(){return this.object.castShadow}set castShadow(t){}get receiveShadow(){return this.object.receiveShadow}set receiveShadow(t){}get isMesh(){return cJ(this.object)}get isLight(){return this.object.isLight}get layers(){return this.object.layers}set layers(t){}get isCamera(){return!1}get geometry(){if(this.object.geometry)return this.object.geometry}get material(){if(this.object.material)return this.object.material}},dh=new N,ch=new N,Lp=new Ze,fR=[new N(-1,1,1),new N(-1,-1,1),new N(1,-1,1),new N(1,1,1),new N(-1,1,-1),new N(-1,-1,-1),new N(1,-1,-1),new N(1,1,-1)],uJ=[[0,3],[1,2],[5,6],[4,7],[0,1],[3,2],[7,6],[4,5],[0,4],[1,5],[2,6],[3,7]],hJ=[[0,2],[7,5],[4,1],[3,6],[4,3],[1,6]],pR=(t,i,r)=>{t.updateEntityBoxSize(dh,ch),Lp.copy(i).multiply(t.matrixWorld),ch.x===0&&ch.y===0&&ch.z===0?r.push(new N(dh.x,dh.y,dh.z).applyMatrix4(Lp)):fR.forEach(s=>{r.push(s.clone().multiply(ch).add(dh).applyMatrix4(Lp))})},mR=class extends nn{constructor(){super(...arguments),this.matrix=new Ze,this.vertices=[],this.faces=[],this.edges=[],this.centerEdges=[]}copy(t){return super.copy(t),this.matrix.copy(t.matrix),this.vertices=t.vertices.map(i=>i.clone()),this.faces=t.faces.map(i=>i.clone()),this.edges=t.edges.map(i=>i.clone()),this.centerEdges=t.centerEdges.map(i=>i.clone()),this}setFromObjectSize(t,i=!1){t.updateWorldMatrix(!1,i),this.makeEmpty(),this.matrix.copy(t.matrixWorld);let r=new Ze().copy(t.matrixWorld).invert();return this.expandByObjectSize(t,r,i)}expandByObjectSize(t,i,r=!1){let s=[];return r===!0?t.traverseEntity(l=>{if(l.visible||l.cloner&&l.data.visible){if(!("geometry"in l)){s.push(new N);return}pR(l,i,s)}}):pR(t,i,s),this.setFromPoints(s)}getCenter(t){return t=super.getCenter(t),t.applyMatrix4(this.matrix),t}getPositionToCenter(t){return t=super.getCenter(t),t.applyMatrix4(Lp.copy(this.matrix).setPosition(0,0,0)),t}computeVertices(){this.getSize(ch).multiplyScalar(.5),this.getCenter(dh),Lp.copy(this.matrix).setPosition(dh),this.vertices=fR.map(t=>t.clone().multiply(ch).applyMatrix4(Lp))}computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=uJ.map(([t,i])=>new Qs(this.vertices[t],this.vertices[i])),this.centerEdges=this.edges.map(t=>t.getCenter(new N))}computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=hJ.map(([t,i])=>this.vertices[t].clone().add(this.vertices[i]).multiplyScalar(.5))}},Wc={Cloner:()=>{},changeEntityProptotype:()=>{},createEntity:()=>{}},fJ=class extends kP{constructor(){super()}getPoints(t=12){let i=[],r,s=this.getCurveLengths(),l=s[s.length-1]/s.length;for(let d=0,c=this.curves;d<c.length;d++){let u=c[d],h=d===0?s[d]:s[d]-s[d-1],f=Math.ceil(t*h/l),m=u.getPoints(f);for(let p=0;p<m.length;p++){let g=m[p];r&&r.equals(g)||(i.push(g),r=g)}}return this.autoClose&&i.length>1&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i}},UE=.001;function VE(t,i,r){return i.clone().sub(t).cross(i.clone().sub(r)).length()<=UE}function HE(t,i){let r=new N(...t.position),s=new N(...t.controlNext.position),l=new N(...i.controlPrevious.position),d=new N(...i.position);return VE(r,s,d)&&VE(r,l,d)}function gR(t){let i=t.points.map(m=>new N(...m.data.position)),r=[t.points[0]],s=new N(...r[0].data.position);for(let m=0;m<t.points.length-1;m++)VE(s,i[m],i[m+1])||(r.push(t.points[m]),s=i[m]);r.push(t.points[t.points.length-1]);let l=t.isClosed,d=r.length-(l?0:1),c=r.length,u=[];for(let m=0;m<c;m++){let p=r[m].data,g=new N(...p.position),v=new N(...p.controlPrevious.position),w=new N(...p.controlNext.position),x={position:g,baseRoundness:p.roundness,controlPrevious:v,controlNext:w};if(p.roundness===0||!t.isClosed&&(m===0||m===c-1)){u[m]=ge(Z({},x),{removedLength:0});continue}let _=l&&m==0?c-1:m-1,k=l&&m==c-1?0:m+1,A=r[_].data,C=r[k].data,M=new N(...A.position),D=new N(...C.position),P=M.clone().sub(g).normalize(),T=D.clone().sub(g).normalize();Object.assign(x,{prevDir:P,nextDir:T});let O=HE(A,p),z=HE(p,C);if(!O||!z)u[m]=ge(Z({},x),{removedLength:0});else{let L=P.clone().add(T).normalize(),B=L.clone().cross(P).length()/P.dot(L);u[m]=ge(Z({},x),{tan:B,removedLength:p.roundness/B})}}for(let m=0;m<d;m++){let p=m,g=l&&m===c-1?0:m+1,v=u[p],w=u[g];if(v.removedLength!==0||w.removedLength!==0){let x=v.position.distanceTo(w.position);v.removedLength=Math.min(v.removedLength,x/2),w.removedLength=Math.min(w.removedLength,x/2)}}let h=[];for(let m=0;m<d;m++){let p=m,g=l&&m===c-1?0:m+1,v=u[p],w=u[g],x=null;if(!HE(r[p].data,r[g].data))v.position.distanceTo(w.position)>UE&&(x=new Ww(v.position,v.controlNext,w.controlPrevious,w.position));else{let _=v.position.clone(),k=w.position.clone();(v.removedLength!==0||w.removedLength!==0)&&(v.nextDir&&_.add(v.nextDir.clone().setLength(v.removedLength)),w.prevDir&&k.add(w.prevDir.clone().setLength(w.removedLength))),_.distanceTo(k)>UE&&(x=new Ww(_,_.clone().lerp(k,.3),k.clone().lerp(_,.3),k))}h[2*m+1]=x}for(let m=0;m<c;m++){let p=u[m];if(p.removedLength===0){h[2*m]=null;continue}let g=p.position,v=p.prevDir.clone().multiplyScalar(p.removedLength).add(g),w=p.nextDir.clone().multiplyScalar(p.removedLength).add(g),x=p.tan*p.removedLength,_=p.prevDir.clone().add(p.nextDir).normalize(),k=v.clone().lerp(w,.5),A=v.distanceTo(w)/2,C=_.clone().multiplyScalar(Math.sqrt(Math.pow(x,2)-Math.pow(A,2))).add(k),M=_.clone().multiplyScalar(-x).add(C),D=g.distanceTo(M)/g.distanceTo(k),P=p.prevDir.clone().multiplyScalar(D*g.distanceTo(v)).add(g),T=P.clone().lerp(M,2),O=v.clone().lerp(P,4/3),z=w.clone().lerp(T,4/3);h[2*m]=new Ww(v,O,z,w)}let f=new fJ;return h.forEach(m=>{m&&f.add(m)}),f}var Ri;(t=>{function i(r){return r&&r.__isEntity}t.is=i})(Ri||(Ri={}));var Td=t=>Ri.is(t),pJ={type:"completeState",isfromEntity:!0},mJ=["x","y","z"],GE=new N,gJ=new N().set(0,1,0),WE=t=>class extends jE(t){constructor(){super(...arguments),this.raycastLock=!1,this.scaleLock=!1,this.disposed=!1,this.stateSelection=null,this.destroyedInAction=!1,this.instances=[],this.prevState=null,this.currentState=null,this.reversibleToState=null,this.currentTransitionEvent=null,this.previousAction=null,this._singleBBox=new mR,this._recursiveBBox=new mR,this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this._needApplyPathSnapping=!0,this.attachedPaths=new Set}get __isEntity(){return!0}entityChildren(i){let r=this.children[i];if(Ri.is(r))return r}entityChildrenCount(){let i=this.children.length;for(;i--;)if(Ri.is(this.children[i]))return i+1;return 0}get isConcreteEntity(){return typeof this.identity=="string"}get isVirtualEntity(){return typeof this.identity!="string"}get isInstanceRoot(){return this.isConcreteEntity&&this.data.type==="Instance"}nearestInstanceSelfOrParent(){let i=this;for(;i.data.type!=="Instance";){let r=i.parent;if(Ri.is(r))i=r;else return}return i}forInstancesRec(i){this.instances.forEach(r=>{r.disposed||i(r),r.forInstancesRec(i)})}super_Entity(i,r){typeof i=="string"&&(this.uuid=i),this.identity=i,this.data=r,this.matrixAutoUpdate=!1,this.dataPatched=this.data}changeSelectedState(i,r,s=!1){if(!(this.data.states.length===0&&!s)){for(let l of this.data.states)ah.toOps(this.data,l.data).forEach(d=>{let c=NC.replaceProps(d,this.data);this.dataPatched=this.data,this.updateByPatchedOp(c,this.data,r)});if(i!==null){let l=this.data.states.data(i);l&&(this.dataPatched=ah.patch(this.data,l),ah.toOps(this.data,l).forEach(d=>{this.updateByPatchedOp(d,this.dataPatched,r)}))}s&&this.updateTransformState(this.dataPatched,r),this.stateSelection=i,this.updatePathSnapping(this.dataPatched.pathSnapping)}}get singleBBox(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}get recursiveBBox(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}updateEntityBoxSize(i,r){i.setScalar(0),r.setScalar(0)}resetBBoxNeedsUpdateSelf(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0}resetBBoxNeedsUpdate(){this.resetBBoxNeedsUpdateSelf(),this.traverseAncestors(i=>{Td(i)&&i.resetBBoxNeedsUpdateSelf()}),this.traverseEntity(i=>{i.resetBBoxNeedsUpdateSelf()})}find(i){let r;return this.traverseEntity(s=>{s.uuid===i&&(r=s)}),r}traverseSortNextHelper(){let i=this.parent;if(i){let r=i.children,s=r.indexOf(this)+1;if(Ri.is(r[s]))return r[s];if(Ri.is(i))return i.traverseSortNextHelper()}}sortNext(){let i=this.children;return this.children.length>0&&Ri.is(this.children[0])?i[0]:this.traverseSortNextHelper()}goUp(i){let r=this;for(;i>0&&r!==null;)r=r.parent,i-=1;return r}hasAnccestorOrSelf(i){return this===i||this.hasAnccestor(i)}hasAnccestor(i){let r=this.parent;for(;r;){if(i===r)return!0;r=r.parent}return!1}countToAccestor(i){let r=0,s=this;for(;s!==i;){if(s===null)return-1;s=s.parent,r+=1}return r}forEachEntity(i){for(let r of this.children)Td(r)&&i(r)}traverseEntityAncestors(i){this.traverseAncestors(r=>{Ri.is(r)&&i(r)})}traverseConcreteEntity(i,r=0){if(i(this,r)!==!0)for(let s of this.children)Td(s)&&s.isConcreteEntity&&s.traverseEntity(i,r+1)}traverseEntity(i,r=0){if(i(this,r)!==!0)for(let s of this.children)Td(s)&&s.traverseEntity(i,r+1)}traverseVisibleEntity(i){i(this);for(let r of this.children)Td(r)&&r.visible&&r.traverseVisibleEntity(i)}updateMatrix(){super.updateMatrix(),this.cloner&&this.cloner.onObjUpdateMatrix(),this.dispatchEvent({type:"updateMatrix"})}updateMatrixWorld(i){super.updateMatrixWorld(i),this.dispatchEvent({type:"updateMatrixWorld"})}copy(i,r=!1){return super.copy(i,r),this.dataPatched=i.dataPatched,this.raycastLock=i.raycastLock,this.scaleLock=i.scaleLock,this.hiddenMatrix.copy(i.hiddenMatrix),this}hasEntityChild(){return this.children.some(i=>Td(i))}isAncestorOf(i){if(this.uuid===i)return!1;let r=!1;return this.traverseEntity(s=>{s.uuid===i&&(r=!0)}),r}toObjectTransformState(i=[]){this.updateWorldMatrix(!0,!1);let r={position:this.position.toArray(),rotation:[this.rotation.x*fe.RAD2DEG,this.rotation.y*fe.RAD2DEG,this.rotation.z*fe.RAD2DEG],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return PC(r,i)}getTransformValues(i,r,s){return r[i].map((l,d)=>{var c;return(c=s==null?void 0:s.shared.getVariable(l,[this.uuid,i,mJ[d]]))!=null?c:l})}updateTransformState(i,r){var l;let s=!1;return i.position&&(this.position.fromArray(this.getTransformValues("position",i,r)),s=!0),i.rotation&&(GE.fromArray(this.getTransformValues("rotation",i,r)).multiplyScalar(fe.DEG2RAD),this.rotation.setFromVector3(GE),s=!0),i.scale&&(this.scale.fromArray(this.getTransformValues("scale",i,r)),s=!0),i.hiddenMatrix!==void 0&&(s=!0,this.hiddenMatrix.fromArray((l=i.hiddenMatrix)!=null?l:gp.identity)),s&&(this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(d=>{d.invalidateClonerTransform(this)})),i.position&&i.rotation&&i.scale&&i.hiddenMatrix!==void 0&&this.updateWorldMatrix(!1,!0),s}onVariableUpdate(i=!1){if(i){this.resetBBoxNeedsUpdate();return}this.updateMatrix(),this.resetBBoxNeedsUpdate(),this.invalidateClonerTransform(this),this.traverseEntityAncestors(r=>{r.invalidateClonerTransform(this)})}dispose(){this.disposed=!0,this.cloner&&(this.cloner.removeFromParent(),this.cloner=void 0)}disposeChildrenRecursively(){for(let i of this.children)Ri.is(i)&&i.disposeRecursively()}disposeRecursively(){this.dispose(),this.children.forEach(i=>{Ri.is(i)&&i.disposeRecursively()})}toState(i=[]){let r=Z({name:this.name,visible:this.visible,raycastLock:this.raycastLock},this.toObjectTransformState(i));return PC(r,i)}updateByObjUpdateOp(i,r){i!==void 0&&this.updateByOp({type:0,props:i,path:[]},Z(Z({},this.data),i),r,!1)}updateByOp(i,r,s,l){let d=this.data;this.data=r;let c=i,u=to(i.path,["states","*"]);if(u!==null){if(i.type===0){let[m]=u;if((this==null?void 0:this.stateSelection)===m){let p=Z({},i.props);if(delete p.name,Object.values(i.props).some(g=>g===void 0)){let g=this.data;if(g!==void 0){let v=Fa.zoom(g,i.path.slice(2));if(v)for(let w in i.props)i.props[w]===void 0&&w in v&&(p[w]=v[w])}}c=ge(Z({},i),{props:p,path:i.path.slice(2)})}}}else if(i.type===0){let m=this.stateSelection?this.data.states.data(this.stateSelection):void 0;if(m!==void 0){if(i.props.name!==void 0&&m.name){let h=m,{name:g}=h;m=Cn(h,["name"])}if(i.props.material!==void 0&&"material"in m){let f=m,{material:g}=f;m=Cn(f,["material"])}let p=Fa.removeOverridden(i.path,i.props,m);c=ge(Z({},i),{props:p})}}if(this.updateByPatchedOpBase(c,ah.patch(this.data,this.stateSelection?this.data.states.data(this.stateSelection):void 0),s),to(i.path,["overrides"])){let m=[],p=[...i.path];for(m.push(p[1]),p.splice(0,2);p.length>0&&p[0]==="descendants";)m.push(p[1]),p.splice(0,2);if(m[m.length-1]===void 0){if(i.type===0)for(let g of Object.keys(i.props)){m[m.length-1]=g;let v=s.scene.findInstance([this.uuid,...m]);v&&(v.overrideData=i.props[g],v.updateState(Oc.apply(v.component.data,v.overrideData),s))}}else{let g=s.scene.findInstance([this.uuid,...m]);if(g){let v=Fa.zoom(g.component.data,p);if(i=ge(Z({},i),{path:p}),i.type===0){let w=i.props;if(v)for(let[x,_]of Object.entries(i.props))_===void 0&&(w===i.props&&(w=Z({},i.props)),w[x]=v[x]);i=ge(Z({},i),{props:w})}g.overrideData=Yx.resolve(r.overrides,m),g.updateByOp(i,fa.applySimple(g.data,i),s,!1)}}}else if(this.instances.length>0){let m;if(i.path.length===0&&i.type===0){let p;for(let g of Bc.rootOverrideProps)g in i.props&&(p===void 0&&(p={}),p[g]=i.props[g]);p&&(m=ge(Z({},i),{props:p}))}else for(let p of Bc.rootOverrideProps)if(to(i.path,[p])){m=i;break}m!==void 0&&this.instances.forEach(p=>{if(p.isInstanceRoot){let g=Oc.filterOp(p.overrideData,m);g&&p.updateByOp(g,fa.applySimple(p.data,g),s,!0)}}),this.instances.forEach(p=>{if(!p.isInstanceRoot){let g=Oc.filterOp(p.overrideData,i);if(g){let v;d===p.data&&i===g?v=r:v=fa.applySimple(p.data,g),p.updateByOp(g,v,s,!0)}}})}}updateByPatchedOpBase(i,r,s){if(this.dataPatched=r,i.path.length===0&&i.type===0)i.props.type!==void 0&&!rh.is(i.props.type)&&Wc.changeEntityProptotype(this,r,s);else if(i.path.length===1&&i.path[0]==="geometry"&&i.type===0&&"type"in i.props){Wc.changeEntityProptotype(this,r,s);for(let l of this.children)Ri.is(l)&&l.updateVisible(s.scene)}this.updateByPatchedOp(i,r,s)}updateByPatchedOp(i,r,s){if(i.path.length===0&&i.type===0&&this.updateState(i.props,s),to(i.path,["pathSnapping"])!==null&&this.updatePathSnapping(r.pathSnapping),to(i.path,["cloner"])!==null){let l=fa.drop(i,1);l.path.length===0&&l.type===0&&l.props.disabled===!0?this.setFromClonerState(null,s):this.cloner?this.cloner.updateState(r.cloner,s.scene):(this.setFromClonerState(r.cloner,s),this.expandCloner(s.scene)),this.updateVisible(s.scene)}}updatePathSnapping(i=this.dataPatched.pathSnapping){this._updatedPathSnapping=i,this._needApplyPathSnapping=!0}get updatedPathSnapping(){return this._updatedPathSnapping}applyPathSnapping(i){var w,x,_,k,A,C,M,D,P,T,O;let r=(x=(w=this._updatedPathSnapping)==null?void 0:w.pathId)!=null?x:this.dataPatched.pathSnapping.pathId,s=(A=(k=(_=this._updatedPathSnapping)==null?void 0:_.slide)!=null?k:this.dataPatched.pathSnapping.slide)!=null?A:0,l=(D=(M=(C=this._updatedPathSnapping)==null?void 0:C.offset)!=null?M:this.dataPatched.pathSnapping.offset)!=null?D:0,d=(T=(P=this._updatedPathSnapping)==null?void 0:P.orientation)!=null?T:this.dataPatched.pathSnapping.orientation;if(r===null)return;let c=i.find(r);if(!c||this._needApplyPathSnapping===!1)return;this._needApplyPathSnapping=!1;let u=c.data;if(u.geometry.path.points.length<=1)return;let h=gR(u.geometry.path),f=(s+l)%1;s+l===1&&f===0&&(f=1);let m=h.getPointAt(f);if(m===null)return;let p=this.parent?(O=this.parent)==null?void 0:O.matrixWorld:new Ze;c.updateMatrixWorld();let g=new Ze().multiplyMatrices(p.clone().invert(),c.matrixWorld);m.applyMatrix4(g);let v={position:m.toArray(),rotation:u.rotation};if(d==="tangential"){let z=new Ze().extractRotation(c.matrixWorld),L=h.getTangentAt(f).applyMatrix4(z).add(m),B=new Ze().lookAt(m,L,gJ),j=GE.setFromEuler(new Vr().setFromRotationMatrix(B)).multiplyScalar(fe.RAD2DEG);v=ge(Z({},v),{rotation:j.toArray()})}this.updateTransformState(v),this.traverseEntity(z=>{z._cameraType&&z.dispatchEvent(pJ)})}updateVisible(i){var s,l;if(this.visible=this.dataPatched.visible&&(!this.dataPatched.cloner||((s=this.dataPatched.cloner.disabled)!=null?s:!1)||((l=this.dataPatched.cloner)==null?void 0:l.hideBase)!==!0),!i)return;let r=!1;this.traverseEntity(d=>{if(d.data.type==="Splat")return r=!0,!0}),r&&i.reloadSplats()}updateState_Entity(i,r){i.name!==void 0&&(this.name=i.name),i.raycastLock!==void 0&&(this.raycastLock=i.raycastLock),i.visible!==void 0&&(this.updateVisible(r==null?void 0:r.scene),this.resetBBoxNeedsUpdate()),r&&"cloner"in i&&i.cloner!==void 0&&(this.setFromClonerState(i.cloner,r),this.updateVisible(r.scene)),this.updateTransformState(i,r)}get attachedSurfaceCloners(){return this.children.filter(i=>i instanceof Wc.Cloner&&i.parameters.type==="toObject")}setFromClonerState(i,r){this.disposed||(i===null||i.disabled?(this.cloner&&this.cloner.removeFromParent(),this.cloner=void 0):this.cloner===void 0?(this.cloner=new Wc.Cloner(this,i),r.scene.addPendingExpandCloner(this)):this.cloner.updateState(i,r.scene))}expandCloner(i){!this.disposed&&this.cloner&&this.cloner.expandClones(i)}invalidateClonerTransform(i){this.cloner&&this.cloner.invalidateTransform(i)}},vR=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var c,u,h,f,m;let r=Object.assign({},(c=i==null?void 0:i.parameters)!=null?c:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:8,cornerSegments:8,hollow:0},t.parameters);r.thetaLength=fe.clamp(r.thetaLength,0,360);let s=r.width/2,l=(u=r.radiusTop)!=null?u:s,d=(h=r.radiusBottom)!=null?h:s;return l===d?(l=s,d=s):l>d?(l=s,d=d*s/l):(l=l*s/d,d=s),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((f=r.height)!=null?f:r.width),depth:Math.abs((m=r.depth)!=null?m:r.width),radiusTop:l,radiusBottom:d})}}static build(t){let{width:i,depth:r,height:s,radialSegments:l,heightSegments:d,openEnded:c,thetaStart:u,thetaLength:h,radiusTop:f,radiusBottom:m,cornerRadius:p,cornerSegments:g,hollow:v}=t.parameters,w;return h===0?(w=new Nt,w.setAttribute("position",new wt([],3))):p||v?w=new bR(f,m,s,l,d,c,u,h*Math.PI/180,p,p,g,v):w=new HA(f,m,s,l,d,c,u,h*Math.PI/180),w.scale(1,1,r/i),Object.assign(w,{userData:ge(Z({},t),{type:"CylinderGeometry"})})}};function qc(t,i,r){r.x=t.x*i.x,r.y=t.y,r.z=t.x*i.y}function yR(t){return new q(t.y,-t.x)}var bR=class extends Nt{constructor(t,i,r,s,l,d,c,u,h,f,m,p,g=!1){super(),this.type="RoundedCylinderBufferGeometry",t=t!==void 0?t:1,i=i!==void 0?i:1,r=r||1,s=Math.floor(s)||8,l=Math.floor(l)||1,d=d!==void 0?d:!1,c=c!==void 0?c:0,u=u!==void 0?u:Math.PI*2,d&&(h=0,f=0);let v=[],w=[],x=[],_=[],k=0,A=r/2,C=new N,M=new N;g&&t==0&&(t=h),g&&i==0&&(i=f);let D=new q(t,A),P=new q(i,-A),T=null,O=null,z=null,L=null,B=D.clone().sub(P),j=0,V=0,H=0;p>0&&(j=Math.min(t,i)*(1-p),V=t-j,H=i-j);let Y=D.clone();Y.x-=j;let se=Math.PI-B.angle(),re=B.angle(),$=Math.tan(re/2),te=Math.tan(se/2),he=$+te,oe=p?he:te,ee=p?he:$;if(h=Math.min(h,(t-V)/oe,B.length()/he),f=Math.min(f,(i-H)/ee,B.length()/he),h>0){let we=h/$;T=D.clone().sub(new q(we,h)),p&&(z=T.clone(),z.x-=j-he*h),D.sub(B.clone().setLength(we))}if(f>0){let we=f/te;O=P.clone().sub(new q(we,-f)),P.add(B.clone().setLength(we)),p&&(L=O.clone(),L.x-=j-he*f,Y.sub(B.clone().setLength(we)))}B=D.clone().sub(P);let pe=B.length()<.5,ce=[];for(let we=0;we<=s;we++){let Ee=[],xe=we/s,Ue=xe*u+c,Le=new q(Math.sin(Ue),Math.cos(Ue));L&&O?(ve(Ee,xe,Le,se,f,L,-1,!0),ve(Ee,xe,Le,re,f,O,-1,!1)):O?(le(Ee,Le,O.x,0,-1),ve(Ee,xe,Le,re,f,O,-1,!1)):d||le(Ee,Le,i,H,-1);let Ie=yR(B).normalize();if(qc(Ie,Le,C),!pe)for(let rt=0;rt<=l;rt++){let nt=rt/l,ot=B.clone().multiplyScalar(nt).add(P);qc(ot,Le,M),w.push(M.x,M.y,M.z),x.push(C.x,C.y,C.z),_.push(xe,.5+M.y/r),Ee.push(k++)}if(z&&T?(ve(Ee,xe,Le,se,h,T,1,!1),ve(Ee,xe,Le,re,h,z,1,!0)):T?(ve(Ee,xe,Le,se,h,T,1,!1),le(Ee,Le,T.x,0,1)):d||le(Ee,Le,t,V,1),p&&!pe){let rt=yR(B).multiplyScalar(-1).normalize();qc(rt,Le,C);for(let nt=0;nt<=l;nt++){let ot=nt/l,mt=B.clone().multiplyScalar(-ot).add(Y);qc(mt,Le,M),w.push(M.x,M.y,M.z),x.push(C.x,C.y,C.z),_.push(xe,.5+M.y/r),Ee.push(k++)}}p&&!d&&Ee.push(Ee[0]),ce.push(Ee)}for(let we=0;we<ce.length-1;we++)for(let Ee=0;Ee<ce[0].length-1;Ee++){if(d&&p&&Ee==l)continue;let xe=ce[we][Ee],Ue=ce[we+1][Ee],Le=ce[we+1][Ee+1],Ie=ce[we][Ee+1],rt=w[Le*3+0],nt=w[Le*3+2];v.push(xe,Ue,Ie),(rt!=0||nt!=0)&&v.push(Ue,Le,Ie)}u<Math.PI*2&&(Pe(-1,ce[0],c),Pe(1,ce[ce.length-1],c+u)),this.setIndex(v),this.setAttribute("position",new wt(w,3)),this.setAttribute("normal",new wt(x,3)),this.setAttribute("uv",new wt(_,2));function ve(we,Ee,xe,Ue,Le,Ie,rt,nt){for(let ot=0;ot<m+1;ot++){let mt=ot/m,it=rt<0?mt:1-mt;nt&&(it-=1),it*=Ue;let Ke=new q(Math.sin(it),Math.cos(it)*rt),pt=Ke.clone().multiplyScalar(Le).add(Ie);qc(pt,xe,M),w.push(M.x,M.y,M.z),qc(Ke,xe,C),x.push(C.x,C.y,C.z),_.push(Ee,.5+M.y/r),we.push(k++)}}function le(we,Ee,xe,Ue,Le){let Ie=new N,rt=new q,nt=[xe,Ue];Le<0&&nt.reverse();for(let ot of nt)rt.set(ot,A*Le),qc(rt,Ee,Ie),w.push(Ie.x,Ie.y,Ie.z),x.push(0,Le,0),_.push(.5,.5),we.push(k++)}function Pe(we,Ee,xe){let Ue=new q(Math.sin(xe),Math.cos(xe)),Le=new q(-Math.cos(xe),Math.sin(xe)),Ie=new N,rt=we<0?(mt,it,Ke)=>v.push(mt,it,Ke):(mt,it,Ke)=>v.push(mt,Ke,it),nt=new q((t+i+V+H)/4,0);qc(nt,Ue,Ie),w.push(Ie.x,Ie.y,Ie.z),x.push(Le.x,0,Le.y),_.push(.5,.5);let ot=k++;for(let mt of Ee){let it=w.slice(mt*3,mt*3+3);w.push(...it),x.push(Le.x,0,Le.y);let Ke=_.slice(mt*2,mt*2+2);_.push(...Ke),k++}for(let mt=ot+1;mt<k-1;mt++)rt(ot,mt,mt+1);rt(ot,k-1,ot+1)}}},vJ=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:8,cornerRadiusBottom:8,cornerSegments:8},t.parameters);return r.thetaLength=fe.clamp(r.thetaLength,0,360),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:r.width)})}}static build(t){let{width:i,depth:r,height:s,radialSegments:l,heightSegments:d,openEnded:c,thetaStart:u,thetaLength:h,cornerRadiusTop:f,cornerRadiusBottom:m,cornerSegments:p}=t.parameters,g;return h===0?(g=new Nt,g.setAttribute("position",new wt([],3))):f>0||m>0||h<360?g=new bR(0,i/2,s,l,d,c,u,h*Math.PI/180,f,m,p,0,!0):g=new AP(i/2,s,l,d,c),g.scale(1,1,r/i),Object.assign(g,{userData:ge(Z({},t),{type:"ConeGeometry"})})}},yJ=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:8,cornerSegments:8},t.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:r.width)})}}static build(t){let{width:i,height:r,depth:s,widthSegments:l,heightSegments:d,depthSegments:c,cornerRadius:u,cornerSegments:h}=t.parameters,f;return u==0?f=new bl(i,r,s,l,d,c):f=new bJ(i,r,s,l,d,c,u,h),Object.assign(f,{userData:ge(Z({},t),{type:"CubeGeometry"})})}},qE=Math.PI/2,bJ=class extends Nt{constructor(t=1,i=1,r=1,s=1,l=1,d=1,c=0,u=4){super(),this.type="BoxGeometry";let h=this;s=Math.floor(s),l=Math.floor(l),d=Math.floor(d),u=Math.floor(u),c=Math.min(c,t/2,i/2,r/2);let f=[],m=[],p=[],g=[],v=0,w=0;x("z","y","x",-1,-1,r,i,t,d,l,0),x("z","y","x",1,-1,r,i,-t,d,l,1),x("x","z","y",1,1,t,r,i,s,d,2),x("x","z","y",1,-1,t,r,-i,s,d,3),x("x","y","z",1,-1,t,i,r,s,l,4),x("x","y","z",-1,-1,t,i,-r,s,l,5),c>0&&(_("z","y","x",-1,-1,1,r,i,t,d,0),_("z","y","x",1,-1,-1,r,i,t,d,1),_("z","y","x",-1,1,-1,r,i,t,d,1),_("z","y","x",1,1,1,r,i,t,d,0),_("x","y","z",-1,-1,-1,t,i,r,s,0),_("x","y","z",1,-1,1,t,i,r,s,1),_("x","y","z",-1,1,1,t,i,r,s,0),_("x","y","z",1,1,-1,t,i,r,s,1),_("y","x","z",-1,-1,1,i,t,r,l,0),_("y","x","z",1,-1,-1,i,t,r,l,1),_("y","x","z",1,1,1,i,t,r,l,1),_("y","x","z",-1,1,-1,i,t,r,l,0),k(1,1,1),k(-1,1,1),k(1,-1,1),k(-1,-1,1),k(1,1,-1),k(-1,1,-1),k(1,-1,-1),k(-1,-1,-1)),this.setIndex(f),this.setAttribute("position",new wt(m,3)),this.setAttribute("normal",new wt(p,3)),this.setAttribute("uv",new wt(g,2));function x(A,C,M,D,P,T,O,z,L,B,j){let V=(T-2*c)/L,H=(O-2*c)/B,Y=T/2-c,se=O/2-c,re=z/2,$=L+1,te=B+1,he=0,oe=0,ee=new N;for(let pe=0;pe<te;pe++){let ce=pe*H-se;for(let ve=0;ve<$;ve++){let le=ve*V-Y;ee[A]=le*D,ee[C]=ce*P,ee[M]=re,m.push(ee.x,ee.y,ee.z),ee[A]=0,ee[C]=0,ee[M]=z>0?1:-1,p.push(ee.x,ee.y,ee.z),g.push(ve/L),g.push(1-pe/B),he+=1}}for(let pe=0;pe<B;pe++)for(let ce=0;ce<L;ce++){let ve=v+ce+$*pe,le=v+ce+$*(pe+1),Pe=v+(ce+1)+$*(pe+1),we=v+(ce+1)+$*pe;f.push(ve,le,we),f.push(le,Pe,we),oe+=6}h.addGroup(w,oe,j),w+=oe,v+=he}function _(A,C,M,D,P,T,O,z,L,B,j){let V=(O-2*c)/B,H=O/2-c,Y=z/2-c,se=L/2,re=B+1,$=0,te=0,he=new N,oe=new N;for(let ee=0;ee<u+1;ee++){let pe=ee/u*qE,ce=Math.sin(pe)*c,ve=(1-Math.cos(pe))*c,le=Math.sin(pe),Pe=Math.cos(pe);he[C]=(Y+ce)*P,he[M]=(se-ve)*T,oe[A]=0,oe[C]=le*Math.sign(he[C]),oe[M]=Pe*Math.sign(he[M]);for(let we=0;we<re;we++){let Ee=we*V-H;he[A]=Ee*D,m.push(he.x,he.y,he.z),p.push(oe.x,oe.y,oe.z),g.push(we/B),g.push(0),$+=1}}for(let ee=0;ee<u;ee++)for(let pe=0;pe<B;pe++){let ce=v+pe+re*ee,ve=v+pe+re*(ee+1),le=v+(pe+1)+re*(ee+1),Pe=v+(pe+1)+re*ee;f.push(ce,ve,Pe),f.push(ve,le,Pe),te+=6}h.addGroup(w,te,j),w+=te,v+=$}function k(A,C,M){let D=new N,P=new N(t/2,i/2,r/2);P.subScalar(c);let T=[],O=A*C*M>0?(L,B,j)=>f.push(L,B,j):(L,B,j)=>f.push(L,j,B);for(let L=0;L<=u;L++){let B=[],j=qE*(1-L/u),V=Math.cos(j),H=Math.sin(j),Y=0;for(let se=0;se<=L;se++){let re=Math.cos(Y),$=Math.sin(Y);D.x=V*re,D.y=H,D.z=V*$;let te=P.clone().addScaledVector(D,c);m.push(A*te.x,C*te.y,M*te.z),p.push(A*D.x,C*D.y,M*D.z),g.push(0,0),B.push(v++),Y+=qE/L}T.push(B)}let z=T.length-1;for(let L=0;L<z;L++){let B=T[L],j=T[L+1],V=B.length-1;O(B[0],j[1],j[0]);for(let H=1;H<=V;H++)O(B[H-1],B[H],j[H]),O(B[H],j[H+1],j[H])}}}},$E=class extends Nt{constructor(t=[],i=[],r="",s=1,l=.2,d=4){super(),this.type="PolyhedronGeometryRound";let c=[],u=[],h=[];f(),m(),this.setAttribute("position",new wt(c,3)),this.setAttribute("normal",new wt(h,3)),this.setAttribute("uv",new wt(u,2));return;function f(){var re;l=Math.min(1-1e-5,l),l==0&&(d=0);let p={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[r],g=new N,v=g.clone(),w=new ua,x=l*s,_=s-x,k=d+1,A=new N,C=($,te)=>A.subVectors($,te).normalize(),M=($,te)=>Array($).fill(void 0).map(te),D=M(t.length/3,($,te)=>new N().fromArray(t,te*3).setLength(s)),P=[],T=1e6;for(let $=0;$<D.length;$++){let te=D[$],he=[],oe,ee,pe,ce=1e10,ve=-1;for(;(ve=i.indexOf($,ve+1))!=-1;){let Ee=ve-ve%3;oe=i[Ee+(ve+1)%3],ee=i[Ee+(ve+2)%3],pe=te.distanceToSquared(D[oe]),ce=Math.min(ce,pe),he.push([oe,ee,pe])}ce+=1e-6;let le=[],Pe=0,we=he.length;for(let Ee=0;Ee<we;Ee++){[oe,ee,pe]=he[Pe];let xe=((re=P[oe])==null?void 0:re.includes($))==!0;pe<=ce&&le.push(oe+ +xe*T),Pe=he.findIndex(Ue=>Ue[0]==ee)}P.push(le)}let O=[];{let $=0,te=0,he,oe,ee=p==3;for(let pe=0;pe<=d;pe++){he=pe*(pe+1)/2,oe=(pe+1)*(pe+2)/2;for(let ce=0;ce<d-pe;ce++)[$,te]=[he+ce+pe+2,oe+ce+pe+3],O.push(he,oe,...ee?[te,he]:[$,oe],te,$),[he,oe]=[$,te];O.push(he,oe,he+d+2)}}let z=g.clone(),L=g.clone(),B=g.clone(),j=g.clone(),V=g.clone(),H=[],Y=M(D.length,()=>M(p,()=>g.clone()));for(let $=0;$<D.length;$++){g.copy(D[$]).normalize(),z.copy(g).multiplyScalar(_);let te=P[$];for(let le=0;le<te.length;le++){let Pe=te[le],we=te[(le+1)%p];w.setFromPointsAndIndices(D,$,Pe%T,we%T),w.b.sub(w.a).setLength(1e10).add(w.a),w.c.sub(w.a).setLength(1e10).add(w.a),w.closestPointToPoint(z,Y[$][le])}let he=[],oe=[],ee=[],pe=new N;d==0&&[...Y[$]].reduce((le,Pe)=>le.add(Pe),pe).multiplyScalar(1/p);for(let le=0;le<p;le++){let Pe=[],we=(le-1+p)%p,Ee=Y[$][we],xe=Y[$][le];g.copy(Ee).sub(z),v.copy(xe).sub(z);let Ue=z.angleTo(g),Le=g.angleTo(v),Ie=Math.cos(Ue)*x;d==0?L.copy(pe):L.copy(z).setLength(_+Ie),oe.push(Ie);let rt=[L,Ee,xe];for(let nt=0;nt<2;nt++){let ot=rt[nt],mt=rt[nt+1];j.subVectors(ot,z),V.subVectors(mt,z),B.crossVectors(j,V).normalize();for(let it=0;it<k;it++){let Ke=[Ue,Le][nt]*it/k;g.copy(j).applyAxisAngle(B,Ke).add(z),he.push(g.clone()),nt&&(C(g,z),Pe.push([it==0?ot:g.clone(),A.clone()]))}nt&&(C(mt,z),Pe.push([mt,A.clone()]))}ee.push(Pe)}H.push(ee);let ce=2*k,ve=2;for(let le=0;le<p;le++){let Pe=ce*le,we=ce*((le+1)%p),Ee=[he[Pe]];for(let Ue=1;Ue<k;Ue++){j=he[Pe+Ue],V=he[we+Ue],Ee.push(j);for(let Le=1,Ie=Ue-ve+1;Le<=Ie;Le++)g.lerpVectors(j,V,Le/(Ie+1)),g.sub(z).setLength(oe[le]).add(z),Ee.push(g.clone());Ee.push(V)}for(let Ue=0;Ue<k;Ue++)Ee.push(he[Ue+k+Pe]);Ee.push(he[we+k]);let xe=O.map(Ue=>Ee[Ue]);c.push(...xe.map(Ue=>[Ue.x,Ue.y,Ue.z]).flat()),h.push(...xe.map(Ue=>(C(Ue,z),[A.x,A.y,A.z])).flat())}}let se=[];for(let $=0;$<P.length;$++)for(let te=0;te<p;te++){let he=P[$][te];if(he<T){let oe=P[he].findIndex(ce=>ce%T==$),ee=H[$][te],pe=H[he][oe];for(let ce=0;ce<k;ce++){let ve=ee[ce],le=pe[k-ce],Pe=ee[ce+1],we=pe[k-(ce+1)];[ve,le,Pe,Pe,le,we].forEach(Ee=>{c.push(Ee[0].x,Ee[0].y,Ee[0].z),h.push(Ee[1].x,Ee[1].y,Ee[1].z)})}se.push(ee[0][0],pe[k][0],ee[k][0],pe[0][0])}}for(;se.length;){let $,te,he,oe;[$,te]=se.splice(0,2);let ee=[$];for(;$!=te;)ee.push(te),he=se.indexOf(te),oe=he%2,te=se.splice(he-oe,2)[1-oe];A.subVectors(ee[0],ee[1]).cross(g.subVectors(ee[0],ee[2])).normalize();let pe=A.dot(ee[0])<0;pe&&A.negate();for(let ce=1;ce<=ee.length-2;ce++)[ee[ce+ +pe],ee[ce+1-+pe],ee[0]].forEach(ve=>{c.push(ve.x,ve.y,ve.z),h.push(A.x,A.y,A.z)})}}function m(){let p=new N;for(let P=0;P<c.length;P+=3){p.x=c[P+0],p.y=c[P+1],p.z=c[P+2];let T=M(p)/2/Math.PI+.5,O=D(p)/Math.PI+.5;u.push(T,1-O)}let g=new N,v=new N,w=new N,x=new N,_=new q,k=new q,A=new q,C=(P,T,O,z)=>{z<0&&P.x===1&&(u[T]=P.x-1),O.x===0&&O.z===0&&(u[T]=z/2/Math.PI+.5)};for(let P=0,T=0;P<c.length;P+=9,T+=6){g.set(c[P+0],c[P+1],c[P+2]),v.set(c[P+3],c[P+4],c[P+5]),w.set(c[P+6],c[P+7],c[P+8]),_.set(u[T+0],u[T+1]),k.set(u[T+2],u[T+3]),A.set(u[T+4],u[T+5]),x.copy(g).add(v).add(w).divideScalar(3);let O=M(x);C(_,T+0,g,O),C(k,T+2,v,O),C(A,T+4,w,O)}for(let P=0;P<u.length;P+=6){let T=u[P+0],O=u[P+2],z=u[P+4],L=Math.max(T,O,z),B=Math.min(T,O,z);L>.9&&B<.1&&(T<.2&&(u[P+0]+=1),O<.2&&(u[P+2]+=1),z<.2&&(u[P+4]+=1))}function M(P){return Math.atan2(P.z,-P.x)}function D(P){return Math.atan2(-P.y,Math.sqrt(P.x*P.x+P.z*P.z))}}}static fromJSON(t){return new $E(t.vertices,t.indices,t.radius,t.corner,t.cornerSides)}},wJ=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:r.width)})}}static build(t){let{width:i,height:r,depth:s,detail:l,corner:d,cornerSides:c}=t.parameters,u=l===0&&d!==0?new wR(i*.5,d,c):new CP(i*.5,l);return u.scale(1,r/i,s/i),Object.assign(u,{userData:ge(Z({},t),{type:"DodecahedronGeometry"})})}},wR=class extends $E{constructor(t=1,i=.2,r=4){let s=(1+Math.sqrt(5))/2,l=1/s,d=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-l,-s,0,-l,s,0,l,-s,0,l,s,-l,-s,0,-l,s,0,l,-s,0,l,s,0,-s,0,-l,s,0,-l,-s,0,l,s,0,l],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],u="DodecahedronGeometry";super(d,c,u,t,i,r),this.type=u}static fromJSON(t){return new wR(t.radius,t.corner,t.cornerSides)}},h0=1e-12,ZE=class{constructor(t){this.position=new q,this.startPosition=new q,this.uuid=fe.generateUUID(),this.position=t.clone()}start(){this.reset()}reset(){this.startPosition.copy(this.position)}applyOffset(t){this.position.copy(this.startPosition).add(t)}copy(t){return this.position.copy(t.position),this.startPosition.copy(t.startPosition),this}clone(){return new ZE(this.position).copy(this)}toJSON(){return[this.position.x,this.position.y]}},YE=class extends ZE{constructor(t){super(t.position),this.parent=t}copy(t){return super.copy(t),this}clone(){return new YE(this.parent).copy(this)}},Bp=class extends ZE{constructor(t,i){super(i),this.controls=[],this.roundness=0,this.areControlsDirectionsMirrored=!0,this.uuid=t,this.controls.push(new YE(this),new YE(this))}static create(t,i){let r=new Bp(t,new q(...i.position));return r.controls[0].position.set(...i.controlPrevious.position),r.controls[1].position.set(...i.controlNext.position),r.roundness=i.roundness,r.areControlsDirectionsMirrored=i.areControlsDirectionsMirrored,r}getOppositeControl(t){let i=this.controls.indexOf(t);return i===0?this.controls[1]:i===1?this.controls[0]:null}applyOffsetToControls(t,i=1){for(let r=0,s=this.controls.length;r<s;r++){let l=this.controls[r];this.position.distanceTo(l.position)<=i?l.position.copy(this.position):l.applyOffset(t)}}controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}copy(t){return super.copy(t),this.controls[0].copy(t.controls[0]),this.controls[1].copy(t.controls[1]),this.roundness=t.roundness,this.uuid=t.uuid,this}clone(){return new Bp(this.uuid,this.position).copy(this)}toJSON(){return super.toJSON().concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}computeTangents(){var r,s;let t=(r=this.curveBefore)==null?void 0:r.getTangentAt(1),i=(s=this.curveAfter)==null?void 0:s.getTangentAt(0);return[t,i]}computeNormals(t=new q,i=new q){let[r,s]=this.computeTangents();return r&&s&&(xR(r,t),xR(s,i)),[t,i]}computeTangent(t=new q){let[i,r]=this.computeTangents();return i&&r&&t.copy(i).add(r).normalize(),t}computeNormal(t=new q){let[i,r]=this.computeNormals();return t.copy(i).add(r).normalize(),t}};function xR(t,i=new q){let r=t.length();return i.set(-t.y/r,t.x/r)}var XE=t=>t,Fp=new q,f_=new q,xJ=new q,_J=new q,kJ=new q,SJ=new q,_R=new N,kR=new N;function AJ(t){let i=new q;i.addVectors(t.v0,Fp.subVectors(t.v1,t.v0).multiplyScalar(2/3));let r=new q;return r.addVectors(t.v2,f_.subVectors(t.v1,t.v2).multiplyScalar(2/3)),new Io(t.v0,i,r,t.v2)}function f0(t,i,r=Number.EPSILON){return Math.abs(t-i)<r}function CJ(t,i,r=Number.EPSILON){return t.distanceTo(i)<r}function EJ(t,i,r=Number.EPSILON){return t.distanceTo(i)<r}function SR(t,i,r){let s=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),l=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2)),d=Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2));return Math.acos((l*l+s*s-d*d)/(2*l*s))}function MJ(t,i,r){return CR(t,i)&&CR(i,r)&&KE(t.position,i.position,r.position)}function KE(t,i,r){return Fp.copy(i).sub(t).cross(f_.copy(r).sub(t))===0}function TJ(t,i,r,s,l){let d=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),c=(t.y+i.y)/2,u=(t.x+i.x)/2,h=Math.sqrt(Math.pow(r,2)-Math.pow(d/2,2))*(t.y-i.y)/d,f=Math.sqrt(Math.pow(r,2)-Math.pow(d/2,2))*(i.x-t.x)/d;return s.set(u+h,c+f),l.set(u-h,c-f),[s,l]}function DJ(t,i,r){let s=t.distanceTo(r),l=i.distanceTo(r);return s<l?i:t}function PJ(t,i,r,s,l,d){let c=i.x-t.x,u=i.y-t.y,h=r.x-t.x,f=r.y-t.y,m=Math.sqrt((c+h)*(c+h)+(u+f)*(u+f)),p;return SR(i,t,r)>Math.PI&&(m*=-1),f0(f,u)?p=(u+f)*(s/m-.5)*8/3/(c-h):p=(c+h)*(s/m-.5)*8/3/(f-u),l.set(i.x-p*u,i.y+p*c),d.set(r.x+p*f,r.y-p*h),[l,d]}function AR(t,i){return t.position.equals(t.controls[1].position)&&i.position.equals(i.controls[0].position)}function CR(t,i){return KE(t.position,t.controls[1].position,i.position)&&KE(t.position,i.controls[0].position,i.position)}function OJ(t,i,r,s,l=.5){let d=Fp.subVectors(i,t).multiplyScalar(l).add(t),c=f_.subVectors(r,i).multiplyScalar(l).add(i),u=xJ.subVectors(s,r).multiplyScalar(l).add(r),h=d,f=_J.subVectors(c,d).multiplyScalar(l).add(d),m=kJ.subVectors(u,c).multiplyScalar(l).add(c),p=u,g=SJ.subVectors(m,f).multiplyScalar(l).add(f);return[t.x,t.y,h.x,h.y,f.x,f.y,g.x,g.y,m.x,m.y,p.x,p.y,s.x,s.y]}function IJ(t,i,r=12,s=!0){let l=kR.set(0,0,0),d,c=0,u=[];for(let h=0;h<i.length;h++){let f=XE(i[h]),m=Fp,p=uh(f,r);u.push(p);for(let g=0;g<=p;g++)if(f instanceof Io||f instanceof Mc||f instanceof Ro){if(f.getPoint(g/p,m),l.set(m.x,m.y,0),d!==void 0&&EJ(d,l))continue;d===void 0&&(d=_R),d.copy(l),t.setXYZ(c,l.x,l.y,l.z),c++}}return s&&c>1&&!(t.getX(c-1)===t.getX(0)&&t.getY(c-1)===t.getY(0)&&t.getZ(c-1)===t.getZ(0))&&(t.setXYZ(c,t.getX(0),t.getY(0),t.getZ(0)),c++),t}function RJ(t,i,r,s=12,l=!0){let d=kR.set(0,0,0),c=0,u=[];for(let h=0;h<i.length;h++){if(r[h]===!1)continue;let f,m=XE(i[h]),p=Fp,g=uh(m,s);u.push(g);for(let v=0;v<=g;v++)if(m instanceof Io||m instanceof Mc||m instanceof Ro){if(m.getPoint(v/g,p),d.set(p.x,p.y,0),f==null?void 0:f.equals(d))continue;f===void 0?f=_R:(t.setXYZ(c,f.x,f.y,f.z),c++,t.setXYZ(c,d.x,d.y,d.z),c++),f.copy(d)}}return l&&c>1&&!(t.getX(c-1)===t.getX(0)&&t.getY(c-1)===t.getY(0)&&t.getZ(c-1)===t.getZ(0))&&(t.setXYZ(c,t.getX(0),t.getY(0),t.getZ(0)),c++),u}function ER(t,i=12,r=!1){let s=[];for(let l=0,d=t.length;l<d;l++){let c=t[l],u=0;if(r&&c.roundedCurveCorner!==void 0){let h=uh(c.roundedCurveCorner,i)*.5;l>0&&(s[l-1]+=h),u+=h}c.curveAfter!==void 0&&(u+=uh(c.curveAfter,i)),s.push(u)}return t.length>0&&r&&t[0].roundedCurveCorner!==void 0&&(s[t.length-1]+=uh(t[0].roundedCurveCorner,i)*.5),s}function uh(t,i=12){return t&&t instanceof Hw?i*2:t&&(t instanceof Ro||t instanceof _P)?1:t&&t instanceof VA?i*t.points.length:i}function zJ(t,i,r=12,s=!0){let l,d=0;for(let c=0;c<i.length;c++){let u=XE(i[c]),h=uh(u,r),f=Fp;for(let m=0;m<=h;m++)if(u instanceof Io||u instanceof Mc||u instanceof Ro){if(u.getPoint(m/h,f),l!==void 0&&CJ(l,f,h0))continue;l===void 0&&(l=f_),l.copy(f),t.push(f.x,f.y),d++}}return f0(t[0],t[t.length-2],h0)&&f0(t[1],t[t.length-1],h0)&&(t.pop(),t.pop()),s&&d>1&&!(f0(t[d-1],t[1],h0)&&f0(t[d-2],t[0],h0))&&(t.push(t[0],t[1]),d++),t}var QE=new q,LJ=new q,BJ=new q,FJ=new q,NJ=new q,jJ=new q,er=class extends $w{constructor(t=100,i=100){super(),this.points=[],this.shapeHoles=[],this.plane=new Ps(new N(0,0,-1)),this.subdivision=0,this.controlSnapDistance=4,this.pointIDs=0,this.isMesh2D=!1,this.isText=!1,this._roundness=0,this.isClosed=!1,this.useCubicForRoundedCorners=!0,this.uuid=fe.generateUUID(),this.needsUpdate=!1,this.roundedCurves=[],this._width=t,this._height=i}static createFromState(t,i,r){let s=new er;return s.isClosed=t.isClosed,s.points=t.points.map(l=>Bp.create(l.id,l.data)),typeof t.roundness=="number"&&(s.roundness=t.roundness),s.shapeHoles=t.shapeHoles.map(l=>er.createFromState(l)),i!==void 0&&r!==void 0&&s.applySize(i,r),s.update(),s}get width(){return this._width}get height(){return this._height}get roundness(){return this._roundness}set roundness(t){if(this._roundness!==t){this._roundness=t;for(let i=0,r=this.points.length;i<r;i++)this.points[i].roundness=t;this.needsUpdate=!0}}getPointsIndexesByIds(t){return t.map(i=>this.getPointIndexById(i)).filter(i=>i>=0)}getPointIndexById(t){let i=this.points.length,r=this.points.findIndex(s=>s.uuid===t);if(r<0){let s=i;for(let l=0,d=this.shapeHoles.length;l<d;l++){let c=this.shapeHoles[l],u=c.points.length,h=c.getPointIndexById(t);if(h<0)s+=u;else return h+s}}return r}getLineIndexById(t){return this.getPointIndexById(t)}getBezierPoint(t){if(t<=this.points.length-1)return this.points[t];if(this.shapeHoles.length>0){let i=this.points.length;for(let r=0,s=this.shapeHoles.length;r<s;r++){let l=this.shapeHoles[r],d=t-i;if(d<=l.points.length-1)return l.points[d];i+=l.points.length}}throw new Error("This shape does not have a point for this index: "+t)}getBezierPointIndex(t){let i=this.points.indexOf(t);if(i>=0)return i;if(i=this.points.length,this.shapeHoles.length>0)for(let r=0,s=this.shapeHoles.length;r<s;r++){let l=this.shapeHoles[r],d=l.points.indexOf(t);if(d>=0)return i+d;i+=l.points.length}return-1}getAllPoints(){let t=[].concat(...this.shapeHoles.map(i=>i.points));return[...this.points,...t]}applySize(t,i){t===0&&(t=.001),i===0&&(i=.001),this._width=t,this._height=i}applyScale(t,i){let r=QE.set(t,i);for(let s=0,l=this.points.length;s<l;s++){let d=this.points[s];d.position.multiply(r),d.controls[0].position.multiply(r),d.controls[1].position.multiply(r)}for(let s=0,l=this.shapeHoles.length;s<l;s++)this.shapeHoles[s].applyScale(t,i);this._update()}createPoint(t,i=0,r=fe.generateUUID()){let s;t instanceof q?s=t:s=new q(t,i);let l=new Bp(r,s);return l.roundness=this.roundness,l}addPoint(t){this.points.push(t),this.needsUpdate=!0}addPointAt(t,i){this.points.splice(i,0,t),this.needsUpdate=!0}getPointByUuid(t){for(let i=0,r=this.points.length;i<r;i++){let s=this.points[i];if(s.uuid===t)return s}for(let i=0,r=this.shapeHoles.length;i<r;i++){let s=this.shapeHoles[i].getPointByUuid(t);if(s)return s}}getFirstPoint(){return this.points[0]}getLastPoint(){return this.points[this.points.length-1]}removePoint(t){let i=this.points.indexOf(t);i>=0&&this.points.splice(i,1),this.needsUpdate=!0}removePointById(t){let i=this.points.find(r=>r.uuid===t);i&&this.removePoint(i)}update(){for(let t=0,i=this.shapeHoles.length;t<i;t++)this.shapeHoles[t].update();this._update()}extractShapePointsToBuffer(t,i=12,r=!1){this.subdivision=i,this.curveDivisions===void 0&&this.computeCurveDivisions(i);let s=r?this.roundedCurveDivisions:this.curveDivisions;return IJ(t,r?this.roundedCurves:this.curves,i,this.autoClose),s.reduce((l,d)=>l+d,0)+1}computeCurveDivisions(t=12){return this.curveDivisions=ER(this.points,t,!1),this.roundedCurveDivisions=ER(this.points,t,!0),this.curveDivisions}extractFilteredShapePointsToBuffer(t,i,r=12){return RJ(t,this.curves,i,r,this.autoClose).reduce((s,l)=>s+l,0)*2}extractShapePointsToFlatArray(t,i=12){return this.subdivision=i,this.curveDivisions===void 0&&this.computeCurveDivisions(i),zJ(t,this.roundedCurves,i,this.autoClose)}getCurveIndexFromVertexId(t,i=!1){let r=0;this.curveDivisions===void 0&&this.computeCurveDivisions(this.subdivision);let s=i?this.roundedCurveDivisions:this.curveDivisions,l=0;i&&this.points[0].roundedCurveCorner!==void 0&&(l=uh(this.points[0].roundedCurveCorner,this.subdivision)*.5);let d=t-l;d<0&&(d+=s.reduce((c,u)=>c+u,0));for(let c=0,u=s.length;c<u;c++){let h=s[c];if(d<r+h)return[c,(d-r+1)/h];r+=h}return[0,1]}getCurveT(t,i,r){let s=this.points[t],l=this.points[t>=this.points.length-1?0:t+1],d=this.curveDivisions,c=d[t];if(AR(s,l)){let h=s.position.distanceTo(l.position);return s.position.distanceTo(QE.set(r.x,r.y))/h}let u=0;for(let h=0;h<t;h++)u+=d[h];return(i-u)/c}dispose(){}_applyCurveForPoint(t,i){AR(i,t)?this.lineTo(t.position.x,t.position.y):this.bezierCurveTo(i.controls[1].position.x,i.controls[1].position.y,t.controls[0].position.x,t.controls[0].position.y,t.position.x,t.position.y);let r=this.curves[this.curves.length-1];t.curveBefore=r,i.curveAfter=r;let s=r.clone();t.roundedCurveBefore=s,i.roundedCurveAfter=s,t.roundedCurveCorner=void 0,this.roundedCurves.push(s)}_update(){var i,r;if(this.curves=[],this.roundedCurves=[],!this.points.length)return;for(let s=0,l=this.points.length;s<l;s++){let d=this.points[s];if(s===0)this.moveTo(d.position.x,d.position.y);else{let c=this.points[s-1];this._applyCurveForPoint(d,c)}}let t=this.getLastPoint();if(t!=null&&t.curveAfter&&(t.curveAfter=void 0),this.isClosed){let s=this.points[0],l=this.points[this.points.length-1];this._applyCurveForPoint(s,l)}if(this.points.length>2){let s=0;for(let l=0,d=this.points.length;l<d;l++){let c=this.points[l],u=(i=this.points[l-1])!=null?i:this.points[this.points.length-1],h=(r=this.points[l+1])!=null?r:this.points[0],f=c.roundness,m=u&&h&&MJ(u,c,h);if(!c.controlsMoved()&&f>0&&!m){let p=c.curveBefore,g=c.curveAfter;if(p===void 0||g===void 0)continue;let v=c.roundedCurveBefore,w=c.roundedCurveAfter,x=p.getLength(),_=g.getLength(),k=Math.min(f,x*.499),A=Math.min(f,_*.499),C=Math.min(k,A),M=1-C/x,D=C/_,P=p.getPointAt(M,QE),T=g.getPointAt(D,LJ);this._subSplitCurve(p,v,M,P,void 0),this._subSplitCurve(g,w,D,void 0,T);let O;if(this.useCubicForRoundedCorners){let z=SR(P,c.position,T)/2,L=Math.tan(z)*P.distanceTo(c.position),[B,j]=TJ(P,T,L,BJ,FJ),V=DJ(B,j,c.position),[H,Y]=PJ(V,P,T,L,NJ,jJ);O=new Io(P.clone(),H.clone(),Y.clone(),T.clone())}else O=new Mc(P.clone(),c.position.clone(),T.clone());c.roundedCurveCorner=O,this.roundedCurves.splice(l+s,0,O),s++}}}}_subSplitCurve(t,i,r,s,l){if(t instanceof Ro)s!==void 0&&i.v2.copy(s),l!==void 0&&i.v1.copy(l);else{let d=t,c=i,u=d.getUtoTmapping(r,0),h=OJ(d.v0,d.v1,d.v2,d.v3,u);return s!==void 0&&(c.v0.set(h[0],h[1]),c.v1.set(h[2],h[3]),c.v2.set(h[4],h[5]),c.v3.set(h[6],h[7])),l!==void 0&&(c.v0.set(h[6],h[7]),c.v1.set(h[8],h[9]),c.v2.set(h[10],h[11]),c.v3.set(h[12],h[13])),c}return i}clone(){let t=new er(this._width,this._height);return t.points=this.points.map(i=>i.clone()),t.isClosed=this.isClosed,t.roundness=this.roundness,t.isMesh2D=this.isMesh2D,t.shapeHoles=this.shapeHoles.map(i=>i.clone()),t}toJSON(){return{points:this.points.reduce((t,i)=>t.concat(i.toJSON()),[]),shapeHoles:this.shapeHoles.map(t=>t.toJSON()),isClosed:this.isClosed,roundness:this.roundness}}fromJSON(t){var r;this.points=[],this.pointIDs=0;let i=t.points.length/7;for(let s=0;s<i;s++){let l=s*7,d=t.points[l+0],c=t.points[l+1],u=t.points[l+2],h=t.points[l+3],f=t.points[l+4],m=t.points[l+5],p=t.points[l+6],g=new Bp(fe.generateUUID(),new q(d,c));g.controls[0].position.set(u,h),g.controls[1].position.set(f,m),g.roundness=p,this.points.push(g)}return this.shapeHoles=(r=t.shapeHoles)!=null&&r.length?t.shapeHoles.map(s=>{let l=new er;return l.fromJSON(s),l}):[],this.isClosed=t.isClosed,this._roundness=t.roundness,this._update(),this}fromShape(t,i=!1){this.isText=i;let r=(l,d)=>{d instanceof Io&&d.v3.equals(l.position)&&l.controls[0].position.copy(d.v2)},s=l=>{let d=[],c,u;for(c=0,u=l.length;c<u;c++)l[c]instanceof Mc&&(l[c]=AJ(l[c]));for(c=0,u=l.length;c<u;c++){let m=l[c],p=c>0?l[c-1]:null,g;m instanceof Io?(g=this.createPoint(m.v0),g.controls[1].position.copy(m.v1)):m instanceof Ro&&(g=this.createPoint(m.v1)),g!==void 0&&(p!==null&&r(g,p),d.push(g))}let h=l[l.length-1],f=!1;return h instanceof Io?h.v3.equals(d[0].position)&&(d[0].controls[0].position.copy(h.v2),f=!0):h instanceof Ro&&h.v2.equals(d[0].position)&&(f=!0),this.isClosed=f,d};return this.points=s(t.curves),t instanceof $w&&(this.shapeHoles=t.holes.map(l=>{let d=new er;return d.fromShape(l),d})),this.update(),this}updatePoint(t,i){let r=this.getPointByUuid(t);r&&(i.position!==void 0&&r.position.fromArray(i.position),i.roundness!==void 0&&(r.roundness=i.roundness),i.areControlsDirectionsMirrored!==void 0&&(r.areControlsDirectionsMirrored=i.areControlsDirectionsMirrored),this.needsUpdate=!0)}updatePreviousControl(t,i){var s;let r=(s=this.getPointByUuid(t))==null?void 0:s.controls[0];r&&(i.position&&r.position.fromArray(i.position),this.needsUpdate=!0)}updateNextControl(t,i){var s;let r=(s=this.getPointByUuid(t))==null?void 0:s.controls[1];r&&(i.position&&r.position.fromArray(i.position),this.needsUpdate=!0)}},JE=Math.PI*2;function eM({x:t,y:i},r,s,l,d){return{x:t*r+l,y:i*s+d}}function UJ(t,i){let r=i===1.5707963267948966?.551915024494:i===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(i/4),s=Math.cos(t),l=Math.sin(t),d=Math.cos(t+i),c=Math.sin(t+i);return[{x:s-l*r,y:l+s*r},{x:d+c*r,y:c-d*r},{x:d,y:c}]}function MR(t,i,r,s){let l=t*s-i*r<0?-1:1,d=Math.min(1,Math.max(-1,t*r+i*s));return l*Math.acos(d)}function VJ(t,i,r,s,l,d,c,u,h,f){let m=Math.pow(l,2),p=Math.pow(d,2),g=Math.pow(c,2),v=Math.pow(u,2),w=m*p-m*v-p*g;w<0&&(w=0),w/=m*v+p*g,w=Math.sqrt(w)*(h===f?-1:1);let x=w*l/d*u,_=w*-d/l*c,k=x+(t+r)/2,A=_+(i+s)/2,C=(c-x)/l,M=(u-_)/d,D=(-c-x)/l,P=(-u-_)/d,T=MR(1,0,C,M),O=MR(C,M,D,P);return!f&&O>0&&(O-=JE),f&&O<0&&(O+=JE),{centerx:k,centery:A,ang1:T,ang2:O}}function HJ({px:t,py:i,cx:r,cy:s,rx:l,ry:d,largeArcFlag:c,sweepFlag:u}){let h=[];if(l===0||d===0)return[];let f=(t-r)/2,m=(i-s)/2;if(f===0&&m===0)return[];l=Math.abs(l),d=Math.abs(d);let p=Math.pow(f,2)/Math.pow(l,2)+Math.pow(m,2)/Math.pow(d,2);p>1&&(l*=Math.sqrt(p),d*=Math.sqrt(p));let g=VJ(t,i,r,s,l,d,f,m,c,u),{ang1:v,ang2:w}=g,{centerx:x,centery:_}=g,k=Math.abs(w)/(JE/4);Math.abs(1-k)<1e-7&&(k=1);let A=Math.max(Math.ceil(k),1);w/=A;for(let C=0;C<A;C++)h.push(UJ(v,w)),v+=w;return h.map(C=>{let{x:M,y:D}=eM(C[0],l,d,x,_),{x:P,y:T}=eM(C[1],l,d,x,_),{x:O,y:z}=eM(C[2],l,d,x,_);return{x1:M,y1:D,x2:P,y2:T,x:O,y:z}})}var dn;(function(t){t[t.ODD=0]="ODD",t[t.NONZERO=1]="NONZERO",t[t.POSITIVE=2]="POSITIVE",t[t.NEGATIVE=3]="NEGATIVE",t[t.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"})(dn||(dn={}));var br;(function(t){t[t.POLYGONS=0]="POLYGONS",t[t.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",t[t.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"})(br||(br={}));function ei(t,i){if(!t)throw i||"Assertion Failed!"}var Vt=function(){function t(){}return t.vertEq=function(i,r){return i.s===r.s&&i.t===r.t},t.vertLeq=function(i,r){return i.s<r.s||i.s===r.s&&i.t<=r.t},t.transLeq=function(i,r){return i.t<r.t||i.t===r.t&&i.s<=r.s},t.edgeGoesLeft=function(i){return t.vertLeq(i.Dst,i.Org)},t.edgeGoesRight=function(i){return t.vertLeq(i.Org,i.Dst)},t.vertL1dist=function(i,r){return Math.abs(i.s-r.s)+Math.abs(i.t-r.t)},t.edgeEval=function(i,r,s){ei(t.vertLeq(i,r)&&t.vertLeq(r,s));var l=r.s-i.s,d=s.s-r.s;return l+d>0?l<d?r.t-i.t+(i.t-s.t)*(l/(l+d)):r.t-s.t+(s.t-i.t)*(d/(l+d)):0},t.edgeSign=function(i,r,s){ei(t.vertLeq(i,r)&&t.vertLeq(r,s));var l=r.s-i.s,d=s.s-r.s;return l+d>0?(r.t-s.t)*l+(r.t-i.t)*d:0},t.transEval=function(i,r,s){ei(t.transLeq(i,r)&&t.transLeq(r,s));var l=r.t-i.t,d=s.t-r.t;return l+d>0?l<d?r.s-i.s+(i.s-s.s)*(l/(l+d)):r.s-s.s+(s.s-i.s)*(d/(l+d)):0},t.transSign=function(i,r,s){ei(t.transLeq(i,r)&&t.transLeq(r,s));var l=r.t-i.t,d=s.t-r.t;return l+d>0?(r.s-s.s)*l+(r.s-i.s)*d:0},t.vertCCW=function(i,r,s){return i.s*(r.t-s.t)+r.s*(s.t-i.t)+s.s*(i.t-r.t)>=0},t.interpolate=function(i,r,s,l){return i=i<0?0:i,s=s<0?0:s,i<=s?s===0?(r+l)/2:r+(l-r)*(i/(i+s)):l+(r-l)*(s/(i+s))},t.intersect=function(i,r,s,l,d){var c,u,h;t.vertLeq(i,r)||(h=i,i=r,r=h),t.vertLeq(s,l)||(h=s,s=l,l=h),t.vertLeq(i,s)||(h=i,i=s,s=h,h=r,r=l,l=h),t.vertLeq(s,r)?t.vertLeq(r,l)?(c=t.edgeEval(i,s,r),u=t.edgeEval(s,r,l),c+u<0&&(c=-c,u=-u),d.s=t.interpolate(c,s.s,u,r.s)):(c=t.edgeSign(i,s,r),u=-t.edgeSign(i,l,r),c+u<0&&(c=-c,u=-u),d.s=t.interpolate(c,s.s,u,l.s)):d.s=(s.s+r.s)/2,t.transLeq(i,r)||(h=i,i=r,r=h),t.transLeq(s,l)||(h=s,s=l,l=h),t.transLeq(i,s)||(h=i,i=s,s=h,h=r,r=l,l=h),t.transLeq(s,r)?t.transLeq(r,l)?(c=t.transEval(i,s,r),u=t.transEval(s,r,l),c+u<0&&(c=-c,u=-u),d.t=t.interpolate(c,s.t,u,r.t)):(c=t.transSign(i,s,r),u=-t.transSign(i,l,r),c+u<0&&(c=-c,u=-u),d.t=t.interpolate(c,s.t,u,l.t)):d.t=(s.t+r.t)/2},t}(),p0=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1}return t}(),p_=function(){function t(i){this.side=i,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(t.prototype,"Rface",{get:function(){return this.Sym.Lface},set:function(i){this.Sym.Lface=i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dst",{get:function(){return this.Sym.Org},set:function(i){this.Sym.Org=i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Oprev",{get:function(){return this.Sym.Lnext},set:function(i){this.Sym.Lnext=i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Lprev",{get:function(){return this.Onext.Sym},set:function(i){this.Onext.Sym=i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dprev",{get:function(){return this.Lnext.Sym},set:function(i){this.Lnext.Sym=i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rprev",{get:function(){return this.Sym.Onext},set:function(i){this.Sym.Onext=i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Dnext",{get:function(){return this.Sym.Onext.Sym},set:function(i){this.Sym.Onext.Sym=i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Rnext",{get:function(){return this.Sym.Lnext.Sym},set:function(i){this.Sym.Lnext.Sym=i},enumerable:!0,configurable:!0}),t}(),Np=function(){function t(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0}return t}(),TR=function(){function t(){var i=new Np,r=new p0,s=new p_(0),l=new p_(1);i.next=i.prev=i,i.anEdge=null,r.next=r.prev=r,s.next=s,s.Sym=l,l.next=l,l.Sym=s,this.vHead=i,this.fHead=r,this.eHead=s,this.eHeadSym=l}return t.prototype.makeEdge_=function(i){var r=new p_(0),s=new p_(1);i.Sym.side<i.side&&(i=i.Sym);var l=i.Sym.next;return s.next=l,l.Sym.next=r,r.next=i,i.Sym.next=s,r.Sym=s,r.Onext=r,r.Lnext=s,r.Org=null,r.Lface=null,r.winding=0,r.activeRegion=null,s.Sym=r,s.Onext=s,s.Lnext=r,s.Org=null,s.Lface=null,s.winding=0,s.activeRegion=null,r},t.prototype.splice_=function(i,r){var s=i.Onext,l=r.Onext;s.Sym.Lnext=r,l.Sym.Lnext=i,i.Onext=l,r.Onext=s},t.prototype.makeVertex_=function(i,r,s){var l=i;ei(l,"Vertex can't be null!");var d=s.prev;l.prev=d,d.next=l,l.next=s,s.prev=l,l.anEdge=r;var c=r;do c.Org=l,c=c.Onext;while(c!==r)},t.prototype.makeFace_=function(i,r,s){var l=i;ei(l,"Face can't be null");var d=s.prev;l.prev=d,d.next=l,l.next=s,s.prev=l,l.anEdge=r,l.trail=null,l.marked=!1,l.inside=s.inside;var c=r;do c.Lface=l,c=c.Lnext;while(c!==r)},t.prototype.killEdge_=function(i){i.Sym.side<i.side&&(i=i.Sym);var r=i.next,s=i.Sym.next;r.Sym.next=s,s.Sym.next=r},t.prototype.killVertex_=function(i,r){var s=i.anEdge,l=s;do l.Org=r,l=l.Onext;while(l!==s);var d=i.prev,c=i.next;c.prev=d,d.next=c},t.prototype.killFace_=function(i,r){var s=i.anEdge,l=s;do l.Lface=r,l=l.Lnext;while(l!==s);var d=i.prev,c=i.next;c.prev=d,d.next=c},t.prototype.makeEdge=function(){var i=new Np,r=new Np,s=new p0,l=this.makeEdge_(this.eHead);return this.makeVertex_(i,l,this.vHead),this.makeVertex_(r,l.Sym,this.vHead),this.makeFace_(s,l,this.fHead),l},t.prototype.splice=function(i,r){var s=!1,l=!1;if(i!==r){if(r.Org!==i.Org&&(l=!0,this.killVertex_(r.Org,i.Org)),r.Lface!==i.Lface&&(s=!0,this.killFace_(r.Lface,i.Lface)),this.splice_(r,i),!l){var d=new Np;this.makeVertex_(d,r,i.Org),i.Org.anEdge=i}if(!s){var c=new p0;this.makeFace_(c,r,i.Lface),i.Lface.anEdge=i}}},t.prototype.delete=function(i){var r=i.Sym,s=!1;if(i.Lface!==i.Rface&&(s=!0,this.killFace_(i.Lface,i.Rface)),i.Onext===i)this.killVertex_(i.Org,null);else if(i.Rface.anEdge=i.Oprev,i.Org.anEdge=i.Onext,this.splice_(i,i.Oprev),!s){var l=new p0;this.makeFace_(l,i,i.Lface)}r.Onext===r?(this.killVertex_(r.Org,null),this.killFace_(r.Lface,null)):(i.Lface.anEdge=r.Oprev,r.Org.anEdge=r.Onext,this.splice_(r,r.Oprev)),this.killEdge_(i)},t.prototype.addEdgeVertex=function(i){var r=this.makeEdge_(i),s=r.Sym;this.splice_(r,i.Lnext),r.Org=i.Dst;var l=new Np;return this.makeVertex_(l,s,r.Org),r.Lface=s.Lface=i.Lface,r},t.prototype.splitEdge=function(i){var r=this.addEdgeVertex(i),s=r.Sym;return this.splice_(i.Sym,i.Sym.Oprev),this.splice_(i.Sym,s),i.Dst=s.Org,s.Dst.anEdge=s.Sym,s.Rface=i.Rface,s.winding=i.winding,s.Sym.winding=i.Sym.winding,s.idx=i.idx,s.Sym.idx=i.Sym.idx,s},t.prototype.connect=function(i,r){var s=!1,l=this.makeEdge_(i),d=l.Sym;if(r.Lface!==i.Lface&&(s=!0,this.killFace_(r.Lface,i.Lface)),this.splice_(l,i.Lnext),this.splice_(d,r),l.Org=i.Dst,d.Org=r.Org,l.Lface=d.Lface=i.Lface,i.Lface.anEdge=d,!s){var c=new p0;this.makeFace_(c,l,i.Lface)}return l},t.prototype.zapFace=function(i){var r=i.anEdge,s,l,d,c,u;l=r.Lnext;do s=l,l=s.Lnext,s.Lface=null,s.Rface===null&&(s.Onext===s?this.killVertex_(s.Org,null):(s.Org.anEdge=s.Onext,this.splice_(s,s.Oprev)),d=s.Sym,d.Onext===d?this.killVertex_(d.Org,null):(d.Org.anEdge=d.Onext,this.splice_(d,d.Oprev)),this.killEdge_(s));while(s!=r);c=i.prev,u=i.next,u.prev=c,c.next=u},t.prototype.countFaceVerts_=function(i){var r=i.anEdge,s=0;do s++,r=r.Lnext;while(r!==i.anEdge);return s},t.prototype.mergeConvexFaces=function(i){var r,s,l,d,c,u,h;for(r=this.fHead.next;r!==this.fHead;r=r.next)if(r.inside)for(s=r.anEdge,c=s.Org;l=s.Lnext,d=s.Sym,d&&d.Lface&&d.Lface.inside&&(u=this.countFaceVerts_(r),h=this.countFaceVerts_(d.Lface),u+h-2<=i&&Vt.vertCCW(s.Lprev.Org,s.Org,d.Lnext.Lnext.Org)&&Vt.vertCCW(d.Lprev.Org,d.Org,s.Lnext.Lnext.Org)&&(l=d.Lnext,this.delete(d),s=null,d=null)),!(s&&s.Lnext.Org===c);)s=l;return!0},t.prototype.check=function(){var i=this.fHead,r=this.vHead,s=this.eHead,l,d,c,u,h,f;for(d=i,d=i;(l=d.next)!==i;d=l){ei(l.prev===d),h=l.anEdge;do ei(h.Sym!==h),ei(h.Sym.Sym===h),ei(h.Lnext.Onext.Sym===h),ei(h.Onext.Sym.Lnext===h),ei(h.Lface===l),h=h.Lnext;while(h!==l.anEdge)}for(ei(l.prev===d&&l.anEdge===null),u=r,u=r;(c=u.next)!==r;u=c){ei(c.prev===u),h=c.anEdge;do ei(h.Sym!==h),ei(h.Sym.Sym===h),ei(h.Lnext.Onext.Sym===h),ei(h.Onext.Sym.Lnext===h),ei(h.Org===c),h=h.Onext;while(h!==c.anEdge)}for(ei(c.prev===u&&c.anEdge===null),f=s,f=s;(h=f.next)!==s;f=h)ei(h.Sym.next===f.Sym),ei(h.Sym!==h),ei(h.Sym.Sym===h),ei(h.Org!==null),ei(h.Dst!==null),ei(h.Lnext.Onext.Sym===h),ei(h.Onext.Sym.Lnext===h);ei(h.Sym.next===f.Sym&&h.Sym===this.eHeadSym&&h.Sym.Sym===h&&h.Org===null&&h.Dst===null&&h.Lface===null&&h.Rface===null)},t}(),DR=function(){function t(){this.handle=null}return t}(),PR=function(){function t(){this.key=null,this.node=0}return t}(),GJ=function(){function t(i,r){this.leq=r,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=i,this.nodes=[],this.handles=[];for(var s=0;s<i+1;s++)this.nodes[s]=new DR,this.handles[s]=new PR;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return t.prototype.floatDown_=function(i){var r=this.nodes,s=this.handles,l,d,c;for(l=r[i].handle;;){if(c=i<<1,c<this.size&&this.leq(s[r[c+1].handle].key,s[r[c].handle].key)&&++c,ei(c<=this.max),d=r[c].handle,c>this.size||this.leq(s[l].key,s[d].key)){r[i].handle=l,s[l].node=i;break}r[i].handle=d,s[d].node=i,i=c}},t.prototype.floatUp_=function(i){var r=this.nodes,s=this.handles,l,d,c;for(l=r[i].handle;;){if(c=i>>1,d=r[c].handle,c===0||this.leq(s[d].key,s[l].key)){r[i].handle=l,s[l].node=i;break}r[i].handle=d,s[d].node=i,i=c}},t.prototype.init=function(){for(var i=this.size;i>=1;--i)this.floatDown_(i);this.initialized=!0},t.prototype.min=function(){return this.handles[this.nodes[1].handle].key},t.prototype.insert=function(i){var r,s;if(r=++this.size,r*2>this.max){this.max*=2;var l,d;for(d=this.nodes.length,this.nodes.length=this.max+1,l=d;l<this.nodes.length;l++)this.nodes[l]=new DR;for(d=this.handles.length,this.handles.length=this.max+1,l=d;l<this.handles.length;l++)this.handles[l]=new PR}return this.freeList===0?s=r:(s=this.freeList,this.freeList=this.handles[s].node),this.nodes[r].handle=s,this.handles[s].node=r,this.handles[s].key=i,this.initialized&&this.floatUp_(r),s},t.prototype.extractMin=function(){var i=this.nodes,r=this.handles,s=i[1].handle,l=r[s].key;return this.size>0&&(i[1].handle=i[this.size].handle,r[i[1].handle].node=1,r[s].key=null,r[s].node=this.freeList,this.freeList=s,--this.size,this.size>0&&this.floatDown_(1)),l},t.prototype.delete=function(i){var r=this.nodes,s=this.handles,l;ei(i>=1&&i<=this.max&&s[i].key!==null),l=s[i].node,r[l].handle=r[this.size].handle,s[r[l].handle].node=l,--this.size,l<=this.size&&(l<=1||this.leq(s[r[l>>1].handle].key,s[r[l].handle].key)?this.floatDown_(l):this.floatUp_(l)),s[i].key=null,s[i].node=this.freeList,this.freeList=i},t}(),tM=function(){function t(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1}return t}(),OR=function(){function t(){this.key=null,this.next=null,this.prev=null}return t}(),WJ=function(){function t(i,r){this.frame=i,this.leq=r,this.head=new OR,this.head.next=this.head,this.head.prev=this.head}return t.prototype.min=function(){return this.head.next},t.prototype.max=function(){return this.head.prev},t.prototype.insert=function(i){return this.insertBefore(this.head,i)},t.prototype.search=function(i){var r=this.head;do r=r.next;while(r.key!==null&&!this.leq(this.frame,i,r.key));return r},t.prototype.insertBefore=function(i,r){do i=i.prev;while(i.key!==null&&!this.leq(this.frame,i.key,r));var s=new OR;return s.key=r,s.next=i.next,i.next.prev=s,s.prev=i,i.next=s,s},t.prototype.delete=function(i){i.next.prev=i.prev,i.prev.next=i.next},t}(),qJ=function(){function t(){}return t.regionBelow=function(i){return i.nodeUp.prev.key},t.regionAbove=function(i){return i.nodeUp.next.key},t.debugEvent=function(i){},t.addWinding=function(i,r){i.winding+=r.winding,i.Sym.winding+=r.Sym.winding},t.edgeLeq=function(i,r,s){var l=i.event,d=r.eUp,c=s.eUp;if(d.Dst===l)return c.Dst===l?Vt.vertLeq(d.Org,c.Org)?Vt.edgeSign(c.Dst,d.Org,c.Org)<=0:Vt.edgeSign(d.Dst,c.Org,d.Org)>=0:Vt.edgeSign(c.Dst,l,c.Org)<=0;if(c.Dst===l)return Vt.edgeSign(d.Dst,l,d.Org)>=0;var u=Vt.edgeEval(d.Dst,l,d.Org),h=Vt.edgeEval(c.Dst,l,c.Org);return u>=h},t.deleteRegion=function(i,r){r.fixUpperEdge&&ei(r.eUp.winding===0),r.eUp.activeRegion=null,i.dict.delete(r.nodeUp)},t.fixUpperEdge=function(i,r,s){ei(r.fixUpperEdge),i.mesh.delete(r.eUp),r.fixUpperEdge=!1,r.eUp=s,s.activeRegion=r},t.topLeftRegion=function(i,r){var s=r.eUp.Org,l;do r=t.regionAbove(r);while(r.eUp.Org===s);if(r.fixUpperEdge){if(l=i.mesh.connect(t.regionBelow(r).eUp.Sym,r.eUp.Lnext),l===null)return null;t.fixUpperEdge(i,r,l),r=t.regionAbove(r)}return r},t.topRightRegion=function(i){var r=i.eUp.Dst;do i=t.regionAbove(i);while(i.eUp.Dst===r);return i},t.addRegionBelow=function(i,r,s){var l=new tM;return l.eUp=s,l.nodeUp=i.dict.insertBefore(r.nodeUp,l),l.fixUpperEdge=!1,l.sentinel=!1,l.dirty=!1,s.activeRegion=l,l},t.isWindingInside=function(i,r){switch(i.windingRule){case dn.ODD:return(r&1)!==0;case dn.NONZERO:return r!==0;case dn.POSITIVE:return r>0;case dn.NEGATIVE:return r<0;case dn.ABS_GEQ_TWO:return r>=2||r<=-2}throw new Error("Invalid winding rulle")},t.computeWinding=function(i,r){r.windingNumber=t.regionAbove(r).windingNumber+r.eUp.winding,r.inside=t.isWindingInside(i,r.windingNumber)},t.finishRegion=function(i,r){var s=r.eUp,l=s.Lface;l.inside=r.inside,l.anEdge=s,t.deleteRegion(i,r)},t.finishLeftRegions=function(i,r,s){for(var l,d=null,c=r,u=r.eUp;c!==s;){if(c.fixUpperEdge=!1,d=t.regionBelow(c),l=d.eUp,l.Org!=u.Org){if(!d.fixUpperEdge){t.finishRegion(i,c);break}l=i.mesh.connect(u.Lprev,l.Sym),t.fixUpperEdge(i,d,l)}u.Onext!==l&&(i.mesh.splice(l.Oprev,l),i.mesh.splice(u,l)),t.finishRegion(i,c),u=d.eUp,c=d}return u},t.addRightEdges=function(i,r,s,l,d,c){var u,h,f,m,p=!0;f=s;do ei(Vt.vertLeq(f.Org,f.Dst)),t.addRegionBelow(i,r,f.Sym),f=f.Onext;while(f!==l);for(d===null&&(d=t.regionBelow(r).eUp.Rprev),h=r,m=d;u=t.regionBelow(h),f=u.eUp.Sym,f.Org===m.Org;)f.Onext!==m&&(i.mesh.splice(f.Oprev,f),i.mesh.splice(m.Oprev,f)),u.windingNumber=h.windingNumber-f.winding,u.inside=t.isWindingInside(i,u.windingNumber),h.dirty=!0,!p&&t.checkForRightSplice(i,h)&&(t.addWinding(f,m),t.deleteRegion(i,h),i.mesh.delete(m)),p=!1,h=u,m=f;h.dirty=!0,ei(h.windingNumber-f.winding===u.windingNumber),c&&t.walkDirtyRegions(i,h)},t.spliceMergeVertices=function(i,r,s){i.mesh.splice(r,s)},t.vertexWeights=function(i,r,s){var l=Vt.vertL1dist(r,i),d=Vt.vertL1dist(s,i),c=.5*d/(l+d),u=.5*l/(l+d);i.coords[0]+=c*r.coords[0]+u*s.coords[0],i.coords[1]+=c*r.coords[1]+u*s.coords[1],i.coords[2]+=c*r.coords[2]+u*s.coords[2]},t.getIntersectData=function(i,r,s,l,d,c){r.coords[0]=r.coords[1]=r.coords[2]=0,r.idx=-1,t.vertexWeights(r,s,l),t.vertexWeights(r,d,c)},t.checkForRightSplice=function(i,r){var s=t.regionBelow(r),l=r.eUp,d=s.eUp;if(Vt.vertLeq(l.Org,d.Org)){if(Vt.edgeSign(d.Dst,l.Org,d.Org)>0)return!1;Vt.vertEq(l.Org,d.Org)?l.Org!==d.Org&&(i.pq.delete(l.Org.pqHandle),t.spliceMergeVertices(i,d.Oprev,l)):(i.mesh.splitEdge(d.Sym),i.mesh.splice(l,d.Oprev),r.dirty=s.dirty=!0)}else{if(Vt.edgeSign(l.Dst,d.Org,l.Org)<0)return!1;t.regionAbove(r).dirty=r.dirty=!0,i.mesh.splitEdge(l.Sym),i.mesh.splice(d.Oprev,l)}return!0},t.checkForLeftSplice=function(i,r){var s=t.regionBelow(r),l=r.eUp,d=s.eUp,c;if(ei(!Vt.vertEq(l.Dst,d.Dst)),Vt.vertLeq(l.Dst,d.Dst)){if(Vt.edgeSign(l.Dst,d.Dst,l.Org)<0)return!1;t.regionAbove(r).dirty=r.dirty=!0,c=i.mesh.splitEdge(l),i.mesh.splice(d.Sym,c),c.Lface.inside=r.inside}else{if(Vt.edgeSign(d.Dst,l.Dst,d.Org)>0)return!1;r.dirty=s.dirty=!0,c=i.mesh.splitEdge(d),i.mesh.splice(l.Lnext,d.Sym),c.Rface.inside=r.inside}return!0},t.checkForIntersect=function(i,r){var s=t.regionBelow(r),l=r.eUp,d=s.eUp,c=l.Org,u=d.Org,h=l.Dst,f=d.Dst,m,p,g=new Np,v,w;if(ei(!Vt.vertEq(f,h)),ei(Vt.edgeSign(h,i.event,c)<=0),ei(Vt.edgeSign(f,i.event,u)>=0),ei(c!==i.event&&u!==i.event),ei(!r.fixUpperEdge&&!s.fixUpperEdge),c===u||(m=Math.min(c.t,h.t),p=Math.max(u.t,f.t),m>p))return!1;if(Vt.vertLeq(c,u)){if(Vt.edgeSign(f,c,u)>0)return!1}else if(Vt.edgeSign(h,u,c)<0)return!1;return t.debugEvent(i),Vt.intersect(h,c,f,u,g),ei(Math.min(c.t,h.t)<=g.t),ei(g.t<=Math.max(u.t,f.t)),ei(Math.min(f.s,h.s)<=g.s),ei(g.s<=Math.max(u.s,c.s)),Vt.vertLeq(g,i.event)&&(g.s=i.event.s,g.t=i.event.t),v=Vt.vertLeq(c,u)?c:u,Vt.vertLeq(v,g)&&(g.s=v.s,g.t=v.t),Vt.vertEq(g,c)||Vt.vertEq(g,u)?(t.checkForRightSplice(i,r),!1):!Vt.vertEq(h,i.event)&&Vt.edgeSign(h,i.event,g)>=0||!Vt.vertEq(f,i.event)&&Vt.edgeSign(f,i.event,g)<=0?f===i.event?(i.mesh.splitEdge(l.Sym),i.mesh.splice(d.Sym,l),r=t.topLeftRegion(i,r),l=t.regionBelow(r).eUp,t.finishLeftRegions(i,t.regionBelow(r),s),t.addRightEdges(i,r,l.Oprev,l,l,!0),!0):h===i.event?(i.mesh.splitEdge(d.Sym),i.mesh.splice(l.Lnext,d.Oprev),s=r,r=t.topRightRegion(r),w=t.regionBelow(r).eUp.Rprev,s.eUp=d.Oprev,d=t.finishLeftRegions(i,s,null),t.addRightEdges(i,r,d.Onext,l.Rprev,w,!0),!0):(Vt.edgeSign(h,i.event,g)>=0&&(t.regionAbove(r).dirty=r.dirty=!0,i.mesh.splitEdge(l.Sym),l.Org.s=i.event.s,l.Org.t=i.event.t),Vt.edgeSign(f,i.event,g)<=0&&(r.dirty=s.dirty=!0,i.mesh.splitEdge(d.Sym),d.Org.s=i.event.s,d.Org.t=i.event.t),!1):(i.mesh.splitEdge(l.Sym),i.mesh.splitEdge(d.Sym),i.mesh.splice(d.Oprev,l),l.Org.s=g.s,l.Org.t=g.t,l.Org.pqHandle=i.pq.insert(l.Org),t.getIntersectData(i,l.Org,c,h,u,f),t.regionAbove(r).dirty=r.dirty=s.dirty=!0,!1)},t.walkDirtyRegions=function(i,r){for(var s=t.regionBelow(r),l,d;;){for(;s.dirty;)r=s,s=t.regionBelow(s);if(!r.dirty&&(s=r,r=t.regionAbove(r),r===null||!r.dirty))return;if(r.dirty=!1,l=r.eUp,d=s.eUp,l.Dst!==d.Dst&&t.checkForLeftSplice(i,r)&&(s.fixUpperEdge?(t.deleteRegion(i,s),i.mesh.delete(d),s=t.regionBelow(r),d=s.eUp):r.fixUpperEdge&&(t.deleteRegion(i,r),i.mesh.delete(l),r=t.regionAbove(s),l=r.eUp)),l.Org!==d.Org)if(l.Dst!==d.Dst&&!r.fixUpperEdge&&!s.fixUpperEdge&&(l.Dst===i.event||d.Dst===i.event)){if(t.checkForIntersect(i,r))return}else t.checkForRightSplice(i,r);l.Org===d.Org&&l.Dst===d.Dst&&(t.addWinding(d,l),t.deleteRegion(i,r),i.mesh.delete(l),r=t.regionAbove(s))}},t.connectRightVertex=function(i,r,s){var l,d=s.Onext,c=t.regionBelow(r),u=r.eUp,h=c.eUp,f=!1;if(u.Dst!==h.Dst&&t.checkForIntersect(i,r),Vt.vertEq(u.Org,i.event)&&(i.mesh.splice(d.Oprev,u),r=t.topLeftRegion(i,r),d=t.regionBelow(r).eUp,t.finishLeftRegions(i,t.regionBelow(r),c),f=!0),Vt.vertEq(h.Org,i.event)&&(i.mesh.splice(s,h.Oprev),s=t.finishLeftRegions(i,c,null),f=!0),f){t.addRightEdges(i,r,s.Onext,d,d,!0);return}Vt.vertLeq(h.Org,u.Org)?l=h.Oprev:l=u,l=i.mesh.connect(s.Lprev,l),t.addRightEdges(i,r,l,l.Onext,l.Onext,!1),l.Sym.activeRegion.fixUpperEdge=!0,t.walkDirtyRegions(i,r)},t.connectLeftDegenerate=function(i,r,s){var l,d,c,u,h;if(l=r.eUp,Vt.vertEq(l.Org,s)){ei(!1),t.spliceMergeVertices(i,l,s.anEdge);return}if(!Vt.vertEq(l.Dst,s)){i.mesh.splitEdge(l.Sym),r.fixUpperEdge&&(i.mesh.delete(l.Onext),r.fixUpperEdge=!1),i.mesh.splice(s.anEdge,l),t.sweepEvent(i,s);return}ei(!1),r=t.topRightRegion(r),h=t.regionBelow(r),c=h.eUp.Sym,d=u=c.Onext,h.fixUpperEdge&&(ei(d!==c),t.deleteRegion(i,h),i.mesh.delete(c),c=d.Oprev),i.mesh.splice(s.anEdge,c),Vt.edgeGoesLeft(d)||(d=null),t.addRightEdges(i,r,c.Onext,u,d,!0)},t.connectLeftVertex=function(i,r){var s,l,d,c,u,h,f=new tM;if(f.eUp=r.anEdge.Sym,s=i.dict.search(f).key,l=t.regionBelow(s),!!l){if(c=s.eUp,u=l.eUp,Vt.edgeSign(c.Dst,r,c.Org)===0){t.connectLeftDegenerate(i,s,r);return}if(d=Vt.vertLeq(u.Dst,c.Dst)?s:l,s.inside||d.fixUpperEdge){if(d===s)h=i.mesh.connect(r.anEdge.Sym,c.Lnext);else{var m=i.mesh.connect(u.Dnext,r.anEdge);h=m.Sym}d.fixUpperEdge?t.fixUpperEdge(i,d,h):t.computeWinding(i,t.addRegionBelow(i,s,h)),t.sweepEvent(i,r)}else t.addRightEdges(i,s,r.anEdge,r.anEdge,null,!0)}},t.sweepEvent=function(i,r){i.event=r,t.debugEvent(i);for(var s=r.anEdge;s.activeRegion===null;)if(s=s.Onext,s===r.anEdge){t.connectLeftVertex(i,r);return}var l=t.topLeftRegion(i,s.activeRegion);ei(l!==null);var d=t.regionBelow(l),c=d.eUp,u=t.finishLeftRegions(i,d,null);u.Onext===c?t.connectRightVertex(i,l,u):t.addRightEdges(i,l,u.Onext,c,c,!0)},t.addSentinel=function(i,r,s,l){var d=new tM,c=i.mesh.makeEdge();c.Org.s=s,c.Org.t=l,c.Dst.s=r,c.Dst.t=l,i.event=c.Dst,d.eUp=c,d.windingNumber=0,d.inside=!1,d.fixUpperEdge=!1,d.sentinel=!0,d.dirty=!1,d.nodeUp=i.dict.insert(d)},t.initEdgeDict=function(i){i.dict=new WJ(i,t.edgeLeq);var r=i.bmax[0]-i.bmin[0],s=i.bmax[1]-i.bmin[1],l=i.bmin[0]-r,d=i.bmax[0]+r,c=i.bmin[1]-s,u=i.bmax[1]+s;t.addSentinel(i,l,d,c),t.addSentinel(i,l,d,u)},t.doneEdgeDict=function(i){for(var r,s=0;(r=i.dict.min().key)!==null;)r.sentinel||(ei(r.fixUpperEdge),ei(++s===1)),ei(r.windingNumber===0),t.deleteRegion(i,r)},t.removeDegenerateEdges=function(i){var r,s,l,d=i.mesh.eHead;for(r=d.next;r!==d;r=s)s=r.next,l=r.Lnext,Vt.vertEq(r.Org,r.Dst)&&r.Lnext.Lnext!==r&&(t.spliceMergeVertices(i,l,r),i.mesh.delete(r),r=l,l=r.Lnext),l.Lnext===r&&(l!==r&&((l===s||l===s.Sym)&&(s=s.next),i.mesh.delete(l)),(r===s||r===s.Sym)&&(s=s.next),i.mesh.delete(r))},t.initPriorityQ=function(i){var r,s,l,d=0;for(l=i.mesh.vHead,s=l.next;s!==l;s=s.next)d++;for(d+=8,r=i.pq=new GJ(d,Vt.vertLeq),l=i.mesh.vHead,s=l.next;s!==l;s=s.next)s.pqHandle=r.insert(s);return s!==l?!1:(r.init(),!0)},t.donePriorityQ=function(i){i.pq=null},t.removeDegenerateFaces=function(i,r){var s,l,d;for(s=r.fHead.next;s!==r.fHead;s=l)l=s.next,d=s.anEdge,ei(d.Lnext!==d),d.Lnext.Lnext===d&&(t.addWinding(d.Onext,d),i.mesh.delete(d));return!0},t.computeInterior=function(i,r){r===void 0&&(r=!0);var s,l;if(t.removeDegenerateEdges(i),!t.initPriorityQ(i))return!1;for(t.initEdgeDict(i);(s=i.pq.extractMin())!==null;){for(;l=i.pq.min(),!(l===null||!Vt.vertEq(l,s));)l=i.pq.extractMin(),t.spliceMergeVertices(i,s.anEdge,l.anEdge);t.sweepEvent(i,s)}return i.event=i.dict.min().key.eUp.Org,t.debugEvent(i),t.doneEdgeDict(i),t.donePriorityQ(i),t.removeDegenerateFaces(i,i.mesh)?(r&&i.mesh.check(),!0):!1},t}(),$J=function(){function t(){this.mesh=new TR,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=dn.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return t.prototype.dot_=function(i,r){return i[0]*r[0]+i[1]*r[1]+i[2]*r[2]},t.prototype.normalize_=function(i){var r=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(!r)throw"Zero-size vector!";r=Math.sqrt(r),i[0]/=r,i[1]/=r,i[2]/=r},t.prototype.longAxis_=function(i){var r=0;return Math.abs(i[1])>Math.abs(i[0])&&(r=1),Math.abs(i[2])>Math.abs(i[r])&&(r=2),r},t.prototype.computeNormal_=function(i){var r,s,l,d,c,u,h=[0,0,0],f=[0,0,0],m=[0,0,0],p=[0,0,0],g=[0,0,0],v=[null,null,null],w=[null,null,null],x=this.mesh.vHead;r=x.next;for(var _=0;_<3;++_)d=r.coords[_],f[_]=d,w[_]=r,h[_]=d,v[_]=r;for(r=x.next;r!==x;r=r.next)for(var k=0;k<3;++k)d=r.coords[k],d<f[k]&&(f[k]=d,w[k]=r),d>h[k]&&(h[k]=d,v[k]=r);var A=0;if(h[1]-f[1]>h[0]-f[0]&&(A=1),h[2]-f[2]>h[A]-f[A]&&(A=2),f[A]>=h[A]){i[0]=0,i[1]=0,i[2]=1;return}for(u=0,s=w[A],l=v[A],m[0]=s.coords[0]-l.coords[0],m[1]=s.coords[1]-l.coords[1],m[2]=s.coords[2]-l.coords[2],r=x.next;r!==x;r=r.next)p[0]=r.coords[0]-l.coords[0],p[1]=r.coords[1]-l.coords[1],p[2]=r.coords[2]-l.coords[2],g[0]=m[1]*p[2]-m[2]*p[1],g[1]=m[2]*p[0]-m[0]*p[2],g[2]=m[0]*p[1]-m[1]*p[0],c=g[0]*g[0]+g[1]*g[1]+g[2]*g[2],c>u&&(u=c,i[0]=g[0],i[1]=g[1],i[2]=g[2]);u<=0&&(i[0]=i[1]=i[2]=0,i[this.longAxis_(m)]=1)},t.prototype.checkOrientation_=function(){for(var i=this.mesh.fHead,r,s=this.mesh.vHead,l,d=0,c=i.next;c!==i;c=c.next)if(l=c.anEdge,!(l.winding<=0))do d+=(l.Org.s-l.Dst.s)*(l.Org.t+l.Dst.t),l=l.Lnext;while(l!==c.anEdge);if(d<0){for(r=s.next;r!==s;r=r.next)r.t=-r.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},t.prototype.projectPolygon_=function(){var i=this.mesh.vHead,r=[0,0,0],s,l,d=!1;r[0]=this.normal[0],r[1]=this.normal[1],r[2]=this.normal[2],!r[0]&&!r[1]&&!r[2]&&(this.computeNormal_(r),d=!0),s=this.sUnit,l=this.tUnit;var c=this.longAxis_(r);s[c]=0,s[(c+1)%3]=1,s[(c+2)%3]=0,l[c]=0,l[(c+1)%3]=0,l[(c+2)%3]=r[c]>0?1:-1;for(var u=i.next;u!==i;u=u.next)u.s=this.dot_(u.coords,s),u.t=this.dot_(u.coords,l);d&&this.checkOrientation_();for(var h=!0,f=i.next;f!==i;f=f.next)h?(this.bmin[0]=this.bmax[0]=f.s,this.bmin[1]=this.bmax[1]=f.t,h=!1):(f.s<this.bmin[0]&&(this.bmin[0]=f.s),f.s>this.bmax[0]&&(this.bmax[0]=f.s),f.t<this.bmin[1]&&(this.bmin[1]=f.t),f.t>this.bmax[1]&&(this.bmax[1]=f.t))},t.prototype.addWinding_=function(i,r){i.winding+=r.winding,i.Sym.winding+=r.Sym.winding},t.prototype.tessellateMonoRegion_=function(i,r){var s,l;if(s=r.anEdge,!(s.Lnext!==s&&s.Lnext.Lnext!==s))throw"Mono region invalid";for(;Vt.vertLeq(s.Dst,s.Org);s=s.Lprev);for(;Vt.vertLeq(s.Org,s.Dst);s=s.Lnext);l=s.Lprev;for(var d=void 0;s.Lnext!==l;)if(Vt.vertLeq(s.Dst,l.Org)){for(;l.Lnext!==s&&(Vt.edgeGoesLeft(l.Lnext)||Vt.edgeSign(l.Org,l.Dst,l.Lnext.Dst)<=0);)d=i.connect(l.Lnext,l),l=d.Sym;l=l.Lprev}else{for(;l.Lnext!==s&&(Vt.edgeGoesRight(s.Lprev)||Vt.edgeSign(s.Dst,s.Org,s.Lprev.Org)>=0);)d=i.connect(s,s.Lprev),s=d.Sym;s=s.Lnext}if(l.Lnext===s)throw"Mono region invalid";for(;l.Lnext.Lnext!==s;)d=i.connect(l.Lnext,l),l=d.Sym;return!0},t.prototype.tessellateInterior_=function(i){for(var r,s=i.fHead.next;s!==i.fHead;s=r)if(r=s.next,s.inside&&!this.tessellateMonoRegion_(i,s))return!1;return!0},t.prototype.discardExterior_=function(i){for(var r,s=i.fHead.next;s!==i.fHead;s=r)r=s.next,s.inside||i.zapFace(s)},t.prototype.setWindingNumber_=function(i,r,s){for(var l,d=i.eHead.next;d!==i.eHead;d=l)l=d.next,d.Rface.inside!==d.Lface.inside?d.winding=d.Lface.inside?r:-r:s?i.delete(d):d.winding=0},t.prototype.getNeighbourFace_=function(i){return!i.Rface||!i.Rface.inside?-1:i.Rface.n},t.prototype.outputPolymesh_=function(i,r,s,l){var d,c=0,u=0,h;s>3&&i.mergeConvexFaces(s);for(var f=i.vHead.next;f!==i.vHead;f=f.next)f.n=-1;for(var m=i.fHead.next;m!==i.fHead;m=m.next)if(m.n=-1,!!m.inside){d=m.anEdge,h=0;do{var f=d.Org;f.n===-1&&(f.n=u,u++),h++,d=d.Lnext}while(d!==m.anEdge);if(h>s)throw"Face vertex greater that support polygon";m.n=c,++c}this.elementCount=c,r===br.CONNECTED_POLYGONS&&(c*=2),this.elements=[],this.elements.length=c*s,this.vertexCount=u,this.vertices=[],this.vertices.length=u*l,this.vertexIndices=[],this.vertexIndices.length=u;for(var f=i.vHead.next;f!==i.vHead;f=f.next)if(f.n!==-1){var p=f.n*l;this.vertices[p+0]=f.coords[0],this.vertices[p+1]=f.coords[1],l>2&&(this.vertices[p+2]=f.coords[2]),this.vertexIndices[f.n]=f.idx}for(var g=0,m=i.fHead.next;m!==i.fHead;m=m.next)if(m.inside){d=m.anEdge,h=0;do{var f=d.Org;this.elements[g++]=f.n,h++,d=d.Lnext}while(d!==m.anEdge);for(var v=h;v<s;++v)this.elements[g++]=-1;if(r===br.CONNECTED_POLYGONS){d=m.anEdge;do this.elements[g++]=this.getNeighbourFace_(d),d=d.Lnext;while(d!==m.anEdge);for(var w=h;w<s;++w)this.elements[g++]=-1}}},t.prototype.outputContours_=function(i,r){var s,l,d=0,c=0;this.vertexCount=0,this.elementCount=0;for(var u=i.fHead.next;u!==i.fHead;u=u.next)if(u.inside){l=s=u.anEdge;do this.vertexCount++,s=s.Lnext;while(s!==l);this.elementCount++}this.elements=[],this.elements.length=this.elementCount*2,this.vertices=[],this.vertices.length=this.vertexCount*r,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var h=0,f=0,m=0;d=0;for(var u=i.fHead.next;u!==i.fHead;u=u.next)if(u.inside){c=0,l=s=u.anEdge;do this.vertices[h++]=s.Org.coords[0],this.vertices[h++]=s.Org.coords[1],r>2&&(this.vertices[h++]=s.Org.coords[2]),this.vertexIndices[f++]=this.vertexIdCallback?this.vertexIdCallback(s):s.Org.idx,c++,s=s.Lnext;while(s!==l);this.elements[m++]=d,this.elements[m++]=c,d+=c}},t.prototype.addContour=function(i,r){this.mesh===null&&(this.mesh=new TR),i<2&&(i=2),i>3&&(i=3);for(var s=null,l=0;l<r.length;l+=i)s===null?(s=this.mesh.makeEdge(),this.mesh.splice(s,s.Sym)):(this.mesh.splitEdge(s),s=s.Lnext),s.Org.coords[0]=r[l+0],s.Org.coords[1]=r[l+1],i>2?s.Org.coords[2]=r[l+2]:s.Org.coords[2]=0,s.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(s),s.winding=1,s.Sym.winding=-1},t.prototype.tesselate=function(i,r,s,l,d,c){if(i===void 0&&(i=dn.ODD),r===void 0&&(r=br.POLYGONS),c===void 0&&(c=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,d&&(this.normal[0]=d[0],this.normal[1]=d[1],this.normal[2]=d[2]),this.windingRule=i,l<2&&(l=2),l>3&&(l=3),!this.mesh)return!1;this.projectPolygon_(),qJ.computeInterior(this,c);var u=this.mesh;return r===br.BOUNDARY_CONTOURS?this.setWindingNumber_(u,1,!0):this.tessellateInterior_(u),c&&u.check(),r===br.BOUNDARY_CONTOURS?this.outputContours_(u,l):this.outputPolymesh_(u,r,s,l),!0},t}();function $c(t){var i=t.windingRule,r=i===void 0?dn.ODD:i,s=t.elementType,l=s===void 0?br.POLYGONS:s,d=t.polySize,c=d===void 0?3:d,u=t.vertexSize,h=u===void 0?2:u,f=t.normal,m=f===void 0?[0,0,1]:f,p=t.contours,g=p===void 0?[]:p,v=t.strict,w=v===void 0?!0:v,x=t.debug,_=x===void 0?!1:x;if(!g&&w)throw new Error("Contours can't be empty");if(g){var k=new $J;t.edgeCreateCallback&&(k.edgeCreateCallback=t.edgeCreateCallback),t.vertexIdCallback&&(k.vertexIdCallback=t.vertexIdCallback);for(var A=0;A<g.length;A++)k.addContour(h||2,g[A]);return k.tesselate(r,l,c,h,m,w),{vertices:k.vertices,vertexIndices:k.vertexIndices,vertexCount:k.vertexCount,elements:k.elements,elementCount:k.elementCount,mesh:_?k.mesh:void 0}}}var nfe=dn.ODD,rfe=dn.NONZERO,afe=dn.POSITIVE,sfe=dn.NEGATIVE,ofe=dn.ABS_GEQ_TWO,lfe=br.POLYGONS,dfe=br.CONNECTED_POLYGONS,cfe=br.BOUNDARY_CONTOURS,iM=class{constructor(t=256,i=!1){this.capacity=t,this.size=0,this.debug=i,this.debug&&console.log(`allocating with cap ${t}`);let r=t*iM.eSize;this.buffer=new ArrayBuffer(r);let s=Float32Array.BYTES_PER_ELEMENT,l=0;this.positions=new Float32Array(this.buffer,l*s,3*t),l+=3*t,this.normals=new Float32Array(this.buffer,l*s,3*t),l+=3*t,this.uvs=new Float32Array(this.buffer,l*s,2*t)}realloc(t,i=!1){if(t<this.size)throw Error("cannot shrink buffer");if(t<=this.capacity&&!i)return;this.debug&&console.log(`resizing from ${this.capacity} \u2192 ${t}`);let r=t*iM.eSize,s=new ArrayBuffer(r),l=Float32Array.BYTES_PER_ELEMENT,d=0,c=new Float32Array(s,d*l,3*t);d+=3*t;let u=new Float32Array(s,d*l,3*t);d+=3*t;let h=new Float32Array(s,d*l,2*t);i?(c.set(this.positions.subarray(0,this.size*3)),u.set(this.normals.subarray(0,this.size*3)),h.set(this.uvs.subarray(0,this.size*2))):(c.set(this.positions),u.set(this.normals),h.set(this.uvs)),this.buffer=s,this.positions=c,this.normals=u,this.uvs=h,this.capacity=t}get(t=1){let i=this.size+t;if(i>this.capacity){let s=this.capacity;for(;i>s;)s*=2;this.realloc(s)}let r=this.size;return this.size=i,r}reserve(t){let i=this.size+t;i>this.capacity&&this.realloc(i)}shrink(){this.debug&&console.log(`shrinking ${this.capacity} \u2192 ${this.size}`),this.realloc(this.size,!0)}},IR=iM;IR.eSize=(3+3+2)*Float32Array.BYTES_PER_ELEMENT;var ZJ=sn(AS()),nM={vertices:[160,160,-160,160,-160,-160,160,-160],vertexIndices:[1,0,3,2],vertexCount:4,elements:[0,4],elementCount:1,mesh:void 0},RR={vertices:[],vertexIndices:[],vertexCount:0,elements:[],elementCount:0,mesh:void 0},zR={vertices:[-160,160,160,-160,160,160,-160,-160],vertexIndices:[1,3,0,2],vertexCount:4,elements:[0,1,2,1,0,3],elementCount:2,mesh:void 0},rM=(t,i)=>([r,s])=>(s<r&&(s+=i),(t>=r?t:t+i)<=s),aM=class extends Nt{constructor(t,i,r=0,s=12,l=3,d=dn.ODD,c=!1){super(),this.forPathBevel=c,this.type="ShapeGeometry",this.vertexCache={},this._shape=t,this._depth=i,this._curveSegments=s,this._bevelSegmentsInput=l;let u=this._shape.extractShapePointsToFlatArray([],s),h=this._shape.shapeHoles.map(z=>{let L=z.extractShapePointsToFlatArray([],s),B=[];for(let j=L.length-1;j>=1;j-=2){let V=L[j-1],H=L[j-0];B.push(V,H)}return B}),f=[],m=[];for(let z=0;z<u.length;z+=2)m.push([u[z],u[z+1]]);f.push(m);for(let z=0;z<h.length;z++){let L=h[z],B=[];for(let j=0;j<L.length;j+=2)B.push([L[j],L[j+1]]);f.push(B)}let p;t.isText?p=new JP().setFromPoints(t.points.map(z=>z.position)).getSize(new q).length()*.1:f[0].length===0?p=r:p=(0,ZJ.default)(f).distance,r<=0?(this._bevel=0,this._bevelSegments=0):(this._bevel=Math.min(r,p,i/2),this._bevelSegments=Math.floor(l));let g;try{g=$c({windingRule:d,elementType:br.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[u]})}catch(z){g=nM}let v;try{v=$c({windingRule:dn.ODD,elementType:br.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...h]})}catch(z){v=RR}if(!g)throw new Error("error generating geometry");let w=g.elementCount;if(v){g.elementCount+=v.elementCount;for(let z=0;z<v.elements.length;z++){let L=v.elements[z],B=z%2===0?g.vertexCount:0;g.elements.push(L+B)}for(let z=0;z<v.vertexIndices.length;z++){let L=v.vertexIndices[z],B=g.vertexCount;g.vertexIndices.push(L+B)}for(let z=0;z<v.vertices.length;z++){let L=v.vertices[z];g.vertices.push(L)}}let x=1/0,_=-1/0,k=1/0,A=-1/0;for(let z=0,L=g.vertexCount;z<L;z++){let B=z*2,j=g.vertices[B+0],V=g.vertices[B+1];j<x&&(x=j),j>_&&(_=j),V<k&&(k=V),V>A&&(A=V)}this._minX=x,this._minY=k,this._width=_-x,this._height=A-k,this._buffer=new IR(this._computeBufferEstimatedSize(g));let C=[],M=[];for(let z=g.elementCount-1;z>=0;z--){let L=z>=w,B=z*2,j=g.elements[B+0],V=g.elements[B+1],H=j+V,Y={start:j,count:V,normals:[],continuous:[],concave:[]},se=j,re=H-1,$=j+1,te=this._shape.roundedCurves.length;do{let ce=se-j,ve=g.vertices[re*2+0],le=g.vertices[re*2+1],Pe=g.vertices[se*2+0],we=g.vertices[se*2+1],Ee=g.vertices[$*2+0],xe=g.vertices[$*2+1],Ue=Pe-ve,Le=we-le,Ie=Math.sqrt(Ue*Ue+Le*Le);Ue/=Ie,Le/=Ie;let rt=Pe-Ee,nt=we-xe,ot=Math.sqrt(rt*rt+nt*nt);rt/=ot,nt/=ot,Y.normals[ce*2+0]=-nt,Y.normals[ce*2+1]=rt,Y.concave[ce]=Ue*nt-Le*rt>0;let mt=g.vertexIndices[se];if(Array.isArray(mt))Y.continuous[ce]=!1;else{let[it,Ke]=this._shape.getCurveIndexFromVertexId(mt-1,!0);if(Ke>0&&Ke<1)Y.continuous[ce]=!0;else{let pt=Ke===1?it+1:it-1;pt=(pt+te)%te;let Rt=Ke===1?0:1,ae=this._shape.roundedCurves[it].getTangent(Ke),Q=this._shape.roundedCurves[pt].getTangent(Rt);Y.continuous[ce]=ae.dot(Q)>.95}}L&&(Y.normals[ce*2+0]*=-1,Y.normals[ce*2+1]*=-1),[re,se,$]=[se,$,$+1],$>=H&&($-=V)}while($!==j+1);let he=[];he.push({bevelI:0,angle:0,size:0,boundary:{vertices:g.vertices.slice(j*2,H*2),vertexCount:V,vertexIndices:new Array(V).fill(!0).map((ce,ve)=>[ve,ve]),elements:[0,V],elementCount:1,mesh:null},reverseMap:[],insetPoints:g.vertices.slice(j*2,H*2)});let oe=0;for(let ce=1;ce<=this._bevelSegments;ce++){let ve=ce/this._bevelSegments*Math.PI/2,le=(1-Math.cos(ve))*this._bevel,Pe=[],we=[],Ee=[],xe=[],Ue=0;for(let Ie=0;Ie<V;Ie++){let rt=Ie*2,nt=(Ie-1+V)%V*2,ot=g.vertices[Y.start*2+rt+0],mt=g.vertices[Y.start*2+rt+1],it=-Y.normals[nt+0]*le,Ke=-Y.normals[nt+1]*le,pt=-Y.normals[rt+0]*le,Rt=-Y.normals[rt+1]*le;if(Y.concave[Ie]||!Y.concave[Ie]&&L){let ae=Math.atan2(Ke,it),Q=Math.atan2(Rt,pt);Q>ae&&(Q-=Math.PI*2);let Te=Q-ae;if(Y.continuous[Ie]||L){let Qe=ae+Te/2,He=Math.cos(Qe)*le,et=Math.sin(Qe)*le;Pe[2*Ue+0]=ot+He*(L?-1:1),Pe[2*Ue+1]=mt+et*(L?-1:1),xe[Ue]=Ie,Ue++}else{let Qe=Math.max(1,Math.floor(s/4*Math.abs(Te)/Math.PI));for(let He=0;He<=Qe;He++){let et=ae+Te*(He/Qe),Ct=Math.cos(et)*le,ct=Math.sin(et)*le;Pe[2*Ue+0]=ot+Ct,Pe[2*Ue+1]=mt+ct,xe[Ue]=Ie,Ue++}}}else Pe[2*Ue+0]=ot+it,Pe[2*Ue+1]=mt+Ke,xe[Ue]=Ie,we[Ie]=Ue,Ue++,Pe[2*Ue+0]=ot,Pe[2*Ue+1]=mt,xe[Ue]=Ie,Ue++,Pe[2*Ue+0]=ot+pt,Pe[2*Ue+1]=mt+Rt,xe[Ue]=Ie,Ee[Ie]=Ue,Ue++}let Le=$c({windingRule:dn.POSITIVE,elementType:br.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[Pe],edgeCreateCallback:Ie=>{let rt=Ie.Org.idx,nt=xe[rt],ot=xe[(rt+1)%xe.length];Ie.idx=[nt,ot],Ie.Sym.idx=[ot,nt]},vertexIdCallback:Ie=>{let rt=Ie.Lprev.idx;return[rt?rt[1]:0,Ie.idx?Ie.idx[0]:0]}});if(!Le)throw console.log("Error"),new Error(`error generating bevel geometry for ${ce}'th loop`);if(!Le.vertexCount){let Ie=(ce-1)/this._bevelSegments*Math.PI/2;oe=(1-Math.sin(Ie))*this._bevel;break}for(let Ie=0;Ie<Le.vertexIndices.length;Ie++){let[rt,nt]=Le.vertexIndices[Ie];if(rt===nt)continue;let ot=nt;nt<rt&&(ot+=V);for(let mt=rt;mt<ot;mt++){let it=mt%V,Ke=(mt+1)%V;if(!Y.continuous[it]||!Y.continuous[Ke]){Le.vertexIndices[Ie]=[rt,it],Le.vertexIndices.splice(Ie+1,0,[Ke,nt]),Le.vertices.splice((Ie+1)*2,0,Le.vertices[Ie*2],Le.vertices[Ie*2+1]);break}}}he.push({bevelI:ce,angle:ve,size:le,boundary:Le,reverseMap:xe,insetPoints:Pe})}let ee=(ce,ve,le)=>{let Pe=0,we=ce.boundary.vertexIndices.length;for(;Pe<we&&le(ce.boundary.vertexIndices[ve]);)ve=(ve+1)%we,Pe++;return Pe},pe=C.length;for(let ce=1;ce<he.length;ce++){let ve=he[ce-1],le=he[ce],Pe=ve.boundary.vertexIndices.length,we=le.boundary.vertexIndices.length;if(!Pe||!we)break;let Ee=Y.concave.length,xe=0,Ue=rM(xe,V);for(;!ve.boundary.vertexIndices.filter(Ue).length||!le.boundary.vertexIndices.filter(Ue).length;)xe++,Ue=rM(xe,V);let Le=ve.boundary.vertexIndices.findIndex(Ue),Ie=le.boundary.vertexIndices.findIndex(Ue);do Le=(Le+1)%Pe;while(Ue(ve.boundary.vertexIndices[Le]));do Ie=(Ie+1)%we;while(Ue(le.boundary.vertexIndices[Ie]));xe=(xe+1)%V;let rt=xe,nt=0,ot=this._buildBevelVert(Y,ve,(Le-1+Pe)%Pe,void 0,nt),mt=this._buildBevelVert(Y,le,(Ie-1+we)%we,void 0,nt),it=ot,Ke=mt,pt,Rt,ae=!1;do{nt=(xe||Ee)/Ee,Ue=rM(xe,V);let Q=ee(ve,Le,Ue),Te=ee(le,Ie,Ue),Qe=ae;if(ae=!1,Q&&!Te){for(let He=0;He<Q;He++)pt=this._buildBevelVert(Y,ve,(Le+He)%Pe,He/(Q-1),nt),C.push(it.topN,pt.topP,Ke.topN),c===!1&&C.push(pt.bottomP,it.bottomN,Ke.bottomN),it=pt;ae=!0}else if(!Q&&Te)for(let He=0;He<Te;He++)Rt=this._buildBevelVert(Y,le,(Ie+He)%we,He/(Te-1),nt),C.push(Ke.topN,it.topP,Rt.topP),c===!1&&C.push(it.bottomP,Ke.bottomN,Rt.bottomP),Ke=Rt;else if(Q&&Te)if(pt=this._buildBevelVert(Y,ve,Le,0,nt),Rt=this._buildBevelVert(Y,le,Ie,0,nt),Qe?(C.push(it.topN,Rt.topP,Ke.topN),C.push(it.topN,pt.topP,Rt.topP),c===!1&&(C.push(Rt.bottomP,it.bottomN,Ke.bottomN),C.push(Rt.bottomP,pt.bottomP,it.bottomN))):(C.push(Ke.topN,it.topN,pt.topP),C.push(Ke.topN,pt.topP,Rt.topP),c===!1&&(C.push(pt.bottomP,it.bottomN,Ke.bottomN),C.push(pt.bottomP,Ke.bottomN,Rt.bottomP))),it=pt,Ke=Rt,Q===Te)for(let He=1;He<Q;He++)pt=this._buildBevelVert(Y,ve,(Le+He)%Pe,He/(Q-1),nt),Rt=this._buildBevelVert(Y,le,(Ie+He)%we,He/(Te-1),nt),C.push(it.topN,pt.topP,Ke.topN),C.push(Ke.topN,pt.topP,Rt.topP),c===!1&&(C.push(pt.bottomP,it.bottomN,Ke.bottomN),C.push(pt.bottomP,Ke.bottomN,Rt.bottomP)),it=pt,Ke=Rt;else if(Q>Te){let He=Q/Te,et=0;for(let Ct=1;Ct<Q;Ct++)pt=this._buildBevelVert(Y,ve,(Le+Ct)%Pe,Ct/(Q-1),nt),C.push(it.topN,pt.topP,Ke.topN),c===!1&&C.push(pt.bottomP,it.bottomN,Ke.bottomN),it=pt,Ct>(et+1)*He&&(et++,Rt=this._buildBevelVert(Y,le,(Ie+et)%we,et/(Te-1),nt),C.push(Ke.topN,pt.topP,Rt.topP),c===!1&&C.push(pt.bottomP,Ke.bottomN,Rt.bottomP),Ke=Rt)}else{let He=Te/Q,et=0;for(let Ct=1;Ct<Te;Ct++)Rt=this._buildBevelVert(Y,le,(Ie+Ct)%we,Ct/(Te-1),nt),C.push(Ke.topN,pt.topP,Rt.topP),c===!1&&C.push(pt.bottomP,Ke.bottomN,Rt.bottomP),Ke=Rt,Ct>(et+1)*He&&(et++,pt=this._buildBevelVert(Y,ve,(Le+et)%Pe,et/(Q-1),nt),C.push(it.topN,pt.topP,Ke.topN),c===!1&&C.push(pt.bottomP,it.bottomN,Ke.bottomN),it=pt)}Le=(Le+Q)%Pe,Ie=(Ie+Te)%we,xe=(xe+1)%Ee}while(xe!==rt)}if(c===!1&&this._depth>this._bevel*2&&this._buildWall(he,Y,C),L){let ce=[];for(let ve=C.length-1;ve>=pe+2;ve-=3){let le=C[ve-2],Pe=C[ve-1],we=C[ve-0];ce.push(we,Pe,le)}C.splice(pe,C.length-pe,...ce)}if(L){let ce=[];for(let ve=he[he.length-1].boundary.vertices.length-1;ve>=1;ve-=2){let le=he[he.length-1].boundary.vertices[ve-1],Pe=he[he.length-1].boundary.vertices[ve-0];ce.push(le,Pe)}M.push(ce)}if(!L){let ce=he[he.length-1],ve;try{ve=$c({windingRule:he.length>1?dn.POSITIVE:dn.ODD,elementType:br.POLYGONS,vertexSize:2,strict:!0,contours:[ce.insetPoints,...M]})}catch(le){ve=zR}if(!ve)throw new Error("Error generating geometry for surface");h.length===0&&this._bevel<p&&Object.assign(this,{useNgonForTopBottomFaceDuringBake:!0});for(let le=0;le<ve.elementCount*3;le+=3){let Pe=this._buildSurfaceVert(ve,ve.elements[le+0],oe),we=this._buildSurfaceVert(ve,ve.elements[le+1],oe),Ee=this._buildSurfaceVert(ve,ve.elements[le+2],oe);C.push(Pe.top,we.top,Ee.top),c===!1&&C.push(Ee.bottom,we.bottom,Pe.bottom)}}this.vertexCache={}}this._buffer.shrink();let D=new Qt(Uint32Array.from(C),1),P=new Qt(this._buffer.positions,3),T=new Qt(this._buffer.normals,3),O=new Qt(this._buffer.uvs,2);P.needsUpdate=!0,T.needsUpdate=!0,O.needsUpdate=!0,D.needsUpdate=!0,this.setAttribute("position",P),this.setAttribute("normal",T),this.setAttribute("uv",O),this.setIndex(D)}_computeBufferEstimatedSize(t){return t.vertexCount*2*(2+this._bevelSegments)}_buildWall(t,i,r){let s=t[0];for(let l=0,d=s.boundary.vertexCount;l<d;l++){let c=this._buildBevelVert(i,s,l),u=this._buildBevelVert(i,s,(l+1)%d);r.push(u.topP,c.topN,c.bottomN),r.push(u.topP,c.bottomN,u.bottomP)}}_buildSurfaceVert(t,i,r){let s=i.toString();if(s in this.vertexCache)return this.vertexCache[s];let l=t.vertices[i*2+0],d=t.vertices[i*2+1],c=(l-this._minX)/this._width,u=(d-this._minY)/this._height;this.forPathBevel&&(u=1);let h=this._buffer.get(this.forPathBevel?1:2),f=h*3,m=h*2,p={top:h+0,bottom:h+1};return this._buffer.positions[f+0]=l,this._buffer.positions[f+1]=d,this._buffer.positions[f+2]=this.forPathBevel?this._bevel:this._depth-r,this._buffer.normals[f+0]=0,this._buffer.normals[f+1]=0,this._buffer.normals[f+2]=1,this._buffer.uvs[m+0]=c,this._buffer.uvs[m+1]=u,this.forPathBevel===!1&&(this._buffer.positions[f+3]=l,this._buffer.positions[f+4]=d,this._buffer.positions[f+5]=r,this._buffer.normals[f+3]=0,this._buffer.normals[f+4]=0,this._buffer.normals[f+5]=-1,this._buffer.uvs[m+2]=c,this._buffer.uvs[m+3]=u),this.vertexCache[s]=p,p}_buildBevelVert(t,i,r,s=1,l){let d=`${i.bevelI}:${r}`;if(d in this.vertexCache&&l!==0&&l!==1&&(!l||l===this.vertexCache[d].pathBevelUCoord))return this.vertexCache[d];let[c,u]=i.boundary.vertexIndices[r],h,f,m,p;c!==u?(f=c,h=u,p=!1,m=t.continuous[f]&&t.continuous[h]):(h=c,f=(h-1+t.count)%t.count,p=t.concave[h]&&i.bevelI>0,m=t.continuous[h]||p);let g=Math.cos(i.angle),v=Math.sin(i.angle),w=r*2,x=h*2,_=f*2,k=i.boundary.vertices[w+0],A=i.boundary.vertices[w+1],C=(1-v)*this._bevel,M=(k-this._minX)/this._width,D=(A-this._minY)/this._height;this.forPathBevel&&(l!==void 0&&(M=l),D=1);let P=t.normals[x+0],T=t.normals[x+1],O=t.normals[_+0],z=t.normals[_+1];if(p){let H=O-P,Y=z-T;P=P+H*(1-s),T=T+Y*(1-s);let se=Math.sqrt(P*P+T*T);P/=se,T/=se}let L=this.forPathBevel?this._buffer.get(m?1:2):this._buffer.get(m?2:4),B=L*3,j=L*2,V={i:r,fi:h,topP:L+0,topN:L+0,bottomP:L+1,bottomN:L+1,pathBevelUCoord:l};return this._buffer.positions[B+0]=k,this._buffer.positions[B+1]=A,this._buffer.positions[B+2]=(this.forPathBevel?this._bevel:this._depth)-C,this._buffer.normals[B+0]=P*g,this._buffer.normals[B+1]=T*g,this._buffer.normals[B+2]=v,this._buffer.uvs[j+0]=M,this._buffer.uvs[j+1]=D,this.forPathBevel===!1&&(this._buffer.positions[B+3]=k,this._buffer.positions[B+4]=A,this._buffer.positions[B+5]=C,this._buffer.normals[B+3]=P*g,this._buffer.normals[B+4]=T*g,this._buffer.normals[B+5]=-v,this._buffer.uvs[j+2]=D,this._buffer.uvs[j+3]=M),m||(this.forPathBevel?(L+=1,B+=3,j+=2):(L+=2,B+=6,j+=4),V.topP=L+0,V.bottomP=L+1,this._buffer.positions[B+0]=k,this._buffer.positions[B+1]=A,this._buffer.positions[B+2]=(this.forPathBevel?this._bevel:this._depth)-C,this._buffer.normals[B+0]=O*g,this._buffer.normals[B+1]=z*g,this._buffer.normals[B+2]=v,this._buffer.uvs[j+0]=M,this._buffer.uvs[j+1]=D,this.forPathBevel===!1&&(this._buffer.positions[B+3]=k,this._buffer.positions[B+4]=A,this._buffer.positions[B+5]=C,this._buffer.normals[B+3]=O*g,this._buffer.normals[B+4]=z*g,this._buffer.normals[B+5]=-v,this._buffer.uvs[j+2]=D,this._buffer.uvs[j+3]=M)),this.vertexCache[d]=V,V}clone(){let t=new aM(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return t.userData=wx(this.userData),t}},LR=class extends Nt{constructor(t,i=12,r={}){var g,v,w;super(),this.type="ShapeGeometry",this.windingRule=dn.ODD,this.elementType=br.POLYGONS,this.polySize=3,this.vertexSize=2,this.strict=!0,this._shape=t,this._curveSegments=i,this._triangulationOptions=Object.assign({windingRule:dn.ODD,elementType:br.POLYGONS,polySize:3,vertexSize:2,strict:!0},r);let s=this._shape.extractShapePointsToFlatArray([],this._curveSegments),l=this._shape.shapeHoles.map(x=>x.extractShapePointsToFlatArray([],this._curveSegments)),d,c=!0,u=!0,h,f;for(let x=0,_=s.length/2;x<_;x++){let k=x*2,A=s[k+0],C=s[k+1];if(h!==void 0&&A!==h&&(c=!1),f!==void 0&&C!==f&&(u=!1),h=A,f=C,!c&&!u)break}if(!c&&!u)try{d=$c({contours:[s,...l],windingRule:this._triangulationOptions.windingRule,elementType:this._triangulationOptions.elementType,polySize:this._triangulationOptions.polySize,vertexSize:this._triangulationOptions.vertexSize,strict:this._triangulationOptions.strict})}catch(x){d=nM}let m=(g=d==null?void 0:d.vertexCount)!=null?g:1,p=(v=d==null?void 0:d.elementCount)!=null?v:1;if(this._positionAttribute=new Qt(new Float32Array(m*3),3),this._normalAttribute=new Qt(new Float32Array(m*3),3),this._uvAttribute=new Qt(new Float32Array(m*2),2),this._indexAttribute=new Qt(new Uint32Array(p*3),1),d){let x=1/0,_=-1/0,k=1/0,A=-1/0;for(let D=0,P=m;D<P;D++){let T=D*2,O=d.vertices[T+0],z=d.vertices[T+1];O<x&&(x=O),O>_&&(_=O),z<k&&(k=z),z>A&&(A=z)}let C=_-x,M=A-k;for(let D=0,P=m;D<P;D++){let T=D*2,O=d.vertices[T+0],z=d.vertices[T+1],L=(O-x)/C,B=(z-k)/M;this._positionAttribute.setXYZ(D,O,z,0),this._normalAttribute.setXYZ(D,0,0,1),this._uvAttribute.setXY(D,L,B)}for(let D=0,P=p;D<P;D++){let T=D*3,O=d.elements[T+0],z=d.elements[T+1],L=d.elements[T+2];this._indexAttribute.setX(T+0,O),this._indexAttribute.setX(T+1,z),this._indexAttribute.setX(T+2,L)}}this.setAttribute("position",this._positionAttribute),this.setAttribute("normal",this._normalAttribute),this.setAttribute("uv",this._uvAttribute),this.setIndex(this._indexAttribute),this.setDrawRange(0,((w=d==null?void 0:d.elementCount)!=null?w:1)*3)}clone(){let t=new LR(this._shape,this._curveSegments);return t.userData=wx(this.userData),t}},BR=class extends aM{constructor(t,i,r=0,s=12,l=3,d=dn.ODD){super(t,i,r,s,l,d),this.type="ShapeGeometry"}_computeBufferEstimatedSize(t){return t.vertexCount*2*(2+this._bevelSegments)}_buildWall(t,i,r){let s=t[0];for(let l=0,d=s.boundary.vertexCount;l<d;l++){let c=this._buildBevelVert(i,s,l),u=this._buildBevelVert(i,s,(l+1)%d);r.push(u.topP,c.topN,c.bottomN),r.push(u.topP,c.bottomN,u.bottomP)}}clone(){let t=new BR(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return t.userData=wx(this.userData),t}},hh=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var f,m,p,g,v,w,x;let r=Object.assign({},(f=i==null?void 0:i.parameters)!=null?f:{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3,windingRule:dn.ODD},t.parameters),s=Math.abs(r.width),l=Math.abs((m=r.height)!=null?m:r.width),d=Math.abs((p=r.depth)!=null?p:0),c=(g=t.shape)!=null?g:i==null?void 0:i.shape,u=(v=c==null?void 0:c.roundness)!=null?v:r.roundness;c!==void 0&&(c instanceof er?(c.width!==s||c.height!==l)&&c.applySize(s,l):c=new er(s,l).fromJSON(c),((w=t.parameters)==null?void 0:w.roundness)!==void 0&&((x=t.parameters)==null?void 0:x.roundness)>0&&c.update());let h=c!=null?c:new er(s,l);return{parameters:Object.assign(r,{width:s,height:l,depth:d,roundness:u}),shape:h}}static build(t){let{depth:i,extrudeBevelSize:r,extrudeBevelSegments:s,subdivisions:l,roundness:d,windingRule:c}=t.parameters;t.shape.roundness=d;let u;return i<=0?u=new LR(t.shape,l,{windingRule:c}):u=new BR(t.shape,i,r,l,s,c),Object.assign(u,{userData:ge(Z({},t),{type:"VectorGeometry"})})}},FR=Math.PI*2,sM=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters);return r.angle=fe.clamp(r.angle,0,360),{shape:t.shape&&t.shape instanceof er?t.shape:new er,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:0)})}}static build(t){let{width:i,height:r,spikes:s,angle:l,innerRadius:d,depth:c,extrudeBevelSize:u,extrudeBevelSegments:h}=t.parameters,f=t.shape,m=i*.5,p=r*.5,g=YJ(f,m,p,l*Math.PI/180,s,d);f.isClosed=!0,f.update();let v;return l===0?(v=new Nt,v.setAttribute("position",new wt([],3))):v=hh.create({shape:f,parameters:{subdivisions:g,depth:c,extrudeBevelSize:u,extrudeBevelSegments:h}}),Object.assign(v,{userData:ge(Z({},t),{type:"EllipseGeometry"})})}};function YJ(t,i,r,s,l,d){if(s>=FR)return l>30||l%4===0?(KJ(t,i,r,d),Math.round(l/4)):NR(t,s,l,i,r,d);s=Math.max(s,.001);let c={x:0,y:r},u=s+Math.PI*.5,h={x:Math.cos(u)*i,y:Math.sin(u)*r},f=HJ({px:c.x,py:c.y,cx:h.x,cy:h.y,rx:i,ry:r,largeArcFlag:s>Math.PI,sweepFlag:!0});return l>30||l%f.length===0?XJ(t,c.x,c.y,f,l,i,r,d):NR(t,s,l,i,r,d)}function XJ(t,i,r,s,l,d,c,u){let h=Math.round(l/s.length);t.addPoint(jp(i,r));for(let f=0,m=s.length;f<m;f++){let p=s[f],g=t.points[f],v=jp(p.x,p.y);g.controls[1].position.set(p.x1,p.y1),v.controls[0].position.set(p.x2,p.y2),t.addPoint(v)}return u>0?jR(t,d,c,u):t.addPoint(jp(0,0)),h}function NR(t,i,r,s,l,d){let c=-i/r;for(let u=0;u<=r;u++){let h=c*u,f=Math.sin(h)*s,m=Math.cos(h)*l;t.addPoint(jp(f,m))}return i<FR?d>0?jR(t,s,l,d):t.addPoint(jp(0,0)):(t.removePoint(t.points[t.points.length-1]),d>0&&UR(t,s,l,d)),1}function KJ(t,i,r,s=0,l=0,d=0){let c=.5522847498,u=i*c,h=r*c;t.addPoint(m_(l-i,d,l-i,d-h,l-i,d+h)),t.addPoint(m_(l,d+r,l-u,d+r,l+u,d+r)),t.addPoint(m_(l+i,d,l+i,d+h,l+i,d-h)),t.addPoint(m_(l,d-r,l+u,d-r,l-u,d-r)),s>0&&UR(t,i,r,s)}function jp(t,i){return new Bp(fe.generateUUID(),new q(t,i))}function m_(t,i,r,s,l,d){let c=jp(t,i);return c.controls[0].position.set(r,s),c.controls[1].position.set(l,d),c}function jR(t,i,r,s){VR(t,i,r,s).forEach(l=>t.addPoint(l))}function UR(t,i,r,s){let l=VR(t,i,r,s),d=new er;l.forEach(c=>d.addPoint(c)),d.isClosed=!0,t.shapeHoles.push(d)}function VR(t,i,r,s){let l=s*i/100,d=l*(Math.abs(r)/Math.abs(i)),c=new q(l/i,d/r),u=t.points.map(h=>{let f=h.clone();return f.uuid=fe.generateUUID(),f}).reverse();return u.forEach(h=>{h.position.multiply(c);let f=h.controls[0].position.clone().multiply(c),m=h.controls[1].position.clone().multiply(c);h.controls[0].position.copy(m),h.controls[1].position.copy(f)}),u}var QJ=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var u,h,f;let r=Object.assign({},(u=i==null?void 0:i.parameters)!=null?u:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},t.parameters),s=Math.abs(r.width),l=Math.abs((h=r.height)!=null?h:s),d=Math.abs((f=r.depth)!=null?f:s),c=Math.abs(Math.min(s,d))/2;return{parameters:Object.assign(r,{width:s,height:l,depth:d,radius:c,segments:Math.round(r.segments),pathSegments:Math.round(r.pathSegments),cornerSegments:Math.round(r.cornerSegments)})}}static build(t){let{width:i,height:r,depth:s,radius:l,revolutions:d,segments:c,pathRadius:u,pathType:h,pathSegments:f,cornerRadius:m,cornerSegments:p}=t.parameters,g=new HR(!1,i,r,s,l,d,c,u,h,f,m,p);return Object.assign(g,{userData:ge(Z({},t),{type:"HelixGeometry"})})}},oM=new Nf([0,0,0],1),HR=class extends Nt{constructor(t=!0,i=1,r=1,s=1,l=1,d=1,c=1,u=1,h=1,f=1,m=1,p=1){if(super(),d===0)return;let g=t&&d===1;g&&(p=0),m>100&&(m=100),m===0&&(p=0);let v=()=>new N,w=new N,x=v(),_=v(),k=v(),A,C,M,D,P,T,O,z,L=v(),B=v(),j=v(),V=v(),H=v(),Y=v(),se=v(),re=v(),$=r-2*u+.001,te=$/d,he=Math.ceil(c*d),oe=he+1,ee=$/he,pe=-$/2,ce=f+1,ve=2*Math.PI/f,le=Math.PI/2/p,Pe=.01,we=Math.min((1-m/100)*u,u-Pe),Ee=u-we,xe=0,Ue=2,Le=p*Ue+Ue,Ie=ce*Le/Ue,rt=Ie+ce*oe,nt=Math.max(0,ce*(oe+Le)),[ot,mt,it]=[3,3,2].map(ut=>Array(nt*ut).fill(0)),Ke=[],pt=l-u;function Rt(ut,Tt){let xt=Math.PI/2;T=Tt*ee,z=2*Math.PI*(T%te)/te+xt,T+=pe,O=Math.sin(z)*pt,P=Math.cos(z)*pt,t?ut.set(P,O,T):ut.set(P,T,O)}Rt(w,-1e-10),Rt(x,0),L.copy(w),Rt(w,1);let ae=w.distanceTo(x),Q=g?0:Ee+we,Te=ae*he+2*Q,Qe=we,He=Te-Q;for(let ut=0;ut<=he;ut++){Rt(_,ut),re.subVectors(_,L).normalize(),L.copy(_),Y.copy(_).setComponent(+t+1,0).normalize(),se.crossVectors(re,Y).normalize();let Tt=ut===0,xt=ut===he,Ht=Tt?3*Math.PI/2:le,Bt=Tt?Qe:He,Ei=Tt?ce:rt,Xi=Tt?0:nt-ce,Bn=re.clone().multiplyScalar(Tt?-Ee:Ee).add(_),ye=re.clone().multiplyScalar(Tt?-1:1).normalize();for(let Ne=0;Ne<ce;Ne++){let Je=Ne*ve;if(B.addVectors(w.copy(Y).multiplyScalar(u*Math.cos(Je)),x.copy(se).multiplyScalar(u*Math.sin(Je))),j.copy(B).normalize(),Tt||xt){g||(xe=Xi+Ne,[0,1,2].forEach(Fe=>{ot[xe*3+Fe]=Bn.getComponent(Fe),mt[xe*3+Fe]=ye.getComponent(Fe)}),it[xe*2]=+xt,it[xe*2+1]=Ne/f),x.copy(j).multiplyScalar(we),k.addVectors(_,x);for(let Fe=0;Fe<p;Fe++){let $e=Fe*le+Ht;V.addVectors(w.copy(re).multiplyScalar(Ee*Math.sin($e)),x.copy(j).multiplyScalar(Ee*Math.cos($e))),H.copy(V).normalize(),x.addVectors(k,V),V.normalize(),xe=Ei+Fe*ce+Ne,[0,1,2].forEach(Dt=>{ot[xe*3+Dt]=x.getComponent(Dt),mt[xe*3+Dt]=H.getComponent(Dt)});let at=+Tt+Math.sin($e);it[xe*2]=(Bt+Ee*at)/Te,it[xe*2+1]=Ne/f}}x.addVectors(_,B),xe=Ie+ut*ce+Ne,[0,1,2].forEach(Fe=>{ot[xe*3+Fe]=x.getComponent(Fe),mt[xe*3+Fe]=j.getComponent(Fe)}),it[xe*2]=(Q+ut*ae)/Te,it[xe*2+1]=Ne/f}}let et=oe+2*p+Ue,Ct=1,[ct,Ge]=[+g,et-1];for(let ut=ct;ut<=Ge-1;ut++){let Tt=g&&ut===Ge-1;for(let xt=0;xt<ce-1;xt++)A=ut*ce+xt,C=A+1,M=(Tt?xt:A)+ce,D=(Tt?xt+1:C)+ce,ut===0?Ke.push(C,D,M):ut===et-2?Ke.push(A,C,M):Ke.push(A,C,M,C,D,M)}this.setIndex(Ke),this.setAttribute("position",new wt(ot,3)),this.setAttribute("normal",new wt(mt,3)),this.setAttribute("uv",new wt(it,2))}getClosedTorusIndicesForBooleanOrSubdiv(){let t=this.userData.parameters,i=Math.ceil(t.tubularSegments),r=t.radialSegments+1,s=Array.from(this.getIndex().array),l,d,c,u,h=6*(i-1)*t.radialSegments,f=i,m=f===i;for(let p=0;p<t.radialSegments;p++)l=f*r+p,d=l+1,c=(m?p:l)+r,u=(m?p+1:d)+r,s[h++]=l,s[h++]=d,s[h++]=c,s[h++]=d,s[h++]=u,s[h++]=c;return s.length=h,oM.array=s,oM.count=s.length,oM}},JJ=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,detail:0,corner:0,cornerSides:4},t.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:r.width)})}}static build(t){let{width:i,height:r,depth:s,detail:l,corner:d,cornerSides:c}=t.parameters,u=l===0&&d!==0?new GR(i*.5,d,c):new RP(i*.5,l);return u.scale(1,r/i,s/i),Object.assign(u,{userData:ge(Z({},t),{type:"IcosahedronGeometry"})})}},GR=class extends $E{constructor(t=1,i=.2,r=4){let s=(1+Math.sqrt(5))/2,l=[-1,s,0,1,s,0,-1,-s,0,1,-s,0,0,-1,s,0,1,s,0,-1,-s,0,1,-s,s,0,-1,s,0,1,-s,0,-1,-s,0,1],d=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],c="IcosahedronGeometry";super(l,d,c,t,i,r),this.type=c}static fromJSON(t){return new GR(t.radius,t.corner,t.cornerSides)}},eee=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d,c,u;((l=(s=t.parameters)==null?void 0:s.points)!=null?l:[]).forEach(h=>{Array.isArray(h)&&(h.x=h[0],h.y=h[1])});let r=Object.assign({},(d=i==null?void 0:i.parameters)!=null?d:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},t.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((c=r.height)!=null?c:r.width),depth:Math.abs((u=r.depth)!=null?u:r.width)})}}static build(t){let{points:i,segments:r,verticalSegments:s}=t.parameters,l=new $w;l.moveTo(i[0].x,i[0].y),l.bezierCurveTo(i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y);let d=new SP(l.extractPoints(s).shape,r);return d.rotateZ(Math.PI),Object.assign(d,{userData:ge(Z({},t),{type:"LatheGeometry"})})}},Rl=new Ze,lM=new ln,g_=new N,v_=class extends Cr{constructor(){super(),this.uuid=fe.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}applyMatrix4(t){let i=new Me().getNormalMatrix(t);for(let r=0,s=this.vertices.length;r<s;r++)this.vertices[r].applyMatrix4(t);for(let r=0,s=this.faces.length;r<s;r++){let l=this.faces[r];l.normal.applyMatrix3(i).normalize();for(let d=0,c=l.vertexNormals.length;d<c;d++)l.vertexNormals[d].applyMatrix3(i).normalize()}return this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}rotateX(t){return Rl.makeRotationX(t),this.applyMatrix4(Rl),this}rotateY(t){return Rl.makeRotationY(t),this.applyMatrix4(Rl),this}rotateZ(t){return Rl.makeRotationZ(t),this.applyMatrix4(Rl),this}translate(t,i,r){return Rl.makeTranslation(t,i,r),this.applyMatrix4(Rl),this}scale(t,i,r){return Rl.makeScale(t,i,r),this.applyMatrix4(Rl),this}lookAt(t){return lM.lookAt(t),lM.updateMatrix(),this.applyMatrix4(lM.matrix),this}fromBufferGeometry(t){let i=this,r=t.index!==null?t.index:void 0,s=t.attributes;if(s.position===void 0)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;let l=s.position,d=s.normal,c=s.color,u=s.uv,h=s.uv2;h!==void 0&&(this.faceVertexUvs[1]=[]);for(let p=0;p<l.count;p++)i.vertices.push(new N().fromBufferAttribute(l,p)),c!==void 0&&i.colors.push(new _t().fromBufferAttribute(c,p));function f(p,g,v,w){let x=c===void 0?[]:[i.colors[p].clone(),i.colors[g].clone(),i.colors[v].clone()],_=d===void 0?[]:[new N().fromBufferAttribute(d,p),new N().fromBufferAttribute(d,g),new N().fromBufferAttribute(d,v)],k=new dM(p,g,v,_,x,w);i.faces.push(k),u!==void 0&&i.faceVertexUvs[0].push([new q().fromBufferAttribute(u,p),new q().fromBufferAttribute(u,g),new q().fromBufferAttribute(u,v)]),h!==void 0&&i.faceVertexUvs[1].push([new q().fromBufferAttribute(h,p),new q().fromBufferAttribute(h,g),new q().fromBufferAttribute(h,v)])}let m=t.groups;if(m.length>0)for(let p=0;p<m.length;p++){let g=m[p],v=g.start,w=g.count;for(let x=v,_=v+w;x<_;x+=3)r!==void 0?f(r.getX(x),r.getX(x+1),r.getX(x+2),g.materialIndex):f(x,x+1,x+2,g.materialIndex)}else if(r!==void 0)for(let p=0;p<r.count;p+=3)f(r.getX(p),r.getX(p+1),r.getX(p+2));else for(let p=0;p<l.count;p+=3)f(p,p+1,p+2);return this.computeFaceNormals(),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(g_).negate(),this.translate(g_.x,g_.y,g_.z),this}normalize(){this.computeBoundingSphere();let t=this.boundingSphere.center,i=this.boundingSphere.radius,r=i===0?1:1/i,s=new Ze;return s.set(r,0,0,-r*t.x,0,r,0,-r*t.y,0,0,r,-r*t.z,0,0,0,1),this.applyMatrix4(s),this}computeFaceNormals(){let t=new N,i=new N;for(let r=0,s=this.faces.length;r<s;r++){let l=this.faces[r],d=this.vertices[l.a],c=this.vertices[l.b],u=this.vertices[l.c];t.subVectors(u,c),i.subVectors(d,c),t.cross(i),t.normalize(),l.normal.copy(t)}}computeVertexNormals(t=!0){let i=new Array(this.vertices.length);for(let r=0,s=this.vertices.length;r<s;r++)i[r]=new N;if(t){let r=new N,s=new N;for(let l=0,d=this.faces.length;l<d;l++){let c=this.faces[l],u=this.vertices[c.a],h=this.vertices[c.b],f=this.vertices[c.c];r.subVectors(f,h),s.subVectors(u,h),r.cross(s),i[c.a].add(r),i[c.b].add(r),i[c.c].add(r)}}else{this.computeFaceNormals();for(let r=0,s=this.faces.length;r<s;r++){let l=this.faces[r];i[l.a].add(l.normal),i[l.b].add(l.normal),i[l.c].add(l.normal)}}for(let r=0,s=this.vertices.length;r<s;r++)i[r].normalize();for(let r=0,s=this.faces.length;r<s;r++){let l=this.faces[r],d=l.vertexNormals;d.length===3?(d[0].copy(i[l.a]),d[1].copy(i[l.b]),d[2].copy(i[l.c])):(d[0]=i[l.a].clone(),d[1]=i[l.b].clone(),d[2]=i[l.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeFlatVertexNormals(){this.computeFaceNormals();for(let t=0,i=this.faces.length;t<i;t++){let r=this.faces[t],s=r.vertexNormals;s.length===3?(s[0].copy(r.normal),s[1].copy(r.normal),s[2].copy(r.normal)):(s[0]=r.normal.clone(),s[1]=r.normal.clone(),s[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}computeMorphNormals(){for(let i=0,r=this.faces.length;i<r;i++){let s=this.faces[i];s.__originalFaceNormal?s.__originalFaceNormal.copy(s.normal):s.__originalFaceNormal=s.normal.clone(),s.__originalVertexNormals||(s.__originalVertexNormals=[]);for(let l=0,d=s.vertexNormals.length;l<d;l++)s.__originalVertexNormals[l]?s.__originalVertexNormals[l].copy(s.vertexNormals[l]):s.__originalVertexNormals[l]=s.vertexNormals[l].clone()}let t=new v_;t.faces=this.faces;for(let i=0,r=this.morphTargets.length;i<r;i++){if(!this.morphNormals[i]){this.morphNormals[i]={},this.morphNormals[i].faceNormals=[],this.morphNormals[i].vertexNormals=[];let l=this.morphNormals[i].faceNormals,d=this.morphNormals[i].vertexNormals;for(let c=0,u=this.faces.length;c<u;c++){let h=new N,f={a:new N,b:new N,c:new N};l.push(h),d.push(f)}}let s=this.morphNormals[i];t.vertices=this.morphTargets[i].vertices,t.computeFaceNormals(),t.computeVertexNormals();for(let l=0,d=this.faces.length;l<d;l++){let c=this.faces[l],u=s.faceNormals[l],h=s.vertexNormals[l];u.copy(c.normal),h.a.copy(c.vertexNormals[0]),h.b.copy(c.vertexNormals[1]),h.c.copy(c.vertexNormals[2])}}for(let i=0,r=this.faces.length;i<r;i++){let s=this.faces[i];s.normal=s.__originalFaceNormal,s.vertexNormals=s.__originalVertexNormals}}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new nn),this.boundingBox.setFromPoints(this.vertices)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ur),this.boundingSphere.setFromPoints(this.vertices)}merge(t,i,r=0){if(!(t&&t.isGeometry)){console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t);return}let s,l=this.vertices.length,d=this.vertices,c=t.vertices,u=this.faces,h=t.faces,f=this.colors,m=t.colors;i!==void 0&&(s=new Me().getNormalMatrix(i));for(let p=0,g=c.length;p<g;p++){let v=c[p].clone();i!==void 0&&v.applyMatrix4(i),d.push(v)}for(let p=0,g=m.length;p<g;p++)f.push(m[p].clone());for(let p=0,g=h.length;p<g;p++){let v=h[p],w,x,_=v.vertexNormals,k=v.vertexColors,A=new dM(v.a+l,v.b+l,v.c+l);A.normal.copy(v.normal),s!==void 0&&A.normal.applyMatrix3(s).normalize();for(let C=0,M=_.length;C<M;C++)w=_[C].clone(),s!==void 0&&w.applyMatrix3(s).normalize(),A.vertexNormals.push(w);A.color.copy(v.color);for(let C=0,M=k.length;C<M;C++)x=k[C],A.vertexColors.push(x.clone());A.materialIndex=v.materialIndex+r,u.push(A)}for(let p=0,g=t.faceVertexUvs.length;p<g;p++){let v=t.faceVertexUvs[p];this.faceVertexUvs[p]===void 0&&(this.faceVertexUvs[p]=[]);for(let w=0,x=v.length;w<x;w++){let _=v[w],k=[];for(let A=0,C=_.length;A<C;A++)k.push(_[A].clone());this.faceVertexUvs[p].push(k)}}}mergeMesh(t){if(!(t&&t.isMesh)){console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t);return}t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)}mergeVertices(t=4){let i={},r=[],s=[],l=Math.pow(10,t);for(let u=0,h=this.vertices.length;u<h;u++){let f=this.vertices[u],m=Math.round(f.x*l)+"_"+Math.round(f.y*l)+"_"+Math.round(f.z*l);i[m]===void 0?(i[m]=u,r.push(this.vertices[u]),s[u]=r.length-1):s[u]=s[i[m]]}let d=[];for(let u=0,h=this.faces.length;u<h;u++){let f=this.faces[u];f.a=s[f.a],f.b=s[f.b],f.c=s[f.c];let m=[f.a,f.b,f.c];for(let p=0;p<3;p++)if(m[p]===m[(p+1)%3]){d.push(u);break}}for(let u=d.length-1;u>=0;u--){let h=d[u];this.faces.splice(h,1);for(let f=0,m=this.faceVertexUvs.length;f<m;f++)this.faceVertexUvs[f].splice(h,1)}let c=this.vertices.length-r.length;return this.vertices=r,c}setFromPoints(t){this.vertices=[];for(let i=0,r=t.length;i<r;i++){let s=t[i];this.vertices.push(new N(s.x,s.y,s.z||0))}return this}sortFacesByMaterialIndex(){let t=this.faces,i=t.length;for(let u=0;u<i;u++)t[u]._id=u;function r(u,h){return u.materialIndex-h.materialIndex}t.sort(r);let s=this.faceVertexUvs[0],l=this.faceVertexUvs[1],d,c;s&&s.length===i&&(d=[]),l&&l.length===i&&(c=[]);for(let u=0;u<i;u++){let h=t[u]._id;d&&d.push(s[h]),c&&c.push(l[h])}d&&(this.faceVertexUvs[0]=d),c&&(this.faceVertexUvs[1]=c)}toJSON(){let t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.parameters!==void 0){let v=this.parameters;for(let w in v)v[w]!==void 0&&(t[w]=v[w]);return t}let i=[];for(let v=0;v<this.vertices.length;v++){let w=this.vertices[v];i.push(w.x,w.y,w.z)}let r=[],s=[],l={},d=[],c={},u=[],h={};for(let v=0;v<this.faces.length;v++){let w=this.faces[v],x=!0,_=!1,k=this.faceVertexUvs[0][v]!==void 0,A=w.normal.length()>0,C=w.vertexNormals.length>0,M=w.color.r!==1||w.color.g!==1||w.color.b!==1,D=w.vertexColors.length>0,P=0;if(P=f(P,0,0),P=f(P,1,x),P=f(P,2,_),P=f(P,3,k),P=f(P,4,A),P=f(P,5,C),P=f(P,6,M),P=f(P,7,D),r.push(P),r.push(w.a,w.b,w.c),r.push(w.materialIndex),k){let T=this.faceVertexUvs[0][v];r.push(g(T[0]),g(T[1]),g(T[2]))}if(A&&r.push(m(w.normal)),C){let T=w.vertexNormals;r.push(m(T[0]),m(T[1]),m(T[2]))}if(M&&r.push(p(w.color)),D){let T=w.vertexColors;r.push(p(T[0]),p(T[1]),p(T[2]))}}function f(v,w,x){return x?v|1<<w:v&~(1<<w)}function m(v){let w=v.x.toString()+v.y.toString()+v.z.toString();return l[w]!==void 0||(l[w]=s.length/3,s.push(v.x,v.y,v.z)),l[w]}function p(v){let w=v.r.toString()+v.g.toString()+v.b.toString();return c[w]!==void 0||(c[w]=d.length,d.push(v.getHex())),c[w]}function g(v){let w=v.x.toString()+v.y.toString();return h[w]!==void 0||(h[w]=u.length/2,u.push(v.x,v.y)),h[w]}return t.data={},t.data.vertices=i,t.data.normals=s,d.length>0&&(t.data.colors=d),u.length>0&&(t.data.uvs=[u]),t.data.faces=r,t}clone(){return new v_().copy(this)}copy(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;let i=t.vertices;for(let p=0,g=i.length;p<g;p++)this.vertices.push(i[p].clone());let r=t.colors;for(let p=0,g=r.length;p<g;p++)this.colors.push(r[p].clone());let s=t.faces;for(let p=0,g=s.length;p<g;p++)this.faces.push(s[p].clone());for(let p=0,g=t.faceVertexUvs.length;p<g;p++){let v=t.faceVertexUvs[p];this.faceVertexUvs[p]===void 0&&(this.faceVertexUvs[p]=[]);for(let w=0,x=v.length;w<x;w++){let _=v[w],k=[];for(let A=0,C=_.length;A<C;A++){let M=_[A];k.push(M.clone())}this.faceVertexUvs[p].push(k)}}let l=t.morphTargets;for(let p=0,g=l.length;p<g;p++){let v={};if(v.name=l[p].name,l[p].vertices!==void 0){v.vertices=[];for(let w=0,x=l[p].vertices.length;w<x;w++)v.vertices.push(l[p].vertices[w].clone())}if(l[p].normals!==void 0){v.normals=[];for(let w=0,x=l[p].normals.length;w<x;w++)v.normals.push(l[p].normals[w].clone())}this.morphTargets.push(v)}let d=t.morphNormals;for(let p=0,g=d.length;p<g;p++){let v={};if(d[p].vertexNormals!==void 0){v.vertexNormals=[];for(let w=0,x=d[p].vertexNormals.length;w<x;w++){let _=d[p].vertexNormals[w],k={};k.a=_.a.clone(),k.b=_.b.clone(),k.c=_.c.clone(),v.vertexNormals.push(k)}}if(d[p].faceNormals!==void 0){v.faceNormals=[];for(let w=0,x=d[p].faceNormals.length;w<x;w++)v.faceNormals.push(d[p].faceNormals[w].clone())}this.morphNormals.push(v)}let c=t.skinWeights;for(let p=0,g=c.length;p<g;p++)this.skinWeights.push(c[p].clone());let u=t.skinIndices;for(let p=0,g=u.length;p<g;p++)this.skinIndices.push(u[p].clone());let h=t.lineDistances;for(let p=0,g=h.length;p<g;p++)this.lineDistances.push(h[p]);let f=t.boundingBox;f!==null&&(this.boundingBox=f.clone());let m=t.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}toBufferGeometry(){let t=new tee().fromGeometry(this),i=new Nt,r=new Float32Array(t.vertices.length*3);if(i.setAttribute("position",y_.call(new Qt(r,3),t.vertices)),t.normals.length>0){let s=new Float32Array(t.normals.length*3);i.setAttribute("normal",y_.call(new Qt(s,3),t.normals))}if(t.colors.length>0){let s=new Float32Array(t.colors.length*3);i.setAttribute("color",WR.call(new Qt(s,3),t.colors))}if(t.uvs.length>0){let s=new Float32Array(t.uvs.length*2);i.setAttribute("uv",qR.call(new Qt(s,2),t.uvs))}if(t.uvs2.length>0){let s=new Float32Array(t.uvs2.length*2);i.setAttribute("uv2",qR.call(new Qt(s,2),t.uvs2))}i.groups=t.groups;for(let s in t.morphTargets){let l=[],d=t.morphTargets[s];for(let c=0,u=d.length;c<u;c++){let h=d[c],f=new wt(h.data.length*3,3);f.name=h.name,l.push(y_.call(f,h.data))}i.morphAttributes[s]=l}if(t.skinIndices.length>0){let s=new wt(t.skinIndices.length*4,4);i.setAttribute("skinIndex",$R.call(s,t.skinIndices))}if(t.skinWeights.length>0){let s=new wt(t.skinWeights.length*4,4);i.setAttribute("skinWeight",$R.call(s,t.skinWeights))}return t.boundingSphere!==null&&(i.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(i.boundingBox=t.boundingBox.clone()),i}computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}applyMatrix(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}dispose(){this.dispatchEvent({type:"dispose"})}static createBufferGeometryFromObject(t){let i=new Nt,r=t.geometry;if(t.isPoints||t.isLine){let s=new wt(r.vertices.length*3,3),l=new wt(r.colors.length*3,3);if(i.setAttribute("position",y_.call(s,r.vertices)),i.setAttribute("color",WR.call(l,r.colors)),r.lineDistances&&r.lineDistances.length===r.vertices.length){let d=new wt(r.lineDistances.length,1);i.setAttribute("lineDistance",iee.call(d,r.lineDistances))}r.boundingSphere!==null&&(i.boundingSphere=r.boundingSphere.clone()),r.boundingBox!==null&&(i.boundingBox=r.boundingBox.clone())}else t.isMesh&&(i=r.toBufferGeometry());return i}};v_.prototype.isGeometry=!0;var tee=class{constructor(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}computeGroups(t){let i=[],r,s,l,d=t.faces;for(s=0;s<d.length;s++){let c=d[s];c.materialIndex!==l&&(l=c.materialIndex,r!==void 0&&(r.count=s*3-r.start,i.push(r)),r={start:s*3,materialIndex:l})}r!==void 0&&(r.count=s*3-r.start,i.push(r)),this.groups=i}fromGeometry(t){let i=t.faces,r=t.vertices,s=t.faceVertexUvs,l=s[0]&&s[0].length>0,d=s[1]&&s[1].length>0,c=t.morphTargets,u=c.length,h;if(u>0){h=[];for(let _=0;_<u;_++)h[_]={name:c[_].name,data:[]};this.morphTargets.position=h}let f=t.morphNormals,m=f.length,p;if(m>0){p=[];for(let _=0;_<m;_++)p[_]={name:f[_].name,data:[]};this.morphTargets.normal=p}let g=t.skinIndices,v=t.skinWeights,w=g.length===r.length,x=v.length===r.length;r.length>0&&i.length===0&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(let _=0;_<i.length;_++){let k=i[_];this.vertices.push(r[k.a],r[k.b],r[k.c]);let A=k.vertexNormals;if(A.length===3)this.normals.push(A[0],A[1],A[2]);else{let M=k.normal;this.normals.push(M,M,M)}let C=k.vertexColors;if(C.length===3)this.colors.push(C[0],C[1],C[2]);else{let M=k.color;this.colors.push(M,M,M)}if(l===!0){let M=s[0][_];M!==void 0?this.uvs.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",_),this.uvs.push(new q,new q,new q))}if(d===!0){let M=s[1][_];M!==void 0?this.uvs2.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",_),this.uvs2.push(new q,new q,new q))}for(let M=0;M<u;M++){let D=c[M].vertices;h[M].data.push(D[k.a],D[k.b],D[k.c])}for(let M=0;M<m;M++){let D=f[M].vertexNormals[_];p[M].data.push(D.a,D.b,D.c)}w&&this.skinIndices.push(g[k.a],g[k.b],g[k.c]),x&&this.skinWeights.push(v[k.a],v[k.b],v[k.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),this}},dM=class{constructor(t,i,r,s,l,d=0){this.a=t,this.b=i,this.c=r,this.normal=s&&s.isVector3?s:new N,this.vertexNormals=Array.isArray(s)?s:[],this.color=l&&l.isColor?l:new _t,this.vertexColors=Array.isArray(l)?l:[],this.materialIndex=d}clone(){return new this.constructor().copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let i=0,r=t.vertexNormals.length;i<r;i++)this.vertexNormals[i]=t.vertexNormals[i].clone();for(let i=0,r=t.vertexColors.length;i<r;i++)this.vertexColors[i]=t.vertexColors[i].clone();return this}};function iee(t){return this.array.set(t),this}function WR(t){let i=this.array,r=0;for(let s=0,l=t.length;s<l;s++){let d=t[s];d===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",s),d=new _t),i[r++]=d.r,i[r++]=d.g,i[r++]=d.b}return this}function qR(t){let i=this.array,r=0;for(let s=0,l=t.length;s<l;s++){let d=t[s];d===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",s),d=new q),i[r++]=d.x,i[r++]=d.y}return this}function y_(t){let i=this.array,r=0;for(let s=0,l=t.length;s<l;s++){let d=t[s];d===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",s),d=new N),i[r++]=d.x,i[r++]=d.y,i[r++]=d.z}return this}function $R(t){let i=this.array,r=0;for(let s=0,l=t.length;s<l;s++){let d=t[s];d===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",s),d=new ri),i[r++]=d.x,i[r++]=d.y,i[r++]=d.z,i[r++]=d.w}return this}var nee=["a","b","c"];function ree(t,i){switch(i){case"c":return t.c;case"b":return t.b;case"a":default:return t.a}}function cM(t,i,r){let s=Math.min(t,i),l=Math.max(t,i),d=s+"_"+l;return r.get(d)}function uM(t,i,r,s,l,d){let c=Math.min(t,i),u=Math.max(t,i),h=c+"_"+u,f;if(s.has(h))f=s.get(h);else{let m=r[c],p=r[u];f={a:m,b:p,newEdge:null,faces:[]},s.set(h,f)}f.faces.push(l),d[t].edges.push(f),d[i].edges.push(f)}function aee(t,i,r,s){let l,d,c;for(l=0,d=t.length;l<d;l++)r[l]={edges:[]};for(l=0,d=i.length;l<d;l++)c=i[l],uM(c.a,c.b,t,s,c,r),uM(c.b,c.c,t,s,c,r),uM(c.c,c.a,t,s,c,r)}function b_(t,i,r,s,l){t.push(new dM(i,r,s,void 0,void 0,l))}function Up(t,i){return Math.abs(i-t)/2+Math.min(t,i)}function w_(t,i,r,s){t.push([i.clone(),r.clone(),s.clone()])}var see=class{constructor(t=1){this.subdivisions=t}modify(t){t instanceof Nt?t=new v_().fromBufferGeometry(t):t=t.clone(),t.mergeVertices();let i=this.subdivisions;for(;i-- >0;)this._smooth(t);return t.computeFaceNormals(),t.computeVertexNormals(),t}_smooth(t){let i=new N,r,s,l,d,c,u=t.vertices,h=t.faces,f=t.faceVertexUvs[0],m=f!==void 0&&f.length>0,p=[],g=new Map;aee(u,h,p,g);let v=[],w,x,_,k,A,C,M;for(let Pe of Array.from(g.keys())){for(x=g.get(Pe),_=new N,A=3/8,C=1/8,M=x.faces.length,M!=2&&(A=.5,C=0,M!=1),_.addVectors(x.a,x.b).multiplyScalar(A),i.set(0,0,0),d=0;d<M;d++){for(k=x.faces[d],c=0;c<3&&(w=u[ree(k,nee[c])],!(w!==x.a&&w!==x.b));c++);w&&i.add(w)}i.multiplyScalar(C),_.add(i),x.newEdge=v.length,v.push(_)}let D,P,T,O,z,L,B,j=[];for(s=0,l=u.length;s<l;s++){for(L=u[s],z=p[s].edges,r=z.length,r==3?D=3/16:r>3&&(D=3/(8*r)),P=1-r*Number(D),T=D,r<=2&&(r==2?(P=3/4,T=1/8):r==1||r==0),B=L.clone().multiplyScalar(P),i.set(0,0,0),d=0;d<r;d++)O=z[d],w=O.a!==L?O.a:O.b,i.add(w);i.multiplyScalar(Number(T)),B.add(i),j.push(B)}let V=j.concat(v),H=j.length,Y,se,re,$=[],te=[],he,oe,ee,pe,ce=new q,ve=new q,le=new q;for(s=0,l=h.length;s<l;s++)k=h[s],Y=Number(cM(k.a,k.b,g).newEdge)+H,se=Number(cM(k.b,k.c,g).newEdge)+H,re=Number(cM(k.c,k.a,g).newEdge)+H,b_($,Y,se,re,k.materialIndex),b_($,k.a,Y,re,k.materialIndex),b_($,k.b,se,Y,k.materialIndex),b_($,k.c,re,se,k.materialIndex),m&&(he=f[s],oe=he[0],ee=he[1],pe=he[2],ce.set(Up(oe.x,ee.x),Up(oe.y,ee.y)),ve.set(Up(ee.x,pe.x),Up(ee.y,pe.y)),le.set(Up(oe.x,pe.x),Up(oe.y,pe.y)),w_(te,ce,ve,le),w_(te,oe,ce,le),w_(te,ee,ve,ce),w_(te,pe,le,ve));t.vertices=V,t.faces=$,m&&(t.faceVertexUvs[0]=te)}},Pr=new N,oee=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var d,c;let r=(c=(d=t.geometry)!=null?d:i==null?void 0:i.geometry)!=null?c:new Nt().copy(new bl(100,100,100)),s;i===void 0?(r.computeBoundingBox(),r.boundingBox.getSize(Pr),s={width:Pr.x,height:Pr.y,depth:Pr.z,subdivisions:0}):s=i.parameters;let l=Z(Z({},s),t.parameters);return{parameters:{width:Math.abs(l.width),height:Math.abs(l.height),depth:Math.abs(l.depth),subdivisions:Math.abs(l.subdivisions)},geometry:r}}static build(t){var h;let{width:i,height:r,depth:s,subdivisions:l}=t.parameters,d=(h=t.geometry)!=null?h:new Nt().copy(new bl(100,100,100)),c=d.userData.parameters;c===void 0?(d.computeBoundingBox(),d.boundingBox.getSize(Pr)):Pr.set(c.width,c.height,c.depth),(i!==Pr.x||r!==Pr.y||s!==Pr.z)&&d.scale(Pr.x===0?1:i/Pr.x,Pr.y===0?1:r/Pr.y,Pr.z===0?1:s/Pr.z);let u=d.originalGeometry;try{l>0?(u===void 0||(c==null?void 0:c.subdivisions)!==l)&&(u===void 0&&(u=d),d=new see(l).modify(u).toBufferGeometry()):(u!==void 0&&(d=u),u=void 0,d.getAttribute("normal")===void 0&&d.computeVertexNormals())}catch(f){u!==void 0&&(d=u),u=void 0,d.getAttribute("normal")===void 0&&d.computeVertexNormals()}return u!==void 0&&Object.assign(d,{originalGeometry:u}),delete t.geometry,Object.assign(d,{userData:ge(Z({},t),{type:"NonParametricGeometry"})})}static loadFromUrl(t,i,r){new $P(r).load(t,s=>{let l=this.normalizeInputs({geometry:s});s.boundingBox.getSize(Pr);let d=100/Pr.x;Object.assign(l.parameters,{width:100,height:Pr.y*d,depth:Pr.z*d}),i(this.build(l))})}},ZR=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},t.parameters);return{shape:t.shape&&t.shape instanceof er?t.shape:new er,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:0)})}}static build(t){let{width:i,height:r,spikes:s,cornerRadius:l,depth:d,extrudeBevelSize:c,extrudeBevelSegments:u}=t.parameters,h=t.shape,f=i*.5,m=r*.5,p=0,g=0,v=2*Math.PI/s;for(let x=0;x<s;x++){let _=v*x,k=p+Math.sin(_)*f,A=g+Math.cos(_)*m;h.addPoint(h.createPoint(k,A))}h.isClosed=!0;for(let x=0,_=h.points.length;x<_;x++)h.points[x].roundness=l;h.roundness=l,h.update();let w=hh.create({shape:h,parameters:{roundness:l,depth:d,extrudeBevelSize:c,extrudeBevelSegments:u}});return Object.assign(w,{userData:ge(Z({},t),{type:"PolygonGeometry"})})}},lee=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},t.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:r.width)})}}static build(t){let{width:i,height:r,depth:s,radialSegments:l,heightSegments:d,openEnded:c,cornerRadius:u,cornerSegments:h}=t.parameters,f=new cee(i*.5,r,l,d,c,u,h);return f.scale(1,1,s/i),Object.assign(f,{userData:ge(Z({},t),{type:"PyramidGeometry"})})}};function m0(t,i,r){r.x=t.x*i.x,r.y=t.y,r.z=t.x*i.y}function hM(t,i,r,s,l,d){let c=i.clone().sub(t),u=r.clone().sub(t),h=c.angleTo(u);if(c.normalize(),u.normalize(),s===l){let f=c.add(u).normalize();d.copy(t).addScaledVector(f,s/Math.sin(h/2))}else{let f=c.angleTo(u);d.copy(t),d.addScaledVector(c,l/Math.sin(f)),d.addScaledVector(u,s/Math.sin(f))}}function dee(t,i,r){let s=t.clone().sub(i),l=r.clone().sub(i);return s.projectOnVector(l),s.add(i)}var cee=class extends Nt{constructor(t=.5,i=1,r=4,s=1,l=!1,d=0,c=4){super(),r=Math.floor(Math.max(3,r)),s=Math.floor(s),c=Math.floor(c);let u=[],h=[],f=[],m=[],p=0,g=i/2,v=Math.PI/r,w=t*Math.cos(Math.PI/r),x=2*Math.PI/r,_=(r-2)*Math.PI/r,k=Math.PI-_,A=new N(0,-g,0),C=new N(0,g,0),M=new q(t,-g),D=new q(w,-g),P=new q(0,C.y).sub(D),T=new q(0,C.y).sub(M),O=new q(P.y,-P.x).normalize(),z=new q(T.y,-T.x).normalize(),L=t*Math.cos(Math.PI/r)*Math.tan((Math.PI-P.angle())/2)-1e-8;d=Math.min(d,L);let B;{let $=new N(O.x,O.y,0),te=new N(Math.cos(x)*$.x,$.y,Math.sin(x)*$.x);B=$.angleTo(te)}let j=d/Math.tan((Math.PI-P.angle())/2),V=d/Math.tan((Math.PI-B)/2),H=new N;if(!l){h.push(A.x,A.y,A.z),f.push(0,-1,0),m.push(0,0);let $=p++,te=[],he=M.clone(),oe=j/Math.cos(Math.PI/r);he.x-=oe;for(let ee=0;ee<r;ee++){let pe=ee/r*Math.PI*2+v,ce=new q(Math.sin(pe),Math.cos(pe));m0(he,ce,H),h.push(H.x,H.y,H.z),f.push(0,-1,0),m.push(0,0),te.push(p++)}for(let ee=0;ee<te.length;ee++)u.push(te[ee],$,te[(ee+1)%te.length])}let Y=[];{let $=new N,te=new N,he=new N,oe=new N,ee=new N,pe=new N;for(let ce=0;ce<r;ce++){let ve=ce/r*Math.PI*2+v,le=(ce+.5)/r*Math.PI*2+v,Pe=(ce+1)/r*Math.PI*2+v,we=new q(Math.sin(ve),Math.cos(ve)),Ee=new q(Math.sin(le),Math.cos(le)),xe=new q(Math.sin(Pe),Math.cos(Pe));m0(M,we,te),m0(M,xe,he),m0(O,Ee,$),hM(C,te,he,V,V,oe),h.push(oe.x,oe.y,oe.z),hM(te,C,he,V,j,ee),h.push(ee.x,ee.y,ee.z),hM(he,te,C,j,V,pe),h.push(pe.x,pe.y,pe.z),f.push($.x,$.y,$.z),f.push($.x,$.y,$.z),f.push($.x,$.y,$.z),m.push(0,0),m.push(0,0),m.push(0,0);let Ue=p++,Le=p++,Ie=p++;if(u.push(Ue,Le,Ie),d>0){{let ot=te.clone().add(he).multiplyScalar(.5),mt=C.clone().sub(ot).normalize(),it=A.clone().sub(ot).normalize().add(mt).normalize().multiplyScalar(-1),Ke=pe.clone().sub(ee);se(ot,Ke,it,P.angle())}let rt,nt;{let ot=new N;m0(z,xe,ot);let mt=pe.clone().add(oe).multiplyScalar(.5);mt=dee(mt,he,C);let it=pe.clone().sub(oe);[rt,nt]=se(mt,it,ot,B,oe.y)}{let ot=rt,mt=ot.clone().setY(0).normalize(),it=new N(0,-1,0),Ke=mt.clone().cross(it);re(ot,mt,it,Ke)}Y.concat(nt);{let ot=P.angle(),mt=Math.PI-ot,it=C.clone();it.y-=d/Math.sin(ot-Math.PI/2);let Ke=new N,pt=[];for(let ae=0;ae<c;ae++){let Q=[],Te=Math.PI/2-mt*ae/c,Qe=Math.cos(Te),He=Math.sin(Te),et=le;for(let Ct=0;Ct<=ae;Ct++){let ct=Math.cos(et),Ge=Math.sin(et);$.x=Qe*Ge,$.y=He,$.z=Qe*ct,Ke.copy(it).addScaledVector($,d),h.push(Ke.x,Ke.y,Ke.z),f.push($.x,$.y,$.z),m.push(0,0),Q.push(p++),et+=Math.PI*2/ae/r}pt.push(Q)}nt.reverse(),pt.push(nt);let Rt=pt.length-1;for(let ae=0;ae<Rt;ae++){let Q=pt[ae],Te=pt[ae+1],Qe=Q.length-1;u.push(Te[1],Q[0],Te[0]);for(let He=1;He<=Qe;He++)u.push(Q[He],Q[He-1],Te[He]),u.push(Te[He+1],Q[He],Te[He])}}}}}this.setIndex(u),this.setAttribute("position",new wt(h,3)),this.setAttribute("normal",new wt(f,3)),this.setAttribute("uv",new wt(m,2));function se($,te,he,oe,ee){let pe=-oe/2,ce=(Math.PI-oe)/2,ve=te.clone().normalize().cross(he);$.addScaledVector(he,-d/Math.sin(ce));let le=new N,Pe=new N,we=1,Ee=p,xe=[];for(let Ue=0;Ue<=c;Ue++){let Le=pe+Ue/c*oe;Pe.set(0,0,0),Pe.addScaledVector(ve,Math.sin(Le)),Pe.addScaledVector(he,Math.cos(Le));for(let Ie=0;Ie<=we;Ie++){let rt=Ie/we-.5;if(le.copy($),le.addScaledVector(te,rt),le.addScaledVector(Pe,d),ee!=null){let nt=Math.max(0,le.y-ee);le.addScaledVector(te,-nt/te.y)}h.push(le.x,le.y,le.z),f.push(Pe.x,Pe.y,Pe.z),m.push(0,0),Ie===0&&xe.push(p),p++}}for(let Ue=0;Ue<c;Ue++)for(let Le=0;Le<we;Le++){let Ie=Ee+Le+(we+1)*Ue,rt=Ie+(we+1),nt=rt+1,ot=Ie+1;u.push(Ie,rt,ot),u.push(rt,nt,ot)}return[$.clone().addScaledVector(te,.5),xe]}function re($,te,he,oe){let ee=Math.PI/2,pe=T.angle()-ee,ce=[],ve=new N,le=new N;for(let we=0;we<=c;we++){let Ee=[],xe=we/c;for(let Ue=0;Ue<=we;Ue++){let Le=((we?Ue/we:0)-.5)*k,Ie=Math.cos(Le),rt=Math.sin(Le),nt=Math.atan(Math.tan(pe)*Ie),ot=(ee+nt)*xe,mt=Math.cos(ot),it=Math.sin(ot);ve.set(0,0,0),ve.addScaledVector(te,it*Ie),ve.addScaledVector(he,mt),ve.addScaledVector(oe,it*rt),le.copy($).addScaledVector(ve,d),h.push(le.x,le.y,le.z),f.push(ve.x,ve.y,ve.z),m.push(0,0),Ee.push(p++)}ce.push(Ee)}let Pe=ce.length-1;for(let we=0;we<Pe;we++){let Ee=ce[we],xe=ce[we+1],Ue=Ee.length-1;u.push(Ee[0],xe[1],xe[0]);for(let Le=1;Le<=Ue;Le++)u.push(Ee[Le-1],Ee[Le],xe[Le]),u.push(Ee[Le],xe[Le+1],xe[Le])}}}},YR=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var l,d,c,u;let r=Object.assign({},(l=i==null?void 0:i.parameters)!=null?l:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters),s=Object.assign((d=i==null?void 0:i.ui)!=null?d:{enabledIndieCorners:!1},t.ui);return{shape:t.shape&&t.shape instanceof er?t.shape:new er,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((c=r.height)!=null?c:r.width),depth:Math.abs((u=r.depth)!=null?u:0)}),ui:s}}static build(t){let i=t.shape,{width:r,height:s,cornerRadius:l,cornerType:d,depth:c,extrudeBevelSize:u,extrudeBevelSegments:h}=t.parameters,f={x:r*.5,y:s*.5},m={x:-f.x,y:-f.y},p={x:f.x,y:f.y};function g(M,D,P){return D>r&&P>s?Math.min(M*r/D,M*s/P):D>r?M*r/D:P>s?M*s/P:M}let v=[];v[0]=l[0]===0?0:g(l[0],l[0]+l[3],l[0]+l[1]),v[1]=l[1]===0?0:g(l[1],l[1]+l[2],l[1]+l[0]),v[2]=l[2]===0?0:g(l[2],l[2]+l[1],l[2]+l[3]),v[3]=l[3]===0?0:g(l[3],l[3]+l[0],l[3]+l[2]);let w=m.x,x=p.x,_=p.y,k=m.y;i.addPoint(i.createPoint(w,_)),i.addPoint(i.createPoint(x,_)),i.addPoint(i.createPoint(x,k)),i.addPoint(i.createPoint(w,k)),i.isClosed=!0;let A=!0;for(let M=0,D=i.points.length;M<D;M++)i.points[M].roundness=v[M],M>0&&v[M]!==v[M-1]&&(A=!1);A&&(i.roundness=v[0]),i.useCubicForRoundedCorners=d!==1,i.update();let C=hh.create({shape:i,parameters:{depth:c,extrudeBevelSize:u,extrudeBevelSegments:h}});return Object.assign(C,{userData:ge(Z({},t),{type:"RectangleGeometry"})})}},uee=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:180},t.parameters);return r.thetaLength=fe.clamp(r.thetaLength,0,180),{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:r.width)})}}static build(t){let{width:i=100,height:r=i,depth:s=i,widthSegments:l=64,heightSegments:d=64,phiStart:c,phiLength:u,thetaStart:h,thetaLength:f}=t.parameters,m;return f===0?(m=new Nt,m.setAttribute("position",new wt([],3))):m=new $A(.5*i,l,d,c,u,h,f*fe.DEG2RAD),m.scale(1,r/i,s/i),Object.assign(m,{userData:ge(Z({},t),{type:"SphereGeometry"})})}},hee=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,depth:0,widthSegments:8,heightSegments:8},t.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:0})}}static build(t){let{width:i=100,height:r=i,widthSegments:s=8,heightSegments:l=8}=t.parameters,d=new Lw(i,r,s,l);return d.scale(1,1,1),Object.assign(d,{userData:ge(Z({},t),{type:"PlaneGeometry"})})}},fee=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,angle:90,cornerRadius:24,cornerSegments:8},t.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:r.width)})}}static build(t){let{width:i,height:r,depth:s,angle:l,cornerRadius:d,cornerSegments:c}=t.parameters,u=new pee(i,r,s,l,d,c);return Object.assign(u,{userData:ge(Z({},t),{type:"BackdropGeometry"})})}},pee=class extends Nt{constructor(t=1,i=1,r=1,s=90,l=10,d=24){super(),this.type="BackdropGeometry";let c=[],u=[],h=[],f=.001;l==0&&(d=1),d=Math.max(1,Math.floor(d)),l=Math.min(l,100),s=Math.min(180-f,s),s*=Math.PI/180;let m=[],p=Math.PI/2,g=(Pe=0,we=0,Ee=0)=>new N(Pe,we,Ee),v=g(),w=g(),[x,_,k]=[i/2,t/2,r/2],A=-_,C=+_,[M,D,P]=[g(A,-x,+k),g(A,-x,-k),g(A,+x,-k)],T=(Pe,we=!1)=>Math.sin(Pe-Math.PI/(1+ +we)),O=(Pe,we=!1)=>Math.cos(Pe-Math.PI/(1+ +we));P.y=Math.sin(s)*i-x;let z=Math.cos(s)*i-k,L=M.z-f;s<=p?(P.z=Math.min(z,L),P.z==L&&(P.y-=(z-L)/Math.tan(p-s))):D.z=Math.min(D.z-z-k,M.z-f),v.subVectors(M,D),w.subVectors(P,D);let B=Math.min(v.length(),w.length())*l/100,j=B*Math.tan(s/2),V=B/Math.cos(s/2),H=v.clone().normalize().add(w.normalize()).setLength(V).add(D);v.set(0,T(s,!0),O(s,!0)),m.push([P,v.clone()]);let Y=(Math.PI-s)/d;for(let Pe=0;Pe<=d;Pe++){let we=p+s+Pe*Y;v.set(0,Math.sin(we)*j,Math.cos(we)*j),v.add(H),w.set(0,T(we),O(we)),m.push([v.clone(),w.clone()])}m.push([M,g(0,1,0)]);let se=Math.sin(Y/2)*j*2,re=m.length-1,$=m[0][0].distanceTo(m[1][0]),te=m[re-1][0].distanceTo(m[re][0]),he=$+se*d+te;m[0].push(1);for(let Pe=0;Pe<=d;Pe++)m[Pe+1].push(1-($+Pe*se)/he);m[re].push(0);let[oe,ee,pe]=m[0],ce,ve,le;for(let Pe=1;Pe<m.length;Pe++)[ce,ve,le]=m[Pe],c.push(A,oe.y,oe.z,A,ce.y,ce.z,C,oe.y,oe.z,C,oe.y,oe.z,A,ce.y,ce.z,C,ce.y,ce.z),u.push(0,ee.y,ee.z,0,ve.y,ve.z,0,ee.y,ee.z,0,ee.y,ee.z,0,ve.y,ve.z,0,ve.y,ve.z),h.push(0,pe,0,le,1,pe,1,pe,0,le,1,le),[oe,ee,pe]=[ce,ve,le];this.setAttribute("position",new wt(c,3)),this.setAttribute("normal",new wt(u,3)),this.setAttribute("uv",new wt(h,2))}},XR=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},t.parameters);return{shape:t.shape&&t.shape instanceof er?t.shape:new er,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:0)})}}static build(t){let{width:i,height:r,innerRadiusPercent:s,spikes:l,cornerRadius:d,angle:c,depth:u,extrudeBevelSize:h,extrudeBevelSegments:f}=t.parameters,m=t.shape,p=i*.5,g=r*.5,v=0,w=0,x=c*Math.PI/360/l,_=Math.PI/2*3*-1,k=p*s/100,A=g*s/100;if(l===3&&s===50){x=2*Math.PI/l;for(let M=0;M<l;M++){let D=x*M,P=v+Math.sin(D)*p,T=w+Math.cos(D)*g;m.addPoint(m.createPoint(P,T))}}else for(let M=0;M<l;M++){let D=v+Math.cos(_)*p,P=w+Math.sin(_)*g;m.addPoint(m.createPoint(D,P)),_+=x,D=v+Math.cos(_)*k,P=w+Math.sin(_)*A,M<=l,m.addPoint(m.createPoint(D,P)),_+=x}m.isClosed=!0;for(let M=0,D=m.points.length;M<D;M++)m.points[M].roundness=d;m.roundness=d,m.update();let C=hh.create({shape:m,parameters:{roundness:d,depth:u,extrudeBevelSize:h,extrudeBevelSegments:f}});return Object.assign(C,{userData:ge(Z({},t),{type:"StarGeometry"})})}},mee=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,depth:0},t.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:0)})}}static build(t){let{width:i,height:r}=t.parameters,s=new Lw(i,r);return Object.assign(s,{userData:ge(Z({},t),{type:"TextFrameGeometry"})})}},gee=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var c,u,h;let r=Object.assign({},(c=i==null?void 0:i.parameters)!=null?c:{width:100,radialSegments:32,tubularSegments:64,arc:360,cornerRadius:30,cornerSegments:8},t.parameters),s=Math.abs(r.width),l=Math.abs((u=r.height)!=null?u:r.width),d=Math.round(Math.abs((h=r.depth)!=null?h:r.width*.25));return{parameters:Object.assign(r,{width:s,height:l,depth:d})}}static build(t){let{width:i,height:r,depth:s,radialSegments:l,tubularSegments:d,arc:c,cornerRadius:u,cornerSegments:h}=t.parameters,f=vee(i,r,s,i*.5,c,d,0,0,l,u,h);return f.scale(1,r/i,1),Object.assign(f,{userData:ge(Z({},t),{type:"TorusGeometry"})})}};function vee(t,i,r,s,l,d,c,u,h,f,m){[i,r]=[r,i],c=i/2;let p=fe.clamp(l/360,0,1);if(p===0){let g=new Nt;return g.setAttribute("position",new wt([],3)),g}return p===1&&(f=0),new HR(!0,t,i,r,s,p,d,c,u,h,f,m)}var yee=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d,c;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},t.parameters);return{parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width),depth:Math.abs((d=r.depth)!=null?d:r.width),tube:(c=r.tube)!=null?c:r.width*.125})}}static build(t){let{width:i,tube:r,tubularSegments:s,radialSegments:l,p:d,q:c}=t.parameters,u=i*.5;u!==r&&(u-=r);let h=new zP(u,r,s,l,d,c);return Object.assign(h,{userData:ge(Z({},t),{type:"TorusKnotGeometry"})})}},bee=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var s,l,d;let r=Object.assign({},(s=i==null?void 0:i.parameters)!=null?s:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},t.parameters);return{shape:t.shape&&t.shape instanceof er?t.shape:new er,parameters:Object.assign(r,{width:Math.abs(r.width),height:Math.abs((l=r.height)!=null?l:r.width*(r.isRect?1:Math.sqrt(3)/2)),depth:Math.abs((d=r.depth)!=null?d:0)})}}static build(t){let{width:i=100,height:r,cornerRadius:s,depth:l,extrudeBevelSize:d,extrudeBevelSegments:c,isRect:u}=t.parameters,h=t.shape,f=i*.5,m=r*.5;u?(h.addPoint(h.createPoint(-f,m)),h.addPoint(h.createPoint(f,-m)),h.addPoint(h.createPoint(-f,-m))):(h.addPoint(h.createPoint(0,m)),h.addPoint(h.createPoint(f,-m)),h.addPoint(h.createPoint(-f,-m))),h.isClosed=!0;for(let g=0,v=h.points.length;g<v;g++)h.points[g].roundness=s;h.roundness=s,h.update();let p=hh.create({shape:h,parameters:{roundness:s,depth:l,extrudeBevelSize:d,extrudeBevelSegments:c}});return Object.assign(p,{userData:ge(Z({},t),{type:"TriangleGeometry"})})}};function wee(t,i){let r=2*Math.PI;return(t%r+r)%r===(i%r+r)%r}var xee=class{add(t,i,r){if(typeof arguments[0]!="string")for(let s in arguments[0])this.add(s,arguments[0][s],arguments[1]);else(Array.isArray(t)?t:[t]).forEach(function(s){this[s]=this[s]||[],i&&this[s][r?"unshift":"push"](i)},this)}run(t,i){this[t]=this[t]||[],this[t].forEach(function(r){r.call(i&&i.context?i.context:i,i)})}},_ee=class{constructor(t){this.jsep=t,this.registered={}}register(...t){t.forEach(i=>{if(typeof i!="object"||!i.name||!i.init)throw new Error("Invalid JSEP plugin format");this.registered[i.name]||(i.init(this.jsep),this.registered[i.name]=i)})}},je=class{static get version(){return"1.3.8"}static toString(){return"JavaScript Expression Parser (JSEP) v"+je.version}static addUnaryOp(t){return je.max_unop_len=Math.max(t.length,je.max_unop_len),je.unary_ops[t]=1,je}static addBinaryOp(t,i,r){return je.max_binop_len=Math.max(t.length,je.max_binop_len),je.binary_ops[t]=i,r?je.right_associative.add(t):je.right_associative.delete(t),je}static addIdentifierChar(t){return je.additional_identifier_chars.add(t),je}static addLiteral(t,i){return je.literals[t]=i,je}static removeUnaryOp(t){return delete je.unary_ops[t],t.length===je.max_unop_len&&(je.max_unop_len=je.getMaxKeyLen(je.unary_ops)),je}static removeAllUnaryOps(){return je.unary_ops={},je.max_unop_len=0,je}static removeIdentifierChar(t){return je.additional_identifier_chars.delete(t),je}static removeBinaryOp(t){return delete je.binary_ops[t],t.length===je.max_binop_len&&(je.max_binop_len=je.getMaxKeyLen(je.binary_ops)),je.right_associative.delete(t),je}static removeAllBinaryOps(){return je.binary_ops={},je.max_binop_len=0,je}static removeLiteral(t){return delete je.literals[t],je}static removeAllLiterals(){return je.literals={},je}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new je(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map(i=>i.length))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return je.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!je.binary_ops[String.fromCharCode(t)]||je.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return je.isIdentifierStart(t)||je.isDecimalDigit(t)}throwError(t){let i=new Error(t+" at character "+this.index);throw i.index=this.index,i.description=t,i}runHook(t,i){if(je.hooks[t]){let r={context:this,node:i};return je.hooks.run(t,r),r.node}return i}searchHook(t){if(je.hooks[t]){let i={context:this};return je.hooks[t].find(function(r){return r.call(i.context,i),i.node}),i.node}}gobbleSpaces(){let t=this.code;for(;t===je.SPACE_CODE||t===je.TAB_CODE||t===je.LF_CODE||t===je.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");let t=this.gobbleExpressions(),i=t.length===1?t[0]:{type:je.COMPOUND,body:t};return this.runHook("after-all",i)}gobbleExpressions(t){let i=[],r,s;for(;this.index<this.expr.length;)if(r=this.code,r===je.SEMCOL_CODE||r===je.COMMA_CODE)this.index++;else if(s=this.gobbleExpression())i.push(s);else if(this.index<this.expr.length){if(r===t)break;this.throwError('Unexpected "'+this.char+'"')}return i}gobbleExpression(){let t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,je.max_binop_len),i=t.length;for(;i>0;){if(je.binary_ops.hasOwnProperty(t)&&(!je.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!je.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=i,t;t=t.substr(0,--i)}return!1}gobbleBinaryExpression(){let t,i,r,s,l,d,c,u,h;if(d=this.gobbleToken(),!d||(i=this.gobbleBinaryOp(),!i))return d;for(l={value:i,prec:je.binaryPrecedence(i),right_a:je.right_associative.has(i)},c=this.gobbleToken(),c||this.throwError("Expected expression after "+i),s=[d,l,c];i=this.gobbleBinaryOp();){if(r=je.binaryPrecedence(i),r===0){this.index-=i.length;break}l={value:i,prec:r,right_a:je.right_associative.has(i)},h=i;let f=m=>l.right_a&&m.right_a?r>m.prec:r<=m.prec;for(;s.length>2&&f(s[s.length-2]);)c=s.pop(),i=s.pop().value,d=s.pop(),t={type:je.BINARY_EXP,operator:i,left:d,right:c},s.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+h),s.push(l,t)}for(u=s.length-1,t=s[u];u>1;)t={type:je.BINARY_EXP,operator:s[u-1].value,left:s[u-2],right:t},u-=2;return t}gobbleToken(){let t,i,r,s;if(this.gobbleSpaces(),s=this.searchHook("gobble-token"),s)return this.runHook("after-token",s);if(t=this.code,je.isDecimalDigit(t)||t===je.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===je.SQUOTE_CODE||t===je.DQUOTE_CODE)s=this.gobbleStringLiteral();else if(t===je.OBRACK_CODE)s=this.gobbleArray();else{for(i=this.expr.substr(this.index,je.max_unop_len),r=i.length;r>0;){if(je.unary_ops.hasOwnProperty(i)&&(!je.isIdentifierStart(this.code)||this.index+i.length<this.expr.length&&!je.isIdentifierPart(this.expr.charCodeAt(this.index+i.length)))){this.index+=r;let l=this.gobbleToken();return l||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:je.UNARY_EXP,operator:i,argument:l,prefix:!0})}i=i.substr(0,--r)}je.isIdentifierStart(t)?(s=this.gobbleIdentifier(),je.literals.hasOwnProperty(s.name)?s={type:je.LITERAL,value:je.literals[s.name],raw:s.name}:s.name===je.this_str&&(s={type:je.THIS_EXP})):t===je.OPAREN_CODE&&(s=this.gobbleGroup())}return s?(s=this.gobbleTokenProperty(s),this.runHook("after-token",s)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let i=this.code;for(;i===je.PERIOD_CODE||i===je.OBRACK_CODE||i===je.OPAREN_CODE||i===je.QUMARK_CODE;){let r;if(i===je.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==je.PERIOD_CODE)break;r=!0,this.index+=2,this.gobbleSpaces(),i=this.code}this.index++,i===je.OBRACK_CODE?(t={type:je.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()},this.gobbleSpaces(),i=this.code,i!==je.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):i===je.OPAREN_CODE?t={type:je.CALL_EXP,arguments:this.gobbleArguments(je.CPAREN_CODE),callee:t}:(i===je.PERIOD_CODE||r)&&(r&&this.index--,this.gobbleSpaces(),t={type:je.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),r&&(t.optional=!0),this.gobbleSpaces(),i=this.code}return t}gobbleNumericLiteral(){let t="",i,r;for(;je.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(this.code===je.PERIOD_CODE)for(t+=this.expr.charAt(this.index++);je.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);if(i=this.char,i==="e"||i==="E"){for(t+=this.expr.charAt(this.index++),i=this.char,(i==="+"||i==="-")&&(t+=this.expr.charAt(this.index++));je.isDecimalDigit(this.code);)t+=this.expr.charAt(this.index++);je.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+t+this.char+")")}return r=this.code,je.isIdentifierStart(r)?this.throwError("Variable names cannot start with a number ("+t+this.char+")"):(r===je.PERIOD_CODE||t.length===1&&t.charCodeAt(0)===je.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:je.LITERAL,value:parseFloat(t),raw:t}}gobbleStringLiteral(){let t="",i=this.index,r=this.expr.charAt(this.index++),s=!1;for(;this.index<this.expr.length;){let l=this.expr.charAt(this.index++);if(l===r){s=!0;break}else if(l==="\\")switch(l=this.expr.charAt(this.index++),l){case"n":t+=`
`;break;case"r":t+="\r";break;case"t":t+="	";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=l}else t+=l}return s||this.throwError('Unclosed quote after "'+t+'"'),{type:je.LITERAL,value:t,raw:this.expr.substring(i,this.index)}}gobbleIdentifier(){let t=this.code,i=this.index;for(je.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,je.isIdentifierPart(t));)this.index++;return{type:je.IDENTIFIER,name:this.expr.slice(i,this.index)}}gobbleArguments(t){let i=[],r=!1,s=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let l=this.code;if(l===t){r=!0,this.index++,t===je.CPAREN_CODE&&s&&s>=i.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}else if(l===je.COMMA_CODE){if(this.index++,s++,s!==i.length){if(t===je.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===je.CBRACK_CODE)for(let d=i.length;d<s;d++)i.push(null)}}else if(i.length!==s&&s!==0)this.throwError("Expected comma");else{let d=this.gobbleExpression();(!d||d.type===je.COMPOUND)&&this.throwError("Expected comma"),i.push(d)}}return r||this.throwError("Expected "+String.fromCharCode(t)),i}gobbleGroup(){this.index++;let t=this.gobbleExpressions(je.CPAREN_CODE);if(this.code===je.CPAREN_CODE)return this.index++,t.length===1?t[0]:t.length?{type:je.SEQUENCE_EXP,expressions:t}:!1;this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:je.ARRAY_EXP,elements:this.gobbleArguments(je.CBRACK_CODE)}}},kee=new xee;Object.assign(je,{hooks:kee,plugins:new _ee(je),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10},right_associative:new Set,additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),je.max_unop_len=je.getMaxKeyLen(je.unary_ops),je.max_binop_len=je.getMaxKeyLen(je.binary_ops);var Vp=t=>new je(t).parse(),See=Object.getOwnPropertyNames(je);See.forEach(t=>{Vp[t]===void 0&&t!=="prototype"&&(Vp[t]=je[t])}),Vp.Jsep=je;var Aee="ConditionalExpression",Cee={name:"ternary",init(t){t.hooks.add("after-expression",function(i){if(i.node&&this.code===t.QUMARK_CODE){this.index++;let r=i.node,s=this.gobbleExpression();if(s||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===t.COLON_CODE){this.index++;let l=this.gobbleExpression();if(l||this.throwError("Expected expression"),i.node={type:Aee,test:r,consequent:s,alternate:l},r.operator&&t.binary_ops[r.operator]<=.9){let d=r;for(;d.right.operator&&t.binary_ops[d.right.operator]<=.9;)d=d.right;i.node.test=d.right,d.right=i.node,i.node=r}}else this.throwError("Expected :")}})}};Vp.plugins.register(Cee);var Eee=["+","-","*","/","(",")","==","!=",">","<",">=","<=","and","or","!","%","^",","],Mee=["0","1","2","3","4","5","6","7","8","9","."],Tee=["sin","cos","tan","asin","acos","atan","atan2","sqrt","abs","log","exp","floor","ceil","round","min","max","random"];function Dee(t){return typeof t!="string"?!1:!isNaN(t)&&!isNaN(parseFloat(t))}Vp.addBinaryOp("^",11,!0);function KR(t,i,r="number"){let s="";for(let c=0;c<t.length;c++){let u=t[c];if("id"in u){let h=t[c-1];if(c>0&&"id"in h){console.error("Two variables in a row",t);return}let f=i.getVariable(u.id),m=zs.getDisplayedValue(f);r==="number"&&zs.isTextValue(f)&&Array.isArray(f.textValue)&&f.textValue.length===1?m=parseFloat(m).toString():r==="boolean"&&zs.isBoolean(f)?m=f?"true":"false":r==="boolean"&&zs.isTextValue(f)&&!Array.isArray(f.textValue)&&(m='"'+m+'"'),s+=m;continue}else if(r==="string"){u.name!=='"'&&u.name!=="+"&&(s+=u.name),u.name==="+"&&s[s.length-1]==="\\"&&(s=s.slice(0,-1)+u.name);continue}if(u.name==="and"){s+="&&";continue}if(u.name==="or"){s+="||";continue}if(u.name==="True"){s+="true";continue}if(u.name==="False"){s+="false";continue}if(r==="boolean"&&!Dee(u.name)&&!Mee.includes(u.name)&&!Eee.includes(u.name)&&!Tee.includes(u.name.replace(/\($/g,""))){s+='"'+u.name+'"';continue}s+=u.name}if(r==="string")return s;if(t.length===0){if(r==="number")return 0;if(r==="boolean")return!1}let l;try{l=Vp(s)}catch(c){console.error(s,c);return}let d;try{d=Vi(l)}catch(c){console.error(s,l,c)}return d}function Vi(t){switch(t.type){case"BinaryExpression":switch(t.operator){case"==":return+(Vi(t.left)===Vi(t.right));case"!=":return+(Vi(t.left)!==Vi(t.right));case">":return+(Vi(t.left)>Vi(t.right));case">=":return+(Vi(t.left)>=Vi(t.right));case"<":return+(Vi(t.left)<Vi(t.right));case"<=":return+(Vi(t.left)<=Vi(t.right));case"+":return Vi(t.left)+Vi(t.right);case"-":return Vi(t.left)-Vi(t.right);case"*":return Vi(t.left)*Vi(t.right);case"/":return Vi(t.left)/Vi(t.right);case"%":return Vi(t.left)%Vi(t.right);case"&&":return Vi(t.left)&&Vi(t.right);case"||":return Vi(t.left)||Vi(t.right);case"^":return Math.pow(Vi(t.left),Vi(t.right));default:throw new Error("Unknown operator: "+t.operator)}case"UnaryExpression":switch(t.operator){case"-":return-Vi(t.argument);case"!":return+!Vi(t.argument);default:throw new Error("Unknown operator: "+t.operator)}case"Identifier":throw new Error("Unknown identifier: "+t.name);case"Literal":return t.value;case"CallExpression":if(t.callee.type==="Identifier"){if(t.callee.name==="random"){let i=0,r=1;if(t.arguments.length>=1)try{i=Vi(t.arguments[0])}catch(s){console.warn(s)}if(t.arguments.length>=2)try{r=Vi(t.arguments[1])}catch(s){console.warn(s)}return i=Math.min(r,i),r=Math.max(r,i),i+Math.random()*(r-i)}return Math[t.callee.name].apply(null,t.arguments.map(Vi))}else throw new Error("Unknown node");default:throw new Error("Unknown node type: "+t.type)}}var Pee=new Ze,Oee=new Ze;function Iee(t,i,r){let s=[new N,new N,new N],l=[new N,new N,new N];return t.extractBasis(s[0],s[1],s[2]),i.extractBasis(l[0],l[1],l[2]),s.forEach((d,c)=>{let u=l[c],h=fe.lerp(d.length(),u.length(),r);d.lerp(u,r).setLength(h)}),new Ze().makeBasis(s[0],s[1],s[2])}var Ree=class{static create(t){return this.build(this.normalizeInputs(t))}static normalizeInputs(t,i){var u,h,f,m,p;let r=Object.assign({},(u=i==null?void 0:i.parameters)!=null?u:{width:100,height:100,depth:1,subdivisions:12,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},t.parameters),s=Math.abs(r.width),l=Math.abs((h=r.height)!=null?h:r.width),d=Math.abs((f=r.depth)!=null?f:0),c=(m=i==null?void 0:i.shapeData)!=null?m:sM.create({parameters:OI}).userData.shape;return{path:(p=t.path)!=null?p:qx.defaultData(),parameters:Object.assign(r,{width:s,height:l,depth:d,extrusion:Z(Z({},II),r.extrusion)}),shapeData:c}}static build(t){if(t.path.points.length>=2){let i=new zee(t);return Object.assign(i,{userData:ge(Z({},t),{type:"PathGeometry"})})}else return Object.assign(new Nt,{userData:ge(Z({},t),{type:"PathGeometry"})})}},zee=class extends Nt{constructor(t){super(),this.type="PathExtrusionGeometry",this.inputs=t,this.build()}_isGeometryClosed(){return this.inputs.path.isClosed&&this.inputs.parameters.extrusion.depth===1}_isOpenEnded(){let t=this.inputs.parameters.extrusion;return!(this.inputs.path.isClosed&&t.depth===1)||!wee(t.twist,0)||t.startScale!==t.endScale}build(){let t=this._extractPathPoints();if(t.length<2)return;let i=this._computeBasisMatrices(t),{depth:r,offset:s}=this.inputs.parameters.extrusion;r=Math.max(0,Math.min(r,1)),s=Math.max(0,Math.min(s,1));let l=this.inputs.path.isClosed?t.length:t.length-1,d=Math.floor(s*l),c=this.inputs.path.isClosed?Math.ceil((r+s)*l):Math.ceil(Math.min(1,r+s)*l),u=Math.min(Math.max(2,c-d+1),l+2),h=[],f=[];for(let re=0;re<u;re++){let $=this.inputs.path.isClosed?(re+d)%t.length:Math.min(re+d,t.length-1);h.push(t[$].clone()),f.push(i[$].clone())}let m=(re,$,te)=>{h[re]=h[re].clone().lerp(h[$],te),f[re]=Iee(f[re],f[$],te)},p=0,g=s*l%1;(!this.inputs.path.isClosed||r<=1)&&(g||s===0)&&(p=g,m(0,1,p));let v=0,w=(s+r)*l%1;if((this.inputs.path.isClosed&&r<=1||!this.inputs.path.isClosed&&s+r<1)&&w&&(v=w,m(h.length-1,h.length-2,1-v)),r===0){let re=h.length-1;h[re].copy(h[0]),f[re].copy(f[0])}this._applyPathModifiers(f,p,v);let{bevel:x,bevelSides:_}=this.inputs.parameters.extrusion,k=x>0?this.inputs.parameters.extrusion.capType:"flat",A=5;this.inputs.parameters.extrusion.shape.type==="Custom"&&(A=this.inputs.parameters.extrusion.shape.shapeQuality==="low"?5:12);let{regions:C,infos:M,vertices:D}=this._computeShapePoints(A),P=0,T;k==="round"&&(T=new aM(this.inputs.shapeData,2*x,x,A,_,void 0,!0),P=T.getAttribute("position").count);let O=0,z=0;M.sort((re,$)=>re.start-$.start),M.forEach(re=>{re.verticesStart=O,re.verticesCount=re.continuous.reduce(($,te,he)=>$+(he===0||!te?2:1),0),z+=re.verticesCount,O=z});let L=z*u,B,j=0;if(this._isOpenEnded()&&k==="flat"){try{B=$c({windingRule:dn.ODD,elementType:br.POLYGONS,polySize:3,vertexSize:2,strict:!0,contours:C})}catch(re){B=zR}j=B.vertexCount}let V=L+2*j+P*2,H=L+2*j,Y={positions:new Float32Array(V*3),normals:new Float32Array(V*3),uvs:new Float32Array(V*2)},se=[];if(M.forEach(re=>{this._extrudeRegion(re,D,f,h,Y,se,this._isGeometryClosed()&&!this._isOpenEnded())}),B&&(this._closeEnd(B,L,se,Y,f[0],h[0],!1),this._closeEnd(B,L+j,se,Y,f[f.length-1],h[h.length-1],!0)),T){Y.positions.set(T.getAttribute("position").array,H*3),Y.normals.set(T.getAttribute("normal").array,H*3),Y.uvs.set(T.getAttribute("uv").array,H*2);let re=se.length;se.push(...T.getIndex().array.map(he=>he+H)),H+=P,Y.positions.set(T.getAttribute("position").array,H*3),Y.normals.set(T.getAttribute("normal").array,H*3),Y.uvs.set(T.getAttribute("uv").array,H*2);let $=se.length;se.push(...T.getIndex().array.map(he=>he+H)),this.setAttribute("position",new Qt(Y.positions,3)),this.setAttribute("normal",new Qt(Y.normals,3)),this.setAttribute("uv",new Qt(Y.uvs,2)),this.setIndex(se);let te=Pee;te.copy(f[f.length-1]).setPosition(h[h.length-1]),this.applyMatrix4OnRange(te,H,V),te.copy(f[0]).setPosition(h[0]).multiply(Oee.makeScale(1,1,-1)),this.applyMatrix4OnRange(te,H-P,H),this.reverseIndicesOnRange(re,$)}else this.setAttribute("position",new Qt(Y.positions,3)),this.setAttribute("normal",new Qt(Y.normals,3)),this.setAttribute("uv",new Qt(Y.uvs,2)),this.setIndex(se)}_extractPathPoints(){let t=gR(this.inputs.path).getPoints(this.inputs.path.subdivisions);if(t.length<2)return[];let i=[t[0]];return t.forEach(r=>{i[i.length-1].distanceToSquared(r)>.001&&i.push(r)}),this.inputs.path.isClosed&&i[i.length-1].distanceTo(i[0])<.001&&i.pop(),i}_computeBasisMatrices(t){let i=[],r=t.length,s=this.inputs.path.isClosed,l=new N,d=new N,c=new N,u=new N,h=new N(0,1,0);for(let w=0;w<r;w++){let x=t[w],_;w===0?_=s?t[t.length-2]:x.clone().multiplyScalar(2).sub(t[1]):_=t[w-1];let k;w===r-1?k=s?t[1]:x.clone().multiplyScalar(2).sub(t[w-1]):k=t[w+1];let A=x.clone().sub(_).normalize(),C=k.clone().sub(x).normalize(),M=A.clone().add(C).normalize();c.copy(M),w===0&&(M.equals(h)||M.clone().negate().equals(h))&&h.set(0,0,1);let D=h.clone().cross(M).normalize(),P=M.clone().cross(D).normalize();h.copy(P),u.copy(D),w===0&&(l.copy(P),d.copy(M));let T=new Ze().makeBasis(D,P,M);i.push(T)}let f=s?d:c,m=s?l:new N(0,1,0),p=f.clone().cross(u).normalize(),g=Math.acos(m.dot(p));if(isNaN(g))return i;let v=m.clone().cross(p);f.dot(v)>0&&(g*=-1);for(let w=1;w<i.length;w++){let x=new Ze().makeRotationZ(g*w/i.length);i[w].multiply(x)}return i}_applyPathModifiers(t,i,r){let s=t.length,{angle:l,twist:d,startScale:c,endScale:u}=this.inputs.parameters.extrusion,h=new Ze,f=new Ze;return t.forEach((m,p)=>{let g=p===0?0:p===s-1?1:(p-i)/(s-(r===0?0:1)-(i+(1-r)));h.makeRotationZ(fe.lerp(l,l+d,g)*fe.DEG2RAD);let v=fe.lerp(c,u,g);f.makeScale(v,v,v),m.multiply(h).multiply(f)}),t}_computeShapePoints(t=12,i=dn.ODD){let r=this.inputs.shapeData,s=r.extractShapePointsToFlatArray([],t),l=r.shapeHoles.map(v=>{let w=v.extractShapePointsToFlatArray([],t),x=[];for(let _=w.length-1;_>=1;_-=2){let k=w[_-1],A=w[_-0];x.push(k,A)}return x}),d;try{d=$c({windingRule:i,elementType:br.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[s]})}catch(v){d=nM}let c;try{c=$c({windingRule:dn.ODD,elementType:br.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[...l]})}catch(v){c=RR}if(!d)throw new Error("error generating geometry");let u=d.elementCount;if(c){d.elementCount+=c.elementCount;for(let v=0;v<c.elements.length;v++){let w=c.elements[v],x=v%2===0?d.vertexCount:0;d.elements.push(w+x)}for(let v=0;v<c.vertexIndices.length;v++){let w=c.vertexIndices[v],x=d.vertexCount;d.vertexIndices.push(w+x)}for(let v=0;v<c.vertices.length;v++){let w=c.vertices[v];d.vertices.push(w)}}let h=1/0,f=-1/0,m=1/0,p=-1/0;for(let v=0,w=d.vertexCount;v<w;v++){let x=v*2,_=d.vertices[x+0],k=d.vertices[x+1];_<h&&(h=_),_>f&&(f=_),k<m&&(m=k),k>p&&(p=k)}let g=[];for(let v=d.elementCount-1;v>=0;v--){let w=v>=u,x=v*2,_=d.elements[x+0],k=d.elements[x+1],A=_+k,C={start:_,count:k,normals:[],isHole:w,continuous:[],verticesStart:0,verticesCount:0};g.push(C);let M=_,D=A-1,P=_+1,T=r.roundedCurves.length;do{let O=M-_,z=d.vertices[D*2+0],L=d.vertices[D*2+1],B=d.vertices[M*2+0],j=d.vertices[M*2+1],V=d.vertices[P*2+0],H=d.vertices[P*2+1],Y=B-z,se=j-L,re=Math.sqrt(Y*Y+se*se);Y/=re,se/=re;let $=B-V,te=j-H,he=Math.sqrt($*$+te*te);$/=he,te/=he,C.normals[O*2+0]=-te,C.normals[O*2+1]=$;let oe=d.vertexIndices[M];if(Array.isArray(oe))C.continuous[O]=!1;else{let[ee,pe]=r.getCurveIndexFromVertexId(oe-1,!0);if(pe>0&&pe<1)C.continuous[O]=!0;else{let ce=pe===1?ee+1:ee-1;ce=(ce+T)%T;let ve=pe===1?0:1,le=r.roundedCurves[ee].getTangent(pe),Pe=r.roundedCurves[ce].getTangent(ve);C.continuous[O]=le.dot(Pe)>.95}}w&&(C.normals[O*2+0]*=-1,C.normals[O*2+1]*=-1),[D,M,P]=[M,P,P+1],P>=A&&(P-=k)}while(P!==_+1)}return{regions:[s,...l],infos:g,vertices:d.vertices}}_insertVertex(t,i,r,s,l){let d=i*2,c=i*3;t.positions[c+0]=r.x,t.positions[c+1]=r.y,t.positions[c+2]=r.z,t.normals[c+0]=s.x,t.normals[c+1]=s.y,t.normals[c+2]=s.z,t.uvs[d+0]=l.x,t.uvs[d+1]=l.y}_extrudeRegion(t,i,r,s,l,d,c){let u=new N,h=new N,f=new N,m=new N,p=new q;r.forEach((v,w)=>{let x=s[w],_=t.verticesStart*r.length+t.verticesCount*w;for(let k=0;k<t.count;k++){let A=(t.start+k)*2;if(u.set(i[A+0],i[A+1],0),f.copy(u).applyMatrix4(v).add(x),t.continuous[k])m.set(t.normals[k*2+0],t.normals[k*2+1],0);else{let C=k===0?(t.start+t.count-1)*2:A-2;h.set(i[C+0],i[C+1],0),m.copy(u).sub(h),m.set(-m.y,m.x,0),t.isHole||m.negate()}if(m.applyMatrix4(v).normalize(),p.set(k===0?1:k/t.count,w/(r.length-1)),this._insertVertex(l,_,f,m,p),_++,!t.continuous[k]||k===0){if(k===0)m.set(t.normals[k*2+0],t.normals[k*2+1],0),p.set(0,w/(r.length-1));else{let C=k===t.count-1?t.start*2:A+2;h.set(i[C+0],i[C+1],0),m.copy(h).sub(u),m.set(-m.y,m.x,0),t.isHole||m.negate()}m.applyMatrix4(v).normalize(),this._insertVertex(l,_,f,m,p),_++}}});let g=r.length-1;for(let v=0;v<g;v++){let w=t.verticesStart*r.length+t.verticesCount*v,x=t.verticesStart*r.length+t.verticesCount*(v+1),_=0;for(let k=0;k<t.count;k++){(!t.continuous[k]||k===0)&&_++;let A=k===t.count-1?0:_+1,C=w+_,M=w+A,D=x+A,P=x+_;t.isHole?d.push(C,D,M,C,P,D):d.push(C,M,D,C,D,P),_++}}}_closeEnd(t,i,r,s,l,d,c){let u=t.vertexCount,h=new N(0,0,c?-1:1).applyMatrix4(l),f=new N,m=new q;for(let g=0;g<u;g++){let v=2*g;f.set(t.vertices[v+0],t.vertices[v+1],0).applyMatrix4(l).add(d),this._insertVertex(s,i+g,f,h,m)}let p=t.elements;for(let g=0;g<t.elementCount;g++){let v=3*g,w=p[v+0]+i,x=p[v+(c?1:2)]+i,_=p[v+(c?2:1)]+i;r.push(w,x,_)}}applyMatrix4OnRange(t,i,r){let s=t.elements,l=new Me().getNormalMatrix(t).elements,d,c,u,h,f=this.attributes.position,m=this.attributes.normal;if(!f||!m)return;let p=f.array,g=m.array,v=f.itemSize;for(let w=i*v,x=r*v;w<x;w+=v){if(w===i)debugger;d=p[w+0],c=p[w+1],u=p[w+2],h=1/(s[3]*d+s[7]*c+s[11]*u+s[15]),p[w+0]=(s[0]*d+s[4]*c+s[8]*u+s[12])*h,p[w+1]=(s[1]*d+s[5]*c+s[9]*u+s[13])*h,p[w+2]=(s[2]*d+s[6]*c+s[10]*u+s[14])*h,d=g[w+0],c=g[w+1],u=g[w+2],g[w+0]=l[0]*d+l[3]*c+l[6]*u,g[w+1]=l[1]*d+l[4]*c+l[7]*u,g[w+2]=l[2]*d+l[5]*c+l[8]*u}f.needsUpdate=!0,m.needsUpdate=!0}reverseIndicesOnRange(t,i){let r=this.index;if(r){for(let s=t;s<i;s+=3){let l=r.getX(s),d=r.getX(s+1),c=r.getX(s+2);r.setXYZ(s,c,d,l)}r.needsUpdate=!0}}};function QR(){let t=new Nt;return t.setAttribute("position",new Qt(new Float32Array([]),3)),t.setIndex(new Qt(new Uint16Array([]),1)),t}var Lee=QR().attributes,Bee=12,Fee=1,JR=class extends Nt{constructor(t,i){super(),this.charWidths=[],this.charCoords=[],this.wrappedText=[],this.isLowResolution=!1,this.vectorShapes=[],Object.assign(this.attributes,Lee),this.userData={parameters:t,type:"TextGeometry"};let r=i.getFont(t.font);r!=null&&r.isLoaded?(this.font=r,this.update(t)):this.updateFont(t.font,i).then(()=>{this.update(t),i==null||i.requestRender()})}updateFont(t,i){return qi(this,null,function*(){let r=i.getFont(t);r&&(this.font=r,yield r.loadingPromise)})}update(t){let i=this.font;if(this.userData={parameters:t,type:"TextGeometry"},!(i!=null&&i.isLoaded)){console.warn("Cannot update text because its font is not loaded");return}let{width:r,height:s,depth:l,extrudeBevelSize:d,extrudeBevelSegments:c,text:u,textTransform:h}=t,f=zs.getDisplayedValue(u),m=h===2?f.toUpperCase():h===3?f.toLowerCase():f,p=Nee(t,i,m),{shapes:g,charWidths:v,charCoords:w}=i.generateShapes(p,t),x=(typeof r=="number"?r:1)*.5,_=(typeof s=="number"?s:1)*.5,k=g.map(M=>new er().fromShape(M,!0));this.vectorShapes=k;let A=k.map(M=>hh.create({shape:M,parameters:{depth:l,extrudeBevelSegments:c,extrudeBevelSize:d,windingRule:l<=0?dn.NONZERO:dn.ODD,subdivisions:this.isLowResolution&&l>0?Fee:Bee}})),C=A.length?oh(A):QR();C.translate(-x,_,0),this.dispose(),this.wrappedText=p,this.charCoords=w,this.charWidths=v,this.deleteAttribute("extrudeNormal"),Object.entries(C.attributes).forEach(([M,D])=>{this.setAttribute(M,D)}),this.setIndex(C.index),this.computeBoundingSphere()}clone(){let t=Ad(new Nt,JR.prototype);return t.copy(this),console.log("CloneGeometry",this,t),t}copy(t){return Object.entries(t.attributes).forEach(([i,r])=>{this.setAttribute(i,r)}),this.setIndex(t.index),this.userData={parameters:Z({},t.userData.parameters),type:"TextGeometry"},this}setText(t){return qi(this,null,function*(){this.font&&(yield this.font.loadingPromise),yield this.update(ge(Z({},this.userData.parameters),{text:t}))})}get text(){var t;return(t=this.userData.parameters.text)!=null?t:""}};function Nee(t,i,r){let s=[""],l="";for(let d of r)l+=d,d===" "||d===`
`?(s[s.length-1]+=l,l="",d===`
`&&s.push("")):i.getTextWidth(s[s.length-1]+l,t)>t.width&&(s[s.length-1].length&&s.push(""),i.getTextWidth(s[s.length-1]+l,t)>t.width&&(l.length===1?(s[s.length-1]+=l,l=""):(s[s.length-1]+=l.slice(0,-1),l=l[l.length-1],s.push(""))));return s[s.length-1]+=l,s}var e5,fM=new Promise(t=>{e5=t}),t5=!1,x_;function jee(){if(t5)return;if(x_)return x_;function t(){return qi(this,null,function*(){let i="https://unpkg.com/@splinetool/modelling-wasm@0.9.526/build",r=de.e(876).then(de.bind(de,20876)),[s,l]=yield Promise.all([r,fetch(`${i}/process.wasm`).then(u=>u.arrayBuffer())]),d=s.default,c=yield d({wasmBinary:l});e5(c),t5=!0})}return x_=t(),x_}var Uee=["font"];function __(t,i,r,s){var f;let l,d,c;t.type==="PathGeometry"?(d=JSON.parse(JSON.stringify(t)),c=[[],["extrusion"]]):(d=Z({},t),c=[[]]);for(let m of c){let p=d;for(let g of m)p=p[g];for(l in p){let g=p[l];xI(g)&&!Uee.includes(l)&&(p[l]=i.getVariable(g,[s.uuid,"geometry",...m,l]),xI(p[l])&&(p[l]=1))}}let u={parameters:d,type:d.type};if(d.type==="PathGeometry")u.path=d.path;else if(d.type==="VectorGeometry"){let m=er.createFromState(d.shape,d.width,d.height);u.shape=m}else if(d.type==="NonParametricGeometry")d.data.groups&&((f=d.data.groups)==null||f.forEach(m=>{var p;return m.materialIndex=Math.max((p=m.materialIndex)!=null?p:0,0)})),u.geometry=new $P().parse(d);else if(d.type==="SubdivGeometry"){let m=new Va(d,r);return m.data=t,m}else if(d.type==="TextGeometry")return new JR(d,i);let h;try{h=c5(u)}catch(m){console.error(m)}if(!h){let m=er.createFromState(Wx.defaultData(),100,100);u.shape=m,h=c5(u)}return h}var Vee=new Ze;function pM(t,i,r,s){let l=t.position.array,d=t.normal.array,c=Vee.makeScale(i,r,s).invert().elements,u,h,f;for(var m=0,p=l.length;m<p;m+=3)l[m]*=i,l[m+1]*=r,l[m+2]*=s,u=d[m],h=d[m+1],f=d[m+2],d[m]=c[0]*u+c[4]*h+c[8]*f,d[m+1]=c[1]*u+c[5]*h+c[9]*f,d[m+2]=c[2]*u+c[6]*h+c[10]*f;t.position.needsUpdate=!0,t.normal.needsUpdate=!0}var k_=new nn,Hp=new N,Zt;fM.then(t=>{Zt=t});var i5=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),n5=new Uint32Array([0,1,2,3]),r5=new Uint8Array([4]),Va=class extends Nt{constructor(t,i){super(),this.data=t,this.flatShading=i,this.subdivPointer=0,this.rebuild(),this.freeSubdivPointer()}mutateDirectlyScaleBaked(t,i){this.freeSubdivPointer();let r=this.data.scaleBaked,s=nh.div(i,r);this.subdividedGeometry&&pM(this.subdividedGeometry.attributes,...s),this.originalGeometry&&pM(this.originalGeometry.attributes,...s),this.data=t;let l=this.userData.parameters;this.userData.parameters={width:l.width*s[0],height:l.height*s[1],depth:l.depth*s[2]},this.originalGeometry.boundingSphere.center.multiply(Hp.fromArray(s));let d=Hp.set(l.width,l.height,l.depth).length();this.originalGeometry.boundingSphere.radius=d/2}ensureSubdivPointer(){return this.subdivPointer===0&&this.rebuild(),this.subdivPointer}rebuild(){var l;let t,i,r;try{({originalGeometry:t,subdividedGeometry:i,subdivPointer:r}=Va.build(this.data,void 0,!this.flatShading,void 0))}catch(d){t=new bl(100,100,100),r=0}this.subdivPointer=r,this.originalGeometry=t,this.subdividedGeometry=i!=null?i:void 0;let s=(l=this.subdividedGeometry)!=null?l:this.originalGeometry;Object.assign(this,s),this.calcBoundingBox()}freeSubdivPointer(){this.subdivPointer&&(Va.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0)}dispose(){super.dispose(),this.freeSubdivPointer()}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new Ur,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=t.boundingSphere));let i=t.attributes.position,r=t.boundingSphere.center;k_.setFromBufferAttribute(i),k_.getCenter(r),t.boundingSphere.radius=r.distanceTo(k_.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),k_.getSize(Hp);let s={width:Hp.x,height:Hp.y,depth:Hp.z};return this.userData.parameters=s,s}static build(t,i,r,s){var h;let l,d,c,u=(h=t==null?void 0:t.phongAngle)!=null?h:35;r===!1&&(u=-1),i&&(Zt.free_bvh(i),Zt.free_subdivision_surface(i));try{l=Va.allocate(t,s)}catch(f){console.error(f,t),l=Va.allocate({positionWASM:i5,indexWASM:n5,verticesPerFaceWASM:r5},s)}if(Zt.set_destination_refinement_level(l,0),d=Va.buildLevel(l,!0,u),t.subdivisions>0)try{Zt.set_destination_refinement_level(l,t.subdivisions),c=Va.buildLevel(l,!1,u)}catch(f){try{Zt.set_destination_refinement_level(l,t.subdivisions-1),c=Va.buildLevel(l,!1,u)}catch(m){c=null}}else c=null;return{subdivPointer:l,originalGeometry:d,subdividedGeometry:c}}static primitiveToQuads(t,i,r){t.widthSegments>16&&(t.widthSegments=16),t.heightSegments>16&&(t.heightSegments=16),t.depthSegments>16&&(t.depthSegments=16),t.radialSegments>16&&(t.radialSegments=16),t.type==="DodecahedronGeometry"&&(t.detail=0);let s=t.shape!==void 0||t.path!==void 0?i.geometry:__(t,r,!1),l;t.type==="TorusGeometry"&&t.arc===Math.PI*2?l=s.getClosedTorusIndicesForBooleanOrSubdiv():l=s.getIndex();let d,c,u,h;({positions:d,triIndices:h}=S_(s.getAttribute("position"),l));let f;if(t.type==="CylinderGeometry"&&t.cornerRadius===0&&t.hollow===0&&t.openEnded===!1){let m=t.radialSegments*t.heightSegments*3*2,p=m+t.radialSegments*3;f=[m,p]}return{indices:c,verticesPerFace:u}=s5(d,h,s,f),{positions:d,indices:c,verticesPerFace:u}}static allocate(t,i){var M;let r,s,l,d=[],c=[];t.positionWASM&&t.positionWASM.length>0?(r=t.positionWASM,s=t.indexWASM,l=t.verticesPerFaceWASM):(r=i5,s=n5,l=r5);let u=r.length,h=s.length,f=l.length,m=r.length+d.length+c.length,p=s.length+l.length,g=m*Float32Array.BYTES_PER_ELEMENT+p*Uint32Array.BYTES_PER_ELEMENT,v=m*Float32Array.BYTES_PER_ELEMENT,w=p*Uint32Array.BYTES_PER_ELEMENT,x=Zt._malloc(g),_=new Float32Array(Zt.HEAPF32.buffer,x,m),k=new Uint32Array(Zt.HEAPU32.buffer,x+v,p);_.set(r,0),_.set(d,r.length),_.set(c,r.length+d.length),k.set(s,0),k.set(l,s.length);let A;(M=t==null?void 0:t.scaleBaked)!=null&&M.some(D=>D!==1)&&(A=new Ze().makeScale(...t.scaleBaked)),i&&(A?A.premultiply(i):A=i);let C=A?Zt.alloc_subdivision_surface2(x,u,x+v,h,x+v+s.length*Uint32Array.BYTES_PER_ELEMENT,f,A.elements):Zt.alloc_subdivision_surface(x,u,x+v,h,x+v+s.length*Uint32Array.BYTES_PER_ELEMENT,f);return Zt._free(x),C}static buildLevel(t,i,r,s,l){let d=l?Zt.get_mesh_data2(t,i?Zt.Level.CONTROL:Zt.Level.REFINED,r,l.elements):Zt.get_mesh_data(t,i?Zt.Level.CONTROL:Zt.Level.REFINED,r),c=8,u=Zt.HEAPU32.subarray(d>>2,(d>>2)+c),h=u.subarray(4,4+4),f=0,m=Zt.HEAPU32[u[f]>>2],p=Zt.HEAPF32.subarray(m>>2,(m>>2)+h[f]);f++;let g=Zt.HEAPU32[u[f]>>2],v=Zt.HEAPF32.subarray(g>>2,(g>>2)+h[f]);f++;let w=Zt.HEAPU32[u[f]>>2],x=Zt.HEAPU32.subarray(w>>2,(w>>2)+h[f]);f++;let _=Zt.HEAPU32[u[f]>>2],k=Zt.HEAPU32.subarray(_>>2,(_>>2)+h[f]);if(f++,s===void 0){let A=new Nt;if(A.setIndex(new Nf(k,1)),A.setAttribute("position",new wt(p,3)),A.setAttribute("normal",new wt(v,3)),i){A.setAttribute("faceMap",new Nf(x,1));let C=new Float32Array(v.length/3*4).fill(0);A.setAttribute("color",new Qt(C,4))}return Zt.free_mesh_data(d),A.userData.type="SubdivGeometry",A}s.getAttribute("position").copyArray(p),s.getAttribute("normal").copyArray(v),s.attributes.position.needsUpdate=!0,s.attributes.normal.needsUpdate=!0,Zt.free_mesh_data(d)}static freeSubdivPointer(t){Zt.free_bvh(t),Zt.free_subdivision_surface(t)}static buildControlCageWireframe(t,i,r){let s=Zt.get_wireframe_data_for_base_level(t),l=4,d=Zt.HEAPU32.subarray(s>>2,(s>>2)+l),c=d.subarray(2,2+2),u=0,h=Zt.HEAPU32[d[u]>>2],f=Zt.HEAPF32.subarray(h>>2,(h>>2)+c[u]);u++;let m=Zt.HEAPU32[d[u]>>2],p=Zt.HEAPU32.subarray(m>>2,(m>>2)+c[u]);if(i===void 0){let g=new Nt;g.setAttribute("position",new wt(f,3));let v=new Float32Array(f.length);for(let w=0,x=f.length;w<x;)v[w++]=r.r,v[w++]=r.g,v[w++]=r.b;return g.setAttribute("color",new Qt(v,3)),g.setIndex(new Nf(p,1)),Zt.free_wireframe_data_for_base_level(s),g}i.getAttribute("position").copyArray(f),i.attributes.position.needsUpdate=!0,Zt.free_wireframe_data_for_base_level(s)}static updateCollabMesh(t,i,r){let s=i===0;s||Zt.set_destination_refinement_level(t,i);let l=r?Zt.get_topological_data2(t,s?Zt.Level.CONTROL:Zt.Level.REFINED,r.elements):Zt.get_topological_data(t,s?Zt.Level.CONTROL:Zt.Level.REFINED),d=6,c=Zt.HEAPU32.subarray(l>>2,(l>>2)+d),u=c.subarray(3,3+3),h=0,f=Zt.HEAPU32[c[h]>>2],m=new Float32Array(Zt.HEAPF32.subarray(f>>2,(f>>2)+u[h]));h++;let p=Zt.HEAPU32[c[h]>>2],g=new Uint32Array(Zt.HEAPU32.subarray(p>>2,(p>>2)+u[h]));h++;let v=Zt.HEAPU32[c[h]>>2],w=new Uint8Array(Zt.HEAPU32.subarray(v>>2,(v>>2)+u[h]));return Zt.free_topological_data(l),{positions:m,indices:g,verticesPerFace:w}}},a5=["getX","getY","getZ"];function S_(t,i){let r={},s=i?i.count:t.count,l=0,d=[],c=[],u=1e4;for(let f=0;f<s;f++){let m=i?i.getX(f):f,p="";for(let g=0;g<3;g++)p+=`${~~(t[a5[g]](m)*u)},`;if(p in r)d.push(r[p]);else{for(let g=0;g<3;g++)c.push(t[a5[g]](m));r[p]=l,d.push(l),l++}}let h=[];for(let f=0;f<d.length;f+=3)d[f]===d[f+1]||d[f]===d[f+2]||d[f+1]===d[f+2]||h.push(d[f],d[f+1],d[f+2]);return{positions:c,triIndices:h}}var A_=new N,mM=new N,gM=new N,vM=new N;function s5(t,i,r,s){let l=[],d=[];if(r.userData.shape!==void 0&&r.userData.parameters.depth===0&&r.userData.shape.shapeHoles.length===0){let h=r.userData.shape.extractShapePointsToFlatArray([]),f=r.userData.parameters.spikes;if(r.userData.type==="EllipseGeometry"&&f<=24&&f%4===0&&r.userData.parameters.angle>=360){let g=h.length/2/f;h=h.filter((v,w)=>Math.floor(w/2)%g===0)}let m=0;for(let g=0;g<h.length;g+=2)m+=(h[g]-h[(g===0?h.length:g)-2])*(h[g+1]+h[(g===0?h.length:g)-1]);t.length=0;let p=0;if(m<0)for(let g=0;g<h.length;g+=2)t.push(h[g],h[g+1],0),l.push(p++);else for(let g=h.length-2;g>=0;g-=2)t.push(h[g],h[g+1],0),l.push(p++);return d.push(p),{indices:l,verticesPerFace:d}}let c=new Float32Array([r.userData.parameters.depth])[0],u=0;for(;u<i.length;){if(r.useNgonForTopBottomFaceDuringBake){let h=0;if((t[i[u]*3+2]===c||t[i[u]*3+2]===0)&&h++,(t[i[u+1]*3+2]===c||t[i[u+1]*3+2]===0)&&h++,(t[i[u+2]*3+2]===c||t[i[u+2]*3+2]===0)&&h++,h===3)break}if(i[u+1]===i[u+3]&&i[u+2]===i[u+5]||i[u+0]===i[u+3]&&i[u+2]===i[u+4]){A_.set(t[i[u]*3],t[i[u]*3+1],t[i[u]*3+2]),mM.set(t[i[u+1]*3],t[i[u+1]*3+1],t[i[u+1]*3+2]),gM.set(t[i[u+4]*3],t[i[u+4]*3+1],t[i[u+4]*3+2]),vM.set(t[i[u+5]*3],t[i[u+5]*3+1],t[i[u+5]*3+2]),mM.sub(A_).normalize(),gM.sub(A_).normalize(),vM.sub(A_).normalize();let h=mM.cross(gM).dot(vM);Math.abs(h)>.005||s&&s.some((f,m)=>m%2===1?!1:u>=s[m]&&u<s[m+1])?(l.push(i[u],i[u+1],i[u+2]),d.push(3),u+=3):(l.push(i[u],i[u+1],i[u+4],i[u+5]),d.push(4),u+=6)}else l.push(i[u],i[u+1],i[u+2]),d.push(3),u+=3}if(r.useNgonForTopBottomFaceDuringBake){let h=[],f=[],m=0;for(let p=0,g=0;p<t.length;p+=3,g++)t[p+2]===0&&(h.push(g),m++),t[p+2]===c&&f.push(g);if(r.userData.parameters.extrudeBevelSize===0){let p=f[0];f[0]=f[1],f[1]=p}h.reverse(),l.push(...h,...f),d.push(m,m)}return{indices:l,verticesPerFace:d}}var Dd={};xS(Dd,{calcBoolean:()=>$ee,calcBooleanTopological:()=>qee,freeMeshSet:()=>Kee,getMeshSet:()=>Zee,hasOpenEdges:()=>Yee,transformMeshSet:()=>Xee});var o5,Hee=new Promise(t=>{o5=t}),C_;function Gee(){if(C_)return C_;function t(){return qi(this,null,function*(){let i="https://unpkg.com/@splinetool/boolean-wasm@0.9.526/build",r=de.e(1804).then(de.bind(de,21804)),[s,l]=yield Promise.all([r,fetch(`${i}/boolean.wasm`).then(u=>u.arrayBuffer())]),d=s.default,c=yield d({wasmBinary:l});o5(c)})}return C_=t(),C_}var Ai,Gp;Hee.then(t=>Ai=t);function Wee(t,i,r){let s,l;t.userData.parameters.type==="TorusGeometry"&&t.userData.parameters.arc===Math.PI*2?l=t.getClosedTorusIndicesForBooleanOrSubdiv():l=t.getIndex();let{positions:d,triIndices:c}=S_(t.getAttribute("position"),l),u;if(i&&r){let{indices:h,verticesPerFace:f}=s5(d,c,t);u=f.length,s=[];for(let m=0,p=0;m<u;m++){s.push(f[m]);for(let g=0;g<f[m];g++)s.push(h[p++])}}else{let h=c.length;s=Array(h+h/3),u=0;for(let f=0,m=0;m<s.length;)s[m++]=3,u++,s[m++]=c[f++],s[m++]=c[f++],s[m++]=c[f++]}return{positions:d,faceIndices:s,nFaces:u}}function l5(t){let i=t.length,r=i*Uint32Array.BYTES_PER_ELEMENT,s=i*Float32Array.BYTES_PER_ELEMENT,l=Number.isInteger(t[0])?r:s,d=Ai._malloc(l);return(Number.isInteger(t[0])?new Uint32Array(Ai.HEAPU32.buffer,d,i):new Float32Array(Ai.HEAPF32.buffer,d,i)).set(t,0),d}function d5(t){switch(t){case 0:return Ai.OP.UNION;case 1:return Ai.OP.INTERSECTION;case 2:return Ai.OP.A_MINUS_B;case 3:return Ai.OP.B_MINUS_A;case 4:return Ai.OP.SYMMETRIC_DIFFERENCE;case 5:return Ai.OP.ALL;default:throw new Error("Unknown boolean operation "+t)}}function qee(t,i){Gp===void 0&&(Gp=Ai.init_csg());let r=l5(t),s=Ai.csg_calc_topological(Gp,r,t.length,d5(i));Ai._free(r);let l=6,d=Ai.HEAPU32.subarray(s>>2,(s>>2)+l),c=d.subarray(3,3+3),u=0,h=Ai.HEAPU32[d[u]>>2],f=new Float32Array(Ai.HEAPF32.subarray(h>>2,(h>>2)+c[u]));u++;let m=Ai.HEAPU32[d[u]>>2],p=new Uint32Array(Ai.HEAPU32.subarray(m>>2,(m>>2)+c[u]));u++;let g=Ai.HEAPU32[d[u]>>2],v=new Uint8Array(Ai.HEAPU32.subarray(g>>2,(g>>2)+c[u]));return Ai.free_mesh_data(s),{positions:f,indices:p,verticesPerFace:v}}function $ee(t,i,r,s){Gp===void 0&&(Gp=Ai.init_csg());let l=l5(t),d=Ai.csg_calc(Gp,l,t.length,s,d5(i));Ai._free(l);let c=5,u=Ai.HEAPU32.subarray(d>>2,(d>>2)+c),h=u.subarray(2,2+3),f=0,m=Ai.HEAPU32[u[f]>>2],p=Ai.HEAPF32.subarray(m>>2,(m>>2)+h[f]);f++;let g=Ai.HEAPU32[u[f]>>2],v=Ai.HEAPF32.subarray(g>>2,(g>>2)+h[f]);f++;let w=h[f];r.setAttribute("position",new wt(p,3)),r.setAttribute("normal",new wt(v,3));let x=Ai.HEAPF32.subarray((d>>2)+5,(d>>2)+5+6);return r.boundingSphere===null&&(r.boundingSphere=new Ur),r.boundingSphere.radius=-1,r.userData.parameters={width:x[3]*2,height:x[4]*2,depth:x[5]*2},Ai.free_mesh_data(d),w}function Zee(t,i,r){if(Ai===void 0)return-1;let s,l,d;if(i&&t.userData.positions!==void 0){let k=t.userData;d=k.verticesPerFace.length,s=k.positions,l=Array(k.verticesPerFace.reduce((A,C)=>A+C,0)+d);for(let A=0,C=0,M=0;A<k.verticesPerFace.length;A++){l[M++]=k.verticesPerFace[A];for(let D=0;D<k.verticesPerFace[A];D++)l[M++]=k.indices[C++]}}else({positions:s,faceIndices:l,nFaces:d}=Wee(t,i,r));let c=s.length,u=l.length,h=s.length,f=l.length,m=h*Float32Array.BYTES_PER_ELEMENT+f*Uint32Array.BYTES_PER_ELEMENT,p=h*Float32Array.BYTES_PER_ELEMENT,g=f*Uint32Array.BYTES_PER_ELEMENT,v=Ai._malloc(m),w=new Float32Array(Ai.HEAPF32.buffer,v,h),x=new Uint32Array(Ai.HEAPU32.buffer,v+p,f);w.set(s,0),x.set(l,0);let _=Ai.get_csg_mesh(v,c,v+p,u,d);return Ai._free(v),_}function Yee(t){return Ai.has_open_edges(t)}function Xee(t,i){Ai.transform_csg_mesh(t,i.elements)}function Kee(t){Ai.free_csg_mesh(t)}var Qee={ConeGeometry:vJ,CubeGeometry:yJ,CylinderGeometry:vR,DodecahedronGeometry:wJ,EllipseGeometry:sM,HelixGeometry:QJ,IcosahedronGeometry:JJ,LatheGeometry:eee,NonParametricGeometry:oee,PolygonGeometry:ZR,PyramidGeometry:lee,RectangleGeometry:YR,SphereGeometry:uee,PlaneGeometry:hee,BackdropGeometry:fee,StarGeometry:XR,TextFrameGeometry:mee,TorusGeometry:gee,TorusKnotGeometry:yee,TriangleGeometry:bee,PathGeometry:Ree,VectorGeometry:hh},c5=t=>Qee[t.type].create(t);function Wp(t){return t!==null&&"booleanOp"in t}var u5=class extends WE(za){constructor(){super(...arguments),this.booleanMeshSetAddress=-1,this.booleanWasTransformed=!1,this.booleanMatrixInvOld=new Ze}updateVisible(t){super.updateVisible(t),this.visible=!Wp(this.parent)&&this.visible,Wp(this.parent)&&this.parent.invalidateDownstreamBooleanData()}freeBooleanPointer(){this.booleanMeshSetAddress!==-1&&(Dd.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}invalidateDownstreamBooleanData(t=!1){return t?this.booleanWasTransformed=!0:this.freeBooleanPointer(),Wp(this.parent)?this.parent.invalidateDownstreamBooleanData():this}invalidateUpstreamBooleanData(){this.freeBooleanPointer();for(let t of this.children)t instanceof u5&&(t.freeBooleanPointer(),Wp(t)&&t.invalidateUpstreamBooleanData())}updateTransformState(t,i){let r=super.updateTransformState(t,i);return r&&Wp(this.parent)&&this.invalidateDownstreamBooleanData(!0),r}onVariableUpdate(t=!1){super.onVariableUpdate(t),Wp(this.parent)&&this.invalidateDownstreamBooleanData(!0)}},E_=new nn;function yM(t,i=0,r=t.count,s,l){let d=1/0,c=1/0,u=1/0,h=-1/0,f=-1/0,m=-1/0;for(let p=i;p<r;p++){let g=t.getX(p),v=t.getY(p),w=t.getZ(p);g<d&&(d=g),v<c&&(c=v),w<u&&(u=w),g>h&&(h=g),v>f&&(f=v),w>m&&(m=w)}E_.min.set(d,c,u),E_.max.set(h,f,m),E_.getCenter(s),E_.getSize(l).multiplyScalar(.5)}var Jee=new Nt,ete=new _v,ds=class extends u5{constructor(t,i){super(Jee,ete),this.super_Entity(t,i)}updateState(t,i){this.updateState_Entity(t,i)}updateEntityBoxSize(t,i){let r=this.geometry.getAttribute("position");r!==void 0?yM(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,t,i):super.updateEntityBoxSize(t,i)}},h5=class{constructor(t){t=t!=null?t:{},this.name=t.name,this.type=t.type,this.node=t.node,this.size=t.size,this.needsUpdate=t.needsUpdate}get value(){return this.node.value}set value(t){this.node.value=t}},Zc=class{constructor(t){this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=fe.generateUUID(),this.type=t,this.name=""}analyze(t,i){i=i!=null?i:{},t.analyzing=!0,this.build(t.addFlow(i.slot,i.cache,i.context),"v4"),t.clearVertexNodeCode(),t.clearFragmentNodeCode(),t.removeFlow(),t.analyzing=!1}analyzeAndFlow(t,i,r){return r=r!=null?r:{},this.analyze(t,r),this.flow(t,i,r)}flow(t,i,r){r=r!=null?r:{},t.addFlow(r.slot,r.cache,r.context);let s={result:this.build(t,i),code:t.clearNodeCode(),extra:t.context.extra};return t.removeFlow(),s}build(t,i,r){i=i!=null?i:this.getType(t,i);let s=t.getNodeData(r!=null?r:this);return t.analyzing&&this.appendDepsNode(t,s,i),t.nodes.indexOf(this)===-1&&t.nodes.push(this),this.updateFrame!==void 0&&t.updaters.indexOf(this)===-1&&t.updaters.push(this),this.generate(t,i,r)}updateFrame(t){}generateReadonly(t,i,r,s,l,d){return""}generate(t,i,r,s,l){return""}parse(t,i,r,s){}appendDepsNode(t,i,r){i.deps=(i.deps||0)+1;let s=t.getTypeLength(r);(s>(i.outputMax||0)||this.getType(t,r))&&(i.outputMax=s,i.output=r)}setName(t){this.name=t}getName(){return this.name}getType(t,i){return i==="sampler2D"||i==="samplerCube"?i:this.type}getHash(){let t="{",i,r;for(i in this)r=this[i],r instanceof Zc&&(t+='"'+i+'":'+r.getHash()+",");if(this.hashProperties)for(let s=0;s<this.hashProperties.length;s++)i=this.hashProperties[s],r=this[i],t+='"'+i+'":"'+String(r)+'",';return t+='"id":"'+this.uuid+'"}',t}},tte=class{constructor(){this.nodes={},this.keywords={}}add(t){this.nodes[t.name]=t}addKeyword(t,i,r){r=r!==void 0?r:!0,this.keywords[t]={callback:i,cache:r}}remove(t){delete this.nodes[t.name]}removeKeyword(t){delete this.keywords[t]}get(t){return this.nodes[t]}getKeyword(t,i){return this.keywords[t].callback(i)}getKeywordData(t){return this.keywords[t]}contains(t){return this.nodes[t]!==void 0}containsKeyword(t){return this.keywords[t]!==void 0}},cs=new tte,cn=class extends Zc{constructor(t,i){super(t),this.scope="",i=i!=null?i:{},this.shared=i.shared!==void 0?i.shared:!0,this.unique=i.unique!==void 0?i.unique:!1}build(t,i,r,s){if(i=i!=null?i:this.getType(t),this.getShared(t,i)){let l=this.getUnique(t,i);l&&this.uuid===void 0&&(this.uuid=fe.generateUUID()),r=t.getUUID(r!=null?r:this.getUUID(),!l);let d=t.getNodeData(r),c=d.output||this.getType(t);if(t.analyzing)return(d.deps||0)>0||this.getLabel()?(this.appendDepsNode(t,d,i),this.generate(t,i,r)):super.build(t,i,r);if(l)return d.name=d.name||super.build(t,i,r),d.name;if(!this.getLabel()&&(!this.getShared(t,c)||t.context.ignoreCache||d.deps===1))return super.build(t,i,r);r=this.getUUID(!1);let u=this.getTemp(t,r);if(u)return t.format(u,c,i);{u=super.generate(t,i,r,d.output,s);let h=this.generate(t,c,r);return t.addNodeCode(u+" = "+h+";"),t.format(u,c,i)}}return super.build(t,i,r)}getShared(t,i){return i!=="sampler2D"&&i!=="samplerCube"&&this.shared}getUnique(t,i){return this.unique}setLabel(t){return this.label=t,this}getLabel(){return this.label}getUUID(t){let i=this.uuid;return typeof this.scope=="string"&&(i=this.scope+"-"+i),i}getTemp(t,i){i=i||this.uuid;let r=t.getVars()[i];return r?r.name:void 0}generate(t,i,r,s,l){return this.getShared(t,i)||console.error("TempNode is not shared"),r=r!=null?r:this.uuid,t.getTempVar(r,s!=null?s:this.getType(t),l,this.getLabel()).name}},us=class extends cn{constructor(t,i){i=i!=null?i:{},i.shared=i.shared!==void 0?i.shared:!1,super(t,i),this.readonly=!1}setReadonly(t){return this.readonly=t,this.hashProperties=this.readonly?["value"]:void 0,this}getReadonly(){return this.readonly}generate(t,i,r,s,l,d){r=t.getUUID(r!=null?r:this.getUUID()),s=s!=null?s:this.getType(t);let c=t.getNodeData(r);return this.getReadonly()&&this.generateReadonly!==void 0?this.generateReadonly(t,i,r,s,l,d):t.isShader("vertex")?(c.vertex||(c.vertex=t.createVertexUniform(s,this,l,d,this.getLabel())),t.format(c.vertex.name,s,i)):(c.fragment||(c.fragment=t.createFragmentUniform(s,this,l,d,this.getLabel())),t.format(c.fragment.name,s,i))}},ra=class extends us{constructor(t=0,i){super("v2"),this.nodeType="Vector2",this.value=t instanceof q?t:new q(t,i)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}generateReadonly(t,i,r,s,l,d){return t.format("vec2("+this.value.x+", "+this.value.y+")",s,i)}},ro=class extends us{constructor(t=0,i,r){super("v3"),this.nodeType="Vector3",this.value=t instanceof N?t:new N(t,i,r)}get x(){return this.value.x}set x(t){this.value.x=t}get y(){return this.value.y}set y(t){this.value.y=t}get z(){return this.value.z}set z(t){this.value.z=t}generateReadonly(t,i,r,s,l,d){return t.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",s,i)}},hs=class extends _t{constructor(t,i,r,s){super(t,i,r),this.isColorA=!0,this.a=s}setRGBA(t,i,r,s){super.setRGB(t,i,r),this.a=s}copy(t){return super.copy(t),this.a="a"in t?t.a:1,this}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}setStyle(t,i="srgb"){let r;if(t==="transparent")return this.setRGBA(0,0,0,0),this;if(r=/^((?:rgb|hsl)a?)\(([^)]*)\)/.exec(t)){let s,l=r[1],d=r[2];switch(l){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.a=l==="rgba"?parseFloat(s[4]):1,super.setStyle(t,i);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)%\s*,\s*(\d*\.?\d+)%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return this.a=l==="hsla"?parseFloat(s[4]):1,super.setStyle(t,i);break}}return super.setStyle(t,i)}get x(){return this.r}get y(){return this.g}get z(){return this.b}get w(){return this.a}set x(t){this.r=t}set y(t){this.g=t}set z(t){this.b=t}set w(t){this.a=t}},Pd=class extends us{constructor(t){super("v4"),this.nodeType="Vector4",this.value=t instanceof hs?t:new hs(t.r,t.g,t.b,t.a)}generateReadonly(t,i,r,s,l,d){return t.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",s,i)}},ite=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,f5=/[a-z_0-9]+/gi,dt=class extends cn{constructor(t,i,r,s,l){super(l),this.src="",this.nodeType="Function",this.useKeywords=!0,this.includes=[],this.extensions={},this.keywords={},this.isMethod=l===void 0,this.isInterface=!1,this.parse(t,i,r,s)}getShared(t,i){return!this.isMethod}getType(t){return t.getTypeByFormat(this.type)}getInputByName(t){if(this.inputs){let i=this.inputs.length;for(;i--;)if(this.inputs[i].name===t)return this.inputs[i]}}getIncludeByName(t){if(this.includes){let i=this.includes.length;for(;i--;)if(this.includes[i].name===t)return this.includes[i]}}generate(t,i,r,s,l){let d,c=0,u=this.src;if(this.includes)for(let f=0;f<this.includes.length;f++)t.include(this.includes[f],this);for(let f in this.extensions)t.extensions[f]=!0;let h=[];for(;d=f5.exec(this.src);)h.push(d);for(let f=0;f<h.length;f++){let m=h[f],p=m[0],g=this.isMethod?!this.getInputByName(p):!0,v=p;if(this.keywords[p]||this.useKeywords&&g&&cs.containsKeyword(p)){let w=this.keywords[p];if(!w){let x=cs.getKeywordData(p);x.cache&&(w=t.keywords[p]),w=w||cs.getKeyword(p,t),x.cache&&(t.keywords[p]=w)}v=w.build(t)}p!==v&&u[m.index+c-1]!=="."&&(u=u.substring(0,m.index+c)+v+u.substring(m.index+p.length+c),c+=v.length-p.length),this.getIncludeByName(v)===void 0&&cs.contains(v)&&t.include(cs.get(v))}return i==="source"?u:this.isMethod?(this.isInterface||t.include(this,void 0,u),this.name):t.format("( "+u+" )",this.getType(t),i)}parse(t,i,r,s){if(this.src=t||"",this.includes=i!=null?i:[],this.extensions=r!=null?r:{},this.keywords=s!=null?s:{},this.isMethod){let l=ite.exec(this.src);if(this.inputs=[],l&&l.length==4){this.type=l[1],this.name=l[2];let d=l[3].match(f5);if(d){let c=0;for(;c<d.length;){let u=d[c++],h;u==="in"||u==="out"||u==="inout"?h=d[c++]:(h=u,u="");let f=d[c++];this.inputs.push({name:f,type:h,qualifier:u})}}this.isInterface=this.src.indexOf("{")===-1}else this.type="",this.name=""}}},nte=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,p5=class extends cn{constructor(t="",i){super(),this.src="",this.useDefine=!1,this.nodeType="Const",this.parse(t||p5.PI,void 0,void 0,void 0,i)}getType(t){return t.getTypeByFormat(this.type)}parse(t,i,r,s,l){this.src=t||"";let d,c,u="",h=nte.exec(t);this.useDefine=l!=null?l:this.src.charAt(0)==="#",h&&h.length>1?(c=h[1],d=h[2],u=h[3]):(d=this.src,c="f"),this.name=d,this.type=c,this.value=u}build(t,i){if(i==="source"){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return t.include(this),t.format(this.name,this.getType(t),i)}generate(t,i,r,s,l){return t.format(this.name,this.getType(t),i)}},un=p5;un.PI="PI",un.PI2="PI2",un.RECIPROCAL_PI="RECIPROCAL_PI",un.RECIPROCAL_PI2="RECIPROCAL_PI2",un.LOG2="LOG2",un.EPSILON="EPSILON";var rte=new RegExp(`^structs*([a-z_0-9]+)s*{s*((.|
)*?)}`,"gim"),ate=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),m5=class extends cn{constructor(t=""){super(),this.inputs=[],this.src="",this.nodeType="Struct",this.parse(t)}getType(t){return t.getTypeByFormat(this.name)}getInputByName(t){let i=this.inputs.length;for(;i--;)if(this.inputs[i].name===t)return this.inputs[i]}generate(t,i,r,s,l){return i==="source"?this.src+";":t.format("( "+this.src+" )",this.getType(t),i)}parse(t=""){this.src=t,this.inputs=[];let i=rte.exec(t);if(i){let r=i[2],s;for(;s=ate.exec(r);)this.inputs.push({type:s[1],name:s[2]});this.name=i[1]}else this.name="";this.type=this.name}},bM=class extends cn{constructor(t){super("v2",{shared:!1}),this.nodeType="UV",this.index=t!=null?t:0}generate(t,i){t.requires.uv[this.index]=!0;let r=this.index>0?this.index+1:"",s=t.isShader("vertex")?"uv"+r:"vUv"+r;return t.format(s,this.getType(t),i)}};cs.addKeyword("uv",function(){return new bM}),cs.addKeyword("uv2",function(){return new bM(1)});var qp=class extends cn{constructor(t,i){super("v4"),this.nodeType="ColorSpace",this.input=t,this.method=i!=null?i:qp.LINEAR_TO_LINEAR,this.hashProperties=["method"]}static getEncodingComponents(t){switch(t){case $s:return["Linear"];case ci:return["sRGB"];default:return[]}}generate(t,i){var c;let r=this.input.build(t,"v4"),s=this.getType(t),l=qp.Nodes[this.method],d=t.include(l);if(d===qp.LINEAR_TO_LINEAR)return t.format(r,s,i);if(((c=l.inputs)==null?void 0:c.length)===2){let u=this.factor.build(t,"f");return t.format(d+"( "+r+", "+u+" )",s,i)}else return t.format(d+"( "+r+" )",s,i)}fromEncoding(t){let i=qp.getEncodingComponents(t);this.method="LinearTo"+i[0],this.factor=i[1]}fromDecoding(t){let i=qp.getEncodingComponents(t);this.method=i[0]+"ToLinear",this.factor=i[1]}},zl=qp;zl.Nodes={LinearToLinear:new dt(["vec4 LinearToLinear( in vec4 value ) {","	return value;","}"].join(`
`)),sRGBToLinear:new dt(["vec4 sRGBToLinear( in vec4 value ) {","	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join(`
`)),LinearTosRGB:new dt(["vec4 LinearTosRGB( in vec4 value ) {","	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join(`
`))},zl.LINEAR_TO_LINEAR="LinearToLinear",zl.SRGB_TO_LINEAR="sRGBToLinear",zl.LINEAR_TO_SRGB="LinearTosRGB";var Tn=class extends dt{constructor(t="",i,r,s,l){super(t,l,s,r,i),this.nodeType="Expression"}},Od=class extends us{constructor(t=new zn,i,r,s){super("v4",{shared:!0}),this.nodeType="Texture",this.value=t,this.uv=i!=null?i:new bM,this.bias=r,this.project=s!==void 0?s:!1}getTexture(t,i){return super.generate(t,i,this.value.uuid,"t")}generate(t,i){var f;if(i==="sampler2D")return this.getTexture(t,i);let r=this.getTexture(t,i),s=this.uv.build(t,this.project?"v4":"v2"),l=this.bias?this.bias.build(t,"f"):void 0;l===void 0&&t.context.bias&&(l=t.context.bias.setTexture(this).build(t,"f"));let d,c;this.project?d="texture2DProj":d=l?"tex2DBias":"tex2D",l?c=d+"( "+r+", "+s+", "+l+" )":c=d+"( "+r+", "+s+" )";let u={include:t.isShader("vertex"),ignoreCache:!0},h=this.getType(t);return t.addContext(u),this.colorSpace=(f=this.colorSpace)!=null?f:new zl(new Tn("",h)),this.colorSpace.fromDecoding(t.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(c),c=this.colorSpace.build(t,h),t.removeContext(),t.format(c,h,i)}},kt=class extends us{constructor(t){super("f"),this.nodeType="Float",this.value=t!=null?t:0}generateReadonly(t,i,r,s,l,d){return t.format(this.value+(this.value%1?"":".0"),s,i)}},g5=class extends cn{constructor(t,i){super(),this.inputs=[],this.nodeType="FunctionCall",this.value=t,this.inputs=i!=null?i:[]}getFunction(){return this.value}getType(t){return this.value.getType(t)}generate(t,i,r,s,l){s=this.getType(t);let d=this.value,c=d.build(t,i)+"( ",u=[];if(d.inputs){for(let h=0;h<d.inputs.length;h++){let f=d.inputs[h],m=this.inputs[h]||this.inputs[f.name];u.push(m.build(t,t.getTypeByFormat(f.type)))}c+=u.join(", ")+" )"}return t.format(c,s,i)}},v5=class extends cn{constructor(t,i,r=v5.ADD){super(),this.nodeType="Operator",this.type=t.type,this.a=t,this.b=i,this.op=r}getType(t){let i=this.a.getType(t),r=this.b.getType(t);return t.isTypeMatrix(i)?"v4":t.getTypeLength(r)>t.getTypeLength(i)?r:i}generate(t,i){let r=this.getType(t);this.type=r;let s=this.a.build(t,r),l=this.b.build(t,r);return t.format("( "+s+" "+this.op+" "+l+" )",r,i)}},fs=v5;fs.ADD="+",fs.SUB="-",fs.MUL="*",fs.DIV="/";var hn=class extends cn{constructor(t,i=hn.ABS,r,s){super(),this.nodeType="Math",this.a=t,typeof i!="string"?this.b=i:s=i,typeof r!="string"?this.c=r:s=r,this.method=s,this.hashProperties=["method"]}getNumInputs(t){switch(this.method){case hn.MIX:case hn.CLAMP:case hn.REFRACT:case hn.SMOOTHSTEP:case hn.FACEFORWARD:return 3;case hn.MIN:case hn.MAX:case hn.MOD:case hn.STEP:case hn.REFLECT:case hn.DISTANCE:case hn.DOT:case hn.CROSS:case hn.POW:return 2;default:return 1}}getInputType(t){let i=t.getTypeLength(this.a.getType(t)),r=this.b?t.getTypeLength(this.b.getType(t)):0,s=this.c?t.getTypeLength(this.c.getType(t)):0;return i>r&&i>s?this.a.getType(t):r>s?this.b.getType(t):this.c.getType(t)}getType(t){switch(this.method){case hn.LENGTH:case hn.DISTANCE:case hn.DOT:return"f";case hn.CROSS:return"v3"}return this.getInputType(t)}generate(t,i){let r,s,l,d=this.a?t.getTypeLength(this.a.getType(t)):0,c=this.b?t.getTypeLength(this.b.getType(t)):0,u=this.c?t.getTypeLength(this.c.getType(t)):0,h=this.getInputType(t),f=this.getType(t);switch(this.type=f,this.method){case hn.NEGATE:return t.format("( -"+this.a.build(t,h)+" )",h,i);case hn.INVERT:return t.format("( 1.0 - "+this.a.build(t,h)+" )",h,i);case hn.CROSS:r=this.a.build(t,"v3"),s=this.b.build(t,"v3");break;case hn.STEP:r=this.a.build(t,d===1?"f":h),s=this.b.build(t,h);break;case hn.MIN:case hn.MAX:case hn.MOD:r=this.a.build(t,h),s=this.b.build(t,c===1?"f":h);break;case hn.REFRACT:r=this.a.build(t,h),s=this.b.build(t,h),l=this.c.build(t,"f");break;case hn.MIX:r=this.a.build(t,h),s=this.b.build(t,h),l=this.c.build(t,u===1?"f":h);break;default:r=this.a.build(t,h),this.b&&(s=this.b.build(t,h)),this.c&&(l=this.c.build(t,h));break}let m=[];m.push(r),s&&m.push(s),l&&m.push(l);let p=this.getNumInputs(t);if(m.length!==p)throw Error(`Arguments not match used in "${this.method}". Require ${p}, currently ${m.length}.`);return t.format(this.method+"( "+m.join(", ")+" )",f,i)}},fi=hn;fi.RAD="radians",fi.DEG="degrees",fi.EXP="exp",fi.EXP2="exp2",fi.LOG="log",fi.LOG2="log2",fi.SQRT="sqrt",fi.INV_SQRT="inversesqrt",fi.FLOOR="floor",fi.CEIL="ceil",fi.NORMALIZE="normalize",fi.FRACT="fract",fi.SATURATE="saturate",fi.SIN="sin",fi.COS="cos",fi.TAN="tan",fi.ASIN="asin",fi.ACOS="acos",fi.ARCTAN="atan",fi.ABS="abs",fi.SIGN="sign",fi.LENGTH="length",fi.NEGATE="negate",fi.INVERT="invert",fi.MIN="min",fi.MAX="max",fi.MOD="mod",fi.STEP="step",fi.REFLECT="reflect",fi.DISTANCE="distance",fi.DOT="dot",fi.CROSS="cross",fi.POW="pow",fi.MIX="mix",fi.CLAMP="clamp",fi.REFRACT="refract",fi.SMOOTHSTEP="smoothstep",fi.FACEFORWARD="faceforward";var g0=class extends cn{constructor(t,i,r){super("v4"),this.nodeType="TextureCubeUV",this.value=t,this.uv=i,this.bias=r}bilinearCubeUV(t,i,r,s){var u,h,f,m;let l=new g5(g0.Nodes.bilinearCubeUV,[i,r,s]);this.colorSpaceTL=(u=this.colorSpaceTL)!=null?u:new zl(new Tn("","v4")),this.colorSpaceTL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(l.build(t)+".tl"),this.colorSpaceTR=(h=this.colorSpaceTR)!=null?h:new zl(new Tn("","v4")),this.colorSpaceTR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(l.build(t)+".tr"),this.colorSpaceBL=(f=this.colorSpaceBL)!=null?f:new zl(new Tn("","v4")),this.colorSpaceBL.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(l.build(t)+".bl"),this.colorSpaceBR=(m=this.colorSpaceBR)!=null?m:new zl(new Tn("","v4")),this.colorSpaceBR.fromDecoding(t.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(l.build(t)+".br");let d={include:t.isShader("vertex"),ignoreCache:!0};t.addContext(d),this.colorSpaceTLExp=new Tn(this.colorSpaceTL.build(t,"v4"),"v4"),this.colorSpaceTRExp=new Tn(this.colorSpaceTR.build(t,"v4"),"v4"),this.colorSpaceBLExp=new Tn(this.colorSpaceBL.build(t,"v4"),"v4"),this.colorSpaceBRExp=new Tn(this.colorSpaceBR.build(t,"v4"),"v4"),t.removeContext();let c=new Tn("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return c.keywords.cubeUV_TL=this.colorSpaceTLExp,c.keywords.cubeUV_TR=this.colorSpaceTRExp,c.keywords.cubeUV_BL=this.colorSpaceBLExp,c.keywords.cubeUV_BR=this.colorSpaceBRExp,c.keywords.cubeUV=l,c}generate(t,i){if(t.isShader("fragment")){let r=this.uv,s=this.bias||t.context.roughness,l=new g5(g0.Nodes.roughnessToMip,[s]),d=new fi(l,g0.Nodes.m0,g0.Nodes.cubeUV_maxMipLevel,fi.CLAMP),c=new fi(d,fi.FLOOR),u=new fi(d,fi.FRACT),h=this.bilinearCubeUV(t,this.value,r,c),f=this.bilinearCubeUV(t,this.value,r,new fs(c,new kt(1).setReadonly(!0),fs.ADD)),m=new fi(h,f,u,fi.MIX);return t.format(m.build(t),"v4",i)}else return console.warn("TextureCubeUVNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),i)}},wM=g0;wM.Nodes=function(){let t=new m5(`struct TextureCubeUVData {
			vec4 tl;
			vec4 tr;
			vec4 br;
			vec4 bl;
			vec2 f;
		}`),i=new un("float cubeUV_maxMipLevel 8.0",!0),r=new un("float cubeUV_minMipLevel 4.0",!0),s=new un("float cubeUV_maxTileSize 256.0",!0),l=new un("float cubeUV_minTileSize 16.0",!0),d=new dt(`float getFace(vec3 direction) {
				vec3 absDirection = abs(direction);
				float face = -1.0;
				if (absDirection.x > absDirection.z) {
					if (absDirection.x > absDirection.y)
						face = direction.x > 0.0 ? 0.0 : 3.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				} else {
					if (absDirection.z > absDirection.y)
						face = direction.z > 0.0 ? 2.0 : 5.0;
					else
						face = direction.y > 0.0 ? 1.0 : 4.0;
				}
				return face;
		}`);d.useKeywords=!1;let c=new dt(`vec2 getUV(vec3 direction, float face) {
				vec2 uv;
				if (face == 0.0) {
					uv = vec2(direction.z, direction.y) / abs(direction.x); // pos x
				} else if (face == 1.0) {
					uv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y
				} else if (face == 2.0) {
					uv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z
				} else if (face == 3.0) {
					uv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x
				} else if (face == 4.0) {
					uv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y
				} else {
					uv = vec2(direction.x, direction.y) / abs(direction.z); // neg z
				}
				return 0.5 * (uv + 1.0);
		}`);c.useKeywords=!1;let u=new dt(`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {
			float face = getFace(direction);
			float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);
			mipInt = max(mipInt, cubeUV_minMipLevel);
			float faceSize = exp2(mipInt);
			float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);
			vec2 uv = getUV(direction, face) * (faceSize - 1.0);
			vec2 f = fract(uv);
			uv += 0.5 - f;
			if (face > 2.0) {
				uv.y += faceSize;
				face -= 3.0;
			}
			uv.x += face * faceSize;
			if(mipInt < cubeUV_maxMipLevel){
				uv.y += 2.0 * cubeUV_maxTileSize;
			}
			uv.y += filterInt * 2.0 * cubeUV_minTileSize;
			uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);
			uv *= texelSize;
			vec4 tl = texture2D(envMap, uv);
			uv.x += texelSize;
			vec4 tr = texture2D(envMap, uv);
			uv.y += texelSize;
			vec4 br = texture2D(envMap, uv);
			uv.x -= texelSize;
			vec4 bl = texture2D(envMap, uv);
			return TextureCubeUVData( tl, tr, br, bl, f );
		}`,[t,d,c,i,r,s,l]);u.useKeywords=!1;let h=new un("float r0 1.0",!0),f=new un("float v0 0.339",!0),m=new un("float m0 -2.0",!0),p=new un("float r1 0.8",!0),g=new un("float v1 0.276",!0),v=new un("float m1 -1.0",!0),w=new un("float r4 0.4",!0),x=new un("float v4 0.046",!0),_=new un("float m4 2.0",!0),k=new un("float r5 0.305",!0),A=new un("float v5 0.016",!0),C=new un("float m5 3.0",!0),M=new un("float r6 0.21",!0),D=new un("float v6 0.0038",!0),P=new un("float m6 4.0",!0),T=[h,f,m,p,g,v,w,x,_,k,A,C,M,D,P],O=new dt(`float roughnessToMip(float roughness) {
			float mip = 0.0;
			if (roughness >= r1) {
				mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;
			} else if (roughness >= r4) {
				mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;
			} else if (roughness >= r5) {
				mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;
			} else if (roughness >= r6) {
				mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;
			} else {
				mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25
			}
			return mip;
		}`,T);return{bilinearCubeUV:u,roughnessToMip:O,m0:m,cubeUV_maxMipLevel:i}}();var $p=class extends cn{constructor(t){super("v3"),this.nodeType="Normal",this.scope=t!=null?t:$p.VIEW}getShared(){return this.scope===$p.WORLD}build(t,i,r,s){let l=t.context[this.scope+"Normal"];return l?l.build(t,i,r,s):super.build(t,i,r)}generate(t,i,r,s,l){let d;switch(this.scope){case $p.VIEW:t.isShader("vertex")?d="transformedNormal":d="geometryNormal";break;case $p.LOCAL:t.isShader("vertex")?d="objectNormal":(t.requires.normal=!0,d="vObjectNormal");break;case $p.WORLD:t.isShader("vertex")?d="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(t.requires.worldNormal=!0,d="vWNormal");break}return t.format(d,this.getType(t),i)}},ps=$p;ps.LOCAL="local",ps.WORLD="world",ps.VIEW="view",ps.NORMAL="normal",cs.addKeyword("viewNormal",function(){return new ps(ps.VIEW)}),cs.addKeyword("localNormal",function(){return new ps(ps.NORMAL)}),cs.addKeyword("worldNormal",function(){return new ps(ps.WORLD)});var Id=class extends cn{constructor(t){super("v3"),this.nodeType="Position",this.scope=t!=null?t:Id.LOCAL}getType(){switch(this.scope){case Id.PROJECTION:return"v4"}return this.type}getShader(){switch(this.scope){case Id.LOCAL:case Id.WORLD:return!1}return!0}generate(t,i,r,s,l){let d;switch(this.scope){case Id.LOCAL:t.isShader("vertex")?d="transformed":(t.requires.position=!0,d="vPosition");break;case Id.WORLD:if(t.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";t.requires.worldPosition=!0,d="vWPosition";break;case Id.VIEW:d=t.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Id.PROJECTION:d=t.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )";break}return t.format(d,this.getType(),i)}},jo=Id;jo.LOCAL="local",jo.WORLD="world",jo.VIEW="view",jo.PROJECTION="projection",cs.addKeyword("position",function(){return new jo}),cs.addKeyword("worldPosition",function(){return new jo(jo.WORLD)}),cs.addKeyword("viewPosition",function(){return new jo(jo.VIEW)});var Ll=class extends cn{constructor(t){super("v3"),this.nodeType="Reflect",this.scope=t!=null?t:Ll.CUBE}getUnique(t){return!t.context.viewNormal}getType(){switch(this.scope){case Ll.SPHERE:return"v2"}return this.type}generate(t,i){let r=this.getUnique(t);if(t.isShader("fragment")){let s;switch(this.scope){case Ll.VECTOR:{let l=new ps(ps.VIEW),d=t.context.roughness,c=l.build(t,"v3"),u=new jo(jo.VIEW).build(t,"v3"),h=d?d.build(t,"f"):void 0,f=`reflect( -normalize( ${u} ), ${c} )`;h&&(f=`normalize( mix( ${f}, ${c}, ${h} * ${h} ) )`);let m=`inverseTransformDirection( ${f}, viewMatrix )`;r?(t.addNodeCode(`vec3 reflectVec = ${m};`),s="reflectVec"):s=m;break}case Ll.CUBE:{let l=new Ll(Ll.VECTOR).build(t,"v3"),d="vec3( -"+l+".x, "+l+".yz )";r?(t.addNodeCode(`vec3 reflectCubeVec = ${d};`),s="reflectCubeVec"):s=d;break}case Ll.SPHERE:{let l="normalize( ( viewMatrix * vec4( "+new Ll(Ll.VECTOR).build(t,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(t.addNodeCode(`vec2 reflectSphereVec = ${l};`),s="reflectSphereVec"):s=l;break}}return t.format(s,this.getType(),i)}else return console.warn("ReflectNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.type,i)}},Zp=Ll;Zp.CUBE="cube",Zp.SPHERE="sphere",Zp.VECTOR="vector";var ste=class extends cn{constructor(t=new Od,i,r){super("v4"),this.nodeType="TextureCube",this.value=t,this.radianceNode=new wM(this.value,i!=null?i:new Zp(Zp.VECTOR),r),this.irradianceNode=new wM(this.value,new ps(ps.WORLD),new kt(1).setReadonly(!0))}generate(t,i){return t.isShader("fragment")?(t.require("irradiance"),t.context.bias&&t.context.bias.setTexture(this.value),(t.slot==="irradiance"?this.irradianceNode:this.radianceNode).build(t,i)):(console.warn("TextureCubeNode is not compatible with "+t.shader+" shader."),t.format("vec4( 0.0 )",this.getType(t),i))}},ote=class extends us{constructor(t=new AA,i,r){super("v4",{shared:!0}),this.nodeType="CubeTexture",this.value=t,this.uv=i!=null?i:new Zp,this.bias=r}getTexture(t,i){return super.generate(t,i,this.value.uuid,"tc")}generate(t,i){var h,f;if(i==="samplerCube")return this.getTexture(t,i);let r=this.getTexture(t,i),s=(h=this.uv)==null?void 0:h.build(t,"v3"),l=this.bias?this.bias.build(t,"f"):void 0;l===void 0&&t.context.bias&&(l=t.context.bias.setTexture(this).build(t,"f"));let d;l?d="texCubeBias( "+r+", "+s+", "+l+" )":d="texCube( "+r+", "+s+" )";let c={include:t.isShader("vertex"),ignoreCache:!0},u=this.getType(t);return t.addContext(c),this.colorSpace=(f=this.colorSpace)!=null?f:new zl(new Tn("",u)),this.colorSpace.fromDecoding(t.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(d),d=this.colorSpace.build(t,u),t.removeContext(),t.format(d,u,i)}},lte=`
uniform int frameIndex;
uniform vec2 resolution;
uniform mat4 previousModelViewMatrix;
uniform mat4 previousProjectionMatrix;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;
`,dte=`
layout(location = 1) out vec4 gVelocity;

uniform int frameIndex;
uniform vec2 resolution;

varying vec4 vCurrentPosition;
varying vec4 vPreviousPosition;

const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}

// Derived from the interleaved gradient function from Jimenez 2014 http:goo.gl/eomGso
float getNoiseInterleavedGradient(vec2 screenPos) {
    vec3 magic = vec3(0.06711056f, 0.00583715f, 52.9829189f);
    return fract(magic.z * fract(dot(screenPos, magic.xy)));
}

`,cte=`
// TODO: This could be generated CPU side and passed to the shader every frame
const vec2 haltonSequence[16] = vec2[16](
vec2( 0.000000,-0.333334),
vec2(-0.500000, 0.333334),
vec2( 0.500000,-0.777778),
vec2(-0.750000,-0.111112),
vec2( 0.250000, 0.555556),
vec2(-0.250000,-0.555556),
vec2( 0.750000, 0.111112),
vec2(-0.875000, 0.777778),
vec2(0.125000, -0.925926),
vec2(-0.375000, -0.259260),
vec2(0.625000, 0.407408),
vec2(-0.625000, -0.703704),
vec2(0.375000, -0.037038),
vec2(-0.125000, 0.629630),
vec2(0.875000, -0.481482),
vec2(-0.937500, 0.185186));

// TODO: Pass correct view size
vec2 offset = haltonSequence[frameIndex];
offset.x /= resolution.x;
offset.y /= resolution.y;

vec4 currentPosition = gl_Position;
vec4 currentPositionJittered = currentPosition + (vec4(offset.x, offset.y, 0.0, 0.0) * currentPosition.w);

// We want to calculate the velocity with unjittered positions
// so that things that are not moving get a velocity = 0
vCurrentPosition = currentPosition;
vPreviousPosition = previousProjectionMatrix * previousModelViewMatrix * vec4(transformed, 1.0);
#ifdef OUTLINE_COMPENSATION
vPreviousPosition.xy += OUTLINE_COMPENSATION;
#endif
gl_Position = currentPositionJittered;

`,ute=`
vec2 oldPos = vPreviousPosition.xy;
    oldPos /= vPreviousPosition.w;
    oldPos.xy = (oldPos.xy+1.)/2.0;

vec2 newPos = vCurrentPosition.xy;
    newPos /= vCurrentPosition.w;
    newPos.xy = (newPos.xy+1.)/2.0;

vec2 velocity = (newPos - oldPos);

// Discard fully transparent pixels 
if (gl_FragColor.a <= 0.0) discard;

gVelocity = vec4(velocity, 0.0, 1.0);
`,y5=["x","y","z","w"],hte=["float","vec2","vec3","vec4"],fte={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},pte={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},mte=class{constructor(){this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.needsJitter=!0,this.getIncludesCode=function(){function t(i,r){return i.deps.length-r.deps.length}return function(i,r){let s=this.getIncludes(i,r);if(!s)return"";let l="";s=s.sort(t);for(let d=0;d<s.length;d++)s[d].src&&(l+=s[d].src+`
`);return l}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.fragmentParsVariables={},this.vertexParsVariables={},this.requires={uv:[],color:[],transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","	#define texCube(a, b) textureCube(a, b)","	#define texCubeBias(a, b, c) textureCube(a, b, c)","	#define tex2D(a, b) texture2D(a, b)","	#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif",`
			// NOTE: Include Spline's blending modes. This could be part of BlendNode
			#define SPE_BLENDING_NORMAL 0
			#define SPE_BLENDING_MULTIPLY 1
			#define SPE_BLENDING_SCREEN 2
			#define SPE_BLENDING_OVERLAY 3

			vec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, b, alpha );
			}

			vec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {
				return mix( a, a * b, alpha );
			}

			vec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );
				return mix( a, tmp, alpha );
			}

			vec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {
				vec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );
				return clamp( mix( a, tmp, alpha ), 0.0, 1.0 );
			}

			vec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {
				if ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );
				else if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );
				return vec3( 1.0 );
			}
			`,"#include <packing>","#include <common>"].join(`
`),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join(`
`),fragment:["float accumAlpha = 0.0;",`void accumulateAlpha(float alpha) {
					accumAlpha += (1.0 - accumAlpha) * alpha;
				}`,""].join(`
`)},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}build(t,i){this.addVertexParsCode(lte),this.addFragmentParsCode(dte),this.buildShader("vertex",t),this.buildShader("fragment",i);for(let r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){let s=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+s+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+s+";"),this.addVertexFinalCode("vUv"+s+" = uv"+s+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition,this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this.needsJitter&&(this.addVertexFinalCode(cte),this.addFragmentFinalCode(ute)),this}buildShader(t,i){this.resultCode[t]=i.build(this.setShader(t),"v4")}setMaterial(t,i){return this.defines={},this}addFlow(t,i,r){return this.addSlot(t).addCache(i).addContext(r)}removeFlow(){return this.removeSlot().removeCache().removeContext()}addCache(t){return this.cache=t!=null?t:"",this.caches.push(this.cache),this}removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}addContext(t){return this.context=Object.assign({},this.context,t),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}addSlot(t){return this.slot=t||"",this.slots.push(this.slot),this}removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}addFragmentVariable(t,i){this.fragmentVariables[t]===void 0&&(this.addFragmentCode(`${i} ${t};`),this.fragmentVariables[t]="")}addFragmentParsVariable(t,i){this.fragmentParsVariables[t]===void 0&&(this.addFragmentParsCode(`${i} ${t};`),this.fragmentParsVariables[t]="")}addVertexParsVariable(t,i){this.vertexParsVariables[t]===void 0&&(this.addVertexParsCode(`${i} ${t};`),this.vertexParsVariables[t]="")}addVertexCode(t){this.addCode(t,"vertex")}addFragmentCode(t){this.addCode(t,"fragment")}addCode(t,i){this.code[i!=null?i:this.shader]+=t+`
`}addVertexNodeCode(t){this.addNodeCode(t,"vertex")}addFragmentNodeCode(t){this.addNodeCode(t,"fragment")}addNodeCode(t,i){this.nodeCode[i!=null?i:this.shader]+=t+`
`}clearNodeCode(t){t=t!=null?t:this.shader;let i=this.nodeCode[t];return this.nodeCode[t]="",i}clearVertexNodeCode(){return this.clearNodeCode("vertex")}clearFragmentNodeCode(){return this.clearNodeCode("fragment")}addVertexFinalCode(t){this.addFinalCode(t,"vertex")}addFragmentFinalCode(t){this.addFinalCode(t,"fragment")}addFinalCode(t,i){this.finalCode[i!=null?i:this.shader]+=t+`
`}addVertexParsCode(t){this.addParsCode(t,"vertex")}addFragmentParsCode(t){this.addParsCode(t,"fragment")}addParsCode(t,i){this.parsCode[i!=null?i:this.shader]+=t+`
`}addVaryCode(t){this.addVertexParsCode(t),this.addFragmentParsCode(t)}isCache(t){return this.caches.indexOf(t)!==-1}isSlot(t){return this.slots.indexOf(t)!==-1}define(t,i){this.defines[t]=i===void 0?1:i}require(t){this.requires[t]=!0}isDefined(t){return this.defines[t]!==void 0}getVar(t,i,r,s="varying",l="V",d=""){let c=this.getVars(s),u=c[t];if(!u){let h=c.length;u={name:r||"node"+l+h+(d?"_"+d:""),type:i},c.push(u),c[t]=u}return u}getTempVar(t,i,r,s){return this.getVar(t,i,r,this.shader,"T",s)}getAttribute(t,i){if(!this.attributes[t]){let r=this.getVar(t,i);this.addVertexParsCode("attribute "+i+" "+t+";"),this.addVertexFinalCode(r.name+" = "+t+";"),this.attributes[t]={varying:r,name:t,type:i}}return this.attributes[t]}getCode(t){return[this.prefixCode,this.parsCode[t],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[t],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[t],"uniform"),this.getIncludesCode("consts",t),this.getIncludesCode("structs",t),this.getIncludesCode("functions",t),"void main() {",this.getVarListCode(this.getVars(t)),this.code[t],this.resultCode[t],this.finalCode[t],"}"].join(`
`)}getVarListCode(t,i){i=i!=null?i:"";let r="";for(let s=0,l=t.length;s<l;++s){let d=t[s],c=d.type,u=d.name,h=d.size,f=this.getFormatByType(c);if(f===void 0)throw new Error("Node pars "+f+" not found.");f.includes("[]")?r+=i+" "+f.substring(0,f.length-2)+" "+u+`[${h}];
`:r+=i+" "+f+" "+u+`;
`}return r}getVars(t){return this.inputs.vars[t!=null?t:this.shader]}getNodeData(t){let i=t instanceof Zc?t.uuid:t;return this.nodeData[i]=this.nodeData[i]||{}}createUniform(t,i,r,s,l,d){if(i.includes("[]")){let c=this.inputs.arrayUniforms,u=c.list.length,h=new h5({type:i,size:r.size,name:s||"nodeUA"+u+(d?"_"+d:""),node:r,needsUpdate:l});return c.list.push(h),c[t].push(h),c[t][h.name]=h,this.uniforms[h.name]=h,h}else{let c=this.inputs.uniforms,u=c.list.length,h=new h5({type:i,name:s||"nodeU"+u+(d?"_"+d:""),node:r,needsUpdate:l});return c.list.push(h),c[t].push(h),c[t][h.name]=h,this.uniforms[h.name]=h,h}}createVertexUniform(t,i,r,s,l){return this.createUniform("vertex",t,i,r,s,l)}createFragmentUniform(t,i,r,s,l){return this.createUniform("fragment",t,i,r,s,l)}include(t,i,r){var d;let s;if(t=typeof t=="string"?cs.get(t):t,this.context.include===!1)return t.name;t instanceof dt?s=this.includes.functions:t instanceof un?s=this.includes.consts:t instanceof m5&&(s=this.includes.structs);let l=s[this.shader]=s[this.shader]||[];if(t){let c=l[t.name];if(c||(c=l[t.name]={node:t,deps:[]},l.push(c),c.src=t.build(this,"source")),t instanceof dt&&i&&l[i.name]&&l[i.name].deps.indexOf(t)===-1&&(l[i.name].deps.push(t),(d=t.includes)==null?void 0:d.length)){let u=0;do this.include(t.includes[u++],i);while(u<t.includes.length)}return r&&(c.src=r),t.name}else throw new Error("Include not found.")}colorToVectorProperties(t){return t.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}colorToVector(t){return t.replace(/c/g,"v3")}getIncludes(t,i){return this.includes[t][i||this.shader]}getConstructorFromLength(t){return hte[t-1]}isTypeMatrix(t){return/^m/.test(t)}getTypeLength(t){return t==="f"?1:parseInt(this.colorToVector(t).substr(1))}getTypeFromLength(t){return t===1?"f":"v"+t}findNode(...t){for(let i=0;i<arguments.length;i++){let r=t[i];if(r!=null&&r.isNode)return r}}resolve(...t){for(let i=0;i<arguments.length;i++){let r=t[i];if(r!==void 0){if(r.isNode)return r;if(r.isTexture)switch(r.mapping){case mc:case gc:return new ote(r);case Bu:return new ste(new Od(r));default:return new Od(r)}else{if(r.isVector2)return new ra(r);if(r.isVector3)return new ro(r);if(r.isVector4)return new Pd(r)}}}}format(t,i,r){switch(this.colorToVector(r+" <- "+i)){case"f <- v2":return t+".x";case"f <- v3":return t+".x";case"f <- v4":return t+".x";case"f <- i":case"f <- b":return"float( "+t+" )";case"v2 <- f":return"vec2( "+t+" )";case"v2 <- v3":return t+".xy";case"v2 <- v4":return t+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+t+" ) )";case"v3 <- f":return"vec3( "+t+" )";case"v3 <- v2":return"vec3( "+t+", 0.0 )";case"v3 <- v4":return t+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+t+" ) )";case"v4 <- f":return"vec4( "+t+" )";case"v4 <- v2":return"vec4( "+t+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+t+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+t+" ) )";case"i <- f":case"i <- b":return"int( "+t+" )";case"i <- v2":return"int( "+t+".x )";case"i <- v3":return"int( "+t+".x )";case"i <- v4":return"int( "+t+".x )";case"b <- f":return"( "+t+" != 0.0 )";case"b <- v2":return"( "+t+" != vec2( 0.0 ) )";case"b <- v3":return"( "+t+" != vec3( 0.0 ) )";case"b <- v4":return"( "+t+" != vec4( 0.0 ) )";case"b <- i":return"( "+t+" != 0 )"}return t}getTypeByFormat(t){return fte[t]||t}getFormatByType(t){return pte[t]||t}getUUID(t,i){return i=i!==void 0?i:!0,i&&this.cache&&(t=this.cache+"-"+t),t}getElementByIndex(t){return y5[t]}getIndexByElement(t){return y5.indexOf(t)}isShader(t){return this.shader===t}setShader(t){return this.shader=t,this}mergeDefines(t){for(let i in t)this.defines[i]=t[i];return this.defines}mergeUniform(t){for(let i in t)this.uniforms[i]=t[i];return this.uniforms}getTextureEncodingFromMap(t){let i;return t?t.isTexture&&(i=t.encoding):i=$s,i===$s&&this.context.gamma&&(i=ci),i}},tr=class extends us{constructor(t=0,i,r,s){super("c"),this.nodeType="Color",this.value=t instanceof hs?t:new hs(t||0,i,r,s)}setRGBA(t){this.value.setRGBA(t.r,t.g,t.b,t.a)}generate(t,i,r,s,l,d){r=t.getUUID(r!=null?r:this.getUUID()),s=s!=null?s:this.getType(t);let c=t.getNodeData(r),u=this.getReadonly()&&this.generateReadonly!==void 0;if(this.alpha){let h=this.alpha.build(t,"f");t.addFragmentNodeCode(`accumAlpha += ( 1.0 - accumAlpha ) * ${h};`)}return u?this.generateReadonly(t,i,r,s,l,d):t.isShader("vertex")?(c.vertex||(c.vertex=t.createVertexUniform(s,this,l,d,this.getLabel())),t.format(c.vertex.name,s,i)):(c.fragment||(c.fragment=t.createFragmentUniform(s,this,l,d,this.getLabel())),t.format(c.fragment.name,s,i))}generateReadonly(t,i,r,s,l,d){return t.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",s,i)}},yn=class extends us{constructor(t){super("i"),this.nodeType="Int",this.value=Math.floor(t!=null?t:0)}generateReadonly(t,i,r,s,l,d){return t.format(this.value.toString(),s,i)}},Ha=class extends us{constructor(t){super("b"),this.nodeType="Bool",this.value=t!=null?t:!1}generateReadonly(t,i,r,s){return t.format(this.value?"true":"false",s,i)}},fh=class extends us{constructor(t=1,i){super("f[]"),this.nodeType="FloatArray",this.size=t,this.value=Array.isArray(i)?i:typeof i=="number"?new Array(t).fill(i):new Array(t).fill(0)}},xM=class extends us{},gte=class extends xM{constructor(t){super("v3"),this.image=t,this._value=new N}get value(){var t,i;return this._value.x=this.image.isVideo?(t=this.image.img.videoWidth)!=null?t:0:this.image.img.width,this._value.y=this.image.isVideo?(i=this.image.img.videoHeight)!=null?i:0:this.image.img.height,this._value}},_M=class extends xM{constructor(t,i){super("t"),this.image=t,this.wrap=i}get value(){return this.image.getTexture(this.wrap)}},b5=class extends us{constructor(t){super("m3"),this.nodeType="Matrix3",this.value=t!=null?t:new Me}generateReadonly(t,i,r,s,l,d){return t.format("mat3("+this.value.elements.join(", ")+")",s,i)}get elements(){return this.value.elements}set elements(t){this.value.fromArray(t)}},Bl=class extends us{constructor(t){super("m4"),this.nodeType="Matrix4",this.value=t!=null?t:new Ze}generateReadonly(t,i,r,s,l,d){return t.format("mat4("+this.value.elements.join(", ")+")",s,i)}get elements(){return this.value.elements}set elements(t){this.value.fromArray(t)}};function w5(t,i,r){t.setUvTransform(r[0],r[1],i[0],i[1],0,0,0)}var vte=class extends b5{constructor(t,i){super(new Me),this.repeat=t,this.offset=i,w5(this.value,t,i)}updateMatrix(){w5(this.value,this.repeat,this.offset)}},ph=class extends us{constructor(t=1,i){super("v4[]"),this.nodeType="Vector4Array",this.size=t,this.value=Array.isArray(i)?i:i instanceof ri?new Array(t).fill(i):new Array(t).fill(new ri(0))}},x5=class extends cn{constructor(t,i,r,s){super("v3"),this.nodeType="Blend",this.a=t,this.b=i,this.alpha=r,this.mode=s}generate(t,i){if(t.isShader("fragment")){let r=[];return r.push(this.a.build(t,"c")),r.push(this.b.build(t,"c")),r.push(this.alpha.build(t,"f")),r.push(this.mode.build(t,"i")),t.format("spe_blend("+r.join(",")+")",this.getType(t),i)}else return console.warn("BlendNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},_5=class extends cn{constructor(t,i){super("v3"),this.nodeType="CustomColor",this.color=t,this.alpha=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){if(t.isShader("fragment")){let r=t.include(_5.Nodes.customColor);t.addFragmentVariable(this.calpha,"float");let s=[];return s.push(this.color.build(t,"v3")),s.push(this.mask?`luminance(${this.mask.build(t,"v3")})`:"1.0"),s.push(this.alpha.build(t,"f")),s.push(this.calpha),t.format(r+"("+s.join(",")+")",this.getType(t),i)}else return console.warn("CustomColorNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},kM=_5;kM.Nodes=function(){return{customColor:new dt(`vec3 customColor(vec3 color, float mask, float alpha, out float calpha) {
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color;
			}`)}}();var k5=class extends cn{constructor(t,i){super("v3"),this.nodeType="CustomNormal",this.cnormal=t,this.alpha=i,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){if(t.isShader("fragment")){let r=t.include(k5.Nodes.customNormal);t.addFragmentVariable(this.calpha,"float");let s=[];return s.push(this.cnormal.build(t,"v3")),s.push("normal"),s.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),s.push(this.alpha.build(t,"f")),s.push(this.calpha),t.format(r+"("+s.join(",")+")",this.getType(t),i)}else return console.warn("CustomNormalNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},S5=k5;S5.Nodes=function(){return{customNormal:new dt(`vec3 customNormal(vec3 cnormal, vec3 norm, float mask, float alpha, out float calpha) {
				vec3 normal = packNormalToRGB( norm ).rgb;
				normal *= step( vec3(0.5), cnormal );

				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * lalpha;

				return normal;
			}`)}}();var v0=class extends cn{constructor(t,i,r,s,l,d,c,u,h,f,m,p){super("v3"),this.nodeType="CustomTexture",this.texture=t,this.textureSize=i,this.crop=r,this.projection=s,this.axis=l,this.side=d,this.size=c,this.blending=u,this.mat=h,this.isMask=p,this.alpha=f,this.mode=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){t.require("position"),t.require("normal"),t.require("uv"),t.requires.uv=[!0],t.extensions.shaderTextureLOD=!0,t.extensions.derivatives=!0;let r=`g${this.uuid.toString().replace(/-/g,"")}`,s;switch(this.projection.value){case 3:s=t.include(v0.Nodes.cylindrical);break;case 2:s=t.include(v0.Nodes.spherical);break;case 1:let d=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],c=["zy","xz","xy"][this.axis.value],u=new dt(`
		vec3 ${r}_planarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 projected = (1. + (position.${c})) / 2.;
				vec2 uvs = ( mat * vec3( (projected * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				${this.side.value===2?"":`lalpha *= step(0.0, ${this.side.value===1?"-1.0 * ":""}dot(vObjectNormal, ${d}));`}

				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`);s=t.include(u);break;case 4:s=t.include(v0.Nodes.triplanar);break;default:s=t.include(v0.Nodes.uv);break}t.addFragmentVariable(this.calpha,"float");let l=[];if(l.push("normal"),l.push(this.texture.generate(t,"t")),l.push(this.textureSize.build(t,"v2")),l.push(this.crop.build(t,"f")),l.push(this.mat.build(t,"mat3")),l.push(this.size.build(t,"v2")),l.push(this.blending.build(t,"f")),l.push(this.isMask.build(t,"b")),l.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),l.push(this.alpha.build(t,"f")),l.push(this.mode.build(t,"i")),l.push(this.calpha),this.projection.value===4){let d=`${r}_writeUvs`,c=d+"0",u=d+"1",h=d+"2",f=`${r}_triplanarWeights`;t.addFragmentVariable(c,"vec2"),t.addFragmentVariable(u,"vec2"),t.addFragmentVariable(h,"vec2"),t.addFragmentVariable(f,"vec3"),l.push(c),l.push(u),l.push(h),l.push(f)}else{let d=`${r}_writeUvs`;t.addFragmentVariable(d,"vec2"),l.push(d)}return t.format(s+"("+l.join(",")+")",this.getType(t),i)}},SM=v0;SM.Nodes=function(){let t=new dt(`
vec3 cylindricalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(position);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float scaledHeight = position.y / (size.y * 0.5);
                float v =  (scaledHeight / 2.) + .5;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;

				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),i=new dt(`
vec3 sphericalTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
                vec3 posN = normalize(vPosition);
                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);
                float v = 0.5 + asin(posN.y) / 3.1415;

                vec2 calculatedUv = vec2(u,v);
				vec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

                vec2 df = fwidth(uvs);
               	if(df.x > 0.5) df.x = 0.;
				#ifdef GL_EXT_shader_texture_lod
                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#else
                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}
`),r=new dt(`vec3 uvTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUv) {
				vec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;
				writeUv = uvs;

				vec4 tmp = texture2D( tex, uvs );

				vec3 col = tmp.rgb;

				float lalpha = alpha * tmp.a;
				if ( crop > 0.5 ) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						lalpha = 0.0;
					}
				}
				
				lalpha *= mask;

				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;
			}`),s=new dt(`vec3 triplanarTexture(vec3 normal, sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float blending, bool isMask, float mask, float alpha, int mode, out float calpha, out vec2 writeUvs0, out vec2 writeUvs1, out vec2 writeUvs2, out vec3 writeWeights) {
				vec3 p = position;
				vec2 uv0 = (1.0 + p.xy) / 2.0;     
				vec2 uv1 = (1.0 + p.zy) / 2.0;		
				vec2 uv2 = (1.0 + p.xz) / 2.0;		
	
				uv0 = (mat * vec3((uv0 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv1 = (mat * vec3((uv1 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;
				uv2 = (mat * vec3((uv2 * 2.0 - 1.0) / (size * 0.5), 1.0) / 2.0 + 0.5).xy;

				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));

				// Write out all sets of UVs that we generated
				writeUvs0 = uv0;
				writeUvs1 = uv1;
				writeUvs2 = uv2;
				writeWeights = weights;

				// Derivatives for LOD
				vec2 df0 = fwidth(uv0);
				vec2 df1 = fwidth(uv1);
				vec2 df2 = fwidth(uv2);
				if (df0.x > 0.5) df0.x = 0.0;
				if (df1.x > 0.5) df1.x = 0.0;
				if (df2.x > 0.5) df2.x = 0.0;

				#ifdef GL_EXT_shader_texture_lod
                	vec4 tmp = 
						texture2DLodEXT(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						texture2DLodEXT(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						texture2DLodEXT(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#else
                	vec4 tmp = 
						textureLod(tex, uv0, log2(max(df0.x, df0.y)*min(textureSize.x, textureSize.y))) * weights.z + 
						textureLod(tex, uv1, log2(max(df1.x, df1.y)*min(textureSize.x, textureSize.y))) * weights.x + 
						textureLod(tex, uv2, log2(max(df2.x, df2.y)*min(textureSize.x, textureSize.y))) * weights.y;
				#endif

				vec3 col = tmp.rgb;
				float lalpha = alpha * tmp.a;

				// Apply cropping across all 3 planes
				if ( crop > 0.5 ) {
					if ( uv0.x < 0.0 || uv0.x > 1.0 || uv0.y < 0.0 || uv0.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv1.x < 0.0 || uv1.x > 1.0 || uv1.y < 0.0 || uv1.y > 1.0 )  {
						lalpha = 0.0;
					}
					if ( uv2.x < 0.0 || uv2.x > 1.0 || uv2.y < 0.0 || uv2.y > 1.0 )  {
						lalpha = 0.0;
					}
				}

				lalpha *= mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return col;//n * 0.5 + 0.5;
			}			
			`);return{cylindrical:t,spherical:i,uv:r,triplanar:s}}();var y0=class extends cn{constructor(t,i,r,s,l,d,c,u,h,f,m,p){super("v3"),this.nodeType="Depth",this.gradientType=t,this.smooth=i,this.near=r,this.far=s,this.isVector=l,this.isWorldSpace=d,this.origin=c,this.direction=u,this.colors=h,this.steps=f,this.isMask=p,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){let r=`g${this.uuid.toString().replace(/-/g,"")}`,s=new dt(`vec3 ${r}_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[${r}_MAX_COLORS], float steps[${r}_MAX_COLORS], bool isMask, float mask, float alpha, out float calpha) {
               vec4 color = colors[0];
               #ifdef ${r}_IS_VECTOR
                   #ifdef ${r}_LINEAR
                       #ifdef ${r}_WORLDSPACE
                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);
                       #else
                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);
                       #endif
                   #else
                       #ifdef ${r}_WORLDSPACE
                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);
                       #else
                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);
                       #endif
                   #endif
               #else
                   float dist = length(vWPosition - cameraPosition);
			       float depth = ( dist - near ) / ( far - near );
               #endif


              float p;
              #ifdef ${r}_SMOOTH
				for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
						p = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}
              #else
                for ( int i = 1; i < ${r}_MAX_COLORS; i++ ) {
                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);
                   color = mix(color, colors[i], p);
                 }
              #endif

               float lalpha = alpha * color.a * mask;
               calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
			   accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
			   
               return color.rgb;
			}`,[y0.Nodes.vectorLinearWorldSpaceDepth,y0.Nodes.vectorLinearObjectSpaceDepth,y0.Nodes.vectorSphericalObjectSpaceDepth,y0.Nodes.vectorSphericalWorldSpaceDepth]);if(t.isShader("fragment")){t.define(`${r}_MAX_COLORS`,this.colors.value.length),this.smooth.value&&t.define(`${r}_SMOOTH`),this.isVector.value>.5&&t.define(`${r}_IS_VECTOR`),this.gradientType.value===0&&t.define(`${r}_LINEAR`),this.isWorldSpace.value>.5&&t.define(`${r}_WORLDSPACE`),t.require("worldPosition"),t.addFragmentVariable(this.calpha,"float");let l=t.include(s),d=[];return d.push(this.near.build(t,"f")),d.push(this.far.build(t,"f")),d.push(this.origin.build(t,"v3")),d.push(this.direction.build(t,"v3")),d.push(this.colors.build(t,"v4[]")),d.push(this.steps.build(t,"f[]")),d.push(this.isMask.build(t,"b")),d.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),d.push(this.alpha.build(t,"f")),d.push(this.calpha),t.format(l+"("+d.join(",")+")",this.getType(t),i)}else return console.warn("DepthNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},A5=y0;A5.Nodes=function(){let t=new dt(`float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),i=new dt(`float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {
               vec3 n = normalize(direction);
               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));
               return ( dist - near ) / ( far - near );
            }`),r=new dt(`float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(vWPosition - origin);
               return ( dist - near ) / ( far - near );
            }`),s=new dt(`float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {
               float dist = length(position - origin);
               return ( dist - near ) / ( far - near );
            }`);return{vectorLinearWorldSpaceDepth:t,vectorLinearObjectSpaceDepth:i,vectorSphericalWorldSpaceDepth:r,vectorSphericalObjectSpaceDepth:s}}();var yte=class extends cn{constructor(t,i,r,s,l,d,c,u){super("v3"),this.nodeType="Fresnel",this.color=t,this.bias=i,this.scale=r,this.intensity=s,this.factor=l,this.isMask=u,this.alpha=d,this.mode=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.isShader("fragment")){t.addFragmentVariable(this.calpha,"float");let r=new dt(`vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, bool isMask, float mask, float alpha, int mode, out float calpha) {
					float fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );

					float lalpha = clamp(fresnel, 0.0, 1.0) * alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return color;
				}`),s=t.include(r),l=[];return l.push(this.color.build(t,"c")),l.push(this.bias.build(t,"f")),l.push(this.scale.build(t,"f")),l.push(this.intensity.build(t,"f")),l.push(this.factor.build(t,"f")),l.push(this.isMask.build(t,"b")),l.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),l.push(this.alpha.build(t,"f")),l.push(this.mode.build(t,"i")),l.push(this.calpha),t.format(s+"("+l.join(",")+")",this.getType(t),i)}else return console.warn("FresnelNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},C5=class extends cn{constructor(t,i,r,s,l,d,c,u,h){super("v3"),this.nodeType="Gradient",this.gradientType=t,this.smooth=i,this.colors=r,this.steps=s,this.offset=l,this.morph=d,this.angle=c,this.isMask=h,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){if(t.isShader("fragment")){t.define("GRAD_MAX",10),t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let r=t.include(C5.Nodes.gradient),s=[];return s.push(this.gradientType.build(t,"i")),s.push(this.smooth.build(t,"b")),s.push(this.colors.build(t,"v4[]")),s.push(this.steps.build(t,"f[]")),s.push(this.offset.build(t,"v2")),s.push(this.morph.build(t,"v2")),s.push(this.angle.build(t,"f")),s.push(this.isMask.build(t,"b")),s.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),s.push(this.alpha.build(t,"f")),s.push(this.calpha),t.format(r+"("+s.join(",")+")",this.getType(t),i)}else return console.warn("GradientNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},E5=C5;E5.Nodes=function(){return{gradient:new dt(`vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, bool isMask, float mask, float alpha, out float calpha) {
				vec4 color = colors[0];
				vec2 m = morph / vUv.xy;
				vec2 rot = vec2( 0.5 + m.x, m.y );
				vec2 dt = vec2(
					cos( angle ) * rot.x - sin( angle ) * rot.y,
					sin( angle ) * rot.x + cos( angle ) * rot.y
				);
				vec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;
				float t = dot( pt, dt ) / dot( dt, dt );
				if ( gradientType == 1 ) {
					t = distance (
						( vUv + morph ) * 3.0,
						( vUv + offset ) + 1.0
					) + angle;
				} else if ( gradientType == 2 ) {
					float polar = atan(
						vUv.x + morph.x - 0.5 + offset.x,
						vUv.y + morph.y - 0.5 + offset.y
					) * -1.0;
					t = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );
				}

				float p;
				if (smoothed) {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
					}

				} else {
					for ( int i = 1; i < GRAD_MAX; i++ ) {
						p = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );
						color = mix(color, colors[i], p);
					}
				}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
				
				return color.xyz;
			}`)}}();var M5=class extends cn{constructor(t,i,r,s){super("v3"),this.nodeType="Matcap",this.texture=t,this.isMask=s,this.alpha=i,this.mode=r,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){if(t.isShader("fragment")){t.addFragmentVariable(this.calpha,"float");let r=t.include(M5.Nodes.matcap);t.require("normal"),t.requires.normal=!0;let s=[];return s.push(this.texture.generate(t,"t")),s.push("normal"),s.push(this.isMask.build(t,"b")),s.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),s.push(this.alpha.build(t,"f")),s.push(this.mode.build(t,"i")),s.push(this.calpha),t.format(r+"("+s.join(",")+")",this.getType(t),i)}else return console.warn("MatcapNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},T5=M5;T5.Nodes=function(){return{matcap:new dt(`vec3 matcap(sampler2D matcapTex, vec3 normal, bool isMask, float mask, float alpha, int mode, out float calpha) {
					vec3 viewDir = normalize( vViewPosition );
					vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
					vec3 y = cross( viewDir, x );
					vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks
					vec4 matcapColor = texture2D( matcapTex, uv );

					float lalpha = alpha * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));
					
					return matcapColor.rgb;
            	}`)}}();var AM=(t=>(t.SIMPLEX="simplex3d",t.SIMPLEX_FRACTAL="simplex3dFractal",t.ASHIMA="simplexAshima",t.FBM="fbm",t.PERLIN="perlin",t.VORONOI="voronoi",t))(AM||{}),ms=function(){let t=new dt(`vec3 random3(vec3 c) {
			float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
			vec3 r;
			r.z = fract(512.0*j);
			j *= .125;
			r.x = fract(512.0*j);
			j *= .125;
			r.y = fract(512.0*j);
			return r-0.5;
		}`),i=new dt(`float simplex3d(vec3 p) {
			 vec3 s = floor(p + dot(p, vec3(F3)));
			 vec3 x = p - s + dot(s, vec3(G3));
			 
			 vec3 e = step(vec3(0.0), x - x.yzx);
			 vec3 i1 = e*(1.0 - e.zxy);
			 vec3 i2 = 1.0 - e.zxy*(1.0 - e);
				
			 vec3 x1 = x - i1 + G3;
			 vec3 x2 = x - i2 + 2.0*G3;
			 vec3 x3 = x - 1.0 + 3.0*G3;
			 
			 vec4 w, d;
			 
			 w.x = dot(x, x);
			 w.y = dot(x1, x1);
			 w.z = dot(x2, x2);
			 w.w = dot(x3, x3);
			 
			 w = max(0.6 - w, 0.0);
			 
			 d.x = dot(random3(s), x);
			 d.y = dot(random3(s + i1), x1);
			 d.z = dot(random3(s + i2), x2);
			 d.w = dot(random3(s + 1.0), x3);
			 
			 w *= w;
			 w *= w;
			 d *= w;
			 
			 return dot(d, vec4(52.0));
		}`,[t]);i.keywords.F3=new un("float F3 0.3333333"),i.keywords.G3=new un("float G3 0.1666667");let r=new dt(`float simplex3dFractal(vec3 m) {
			mat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);
			mat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);
			mat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);
			return 0.5333333 * simplex3d(m * rot1)
				 + 0.2666667 * simplex3d(2.0 * m * rot2)
				 + 0.1333333 * simplex3d(4.0 * m * rot3)
				 + 0.0666667 * simplex3d(8.0 * m);
		}`,[i]),s=new dt("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),l=new dt("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),d=new dt(`float simplexAshima(vec3 v) {
		  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;
		  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);
		  vec3 i  = floor(v + dot(v, C.yyy) );
		  vec3 x0 =   v - i + dot(i, C.xxx) ;
		  vec3 g = step(x0.yzx, x0.xyz);
		  vec3 l = 1.0 - g;
		  vec3 i1 = min( g.xyz, l.zxy );
		  vec3 i2 = max( g.xyz, l.zxy );
		  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
		  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
		  vec3 x3 = x0 - 1. + 3.0 * C.xxx;
		  i = mod(i, 289.0 ); 
		  vec4 p = permute( permute( permute( 
					 i.z + vec4(0.0, i1.z, i2.z, 1.0 ))
				   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) 
				   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));
		  float n_ = 1.0/7.0; // N=7
		  vec3  ns = n_ * D.wyz - D.xzx;
		  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)
		  vec4 x_ = floor(j * ns.z);
		  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)
		  vec4 x = x_ *ns.x + ns.yyyy;
		  vec4 y = y_ *ns.x + ns.yyyy;
		  vec4 h = 1.0 - abs(x) - abs(y);
		  vec4 b0 = vec4( x.xy, y.xy );
		  vec4 b1 = vec4( x.zw, y.zw );
		  vec4 s0 = floor(b0)*2.0 + 1.0;
		  vec4 s1 = floor(b1)*2.0 + 1.0;
		  vec4 sh = -step(h, vec4(0.0));
		  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;
		  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;
		  vec3 p0 = vec3(a0.xy,h.x);
		  vec3 p1 = vec3(a0.zw,h.y);
		  vec3 p2 = vec3(a1.xy,h.z);
		  vec3 p3 = vec3(a1.zw,h.w);
		  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));
		  p0 *= norm.x;
		  p1 *= norm.y;
		  p2 *= norm.z;
		  p3 *= norm.w;
		  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);
		  m = m * m;
		  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), 
										dot(p2,x2), dot(p3,x3) ) );
		}`,[s,l]),c=new dt("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),u=new dt("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[c]),h=new dt(`float noise(vec3 p){
			vec3 a = floor(p);
			vec3 d = p - a;
			d = d * d * (3.0 - 2.0 * d);
			vec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);
			vec4 k1 = perm(b.xyxy);
			vec4 k2 = perm(k1.xyxy + b.zzww);
			vec4 c = k2 + a.zzzz;
			vec4 k3 = perm(c);
			vec4 k4 = perm(c + 1.0);
			vec4 o1 = fract(k3 * (1.0 / 41.0));
			vec4 o2 = fract(k4 * (1.0 / 41.0));
			vec4 o3 = o2 * d.z + o1 * (1.0 - d.z);
			vec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);
			return o4.y * d.y + o4.x * (1.0 - d.y);
		}`,[u]),f=new dt(`float fbm(vec3 x) {
			float v = 0.0;
			float a = 0.5;
			vec3 shift = vec3(100);
			for (int i = 0; i < NUM_OCTAVES; ++i) {
				v += a * noise(x);
				x = x * 2.0 + shift;
				a *= 0.5;
			}
			return v;
		}`,[h]);f.keywords.NUM_OCTAVES=new un("int NUM_OCTAVES 5");let m=new dt("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}"),p=new dt(`float perlin(vec3 P){
		  vec3 Pi0 = floor(P);
		  vec3 Pi1 = Pi0 + vec3(1.0);
		  Pi0 = mod(Pi0, 289.0);
		  Pi1 = mod(Pi1, 289.0);
		  vec3 Pf0 = fract(P);
		  vec3 Pf1 = Pf0 - vec3(1.0);
		  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
		  vec4 iy = vec4(Pi0.yy, Pi1.yy);
		  vec4 iz0 = Pi0.zzzz;
		  vec4 iz1 = Pi1.zzzz;
		  vec4 ixy = permute(permute(ix) + iy);
		  vec4 ixy0 = permute(ixy + iz0);
		  vec4 ixy1 = permute(ixy + iz1);
		  vec4 gx0 = ixy0 / 7.0;
		  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
		  gx0 = fract(gx0);
		  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
		  vec4 sz0 = step(gz0, vec4(0.0));
		  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
		  gy0 -= sz0 * (step(0.0, gy0) - 0.5);
		  vec4 gx1 = ixy1 / 7.0;
		  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
		  gx1 = fract(gx1);
		  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
		  vec4 sz1 = step(gz1, vec4(0.0));
		  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
		  gy1 -= sz1 * (step(0.0, gy1) - 0.5);
		  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);
		  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);
		  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);
		  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);
		  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);
		  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);
		  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);
		  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);
		  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
		  g000 *= norm0.x;
		  g010 *= norm0.y;
		  g100 *= norm0.z;
		  g110 *= norm0.w;
		  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
		  g001 *= norm1.x;
		  g011 *= norm1.y;
		  g101 *= norm1.z;
		  g111 *= norm1.w;
		  float n000 = dot(g000, Pf0);
		  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
		  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
		  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
		  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
		  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
		  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
		  float n111 = dot(g111, Pf1);
		  vec3 fade_xyz = fade(Pf0);
		  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
		  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
		  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); 
		  return 2.2 * n_xyz;
		}`,[s,l,m]),g=new dt(`float hashwithoutsine13(vec3 p3)
		{
			p3  = fract(p3 * .1031);
			p3 += dot(p3, p3.yzx + 33.33);
			return fract((p3.x + p3.y) * p3.z);
		}`),v=new dt(`vec3 hashwithoutsine33(vec3 p3)
		{
			p3 = fract(p3 * vec3(.1031, .1030, .0973));
			p3 += dot(p3, p3.yxz+33.33);
			return fract((p3.xxy + p3.yxx)*p3.zyx);
		}`),w=new dt(`float metric(in vec3 p)
		{
			// L2 
			return length(p);

			// Chebyshev 
			// vec3 a = abs(p);
			// return max(a.x, max(a.y, a.z));
		}`),x=new dt(`float smin( float a, float b, float k )
		{
			float h = smoothstep(0.0, 1.0, 0.5 + 0.5 * (b - a) / k);
			float correction = k * h * (1.0 - h);
			return mix(b, a, h) - correction;
		}`),_=new dt(`float smax( float a, float b, float k )
		{
			float h = smoothstep(1.0, 0.0, 0.5 + 0.5 * (a - b) / k);
			float correction = k * h * (1.0 - h);
			return mix(a, b, h) + correction;
		}`),k=new dt(`float remap(float value, float input_min, float input_max, float output_min, float output_max) {
			// Compute width of each interval
			float input_width = input_max - input_min;
			float output_width = output_max - output_min;
		
			// Convert input range into a 0-1 range 
			float scaled = (value - input_min) / input_width;
		
			// Convert the 0-1 range into a value in output range
			return output_min + (scaled * output_width);
		}`),A=new dt(`float voronoi(in vec3 x, in int style, in float smoothness, in float seed, in int quality) 
		{
			// Integer and fractional parts of this point's coordinates
			ivec3 p = ivec3(floor(x));
			vec3 f = fract(x);

			// Different variables that we will use to construct noise:
			//
			// f1: distance to the closest feature point
			// f2: distance to the second closest feature point
			// e: distance to the closest edge (cell boundary)
			//
			// We also compute "smooth" versions of all of the above quantites, essentially
			// replacing "hard" minimums with "smooth" minimums (described by IQ)
			float f1_smooth = 8.0;
			float f1 = 8.0;
			float f2_smooth = 8.0;
			float f2 = 8.0;
			float e_smooth = 8.0;
			float e = 8.0;

			// Variables stored from closest cell
			ivec3 mb;
			vec3 mr; 

			int steps = quality;
			
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				ivec3 b = ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d = length(r);
				
				f1_smooth = smin(d, f1_smooth, smoothness);

				// Store un-smoothed distances too 
				if (d < f1) 
				{
					f2 = f1;
					f1 = d;

					mb = ivec3(x, y, z);
					mr = r;
				} 
				else if (d < f2) 
				{
					f2 = d;
				}
			}	
			
			float id = hashwithoutsine13(vec3(p + mb) + seed);

			// Second pass for edge distance  
			for (int x = -steps; x <= steps; x++) 
			for (int y = -steps; y <= steps; y++)
			for (int z = -steps; z <= steps; z++)
			{
				// Start search at the cell that contains the closest point to "x" (found in 1st pass)
				ivec3 b = mb + ivec3(x, y, z);
				vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
				float d1 = dot(0.5 * (mr + r), (r - mr)); 				// IQ normalizes "r - mr" but that breaks things for the smooth version?
				float d2 = dot(0.5 * (mr + r), normalize(r - mr));

				e_smooth = smin(d1, e_smooth, smoothness);

				e = min(e, d2);

				// Also compute a smooth version of F2 in this pass
				{
					ivec3 b = ivec3(x, y, z);
					if (b != mb) 
					{
						vec3 r = vec3(b) + hashwithoutsine33(vec3(p + b) + seed) - f;
						float d = length(r);

						f2_smooth = smin(d, f2_smooth, smoothness);
					}
				}
			}

			// Different visualization modes 
			if (style == 0) 
			{
				return f1_smooth;
			}
			if (style == 1) 
			{
				return f2_smooth;
			}
			if (style == 2) 
			{
				return f2_smooth - f1_smooth;
				
				// "Pebbles" also cool
				//return step(0.2, f2_smooth - f1_smooth);
			}
			if (style == 3) 
			{
				// This one is really good for rock / stone effects
				float a = f1; 
				float b = f2;
				float k = 3.0;
				float h = max(k - abs(a - b), 0.0) / k;
				float final = min(a, b) - h * h * k * (1.0 / 4.0);
				return final;
			}
			if (style == 4) 
			{
				// Some random adjustments to make this style stand out more 
				return exp(5.0 * e_smooth);
			}
			if (style == 5) 
			{
				return pow(f1_smooth, 3.0);
			}
			if (style == 6) 
			{				
				const float eps = 0.0125;

				// Thicker lines as the user increases the smoothness slider
				float thickness = smoothness * 0.25 + eps;

				// Blurrier lines as the user increases the smoothness slider
				float blur = pow(smoothness, 3.0) * 0.25 + eps;

				return smoothstep(
					thickness - thickness * blur, 
					thickness + thickness * blur, 
					e
				);
			}
			if (style == 7) 
			{
				return hashwithoutsine13(vec3(p + mb) + seed);
			}
		}
	`,[g,v,w,x,_,k]);return{simplex:i,simplexFractal:r,simplexAshima:d,fbm:f,perlin:p,voronoi:A}}(),D5=class extends cn{constructor(t,i,r,s,l,d,c,u,h,f,m,p,g,v,w,x,_,k,A){super("v3"),this.nodeType="Noise",this.scale=t,this.size=i,this.move=r,this.fA=s,this.fB=l,this.distortion=d,this.colorA=c,this.colorB=u,this.colorC=h,this.colorD=f,this.noiseType=p,this.voronoiStyle=v,this.highCut=w,this.lowCut=x,this.smoothness=_,this.seed=k,this.quality=A,this.isMask=g,this.alpha=m,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i,r,s,l){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let d=Object.values(AM)[this.noiseType.value],c=d=="voronoi"?`
		float v = ${d}(st + move, voronoiStyle, smoothness, seed, quality);

		// Apply clipping to colors
		v = remap(v, lowCut, highCut, 0.0, 1.0);
		v = smax(v, 0.0, smoothness * 0.25);
		v = smin(v, 1.0, smoothness * 0.25);

		// Note that the voronoi mode only uses colors "A" and "C" from the UI 
		vec4 color = mix(colorA, colorC, v); 
		`:`
		vec3 q = vec3(${d}(st),
					   ${d}(st + vec3(1.0)),
					   ${d}(st + vec3(1.0)));
		vec3 r = vec3(${d}(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),
					  ${d}(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), 
					  ${d}(st * q));
		float f = ${d}(st + r);
		vec4 color;
		color = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));
		color = mix(color, colorC, clamp(length(q), 0.0, 1.0));
		color = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));
		`,u=new dt(`vec3 ${d}customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, int voronoiStyle, float highCut, float lowCut, float smoothness, float seed, int quality, bool isMask, float mask, float alpha, out float calpha) 
			{
                // Prevent scale of zero 
				scale = max(abs(scale), 0.001);

				vec3 st = position / size;
				st /= scale;

				${c}

				float lalpha = alpha * color.a * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return clamp(color, 0.0, 1.0).rgb;
			}`,[ms.simplex,ms.simplexFractal,ms.simplexAshima,ms.fbm,ms.perlin,ms.voronoi]),h=t.include(u),f=[];return f.push(this.scale.build(t,"f")),f.push(this.size.build(t,"v3")),f.push(this.move.build(t,"f")),f.push(this.fA.build(t,"v2")),f.push(this.fB.build(t,"v2")),f.push(this.distortion.build(t,"v2")),f.push(this.colorA.build(t,"v4")),f.push(this.colorB.build(t,"v4")),f.push(this.colorC.build(t,"v4")),f.push(this.colorD.build(t,"v4")),f.push(this.voronoiStyle.build(t,"i")),f.push(this.highCut.build(t,"f")),f.push(this.lowCut.build(t,"f")),f.push(this.smoothness.build(t,"f")),f.push(this.seed.build(t,"f")),f.push(this.quality.build(t,"i")),f.push(this.isMask.build(t,"b")),f.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),f.push(this.alpha.build(t,"f")),f.push(this.calpha),t.format(h+"("+f.join(",")+")",this.getType(t),i)}};D5.numOctaves=5;var P5=class extends cn{constructor(t,i,r,s,l,d,c,u,h,f,m,p,g,v,w,x){super("v3"),this.nodeType="Outline",this.firstTime=!0,this.outlineColor=t,this.contourColor=i,this.outlineWidth=r,this.contourWidth=s,this.contourThreshold=l,this.outlineThreshold=d,this.contourFrequency=c,this.outlineSmoothing=u,this.contourDirection=h,this.positionalLines=f,this.compensation=m,this.resolution=p,this.normalMap=g,this.depthMap=v,this.pixelRatio=w,this.alpha=x,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){let r=`g${this.uuid.toString().replace(/-/g,"")}`;if(t.require("vWorldViewDir"),t.require("worldNormal"),t.extensions.derivatives=!0,this.compensation.value&&t.define("OUTLINE_COMPENSATION",`${r}_offset`),this.firstTime){let s=this.outlineWidth.build(t,"f"),l=this.resolution.build(t,"v2"),d=this.compensation.build(t,"b"),c=this.pixelRatio.build(t,"f");t.addVertexParsVariable("randomColor","attribute vec3"),t.addVertexParsVariable("extrudeNormal","attribute vec3"),t.addVertexParsVariable(s,"uniform float"),t.addVertexParsVariable(l,"uniform vec2"),t.addVertexParsVariable(d,"uniform bool"),t.addVertexParsVariable(c,"uniform float"),t.addVertexParsVariable("vID","flat out float"),t.addFragmentParsVariable("vID","flat in float"),t.addVertexFinalCode(`
                vID = randomColor.r;
                vec2 ${r}_offset = vec2(0.0);
                if (${d}) {
                    vec4 ${r}_clipPosition = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
                    // NOTE: For certain shapes, like spheres, we get incorrect extrusion when the
                    // normals face the camera directly. So we hackily fix this by offsetting the normal
                    // by a tiny amount.
                    vec3 ${r}_clipNormal = mat3(projectionMatrix) * (mat3(modelViewMatrix) * extrudeNormal) + 0.0000001;
                    ${r}_offset = normalize(${r}_clipNormal.xy) / ${l} * (${s} / 2.0) * ${r}_clipPosition.w * 2.0 * ${c};
                    ${r}_clipPosition.xy += ${r}_offset;
                    // TODO(MAX): To handle multiple outline layers, we only want to extrude
                    // if this offset is the biggest of all the potential offsets
                    gl_Position = ${r}_clipPosition;
                }
            `)}if(t.isShader("fragment")){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let s=t.include(P5.Nodes.outline),l=[];return l.push(this.outlineColor.build(t,"c")),l.push(this.contourColor.build(t,"c")),l.push(this.outlineWidth.build(t,"f")),l.push(this.contourWidth.build(t,"f")),l.push(this.contourThreshold.build(t,"f")),l.push(this.outlineThreshold.build(t,"f")),l.push(this.contourFrequency.build(t,"f")),l.push(this.outlineSmoothing.build(t,"f")),l.push(this.contourDirection.build(t,"v3")),l.push(this.positionalLines.build(t,"b")),l.push(this.resolution.build(t,"v2")),l.push(this.normalMap.getTexture(t,"t")),l.push(this.depthMap.getTexture(t,"t")),l.push(this.pixelRatio.build(t,"f")),l.push(this.compensation.build(t,"b")),l.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),l.push(this.alpha.build(t,"f")),l.push(this.calpha),this.firstTime=!this.firstTime,t.format(s+"("+l.join(",")+")",this.getType(t),i)}else return console.warn("OutlineNode is not compatible with "+t.shader+" shader."),""}},O5=P5;O5.Nodes=function(){let t=new dt(`
float sobelSample(sampler2D t, sampler2D d, vec2 uv, vec2 resolution, float outlineWidth, float pixelRatio)
{
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    vec2 texelSize = (vec2(1.0) / resolution);
    vec2 offsetSize = texelSize * outlineWidth * pixelRatio;

    vec2 uvSamples[9];
    vec4 normalSamples[9];

	uvSamples[0] = uv + vec2( -offsetSize.x, -offsetSize.y) + (vogelDiskSample(0, 9, temporalAngle) * texelSize);
	uvSamples[1] = uv + vec2(0.0, -offsetSize.y) + (vogelDiskSample(1, 9, temporalAngle) * texelSize);
	uvSamples[2] = uv + vec2(  offsetSize.x, -offsetSize.y) + (vogelDiskSample(2, 9, temporalAngle) * texelSize);
	uvSamples[3] = uv + vec2( -offsetSize.x, 0.0) + (vogelDiskSample(3, 9, temporalAngle) * texelSize);
	uvSamples[4] = uv;
	uvSamples[5] = uv + vec2(  offsetSize.x, 0.0) + (vogelDiskSample(5, 9, temporalAngle) * texelSize);
	uvSamples[6] = uv + vec2( -offsetSize.x, offsetSize.y) + (vogelDiskSample(6, 9, temporalAngle) * texelSize);
	uvSamples[7] = uv + vec2(0.0, offsetSize.y) + (vogelDiskSample(7, 9, temporalAngle) * texelSize);
	uvSamples[8] = uv + vec2(  offsetSize.x, offsetSize.y) + (vogelDiskSample(8, 9, temporalAngle) * texelSize);


    normalSamples[0] = texture2D(t, uvSamples[0]);
    normalSamples[1] = texture2D(t, uvSamples[1]);
    normalSamples[2] = texture2D(t, uvSamples[2]);
    normalSamples[3] = texture2D(t, uvSamples[3]);
    normalSamples[4] = texture2D(t, uvSamples[4]);
    normalSamples[5] = texture2D(t, uvSamples[5]);
    normalSamples[6] = texture2D(t, uvSamples[6]);
    normalSamples[7] = texture2D(t, uvSamples[7]);
    normalSamples[8] = texture2D(t, uvSamples[8]);

    float depthBias = 0.0001;
    // TODO(MAX): Can we somehow reduce the number of conditionals here with MATH?!
    if (normalSamples[0].a != vID && normalSamples[0].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[0]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[1].a != vID && normalSamples[1].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[1]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[2].a != vID && normalSamples[2].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[2]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[3].a != vID && normalSamples[3].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[3]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }


    if (normalSamples[4].a != vID && normalSamples[4].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[4]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[5].a != vID && normalSamples[5].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[5]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[6].a != vID && normalSamples[6].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[6]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[7].a != vID && normalSamples[7].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[7]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    if (normalSamples[8].a != vID && normalSamples[8].a != 0.0) {
        float depthAtSample = texture2D(d, uvSamples[8]).r + depthBias;
        if (gl_FragCoord.z > depthAtSample) {
           return 0.0;
        }
    }

    vec3 sobel_edge_h = normalSamples[2].rgb + (2.0*normalSamples[5].rgb) + normalSamples[8].rgb - (normalSamples[0].rgb + (2.0*normalSamples[3].rgb) + normalSamples[6].rgb);
  	vec3 sobel_edge_v = normalSamples[0].rgb + (2.0*normalSamples[1].rgb) + normalSamples[2].rgb - (normalSamples[6].rgb + (2.0*normalSamples[7].rgb) + normalSamples[8].rgb);

    float edgeNormal = sqrt(dot(sobel_edge_h, sobel_edge_h) + dot(sobel_edge_v, sobel_edge_v));
    return edgeNormal;
}
`);return{outline:new dt(`vec3 outline(vec3 outlineColor, vec3 contourColor, float outlineWidth, float contourWidth, float outlineThreshold, float contourThreshold, float outlineSmoothing, float contourFrequency, vec3 contourDirection, bool positionalLines, vec2 resolution, sampler2D normalMap, sampler2D depthMap, float pixelRatio, bool compensation, float mask, float alpha, out float calpha) {
                vec3 result = outlineColor;
                float resultAlpha = 0.0;

                vec3 N = normalize(vWNormal);
                vec2 nuv = (gl_FragCoord.xy / resolution);
                float sobelSample = compensation ? sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth / 2., pixelRatio) : sobelSample(normalMap, depthMap, nuv, resolution, outlineWidth, pixelRatio);
                resultAlpha = smoothstep(outlineThreshold - outlineSmoothing, outlineThreshold + outlineSmoothing, sobelSample);

                //resultAlpha = 1.0;
                //result = vec3(sobelSample);

                float t = 1.0 - contourThreshold;
                if(positionalLines) {
                    vec3 NDir = position * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float f  = fract(NT * contourFrequency * 0.01);
                    float df = fwidth(NT * contourFrequency);

                    float g = smoothstep(df * (contourWidth * 0.01), df * (contourWidth * 0.01 * 2.0), f);
                    if (g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0;
                    }
                 }
                 else {
                    vec3 NDir = N * contourDirection;
                    float NT = NDir.x + NDir.y + NDir.z;
                    float df = fwidth(NT * contourThreshold);
                    float f = sin(NT * 1.0 * contourFrequency);
                    float g = smoothstep(0.0, df * contourWidth, 1.0 - f);

                    if (df > (t * 0.5) && g < 1.0 && resultAlpha == 0.0) {
                        result = contourColor;
                        resultAlpha = 1.0 - g;
                    }
                 }

                 float lalpha = alpha * resultAlpha * mask;
                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;
				 
                 return result;
             }`,[t])}}();var Rd=class extends cn{constructor(t,i,r,s,l,d,c,u,h,f,m,p,g,v,w,x,_,k){super("v3"),this.nodeType="Pattern",this.style=t,this.projection=i,this.axis=r,this.blending=s,this.offset=l,this.colorA=d,this.colorB=c,this.frequency=u,this.size=h,this.variation=f,this.smoothness=m,this.zigzag=p,this.rotation=g,this.vertical=v,this.horizontal=w,this.sides=x,this.isMask=k,this.alpha=_,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){if(t.isShader("fragment")){t.require("position"),t.require("uv"),t.requires.uv=[!0],t.require("normal"),t.requires.normal=!0,t.addFragmentVariable(this.calpha,"float");let r;switch(this.style.value){case 0:r="circle";break;case 1:r="ring";break;case 2:r="polygon";break;case 3:r="xcross";break;case 4:r="diamond";break;case 5:r="checkerboard";break;case 6:r="line";break;case 7:r="wave";break;default:r="circle";break}let s=`g${this.uuid.toString().replace(/-/g,"")}`,l=new dt(`float hashwithoutsine12(vec2 p)
				{
					vec3 p3 = fract(vec3(p.xyx) * .1031);
					p3 += dot(p3, p3.yzx + 33.33);
					return fract((p3.x + p3.y) * p3.z);
				}`),d=new dt(`vec2 rotate_uv(in vec2 uv, float a, bool repeat) 
				{
					const float mid = 0.5;
					float radians = a * (PI / 180.0);
					vec2 rotated = vec2(
						cos(radians) * (uv.x - mid) + sin(radians) * (uv.y - mid) + mid,
						cos(radians) * (uv.y - mid) - sin(radians) * (uv.x - mid) + mid
					);
					return repeat ? fract(rotated): rotated;
				}`),c="";if(this.projection.value===4){let m=this.style.value===2?`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv0, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,p=this.style.value===2?`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv1, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,g=this.style.value===2?`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(uv2, frequency, size, variation, smoothness_remapped, zigzag, rotation)`;c=`
				vec3 p = position;
				float factor = 0.0125;
				vec2 uv0 = fract(p.xy * factor);
				vec2 uv1 = fract(p.zy * factor);
				vec2 uv2 = fract(p.xz * factor);
				
				uv0 = rotate_uv(uv0 + offset, rotation, true);
				uv1 = rotate_uv(uv1 + offset, rotation, true);
				uv2 = rotate_uv(uv2 + offset, rotation, true);
	
				float d0 = ${m};
				float d1 = ${p};
				float d2 = ${g};
				
				// Range from 3 to 128 seems to be good
				float exponent = (1.0 - blending) * 125.0 + 3.0;

				vec3 n = vObjectNormal;
				vec3 weights = abs(normalize(n));
				weights = pow(weights, vec3(exponent));
				weights /= dot(weights, vec3(1.0));
				d0 *= weights.z;
				d1 *= weights.x;
				d2 *= weights.y;
				float draw = d0 + d1 + d2;
	
				vec2 custom_uv = uv0 * weights.z + uv1 * weights.x + uv2 * weights.y;
				`}else{let m=this.style.value===2?`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation, sides)`:`${r}(custom_uv, frequency, size, variation, smoothness_remapped, zigzag, rotation)`,p="";this.axis.value===0?p=`float radius = length(p);
					float theta = atan(p.y, p.z);
					float phi = acos(p.x / radius);`:this.axis.value===1?p=`float radius = length(p);
					float theta = atan(p.x, p.z);
					float phi = acos(p.y / radius);`:(this.axis.value,p=`float radius = length(p);
					float theta = atan(p.y, p.x);
					float phi = acos(p.z / radius);`);let g="";switch(this.projection.value){case 0:g="custom_uv = vUv.st;";break;case 1:break;case 2:g=`
							vec3 p = position;
							${p}
							custom_uv = vec2(theta, phi);
							custom_uv /= PI;
							`;break;case 3:break;default:break}c=`
				vec2 custom_uv;
				${g}
	
				custom_uv += offset;
				custom_uv = fract(custom_uv);
				custom_uv = rotate_uv(custom_uv, rotation, true);
	
				float draw = ${m};
				`}let u=new dt(`vec3 ${s}_pattern(vec3 normal, float blending, int style, vec2 offset, vec4 colorA, vec4 colorB, vec2 frequency, float size, float variation, float smoothness, float zigzag, float rotation, vec2 vertical, vec2 horizontal, int sides, bool isMask, float mask, float alpha, out float calpha) {
					const float TWO_PI = PI * 2.0;
					float smoothness_remapped = pow(smoothness, 5.0);	

					${c}

					// Construct final output color
					vec4 color = mix(colorA, colorB, draw);
					color.a = clamp(color.a, 0.0, 1.0);

					// Apply cuts
					color.a *= 
						step(vertical.x, custom_uv.y) * 
						step(custom_uv.y, vertical.y);
					color.a *= 
						step(horizontal.x, abs(custom_uv.x)) * 
						step(abs(custom_uv.x), horizontal.y);

					// Accumulate alpha 
					float lalpha = alpha * clamp(color.a, 0.0, 1.0) * mask;
					calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
					accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

					return clamp(color, 0.0, 1.0).rgb;
				}`,[d,l,Rd.DrawFunctions.circle,Rd.DrawFunctions.ring,Rd.DrawFunctions.polygon,Rd.DrawFunctions.cross,Rd.DrawFunctions.diamond,Rd.DrawFunctions.checkerboard,Rd.DrawFunctions.line,Rd.DrawFunctions.wave]),h=t.include(u),f=[];return f.push("normal"),f.push(this.blending.build(t,"f")),f.push(this.style.build(t,"i")),f.push(this.offset.build(t,"v2")),f.push(this.colorA.build(t,"v4")),f.push(this.colorB.build(t,"v4")),f.push(this.frequency.build(t,"v2")),f.push(this.size.build(t,"f")),f.push(this.variation.build(t,"f")),f.push(this.smoothness.build(t,"f")),f.push(this.zigzag.build(t,"f")),f.push(this.rotation.build(t,"f")),f.push(this.vertical.build(t,"v2")),f.push(this.horizontal.build(t,"v2")),f.push(this.sides.build(t,"i")),f.push(this.isMask.build(t,"b")),f.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),f.push(this.alpha.build(t,"f")),f.push(this.calpha),t.format(h+"("+f.join(",")+")",this.getType(t),i)}else return console.warn("PatterNode is not compatible with "+t.shader+" shader."),t.format("vec3(0.0)",this.getType(t),i)}},I5=Rd;I5.DrawFunctions=function(){let t=new dt(`float hashwithoutsine12(vec2 p) {
				vec3 p3 = fract(vec3(p.xyx) * 0.1031);
				p3 += dot(p3, p3.yzx + 33.33);
				return fract((p3.x + p3.y) * p3.z);
			}`),i=new dt(`vec2 tile_and_center(in vec2 uv, in vec2 frequency, in float variation, in float zigzag, in float rotation) {
                // Create tiles in UV-space
                uv *= frequency;

                // Integer coords
                vec2 i = floor(uv);

                // Offset every other row based on zigzag param, then compute fractional coords
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = fract(uv);

				// Rotate the tile itself:
				// const float mid = 0.5;
				// f = vec2(
				// 	cos(rotation) * (f.x - mid) + sin(rotation) * (f.y - mid) + mid,
				// 	cos(rotation) * (f.y - mid) - sin(rotation) * (f.x - mid) + mid
				// );
				// f = fract(f);

                f = f * 2.0 - 1.0;

				// Recompute integer coords after shifting - then, random value per tile 
				i = floor(uv);
				float rand = (hashwithoutsine12(i) * 5.0 + 1.0);
				float jitter = mix(1.0, rand, variation);
				f *= jitter;

                return f;
            }`,[t]),r=new dt(`float circle(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(
                    -smoothness, 
                     smoothness, 
                     length(f) - size
                );
            }`,[i]),s=new dt(`float ring(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);

				float d = length(f);
                const float inner_width = 0.5;

                float outer = smoothstep(-smoothness, smoothness, d - size);
                float inner = smoothstep(-smoothness, smoothness, d - size * inner_width);
				return outer + (1.0 - inner);   
            }`,[i]),l=new dt(`float sdf_ngon(in vec2 p, in float r, in int n) {
                float an = (PI * 2.0) / float(n);
                float he = r * tan(0.5 * an);
                
                // Rotate to first sector
                p = -p.yx; 
                float bn = an * floor((atan(p.y, p.x) + 0.5 * an) / an);
                vec2  cs = vec2(cos(bn), sin(bn));
                p = mat2(cs.x, -cs.y, cs.y, cs.x)*p;
            
                // Side of polygon
                return length(p - vec2(r, clamp(p.y, -he, he))) * sign(p.x - r);
            }
            
            float polygon(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation, in int sides) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_ngon(f, size, sides));
            }`,[i]),d=new dt(`float sdf_cross(in vec2 p, in vec2 b, float r ) {
                p = abs(p); 
				p = (p.y > p.x) ? p.yx : p.xy;
                vec2  q = p - b;
                float k = max(q.y, q.x);
                vec2  w = (k > 0.0) ? q : vec2(b.y - p.x, -k);
                return sign(k) * length(max(w, 0.0)) + r;
            }
            
            // Avoid namespace conflicts 
            float xcross(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
                return smoothstep(-smoothness, smoothness, sdf_cross(f, vec2(size, size * 0.25), smoothness));
            }`,[i]),c=new dt(`float ndot(vec2 a, vec2 b) { 
                return a.x*b.x - a.y*b.y; 
            }
            
            float sdf_diamond(in vec2 p, in vec2 b) {
                p = abs(p);
                float h = clamp(ndot(b - 2.0 * p, b) / dot(b, b), -1.0, 1.0);
                float d = length(p - 0.5 * b * vec2(1.0 - h, 1.0 + h));
                return d * sign(p.x * b.y + p.y * b.x - b.x * b.y);
            }

            float diamond(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, variation, zigzag, rotation);
	            return smoothstep(-smoothness, smoothness, sdf_diamond(f, vec2(size)));
            }`,[i]),u=new dt(`float checkerboard(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                uv *= frequency;
                vec2 i = floor(uv);

                float offset = mod(i.y, 2.0);

                uv.x += offset + zigzag * offset;
                float x = floor(uv.x);
                
                return mod(x, 2.0);
            }`),h=new dt(`float line(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                vec2 f = tile_and_center(uv, frequency, 0.0, zigzag, rotation);
				
				// Different approach for variation param here
				float row = floor(uv * frequency).y;
				float rand = hashwithoutsine12(vec2(row));
				float s = mix(size, size * rand, variation);

				return smoothstep(
					s - smoothness, 
					s + smoothness, 
					abs(f.y)
				);
            }`,[i]),f=new dt(`// Uses bisection 
            float udf_cos(in vec2 p, in float a, in float b, in float c, in float d) {
                // Convert all data to a primitive cosine wave
                p = c * (p - vec2(d, a));
                
                const float TWO_PI = PI * 2.0;

                // Reduce to principal half cycle
                p.x = mod(p.x, TWO_PI); 
                if (p.x > PI) {
                    p.x = TWO_PI - p.x;
                }
            
                // Find zero of derivative (minimize distance)
                float xa = 0.0;
                float xb = TWO_PI;

                // 24 bit precision
                for (int i = 0; i < 24; i++) {
                    float x = 0.5 * (xa + xb);
                    float y = x - p.x + b * c * sin(x) * (p.y - b * c * cos(x));
                    if (y < 0.0) xa = x; 
                    else xb = x;
                }
                float x = 0.5 * (xa + xb);
                
                // Compute distance    
                vec2 q = vec2(x, b * c * cos(x));
                return length(p - q) / c;
            }

            float wave(in vec2 uv, in vec2 frequency, in float size, in float variation, in float smoothness, in float zigzag, in float rotation) {
                float repeat = frequency.x;
                uv *= repeat;
                vec2 i = floor(uv);
                float row_offset = mod(i.y, 2.0);
                uv.x += row_offset * zigzag;
                vec2 f = vec2(uv.x, fract(uv.y));

                // Generalized cosine: y(x) = a + b * cos(cx + d)
                const float amplitude = 0.125;
                float wave_frequency = frequency.y * 0.1;
                float distance_estimate = udf_cos(f, 0.50, amplitude, wave_frequency * (2.0 * PI), 0.0);

				// Different approach for variation param here
				float rand = hashwithoutsine12(vec2(i.y));
				float s = mix(size, size * rand, variation);

                return smoothstep(-smoothness, smoothness, distance_estimate - s * 0.5);
            }`);return{tileAndCenter:i,circle:r,ring:s,polygon:l,cross:d,diamond:c,checkerboard:u,line:h,wave:f}}();var R5=class extends cn{constructor(t,i,r,s,l,d,c,u){super("v3"),this.nodeType="Rainbow",this.filmThickness=t,this.movement=i,this.wavelengths=r,this.noiseStrength=s,this.noiseScale=l,this.offset=d,this.isMask=u,this.alpha=c,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){if(t.require("vWorldViewDir"),t.require("worldNormal"),t.isShader("fragment")){t.require("uv"),t.requires.uv=[!0],t.addFragmentVariable(this.calpha,"float");let r=t.include(R5.Nodes.rainbow),s=[];return s.push(this.filmThickness.build(t,"f")),s.push(this.movement.build(t,"f")),s.push(this.wavelengths.build(t,"v3")),s.push(this.noiseStrength.build(t,"f")),s.push(this.noiseScale.build(t,"f")),s.push(this.offset.build(t,"v3")),s.push(this.isMask.build(t,"b")),s.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),s.push(this.alpha.build(t,"f")),s.push(this.calpha),t.format(r+"("+s.join(",")+")",this.getType(t),i)}else return console.warn("RainbowNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},z5=R5;z5.Nodes=function(){let t=new dt(`vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {
                 vec3 st = position / noiseScale;
				 vec3 q = vec3(simplex3d(st),
							  simplex3d(st + vec3(1.0)),
							  simplex3d(st + vec3(1.0)));

				 vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),
							  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),
							  simplex3d(st * q));

                 float noise = simplex3d(st + r);

                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);
             }`,[ms.simplex]);return{rainbow:new dt(`vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, bool isMask, float mask, float alpha, out float calpha) {
				vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);

				float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);

				float lalpha = alpha * rainbowContribution * mask;
				calpha = mix(lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0), lalpha, float(isMask));
				accumAlpha += (1.0 - accumAlpha) * lalpha * (1.0 - float(isMask));

				return res;
             }`,[t])}}();var L5=class extends cn{constructor(t,i,r,s,l,d,c,u,h,f){super("v3"),this.nodeType="Toon",this.positioning=t,this.colors=i,this.steps=r,this.source=s,this.isWorldSpace=l,this.noiseStrength=d,this.noiseScale=c,this.shadowColor=u,this.offset=h,this.alpha=f,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){if(t.require("worldNormal"),t.require("worldPosition"),t.isShader("fragment")){t.define("COLORS_MAX",10),t.addFragmentVariable(this.calpha,"float");let r=t.include(L5.Nodes.toon),s=[];return s.push(this.positioning.build(t,"i")),s.push(this.colors.build(t,"v4[]")),s.push(this.steps.build(t,"f[]")),s.push(this.source.build(t,"v3")),s.push(this.isWorldSpace.build(t,"b")),s.push(this.noiseStrength.build(t,"f")),s.push(this.noiseScale.build(t,"f")),s.push(this.shadowColor.build(t,"v4")),s.push(this.offset.build(t,"v3")),s.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),s.push(this.alpha.build(t,"f")),s.push(this.calpha),t.format(r+"("+s.join(",")+")",this.getType(t),i)}else return console.warn("ToonNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},B5=L5;B5.Nodes=function(){let t=new dt(`float rand(float n) {
				return fract(sin(n) * 43758.5453123);
			}`),i=new dt(`float hash1(float p) { 
				p = fract(p * 0.011); 
				p *= p + 7.5; 
				p *= p + p; 
				return fract(p); 
			}`),r=new dt(`float valueNoise(vec3 x) {
				const vec3 step = vec3(110, 241, 171);
			
				vec3 i = floor(x);
				vec3 f = fract(x);
			 
				// For performance, compute the base input to a 1D hash from the integer part of the argument and the 
				// incremental change to the 1D based on the 3D -> 1D wrapping
				float n = dot(i, step);
			
				vec3 u = f * f * (3.0 - 2.0 * f);
				return mix(mix(mix( hash1(n + dot(step, vec3(0, 0, 0))), hash1(n + dot(step, vec3(1, 0, 0))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 0))), hash1(n + dot(step, vec3(1, 1, 0))), u.x), u.y),
						   mix(mix( hash1(n + dot(step, vec3(0, 0, 1))), hash1(n + dot(step, vec3(1, 0, 1))), u.x),
							   mix( hash1(n + dot(step, vec3(0, 1, 1))), hash1(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);
			}`,[i]),s=new dt(`vec3 hash3(vec3 x) {
				x = vec3(dot(x,vec3(127.1, 311.7, 74.7)),
						 dot(x,vec3(269.5, 183.3, 246.1)),
						 dot(x,vec3(113.5, 271.9, 124.6)));
			
				return fract(sin(x)*43758.5453123);
			}`),l=new dt(`vec3 voronoiNoise(in vec3 x)
			{
				vec3 p = floor(x);
				vec3 f = fract(x);

				float id = 0.0;
				vec2 res = vec2(100.0);

				for(int k=-1; k<=1; k++)
				for(int j=-1; j<=1; j++)
				for(int i=-1; i<=1; i++)
				{
					vec3 b = vec3(float(i), float(j), float(k));

					// Comment out the "+ hash(p + b);" part below to get "square" cells
					vec3 r = vec3(b) - f + hash3(p + b);
					float d = dot(r, r);

					if (d < res.x)
					{
						id = dot(p + b, vec3(1.0, 57.0, 113.0));
						res = vec2(d, res.x);			
					}
					else if (d < res.y)
					{
						res.y = d;
					}
				}

				return vec3(sqrt(res), abs(id));
			}
			`,[s]);return{toon:new dt(`vec3 toon(int positioning, vec4 colors[COLORS_MAX], float steps[COLORS_MAX], vec3 source, bool isWorldSpace, float noiseStrength, float noiseScale, vec4 shadowColor, vec3 offset, float mask, float alpha, out float calpha) {
				float t = 0.0;
				float shadow = 1.0;

				if (positioning == 0) {

					// Can't do this mode if lighting is "none"
					#if (defined(PHONG) || defined(LAMBERT) || defined(STANDARD))

						// Algorithm from Chapter 10 of Graphics Shaders
						const vec3 weights = vec3(0.2125, 0.7154, 0.0721);
						vec3 lpos;
						vec3 l;
						float dproduct;

						#if (NUM_POINT_LIGHTS > 0)

							#if defined(USE_SHADOWMAP) && (NUM_POINT_LIGHT_SHADOWS > 0)
								PointLightShadow pointLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_POINT_LIGHTS; i++) {
								// Light positions are in view-space for some reason?
								lpos = (inverse(viewMatrix) * vec4(pointLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								
								// TODO: we want to use "intensity" but it isn't available in the shader code
								//dproduct += dot(pointLights[UNROLLED_LOOP_INDEX].color, weights);

								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS)
									pointLightShadow = pointLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getPointShadow( 
											pointShadowMap[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowMapSize, 
											pointLightShadow.shadowBias, 
											pointLightShadow.shadowRadius,
											vPointShadowCoord[UNROLLED_LOOP_INDEX], 
											pointLightShadow.shadowCameraNear, 
											pointLightShadow.shadowCameraFar);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_DIR_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_DIR_LIGHT_SHADOWS > 0)
								DirectionalLightShadow directionalLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_DIR_LIGHTS; i++) {
								// Use the direction vector for directional lights instead
								l = (inverse(viewMatrix) * vec4(directionalLights[UNROLLED_LOOP_INDEX].direction, 0.0)).xyz;
		
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS)
									directionalLightShadow = directionalLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow( 
										UNROLLED_LOOP_INDEX,
										directionalShadowMap[UNROLLED_LOOP_INDEX], 
										directionalLightShadow.shadowMapSize, 
										directionalLightShadow.shadowBias, 
										directionalLightShadow.shadowRadius, 
										vDirectionalShadowCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						#if NUM_SPOT_LIGHTS > 0 
							
							#if defined(USE_SHADOWMAP) && (NUM_SPOT_LIGHT_SHADOWS > 0)
								SpotLightShadow spotLightShadow;
							#endif 

							#pragma unroll_loop_start
							for (int i = 0; i < NUM_SPOT_LIGHTS; i++) {
								lpos = (inverse(viewMatrix) * vec4(spotLights[UNROLLED_LOOP_INDEX].position, 1.0)).xyz;
								l = normalize(lpos - worldPosition);
								
								dproduct = dot(l, normalize(worldNormal)) * 0.5 + 0.5;
								t = max(t, dproduct);

								// Accumulate shadow contribution
								#if defined(USE_SHADOWMAP) && (UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS)
									spotLightShadow = spotLightShadows[UNROLLED_LOOP_INDEX];
									shadow *= getShadow(
										UNROLLED_LOOP_INDEX,
										spotShadowMap[UNROLLED_LOOP_INDEX], 
										spotLightShadow.shadowMapSize, 
										spotLightShadow.shadowBias, 
										spotLightShadow.shadowRadius, 
										vSpotLightCoord[UNROLLED_LOOP_INDEX]);
								#endif
							}
							#pragma unroll_loop_end

						#endif

						t = clamp(t, 0.0, 1.0);
				
					#endif

				} else if (positioning == 1) {
					
					vec3 origin = mix(position, worldPosition, float(isWorldSpace));
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	

				} else {

					vec3 origin = worldPosition;
					vec3 source = cameraPosition - offset;
					vec3 direction = normalize(source - origin);
					t = dot(direction, normalize(worldNormal)) * 0.5 + 0.5;	
					
				}

				if (noiseStrength > 0.0) {
					// Distort with noise
					vec3 st = position / noiseScale;
					
					// Voronoi "smooth" noise
					float noise = 1.0 - voronoiNoise(st).x;

					// Voronoi cellular noise
					//float noise = 1.0 - rand(voronoiNoise(st).z);

					// Position warp noise
					// vec3 offset = vec3(
					// 	simplex3d(st),
					// 	simplex3d(st + vec3(111.1, 143.89, 217.19)),
					// 	simplex3d(st + vec3(171.1, 247.89, 117.23))
					// );
					// st += offset;
					// float noise = valueNoise(st);

					t += noise * noiseStrength;
				}

				t = clamp(t, 0.0, 1.0);

				// Compute ramp color
				float p;
				vec4 color = colors[0];
				for (int i = 1; i < COLORS_MAX; i++) {
					p = clamp((t - steps[i-1]) / (steps[i] - steps[i-1]), 0.0, 1.0);
					color = mix(color, colors[i], smoothstep(0.0, 1.0, p));
				}

				// Incorporate custom shadow color
				if (positioning == 0) {

					vec3 blendedShadow = mix(color.rgb, shadowColor.rgb, shadowColor.a);
					color.rgb = mix(blendedShadow, color.rgb, shadow);
				
				}

				// Accumulate alpha as usual
				float lalpha = alpha * color.a * mask;
				calpha =  lalpha / clamp(lalpha + accumAlpha, 0.00001, 1.0);
				accumAlpha += (1.0 - accumAlpha) * lalpha;

				return color.xyz;

            }`,[ms.simplex,t,r,l])}}();var bte=function(){return{textureBicubic:new dt(`float w0( float a ) {
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
        }
    
        float w1( float a ) {
            return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
        }
    
        float w2( float a ){
            return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
        }
    
        float w3( float a ) {
            return ( 1.0 / 6.0 ) * ( a * a * a );
        }
    
        // g0 and g1 are the two amplitude functions
        float g0( float a ) {
            return w0( a ) + w1( a );
        }
    
        float g1( float a ) {
            return w2( a ) + w3( a );
        }
    
        // h0 and h1 are the two offset functions
        float h0( float a ) {
            return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
        }
    
        float h1( float a ) {
            return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
        }
    
        vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
            uv = uv * texelSize.zw + 0.5;
    
            vec2 iuv = floor( uv );
            vec2 fuv = fract( uv );
    
            float g0x = g0( fuv.x );
            float g1x = g1( fuv.x );
            float h0x = h0( fuv.x );
            float h1x = h1( fuv.x );
            float h0y = h0( fuv.y );
            float h1y = h1( fuv.y );
    
            vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
            vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
            vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
    
            return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) + 
                   g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
        }

        vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
            vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
            vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
            vec2 fLodSizeInv = 1.0 / fLodSize;
            vec2 cLodSizeInv = 1.0 / cLodSize;
            vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
            vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
            return mix( fSample, cSample, fract( lod ) );
        }`)}}();function wte(t,i){return t>=i?new q(i/t,1):new q(1,t/i)}var F5=class extends cn{constructor(t,i,r,s,l,d,c,u){super("v3"),this.nodeType="Transmission",this.thickness=t,this.ior=i,this.roughness=r,this.transmissionSamplerSize=s,this.transmissionSamplerMap=l,this.transmissionDepthMap=d,this.aspectRatio=c,this.alpha=u,this.calpha=`g${this.uuid.toString().replace(/-/g,"")}_calpha`}generate(t,i){if(t.extensions.shaderTextureLOD=!0,t.extensions.derivatives=!0,t.isShader("fragment")){t.define("NUM_SAMPLES",6),t.define("BLUR_SLOD",Math.pow(2,Yt.transmissionLod.value)),t.require("worldPosition"),t.requires.worldNormal=!0,t.requires.modelMatrix=!0,t.requires.projectionMatrix=!0,t.addFragmentVariable(this.calpha,"float");let r=t.include(F5.Nodes.transmission),s=[];return s.push(this.thickness.build(t,"f")),s.push(this.ior.build(t,"f")),s.push(this.roughness.build(t,"f")),s.push(this.transmissionSamplerSize.build(t,"v2")),s.push(this.transmissionSamplerMap.getTexture(t,"t")),s.push(this.transmissionDepthMap.getTexture(t,"t")),s.push(this.aspectRatio.build(t,"v2")),s.push("normal"),s.push(this.mask?`luminance(${this.mask.flow(t,"v3").result})`:"1.0"),s.push(this.alpha.build(t,"f")),s.push(this.calpha),t.format(r+"("+s.join(",")+")",this.getType(t),i)}else return console.warn("TransmissionNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},N5=F5;N5.Nodes=function(){let t=new dt(`vec3 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {
                // Slightly modified version of this:
                // https://www.shadertoy.com/view/ltScRG

				// Special case for blur == 0.0
				if (lod == 0.0) {
					#ifdef TEXTURE_LOD_EXT
					return texture2DLodEXT( sp, U, 0.0).rgb;
					#else
					return textureLod( sp, U, 0.0).rgb;
					#endif
				}
				
				vec2 texelSize = vec2(1.0) / resolution;
                vec2 halton = haltonSequence[frameIndex];
                float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
                float temporalAngle  = temporalOffset * PI2;
				vec3 res = vec3(0.0);
                vec2 uv = vec2(0.0);
                vec2 offset = vec2(0.0);
                vec2 vogelSample = vec2(0.0);
                for (int i = 0; i < NUM_SAMPLES; i++) {
                    vogelSample =  vogelDiskSample(i, NUM_SAMPLES, temporalAngle) * texelSize;
                    offset = vogelSample * scale * (lod * 10.0); // TODO: used to be hardcoded to 20
                    uv = U + offset;
                    float opaqueDepth = unpackRGBAToDepth(textureLod(dm, uv, lod));
                    if (opaqueDepth != 0.0 && opaqueDepth < gl_FragCoord.z) {
                        uv = unrefractedU;
                        lod = lod > 4.0 ? lod : lod / 2.0;
                    }
                    res += textureLod(sp, uv, lod).rgb;
                }
                return res / float(NUM_SAMPLES);
            }`),i=new dt(`vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {
		        // Direction of refracted light.
		        vec3 refractionVector = refract( -v,  n, 1.0 / ior );
		        
				// Compute rotation-independant scaling of the model matrix.
		        vec3 modelScale;
		        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );

		        // The thickness is specified in local space
		        return normalize( refractionVector ) * thickness * modelScale;
	        }`),r=new dt(`float applyIorToRoughness( float roughness, float ior ) {
				// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
				// an IOR of 1.5 results in the default amount of microfacet refraction.
				return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
			}`),s=new dt(`vec3 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {
				// Threejs exports do not pass a depth map to this shader, so we have to fallback to the "Threejs method of blurring" - see
				// also the code in convertTransmission.ts, which runs during export
				#ifdef IS_THREEJS_EXPORT
					float lod = log2(transmissionSamplerSize.x) * applyIorToRoughness(roughness / 5.0, ior);
					return textureBicubic(transmissionSamplerMap, fragCoord.xy, lod).rgb;
				#else
					float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
					float lod = applyIorToRoughness(roughness, ior);
					return blur(transmissionSamplerMap, fragCoord, vec2(lod), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);
				#endif
			}`,[bte.textureBicubic,r,t]),l=new dt(`vec3 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;

				// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
				vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;

				vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );
				vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;
				unrefractedCoords += 1.0;
				unrefractedCoords /= 2.0;

				// Sample framebuffer to get pixel the refracted ray hits.
				return getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );
    		}`,[s,i]);return{transmission:new dt(`vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float mask, float alpha, out float calpha) {
                vec3 v = vec3(0.);
                if (isOrthographic) {
                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
                } else {
                    v = normalize(vWPosition - cameraPosition);
                }
                vec3 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );
                
				float lalpha = alpha * mask;
				calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );
				accumAlpha += ( 1.0 - accumAlpha ) * alpha;

				return transmission;
            }`,[l])}}();var CM=(t=>(t.NOISE="noise",t.MAP="map",t))(CM||{}),j5=class extends cn{constructor(t,i,r,s,l,d,c,u,h,f,m){super("v3"),this.displacementTypeIndex=new yn(0),this.nodeType="VertexDisplacement",this.intensity=t,this.movementOrTexture=i,Object.values(CM)[this.displacementTypeIndex.value]==="map"&&(this.mat=new b5(this.movementOrTexture.value.matrix)),this.cropOrOffset=r,this.scale=f,this.noiseFunctionIndex=m,this.voronoiStyle=s,this.smoothness=l,this.seed=d,this.highCut=c,this.lowCut=u,this.quality=h}generate(t,i){if(t.isShader("vertex")){t.define("USE_LAYER_DISPLACE");let r,s=[];switch(s.push("displaced_position"),s.push("displaced_normal"),Object.values(CM)[this.displacementTypeIndex.value]){case"map":{r=t.include(j5.Nodes.map),s.push(this.movementOrTexture.getTexture(t,"t")),s.push("uv"),s.push(this.cropOrOffset.build(t,"f")),this.mat&&s.push(this.mat.build(t,"mat3"));break}case"noise":{let l=Object.values(AM)[this.noiseFunctionIndex.value],d=new dt(`vec3 orthogonal(vec3 v) {
							return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
						}`),c=l=="voronoi"?`
					float v = ${l}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1), voronoiStyle, smoothness, seed, quality);
					v = remap(v, lowCut, highCut, 0.0, 1.0);
					v = smax(v, 0.0, smoothness * 0.25);
					v = smin(v, 1.0, smoothness * 0.25);

					return p + n * v * intensity;
					`:`
					return p + n * ${l}((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;
					`,u=new dt(`vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality) {
							${c}
						}`,[ms.simplex,ms.simplexFractal,ms.simplexAshima,ms.fbm,ms.perlin,ms.voronoi]),h=new dt(`vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, int voronoiStyle, float smoothness, float seed, float highCut, float lowCut, int quality, float intensity, out vec3 displaced_normal) {
							vec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 tangent1 = orthogonal(normal);
							vec3 tangent2 = normalize(cross(normal, tangent1));

                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.
                            // This caused some small oval/circular visual artifacts in the lighting.
                            // For now, simply using neighbors further away betters the problem,
                            // but we should figure out the underlying cause when we have some time.
                            // Maybe its related to how we calculate the tangent and bitangent?
							vec3 nearby1 = position + tangent1;
							vec3 nearby2 = position + tangent2;
							vec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							vec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement, voronoiStyle, smoothness, seed, highCut, lowCut, quality);
							displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
							return displaced_position;
						}`,[u,d]);r=t.include(h),s.push(this.scale.build(t,"f")),s.push(this.cropOrOffset.build(t,"v3")),s.push(this.movementOrTexture.build(t,"f")),s.push(this.voronoiStyle.build(t,"i")),s.push(this.smoothness.build(t,"f")),s.push(this.seed.build(t,"f")),s.push(this.highCut.build(t,"f")),s.push(this.lowCut.build(t,"f")),s.push(this.quality.build(t,"i"));break}}return s.push(this.intensity.build(t,"f")),s.push("displaced_normal"),t.format(r+"("+s.join(",")+")",this.getType(t),i)}else return console.warn("VertexDisplacementNode is not compatible with "+t.shader+" shader."),t.format("vec3( 0.0 )",this.getType(t),i)}},U5=j5;U5.Nodes=function(){let t=new dt(`vec3 orthogonal(vec3 v) {
				return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));
			}`),i=new dt(`float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {
				vec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;
				vec4 tmp = texture2D(tex, uvs);
				vec3 col = tmp.rgb;
				if (crop > 0.5) {
					if ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {
						return 0.0;
					}
				}
				return col.r;
			}`);return{map:new dt(`vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {
				vec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;
				vec3 tangent1 = normalize(orthogonal(normal));
				vec3 tangent2 = normalize(cross(normal, tangent1));
				vec3 nearby1 = position + tangent1 * 0.1;
				vec3 nearby2 = position + tangent2 * 0.1;
				vec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				vec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;
				displaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));
				return displaced_position;
			}`,[t,i])}}();var Yt={normalRenderTarget:new Od,normalRenderTargetDepth:new Od,transmissionRenderTarget:new Od,aspectRatio:new ra,transmissionSize:new ra(2048,2048),transmissionRenderTargetDepth:new Od,aoRenderTarget:new Od,aoEnabled:new Ha,pixelRatioNode:new kt(1),resolution:new ra,penumbraSize:new fh(5,.5),frameIndex:new yn(0),transmissionLod:new yn(2)};for(let t of Object.values(Yt))t.isRenderGlobal=!0;var V5=class extends Zc{constructor(){super("basic"),this.nodeType="Basic",this.color=new tr(no),this.shadingAlpha=new kt(1),this.shadingBlend=new yn(0),this.previousModelViewMatrix=new Bl,this.previouseProjectionMatrix=new Bl}get category(){return"phong"}generate(t){let i;if(t.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform({frameIndex:Yt.frameIndex}),t.mergeUniform({resolution:Yt.resolution}),t.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),t.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),t.mergeUniform(Hf.merge([lt.fog])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join(`
`));let s=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&s.push(r.code,r.result?"displaced_position = "+r.result+";":""),s.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","	vNormal = transformedNormal;","#endif"),s.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),s.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),i=s.join(`
`)}else{this.color===void 0&&(this.color=new tr(no)),this.color.analyze(t,{slot:"color"}),this.alpha&&this.alpha.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"});let r=this.color.flow(t,"c",{slot:"color"}),s=this.alpha?this.alpha.flow(t,"f"):void 0,l=this.alphaOverride?this.alphaOverride.flow(t,"f"):void 0,d=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0;t.requires.transparent=s!==void 0,t.addParsCode(["varying vec3 vWPosition;","#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join(`
`));let c=["#include <normal_fragment_begin>",r.code];s&&c.push(s.code,"#ifdef ALPHATEST"," if ( "+s.result+" <= ALPHATEST ) discard;","#endif"),d?c.push(d.code,`vec3 outgoingLight = ${r.result};`,`vec3 finalColor = spe_blend(outgoingLight, ${d.result}, 1.0, SPE_BLENDING_NORMAL);`):c.push(`vec3 finalColor = ${r.result};`);let u="1.0";this.mask&&(this.mask.analyze(t),u=`luminance(${this.mask.flow(t,"v3").result})`),s?c.push(`gl_FragColor = vec4( finalColor, accumAlpha * ${s.result} * ${u} );`):c.push("gl_FragColor = vec4("+r.result+", 1.0 );"),l&&c.push(`gl_FragColor.a *= ${l.result};`),c.push("#include <fog_fragment>","#include <dithering_fragment>"),i=c.join(`
`)}return i}},xte=class extends Zc{constructor(){super("lambert"),this.nodeType="Lambert",this.color=new tr(no),this.emissive=new tr(0),this.emissiveIntensity=new kt(1),this.previousModelViewMatrix=new Bl,this.previouseProjectionMatrix=new Bl,this.shadingAlpha=new kt(1),this.shadingBlend=new yn(0),this.occlusion=new Ha(!0)}get category(){return"lambert"}build(t){let i;if(t.define("LAMBERT"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform({frameIndex:Yt.frameIndex}),t.mergeUniform({resolution:Yt.resolution}),t.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),t.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),t.mergeUniform(Hf.merge([lt.fog,lt.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let s=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&s.push(r.code,r.result?"displaced_position = "+r.result+";":""),s.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),s.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>",`
					vec3 diffuse = vec3( 1.0 );
					GeometricContext geometry;
					geometry.position = mvPosition.xyz;
					geometry.normal = normalize( transformedNormal );
					geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
				`),s.push(`
					GeometricContext backGeometry;
					backGeometry.position = geometry.position;
					backGeometry.normal = -geometry.normal;
					backGeometry.viewDir = geometry.viewDir;
					vLightFront = vec3( 0.0 );
					vIndirectFront = vec3( 0.0 );
					#ifdef DOUBLE_SIDED
						vLightBack = vec3( 0.0 );
						vIndirectBack = vec3( 0.0 );
					#endif
					IncidentLight directLight;
					float dotNL;
					vec3 directLightColor_Diffuse;
					vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
					vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
					#ifdef DOUBLE_SIDED
						vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
						vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
					#endif
					#if NUM_POINT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
							getPointLightInfo( pointLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_SPOT_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
							getSpotLightInfo( spotLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_DIR_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
							getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
							dotNL = dot( geometry.normal, directLight.direction );
							directLightColor_Diffuse = directLight.color;
							vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
							#ifdef DOUBLE_SIDED
								vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
							#endif
						}
						#pragma unroll_loop_end
					#endif
					#if NUM_HEMI_LIGHTS > 0
						#pragma unroll_loop_start
						for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
							vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
							#ifdef DOUBLE_SIDED
								vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
							#endif
						}
						#pragma unroll_loop_end
					#endif
				`,"	#include <shadowmap_vertex>","	#include <fog_vertex>"),s.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),i=s.join(`
`)}else{t.mergeUniform({penumbraSize:Yt.penumbraSize}),t.mergeUniform({frameIndex:Yt.frameIndex}),t.mergeUniform({aoMap:Yt.aoRenderTarget}),t.mergeUniform({aoEnabled:Yt.aoEnabled}),this.color===void 0&&(this.color=new tr(no)),this.color.analyze(t,{slot:"color"}),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let r=this.color.flow(t,"c",{slot:"color"}),s=this.emissive.flow(t,"c",{slot:"emissive"}),l=this.emissiveIntensity.flow(t,"f",{slot:"emissive"}),d=this.occlusion.flow(t,"b",{slot:"occlusion"}),c=this.shadingAlpha.flow(t,"f"),u=this.shadingBlend.flow(t,"i"),h=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,f=this.alpha?this.alpha.flow(t,"f"):void 0,m=this.alphaOverride?this.alphaOverride.flow(t,"f"):void 0;t.requires.transparent=f!==void 0,t.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vViewPosition;","varying vec3 vWPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","	varying vec3 vLightBack;","	varying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let p=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx, viewdy));
				bool isFrontFacing = (dot(normal, faceNormal) >= 0.0);
				`,"#include <clipping_planes_fragment>"];p.push(r.code,"vec3 diffuseColor = "+r.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),f&&p.push(f.code,"#ifdef ALPHATEST","if ( "+f.result+" <= ALPHATEST ) discard;","#endif"),p.push("#ifdef DOUBLE_SIDED","	reflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","	reflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","	reflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","	reflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),s&&p.push(s.code,"reflectedLight.directDiffuse += "+s.result+" * "+l.result+";"),p.push("vec3 ao = aoEnabled && "+d.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = (reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) ;");let g="1.0";this.mask&&(this.mask.analyze(t),g=`luminance(${this.mask.flow(t,"v3").result})`),p.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${c.result} * ${g} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${c.result} * ${g}, ${u.result} );

					outgoingLight *= ao;
				}
				`),h&&p.push(h.code,`outgoingLight = spe_blend(outgoingLight, ${h.result}, 1.0, SPE_BLENDING_NORMAL);`),f?p.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${f.result} );`):p.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),m&&p.push(`gl_FragColor.a *= ${m.result};`),p.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),i=p.join(`
`)}return i}},Yp=function(){let t=new dt(`vec2 dHdxy(sampler2D bumpMap, vec2 bumpMapUv, float bumpScale) {

            // Gradient of UVs w.r.t. X coordinate (in screen-space)
            vec2 dSTdx = dFdx(bumpMapUv);

            // Gradient of UVs w.r.t. Y coordinate (in screen-space)
            vec2 dSTdy = dFdy(bumpMapUv);
            
            // Forward differencing
            float Hll = bumpScale * luminance(texture(bumpMap, bumpMapUv).rgb);
            float dBx = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdx).rgb) - Hll;
            float dBy = bumpScale * luminance(texture(bumpMap, bumpMapUv + dSTdy).rgb) - Hll;
            
            return vec2( dBx, dBy );
        }`),i=new dt(`vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
            vec3 vSigmaX = dFdx( surf_pos.xyz );
            vec3 vSigmaY = dFdy( surf_pos.xyz );
            vec3 vN = surf_norm; // normalized
            
            vN = normalize(vN);

            vec3 R1 = cross( vSigmaY, vN );
            vec3 R2 = cross( vN, vSigmaX );

            R1 = normalize(R1);
            R2 = normalize(R2);
    
            float fDet = dot( vSigmaX, R1 ) * faceDirection;
    
            vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
            return normalize( abs( fDet ) * vN - vGrad );
        }`);return{dHdxy:t,perturbNormalArb:i}}(),_te=class extends Zc{constructor(){super("phong"),this.nodeType="Phong",this.color=new tr(no),this.specular=new tr(1118481),this.shininess=new kt(30),this.previousModelViewMatrix=new Bl,this.previouseProjectionMatrix=new Bl,this.shadingAlpha=new kt(1),this.shadingBlend=new yn(0),this.occlusion=new Ha(!0)}get category(){return"phong"}build(t){let i;if(t.define("PHONG"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform({frameIndex:Yt.frameIndex}),t.mergeUniform({resolution:Yt.resolution}),t.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),t.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),t.mergeUniform(Hf.merge([lt.fog,lt.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <skinning_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let s=["#include <beginnormal_vertex>",`
				#include <skinbase_vertex>
				#include <skinnormal_vertex>
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif


				vec3 displaced_position = position;
				vec3 displaced_normal = objectNormal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&s.push(r.code,r.result?"displaced_position = "+r.result+";":""),s.push("transformed = displaced_position;","#include <skinning_vertex>","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),s.push("	#include <project_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),s.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),i=s.join(`
`)}else{t.mergeUniform({penumbraSize:Yt.penumbraSize}),t.mergeUniform({frameIndex:Yt.frameIndex}),t.mergeUniform({aoMap:Yt.aoRenderTarget}),t.mergeUniform({aoEnabled:Yt.aoEnabled}),this.color===void 0&&(this.color=new tr(no)),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t);let r=this.occlusion.flow(t,"b",{slot:"occlusion"});this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let s=this.color.flow(t,"c",{slot:"color"}),l=this.specular.flow(t,"c"),d=this.shininess.flow(t,"f"),c=this.shadingAlpha.flow(t,"f"),u=this.shadingBlend.flow(t,"i"),h=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,f=this.alpha?this.alpha.flow(t,"f"):void 0,m=this.alphaOverride?this.alphaOverride.flow(t,"f"):void 0;t.requires.transparent=f!==void 0,t.addParsCode(["varying vec3 vWPosition;","uniform vec3 emissive;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join(`
`));let p=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	BlinnPhongMaterial material;"];if(this.bumpMap){t.include(Yp.dHdxy),t.include(Yp.perturbNormalArb);let v=this.bumpMap.texture.flow(t,"t"),w=this.bumpMap.flow(t,"v3"),x=this.bumpMapIntensity?this.bumpMapIntensity.flow(t,"f").result:"1.0",_="";this.bumpMap.projection.value===4?_=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${v.result}, uv0, ${x});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${v.result}, uv1, ${x});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${v.result}, uv2, ${x});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:_=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${v.result}, bumpMapCachedUv, ${x});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,p.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${w.result};
					${_}
					`)}p.push(s.code,"	vec3 diffuseColor = "+s.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","	vec3 totalEmissiveRadiance = emissive;",l.code,"	vec3 specular = "+l.result+";",d.code,"	float shininess = max( 0.0001, "+d.result+" );","	float specularStrength = 1.0;"),f&&p.push(f.code,"#ifdef ALPHATEST","if ( "+f.result+" <= ALPHATEST ) discard;","#endif"),p.push("material.diffuseColor = diffuseColor;"),p.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),p.push("vec3 ao = aoEnabled && "+r.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;");let g="1.0";this.mask&&(this.mask.analyze(t),g=`luminance(${this.mask.flow(t,"v3").result})`),p.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${c.result} * ${g} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${c.result} * ${g}, ${u.result} );
					
					outgoingLight *= ao;
				}
				`),h&&p.push(h.code,`outgoingLight = spe_blend(outgoingLight, ${h.result}, 1.0, SPE_BLENDING_NORMAL);`),f?p.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${f.result});`):p.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),m&&p.push(`gl_FragColor.a *= ${m.result};`),p.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),i=p.join(`
`)}return i}},kte=class extends Zc{constructor(){super("standard"),this.nodeType="Standard",this.color=new tr(no),this.roughness=new kt(.3),this.metalness=new kt(0),this.reflectivity=new kt(.5),this.previousModelViewMatrix=new Bl,this.previouseProjectionMatrix=new Bl,this.shadingAlpha=new kt(1),this.shadingBlend=new yn(0),this.occlusion=new Ha(!0)}get category(){return"physical"}build(t){let i;if(t.define("STANDARD"),t.requires.lights=!0,t.extensions.derivatives=!0,t.extensions.shaderTextureLOD=!0,t.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform({frameIndex:Yt.frameIndex}),t.mergeUniform({resolution:Yt.resolution}),t.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),t.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),t.mergeUniform(Hf.merge([lt.fog,lt.lights])),lt.LTC_1&&(t.uniforms.ltc_1={value:void 0},t.uniforms.ltc_2={value:void 0}),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let s=["#include <beginnormal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#if defined( USE_LAYER_DISPLACE )
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#if !defined( USE_LAYER_DISPLACE )
					#include <begin_vertex>
				#endif /* !USE_LAYER_DISPLACE */
				`];r&&s.push(r.code,r.result?"displaced_position = "+r.result+";":""),s.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),s.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),s.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),i=s.join(`
`)}else{t.mergeUniform({penumbraSize:Yt.penumbraSize}),t.mergeUniform({frameIndex:Yt.frameIndex}),t.mergeUniform({aoMap:Yt.aoRenderTarget}),t.mergeUniform({aoEnabled:Yt.aoEnabled});let r={gamma:!0};this.color===void 0&&(this.color=new tr(no)),this.color.analyze(t,{slot:"color",context:r}),this.roughness.analyze(t),this.metalness.analyze(t);let s=this.occlusion.flow(t,"b",{slot:"occlusion"});this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t),this.reflectivity&&this.reflectivity.analyze(t);let l=this.color.flow(t,"c",{slot:"color",context:r}),d=this.roughness.flow(t,"f"),c=this.metalness.flow(t,"f"),u=this.shadingAlpha.flow(t,"f"),h=this.shadingBlend.flow(t,"i"),f=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,m=this.alpha?this.alpha.flow(t,"f"):void 0,p=this.alphaOverride?this.alphaOverride.flow(t,"f"):void 0,g=this.reflectivity?this.reflectivity.flow(t,"f"):void 0;t.requires.transparent=m!==void 0,t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join(`
`));let v=["#include <clipping_planes_fragment>","	#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	PhysicalMaterial material;","	material.diffuseColor = vec3( 1.0 );"];if(this.bumpMap){t.include(Yp.dHdxy),t.include(Yp.perturbNormalArb);let x=this.bumpMap.texture.flow(t,"t"),_=this.bumpMap.flow(t,"v3"),k=this.bumpMapIntensity?this.bumpMapIntensity.flow(t,"f").result:"1.0",A="";this.bumpMap.projection.value===4?A=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${x.result}, uv0, ${k});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${x.result}, uv1, ${k});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${x.result}, uv2, ${k});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:A=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${x.result}, bumpMapCachedUv, ${k});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,v.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${_.result};
					${A}
					`)}if(v.push(l.code,"	vec3 diffuseColor = "+l.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",c.code,"	float metalnessFactor = "+c.result+";"),this.roughnessMap){let x=this.roughnessMap.texture.flow(t,"t"),_=this.roughnessMap.flow(t,"v3"),k="";this.roughnessMap.projection.value===4?k=`
					float roughnessChange = 1.0;
					{
						vec2 uv0 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						float r0 = luminance(texture(${x.result}, uv0).rgb) * roughnessScale;
						float r1 = luminance(texture(${x.result}, uv1).rgb) * roughnessScale;
						float r2 = luminance(texture(${x.result}, uv2).rgb) * roughnessScale;

						roughnessChange = (r0 * weights.z + r1 * weights.x + r2 * weights.y);
					}
					float roughnessFactor = roughnessChange * ${d.result};
					`:k=`
					vec2 roughnessMapCachedUv = g${this.roughnessMap.uuid.toString().replace(/-/g,"")}_writeUvs;

					vec4 vals = texture(${x.result},  roughnessMapCachedUv);
					float roughnessFactor = luminance(vals.rgb) * ${d.result};
					`,v.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${_.result};

					const float roughnessScale = 1.0;

					${k}
				`)}else v.push(d.code,"	float roughnessFactor = "+d.result+";");m&&v.push(m.code,"#ifdef ALPHATEST","	if ( "+m.result+" <= ALPHATEST ) discard;","#endif"),v.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),v.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),g?v.push(g.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+g.result+" ) ), diffuseColor, metalnessFactor );"):v.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),v.push("#include <lights_fragment_begin>"),v.push("#include <lights_fragment_end>"),v.push("vec3 ao = aoEnabled && "+s.result+" ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse)) + reflectedLight.directSpecular + reflectedLight.indirectSpecular;");let w="1.0";this.mask&&(this.mask.analyze(t),w=`luminance(${this.mask.flow(t,"v3").result})`),v.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${u.result} * ${w} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${u.result} * ${w}, ${h.result} );
					
					outgoingLight *= ao;
				}
				`),f&&v.push(f.code,`outgoingLight = spe_blend(outgoingLight, ${f.result}, 1.0, SPE_BLENDING_NORMAL);`),m?v.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${m.result} );`):v.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),p&&v.push(`gl_FragColor.a *= ${p.result};`),v.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),i=v.join(`
`)}return i}},Ste=class extends Zc{constructor(){super("toon"),this.nodeType="Toon",this.color=new tr(no),this.specular=new tr(1118481),this.shininess=new kt(30),this.previousModelViewMatrix=new Bl,this.previouseProjectionMatrix=new Bl,this.shadingAlpha=new kt(1),this.shadingBlend=new yn(0)}get category(){return"toon"}build(t){let i;if(t.define("TOON"),t.requires.lights=!0,t.extensions.derivatives=!0,t.isShader("vertex")){let r=this.position?this.position.analyzeAndFlow(t,"v3",{cache:"position"}):void 0;t.mergeUniform({frameIndex:Yt.frameIndex}),t.mergeUniform({resolution:Yt.resolution}),t.mergeUniform({previousModelViewMatrix:this.previousModelViewMatrix}),t.mergeUniform({previousProjectionMatrix:this.previouseProjectionMatrix}),t.mergeUniform(Hf.merge([lt.fog,lt.lights])),t.addParsCode(["varying vec3 vViewPosition;","varying vec3 vWPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join(`
`));let s=["#include <beginnormal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <defaultnormal_vertex>
				#endif

				vec3 displaced_position = position;
				vec3 displaced_normal = normal;

				#ifdef USE_LAYER_DISPLACE
					vec3 transformed;
					vec3 transformedNormal;
				#endif
				`,"#include <normal_vertex>",`
				#ifndef USE_LAYER_DISPLACE
					#include <begin_vertex>
				#endif
				`];r&&s.push(r.code,r.result?"displaced_position = "+r.result+";":""),s.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),s.push("	#include <project_vertex>","	#include <fog_vertex>","	#include <clipping_planes_vertex>","	vViewPosition = - mvPosition.xyz;","	#include <worldpos_vertex>","	#include <shadowmap_vertex>","	#include <fog_vertex>"),s.push("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;"),i=s.join(`
`)}else{t.mergeUniform({penumbraSize:Yt.penumbraSize}),t.mergeUniform({frameIndex:Yt.frameIndex}),t.mergeUniform({aoMap:Yt.aoRenderTarget}),t.mergeUniform({aoEnabled:Yt.aoEnabled}),this.color===void 0&&(this.color=new tr(no)),this.color.analyze(t,{slot:"color"}),this.specular.analyze(t),this.shininess.analyze(t),this.shadingAlpha.analyze(t),this.shadingBlend.analyze(t),this.afterColor&&this.afterColor.analyze(t,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(t);let r=this.color.flow(t,"c",{slot:"color"}),s=this.specular.flow(t,"c"),l=this.shininess.flow(t,"f"),d=this.shadingAlpha.flow(t,"f"),c=this.shadingBlend.flow(t,"i"),u=this.afterColor?this.afterColor.flow(t,"c",{slot:"afterColor"}):void 0,h=this.alpha?this.alpha.flow(t,"f"):void 0,f=this.alphaOverride?this.alphaOverride.flow(t,"f"):void 0;t.requires.transparent=h!==void 0,t.addParsCode(["uniform float penumbraSize[5];","uniform sampler2D aoMap;","uniform bool aoEnabled;","varying vec3 vWPosition;","#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>",`
					varying vec3 vViewPosition;
					struct ToonMaterial {
						vec3	diffuseColor;
						vec3	specularColor;
						float	specularShininess;
						float	specularStrength;
					};
					void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
			
						reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
						reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
					}
					void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
						reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
					}
					#define RE_Direct				RE_Direct_Toon
					#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
					#define Material_LightProbeLOD( material )	(0)
					`,"#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join(`
`));let m=["#include <normal_fragment_begin>",`
				// NOTE: gl_FrontFacing alternative using face normal estimation.
				vec3 viewdx = dFdx(vViewPosition);
				vec3 viewdy = dFdy(vViewPosition);
				vec3 faceNormal = normalize(cross(viewdx,viewdy));
				if (dot(normal, faceNormal) < 0.0) {
					normal *= -1.0;
				}
				`,"	ToonMaterial material;"];if(this.bumpMap){t.include(Yp.dHdxy),t.include(Yp.perturbNormalArb);let g=this.bumpMap.texture.flow(t,"t"),v=this.bumpMap.flow(t,"v3"),w=this.bumpMapIntensity?this.bumpMapIntensity.flow(t,"f").result:"1.0",x="";this.bumpMap.projection.value===4?x=`
					vec3 bumpNormal = vec3(0.0);
					{
						vec2 uv0 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs0;
						vec2 uv1 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs1;
						vec2 uv2 = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs2;
						vec3 weights = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_triplanarWeights;

						vec2 grad0 = dHdxy(${g.result}, uv0, ${w});
						vec3 n0 = perturbNormalArb(-vViewPosition, normal, grad0, faceDirection);

						vec2 grad1 = dHdxy(${g.result}, uv1, ${w});
						vec3 n1 = perturbNormalArb(-vViewPosition, normal, grad1, faceDirection);

						vec2 grad2 = dHdxy(${g.result}, uv2, ${w});
						vec3 n2 = perturbNormalArb(-vViewPosition, normal, grad2, faceDirection);
						
						bumpNormal = n0 * weights.z + n1 * weights.x + n2 * weights.y;
						bumpNormal = normalize(bumpNormal);
					}

					normal = bumpNormal;
					`:x=`
					vec2 bumpMapCachedUv = g${this.bumpMap.uuid.toString().replace(/-/g,"")}_writeUvs;
					vec2 grad = dHdxy(${g.result}, bumpMapCachedUv, ${w});
					normal = perturbNormalArb( - vViewPosition, normal, grad, faceDirection );
					`,m.push(`// Call the Texture Layer's function once here so that it writes out its procedural UV coordinates
					${v.result};
					${x}
					`)}m.push(r.code,"	vec3 diffuseColor = "+r.result+";","	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",s.code,"	vec3 specular = "+s.result+";",l.code,"	float shininess = max( 0.0001, "+l.result+" );","	float specularStrength = 1.0;"),h&&m.push(h.code,"#ifdef ALPHATEST","if ( "+h.result+" <= ALPHATEST ) discard;","#endif"),m.push("material.diffuseColor = diffuseColor;"),m.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),m.push("vec3 ao = aoEnabled ? tex2D(aoMap, gl_FragCoord.xy / resolution).rgb : vec3(1.0);","vec3 outgoingLight = ((reflectedLight.directDiffuse + reflectedLight.indirectDiffuse) * ao) + reflectedLight.directSpecular;");let p="1.0";this.mask&&(this.mask.analyze(t),p=`luminance(${this.mask.flow(t,"v3").result})`),m.push(`
				if (outgoingLight != diffuseColor) {
					float lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );
					accumAlpha += ( 1.0 - accumAlpha ) * ${d.result} * ${p} * lightAccu;
					outgoingLight = spe_blend( diffuseColor, outgoingLight, ${d.result} * ${p}, ${c.result} );
				}
				`),u&&m.push(u.code,`outgoingLight = spe_blend(outgoingLight, ${u.result}, 1.0, SPE_BLENDING_NORMAL);`),h?m.push(`gl_FragColor = vec4( outgoingLight, accumAlpha * ${h.result} );`):m.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),f&&m.push(`gl_FragColor.a *= ${f.result};`),m.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),i=m.join(`
`)}return i}},Ate=class{constructor(t=1e3*10){this.timeout=t,this.cache=new Map,this.head={data:null,time:0,src:null,next:null,prev:null},this.tail={data:null,time:1/0,src:null,next:null,prev:null},this.hasClean=!1,this.head.next=this.tail,this.tail.prev=this.head}log(...t){}remove(t){let i=this.cache.get(t);i&&(this.dispose(t,i.data),this.cache.delete(t),i.prev.next=i.next,i.next.prev=i.prev)}scheduleCleanup(){this.hasClean||(this.log("scheduled cleanup"),this.hasClean=!0,setTimeout(()=>{this.hasClean=!1,this.log("cleaning");let t=Date.now(),i=this.head.next;for(;i.time<t-this.timeout;)this.dispose(i.src,i.data),this.cache.delete(i.src),i=i.next,i.prev=this.head,this.head.next=i;this.head.next!==this.tail?this.scheduleCleanup():this.log("no more cleanup")},this.timeout+1e3))}has(t){var i;return(i=this.cache.get(t))==null?void 0:i.data}load(t){let i=Date.now(),r=this.cache.get(t);return r===void 0?(r={data:this.create(t),src:t,time:i,next:null,prev:null},this.cache.set(t,r)):(r.time=i,r.prev.next=r.next,r.next.prev=r.prev),r.prev=this.tail.prev,r.next=this.tail,this.tail.prev.next=r,this.tail.prev=r,this.scheduleCleanup(),r.data}},Cte=class extends Ate{create(t){return URL.createObjectURL(new Blob([t]))}dispose(t,i){URL.revokeObjectURL(i)}},EM;function Ete(t){return typeof t=="string"?t:(EM||(EM=new Cte),EM.load(t))}var Mte=class{constructor(t,i){this.data=t,this.cache=i,this.refCount=0}deref(){this.refCount,this.refCount-=1,this.refCount===0&&(this.cache.remove(this),this.dispose())}dispose(){this.refCount}},Tte=class{constructor(){this.cache=new Map}remove(t){this.cache.delete(t.data)}load(t){let i=this.cache.get(t);return i===void 0&&(i=this.create(t),this.cache.set(t,i)),i.refCount+=1,i}},H5=class extends Mte{constructor(t,i){super(t,i.imageHolderCache),this.data=t,this.shared=i,this.loaded=!1,this.isVideo=!1,this.isVideo=t.type==="video",this.updateSrc(t.data)}updateSrc(t){return qi(this,null,function*(){if(typeof document>"u")return;this.disposeTextures(),this.loaded=!1;let i=()=>{this.loaded=!0;let s=[1e3,1001,1002];for(let l of s){let d=this[l];d&&(d.image=this.img,d.needsUpdate=!0)}this.shared.requestRender()};if(this.isVideo){if(this.img=document.createElement("video"),this.img.preload="auto",this.img.playsInline=!0,this.img.currentTime=.01,typeof t!="string"){var r=new FileReader;r.readAsDataURL(new Blob([t],{type:"video/mp4"}));let s;yield new Promise(l=>{r.onloadend=d=>{var c;s=(c=d.target)==null?void 0:c.result,l(null)}}),this.img.src=s}else this.img.src=t;this.img.onloadeddata=()=>{i()}}else this.img=new Image,this.img.src=Ete(t),this.img.onload=i})}getTexture(t){let i=this[t];if(i)return i;{let r;return this.isVideo?r=new AU(this.img,void 0,t,t):r=new zn(this.img,void 0,t,t),this.loaded&&(r.needsUpdate=!0),this[t]=r,r}}disposeTextures(){var t,i,r;(t=this[1e3])==null||t.dispose(),this[1e3]=void 0,(i=this[1001])==null||i.dispose(),this[1001]=void 0,(r=this[1002])==null||r.dispose(),this[1002]=void 0}dispose(){super.dispose(),this.disposeTextures()}},mh=class extends H5{};function Dte(t,i){var r=Rte(i);return r.formatToParts?Ote(r,t):Ite(r,t)}var Pte={year:0,month:1,day:2,hour:3,minute:4,second:5};function Ote(t,i){try{for(var r=t.formatToParts(i),s=[],l=0;l<r.length;l++){var d=Pte[r[l].type];d>=0&&(s[d]=parseInt(r[l].value,10))}return s}catch(c){if(c instanceof RangeError)return[NaN];throw c}}function Ite(t,i){var r=t.format(i).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r);return[s[3],s[1],s[2],s[4],s[5],s[6]]}var MM={};function Rte(t){if(!MM[t]){var i=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:"America/New_York",year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),r=i==="06/25/2014, 00:00:00"||i==="\u200E06\u200E/\u200E25\u200E/\u200E2014\u200E \u200E00\u200E:\u200E00\u200E:\u200E00";MM[t]=r?new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:t,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return MM[t]}function G5(t,i,r,s,l,d,c){var u=new Date(0);return u.setUTCFullYear(t,i,r),u.setUTCHours(s,l,d,c),u}var W5=36e5,zte=6e4,TM={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-]\d{2}):?(\d{2})$/};function q5(t,i,r){var s,l;if(!t||(s=TM.timezoneZ.exec(t),s))return 0;var d;if(s=TM.timezoneHH.exec(t),s)return d=parseInt(s[1],10),$5(d)?-(d*W5):NaN;if(s=TM.timezoneHHMM.exec(t),s){d=parseInt(s[1],10);var c=parseInt(s[2],10);return $5(d,c)?(l=Math.abs(d)*W5+c*zte,d>0?-l:l):NaN}if(Fte(t)){i=new Date(i||Date.now());var u=r?i:Lte(i),h=DM(u,t),f=r?h:Bte(i,h,t);return-f}return NaN}function Lte(t){return G5(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function DM(t,i){var r=Dte(t,i),s=G5(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime(),l=t.getTime(),d=l%1e3;return l-=d>=0?d:1e3+d,s-l}function Bte(t,i,r){var s=t.getTime(),l=s-i,d=DM(new Date(l),r);if(i===d)return i;l-=d-i;var c=DM(new Date(l),r);return d===c?d:Math.max(d,c)}function $5(t,i){return-23<=t&&t<=23&&(i==null||0<=i&&i<=59)}var Z5={};function Fte(t){if(Z5[t])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:t}),Z5[t]=!0,!0}catch(i){return!1}}var Nte=sn(CS(),1),Y5=sn(ES(),1),jte=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Ute=jte,PM=36e5,X5=6e4,Vte=2,Ga={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Ute};function Hte(t,i){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(t===null)return new Date(NaN);var r=i||{},s=r.additionalDigits==null?Vte:(0,Nte.default)(r.additionalDigits);if(s!==2&&s!==1&&s!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]")return new Date(t.getTime());if(typeof t=="number"||Object.prototype.toString.call(t)==="[object Number]")return new Date(t);if(!(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]"))return new Date(NaN);var l=Gte(t),d=Wte(l.date,s),c=d.year,u=d.restDateString,h=qte(u,c);if(isNaN(h))return new Date(NaN);if(h){var f=h.getTime(),m=0,p;if(l.time&&(m=$te(l.time),isNaN(m)))return new Date(NaN);if(l.timeZone||r.timeZone){if(p=q5(l.timeZone||r.timeZone,new Date(f+m)),isNaN(p))return new Date(NaN)}else p=(0,Y5.default)(new Date(f+m)),p=(0,Y5.default)(new Date(f+m+p));return new Date(f+m+p)}else return new Date(NaN)}function Gte(t){var i={},r=Ga.dateTimePattern.exec(t),s;if(r?(i.date=r[1],s=r[3]):(r=Ga.datePattern.exec(t),r?(i.date=r[1],s=r[2]):(i.date=null,s=t)),s){var l=Ga.timeZone.exec(s);l?(i.time=s.replace(l[1],""),i.timeZone=l[1].trim()):i.time=s}return i}function Wte(t,i){var r=Ga.YYY[i],s=Ga.YYYYY[i],l;if(l=Ga.YYYY.exec(t)||s.exec(t),l){var d=l[1];return{year:parseInt(d,10),restDateString:t.slice(d.length)}}if(l=Ga.YY.exec(t)||r.exec(t),l){var c=l[1];return{year:parseInt(c,10)*100,restDateString:t.slice(c.length)}}return{year:null}}function qte(t,i){if(i===null)return null;var r,s,l,d;if(t.length===0)return s=new Date(0),s.setUTCFullYear(i),s;if(r=Ga.MM.exec(t),r)return s=new Date(0),l=parseInt(r[1],10)-1,J5(i,l)?(s.setUTCFullYear(i,l),s):new Date(NaN);if(r=Ga.DDD.exec(t),r){s=new Date(0);var c=parseInt(r[1],10);return Xte(i,c)?(s.setUTCFullYear(i,0,c),s):new Date(NaN)}if(r=Ga.MMDD.exec(t),r){s=new Date(0),l=parseInt(r[1],10)-1;var u=parseInt(r[2],10);return J5(i,l,u)?(s.setUTCFullYear(i,l,u),s):new Date(NaN)}if(r=Ga.Www.exec(t),r)return d=parseInt(r[1],10)-1,e9(i,d)?K5(i,d):new Date(NaN);if(r=Ga.WwwD.exec(t),r){d=parseInt(r[1],10)-1;var h=parseInt(r[2],10)-1;return e9(i,d,h)?K5(i,d,h):new Date(NaN)}return null}function $te(t){var i,r,s;if(i=Ga.HH.exec(t),i)return r=parseFloat(i[1].replace(",",".")),OM(r)?r%24*PM:NaN;if(i=Ga.HHMM.exec(t),i)return r=parseInt(i[1],10),s=parseFloat(i[2].replace(",",".")),OM(r,s)?r%24*PM+s*X5:NaN;if(i=Ga.HHMMSS.exec(t),i){r=parseInt(i[1],10),s=parseInt(i[2],10);var l=parseFloat(i[3].replace(",","."));return OM(r,s,l)?r%24*PM+s*X5+l*1e3:NaN}return null}function K5(t,i,r){i=i||0,r=r||0;var s=new Date(0);s.setUTCFullYear(t,0,4);var l=s.getUTCDay()||7,d=i*7+r+1-l;return s.setUTCDate(s.getUTCDate()+d),s}var Zte=[31,28,31,30,31,30,31,31,30,31,30,31],Yte=[31,29,31,30,31,30,31,31,30,31,30,31];function Q5(t){return t%400===0||t%4===0&&t%100!==0}function J5(t,i,r){if(i<0||i>11)return!1;if(r!=null){if(r<1)return!1;var s=Q5(t);if(s&&r>Yte[i]||!s&&r>Zte[i])return!1}return!0}function Xte(t,i){if(i<1)return!1;var r=Q5(t);return!(r&&i>366||!r&&i>365)}function e9(t,i,r){return!(i<0||i>52||r!=null&&(r<0||r>6))}function OM(t,i,r){return!(t!=null&&(t<0||t>=25)||i!=null&&(i<0||i>=60)||r!=null&&(r<0||r>=60))}function Kte(t,i,r){var s=Hte(t,r),l=q5(i,s,!0),d=new Date(s.getTime()-l),c=new Date(0);return c.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),c.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),c}function Wa(t,i){return i.color(t)}function t9(t=new Date,i){let r=i.format,s=t.getSeconds(),l=t;i&&i.timeZone!==null&&(l=Kte(new Date,i.timeZone));let d=l.getHours(),c=l.getMinutes(),u;i.format12h24h==="12ampm"&&(u=d>=12?"PM":"AM");let h=d;i.format12h24h!=="24"&&(h=d%12,h===0&&(h=12));let f,m;switch(r){case"HH:mm:ss":f=[h,c,s];break;case"HH:mm":f=[h,c];break;case"HH":f=[h],u=void 0;break;case"mm":f=[c],u=void 0;break;case"ss":f=[s],u=void 0;break;case"year":m=l.getFullYear();break;case"month":m=l.getMonth()+1;break;case"dayOfYear":m=Math.floor((l.getTime()-new Date(l.getFullYear(),0,0).getTime())/864e5);break;case"dayOfMonth":m=l.getDate();break;case"secondOfDay":m=d*60*60+c*60+s;break;default:console.error("Unknown time format",r),m=0;break}return f!==void 0?{textValue:f,suffix:u}:m}function Qte(t,i){switch(t.type){case"fresnel":return tie(t,i);case"gradient":return iie(t,i);case"depth":return nie(t,i);case"normal":return rie(t,i);case"noise":return aie(t,i);case"rainbow":return sie(t,i);case"toon":return oie(t,i);case"outline":return lie(t,i);case"transmission":return die(t,i);case"color":return eie(t,i);case"pattern":return cie(t,i)}}function Jte(t){return{type:t.type}}function Uo(t,i){var c;let{alpha:r,mode:s,isMask:l}=t,d=typeof r=="string"?((c=Number(i.getVariable(r)))!=null?c:100)/100:r;return ge(Z({},Jte(t)),{alpha:d,mode:s,isMask:l})}function eie(t,i){return ge(Z({},Uo(t,i)),{color:Wa(t.color,i)})}function tie(t,i){let{bias:r,scale:s,intensity:l,factor:d,color:c}=t;return ge(Z({},Uo(t,i)),{color:Wa(c,i),bias:r,scale:s,intensity:l,factor:d})}function iie(t,i){let{gradientType:r,smooth:s,colors:l,steps:d,angle:c,offset:u,morph:h}=t;return ge(Z({},Uo(t,i)),{gradientType:r,smooth:s,colors:l.map(f=>new ri(f[0],f[1],f[2],f[3])),num:l.length,steps:d,offset:new q(...u),morph:new q(...h),angle:c})}function nie(t,i){let{gradientType:r,near:s,far:l,isVector:d,isWorldSpace:c,origin:u,direction:h,colors:f,steps:m,smooth:p}=t;return ge(Z({},Uo(t,i)),{gradientType:r,near:s,far:l,isVector:d,isWorldSpace:c,origin:new N(...u),direction:h?new N(...h):new N(1,0,0),colors:f.map(g=>g!==void 0?new ri(g[0],g[1],g[2],g[3]):new ri(0,0,0,0)),steps:m.slice(0,f.length),smooth:p})}function rie(t,i){let{cnormal:r}=t;return ge(Z({},Uo(t,i)),{cnormal:new N(r[0],r[1],r[2])})}function aie(t,i){return ge(Z({},Uo(t,i)),{scale:t.scale,move:t.move,fA:new q(...t.fA),fB:new q(...t.fB),size:new N(...t.size),distortion:new q(...t.distortion),colorA:Wa(t.colorA,i),colorB:Wa(t.colorB,i),colorC:Wa(t.colorC,i),colorD:Wa(t.colorD,i),noiseType:t.noiseType,voronoiStyle:t.voronoiStyle,highCut:t.highCut,lowCut:t.lowCut,smoothness:t.smoothness,seed:t.seed,quality:t.quality})}function sie(t,i){return ge(Z({},Uo(t,i)),{filmThickness:t.filmThickness,movement:t.movement,wavelengths:new N(...t.wavelengths),noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,offset:new N(...t.offset)})}function oie(t,i){return ge(Z({},Uo(t,i)),{positioning:t.positioning,colors:t.colors.map(r=>new ri(r[0],r[1],r[2],r[3])),num:t.colors.length,steps:t.steps,source:new N(...t.source),isWorldSpace:t.isWorldSpace,noiseStrength:t.noiseStrength,noiseScale:t.noiseScale,shadowColor:Wa(t.shadowColor,i),offset:new N(...t.offset)})}function lie(t,i){return ge(Z({},Uo(t,i)),{outlineColor:Wa(t.outlineColor,i),contourColor:Wa(t.contourColor,i),outlineWidth:t.outlineWidth,contourWidth:t.contourWidth,outlineThreshold:t.outlineThreshold,contourThreshold:t.contourThreshold,outlineSmoothing:t.outlineSmoothing,contourFrequency:t.contourFrequency,contourDirection:new N(...t.contourDirection),positionalLines:t.positionalLines,compensation:t.compensation})}function die(t,i){return ge(Z({},Uo(t,i)),{thickness:t.thickness,ior:t.ior,roughness:t.roughness})}function cie(t,i){return ge(Z({},Uo(t,i)),{style:t.style,projection:t.projection,axis:t.axis,blending:t.blending,offset:new q(...t.offset),colorA:Wa(t.colorA,i),colorB:Wa(t.colorB,i),frequency:new q(...t.frequency),size:t.size,variation:t.variation,smoothness:t.smoothness,zigzag:t.zigzag,rotation:t.rotation,vertical:new q(...t.vertical),horizontal:new q(...t.horizontal),sides:t.sides})}var M_=class extends hs{},i9={noise:["noiseType"],texture:["projection","axis","side"],video:["projection","axis","side"],displace:["noiseType"],light:["roughnessMap","bumpMap"],depth:["smooth","isWorldSpace","gradientType","isVector"],pattern:["style","projection","axis"]},n9={depth:["colors"]};function uie(t,i,r){var d,c;if(i==="isMask")return!0;let s=i9[t.type],l=n9[t.type];if(l!==void 0){let u=t.color;if(l.includes(i)){let h=(c=(d=u[i])==null?void 0:d.value)==null?void 0:c.length;if(h!==void 0&&h!==r.length)return!0}}return s!==void 0?s.includes(i):!1}function r9(t,i,r){let s=r.uniforms[`f${r.id}_texture`];if(!s)return!1;let l=!1,d=t;if("image"in d){let c=d.image,u=i.image(c),h=s;h.image instanceof mh||h.image.deref(),h.image=u}if("video"in d){let c=d.video,u=i.video(c),h=s;h.image instanceof mh||h.image.deref(),h.image=u}if("wrapping"in d){let c=s;c.wrap=d.wrapping}if("repeat"in d||"offset"in d){let c="mat",u=r.uniforms[`f${r.id}_${c}`];"repeat"in d&&(u.repeat=d.repeat),"offset"in d&&(u.offset=d.offset),u.updateMatrix()}return l}function hie(t,i,r,s){let l=!1;for(let[d,c]of Object.entries(t)){if(d==="bumpMap"||d==="roughnessMap"){l=!0;continue}if(!d||c===void 0)continue;if(s9(d,r,s,i)){d==="visible"&&r.type==="light"&&(l=!0);continue}r.visible=s.visible;let u=r.uniforms[`f${r.id}_${d}`];if(u&&!(u instanceof xM))switch(l=l||uie(r,d,c),u.constructor){case tr:if(typeof c=="string"){let h=i.getColor(c);h&&(u.value=h);break}else{let h=c;u.value instanceof M_?u.value=new hs(h.r,h.g,h.b,h.a):u.setRGBA(h);break}case Pd:if(typeof c=="string"){let h=i.getColor(c);h&&(u.value=h);break}else{let h=c;u.value instanceof M_?u.value=new hs(h.r,h.g,h.b,h.a):u.value.setRGBA(h.r,h.g,h.b,h.a);break}case ra:{let h=c;u.value.setX(h[0]),u.value.setY(h[1]);break}case ro:{let h=c;u.value.setX(h[0]),u.value.setY(h[1]),u.value.setZ(h[2]);break}case Od:{r9(c,i,r);break}case ph:{u.value=c.map(h=>new ri(...h));break}default:{u.value=c;break}}}return l}var gh=(t,i,r)=>{var s,l;return(l=Math.max(0,Math.min(1,Number((s=i.getVariable(typeof t=="number"?t*100:t,r))!=null?s:100)/100)))!=null?l:1},vh=class{constructor(t,i,r,s,l){this.id=t,this.uuid=i,this.data=r,this.uniforms={};for(let d in s)this.uniforms[`f${this.id}_${d}`]=s[d];for(let d in r)s9(d,this,r,l)}get type(){return this.data.type}static create(t,i,r,s){var l,d,c,u,h,f,m,p,g,v,w,x,_,k,A,C,M,D;if(r.type==="light")return zd.createLigherLayer(t,i,r,s);if(r.type==="texture"||r.type==="video"){let P=r.type==="texture"?s.image(r.texture.image):s.video(r.texture.video),T=new _M(P,r.texture.wrapping),O=new gte(P),z=new vte(r.texture.repeat,r.texture.offset),L=new kt(r.crop?1:0),B=new yn((l=r.projection)!=null?l:0),j=new yn((d=["x","y","z"].indexOf(r.axis))!=null?d:0),V=new yn((c=r.side)!=null?c:0),H=new ra(r.size?new q(r.size[0],r.size[1]):new q(100,100)),Y=new kt((u=r.blending)!=null?u:0),se=new kt(gh(r.alpha,s)),re=new yn((h=r.mode)!=null?h:0),$=new Ha((f=r.isMask)!=null?f:!1),te=new SM(T,O,L,B,j,V,H,Y,z,se,re,$),he=new Tn(te.calpha,"f");return new ir(t,i,r,{texture:T,textureSize:O,crop:L,projection:B,axis:j,side:V,size:H,blending:Y,mat:z,alpha:se,mode:re,isMask:$},te,re,he,$,s)}else if(r.type==="matcap"){let P=s.image(r.texture.image),T=new _M(P,r.texture.wrapping),O=new kt(gh(r.alpha,s)),z=new yn((m=r.mode)!=null?m:0),L=new Ha((p=r.isMask)!=null?p:!1),B=new T5(T,O,z,L),j=new Tn(B.calpha,"f");return new ir(t,i,r,{texture:T,alpha:O,mode:z,isMask:L},B,z,j,L,s)}else if(r.type==="displace")if(r.displacementType==="noise"){let P=new ro(new N(...r.offset)),T=new kt((g=r.scale)!=null?g:10),O=new kt((v=r.intensity)!=null?v:8),z=new kt((w=r.movement)!=null?w:1),L=new yn((x=r.noiseType)!=null?x:0),B=new yn((_=r.voronoiStyle)!=null?_:0),j=new kt((k=r.smoothness)!=null?k:.5),V=new kt((A=r.seed)!=null?A:0),H=new kt((C=r.highCut)!=null?C:1),Y=new kt((M=r.lowCut)!=null?M:0),se=new yn((D=r.quality)!=null?D:1),re=new U5(O,z,P,B,j,V,H,Y,se,T,L);return new a9(t,i,r,{offset:P,scale:T,intensity:O,movement:z,noiseType:L,voronoiStyle:B,smoothness:j,seed:V,highCut:H,lowCut:Y,quality:se},re,s)}else throw new Error;else return mie(t,i,r,s)}updateByOp(t,i,r){let s=t;if(s.path[0]===void 0){if(s.type===0)return"type"in s.props||"category"in s.props||"visible"in s.props?(r.scene.markNeedsUpdateRendererDirty(),!0):hie(s.props,r.shared,this,i)}else if(s.path[0]==="texture")return"texture"in i||"video"in i?r9(s.props,r.shared,this):!0;return!1}dispose(){if(fie(this)){let t=this.uniforms[`f${this.id}_texture`];if(!t)return!1;let i=t;i.image instanceof mh||i.image.deref()}}hasValueByKey(t){return this.uniforms[t]!==void 0}hasValue(t){return this.hasValueByKey(`f${this.id}_${t}`)}setValue(t,i){let r=`f${this.id}_${t}`;this.hasValueByKey(r)&&i!==void 0&&(this.uniforms[r].value=i)}getNode(t){let i=`f${this.id}_${t}`;if(this.hasValueByKey(i))return this.uniforms[i]}getValue(t){let i=`f${this.id}_${t}`;if(this.hasValueByKey(i))return this.uniforms[i].value}getName(t){let i=/f\d+_(.*)/.exec(t);if(i&&i.length>1)return i[1];console.log(`Layer.getName: error ${t}`)}getNames(){let t=[];for(let i in this.uniforms){let r=this.getName(i);r&&t.push(r)}return t}},ir=class extends vh{constructor(t,i,r,s,l,d,c,u,h){super(t,i,r,s,h),this.params=s,this.color=l,this.mode=d,this.alpha=c,this.isMask=u}},a9=class extends vh{constructor(t,i,r,s,l,d){super(t,i,r,s,d),this.position=l}},zd=class extends vh{constructor(t,i,r,s,l,d){super(t,i,r,l,d),this.node=s}static createLigherLayer(t,i,r,s){var m,p,g,v,w,x,_,k,A,C,M;let l,d=new kt(gh(r.alpha,s)),c=new yn(r.mode),u=new kt(r.bumpMapIntensity),h=new kt(gh(r.alphaOverride,s)),f;if(!r.visible)l=new V5,f={};else if(r.category==="lambert"){l=new xte;let D=new tr((m=s.color(r.emissive))!=null?m:0),P=new Ha((p=r.occlusion)!=null?p:!0);f={emissive:D,occlusion:P},l.emissive=D,l.occlusion=P}else if(r.category==="toon"){l=new Ste;let D=new kt((g=r.shininess)!=null?g:30),P=new tr((v=s.color(r.specular))!=null?v:1118481);f={shininess:D,specular:P},l.shininess=D,l.specular=P}else if(r.category==="physical"){l=new kte;let D=new kt((w=r.roughness)!=null?w:.3),P=new kt((x=r.metalness)!=null?x:0),T=new kt((_=r.reflectivity)!=null?_:.5),O=new Ha((k=r.occlusion)!=null?k:!0);f={roughness:D,metalness:P,reflectivity:T,occlusion:O},l.roughness=D,l.metalness=P,l.reflectivity=T,l.occlusion=O}else{l=new _te;let D=new kt((A=r.shininess)!=null?A:30),P=new tr(r.specular!==void 0&&(C=s.color(r.specular))!=null?C:1118481),T=new Ha((M=r.occlusion)!=null?M:!0);f={shininess:D,specular:P,occlusion:T},l.shininess=D,l.specular=P,l.occlusion=T}return l.alpha=new kt(1),l.shadingAlpha=d,l.shadingBlend=c,l.bumpMapIntensity=u,l.alphaOverride=h,f.alpha=l.shadingAlpha,f.mode=l.shadingBlend,f.bumpMapIntensity=l.bumpMapIntensity,f.alphaOverride=l.alphaOverride,new zd(t,i,r,l,f,s)}get category(){return this.node.category}};function fie(t){let i=t instanceof vh?t.type:t;return i==="texture"||i==="video"||i==="displace_map"||i==="matcap"}function ao(t){var i,r,s;return{alpha:new kt((i=t.alpha)!=null?i:1),mode:new yn((r=t.mode)!=null?r:0),isMask:new Ha((s=t.isMask)!=null?s:!1)}}function pie(t,i,r,s,l){var d,c,u,h,f,m,p,g,v,w,x,_,k,A,C,M,D,P,T,O,z,L,B,j,V,H,Y,se,re,$,te,he,oe,ee,pe,ce,ve,le,Pe,we,Ee,xe,Ue,Le,Ie,rt,nt,ot,mt,it,Ke,pt,Rt,ae,Q,Te,Qe,He,et,Ct,ct,Ge,ut,Tt,xt,Ht,Bt,Ei,Xi,Bn,ye,Ne,Je;switch(t.type){case"color":{let Fe=new tr((d=s.color)!=null?d:no),$e=ao(s),at=new kM(Fe,$e.alpha),Dt=new Tn(at.calpha,"f");return new ir(i,r,t,Z({color:Fe},$e),at,$e.mode,Dt,$e.isMask,l)}case"fresnel":{let Fe=new tr((c=s.color)!=null?c:16777215),$e=new kt((u=s.bias)!=null?u:.1),at=new kt((h=s.scale)!=null?h:1),Dt=new kt((f=s.intensity)!=null?f:2),Wt=new kt((m=s.factor)!=null?m:1),si=ao(s),Pt=new yte(Fe,$e,at,Dt,Wt,si.alpha,si.mode,si.isMask),pi=new Tn(Pt.calpha,"f");return new ir(i,r,t,Z({color:Fe,bias:$e,scale:at,intensity:Dt,factor:Wt},si),Pt,si.mode,pi,si.isMask,l)}case"rainbow":{let Fe=new kt((p=s.filmThickness)!=null?p:30),$e=new kt((g=s.movement)!=null?g:0),at=new ro((v=s.wavelengths)!=null?v:new N(0,0,0)),Dt=new kt((w=s.noiseStrength)!=null?w:0),Wt=new kt((x=s.noiseScale)!=null?x:1),si=new ro((_=s.offset)!=null?_:new N(0,0,0)),Pt=ao(s),pi=new z5(Fe,$e,at,Dt,Wt,si,Pt.alpha,Pt.isMask),ai=new Tn(pi.calpha,"f");return new ir(i,r,t,Z({filmThickness:Fe,movement:$e,wavelengths:at,noiseStrength:Dt,noiseScale:Wt,offset:si},Pt),pi,Pt.mode,ai,Pt.isMask,l)}case"transmission":{let Fe=new kt((k=s.thickness)!=null?k:10),$e=new kt((A=s.ior)!=null?A:1.5),at=new kt((C=s.roughness)!=null?C:.5),Dt=Yt.transmissionSize,Wt=Yt.transmissionRenderTarget,si=Yt.transmissionRenderTargetDepth,Pt=window.innerWidth,pi=window.innerHeight,ai=Pt>=pi?new ra(pi/Pt,1):new ra(1,Pt/pi),Ui=ao(s),bn=new N5(Fe,$e,at,Dt,Wt,si,ai,Ui.alpha),cr=new Tn(bn.calpha,"f");return new ir(i,r,t,Z({thickness:Fe,ior:$e,roughness:at,aspectRatio:ai},Ui),bn,Ui.mode,cr,Ui.isMask,l)}case"toon":{let Fe=new yn((M=s.positioning)!=null?M:0),$e;s.colors?$e=new ph(s.colors.length,s.colors):($e=new ph(10,new ri(0,0,0,1)),$e.value[1]=new ri(1,1,1,1));let at;s.steps?at=new fh(s.steps.length,s.steps):(at=new fh(10,1),at.value[0]=0);let Dt=new ro((D=s.source)!=null?D:new N(0,0,0)),Wt=new Ha((P=s.isWorldSpace)!=null?P:!0),si=new kt((T=s.noiseStrength)!=null?T:0),Pt=new kt((O=s.noiseScale)!=null?O:1),pi=new Pd(s.shadowColor),ai=new ro((z=s.offset)!=null?z:new N(0,0,0)),Ui=ao(s),bn=new B5(Fe,$e,at,Dt,Wt,si,Pt,pi,ai,Ui.alpha),cr=new Tn(bn.calpha,"f");return new ir(i,r,t,Z({positioning:Fe,colors:$e,steps:at,source:Dt,isWorldSpace:Wt,noiseStrength:si,noiseScale:Pt,shadowColor:pi,offset:ai},Ui),bn,Ui.mode,cr,Ui.isMask,l)}case"outline":{let Fe=new tr((L=s.outlineColor)!=null?L:16777215),$e=new tr((B=s.contourColor)!=null?B:16777215),at=new kt((j=s.outlineWidth)!=null?j:.1),Dt=new kt((V=s.contourWidth)!=null?V:.1),Wt=new kt((H=s.outlineThreshold)!=null?H:.1),si=new kt((Y=s.contourThreshold)!=null?Y:.1),Pt=new kt((se=s.outlineSmoothing)!=null?se:.1),pi=new kt((re=s.contourFrequency)!=null?re:.1),ai=new ro(($=s.contourDirection)!=null?$:new N(0,1,0)),Ui=new Ha((te=s.positionalLines)!=null?te:!1),bn=new Ha((he=s.compensation)!=null?he:!0),cr=Yt.normalRenderTarget,ya=Yt.normalRenderTargetDepth,ne=Yt.pixelRatioNode,De=Yt.resolution,Be=ao(s),Se=new O5(Fe,$e,at,Dt,Wt,si,Pt,pi,ai,Ui,bn,De,cr,ya,ne,Be.alpha),Ve=new Tn(Se.calpha,"f");return new ir(i,r,t,Z({outlineColor:Fe,contourColor:$e,outlineWidth:at,contourWidth:Dt,outlineThreshold:Wt,contourThreshold:si,outlineSmoothing:Pt,contourFrequency:pi,contourDirection:ai,positionalLines:Ui,compensation:bn},Be),Se,Be.mode,Ve,Be.isMask,l)}case"depth":{let Fe=new yn((oe=s.gradientType)!=null?oe:0),$e=new Ha((ee=s.smooth)!=null?ee:!1),at=new kt((pe=s.near)!=null?pe:50),Dt=new kt((ce=s.far)!=null?ce:200),Wt=new kt((ve=s.isVector)!=null?ve:1),si=new kt((le=s.isWorldSpace)!=null?le:0),Pt=new ro((Pe=s.origin)!=null?Pe:new N),pi=new ro((we=s.direction)!=null?we:new N),ai;s.colors?ai=new ph(s.colors.length,s.colors):(ai=new ph(2,new ri(0,0,0,1)),ai.value[1]=new ri(1,1,1,1));let Ui;s.steps?Ui=new fh(s.steps.length,s.steps):(Ui=new fh(2,1),Ui.value[0]=0);let bn=ao(s),cr=new A5(Fe,$e,at,Dt,Wt,si,Pt,pi,ai,Ui,bn.alpha,bn.isMask),ya=new Tn(cr.calpha,"f");return new ir(i,r,t,Z({gradientType:Fe,smooth:$e,near:at,far:Dt,isVector:Wt,isWorldSpace:si,origin:Pt,direction:pi,colors:ai,steps:Ui},bn),cr,bn.mode,ya,bn.isMask,l)}case"noise":{let Fe=new kt((Ee=s.scale)!=null?Ee:1),$e=new ro((xe=s.size)!=null?xe:new N(100,100,100)),at=new kt((Ue=s.move)!=null?Ue:1),Dt=new ra((Le=s.fA)!=null?Le:new q(1.7,9.2)),Wt=new ra((Ie=s.fB)!=null?Ie:new q(8.3,2.8)),si=new ra((rt=s.distortion)!=null?rt:new q(1,1)),Pt=new Pd(s.colorA),pi=new Pd(s.colorB),ai=new Pd(s.colorC),Ui=new Pd(s.colorD),bn=new yn((nt=s.noiseType)!=null?nt:0),cr=new yn((ot=s.voronoiStyle)!=null?ot:0),ya=new kt((mt=s.highCut)!=null?mt:1),ne=new kt((it=s.lowCut)!=null?it:0),De=new kt((Ke=s.smoothness)!=null?Ke:.5),Be=new kt((pt=s.seed)!=null?pt:.5),Se=new yn((Rt=s.quality)!=null?Rt:1),Ve=ao(s),zt=new D5(Fe,$e,at,Dt,Wt,si,Pt,pi,ai,Ui,Ve.alpha,bn,Ve.isMask,cr,ya,ne,De,Be,Se),vi=new Tn(zt.calpha,"f");return new ir(i,r,t,ge(Z({scale:Fe,size:$e,move:at,fA:Dt,fB:Wt,distortion:si,colorA:Pt,colorB:pi,colorC:ai,colorD:Ui,noiseType:bn},Ve),{voronoiStyle:cr,highCut:ya,lowCut:ne,smoothness:De,seed:Be,quality:Se}),zt,Ve.mode,vi,Ve.isMask,l)}case"normal":{let Fe=new ro((ae=s.cnormal)!=null?ae:new N(1,1,1)),$e=ao(s),at=new S5(Fe,$e.alpha),Dt=new Tn(at.calpha,"f");return new ir(i,r,t,Z({cnormal:Fe},$e),at,$e.mode,Dt,$e.isMask,l)}case"gradient":{let Fe=new yn((Q=s.gradientType)!=null?Q:0),$e=new Ha((Te=s.smooth)!=null?Te:!1),at;s.colors?at=new ph(s.colors.length,s.colors):(at=new ph(10,new ri(0,0,0,1)),at.value[1]=new ri(1,1,1,1));let Dt;s.steps?Dt=new fh(s.steps.length,s.steps):(Dt=new fh(10,1),Dt.value[0]=0);let Wt=new ra((Qe=s.offset)!=null?Qe:new q(0,0)),si=new ra((He=s.morph)!=null?He:new q(0,0)),Pt=new kt((et=s.angle)!=null?et:0),pi=ao(s),ai=new E5(Fe,$e,at,Dt,Wt,si,Pt,pi.alpha,pi.isMask),Ui=new Tn(ai.calpha,"f");return new ir(i,r,t,Z({gradientType:Fe,smooth:$e,colors:at,steps:Dt,offset:Wt,morph:si,angle:Pt},pi),ai,pi.mode,Ui,pi.isMask,l)}case"pattern":{let Fe=new yn((Ct=s.style)!=null?Ct:0),$e=new yn((ct=s.projection)!=null?ct:0),at=new yn((Ge=["x","y","z"].indexOf(s.axis))!=null?Ge:0),Dt=new kt((ut=s.blending)!=null?ut:0),Wt=new ra((Tt=s.offset)!=null?Tt:new q(0,0)),si=new Pd(s.colorA),Pt=new Pd(s.colorB),pi=new ra((xt=s.frequency)!=null?xt:new q(10,10)),ai=new kt((Ht=s.size)!=null?Ht:.5),Ui=new kt((Bt=s.variation)!=null?Bt:0),bn=new kt((Ei=s.smoothness)!=null?Ei:.5),cr=new kt((Xi=s.zigzag)!=null?Xi:0),ya=new kt((Bn=s.rotation)!=null?Bn:0),ne=new ra((ye=s.vertical)!=null?ye:new q(0,1)),De=new ra((Ne=s.horizontal)!=null?Ne:new q(0,1)),Be=new yn((Je=s.sides)!=null?Je:6),Se=ao(s),Ve=new I5(Fe,$e,at,Dt,Wt,si,Pt,pi,ai,Ui,bn,cr,ya,ne,De,Be,Se.alpha,Se.isMask),zt=new Tn(Ve.calpha,"f");return new ir(i,r,t,Z({style:Fe,projection:$e,axis:at,blending:Dt,offset:Wt,colorA:si,colorB:Pt,frequency:pi,size:ai,variation:Ui,smoothness:bn,zigzag:cr,rotation:ya,vertical:ne,horizontal:De,sides:Be},Se),Ve,Se.mode,zt,Se.isMask,l)}default:{let Fe=new tr(1,0,0,1),$e=ao(s),at=new kM(Fe,$e.alpha),Dt=new Tn(at.calpha,"f");return new ir(i,r,t,Z({color:Fe},$e),at,$e.mode,Dt,$e.isMask,l)}}}function mie(t,i,r,s){let l=Qte(r,s);return pie(r,t,i,l,s)}function s9(t,i,r,s){if(r.type==="displace"&&(t==="intensity"||t==="visible")){let l=i.uniforms[`f${i.id}_intensity`];return l?(l.value=r.intensity*(r.visible?1:0),l):void 0}if(r.type!=="displace"&&(t==="alpha"||t==="visible")){let l=i.uniforms[`f${i.id}_alpha`];if(!l)return;if(l.value=gh(r.alpha,s)*(r.visible?1:0),r.type==="outline"&&t==="visible"){let d=i.uniforms[`f${i.id}_compensation`];d&&(d.value=r.compensation&&r.visible)}return l}}function Xp(t,i){var l;let r=0,s=t.layers.find(d=>d.data.type==="light");if(s){let d=s.data,c=Number(i.getVariable(d.alphaOverride));if((typeof d.alphaOverride=="string"?c/100:d.alphaOverride)<1)return!0}for(let d of t.layers){if(d.data.type!=="displace"&&d.data.isMask)return!0;if(d.data.type!=="displace"&&"alpha"in d.data&&d.data.type!=="light"&&d.data.type!=="fresnel"&&d.data.type!=="texture"&&d.data.type!=="matcap"&&d.data.type!=="rainbow"&&d.data.type!=="outline"&&d.data.type!=="pattern"){let c=d.data.visible?d.data.alpha:0;if(typeof c=="string"&&(c=Math.max(0,Math.min(1,Number((l=i.getVariable(c))!=null?l:100)/100))),c===1&&d.data.type==="depth"||d.data.type==="gradient"){for(let u of d.data.colors)if(u[3]<1){c=u[3];break}}else if(c===1&&d.data.type==="noise"){let u=i.color(d.data.colorA).a,h=i.color(d.data.colorB).a,f=i.color(d.data.colorC).a,m=i.color(d.data.colorD).a,p=Math.min(u,Math.min(h,Math.min(f,m)));p<1&&(c=p)}r+=(1-r)*c}}return r<1}var Yc=class extends gn{constructor(){super(void 0),this.flatShading=!1,this.needsJitter=!0,this.cacheKey="",this.fog=!0,this.dithering=!0,this.vertexColors=!0,this.transparent=!0}customProgramCacheKey(){return this.cacheKey}},gie=class extends Yc{constructor(t,i,r,s){super(),this.flatShading=t,this.side=i,this.wireframe=r,this.root=s}updateAfterBuild(){let t=this.root;this.lights=t.lights,this.vertexShader=t.vertexShader,this.fragmentShader=t.fragmentShader,this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.transparent=t.transparent,this.cacheKey=t.customProgramCacheKey()+"flat"+this.flatShading+this.side}onBeforeCompile(t,i){this.root.onBeforeCompile(t)}get data(){return this.root.data}get category(){return this.root.category}get hasAO(){return this.root.hasAO}getFlavor(t,i,r){return this.root.getFlavor(t,i,r)}get layers(){return this.root.layers}get fragment(){return this.root.fragment}getLayersOfType(t){return this.root.getLayersOfType(t)}getLayerByUuid(t){return this.root.getLayerByUuid(t)}updateByOp(t,i,r){this.root.updateByOp(t,i,r)}nodeMaterialDispose(){this.root.nodeMaterialDispose()}},IM=class extends Yc{constructor(t,i,r=!0){super(),this.data=t,this.allowVariableSaves=r,this.layerIdGen=0,this.flavors=[],this.masks={},this.type="NodeMaterial",this.updaters=[],this.reset0(t,i)}get nodeMaterial(){return this}getFlavor(t,i,r){let s=r?6:(t?3:0)+i;if(s===0)return this;this.flavors===void 0&&(this.flavors=[]),s-=1;let l=this.flavors[s];return l===void 0&&(l=new gie(t,i,r,this),this.flavors[s]=l,l.flatShading=t,l.side=i,l.updateAfterBuild()),l}get fragment(){return this.lightLayer.node}get category(){return this.lightLayer.category}get hasAO(){var t,i;return(i=(t=this.lightLayer.getNode("occlusion"))==null?void 0:t.value)!=null?i:!1}reset(t,i){this.data!==t&&this.reset0(t,i)}reset0(t,i){var s,l;this.data=t;let r=(s=t.layers)!=null?s:pa.defaultTwoLayerData("phong").layers;try{this.layers=r.map(d=>vh.create(this.layerIdGen++,d.id,d.data,i.shared))}catch(d){this.layers=[]}this.layers.reverse(),this.name=(l=t.name)!=null?l:"Untitled Material",this.onUpdate(i.shared),this.transparent=Xp(t,i.shared),this.saveVariableLocations(i)}onVariableUpdate(t,i,r){if(t[0]==="alphaOverride")this.transparent=Xp(this.data,r.shared),this.lightLayer.setValue("alphaOverride",Math.max(0,Math.min(Number(i)/100,1)));else if(t[0]==="layer"){let s=t[1],l=t[2];if(s&&l){let d=this.layers.find(c=>c.uuid===s);d!=null&&d.hasValue(l)&&(l==="alpha"?(this.transparent=Xp(this.data,r.shared),d.setValue(l,Math.max(0,Math.min(Number(i)/100,1)))):d.setValue(l,i))}}}saveVariableLocations(t){if(!this.allowVariableSaves)return;let i=this.data.layers.find(r=>r.data.type==="light");i&&t.shared.getVariable(i.data.alphaOverride,["material",this.uuid,"alphaOverride"]),this.data.layers.forEach(r=>{"alpha"in r.data&&typeof r.data.alpha=="string"&&t.shared.getVariable(r.data.alpha,["material",this.uuid,"layer",r.id,"alpha"])})}getLayersOfType(t){return this.layers.filter(i=>i.type===t)}getLayerByUuid(t){return this.layers.find(i=>i.uuid===t)}onUpdate(t){this.cacheKey=this.computeCacheKey(),this.lightLayer=this.layers.find(i=>i instanceof zd),this.lightLayer===void 0&&(this.lightLayer=new zd(0,"",ge(Z({},ls.defaultData("light","phong")),{visible:!1}),new V5,{},t)),this.dispose();for(let i of this.flavors)i&&i.dispose();this.applyTextureMaps(),this.applyMasks(),this.blendColors(),this.blendAfterColors(),this.blendPositions()}applyTextureMaps(){let t=this.layers.find(l=>l instanceof zd);if(!t)return;let i=t.data,r=i.bumpMap,s=i.roughnessMap;t.node.bumpMap=void 0,t.node.roughnessMap=void 0;for(let l=0;l<this.layers.length;++l){let d=this.layers[l];d instanceof ir&&d.color instanceof SM&&(d.uuid===r&&(t.node.bumpMap=d.color),d.uuid===s&&(t.node.roughnessMap=d.color))}}updateByOp(t,i,r){if(i!==void 0?this.data=i:i=this.data,this.transparent=Xp(i,r.shared),t.path[0]==="layers"){this.data=i;let s=r.shared,l=t.path[1];if(l===void 0){if(this.layers.reverse(),t.type===4){let d=vh.create(this.layerIdGen++,t.id,t.data,r.shared);this.layers.splice(t.localIndex,0,d),r.scene.markNeedsUpdateRendererDirty()}else if(t.type===5)this.layers.splice(t.localIndex,1)[0].dispose(),r.scene.markNeedsUpdateRendererDirty();else if(t.type===6){let d=this.layers.findIndex(u=>u.uuid===t.id),c=this.layers[d];this.layers.splice(d,1),this.layers.splice(t.localIndex,0,c),r.scene.markNeedsUpdateRendererDirty()}this.layers.reverse(),this.onUpdate(r.shared)}else{t.type===0&&t.props.occlusion!==void 0&&r.scene.markNeedsUpdateRendererDirty();let d=this.layers.find(c=>c.uuid===l);if(d){let c=i.layers.data(l),u;if(t.type===0&&("alpha"in t.props||"alphaOverride"in t.props)&&("alpha"in t.props?u=ge(Z({},t.props),{alpha:gh(t.props.alpha,s,["material",this.uuid,"layer",l,"alpha"])}):u=ge(Z({},t.props),{alphaOverride:gh(t.props.alphaOverride,s,["material",this.uuid,"alphaOverride"])})),d.updateByOp(ge(Z(Z({},t),u?{props:u}:{}),{path:t.path.slice(2)}),c,r)){let h=vh.create(this.layerIdGen++,l,c,s);this.layers.splice(this.layers.findIndex(f=>f.uuid===l),1,h),this.onUpdate(r.shared)}}}}else this.reset(i,r)}applyMasks(){for(let t=0;t<this.layers.length;++t){let i=this.layers[t];i instanceof ir?i.color.mask=void 0:i instanceof zd&&(i.node.mask=void 0)}for(let t=0;t<this.layers.length;++t){let i=this.layers[t];if(i instanceof ir&&i.isMask.value&&i.data.visible&&t>0){let r=t-1,s=this.layers[r];s instanceof zd?s.node.mask=new fs(i.color,i.alpha,fs.MUL):s instanceof ir&&(s.isMask.value||(s.color.mask=new fs(i.color,i.alpha,fs.MUL)))}}}blendColors(){let t=this.layers.findIndex(r=>r instanceof ir),i=this.layers.findIndex(r=>r instanceof zd);if(t!==-1&&t<i){let r=this.layers[t].color;for(let s=t+1;s<i;++s){let l=this.layers[s];if(l instanceof ir){if(l.isMask.value)continue;r=new x5(r,l.color,l.alpha,l.mode)}}this.fragment.color=r}else this.fragment.color=void 0}blendAfterColors(){let t=new Tn("outgoingLight","f"),i=this.layers.findIndex(r=>r instanceof zd);if(this.layers.length>i+1){for(let r=i+1;r<this.layers.length;++r){let s=this.layers[r];if(s instanceof ir){if(s.isMask.value)continue;t=new x5(t,s.color,s.alpha,s.mode)}}this.fragment.afterColor=t}else this.fragment.afterColor=void 0}blendPositions(){let t=this.layers.filter(i=>i instanceof a9);if(t.length>0){let i=t[0].position;for(let r=1;r<t.length;++r)t[r]&&(i=new fs(i,t[r].position,fs.ADD),i=new fs(i,new kt(.5).setReadonly(!0),fs.MUL));this.fragment.position=i}else this.fragment.position=void 0}getDefines(){return this.defines}getUniforms(){return this.uniforms}getVertexShader(){return this.vertexShader}getFragmentShader(){return this.fragmentShader}onBeforeCompile(t){this.build(),t.defines=this.defines,t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.extensionDerivatives=this.extensions.derivatives===!0,t.extensionFragDepth=this.extensions.fragDepth===!0,t.extensionDrawBuffers=this.extensions.drawBuffers===!0,t.extensionShaderTextureLOD=this.extensions.shaderTextureLOD===!0}clampUniformsForPreview(t,i){let r=(s,l,d)=>Math.min(Math.max(s,l),d);for(let s of this.layers)if(s.type==="displace"){let l=r(s.uniforms[`f${s.id}_intensity`].value,t,i);s.uniforms[`f${s.id}_intensity`].value=l}}computeCacheKey(){var i,r;let t="[";for(let{data:s}of this.data.layers)if(s.type==="light")t+=`"${s.visible?s.category.toUpperCase():"Basic"}"`;else{let l=((i=i9[s.type])!=null?i:[]).map(f=>s[f]),d=((r=n9[s.type])!=null?r:[]).map(f=>{var m,p;return(p=(m=s[f])==null?void 0:m.length)!=null?p:0}),c=[...l,...d],u="isMask"in s&&s.isMask,h=`"${s.type}-${s.visible}-${u}"`;c.length?t+=`[${h}, "${c.join('","')}"],`:t+=h}return t=t.slice(0,-1)+"]",t}updateFrame(t){for(let i=0;i<this.updaters.length;++i)t.updateNode(this.updaters[i])}build(){let t=new mte;t.needsJitter=this.needsJitter,this.lights=this.lightLayer.data.visible,t.build(this.fragment,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters;for(let i of this.flavors)i&&i.updateAfterBuild();return this}nodeMaterialDispose(){this.layers.forEach(t=>t.dispose()),super.dispose();for(let t of this.flavors)t&&t.dispose()}assetsLoaded(){for(let t of this.layers)if(t instanceof ir){let i=t.params.texture;if(i instanceof _M&&!i.image.loaded)return!1}return!0}getHash(){let t="{";return t+='"fragment":'+this.fragment.getHash(),t+="}",t}};Object.defineProperties(Yc.prototype,{properties:{get:function(){return this.fragment.properties}}});var RM=class extends IM{constructor(t,i,r){super(t,i,!1),this.uuid=r,this.allowVariableSaves=!0,this.saveVariableLocations(i)}},vie=sn(MS()),o9=new Map;function yie(t){if(typeof t=="string")return t;let i=o9.get(t);return i||(i={url:URL.createObjectURL(new Blob([t]))},o9.set(t,i)),i.url}var b0=class{constructor({src:t,volume:i,delay:r,loop:s}){this._volume=1,this.delay=0,this._loop=1,this.loopsRemaining=0,this._status="stopped",this.onEnd=()=>{this.loopsRemaining===1/0?this.replay():this.loopsRemaining>1?(this.replay(),this.loopsRemaining--):(this._status="stopped",this.loopsRemaining=this._loop)};let l;typeof t=="string"?l={src:t}:l={src:yie(t),format:"wav"},this.sound=new vie.Howl(l),this.sound.on("end",this.onEnd),this.src=t,i!==void 0&&(this.volume=i),r!==void 0&&(this.delay=r),s!==void 0&&(this.loop=s)}get status(){return this._status}get volume(){return this._volume}set volume(t){this._volume=t,this.sound.volume(t)}get loop(){return this._loop}set loop(t){this._loop=t,this.loopsRemaining=t}replay(){this.clearDelay(),this.delayTimerId=window.setTimeout(()=>{this.sound.play(),this.clearDelay()},this.delay)}fade(t,i=1e3){t?(this.sound.volume(this._volume),this.clearFade(),this.fadeTimerId=window.setTimeout(()=>{this.sound.fade(this._volume,0,i),this.clearFade()},t)):this.sound.fade(this._volume,0,i)}on(t,i,r){this.sound.on(t,i,r)}off(t,i,r){this.sound.off(t,i,r)}play(){this._status==="playing"||this.sound.playing()||(this._status==="paused"?(this.sound.seek()===0?this.replay():this.sound.play(),this._status="playing"):this._status==="stopped"&&(this.replay(),this._status="playing"))}pause(){this._status==="playing"&&(this.sound.pause(),this.clearFade(),this.clearDelay(),this._status="paused")}stop(){this.sound.stop(),this.loopsRemaining=this._loop,this.clearFade(),this.clearDelay(),this._status="stopped"}clearFade(){this.fadeTimerId&&(clearTimeout(this.fadeTimerId),delete this.fadeTimerId)}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}dispose(t=!1){this.off(),this.stop(),this.clearFade(),this.clearDelay()}},bie=class{constructor(){this.type="ShapePath",this.color=new _t,this.subPaths=[],this.currentPath=null}moveTo(t,i){return this.currentPath=new qw,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,i),this}lineTo(t,i){var r;return(r=this.currentPath)==null||r.lineTo(t,i),this}quadraticCurveTo(t,i,r,s){var l;return(l=this.currentPath)==null||l.quadraticCurveTo(t,i,r,s),this}bezierCurveTo(t,i,r,s,l,d){var c;return(c=this.currentPath)==null||c.bezierCurveTo(t,i,r,s,l,d),this}splineThru(t){var i;return(i=this.currentPath)==null||i.splineThru(t),this}toShapes(){let t={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},i={loc:t.ORIGIN,t:0};function r(v,w,x,_){let k=v.x,A=w.x,C=x.x,M=_.x,D=v.y,P=w.y,T=x.y,O=_.y,z=(M-C)*(D-T)-(O-T)*(k-C),L=(A-k)*(D-T)-(P-D)*(k-C),B=(O-T)*(A-k)-(M-C)*(P-D),j=z/B,V=L/B;if(B===0&&z!==0||j<=0||j>=1||V<0||V>1)return null;if(z===0&&B===0){for(let H=0;H<2;H++)if(s(H===0?x:_,v,w),i.loc===t.ORIGIN){let Y=H===0?x:_;return{x:Y.x,y:Y.y,t:i.t}}else if(i.loc===t.BETWEEN){let Y=+(k+i.t*(A-k)).toPrecision(10),se=+(D+i.t*(P-D)).toPrecision(10);return{x:Y,y:se,t:i.t}}return null}else{for(let se=0;se<2;se++)if(s(se===0?x:_,v,w),i.loc===t.ORIGIN){let re=se===0?x:_;return{x:re.x,y:re.y,t:i.t}}let H=+(k+j*(A-k)).toPrecision(10),Y=+(D+j*(P-D)).toPrecision(10);return{x:H,y:Y,t:j}}}function s(v,w,x){let _=x.x-w.x,k=x.y-w.y,A=v.x-w.x,C=v.y-w.y,M=_*C-A*k;if(v.x===w.x&&v.y===w.y){i.loc=t.ORIGIN,i.t=0;return}if(v.x===x.x&&v.y===x.y){i.loc=t.DESTINATION,i.t=1;return}if(M<-Number.EPSILON){i.loc=t.LEFT;return}if(M>Number.EPSILON){i.loc=t.RIGHT;return}if(_*A<0||k*C<0){i.loc=t.BEHIND;return}if(Math.sqrt(_*_+k*k)<Math.sqrt(A*A+C*C)){i.loc=t.BEYOND;return}let D;_!==0?D=A/_:D=C/k,i.loc=t.BETWEEN,i.t=D}function l(v,w){let x=[],_=[];for(let k=1;k<v.length;k++){let A=v[k-1],C=v[k];for(let M=1;M<w.length;M++){let D=w[M-1],P=w[M],T=r(A,C,D,P);T!==null&&x.find(O=>O.t<=T.t+Number.EPSILON&&O.t>=T.t-Number.EPSILON)===void 0&&(x.push(T),_.push(new q(T.x,T.y)))}}return _}function d(v,w,x){let _=new q;w.getCenter(_);let k=[];return x.forEach(A=>{A.boundingBox.containsPoint(_)&&l(v,A.points).forEach(C=>{k.push({identifier:A.identifier,isCW:A.isCW,point:C})})}),k.sort((A,C)=>A.point.x-C.point.x),k}function c(v,w,x,_,k){(k==null||k==="")&&(k="nonzero");let A=new q;v.boundingBox.getCenter(A);let C=[new q(x,A.y),new q(_,A.y)],M=d(C,v.boundingBox,w);M.sort((L,B)=>L.point.x-B.point.x);let D=[],P=[];M.forEach(L=>{L.identifier===v.identifier?D.push(L):P.push(L)});let T=D[0].point.x,O=[],z=0;for(;z<P.length&&P[z].point.x<T;)O.length>0&&O[O.length-1]===P[z].identifier?O.pop():O.push(P[z].identifier),z++;if(O.push(v.identifier),k==="evenodd"){let L=O.length%2===0,B=O[O.length-2];return{identifier:v.identifier,isHole:L,for:B}}else if(k==="nonzero"){let L=!0,B=null,j=null;for(let V=0;V<O.length;V++){let H=O[V];w[H]&&(L?(j=w[H].isCW,L=!1,B=H):j!==w[H].isCW&&(j=w[H].isCW,L=!0))}return{identifier:v.identifier,isHole:L,for:B}}else console.warn('fill-rule: "'+k+'" is currently not implemented.')}let u=0,h=999999999,f=-999999999,m=[];this.subPaths.forEach(v=>{let w=v.getPoints(),x=-999999999,_=999999999,k=-999999999,A=999999999;for(let C=0;C<w.length;C++){let M=w[C];M.y>x&&(x=M.y),M.y<_&&(_=M.y),M.x>k&&(k=M.x),M.x<A&&(A=M.x)}f<=k&&(f=k+1),h>=A&&(h=A-1),w.length&&m.push({curves:v.curves,points:w,isCW:PP.isClockWise(w),identifier:u++,boundingBox:new JP(new q(A,_),new q(k,x))})});let p=m.map(v=>{var w;return c(v,m,h,f,(w=this.userData)==null?void 0:w.style.fillRule)}),g=[];return m.forEach(v=>{let w=p[v.identifier];if(w&&!w.isHole){let x=new $w;x.curves=v.curves,p.filter(_=>(_==null?void 0:_.isHole)&&_.for===v.identifier).forEach(_=>{if(_){let k=m[_.identifier],A=new qw;A.curves=k.curves,x.holes.push(A)}}),g.push(x)}}),g}},l9,d9=new Promise(t=>{l9=t}),c9=!1,T_;function wie(){if(c9)return;if(T_)return T_;function t(){return qi(this,null,function*(){let i=yield de.e(4999).then(de.bind(de,24999));l9(i),c9=!0})}return T_=t(),T_}var xie=class{load(t,i,r=()=>{}){return qi(this,null,function*(){let{load:s}=yield d9;s(t,(l,d)=>{l||!d?r(l!=null?l:"Something went wrong"):i(d)})})}parse(t){return qi(this,null,function*(){let{parse:i,Bidi:r}=yield d9;try{let s=i(t),l=new r,d=c=>s.charToGlyphIndex(c.char);return l.registerModifier("glyphIndex",null,d),l.applyFeatures(s,s.defaultRenderOptions.features),{font:s,bidi:l}}catch(s){console.error(s)}})}};function _ie(t){return qi(this,null,function*(){return yield(yield fetch(t)).arrayBuffer()})}var kie=new xie;function u9(t){return qi(this,null,function*(){let i,r,s=!1;if(t.url?(i=yield _ie(t.url),r=t.url,s=t.url.startsWith("/")):t.data&&(i=t.data.buffer.slice(t.data.byteOffset,t.data.byteOffset+t.data.byteLength)),i){let l=yield kie.parse(i);if(l)return{font:l.font,url:r,intercepted:s,arr:i,bidi:l.bidi}}})}function Sie(t,i){return i.state.glyphIndex===t||i.state.fina===t||i.state.medi===t||i.state.init===t}var Aie=class{constructor(t){var i;this._arrayBuffer=new ArrayBuffer(1),this._isLoaded=!1,this._intercepted=!1,this._isUserFont=(i=t.isUserFont)!=null?i:!1,this._loadingPromise=u9(t).then(r=>{r&&(this._arrayBuffer=r.arr,this._url=r.url,this.font=r.font,this._intercepted=r.intercepted,this._isLoaded=!0,this._bidi=r.bidi)})}update(t){var i;this._isLoaded=!1,this._isUserFont=(i=t.isUserFont)!=null?i:!1,this._loadingPromise=u9(t).then(r=>{r&&(this._arrayBuffer=r.arr,this._url=r.url,this.font=r.font,this._intercepted=r.intercepted,this._isLoaded=!0,this._bidi=r.bidi)})}get url(){return this._url}get intercepted(){return this._intercepted}get isLoaded(){return this._isLoaded}get loadingPromise(){return this._loadingPromise}reverseLigaturesTable(t,i,r){if(!this._bidi)return[];let s=this._bidi;s.getTextGlyphs(i);let l=s.tokenizer.tokens,d=[],c=0,u=r.length===l.length;for(let h=0;h<r.length;h++){let f=r[h].index,m=String.fromCharCode(r[h].unicode),p=l[c];if(Sie(f,p)||u)d.push({char:m,index:f,replacements:[p.state.glyphIndex],replacementChars:[p.char]}),c++;else{let g=p.char,v="",w=[p.state.glyphIndex],x=[],_=!1;for(;!_;)c++,v=i.charAt(c),g+=v,w.push(t.charToGlyphIndex(v)),x=t.stringToGlyphs(g),x.length===1&&x[0].index===f&&(_=!0),c>i.length&&(_=!0);d.push({char:m,index:f,replacements:w,replacementChars:Array.from(g)}),c++}}return d}generateShapes(t,i){if(!this._isLoaded)return;let r=this.font,s=i.fontSize/this.unitsPerEm,l=i.fontSize*i.lineHeight,d=t.map(k=>this.getTextWidth(k,i)),c=i.width,u=this.getCharWidth(`
`,i),h=i.horizontalAlign===1?u:0,f=this.computeSpaceWidthForLine(t,0,i),m=this.getLineInitialOffsetX(d[0],c,i.horizontalAlign,t[0],u),p=this.getLineInitialOffsetY(l,t.length,i.height,s,i.verticalAlign),g=[],v=t.map(k=>[]),w=t.map(k=>[]),x;for(let k=0;k<t.length;k++){let A=t[k],C={features:{liga:!0}},M=[];try{M=r.stringToGlyphs(A,C)}catch(P){console.warn(P)}m=this.getLineInitialOffsetX(d[k],c,i.horizontalAlign,A,u);let D=[];try{D=this.reverseLigaturesTable(r,A,M)}catch(P){console.warn(P)}f=this.computeSpaceWidthForLine(t,k,i);for(let P=0;P<M.length;P++){let T=M[P],O=T.index===0?`
`:T.unicode?String.fromCharCode(T.unicode):void 0,z=D[P],L=0,B=0;P===0&&i.horizontalAlign===2&&T.leftSideBearing!==void 0&&(B=-T.leftSideBearing*s),x&&(L=r.getKerningValue(T,x)*s),m+=B+L;let j=0;if(O===`
`)j=h;else if(O===" ")j=f;else{let V=this.createPath(T,s,m,p,i);V&&(j=V.offsetX-(L+B),g.push(V.path))}if(z.replacements.length===1)w[k].push([m,p]),v[k].push(j);else{let V=z.replacements.map(re=>{var $;return(($=r.glyphs.get(re).advanceWidth)!=null?$:0)*s}),H=V.reduce((re,$)=>re+=$,0),Y=V.map(re=>re/H),se=m;for(let re=0;re<Y.length;re++){let $=j*Y[re];w[k].push([se,p]),v[k].push($),se+=$}}m+=j,x=T}p-=l}let _=[];for(let k=0,A=g.length;k<A;k++)_.push(...g[k].toShapes());return{shapes:_,charWidths:v,lineWidths:d,charCoords:w}}get isUserFont(){return this._isUserFont}get arrayBuffer(){return this._arrayBuffer}get ascender(){var t,i;return(i=(t=this.font)==null?void 0:t.ascender)!=null?i:0}get descender(){var t,i;return(i=(t=this.font)==null?void 0:t.descender)!=null?i:0}get familyName(){var t,i;return(i=(t=this.font)==null?void 0:t.names.fontFamily)!=null?i:""}get subfamilyName(){var t,i;return(i=(t=this.font)==null?void 0:t.names.fontSubfamily)!=null?i:""}get unitsPerEm(){var t,i;return(i=(t=this.font)==null?void 0:t.unitsPerEm)!=null?i:1}getLineInitialOffsetX(t,i,r,s,l){return(r===3||r===2)&&s.indexOf(`
`)>=0&&(t-=l),r===3?i*.5-t*.5:r===2?i-t:0}getLineInitialOffsetY(t,i,r,s,l){let d=i*t,c=Math.abs(this.ascender-this.descender)*s,u=t-c,h=-this.ascender*s-u/2;return l===3?-(r-d-h):l===2?-(r*.5-d*.5-h):h}createPath(t,i,r,s,l){var h,f;let d=t.getPath(r,-s,l.fontSize,{kerning:!1,letterSpacing:l.letterSpacing});if(!d){console.error('THREE.Font: character "'+t+'" does not exists in font family '+this.familyName+".");return}let c=new bie,u=((h=t.advanceWidth)!=null?h:1)*i;if(t)for(let m of d.commands){let p=(f=c.currentPath)==null?void 0:f.currentPoint;if(!(p&&m.type!=="Z"&&p.x===m.x&&-p.y===m.y))switch(m.type){case"M":c.moveTo(m.x,-m.y);break;case"L":c.lineTo(m.x,-m.y);break;case"Q":c.quadraticCurveTo(m.x1,-m.y1,m.x,-m.y);break;case"C":c.bezierCurveTo(m.x1,-m.y1,m.x2,-m.y2,m.x,-m.y);break}}return c.subPaths.forEach(m=>{let p=Cie(m.curves);p!==void 0&&m.currentPoint.distanceTo(p)>0&&m.lineTo(p.x,p.y)}),{offsetX:u+l.fontSize*l.letterSpacing,path:c}}getCharWidth(t,i){var r,s;return(s=(r=this.font)==null?void 0:r.getAdvanceWidth(t,i.fontSize,{kerning:!0,letterSpacing:i.letterSpacing}))!=null?s:0}getTextWidth(t,i){var r,s;return(s=(r=this.font)==null?void 0:r.getAdvanceWidth(t,i.fontSize,{kerning:!0,letterSpacing:i.letterSpacing}))!=null?s:0}computeSpaceWidthForLine(t,i,r){let s=this.getCharWidth(" ",r),l=t[i];if(l){let d=this.countSpaces(l.trimEnd());if(r.horizontalAlign===4&&i<t.length-1&&d){let c=r.width,u=this.getTextWidth(l,r);return(c-(u-d*s))/d}}return s}countSpaces(t){return(t.match(/ /g)||[]).length}};function Cie(t){if(t.length){let i=t[0];if(i instanceof Ro)return i.v1;if(i instanceof Io||i instanceof Mc)return i.v0}}var Eie=class{constructor(){this.objects=new Map,this.unreachable=new Set}getCached(t){return this.objects.get(t)}get size(){return this.objects.size}get(t,i,r){let s=this.objects.get(t);return s===void 0?(s=this.createObject(t,i,r),this.objects.set(t,s)):s.isShared=!0,s}forceDelete(t){let i=this.objects.get(t);i&&(this.disposeObject(i),this.objects.delete(t))}mutateIfUnique(t,i){let r=this.objects.get(t);if(r&&r.isShared!==!0)return this.objects.delete(t),this.objects.set(i,r),r}startGc(){this.unreachable=new Set(this.objects.keys())}markAsReachable(t,i){let r=this.objects.get(t);i===r&&this.unreachable.delete(t)}endGc(){this.unreachable.forEach(t=>{this.disposeObject(this.objects.get(t)),this.objects.delete(t)}),this.unreachable.clear()}dispose(){this.objects.forEach(t=>{this.disposeObject(t)}),this.objects.clear()}},h9=class extends Eie{constructor(t){super(),this.flatShading=t}disposeObject(t){t.dispose()}createObject(t,i,r){let s=__(t,i,this.flatShading,r);return s.computeBoundingSphere(),s}},Mie={markNeedsUpdateRendererDirty:()=>{}},Tie=class extends Tte{constructor(t){super(),this.shared=t}create(t){return new H5(t,this.shared)}},zM=class{constructor(t,i={}){if(this.data=t,this.geometryCache=new h9(!0),this.geometryCache2=new h9(!1),this.imageHolderCache=new Tie(this),this.thisContext={scene:Mie,shared:this},this.deletedMaterial=new RM(pa.defaultTwoLayerData("phong"),this.thisContext,""),this.deletedImage=new mh(Kx.emptyImage,this),this.deletedVideo=new mh(Gx.defaultVideo,this),this.materials={},this.images={},this.videos={},this.colors={},this.audios={},this.fonts={},this.variables={},this.mouseProperty=null,this.raycastProperty=null,this.requestRender=()=>{this._requestRender&&this._requestRender()},i.images)for(let[r,s]of Object.entries(i.images))this.addImage(r,s);if(i.videos)for(let[r,s]of Object.entries(i.videos))this.addVideo(r,s);if(i.audios)for(let[r,s]of Object.entries(i.audios))this.addAudio(r,s);this.reset(t)}setRequestRender(t){this._requestRender=t}setEntityOpContext(t){this.entityOpContext=t}reset(t,i=!1){this.resetLib(t.lib);for(let{id:r,data:s}of t.variables)this.addVariableHolder(r,s),i&&this.updateVariableHolder(r,s);for(let[r,s]of Object.entries(t.images))this.addImage(r,s);for(let[r,s]of Object.entries(t.videos))this.addVideo(r,s);for(let[r,s]of Object.entries(t.colors))this.addColor(r,s);for(let[r,s]of Object.entries(t.materials))this.addMaterial(r,s);for(let[r,s]of Object.entries(t.audios))this.addAudio(r,s);for(let[r,s]of Object.entries(t.fonts))this.addFont(r,s)}addMaterial(t,i){if(this.materials[t]){let r=this.materials[t];r.reset(i,this.thisContext),r.dispose()}else{let r=new RM(i,this.thisContext,t);this.materials[t]=r}}deleteMaterial(t){this.materials[t]&&(this.materials[t].nodeMaterialDispose(),delete this.materials[t])}getMaterial(t){return this.materials[t]}getMaterialOrDeletedPlaceholder(t){var i;return(i=this.materials[t])!=null?i:this.deletedMaterial}material(t){return typeof t=="string"?this.getMaterialOrDeletedPlaceholder(t):t==null?(console.error("material is undefined or null"),this.deletedMaterial):new IM(t,this.thisContext)}getMaterials(){return this.materials}addImage(t,i){return this.images[t]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),this.images[t].updateSrc(i.data),!0):(this.images[t]=new mh(i,this),!1)}deleteImage(t){let i=this.images[t];i&&(i.dispose(),delete this.images[t])}getDefaultImage(){return this.images.image_0}getImage(t){var i;return(i=this.images[t])!=null?i:this.deletedImage}image(t){return typeof t=="string"?this.getImage(t):this.imageHolderCache.load(t)}addVideo(t,i){return this.videos[t]?(this.videos[t].updateSrc(i.data),!0):(this.videos[t]=new mh(i,this),!1)}deleteVideo(t){let i=this.videos[t];i&&(i.dispose(),delete this.videos[t])}getVideo(t){var i;return(i=this.videos[t])!=null?i:this.deletedVideo}video(t){return typeof t=="string"?this.getVideo(t):this.imageHolderCache.load(t)}addColor(t,i){return this.colors[t]?(this.onColorOrImageUpdate&&this.onColorOrImageUpdate(),"a"in i?this.colors[t].setRGBA(i.r,i.g,i.b,i.a):this.colors[t].setRGBA(i.r,i.g,i.b,1),!0):("a"in i?this.colors[t]=new M_(i.r,i.g,i.b,i.a):this.colors[t]=new M_(i.r,i.g,i.b,1),!1)}updateColor(t,i){var r,s,l,d;if(this.colors[t]){this.onColorOrImageUpdate&&this.onColorOrImageUpdate();let c=this.colors[t];return this.colors[t].r=(r=i.r)!=null?r:c.r,this.colors[t].g=(s=i.g)!=null?s:c.g,this.colors[t].b=(l=i.b)!=null?l:c.b,this.colors[t].a=(d=i.a)!=null?d:c.a,!0}return!1}deleteColor(t){this.colors[t]&&delete this.colors[t]}getColor(t){return this.colors[t]}color(t){let i;if(typeof t=="string"){let r=this.getColor(t);r?i=r:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),i=new hs(0,0,0,0))}else return"a"in t?new hs(t.r,t.g,t.b,t.a):new hs(t.r,t.g,t.b,1);return i}addAudio(t,i){this.audios[t]=i}getAudio(t){let i=this.audios[t];if(i instanceof b0)return i;{let r=new b0({src:i.data});return this.audios[t]=r,r}}deleteAudio(t){let i=this.audios[t];i&&(i instanceof b0&&i.dispose(),delete this.audios[t])}addFont(t,i){this.fonts[t]=new Aie(i),this.fonts[t].loadingPromise.then(()=>this.requestRender())}getFont(t){return this.fonts[t]}deleteFont(t){this.fonts[t]&&delete this.fonts[t]}dispose(){Object.keys(this.materials).forEach(t=>this.deleteMaterial(t)),this._requestRender=void 0,Object.values(this.audios).forEach(t=>{t instanceof b0&&t.dispose()}),this.audios={},this.geometryCache.dispose(),this.geometryCache2.dispose()}addVariableHolder(t,i){return this.variables[t]===void 0?(this.variables[t]={value:i.value,locations:[]},"dynamicVariableType"in i&&(this.variables[t].dynamicVariablePlayState="Playing",this.variables[t].dynamicVariableToggleIsForward=void 0),!0):(this.variables[t].value=i.value,!1)}resetDynamicVariablePlayState(){for(let t in this.variables)this.variables[t].dynamicVariablePlayState!==void 0&&(this.variables[t].dynamicVariablePlayState="Playing",this.variables[t].dynamicVariableToggleIsForward=void 0)}updateVariableHolder(t,i){this.updateVariable(t,i.value)}updateVariable(t,i){if(this.variables[t]===void 0)return!1;this.variables[t].value=i;let r=i;for(;typeof r=="string";)r=this.variables[r].value;let s=this.entityOpContext.scene;for(let l=this.variables[t].locations.length-1;l>=0;l--){let d=this.variables[t].locations[l];if(d[0]==="material"){let c=d[1],u=r,h={scene:s,shared:this},f=d.slice(2);s.traverseMaterial(p=>{var v;let g=(v=p.root)!=null?v:p;g.uuid===c&&g.onVariableUpdate(f,u,h)});let m=this.materials[c];m&&m.onVariableUpdate(f,u,h)}else{let c=s.find(d[0]);if(c===void 0){this.variables[t].locations.splice(l,1);continue}if(d[1]!=="geometry"){for(let u=1;u<d.length-1;u++)c=c[d[u]];d[1]==="rotation"?c[d[d.length-1]]=r*fe.DEG2RAD:c[d[d.length-1]]=r}if(c=s.find(d[0]),Ri.is(c)){if(d[1]==="position"||d[1]==="rotation"||d[1]==="scale")c.onVariableUpdate();else if(d[1]==="geometry"){let u=c;c.component&&(u=c.component);let h=u.dataPatched;u.chooseGeoemtryCache(this).forceDelete(h.geometry),u.createGeometryDelayed(this.entityOpContext),u.onVariableUpdate(!0),u.instances.forEach(f=>{let m=f.dataPatched;f.chooseGeoemtryCache(this).forceDelete(m.geometry),f.createGeometryDelayed(this.entityOpContext),f.onVariableUpdate(!0)})}}}}return!0}deleteVariable(t){this.variables[t]&&delete this.variables[t]}getVariable(t,i){var r,s,l,d,c;if(Array.isArray(t)){if(t[0]==="mouse")return(s=(r=this.mouseProperty)==null?void 0:r[t[1]])!=null?s:0;if(t[0]==="raycast")return(d=(l=this.raycastProperty)==null?void 0:l[t[1]])!=null?d:0;let u=this.entityOpContext.scene.find(t[0]);if(t[1]==="width"||t[1]==="height"||t[1]==="depth")return u.geometry.userData.parameters[t[1]];for(let h=1;h<t.length;h++)u=u[t[h]];return t[1]==="rotation"&&(u*=fe.RAD2DEG),u}for(let u in this.variables){if(i===void 0)break;let h=this.variables[u],f=(c=h.locations)==null?void 0:c.findIndex(m=>Fa.equal(m,i));f!==void 0&&f!==-1&&h.locations.splice(f,1)}if(typeof t=="string"){let u=t,h=t;do{if(h=u,this.variables[u]===void 0)break;u=this.variables[u].value}while(typeof u=="string");return i&&this.variables[h]!==void 0&&this.variables[h].locations.push(i),u}else return t}getVariables(){return this.variables}getDynamicVariablePlayState(t){var i;return(i=this.variables[t])==null?void 0:i.dynamicVariablePlayState}setDynamicVariablePlayState(t,i){this.variables[t]!==void 0&&(this.variables[t].dynamicVariablePlayState=i)}getDynamicVariableToggleIsForward(t){var i;return(i=this.variables[t])==null?void 0:i.dynamicVariableToggleIsForward}setDynamicVariableToggleIsForward(t,i){this.variables[t]!==void 0&&(this.variables[t].dynamicVariableToggleIsForward=i)}resetLib(t){for(let[i,r]of Object.entries(t.images))this.addImage(i,r.asset);for(let[i,r]of Object.entries(t.audios))this.addAudio(i,r.asset);for(let[i,r]of Object.entries(t.colors))this.addColor(i,r.asset);for(let[i,r]of Object.entries(t.fonts))this.addFont(i,r.asset);for(let[i,r]of Object.entries(t.materials))this.addMaterial(i,r.asset);for(let[i,r]of Object.entries(t.videos))this.addVideo(i,r.asset);for(let[i,r]of Object.entries(t.variables))this.addVariableHolder(i,r.asset)}updateLibByOp(t,i){t.path[0]==="images"?t.path.length===1&&t.type===1?this.addImage(t.id,t.data.asset):t.path.length===1&&t.type===2&&this.deleteImage(t.id):t.path[0]==="videos"?t.path.length===1&&t.type===1?this.addVideo(t.id,t.data.asset):t.path.length===1&&t.type===2&&this.deleteVideo(t.id):t.path[0]==="audios"?t.path.length===1&&t.type===1?this.addAudio(t.id,t.data.asset):t.path.length===1&&t.type===2&&this.deleteAudio(t.id):t.path[0]==="colors"?t.path.length===1&&t.type===1?this.addColor(t.id,t.data.asset):t.path.length===1&&t.type===2&&this.deleteColor(t.id):t.path[0]==="materials"?t.path.length===1&&t.type===1?this.addMaterial(t.id,t.data.asset):t.path.length===1&&t.type===2&&this.deleteMaterial(t.id):t.path[0]==="fonts"?t.path.length===1&&t.type===1?this.addFont(t.id,t.data.asset):t.path.length===1&&t.type===2&&this.deleteFont(t.id):t.path[0]==="variables"?t.path.length===1&&t.type===1?this.addVariableHolder(t.id,t.data.asset):t.path.length===1&&t.type===2&&this.deleteVariable(t.id):t.path[0]==="components"&&i.updateByLibOp(t,this)}updateByOp(t,i,r){this.data=i,t.path[0]==="images"?t.path.length===2&&t.type===0?t.props.data&&this.getImage(t.path[1]).updateSrc(t.props.data):t.path.length===1&&t.type===1?this.addImage(t.id,t.data):t.path.length===1&&t.type===2&&this.deleteImage(t.id):t.path[0]==="videos"?t.path.length===2&&t.type===0?t.props.data&&this.getVideo(t.path[1]).updateSrc(t.props.data):t.path.length===1&&t.type===1?this.addVideo(t.id,t.data):t.path.length===1&&t.type===2&&this.deleteVideo(t.id):t.path[0]==="audios"?t.path.length===2&&t.type===0?t.props.data&&this.addAudio(t.path[1],i.audios[t.path[1]]):t.path.length===1&&t.type===1?this.addAudio(t.id,t.data):t.path.length===1&&t.type===2&&this.deleteAudio(t.id):t.path[0]==="colors"?t.path.length===2&&t.type===0?this.updateColor(t.path[1],t.props):t.path.length===1&&t.type===1?this.addColor(t.id,t.data):t.path.length===1&&t.type===2&&this.deleteColor(t.id):t.path[0]==="materials"?t.path.length===1&&t.type===1?this.addMaterial(t.id,t.data):t.path.length===1&&t.type===2?this.deleteMaterial(t.id):t.path.length>1&&this.getMaterial(t.path[1]).updateByOp(fa.drop(t,2),i.materials[t.path[1]],{shared:this,scene:r}):t.path[0]==="fonts"?t.path.length===2&&t.type===0?this.updateFont(t.path[1],t,r):t.path.length===1&&t.type===1?this.addFont(t.id,t.data):t.path.length===1&&t.type===2&&this.deleteFont(t.id):t.path[0]==="variables"?t.path.length===2&&t.type===0&&"value"in t.props?this.updateVariable(t.path[1],t.props.value):t.path.length===1&&t.type===4?this.addVariableHolder(t.id,t.data):t.path.length===1&&t.type===5&&this.deleteVariable(t.id):t.path[0]==="lib"&&this.updateLibByOp(fa.drop(t,1),r)}updateFont(t,i,r){if(i.props.url){let s=this.getFont(t),l=ge(Z({},this.data.fonts[t]),{url:i.props.url});s.update(l),s.loadingPromise.then(()=>this.requestRender()),r.updateFont(t,this)}}},ufe=new zM(Fo.emptyData()),Kp=class extends ds{updateByPatchedOp(t,i,r){if(super.updateByPatchedOp(t,i,r),CK(t.path,["materials"])!==null&&t.type===0&&Array.isArray(this.material))for(let[s,l]of Object.entries(t.props)){let d=r.shared.material(l);this.material[Number(s)]=d}else if(to(t.path,["material"])&&this.material instanceof Yc)"material"in i&&typeof i.material!="string"&&this.material.updateByOp(fa.drop(t,1),i.material,r);else if(to(t.path,["materials","*"])&&Array.isArray(this.material)){let s=t.path[1];if("materials"in i&&s<this.material.length){let l=i.materials[s];typeof l!="string"&&this.material[s].updateByOp(fa.drop(t,2),l,r)}}}get needsAO(){return this.material!==void 0?(Array.isArray(this.material)?this.material[0]:this.material).hasAO:!1}updateState(t,i){var s,l;super.updateState(t,i),t.castShadow!==void 0&&(this.castShadow=t.castShadow),t.receiveShadow!==void 0&&(this.receiveShadow=t.receiveShadow);let r=this.dataPatched;if(((s=t.geometry)==null?void 0:s.type)!=="NonParametricGeometry"&&"material"in t&&t.material!==void 0&&(this.disposeMaterial(),this.material=i.shared.material(t.material).getFlavor(r.flatShading,r.side,r.wireframe),i.scene.markNeedsUpdateRendererDirty()),((l=t.geometry)==null?void 0:l.type)==="NonParametricGeometry"&&("materials"in t&&t.materials!==void 0?(this.disposeMaterial(),this.material=t.materials.map(d=>i.shared.material(d).getFlavor(r.flatShading,r.side,r.wireframe)),i.scene.markNeedsUpdateRendererDirty()):"material"in t&&t.material!==void 0&&(this.disposeMaterial(),this.material=[i.shared.material(t.material).getFlavor(r.flatShading,r.side,r.wireframe)],i.scene.markNeedsUpdateRendererDirty())),t.flatShading!==void 0||t.wireframe!==void 0||t.side!==void 0)if(Array.isArray(this.material))for(let d=0;d<this.material.length;d++)this.material[d]=this.material[d].getFlavor(r.flatShading,r.side,r.wireframe);else this.material=this.material.getFlavor(r.flatShading,r.side,r.wireframe)}disposeMaterial(){this.material&&SO(this.material).forEach(t=>{t instanceof Yc&&(t instanceof RM||t.nodeMaterialDispose())})}dispose(){this.disposeMaterial(),super.dispose()}},f9=new N,p9=new ri,m9=new ri,Die=new N,g9=new Ze,qa=class extends Kp{constructor(t,i,r){super(t,i),this.data=i,this.isSkinnedMesh=!1,this.localGeometry=void 0,i.bindMode&&i.bindMatrix&&(this.bindMode=i.bindMode,this.bindMatrix=new Ze().fromArray(i.bindMatrix),this.bindMatrixInverse=new Ze)}chooseGeoemtryCache(t){return t.geometryCache}markGeometryAsReachable(t){this.geometryCreateDeleyed instanceof Nt&&this.chooseGeoemtryCache(t).markAsReachable(this.dataPatched.geometry,this.geometryCreateDeleyed)}get geometry(){if(this.localGeometry!==void 0)return this.localGeometry;if(this.geometryCreateDeleyed instanceof zM){let t=this.geometryCreateDeleyed,i=this.chooseGeoemtryCache(t);this.geometryCreateDeleyed=i.get(this.dataPatched.geometry,t,this)}return this.geometryCreateDeleyed}set geometry(t){this.localGeometry=t}get is2DAndNoDepth(){let t=this.dataPatched.geometry;return $x.is2DParametricMesh(t.type)&&t.depth===0}get is2DType(){return $x.is2DParametricMesh(this.geometry.userData.type)}get isNonParametric(){return this.geometry.userData.type==="NonParametricGeometry"}updateByPatchedOp(t,i,r){super.updateByPatchedOp(t,i,r),to(t.path,["geometry"])&&this.updateByPatchedOpGeometry(fa.drop(t,1),i.geometry,r)}removeInteractionGeometry(){var t;(t=this.localGeometry)==null||t.dispose(),this.localGeometry=void 0}updateGeometryInteractions(t,i){var s;this.invalidateDownstreamBooleanData();let r=this.data.geometry.type;if(r==="NonParametricGeometry"||r==="SubdivGeometry"){let l=t;if(this.localGeometry===void 0){let f=Z(Z({},this.data.geometry),l);this.localGeometry=__(f,i,this.data.flatShading,this)}let d,c,u;l.scaleBaked?[d,c,u]=l.scaleBaked:{width:d,height:c,depth:u}=l;let h=this.localGeometry.userData;h.sxPrev!==void 0&&pM(this.localGeometry.attributes,d/h.sxPrev,c/h.syPrev,u/h.szPrev),h.sxPrev=d,h.syPrev=c,h.szPrev=u}else{let l=Z(Z({},this.data.geometry),t);(s=this.localGeometry)==null||s.dispose(),this.localGeometry=__(l,i,this.data.flatShading,this)}}refreshAttachedCloners(t){for(let i of this.attachedSurfaceCloners)t.scene.addPendingUpdateCloner(i.object)}refreshAttachedPaths(t){for(let i of this.attachedPaths)t.scene.addPendingCommand(()=>i.updateShape())}createGeometryDelayed(t){this.geometryCreateDeleyed=t.shared,this.refreshAttachedCloners(t),this.refreshAttachedPaths(t)}updateByPatchedOpGeometry(t,i,r){var l;let s=!1;t.type===0&&t.path.length===0&&Object.keys(t.props).includes("scaleBaked")&&this.geometryCreateDeleyed instanceof Va&&this.chooseGeoemtryCache(r.shared).mutateIfUnique(this.geometryCreateDeleyed.data,i)===this.geometryCreateDeleyed&&(s=!0,this.geometryCreateDeleyed.mutateDirectlyScaleBaked(i,t.props.scaleBaked),this.refreshAttachedCloners(r),this.refreshAttachedPaths(r)),s||((l=r.scene)==null||l.markGeometryCacheDirty(),this.createGeometryDelayed(r)),this.resetBBoxNeedsUpdate(),this.invalidateDownstreamBooleanData()}updateGeometryOnStateUpdate(t,i){this.createGeometryDelayed(i)}updateState(t,i){t.geometry!==void 0&&this.updateGeometryOnStateUpdate(t.geometry,i),super.updateState(t,i)}updateGeometryGroupsIfNeeded(){var t,i;Array.isArray(this.material)&&this.geometry.groups.length===0&&this.geometry.addGroup(0,Math.max((i=(t=this.geometry.getIndex())==null?void 0:t.count)!=null?i:0,this.geometry.getAttribute("position").count),0)}updateEntityBoxSize(t,i){var s,l;let r=this.geometry.userData.parameters;this.is2DType?t.set(0,0,r.depth*.5):this.isNonParametric?(t.setScalar(0),this.geometry.boundingSphere&&t.copy(this.geometry.boundingSphere.center),i.set(r.width,r.height,(s=r.depth)!=null?s:0).multiplyScalar(.5)):t.setScalar(0),i.set(r.width,r.height,(l=r.depth)!=null?l:0).multiplyScalar(.5)}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"&&this.bindMatrixInverse.copy(this.bindMatrix).invert()}bind(t,i){this.skeleton=t,this.isSkinnedMesh=!0,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(t){let i=new ri,r=this.geometry.attributes.skinWeight;for(let s=0,l=r.count;s<l;s++){i.fromBufferAttribute(r,s);let d=1/i.manhattanLength();d!==1/0?i.multiplyScalar(d):i.set(1,0,0,0),r.setXYZW(s,i.x,i.y,i.z,i.w)}}boneTransform(t,i){let r=this.skeleton;if(r===void 0)return;let s=this.geometry;p9.fromBufferAttribute(s.attributes.skinIndex,t),m9.fromBufferAttribute(s.attributes.skinWeight,t),f9.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let l=0;l<4;l++){let d=m9.getComponent(l);if(d!==0){let c=p9.getComponent(l);g9.multiplyMatrices(r.bones[c].matrixWorld,r.boneInverses[c]),i.addScaledVector(Die.copy(f9).applyMatrix4(g9),d)}}return i.applyMatrix4(this.bindMatrixInverse)}};function Pie(t){var c,u;if(t.geometry.attributes.extrudeNormal||!t.geometry.attributes.position||!t.geometry.attributes.normal)return;let i=new Map,r=t.geometry.attributes,s=r.position.array,l=r.normal.array,d=new Float32Array(s.length);for(let h=0;h<s.length;h+=3){let f=`${s[h]}_${s[h+1]}_${s[h+2]}`,m=new N(l[h],l[h+1],l[h+2]);i.has(f)?(c=i.get(f))==null||c.normals.push(m):i.set(f,{normals:[m],result:new N})}i.forEach((h,f)=>{for(let m of h.normals)h.result.add(m);h.result.divideScalar(h.normals.length)});for(let h=0;h<s.length;h+=3){let f=`${s[h]}_${s[h+1]}_${s[h+2]}`,m=(u=i.get(f))==null?void 0:u.result;m&&(d[h]=m.x,d[h+1]=m.y,d[h+2]=m.z)}t.geometry.setAttribute("extrudeNormal",new wt(d,3))}function Oie(t){if(t.geometry.attributes.extrudeNormals||!t.geometry.attributes.position)return;let i=t.geometry.attributes.position.array,r=new Float32Array(i.length),s=new N;for(let l=0;l<i.length;l+=3)s.set(i[l],i[l+1],i[l+2]).normalize(),r[l]=s.x,r[l+1]=s.y,r[l+2]=s.z;t.geometry.setAttribute("extrudeNormal",new wt(r,3))}function LM(t){if(Array.isArray(t.material)){for(let i of t.material)if(i.getLayersOfType("outline").length===0)return}else if(!(t.material instanceof Yc)||t.material.getLayersOfType("outline").length===0)return;t instanceof qa&&t.is2DAndNoDepth?Oie(t):Pie(t)}function BM(t){if(!t.geometry.attributes.position)return;let i=t.geometry.attributes.position.array,r=new Float32Array(i.length),s=parseInt(t.uuid.replace(/\D/g,"")),l=[fe.seededRandom(s),fe.seededRandom(s+1e4),fe.seededRandom(s+2e4)];for(let d=0;d<i.length;d++)r[d]=l[d%3];t.geometry.setAttribute("randomColor",new Qt(r,3))}var Iie;fM.then(t=>{Iie=t});var Fl=new nn,w0=new N;function Rie(t){let i=!1;return t.scene.objects.traverse((r,s)=>{s.type==="Mesh"&&s.geometry.type==="SubdivGeometry"&&(i=!0)}),i}var x0=class extends qa{constructor(t,i,r){super(t,i,r),this.data=i,this.hiddenMatrixOld=new Ze,this.smoothShading=!0,this.skipReactionUpdate=!1}chooseGeoemtryCache(t){return this.dataPatched.flatShading?t.geometryCache:t.geometryCache2}get subdivPointerNew(){return this.localGeometry!==void 0?this.subdivPointer:this.geometry.ensureSubdivPointer()}get originalGeometryNew(){return this.localGeometry!==void 0?this.originalGeometry:this.geometry.originalGeometry}get phongAngle(){var t;return(t=this.data.geometry.phongAngle)!=null?t:45}updateEntityBoxSize(t,i){var s;let r=this.geometry.userData.parameters;t.copy(this.originalGeometryNew.boundingSphere.center),i.set(r.width,r.height,(s=r.depth)!=null?s:0).multiplyScalar(.5)}createGeometryByControls(t){var d,c,u,h;if(this.skipReactionUpdate===!0)return;let i=(d=this.localGeometry)==null?void 0:d.uuid,{originalGeometry:r,subdividedGeometry:s,subdivPointer:l}=Va.build(t,this.subdivPointer,this.smoothShading,this.hasNonUniformScale?this.shearScale:void 0);this.subdivPointer=l,r!==void 0&&((c=this.originalGeometry)==null||c.dispose(),this.originalGeometry=r),s!==void 0&&((u=this.subdividedGeometry)==null||u.dispose(),this.subdividedGeometry=s!=null?s:void 0),this.localGeometry=(h=this.subdividedGeometry)!=null?h:this.originalGeometry,LM(this),BM(this),this.calcBoundingBox(),i&&(this.localGeometry.uuid=i)}updateState(t,i){if(super.updateState(t,i),t.flatShading!==void 0){let r=this.material;this.material=r.getFlavor(!1,r.side,r.wireframe),this.smoothShading=!t.flatShading,this.createGeometryDelayed(i)}}updateMesh(t=!1){Va.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1,this.originalGeometry,t&&this.hasNonUniformScale?this.shearScaleInv:void 0),this.subdividedGeometry&&Va.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1,this.subdividedGeometry,t&&this.hasNonUniformScale?this.shearScaleInv:void 0)}updateTopology(){var t;this.originalGeometry.dispose(),this.originalGeometry=Va.buildLevel(this.subdivPointer,!0,this.smoothShading?this.phongAngle:-1),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=Va.buildLevel(this.subdivPointer,!1,this.smoothShading?this.phongAngle:-1)),this.localGeometry=(t=this.subdividedGeometry)!=null?t:this.originalGeometry}raycast(t,i){let r=this.localGeometry;this.localGeometry=this.originalGeometryNew,ds.prototype.raycast.call(this,t,i),this.localGeometry=r}activateSVDCompensation(){!this.hasNonUniformScale||(this.matrix.copy(this.matrixWorldRigid),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}deactivateSVDCompensation(){!this.hasNonUniformScale||(this.updateMatrix(),this.hasNonUniformScale=void 0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}calcBoundingBox(){let t=this.originalGeometry;t.boundingSphere===null&&(t.boundingSphere=new Ur,this.subdividedGeometry&&(this.subdividedGeometry.boundingSphere=t.boundingSphere));let i=t.attributes.position,r=t.boundingSphere.center;Fl.setFromBufferAttribute(i),Fl.getCenter(r),t.boundingSphere.radius=r.distanceTo(Fl.max),isNaN(t.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Fl.getSize(w0),this.hasNonUniformScale&&w0.divide(this.scale);let s={width:w0.x,height:w0.y,depth:w0.z};return this.geometry.userData.parameters=s,s}updateBoundingSphere(t){let i=this.originalGeometry;Fl.min.set(t[0],t[2],t[4]),Fl.max.set(t[1],t[3],t[5]),this.hasNonUniformScale&&(Fl.min.applyMatrix4(this.shearScaleInv),Fl.max.applyMatrix4(this.shearScaleInv)),i.boundingSphere===null&&(i.boundingSphere=new Ur);let r=i.boundingSphere.center;Fl.getCenter(r),i.boundingSphere.radius=r.distanceTo(Fl.max)}freeSubdivPointer(){var t,i;this.subdivPointer&&(Va.freeSubdivPointer(this.subdivPointer),this.subdivPointer=0),this.localGeometry=void 0,(t=this.originalGeometry)==null||t.dispose(),(i=this.subdividedGeometry)==null||i.dispose()}dispose(){super.dispose(),this.freeSubdivPointer()}updateByPatchedOpGeometry(t,i,r){super.updateByPatchedOpGeometry(t,i,r),this.localGeometry&&this.createGeometryByControls(i)}},v9=-1,zie=1,Lie={x:[1,0,0],"-x":[-1,0,0],y:[0,1,0],"-y":[0,-1,0],z:[0,0,1],"-z":[0,0,-1]},Bie={polygon_center:0,edge:1,vertex:2},D_=(t,i)=>(r,s)=>!i||r===0||t===0?0:t*s/100,gi=(t,i)=>{let r=Math.abs(i),s=r*-1;return(t-v9)*(r-s)/(zie-v9)+s};function Fie(t){let i=[],r={};for(var s=0,l=t.length;s<l;s++){var d=JSON.stringify(t[s].pos.map(c=>Math.round(c*1e4)/1e4));r[d]||(i.push(t[s]),r[d]=!0)}return i}var Nie=new N,P_=new N,jie=new N,Uie=new N;function Qp(t,i){let r=jie.fromArray(t),s=Uie.fromArray(i);P_.copy(s).sub(r);let l=P_.length();return P_.normalize().multiplyScalar(l*.5),Nie.copy(r).add(P_).toArray()}var so=new ua,O_=new N,I_=new N,yh=new N;function Vie(t){let i=[];for(let r=0;r<=t.index.count;r++)if(O_.fromArray(t.index.array,r*3),so.setFromAttributeAndIndices(t.attributes.position,O_.x,O_.y,O_.z),so.getNormal(I_),so.getMidpoint(yh),!(isNaN(yh.x)||isNaN(yh.y)||isNaN(yh.z))){let{a:s,b:l,c:d}=so,c=s.toArray(),u=l.toArray(),h=d.toArray(),f=s.distanceTo(l),m=l.distanceTo(d),p=d.distanceTo(s),g=Qp(c,u),v=Qp(u,h),w=Qp(h,c),x=[f,m,p],_=Math.max(...x),k=x.filter(M=>Math.round(M)===Math.round(_)).length>1,A=[],C=so.getMidpoint(yh).toArray();_===f&&!k&&(A=[v,w,w],C=g),_===m&&!k&&(A=[g,w,w],C=v),_===p&&!k&&(A=[g,v,v],C=w),k&&(A=[g,v,w]),i.push({vertices:[c,u,h],faceCenters:A,midpoint:C,norm:so.getNormal(I_).toArray()})}return i}function Hie(t){let i=[],{position:r}=t.attributes;for(let s=0;s<r.count;s++){so.setFromAttributeAndIndices(r,s*3,s*3+1,s*3+2),so.getNormal(I_),so.getMidpoint(yh);let l=so.a.toArray(),d=so.b.toArray(),c=so.c.toArray();i.push({vertices:[l,d,c],faceCenters:[Qp(l,d),Qp(d,c),Qp(c,l)],midpoint:yh.toArray(),norm:I_.toArray()})}return i}var Gie=4,Wie=.5,FM=t=>.5*(1-Math.cos(t*Math.PI)),qie=class{constructor(){this.perlin=new Array(4095+1)}noise(t,i=0,r=0){if(this.perlin==null){this.perlin=new Array(4095+1);for(let _=0;_<4095+1;_++)this.perlin[_]=Math.random()}t<0&&(t=-t),i<0&&(i=-i),r<0&&(r=-r);let s=Math.floor(t),l=Math.floor(i),d=Math.floor(r),c=t-s,u=i-l,h=r-d,f,m,p=0,g=.5,v,w,x;for(let _=0;_<Gie;_++){let k=s+(l<<4)+(d<<8);f=FM(c),m=FM(u),v=this.perlin[k&4095],v+=f*(this.perlin[k+1&4095]-v),w=this.perlin[k+16&4095],w+=f*(this.perlin[k+16+1&4095]-w),v+=m*(w-v),k+=256,w=this.perlin[k&4095],w+=f*(this.perlin[k+1&4095]-w),x=this.perlin[k+16&4095],x+=f*(this.perlin[k+16+1&4095]-x),w+=m*(x-w),v+=FM(h)*(w-v),p+=v*g,g*=Wie,s<<=1,c*=2,l<<=1,u*=2,d<<=1,h*=2,c>=1&&(s++,c--),u>=1&&(l++,u--),h>=1&&(d++,h--)}return p}noiseSeed(t){let i=(()=>{let r,s;return{setSeed(l){s=r=(l!=null?l:Math.random()*4294967296)>>>0},getSeed(){return r},rand(){return s=(1664525*s+1013904223)%4294967296,s/4294967296}}})();i.setSeed(t),this.perlin=new Array(4095+1);for(let r=0;r<4095+1;r++)this.perlin[r]=i.rand()}},$ie=qie,y9=new N,b9=new Ze,w9=new Rf;function x9(t){let i=!1;return t.scene.objects.traverse((r,s)=>{s.type==="Mesh"&&s.geometry.type==="TextGeometry"&&(i=!0)}),i}var _9=class extends qa{constructor(t,i,r){super(t,i,r),this.data=i}get textGeometry(){return this.geometry}get charWidths(){return this.textGeometry.charWidths}get charCoords(){return this.textGeometry.charCoords}get wrappedText(){return this.textGeometry.wrappedText}get font(){return this.textGeometry.font}get initialOffsetY(){var i,r;let t=this.dataPatched;return(r=(i=this.font)==null?void 0:i.getLineInitialOffsetY(this.lineHeight,this.wrappedText.length,t.geometry.height,this.fontScale,t.geometry.verticalAlign))!=null?r:0}get fontScale(){let t=this.dataPatched;return this.font?t.geometry.fontSize/this.font.unitsPerEm:1}get AD(){return Math.abs(this.ascender-this.descender)}get ascender(){var t,i;return((i=(t=this.font)==null?void 0:t.ascender)!=null?i:1)*this.fontScale}get descender(){var t,i;return((i=(t=this.font)==null?void 0:t.descender)!=null?i:1)*this.fontScale}get lineHeight(){let t=this.dataPatched;return t.geometry.fontSize*t.geometry.lineHeight}raycast(t,i){let{matrixWorld:r}=this;if(!(isNaN(t.ray.origin.x)||this.scale.x===0||this.scale.y===0||this.scale.z===0)&&(b9.copy(r).invert(),w9.copy(t.ray).applyMatrix4(b9),w9.intersectBox(this.singleBBox,y9))){let s=y9.applyMatrix4(r),l=t.ray.origin.distanceTo(s);i.push({distance:l,point:s.clone(),object:this})}}},$a=1e-4,Nl,k9,S9,A9,C9=new N,E9=new N;fM.then(t=>{Nl=t,k9=[Nl.get_face_center,Nl.get_edge_midpoint,Nl.get_vertex_position],S9=[Nl.get_face_normal,Nl.get_edge_normal,Nl.get_vertex_normal],A9=[Nl.face_count,Nl.edge_count,Nl.vertex_count]});var Zie=new Ze,Yie=new Ze,Xc=new N,bh=new N,_0=new N,NM=new N,Xie=new N,Kie=new N,Ld=new $ie,Vo=class extends jE(ln){constructor(t,i){super(),this.parameters=i,this.objectForSample=void 0,this._pendingMediaLoad=!1,this.object=t}resetOnMove(){this.removeFromParent(),this.parent=null}expandClones(t){if(this.parent===null)this.updateState(this.parameters,t);else for(let i of this.children)i instanceof ma&&i.expand()}invalidateTransform(t){this.matrixWorldNeedsUpdate=!0,this.traverse(i=>{i instanceof ma&&i.object===t&&(i.matrixWorldNeedsUpdate=!0)})}onObjUpdateMatrix(){this.parameters.type!=="toObject"&&(this.matrixWorldNeedsUpdate=!0)}update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters);break;case"toObject":this._updateToObject(this.parameters)}for(let t of this.children)t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD())}_updateCount(t){let i;if(t!==void 0?i=t:i=this.parameters.type==="grid"?Math.round(this.parameters.grid.count[0])*Math.round(this.parameters.grid.count[1])*Math.round(this.parameters.grid.count[2]):this.parameters.count,this.parameters.type==="toObject"&&!this.parameters.toObject.object&&(i=0),this.parameters.type==="toObject"&&this.objectForSample){for(let s=0,l=this.children.length;s<l;++s)this.remove(this.children[0]);let r=this.children;if(r.length===i)return;if(r.length<i)for(let s=0,l=i-r.length;s<l;++s){let d=new ma(this.object);d.expand(),this.add(d)}else for(let s=0,l=r.length-i;s<l;++s)this.remove(r[s])}else{if(this.children.length===i)return;if(this.children.length<i)for(let r=0,s=i-this.children.length;r<s;++r){let l=new ma(this.object);l.expand(),this.add(l)}else for(let r=0,s=this.children.length-i;r<s;++r)this.remove(this.children[0])}}_updateRadial(t){var p;let i=t.radial,r=i.start*fe.DEG2RAD,s=i.end*fe.DEG2RAD,l=r-s,d=new Vr(i.rotation[0],i.rotation[1],i.rotation[2]),c;switch(i.axis){case"z":c=new N(0,0,1);break;case"y":c=new N(0,1,0);break;default:case"x":c=new N(1,0,0);break}let u=(p=t.randomnessObject)!=null?p:Lc.defaultData([1,1,1]).randomnessObject,h=u.noiseType==="perlin";Ld.noiseSeed(u.seed);let f=NE((0,l0.default)(u.seed)),m=D_(u.strength,this.parameters.randomness);for(let[g,v]of this.children.entries()){let w=g*(u.freqScale/10)+u.movement,x=h?Ld.noise(w):f(w,w),_=g+1;v.scale.x=i.scale[0]+m(_,gi(x,u.scale[0]))||$a,v.scale.y=i.scale[1]+m(_,gi(x,u.scale[1]))||$a,v.scale.z=i.scale[2]+m(_,gi(x,u.scale[2]))||$a,v.position.setScalar(0);let k=l/t.count*g-r;switch(i.axis){case"x":v.rotation.set(0,k,0);break;case"y":v.rotation.set(0,0,k);break;case"z":v.rotation.set(k,0,0);break}v.translateOnAxis(c,i.radius),v.position.x+=i.position[0]+m(_,gi(x,u.position[0])),v.position.y+=i.position[1]+m(_,gi(x,u.position[1])),v.position.z+=i.position[2]+m(_,gi(x,u.position[2]));let A=m(_,gi(x,u.rotation[0])),C=m(_,gi(x,u.rotation[1])),M=m(_,gi(x,u.rotation[2]));i.alignment===!0?(v.rotation.x+=d.x+A,v.rotation.y+=d.y+C,v.rotation.z+=d.z+M):v.rotation.set(d.x+A,d.y+C,d.z+M)}}_updateLinear(t){var u;if(t.type!=="linear")throw new Error;let i=t.linear,r=new Vr(i.rotation[0],i.rotation[1],i.rotation[2]),s=(u=t.randomnessObject)!=null?u:Lc.defaultData([1,1,1]).randomnessObject,l=s.noiseType==="perlin";Ld.noiseSeed(s.seed);let d=NE((0,l0.default)(s.seed)),c=D_(s.strength,this.parameters.randomness);for(let[h,f]of this.children.entries()){let m=h*(s.freqScale/10)+s.movement,p=l?Ld.noise(m):d(m,m),g=h+1,v=c(g,gi(p,s.rotation[0])),w=c(g,gi(p,s.rotation[1])),x=c(g,gi(p,s.rotation[2]));f.scale.x=1+(i.scale[0]-1)*h+c(g,gi(p,s.scale[0]))||$a,f.scale.y=1+(i.scale[1]-1)*h+c(g,gi(p,s.scale[1]))||$a,f.scale.z=1+(i.scale[2]-1)*h+c(g,gi(p,s.scale[2]))||$a,f.rotation.x=r.x*h+v,f.rotation.y=r.y*h+w,f.rotation.z=r.z*h+x,f.position.x=i.position[0]*h+c(g,gi(p,s.position[0])),f.position.y=i.position[1]*h+c(g,gi(p,s.position[1])),f.position.z=i.position[2]*h+c(g,gi(p,s.position[2]))}}_updateGrid(t){var u;let i=0,r=t.grid,s=(u=t.randomnessObject)!=null?u:Lc.defaultData([1,1,1]).randomnessObject,l=D_(s.strength,this.parameters.randomness),d=s.noiseType==="perlin";Ld.noiseSeed(s.seed);let c=nJ((0,l0.default)(s.seed));if(r.useCenter===!0){let h={x:r.count[0]%2===0?2:1,y:r.count[1]%2===0?2:1,z:r.count[2]%2===0?2:1},f=new N(r.size[0]*(r.count[0]-h.x)*.5,r.size[1]*(r.count[1]-h.y)*.5,r.size[2]*(r.count[2]-h.z)*.5);for(let m=0;m<r.count[0];m++)for(let p=0;p<r.count[1];p++)for(let g=0;g<r.count[2];g++){let v=[(m+1)*(s.freqScale/10)+s.movement,(p+1)*(s.freqScale/10)+s.movement,(g+1)*(s.freqScale/10)+s.movement],w=d?Ld.noise(...v):c(...v),x=this.children[i++];x.scale.x=1+l(i,gi(w,s.scale[0]))||$a,x.scale.y=1+l(i,gi(w,s.scale[1]))||$a,x.scale.z=1+l(i,gi(w,s.scale[2]))||$a;let _=l(i,gi(w,s.rotation[0])),k=l(i,gi(w,s.rotation[1])),A=l(i,gi(w,s.rotation[2]));x.rotation.set(_,k,A),x.position.x=r.size[0]*m-f.x+l(i,gi(w,s.position[0])),x.position.y=r.size[1]*p-f.y+l(i,gi(w,s.position[1])),x.position.z=r.size[2]*g-f.z+l(i,gi(w,s.position[2]))}}else for(let h=0;h<r.count[0];h++)for(let f=0;f<r.count[1];f++)for(let m=0;m<r.count[2];m++){let p=[(h+1)*(s.freqScale/10)+s.movement,(f+1)*(s.freqScale/10)+s.movement,(m+1)*(s.freqScale/10)+s.movement],g=d?Ld.noise(...p):c(...p),v=this.children[i++];v.scale.x=1+l(i,gi(g,s.scale[0]))||$a,v.scale.y=1+l(i,gi(g,s.scale[1]))||$a,v.scale.z=1+l(i,gi(g,s.scale[2]))||$a;let w=l(i,gi(g,s.rotation[0])),x=l(i,gi(g,s.rotation[1])),_=l(i,gi(g,s.rotation[2]));v.rotation.set(w,x,_),v.position.x=r.size[0]*h+l(i,gi(g,s.position[0])),v.position.y=-r.size[1]*f+l(i,gi(g,s.position[1])),v.position.z=-r.size[2]*m+l(i,gi(g,s.position[2]))}}_updateToObject(t){var x,_;if(t.type!=="toObject")throw new Error;let{toObject:i}=t,r=new Vr(i.rotation[0],i.rotation[1],i.rotation[2]),s=(x=t.randomnessObject)!=null?x:Lc.defaultData([1,1,1]).randomnessObject,l=s.noiseType==="perlin";Ld.noiseSeed(s.seed);let d=NE((0,l0.default)(s.seed)),c=D_(s.strength,this.parameters.randomness);if(!i.object){for(let[,k]of this.children.entries())k.position.set(0,0,0),k.scale.setScalar(1),k.rotation.set(0,0,0);this.objectForSample=void 0;return}if(!this.objectForSample)return;if(this.objectForSample instanceof _9)if(!((_=this.objectForSample.font)!=null&&_.isLoaded)||this.objectForSample.geometry.attributes.position===void 0){this._pendingMediaLoad=!0;return}else this._pendingMediaLoad=!1;if(this.objectForSample.geometry===void 0&&this.objectForSample.isAncestorOf(this.object.uuid)){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) seem to be a child/descendant of the object it's being cloned to. Please re-parent it so that they are siblings instead.`);return}let u=this.getSubdivData(),h=[],f=k=>{let A=k.length,C=k.map(P=>P[0]).reduce((P,T)=>P+T,0),M=k.map(P=>P[1]).reduce((P,T)=>P+T,0),D=k.map(P=>P[2]).reduce((P,T)=>P+T,0);return[C/A,M/A,D/A]},m=k=>Math.round(k*1e6)/1e6;u.forEach(k=>{let A=u.filter(C=>m(k.pos[0])===m(C.pos[0])&&m(k.pos[1])===m(C.pos[1])&&m(k.pos[2])===m(C.pos[2]));A.length>1?h.push({pos:k.pos,norm:f(A.map(C=>C.norm))}):h.push(k)});let p=Fie(h);if(p.length>0){let k=Math.round(p.length*i.count/100);this._updateCount(k)}else{let k=this.objectForSample.geometry.getAttribute("position");if(!k||isNaN(k.count)||k.count===0){console.warn(`Oh no! The object "${this.object.name}" (${this.object.uuid}) cannot be cloned on the surface of "${this.objectForSample.name}" (${this.objectForSample.uuid}) because the latter does not have a valid geometry.`);return}}this.objectForSample.updateMatrixWorld();let g=new rJ(this.objectForSample).build(),v=Lie[i.axis],w=this.children;g.setRandomGenerator((0,l0.default)(this.object.uuid+i.seed));for(let[k,A]of w.entries()){let C=k*(s.freqScale/10)+s.movement,M=l?Ld.noise(C):d(C,C),D=k+1,P=c(D,gi(M,s.rotation[0])),T=c(D,gi(M,s.rotation[1])),O=c(D,gi(M,s.rotation[2]));i.spreadType==="random"?g.sample(_0,NM):(p.length&&(_0.fromArray(p[k].pos),NM.fromArray(p[k].norm)),this.objectForSample instanceof x0&&_0.applyMatrix4(Zie.copy(this.objectForSample.matrixWorld).invert())),_0.applyMatrix4(this.object.hiddenMatrix.clone().invert()),A.position.copy(_0),Xc.fromArray(v);let z=i.align==="normal"?NM:this.object.getWorldDirection(Kie),L=bh.fromArray(i.position);bh.x+=bh.x+c(D,gi(M,s.position[0])),bh.y+=bh.y+c(D,gi(M,s.position[1])),bh.z+=bh.z+c(D,gi(M,s.position[2]));let B=Math.acos(z.dot(Xc)),j=Xie.crossVectors(Xc,z).normalize(),V=Yie.makeRotationAxis(j,B),H=z.clone().cross(this.object.up).normalize(),Y=H.clone().cross(z).normalize(),se=new Ze().makeBasis(H,z,Y),re=new N(Xc.y,Xc.z,Xc.x).normalize(),$=re.clone().cross(Xc).normalize(),te=new Ze().makeBasis(re,Xc,$).invert(),he=new Ze().multiplyMatrices(se,te);A.rotation.setFromRotationMatrix(he),L.applyMatrix4(V),A.position.add(L),A.rotation.x=A.rotation.x+r.x+P,A.rotation.y=A.rotation.y+r.y+T,A.rotation.z=A.rotation.z+r.z+O,A.scale.setScalar(1),A.scale.x=A.scale.x+i.scale[0]+c(D,gi(M,s.scale[0]))||$a,A.scale.y=A.scale.y+i.scale[1]+c(D,gi(M,s.scale[1]))||$a,A.scale.z=A.scale.z+i.scale[2]+c(D,gi(M,s.scale[2]))||$a,A.scale.multiply(this.object.scale),A.hiddenMatrix=this.object.hiddenMatrix}}getSubdivData(){if(!this.objectForSample)return[];let t=this.parameters.toObject.spreadType;if(t==="random")return[];if(this.objectForSample instanceof x0){let i=this.objectForSample,r=Bie[t],s=A9[r],l=k9[r],d=S9[r],c=[],u=s(i.subdivPointerNew);for(let h=0;h<=u-1;h++){let f=l(i.subdivPointerNew,h),m=d(i.subdivPointerNew,h);C9.fromArray(f).applyMatrix4(i.matrixWorld),E9.fromArray(m),c.push({pos:C9.toArray(),norm:E9.toArray()})}return c}else return(this.objectForSample.geometry.index?Vie(this.objectForSample.geometry):Hie(this.objectForSample.geometry)).map((i,r)=>t==="polygon_center"?{pos:i.midpoint,norm:i.norm}:t==="vertex"?[{pos:i.vertices[0],norm:i.norm},{pos:i.vertices[1],norm:i.norm},{pos:i.vertices[2],norm:i.norm}]:t==="edge"?[{pos:i.faceCenters[0],norm:i.norm},{pos:i.faceCenters[1],norm:i.norm},{pos:i.faceCenters[2],norm:i.norm}]:[]).flat()}updateState(t,i){var r;if(this.parameters=wx(t),this.parameters.type!=="toObject")(this.parent===null||this.parent!==this.object)&&(this.removeFromParent(),(r=this.object.parent)==null||r.add(this),this.matrix=this.object.matrix,this.hiddenMatrix=this.object.hiddenMatrix,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1);else if(this.parent===null||this.parent.uuid!==this.parameters.toObject.object){this.removeFromParent();let s=i.find(this.parameters.toObject.object);s instanceof ds?this.objectForSample=s:this.objectForSample=void 0,this.matrix=new Ze,this.hiddenMatrix=new Ze,this.matrixWorldNeedsUpdate=!0,this.matrixAutoUpdate=!1,s&&s.add(this)}this.update()}get pendingMediaLoad(){return this._pendingMediaLoad}},k0=t=>{var i;return i=class extends t{},i.geometryHelper=new bl(30,30,30),i},R_=new Rf,jM=new Ur,M9=new Ze,S0=(t,i,r,s,l=!1)=>{let d=i,c=t.matrixWorld;if(d.boundingSphere===null&&d.computeBoundingSphere(),jM.copy(d.boundingSphere),jM.applyMatrix4(c),r.ray.intersectsSphere(jM)===!1||(M9.copy(c).invert(),R_.copy(r.ray).applyMatrix4(M9),d.boundingBox!==null&&R_.intersectsBox(d.boundingBox)===!1))return;let u,h,f,m,p=d.index,g=d.attributes.position,v=d.drawRange,w,x;if(l===!1){let k=Math.max(0,v.start),A=Math.min(p.count,v.start+v.count);for(w=k,x=A;w<x;w+=3)if(h=p.getX(w),f=p.getX(w+1),m=p.getX(w+2),u=_(t,r,R_,g,h,f,m),u){u.faceIndex=Math.floor(w/3),s.push(u);return}}else{let k=d.attributes.position,A=new N,C=new N,M=new N,D=new N,P=2,T=1/((t.scale.x+t.scale.y+t.scale.z)/3),O=T*T,z=Math.max(0,v.start),L=Math.min(k.count,v.start+v.count);for(let B=z,j=L-1;B<j;B+=P){if(A.fromBufferAttribute(k,B),C.fromBufferAttribute(k,B+1),R_.distanceSqToSegment(A,C,D,M)>O)continue;D.applyMatrix4(t.matrixWorld);let V=r.ray.origin.distanceTo(D);V<r.near||V>r.far||s.push({distance:V,point:M.clone().applyMatrix4(t.matrixWorld),object:t})}}function _(k,A,C,M,D,P,T){let O=new N,z=new N,L=new N,B=new N,j=new N;if(O.fromBufferAttribute(M,D),z.fromBufferAttribute(M,P),L.fromBufferAttribute(M,T),C.intersectTriangle(O,z,L,!1,B)===null)return null;j.copy(B),j.applyMatrix4(k.matrixWorld);let V=A.ray.origin.distanceTo(j);return V<A.near||V>A.far?null:{faceIndex:1,distance:V,point:j.clone(),object:k}}},z_=new N,oo=new Gf,Qie=class extends Mv{constructor(t){let i=new Nt,r=new Ec({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],l=[],d={},c=new _t(15711266),u=new _t(15711266),h=new _t(2857471);f("n1","n2",c),f("n2","n4",c),f("n4","n3",c),f("n3","n1",c),f("f1","f2",c),f("f2","f4",c),f("f4","f3",c),f("f3","f1",c),f("n1","f1",c),f("n2","f2",c),f("n3","f3",c),f("n4","f4",c),f("p","n1",u),f("p","n2",u),f("p","n3",u),f("p","n4",u),f("u1","u2",h),f("u2","u3",h),f("u3","u1",h);function f(p,g,v){m(p,v),m(g,v)}function m(p,g){s.push(0,0,0),l.push(g.r,g.g,g.b),d[p]===void 0&&(d[p]=[]),d[p].push(s.length/3-1)}i.setAttribute("position",new wt(s,3)),i.setAttribute("color",new wt(l,3)),super(i,r),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update()}update(){let t=this.geometry,i=this.pointMap,r=!0;oo.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];let s=1,l=1,d=r?.8:1e-4;Ho("n1",i,t,oo,-s,-l,d),Ho("n2",i,t,oo,s,-l,d),Ho("n3",i,t,oo,-s,l,d),Ho("n4",i,t,oo,s,l,d);let c=d;Ho("f1",i,t,oo,-s,-l,c),Ho("f2",i,t,oo,s,-l,c),Ho("f3",i,t,oo,-s,l,c),Ho("f4",i,t,oo,s,l,c);let u=c,h=.5;Ho("u1",i,t,oo,s*.7*h,l*1.1,u),Ho("u2",i,t,oo,-s*.7*h,l*1.1,u),Ho("u3",i,t,oo,0,l*(1.1+.9*h),u),t.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}};function Ho(t,i,r,s,l,d,c){z_.set(l,d,c).unproject(s);let u=i[t];if(u!==void 0){let h=r.getAttribute("position");for(let f=0,m=u.length;f<m;f++)h.setXYZ(u[f],z_.x,z_.y,z_.z)}}var Jie=class extends k0(Qie){constructor(t){super(t),this.object=t,this.object=t,this.name=`CombinedCameraHelper: ${t.uuid}`}updateMatrixWorld(t){super.updateMatrixWorld(t),this.updateTarget()}updateTarget(){let t=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(t)}raycast(t,i){S0(this.object,this.geometry,t,i,!0)}},UM;(t=>t.is=i=>"objectHelper"in i)(UM||(UM={}));var A0=(t,i)=>class extends WE(t){constructor(){super(...arguments),this.objectHelper=new i(this),this.gizmos={}}get geometryHelper(){return i.geometryHelper}raycast(r,s){this.objectHelper.raycast(r,s)}showGizmos(){for(let r in this.gizmos){let s=this.gizmos[r];s instanceof ax&&(s.visible=!0)}}updateEntityBoxSize(r,s){this.objectHelper.visible&&this.geometryHelper instanceof bl?(r.setScalar(0),s.set(this.geometryHelper.parameters.width,this.geometryHelper.parameters.height,this.geometryHelper.parameters.height).multiplyScalar(.5)):super.updateEntityBoxSize(r,s)}hideGizmos(){for(let r in this.gizmos){let s=this.gizmos[r];s instanceof ax&&(s.visible=!1)}}},L_=790,Jp=new N,VM=new N,HM=new Ut,GM=new N,C0=new N,WM=new N,ga=class extends A0(Gf,Jie){constructor(t="",i=ge(Z({},Kv.defaultData),{name:""})){super(),this._cameraType="OrthographicCamera",this.targetOffset=vp.DefaultTargetOffset,this.isUpVectorFlipped=!1,this.angleOffsetFromUp=0,this.wasMovedByUser=!1,this.wasMovedBySwitchCameraAction=!1,this.super_Entity(t,i),this.previousProjectionMatrix=new Ze,this.matrixAutoUpdate=!0,this.width=window.innerWidth,this.height=window.innerHeight;let r=this.width,s=this.height;this.orthoCamera=new MA(r*-.5,r*.5,s*.5,s*-.5,-5e4,1e4),this.perspCamera=new ha(45,r/s,50,1e4),this.left=this.orthoCamera.left,this.right=this.orthoCamera.right,this.top=this.orthoCamera.top,this.bottom=this.orthoCamera.bottom,this.far=this.orthoCamera.far,this.view=this.orthoCamera.view,this.aspect=this.perspCamera.aspect,this.focus=this.perspCamera.focus,this.filmGauge=this.perspCamera.filmGauge,this.filmOffset=this.perspCamera.filmOffset,this.objectHelper.update()}get isPerspectiveCamera(){return this.cameraType==="PerspectiveCamera"}get isOrthographicCamera(){return!this.isPerspectiveCamera}get cameraType(){return this._cameraType}set fov(t){this.perspCamera.fov=t}get fov(){return this.perspCamera.fov}setNear(t,i){t==="PerspectiveCamera"?this.perspCamera.near=i:this.orthoCamera.near=i}setZoom(t,i){i>=0&&(t==="PerspectiveCamera"?this.perspCamera.zoom=i:this.orthoCamera.zoom=i)}set cameraType(t){t==="PerspectiveCamera"?this.toPerspective():t==="OrthographicCamera"&&this.toOrthographic()}get near(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.near:this.orthoCamera.near}set near(t){this._cameraType==="PerspectiveCamera"?this.perspCamera.near=t:this.orthoCamera.near=t}get zoom(){return this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom:this.orthoCamera.zoom}set zoom(t){t>=0&&(this._cameraType==="PerspectiveCamera"?this.perspCamera.zoom=t:this.orthoCamera.zoom=t)}lookAt(t,i,r){typeof t=="number"&&(t=new N(t,i,r)),super.lookAt(t),this.getWorldPosition(Jp),this.targetOffset=Jp.distanceTo(t)}getTarget(t=new N){return this.getWorldDirection(VM),this.getWorldPosition(Jp),VM.multiplyScalar(this.targetOffset),t.copy(Jp).add(VM),t}getDistanceToTarget(){let t=this.getTarget();return this.getWorldPosition(Jp),Jp.distanceTo(t)}updateUp(){this.getWorldQuaternion(HM),GM.set(0,0,1).applyQuaternion(HM),C0.copy(ln.DEFAULT_UP),this.isUpVectorFlipped&&C0.negate(),C0.applyQuaternion(HM),WM.copy(ln.DEFAULT_UP).projectOnPlane(GM),this.angleOffsetFromUp=WM.angleTo(C0),this.angleOffsetFromUp*=WM.cross(C0).dot(GM)>=0?1:-1}updateTransformState(t,i){let r=super.updateTransformState(t,i);return t.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=t.isUpVectorFlipped),this.updateUp(),r}getViewFrontToObject(t){let i=t.getWorldPosition(new N),r=t.getWorldDirection(new N).multiplyScalar(this.targetOffset);return{position:i.clone().add(r),target:i}}getViewToTarget(t){let i=this.getWorldDirection(new N).multiplyScalar(this.targetOffset);return{position:t.clone().sub(i),target:t}}getViewToObject(t){let i=new N,r=t.getWorldPosition(i);return this.getViewToTarget(i)}setViewplaneSize(t,i,r=!1){if(this.aspect=t/i,r){let s=t>i?this.aspect:1,l=t>i?1:this.aspect;this.left=-L_*.5*s,this.right=L_*.5*s,this.top=L_*.5*(1/l),this.bottom=-L_*.5*(1/l)}else this.left=-t*.5,this.right=t*.5,this.top=i*.5,this.bottom=-i*.5;this.updateProjectionMatrix()}copyViewPlaneSize(t){this.aspect=t.aspect,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.updateProjectionMatrix()}toOrthographic(){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",this.objectHelper&&this.objectHelper.update()}toPerspective(){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",this.objectHelper&&this.objectHelper.update()}setFocalLength(t){this.perspCamera.setFocalLength(t),this.toPerspective()}getFocalLength(){return this.perspCamera.getFocalLength()}getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}getFilmWidth(){return this.perspCamera.getFilmWidth()}getFilmHeight(){return this.perspCamera.getFilmHeight()}setViewOffset(t,i,r,s,l,d){this._cameraType==="PerspectiveCamera"?this.perspCamera.setViewOffset(t,i,r,s,l,d):this.orthoCamera.setViewOffset(t,i,r,s,l,d)}clearViewOffset(){this._cameraType==="PerspectiveCamera"?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}copyHistory(){this.previousProjectionMatrix&&this.previousProjectionMatrix.copy(this.projectionMatrix)}updateProjectionMatrix(){this._cameraType==="PerspectiveCamera"?this.toPerspective():this._cameraType==="OrthographicCamera"&&this.toOrthographic()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}copy(t,i){return super.copy(t,i),this.parent=t.parent,this.orthoCamera.copy(t.orthoCamera),this.perspCamera.copy(t.perspCamera),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.far=t.far,this.view=t.view===null?null:Object.assign({},t.view),this._cameraType=t._cameraType,this.aspect=t.aspect,this.fov=t.fov,this.focus=t.focus,this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this.targetOffset=t.targetOffset,this.updateProjectionMatrix(),this}toCameraState(t=[]){let i={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return PC(i,t)}updateCameraSubtype(t,i){let r=t==="perspective"?"PerspectiveCamera":"OrthographicCamera";i.zoom!==void 0&&this.setZoom(r,i.zoom),i.near!==void 0&&this.setNear(r,i.near),i.fov!==void 0&&r==="PerspectiveCamera"&&(this.fov=i.fov)}updateState(t,i){this.updateCameraState(t,i)}updateCameraState(t,i){this.updateState_Entity(t,i),t.far!==void 0&&(this.far=t.far),t.orthographic!==void 0&&this.updateCameraSubtype("orthographic",t.orthographic),t.perspective!==void 0&&this.updateCameraSubtype("perspective",t.perspective),t.type!==void 0&&(this.cameraType=t.type),t.up!==void 0&&this.up.fromArray(t.up),t.targetOffset!==void 0&&(this.targetOffset=t.targetOffset),t.isUpVectorFlipped!==void 0&&(this.isUpVectorFlipped=t.isUpVectorFlipped),this.updateProjectionMatrix()}updateByPatchedOp(t,i,r){super.updateByPatchedOp(t,i,r),t.path.length===1&&t.type===0&&this.updateCameraSubtype(t.path[0],t.props)}toState(t){return ge(Z(Z({},super.toState(t)),this.toCameraState(t)),{type:this.cameraType})}},em=new Ze,ene=new Ze,B_=new Ze,T9=new N,D9=new N;function P9(t){let i=!1;return t.scene.objects.traverse((r,s)=>{var l;((l=s.geometry)==null?void 0:l.type)==="BooleanGeometry"&&(i=!0)}),i}var wh=class extends Kp{constructor(t,i,r){super(t,i),this.data=i,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry=new Nt,this.onAfterRender=(s,l,d,c,u,h)=>{super.onAfterRender(s,l,d,c,u,h),this.recomputeBoolean()},this.geometry.userData.parameters={width:0,height:0,depth:0}}get booleanOp(){return this.data.geometry.operation}get phongAngle(){var t;return(t=this.data.geometry.phongAngle)!=null?t:45}get isLOD(){return this.recomputeBoolean(),!1}updateByPatchedOp(t,i,r){super.updateByPatchedOp(t,i,r),t.path.length===1&&t.path[0]==="geometry"&&t.type===0&&t.props.operation!==void 0&&(this.freeBooleanPointer(),this.resetBBoxNeedsUpdate())}freeBooleanPointer(){super.freeBooleanPointer(),this.geometry.dispose()}recomputeBoolean(t,i=!0){var s,l;if(this.booleanMeshSetAddress!==-1&&!t)return;for(let d=0;d<this.children.length;d++){let c=this.children[d];c instanceof wh&&c.dataPatched.visible===!0&&c.recomputeBoolean(t===!0,i)}this.meshSetAddresses=[];for(let d=0;d<this.children.length;d++){let c=this.children[d];if(c instanceof ds&&c.dataPatched.visible===!0&&((s=c.geometry.attributes.position)==null?void 0:s.count)>0&&c.geometry.drawRange.count>0&&c.booleanMeshSetAddress!==0){em.multiplyMatrices(c.hiddenMatrix,c.matrix);try{if(c.booleanMeshSetAddress===-1){if(((l=c.geometry.index)!=null?l:c.geometry.getAttribute("position")).count/3<15e5&&(c.booleanMeshSetAddress=Dd.getMeshSet(c.geometry,t===!0,i)),c.booleanMeshSetAddress===-1)return;Dd.transformMeshSet(c.booleanMeshSetAddress,em),c.booleanMatrixInvOld.copy(em).invert(),c.booleanWasTransformed=!1}else c instanceof wh&&c.needsTransformForDownstream===!0?(Dd.transformMeshSet(c.booleanMeshSetAddress,em),c.needsTransformForDownstream=!1):c.booleanWasTransformed===!0&&(Dd.transformMeshSet(c.booleanMeshSetAddress,ene.multiplyMatrices(em,c.booleanMatrixInvOld)),c.booleanMatrixInvOld.copy(em).invert(),c.booleanWasTransformed=!1)}catch(u){console.error(u),c.booleanMeshSetAddress=0,c.geometry.userData.booleanOperationDidFail=!0;continue}Dd.hasOpenEdges(c.booleanMeshSetAddress)===!1||d===this.children.length-1&&this.booleanOp===2?(this.meshSetAddresses.push(c.booleanMeshSetAddress),c.geometry.userData.booleanOperationDidFail=!1):c.geometry.userData.booleanOperationDidFail="openEdges"}}if(this.meshSetAddresses.length===0){this.geometry.setAttribute("position",new wt([],0)),this.geometry.setDrawRange(0,0);return}if(t===!0)return Dd.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);let r=this.geometry;r.dispose(),this.geometry=new Nt,this.geometry.userData=r.userData,this.geometry.boundingSphere=r.boundingSphere;try{this.booleanMeshSetAddress=Dd.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry,this.phongAngle)}catch(d){this.booleanMeshSetAddress=0,this.geometry.userData.booleanOperationDidFail=!0,console.error(d)}this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0,LM(this),BM(this)}dispose(){super.dispose(),this.geometry.dispose()}get recursiveBBox(){var i;let t=super.recursiveBBox;return((i=this.geometry.boundingSphere)==null?void 0:i.radius)===-1&&(t.getCenter(this.geometry.boundingSphere.center),B_.copy(this.matrixWorld).invert(),this.geometry.boundingSphere.center.applyMatrix4(B_),T9.copy(t.max).applyMatrix4(B_),D9.copy(t.min).applyMatrix4(B_),this.geometry.boundingSphere.radius=T9.distanceTo(D9)/2),t}},qM;(t=>{function i(r){return Ri.is(r)&&r instanceof zv}t.is=i})(qM||(qM={}));var $M=(t,i)=>class extends A0(t,i){updateState_Light(r,s){this.updateState_Entity(r,s),r.color!==void 0&&(this.color=s.shared.color(r.color)),r.intensity!==void 0&&(this.intensity=r.intensity),r.depth!==void 0&&(this.shadow.camera.far=r.depth,this.shadow.needsUpdate=!0),r.shadows!==void 0&&(this.castShadow=r.shadows)}},Go=t=>t instanceof ds,Bd=t=>t!==null&&t instanceof wh,tne=t=>t instanceof ga,ine=t=>qM.is(t),ZM=t=>UM.is(t),F_=class extends k0(OV){constructor(t,i=15){super(i),this.object=t,this.object.updateMatrixWorld(),this.name=`EmptyObjectHelper: ${t.uuid}`,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.object.isBone&&(this.visible=!1)}raycast(t,i){S0(this.object,F_.geometryHelper,t,i)}update(){}},tm=class extends A0(Kf,F_){constructor(t,i){super(),this.super_Entity(t,i),this.objectHelper.update()}updateState(t,i){this.updateState_Entity(t,i),"buffer"in t&&Object.keys(t).length===1&&i.scene.reloadSplats()}},O9={RED:0,GREEN:1,BLUE:2,ALPHA:3},E0="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",nne=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,N_=class extends gn{constructor(t=!1,i=!1){super({name:"BokehMaterial",defines:{PASS:t?"2":"1"},uniforms:{kernel64:new Ye(null),kernel16:new Ye(null),inputBuffer:new Ye(null),cocBuffer:new Ye(null),texelSize:new Ye(new q),scale:new Ye(1)},blending:$n,depthWrite:!1,depthTest:!1,fragmentShader:nne,vertexShader:E0}),this.toneMapped=!1,i&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set cocBuffer(t){this.uniforms.cocBuffer.value=t}setCoCBuffer(t){this.uniforms.cocBuffer.value=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(t){return this.uniforms.scale.value=t}setScale(t){this.uniforms.scale.value=t}generateKernel(){let t=2.39996323,i=new Float32Array(128),r=new Float32Array(32),s=0,l=0;for(let u=0;u<80;++u){let h=u*t,f=Math.sqrt(u)/Math.sqrt(80),m=f*Math.cos(h),p=f*Math.sin(h);u%5===0?(r[l++]=m,r[l++]=p):(i[s++]=m,i[s++]=p)}let d=[],c=[];for(let u=0;u<128;)d.push(new ri(i[u++],i[u++],i[u++],i[u++]));for(let u=0;u<32;)c.push(new ri(r[u++],r[u++],r[u++],r[u++]));this.uniforms.kernel64.value=d,this.uniforms.kernel16.value=c}setTexelSize(t,i){this.uniforms.texelSize.value.set(t,i)}setSize(t,i){this.uniforms.texelSize.value.set(1/t,1/i)}};function I9(t,i,r){return t*(i-r)-i}function YM(t,i,r){return Math.min(Math.max((t+i)/(i-r),0),1)}var rne=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,ane=class extends gn{constructor(t){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ye(null),focusDistance:new Ye(0),focusRange:new Ye(0),cameraNear:new Ye(.3),cameraFar:new Ye(1e3)},blending:$n,depthWrite:!1,depthTest:!1,fragmentShader:rne,vertexShader:E0}),this.toneMapped=!1,this.uniforms.focalLength=this.uniforms.focusRange,this.adoptCameraSettings(t)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,i=To){this.depthBuffer=t,this.depthPacking=i}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(t){this.uniforms.focusDistance.value=t}get worldFocusDistance(){return-I9(this.focusDistance,this.near,this.far)}set worldFocusDistance(t){this.focusDistance=YM(-t,this.near,this.far)}getFocusDistance(t){this.uniforms.focusDistance.value=t}setFocusDistance(t){this.uniforms.focusDistance.value=t}get focalLength(){return this.focusRange}set focalLength(t){this.focusRange=t}get focusRange(){return this.uniforms.focusRange.value}set focusRange(t){this.uniforms.focusRange.value=t}get worldFocusRange(){return-I9(this.focusRange,this.near,this.far)}set worldFocusRange(t){this.focusRange=YM(-t,this.near,this.far)}getFocalLength(t){return this.focusRange}setFocalLength(t){this.focusRange=t}adoptCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof ha?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},sne=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
#include <dithering_fragment>
}`,one="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",R9=class extends gn{constructor(t=new q){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Ye(null),texelSize:new Ye(new q),halfTexelSize:new Ye(new q),kernel:new Ye(0),scale:new Ye(1)},blending:$n,depthWrite:!1,depthTest:!1,fragmentShader:sne,vertexShader:one}),this.toneMapped=!1,this.setTexelSize(t.x,t.y)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,i){this.uniforms.texelSize.value.set(t,i),this.uniforms.halfTexelSize.value.set(t,i).multiplyScalar(.5)}setSize(t,i){let r=this.uniforms;r.texelSize.value.set(1/t,1/i),r.halfTexelSize.value.copy(r.texelSize.value).multiplyScalar(.5)}},lne=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
}`,dne=class extends gn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Ye(null),opacity:new Ye(1)},blending:$n,depthWrite:!1,depthTest:!1,fragmentShader:lne,vertexShader:E0}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},cne=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,une=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,j_={DEPTH:0,LUMA:1,COLOR:2},hne={DISABLED:0,DEPTH:1,CUSTOM:2},fne=class extends gn{constructor(t=new q,i=j_.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:uc.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new Ye(null),depthBuffer:new Ye(null),predicationBuffer:new Ye(null),texelSize:new Ye(t)},blending:$n,depthWrite:!1,depthTest:!1,fragmentShader:cne,vertexShader:une}),this.toneMapped=!1,this.edgeDetectionMode=i}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,i=To){this.depthBuffer=t,this.depthPacking=i}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(t){this.defines.EDGE_DETECTION_MODE=t.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(t){this.edgeDetectionMode=t}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(t){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=t.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(t){this.localContrastAdaptationFactor=t}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(t){this.defines.EDGE_THRESHOLD=t.toFixed("6"),this.defines.DEPTH_THRESHOLD=(t*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(t){this.edgeDetectionThreshold=t}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(t){this.defines.PREDICATION_MODE=t.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(t){this.predicationMode=t}set predicationBuffer(t){this.uniforms.predicationBuffer.value=t}setPredicationBuffer(t){this.uniforms.predicationBuffer.value=t}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(t){this.defines.PREDICATION_THRESHOLD=t.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(t){this.predicationThreshold=t}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(t){this.defines.PREDICATION_SCALE=t.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(t){this.predicationScale=t}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(t){this.defines.PREDICATION_STRENGTH=t.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(t){this.predicationStrength=t}setSize(t,i){this.uniforms.texelSize.value.set(1/t,1/i)}},pne=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,mne="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}",Wo={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},XM=class extends gn{constructor(t,i,r,s,l=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:uc.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Ye(null),depthBuffer:new Ye(null),resolution:new Ye(new q),texelSize:new Ye(new q),cameraNear:new Ye(.3),cameraFar:new Ye(1e3),aspect:new Ye(1),time:new Ye(0)},blending:$n,depthWrite:!1,depthTest:!1,dithering:l}),this.toneMapped=!1,t&&this.setShaderParts(t),i&&this.setDefines(i),r&&this.setUniforms(r),this.adoptCameraSettings(s)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,i=To){this.depthBuffer=t,this.depthPacking=i}setShaderParts(t){return this.fragmentShader=pne.replace(Wo.FRAGMENT_HEAD,t.get(Wo.FRAGMENT_HEAD)).replace(Wo.FRAGMENT_MAIN_UV,t.get(Wo.FRAGMENT_MAIN_UV)).replace(Wo.FRAGMENT_MAIN_IMAGE,t.get(Wo.FRAGMENT_MAIN_IMAGE)),this.vertexShader=mne.replace(Wo.VERTEX_HEAD,t.get(Wo.VERTEX_HEAD)).replace(Wo.VERTEX_MAIN_SUPPORT,t.get(Wo.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(t){for(let i of t.entries())this.defines[i[0]]=i[1];return this.needsUpdate=!0,this}setUniforms(t){for(let i of t.entries())this.uniforms[i[0]]=i[1];return this}setExtensions(t){this.extensions={};for(let i of t)this.extensions[i]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof ha?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,i){let r=this.uniforms;r.resolution.value.set(t,i),r.texelSize.value.set(1/t,1/i),r.aspect.value=t/i}static get Section(){return Wo}},gne=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,vne=class extends gn{constructor(t=!1,i=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:uc.replace(/\D+/g,"")},uniforms:{inputBuffer:new Ye(null),threshold:new Ye(0),smoothing:new Ye(1),range:new Ye(null)},blending:$n,depthWrite:!1,depthTest:!1,fragmentShader:gne,vertexShader:E0}),this.toneMapped=!1,this.colorOutput=t,this.luminanceRange=i}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},yne=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,z9={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},bne=class extends gn{constructor(t=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Ye(t),inputBuffer:new Ye(null),strength:new Ye(1)},blending:$n,depthWrite:!1,depthTest:!1,fragmentShader:yne,vertexShader:E0}),this.toneMapped=!1,this.setColorChannel(O9.RED),this.setMaskFunction(z9.DISCARD)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set maskTexture(t){this.uniforms.maskTexture.value=t,delete this.defines.MASK_PRECISION_HIGH,t.type!==Nr&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(t){this.maskTexture=t}set colorChannel(t){this.defines.COLOR_CHANNEL=t.toFixed(0),this.needsUpdate=!0}setColorChannel(t){this.colorChannel=t}set maskFunction(t){this.defines.MASK_FUNCTION=t.toFixed(0),this.needsUpdate=!0}setMaskFunction(t){this.maskFunction=t}get inverted(){return this.defines.INVERTED!==void 0}set inverted(t){this.inverted&&!t?delete this.defines.INVERTED:t&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(t){this.inverted=t}get strength(){return this.uniforms.strength.value}set strength(t){this.uniforms.strength.value=t}getStrength(){return this.strength}setStrength(t){this.strength=t}},wne=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,xne="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",_ne=class extends gn{constructor(t=new q,i=new q){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Ye(null),searchTexture:new Ye(null),areaTexture:new Ye(null),resolution:new Ye(i),texelSize:new Ye(t)},blending:$n,depthWrite:!1,depthTest:!1,fragmentShader:wne,vertexShader:xne}),this.toneMapped=!1}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(t){this.uniforms.searchTexture.value=t}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(t){this.uniforms.areaTexture.value=t}setLookupTextures(t,i){this.searchTexture=t,this.areaTexture=i}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(t){let i=Math.min(Math.max(t,0),112);this.defines.MAX_SEARCH_STEPS_INT=i.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=i.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(t){this.orthogonalSearchSteps=t}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(t){let i=Math.min(Math.max(t,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=i.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=i.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(t){this.diagonalSearchSteps=t}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(t){t?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(t){this.diagonalDetection=t}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(t){let i=Math.min(Math.max(t,0),100);this.defines.CORNER_ROUNDING=i.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(i/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(t){this.cornerRounding=t}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(t){t?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(t){this.cornerDetection=t}setSize(t,i){let r=this.uniforms;r.texelSize.value.set(1/t,1/i),r.resolution.value.set(t,i)}},kne=new Gf,Kc=null;function Sne(){if(Kc===null){let t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),i=new Float32Array([0,0,2,0,0,2]);Kc=new Nt,Kc.setAttribute!==void 0?(Kc.setAttribute("position",new Qt(t,3)),Kc.setAttribute("uv",new Qt(i,2))):(Kc.addAttribute("position",new Qt(t,3)),Kc.addAttribute("uv",new Qt(i,2)))}return Kc}var Za=class{constructor(t="Pass",i=new Ac,r=kne){this.name=t,this.renderer=null,this.scene=i,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){let i=this.getFullscreenMaterial();i!==null&&(i.needsUpdate=!0),this.rtt=!t}}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let i=this.screen;i!==null?i.material=t:(i=new za(Sne(),t),i.frustumCulled=!1,this.scene===null&&(this.scene=new Ac),this.scene.add(i),this.screen=i)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,i=To){}render(t,i,r,s,l){throw new Error("Render method not implemented!")}setSize(t,i){}initialize(t,i,r){}dispose(){for(let t of Object.keys(this)){let i=this[t];if(i!==null&&typeof i.dispose=="function"){if(i instanceof Ac||i===this.renderer)continue;this[t].dispose()}}}},KM=class extends Za{constructor(t,i=!0){super("CopyPass"),this.fullscreenMaterial=new dne,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new Oi(1,1,{minFilter:yi,magFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=i}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,i,r,s,l){this.fullscreenMaterial.inputBuffer=i.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,i){this.autoResize&&this.renderTarget.setSize(t,i)}initialize(t,i,r){r!==void 0&&(this.renderTarget.texture.type=r,r!==Nr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t.outputEncoding===ci&&(this.renderTarget.texture.encoding=ci))}},Ane=class extends Za{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,i,r,s,l){let d=t.state.buffers.stencil;d.setLocked(!1),d.setTest(!1)}},QM=new _t,JM=class extends Za{constructor(t=!0,i=!0,r=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=i,this.stencil=r,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,i,r){this.color=t,this.depth=i,this.stencil=r}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,i,r,s,l){let d=this.overrideClearColor,c=this.overrideClearAlpha,u=t.getClearAlpha(),h=d!==null,f=c>=0;h?(QM.copy(t.getClearColor(QM)),t.setClearColor(d,f?c:u)):f&&t.setClearAlpha(c),t.setRenderTarget(this.renderToScreen?null:i),t.clear(this.color,this.depth,this.stencil),h?t.setClearColor(QM,u):f&&t.setClearAlpha(u)}},Qc=-1,gs=class extends Cr{constructor(t,i=Qc,r=Qc,s=1){super(),this.resizable=t,this.base=new q(1,1),this.preferred=new q(i,r),this.target=this.preferred,this.s=s}get width(){let{base:t,preferred:i,scale:r}=this,s;return i.width!==Qc?s=i.width:i.height!==Qc?s=Math.round(i.height*(t.width/Math.max(t.height,1))):s=Math.round(t.width*r),s}set width(t){this.preferredWidth=t}get height(){let{base:t,preferred:i,scale:r}=this,s;return i.height!==Qc?s=i.height:i.width!==Qc?s=Math.round(i.width/Math.max(t.width/Math.max(t.height,1),1)):s=Math.round(t.height*r),s}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferred.setScalar(Qc),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.base.width}set baseWidth(t){this.base.width!==t&&(this.base.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseWidth(){return this.base.width}setBaseWidth(t){this.base.width!==t&&(this.base.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get baseHeight(){return this.base.height}set baseHeight(t){this.base.height!==t&&(this.base.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,i){(this.base.width!==t||this.base.height!==i)&&(this.base.set(t,i),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}get preferredWidth(){return this.preferred.width}set preferredWidth(t){this.preferred.width!==t&&(this.preferred.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferred.height}set preferredHeight(t){this.preferred.height!==t&&(this.preferred.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,i){(this.preferred.width!==t||this.preferred.height!==i)&&(this.preferred.set(t,i),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}copy(t){this.base.set(t.getBaseWidth(),t.getBaseHeight()),this.preferred.set(t.getPreferredWidth(),t.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}static get AUTO_SIZE(){return Qc}},e4=!1,L9=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=i=>{if(i.isMesh){let r;if(i.material.flatShading)switch(i.material.side){case ta:r=this.materialsFlatShadedDoubleSide;break;case qn:r=this.materialsFlatShadedBackSide;break;default:r=this.materialsFlatShaded;break}else switch(i.material.side){case ta:r=this.materialsDoubleSide;break;case qn:r=this.materialsBackSide;break;default:r=this.materials;break}this.originalMaterials.set(i,i.material),i.isSkinnedMesh?i.material=r[2]:i.isInstancedMesh?i.material=r[1]:i.material=r[0],++this.meshCount}}}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){let i=this.materials=[t.clone(),t.clone(),t.clone()];for(let r of i)r.uniforms=Object.assign({},t.uniforms),r.side=qs;i[2].skinning=!0,this.materialsBackSide=i.map(r=>{let s=r.clone();return s.uniforms=Object.assign({},t.uniforms),s.side=qn,s}),this.materialsDoubleSide=i.map(r=>{let s=r.clone();return s.uniforms=Object.assign({},t.uniforms),s.side=ta,s}),this.materialsFlatShaded=i.map(r=>{let s=r.clone();return s.uniforms=Object.assign({},t.uniforms),s.flatShading=!0,s}),this.materialsFlatShadedBackSide=i.map(r=>{let s=r.clone();return s.uniforms=Object.assign({},t.uniforms),s.flatShading=!0,s.side=qn,s}),this.materialsFlatShadedDoubleSide=i.map(r=>{let s=r.clone();return s.uniforms=Object.assign({},t.uniforms),s.flatShading=!0,s.side=ta,s})}}render(t,i,r){let s=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,e4){let l=this.originalMaterials;this.meshCount=0,i.traverse(this.replaceMaterial),t.render(i,r);for(let d of l)d[0].material=d[1];this.meshCount!==l.size&&l.clear()}else{let l=i.overrideMaterial;i.overrideMaterial=this.material,t.render(i,r),i.overrideMaterial=l}t.shadowMap.enabled=s}disposeMaterials(){if(this.material!==null){let t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(let i of t)i.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return e4}static set workaroundEnabled(t){e4=t}},Cne=class extends Za{constructor(t,i,r=null){super("RenderPass",t,i),this.needsSwap=!1,this.clearPass=new JM,this.overrideMaterialManager=r===null?null:new L9(r),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){let t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){let i=this.overrideMaterialManager;t!==null?i!==null?i.setMaterial(t):this.overrideMaterialManager=new L9(t):i!==null&&(i.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,i,r,s,l){let d=this.scene,c=this.camera,u=this.selection,h=c.layers.mask,f=d.background,m=t.shadowMap.autoUpdate,p=this.renderToScreen?null:i;u!==null&&c.layers.set(u.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(d.background=null),this.clearPass.enabled&&this.clearPass.render(t,i),t.setRenderTarget(p),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,d,c):t.render(d,c),c.layers.mask=h,d.background=f,t.shadowMap.autoUpdate=m}},B9=class extends Za{constructor(t,i,{resolutionScale:r=1,width:s=gs.AUTO_SIZE,height:l=gs.AUTO_SIZE,renderTarget:d}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Cne(t,i,new cP({depthPacking:_w}));let c=this.renderPass;c.skipShadowMapUpdate=!0,c.ignoreBackground=!0;let u=c.getClearPass();u.overrideClearColor=new _t(16777215),u.overrideClearAlpha=1,this.renderTarget=d,this.renderTarget===void 0&&(this.renderTarget=new Oi(1,1,{minFilter:on,magFilter:on,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target");let h=this.resolution=new gs(this,s,l,r);h.addEventListener("change",f=>this.setSize(h.baseWidth,h.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,i,r,s,l){let d=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,d)}setSize(t,i){let r=this.resolution;r.setBaseSize(t,i),this.renderTarget.setSize(r.width,r.height)}},hfe=new Float32Array([255/256/wn(256,3),255/256/wn(256,2),255/256/256,255/256]),Fi={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},Ene="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}",Mne="vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}",Tne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}",Dne="float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Pne="float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",One="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}",Ine="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}",Rne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}",zne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}",Lne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}",Bne="float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Fne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}",Nne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}",jne="float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Une="float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Vne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}",Hne="float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}",Gne="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}",Wne=new Map([[Fi.SKIP,null],[Fi.ADD,Ene],[Fi.ALPHA,Mne],[Fi.AVERAGE,Tne],[Fi.COLOR_BURN,Dne],[Fi.COLOR_DODGE,Pne],[Fi.DARKEN,One],[Fi.DIFFERENCE,Ine],[Fi.EXCLUSION,Rne],[Fi.LIGHTEN,zne],[Fi.MULTIPLY,Lne],[Fi.DIVIDE,Bne],[Fi.NEGATION,Fne],[Fi.NORMAL,Nne],[Fi.OVERLAY,jne],[Fi.REFLECT,Une],[Fi.SCREEN,Vne],[Fi.SOFT_LIGHT,Hne],[Fi.SUBTRACT,Gne]]),qne=class extends Cr{constructor(t,i=1){super(),this.f=t,this.opacity=new Ye(i)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this.f}set blendFunction(t){this.f=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return Wne.get(this.blendFunction)}},jl={NONE:0,DEPTH:1,CONVOLUTION:2},Ul=class extends Cr{constructor(t,i,{attributes:r=jl.NONE,blendFunction:s=Fi.SCREEN,defines:l=new Map,uniforms:d=new Map,extensions:c=null,vertexShader:u=null}={}){super(),this.name=t,this.renderer=null,this.attributes=r,this.fragmentShader=i,this.vertexShader=u,this.defines=l,this.uniforms=d,this.extensions=c,this.blendMode=new qne(s),this.blendMode.addEventListener("change",h=>this.setChanged())}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,i=To){}update(t,i,r){}setSize(t,i){}initialize(t,i,r){}dispose(){for(let t of Object.keys(this)){let i=this[t];if(i!==null&&typeof i.dispose=="function"){if(i instanceof Ac||i===this.renderer)continue;this[t].dispose()}}}};function F9(t,i,r){for(let s of i){let l="$1"+t+s.charAt(0).toUpperCase()+s.slice(1),d=new RegExp("([^\\.])(\\b"+s+"\\b)","g");for(let c of r.entries())c[1]!==null&&r.set(c[0],c[1].replace(d,l))}}function $ne(t,i,r,s,l,d,c){let u=new Map([["fragment",i.getFragmentShader()],["vertex",i.getVertexShader()]]),h=u.get("fragment")!==void 0&&/mainImage/.test(u.get("fragment")),f=u.get("fragment")!==void 0&&/mainUv/.test(u.get("fragment")),m=[],p=[],g=!1,v=!1;if(u.get("fragment")===void 0)console.error("Missing fragment shader",i);else if(f&&c&jl.CONVOLUTION)console.error("Effects that transform UV coordinates are incompatible with convolution effects",i);else if(!h&&!f)console.error("The fragment shader contains neither a mainImage nor a mainUv function",i);else{let w=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,x=XM.Section;if(f){let k=`	${t}MainUv(UV);
`;r.set(x.FRAGMENT_MAIN_UV,r.get(x.FRAGMENT_MAIN_UV)+k),g=!0}if(u.get("vertex")!==null&&/mainSupport/.test(u.get("vertex"))){let k=`	${t}MainSupport(`;k+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(u.get("vertex"))?`vUv);
`:`);
`,r.set(x.VERTEX_MAIN_SUPPORT,r.get(x.VERTEX_MAIN_SUPPORT)+k),m=m.concat([...u.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)].map(A=>A[1])),p=p.concat(m).concat([...u.get("vertex").matchAll(w)].map(A=>A[1]))}p=p.concat([...u.get("fragment").matchAll(w)].map(k=>k[1])),p=p.concat([...i.defines.keys()].map(k=>k.replace(/\([\w\s,]*\)/g,""))),p=p.concat([...i.uniforms.keys()]),i.uniforms.forEach((k,A)=>d.set(t+A.charAt(0).toUpperCase()+A.slice(1),k)),i.defines.forEach((k,A)=>l.set(t+A.charAt(0).toUpperCase()+A.slice(1),k)),F9(t,p,l),F9(t,p,u);let _=i.blendMode;if(s.set(_.blendFunction,_),h){let k=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/,A=`${t}MainImage(color0, UV, `;c&jl.DEPTH&&k.test(u.get("fragment"))&&(A+="depth, ",v=!0),A+=`color1);
	`;let C=t+"BlendOpacity";d.set(C,_.opacity),A+=`color0 = blend${_.blendFunction}(color0, color1, ${C});

	`,r.set(x.FRAGMENT_MAIN_IMAGE,r.get(x.FRAGMENT_MAIN_IMAGE)+A),A=`uniform float ${C};

`,r.set(x.FRAGMENT_HEAD,r.get(x.FRAGMENT_HEAD)+A)}r.set(x.FRAGMENT_HEAD,r.get(x.FRAGMENT_HEAD)+u.get("fragment")+`
`),u.get("vertex")!==null&&r.set(x.VERTEX_HEAD,r.get(x.VERTEX_HEAD)+u.get("vertex")+`
`)}return{varyings:m,transformedUv:g,readDepth:v}}var U_=class extends Za{constructor(t,...i){super("EffectPass"),this.fullscreenMaterial=new XM(null,null,null,t),this.effects=i.sort((r,s)=>s.attributes-r.attributes),this.skipRendering=!1,this.uniformCount=0,this.varyingCount=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){let i=this.fullscreenMaterial;i.dithering=t,i.needsUpdate=!0}verifyResources(){let t=this.renderer.capabilities,i=Math.min(t.maxFragmentUniforms,t.maxVertexUniforms);this.uniformCount>i&&console.warn("The current rendering context doesn't support more than "+i+" uniforms, but "+this.uniformCount+" were defined"),i=t.maxVaryings,this.varyingCount>i&&console.warn("The current rendering context doesn't support more than "+i+" varyings, but "+this.varyingCount+" were defined")}updateMaterial(){let t=XM.Section,i=new Map([[t.FRAGMENT_HEAD,""],[t.FRAGMENT_MAIN_UV,""],[t.FRAGMENT_MAIN_IMAGE,""],[t.VERTEX_HEAD,""],[t.VERTEX_MAIN_SUPPORT,""]]),r=new Map,s=new Map,l=new Map,d=new Set,c=0,u=0,h=0,f=!1,m=!1;for(let g of this.effects)if(g.blendMode.blendFunction===Fi.SKIP)h|=g.getAttributes()&jl.DEPTH;else if(h&g.getAttributes()&jl.CONVOLUTION)console.error("Convolution effects cannot be merged",g);else{h|=g.getAttributes();let v="e"+c++,w=$ne(v,g,i,r,s,l,h);if(u+=w.varyings.length,f=f||w.transformedUv,m=m||w.readDepth,g.extensions!==null)for(let x of g.extensions)d.add(x)}let p=/\bblend\b/g;for(let g of r.values()){let v=g.getShaderCode().replace(p,`blend${g.blendFunction}`);i.set(t.FRAGMENT_HEAD,i.get(t.FRAGMENT_HEAD)+v+`
`)}if(h&jl.DEPTH){if(m){let g=`float depth = readDepth(UV);

	`;i.set(t.FRAGMENT_MAIN_IMAGE,g+i.get(t.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=this.getDepthTexture()===null}else this.needsDepthTexture=!1;if(f){let g=`vec2 transformedUv = vUv;
`;i.set(t.FRAGMENT_MAIN_UV,g+i.get(t.FRAGMENT_MAIN_UV)),s.set("UV","transformedUv")}else s.set("UV","vUv");i.forEach((g,v,w)=>w.set(v,g.trim().replace(/^#/,`
#`))),this.uniformCount=l.size,this.varyingCount=u,this.skipRendering=c===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(i).setExtensions(d).setUniforms(l).setDefines(s)}recompile(){this.updateMaterial(),this.verifyResources()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,i=To){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=i;for(let r of this.effects)r.setDepthTexture(t,i)}render(t,i,r,s,l){for(let d of this.effects)d.update(t,i,s);if(!this.skipRendering||this.renderToScreen){let d=this.fullscreenMaterial;d.inputBuffer=i.texture,d.time+=s,t.setRenderTarget(this.renderToScreen?null:r),t.render(this.scene,this.camera)}}setSize(t,i){this.fullscreenMaterial.setSize(t,i);for(let r of this.effects)r.setSize(t,i)}initialize(t,i,r){this.renderer=t;for(let s of this.effects)s.initialize(t,i,r),s.addEventListener("change",l=>this.handleEvent(l));this.updateMaterial(),this.verifyResources(),r!==void 0&&r!==Nr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(let t of this.effects)t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},Zne=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],N9=class extends Za{constructor({resolutionScale:t=.5,width:i=gs.AUTO_SIZE,height:r=gs.AUTO_SIZE,kernelSize:s=i4.LARGE}={}){super("KawaseBlurPass"),this.renderTargetA=new Oi(1,1,{minFilter:yi,magFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";let l=this.resolution=new gs(this,i,r,t);l.addEventListener("change",d=>this.setSize(l.baseWidth,l.baseHeight)),this.blurMaterial=new R9,this.ditheredBlurMaterial=new R9,this.ditheredBlurMaterial.uniforms.scale=this.blurMaterial.uniforms.scale,this.ditheredBlurMaterial.dithering=!0,this.dithering=!1,this.kernelSize=s}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,i,r,s,l){let d=this.scene,c=this.camera,u=this.renderTargetA,h=this.renderTargetB,f=Zne[this.kernelSize],m=this.blurMaterial,p=i,g,v;for(this.fullscreenMaterial=m,g=0,v=f.length-1;g<v;++g){let w=g&1?h:u;m.kernel=f[g],m.inputBuffer=p.texture,t.setRenderTarget(w),t.render(d,c),p=w}this.dithering&&(m=this.ditheredBlurMaterial,this.fullscreenMaterial=m),m.kernel=f[g],m.inputBuffer=p.texture,t.setRenderTarget(this.renderToScreen?null:r),t.render(d,c)}setSize(t,i){let r=this.resolution;r.setBaseSize(t,i);let s=r.width,l=r.height;this.renderTargetA.setSize(s,l),this.renderTargetB.setSize(s,l),this.blurMaterial.setSize(s,l),this.ditheredBlurMaterial.setSize(s,l)}initialize(t,i,r){r!==void 0&&(this.renderTargetA.texture.type=r,this.renderTargetB.texture.type=r,r!==Nr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t.outputEncoding===ci&&(this.renderTargetA.texture.encoding=ci,this.renderTargetB.texture.encoding=ci))}static get AUTO_SIZE(){return gs.AUTO_SIZE}},Yne=class extends Za{constructor({width:t=gs.AUTO_SIZE,height:i=gs.AUTO_SIZE,renderTarget:r,luminanceRange:s,colorOutput:l}={}){super("LuminancePass"),this.fullscreenMaterial=new vne(l,s),this.needsSwap=!1,this.renderTarget=r,this.renderTarget===void 0&&(this.renderTarget=new Oi(1,1,{minFilter:yi,magFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1);let d=this.resolution=new gs(this,t,i);d.addEventListener("change",c=>this.setSize(d.baseWidth,d.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,i,r,s,l){let d=this.fullscreenMaterial;d.inputBuffer=i.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,i){let r=this.resolution;r.setBaseSize(t,i),this.renderTarget.setSize(r.width,r.height)}initialize(t,i,r){r!==void 0&&r!==Nr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Xne=class extends Za{constructor(t,i){super("MaskPass",t,i),this.needsSwap=!1,this.clearPass=new JM(!1,!1,!0),this.inverse=!1}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,i,r,s,l){let d=t.getContext(),c=t.state.buffers,u=this.scene,h=this.camera,f=this.clearPass,m=this.inverted?0:1,p=1-m;c.color.setMask(!1),c.depth.setMask(!1),c.color.setLocked(!0),c.depth.setLocked(!0),c.stencil.setTest(!0),c.stencil.setOp(d.REPLACE,d.REPLACE,d.REPLACE),c.stencil.setFunc(d.ALWAYS,m,4294967295),c.stencil.setClear(p),c.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(t,null):(f.render(t,i),f.render(t,r))),this.renderToScreen?(t.setRenderTarget(null),t.render(u,h)):(t.setRenderTarget(i),t.render(u,h),t.setRenderTarget(r),t.render(u,h)),c.color.setLocked(!1),c.depth.setLocked(!1),c.stencil.setLocked(!1),c.stencil.setFunc(d.EQUAL,1,4294967295),c.stencil.setOp(d.KEEP,d.KEEP,d.KEEP),c.stencil.setLocked(!0)}},Vl=class extends Za{constructor(t,i="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=t,this.inputBufferUniform=null,this.setInput(i)}setInput(t){if(this.inputBufferUniform=null,this.fullscreenMaterial!==null){let i=this.fullscreenMaterial.uniforms;i!==void 0&&i[t]!==void 0&&(this.inputBufferUniform=i[t])}}render(t,i,r,s,l){this.inputBufferUniform!==null&&i!==null&&(this.inputBufferUniform.value=i.texture),t.setRenderTarget(this.renderToScreen?null:r),t.render(this.scene,this.camera)}initialize(t,i,r){r!==void 0&&r!==Nr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},t4=1/1e3,Kne=1e3,Qne=class{constructor(){this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}setFixedDeltaEnabled(t){return this.fixedDeltaEnabled=t,this}isAutoResetEnabled(t){return this.autoReset}setAutoResetEnabled(t){return typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=t),this}getDelta(){return this.delta*t4}getFixedDelta(){return this.fixedDelta*t4}setFixedDelta(t){return this.fixedDelta=t*Kne,this}getElapsed(){return this.elapsed*t4}getTimescale(){return this.timescale}setTimescale(t){return this.timescale=t,this}update(t){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=t!==void 0?t:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}handleEvent(t){document.hidden||(this.currentTime=performance.now())}dispose(){this.setAutoResetEnabled(!1)}},i4={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},Jne=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}`,ere=class extends Ul{constructor({blendFunction:t=Fi.SCREEN,luminanceThreshold:i=.9,luminanceSmoothing:r=.025,resolutionScale:s=.5,intensity:l=1,width:d=gs.AUTO_SIZE,height:c=gs.AUTO_SIZE,kernelSize:u=i4.LARGE}={}){super("BloomEffect",Jne,{blendFunction:t,uniforms:new Map([["map",new Ye(null)],["intensity",new Ye(l)]])}),this.renderTarget=new Oi(1,1,{minFilter:yi,magFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.luminancePass=new Yne({renderTarget:this.renderTarget,colorOutput:!0}),this.luminanceMaterial.threshold=i,this.luminanceMaterial.smoothingFactor=r,this.blurPass=new N9({resolutionScale:s,width:d,height:c,kernelSize:u});let h=this.blurPass.getResolution();h.addEventListener("change",f=>this.setSize(h.baseWidth,h.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,i,r){let s=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(t,i,s),this.blurPass.render(t,s,s)):this.blurPass.render(t,i,s)}setSize(t,i){let r=this.resolution;r.setBaseSize(t,i),this.renderTarget.setSize(r.width,r.height),this.luminancePass.resolution.copy(r)}initialize(t,i,r){this.blurPass.initialize(t,i,r),r!==void 0&&(this.renderTarget.texture.type=r,t.outputEncoding===ci&&(this.renderTarget.texture.encoding=ci))}},tre="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",ire=class extends Ul{constructor({blendFunction:t=Fi.NORMAL,brightness:i=0,contrast:r=0}={}){super("BrightnessContrastEffect",tre,{blendFunction:t,uniforms:new Map([["brightness",new Ye(i)],["contrast",new Ye(r)]])})}get brightness(){return this.uniforms.get("brightness").value}set brightness(t){this.uniforms.get("brightness").value=t}getBrightness(t){return this.brightness}setBrightness(t){this.brightness=t}get contrast(){return this.uniforms.get("contrast").value}set contrast(t){this.uniforms.get("contrast").value=t}getContrast(t){return this.contrast}setContrast(t){this.contrast=t}},nre="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",rre=class extends Ul{constructor(t=Fi.NORMAL){super("ColorAverageEffect",nre,{blendFunction:t})}},are="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",sre="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",ore=class extends Ul{constructor({blendFunction:t=Fi.NORMAL,offset:i=new q(.001,5e-4)}={}){super("ChromaticAberrationEffect",are,{vertexShader:sre,blendFunction:t,attributes:jl.CONVOLUTION,uniforms:new Map([["offset",new Ye(i)]])})}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}},lre=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}`,dre=class extends Ul{constructor(t,{blendFunction:i=Fi.NORMAL,worldFocusDistance:r,worldFocusRange:s,focusDistance:l=0,focalLength:d=.1,focusRange:c=d,bokehScale:u=1,width:h=gs.AUTO_SIZE,height:f=gs.AUTO_SIZE}={}){super("DepthOfFieldEffect",lre,{blendFunction:i,attributes:jl.DEPTH,uniforms:new Map([["nearColorBuffer",new Ye(null)],["farColorBuffer",new Ye(null)],["nearCoCBuffer",new Ye(null)],["scale",new Ye(1)]])}),this.camera=t,this.renderTarget=new Oi(1,1,{minFilter:yi,magFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Vl(new ane(t));let m=this.cocMaterial;m.focusDistance=l,m.focusRange=c,r!==void 0&&(m.worldFocusDistance=r),s!==void 0&&(m.worldFocusRange=s),this.blurPass=new N9({kernelSize:i4.MEDIUM,width:h,height:f});let p=this.blurPass.getResolution();p.addEventListener("change",v=>this.setSize(p.getBaseWidth(),p.getBaseHeight())),this.maskPass=new Vl(new bne(this.renderTargetCoC.texture));let g=this.maskPass.fullscreenMaterial;g.maskFunction=z9.MULTIPLY,g.colorChannel=O9.GREEN,this.bokehNearBasePass=new Vl(new N_(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Vl(new N_(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Vl(new N_(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Vl(new N_(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null,this.bokehScale=u}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}get resolution(){return this.blurPass.getResolution()}getResolution(){return this.blurPass.getResolution()}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(t){let i=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];for(let r of i)r.fullscreenMaterial.setScale(t);this.maskPass.fullscreenMaterial.setStrength(t),this.uniforms.get("scale").value=t}getBokehScale(){return this.bokehScale}setBokehScale(t){this.bokehScale=t}getTarget(){return this.target}setTarget(t){this.target=t}calculateFocusDistance(t){let i=this.camera,r=i.position.distanceTo(t);return YM(-r,i.near,i.far)}setDepthTexture(t,i=To){this.circleOfConfusionMaterial.depthBuffer=t,this.circleOfConfusionMaterial.depthPacking=i}update(t,i,r){let s=this.renderTarget,l=this.renderTargetCoC,d=this.renderTargetCoCBlurred,c=this.renderTargetMasked;if(this.target!==null){let u=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=u}this.cocPass.render(t,null,l),this.blurPass.render(t,l,d),this.maskPass.render(t,i,c),this.bokehFarBasePass.render(t,c,s),this.bokehFarFillPass.render(t,s,this.renderTargetFar),this.bokehNearBasePass.render(t,i,s),this.bokehNearFillPass.render(t,s,this.renderTargetNear)}setSize(t,i){let r=this.resolution;r.setBaseSize(t,i);let s=r.width,l=r.height,d=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];d.push(this.renderTargetCoC,this.renderTargetMasked),d.forEach(c=>c.setSize(t,i)),d=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],d.forEach(c=>c.setSize(s,l)),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(c=>c.fullscreenMaterial.setSize(s,l))}initialize(t,i,r){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach(s=>s.initialize(t,i,r)),this.blurPass.initialize(t,i,Nr),r!==void 0&&(this.renderTarget.texture.type=r,this.renderTargetNear.texture.type=r,this.renderTargetFar.texture.type=r,this.renderTargetMasked.texture.type=r,t.outputEncoding===ci&&(this.renderTarget.texture.encoding=ci,this.renderTargetNear.texture.encoding=ci,this.renderTargetFar.texture.encoding=ci,this.renderTargetMasked.texture.encoding=ci))}},ffe=new N,pfe=new Ze,cre="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",ure=class extends Ul{constructor({blendFunction:t=Fi.NORMAL,hue:i=0,saturation:r=0}={}){super("HueSaturationEffect",cre,{blendFunction:t,uniforms:new Map([["hue",new Ye(new N)],["saturation",new Ye(r)]])}),this.hue=i}get saturation(){return this.uniforms.get("saturation").value}set saturation(t){this.uniforms.get("saturation").value=t}getSaturation(){return this.saturation}setSaturation(t){this.saturation=t}get hue(){let t=this.uniforms.get("hue").value;return Math.acos((t.x*3-1)/2)}set hue(t){let i=Math.sin(t),r=Math.cos(t);this.uniforms.get("hue").value.set((2*r+1)/3,(-Math.sqrt(3)*i-r+1)/3,(Math.sqrt(3)*i-r+1)/3)}getHue(){return this.hue}setHue(t){this.hue=t}},mfe=new _t,hre=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,fre=class extends Ul{constructor({blendFunction:t=Fi.SCREEN,premultiply:i=!1}={}){super("NoiseEffect",hre,{blendFunction:t}),this.premultiply=i}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},pre="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",mre=class extends Ul{constructor(t=30){super("PixelationEffect",pre,{uniforms:new Map([["active",new Ye(!1)],["d",new Ye(new q)]])}),this.resolution=new q,this.d=0,this.granularity=t}get granularity(){return this.d}set granularity(t){let i=Math.floor(t);i%2>0&&(i+=1),this.d=i,this.uniforms.get("active").value=i>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(t){this.granularity=t}setSize(t,i){this.resolution.set(t,i),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}},gfe=Math.PI*.5,vfe=new N,yfe=new N,j9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",U9="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",gre="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",vre="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",xh={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},V9=class extends Ul{constructor({preset:t=xh.MEDIUM,edgeDetectionMode:i=j_.COLOR,predicationMode:r=hne.DISABLED}={}){super("SMAAEffect",gre,{vertexShader:vre,blendFunction:Fi.NORMAL,attributes:jl.CONVOLUTION|jl.DEPTH,uniforms:new Map([["weightMap",new Ye(null)]])});let s,l;arguments.length>1&&(s=arguments[0],l=arguments[1],arguments.length>2&&(t=arguments[2]),arguments.length>3&&(i=arguments[3])),this.renderTargetEdges=new Oi(1,1,{minFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new JM(!0,!1,!1),this.clearPass.overrideClearColor=new _t(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Vl(new fne),this.edgeDetectionMaterial.edgeDetectionMode=i,this.edgeDetectionMaterial.predicationMode=r,this.weightsPass=new Vl(new _ne);let d=new VP;d.onLoad=()=>{let c=new zn(s);c.name="SMAA.Search",c.magFilter=on,c.minFilter=on,c.generateMipmaps=!1,c.needsUpdate=!0,c.flipY=!0,this.weightsMaterial.searchTexture=c;let u=new zn(l);u.name="SMAA.Area",u.magFilter=yi,u.minFilter=yi,u.generateMipmaps=!1,u.needsUpdate=!0,u.flipY=!1,this.weightsMaterial.areaTexture=u,this.dispatchEvent({type:"load"})},d.itemStart("search"),d.itemStart("area"),s!==void 0&&l!==void 0?(d.itemEnd("search"),d.itemEnd("area")):typeof Image<"u"&&(s=new Image,l=new Image,s.addEventListener("load",()=>d.itemEnd("search")),l.addEventListener("load",()=>d.itemEnd("area")),s.src=j9,l.src=U9),this.applyPreset(t)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(t){this.edgeDetectionMaterial.edgeDetectionThreshold=t}setOrthogonalSearchSteps(t){this.weightsMaterial.orthogonalSearchSteps=t}applyPreset(t){let i=this.edgeDetectionMaterial,r=this.weightsMaterial;switch(t){case xh.LOW:i.edgeDetectionThreshold=.15,r.orthogonalSearchSteps=4,r.diagonalDetection=!1,r.cornerDetection=!1;break;case xh.MEDIUM:i.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=8,r.diagonalDetection=!1,r.cornerDetection=!1;break;case xh.HIGH:i.edgeDetectionThreshold=.1,r.orthogonalSearchSteps=16,r.diagonalSearchSteps=8,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break;case xh.ULTRA:i.edgeDetectionThreshold=.05,r.orthogonalSearchSteps=32,r.diagonalSearchSteps=16,r.cornerRounding=25,r.diagonalDetection=!0,r.cornerDetection=!0;break}}setDepthTexture(t,i=To){this.edgeDetectionMaterial.depthBuffer=t,this.edgeDetectionMaterial.depthPacking=i}update(t,i,r){this.clearPass.render(t,this.renderTargetEdges),this.edgeDetectionPass.render(t,i,this.renderTargetEdges),this.weightsPass.render(t,this.renderTargetEdges,this.renderTargetWeights)}setSize(t,i){this.edgeDetectionMaterial.setSize(t,i),this.weightsMaterial.setSize(t,i),this.renderTargetEdges.setSize(t,i),this.renderTargetWeights.setSize(t,i)}dispose(){let{searchTexture:t,areaTexture:i}=this.weightsMaterial;t!==null&&i!==null&&(t.dispose(),i.dispose()),super.dispose()}static get searchImageDataURL(){return j9}static get areaImageDataURL(){return U9}},yre=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,V_={DEFAULT:0,ESKIL:1},bre=class extends Ul{constructor({blendFunction:t=Fi.NORMAL,technique:i=V_.DEFAULT,eskil:r=!1,offset:s=.5,darkness:l=.5}={}){super("VignetteEffect",yre,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",i.toFixed(0)]]),uniforms:new Map([["offset",new Ye(s)],["darkness",new Ye(l)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===V_.ESKIL}set eskil(t){this.technique=t?V_.ESKIL:V_.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}},bfe=[new Float32Array(3),new Float32Array(3)],wfe=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],xfe=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]],_fe=[new Float32Array(2),new Float32Array(2)],kfe=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),Sfe=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],Afe=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],Cfe=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])],Efe=new Map([[va(0,0,0,0),new Float32Array([0,0,0,0])],[va(0,0,0,1),new Float32Array([0,0,0,1])],[va(0,0,1,0),new Float32Array([0,0,1,0])],[va(0,0,1,1),new Float32Array([0,0,1,1])],[va(0,1,0,0),new Float32Array([0,1,0,0])],[va(0,1,0,1),new Float32Array([0,1,0,1])],[va(0,1,1,0),new Float32Array([0,1,1,0])],[va(0,1,1,1),new Float32Array([0,1,1,1])],[va(1,0,0,0),new Float32Array([1,0,0,0])],[va(1,0,0,1),new Float32Array([1,0,0,1])],[va(1,0,1,0),new Float32Array([1,0,1,0])],[va(1,0,1,1),new Float32Array([1,0,1,1])],[va(1,1,0,0),new Float32Array([1,1,0,0])],[va(1,1,0,1),new Float32Array([1,1,0,1])],[va(1,1,1,0),new Float32Array([1,1,1,0])],[va(1,1,1,1),new Float32Array([1,1,1,1])]]);function n4(t,i,r){return t+(i-t)*r}function va(t,i,r,s){let l=n4(t,i,.75),d=n4(r,s,1-.25);return n4(l,d,1-.125)}var Fd=class{constructor(t,i){this.enabled=!1,this.effect=new t(i),Object.defineProperty(this,"opacity",{enumerable:!0,set(r){this.effect.blendMode.opacity.value=r},get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set(r){this.effect.blendMode.setBlendFunction(Number(r))},get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=Fi.NORMAL}},wre=class extends Fd{constructor(){super(ere),this.blendFunction=Fi.SCREEN}set intensity(t){this.effect.intensity=t}get intensity(){return this.effect.intensity}set luminanceThreshold(t){this.effect.luminanceMaterial.threshold=t}get luminanceThreshold(){return this.effect.luminanceMaterial.threshold}set luminanceSmoothing(t){this.effect.luminanceMaterial.smoothing=t}get luminanceSmoothing(){return this.effect.luminanceMaterial.smoothing}set blurScale(t){this.effect.blurPass.scale=t}get blurScale(){return this.effect.blurPass.scale}set kernelSize(t){this.effect.blurPass.kernelSize=t}get kernelSize(){return this.effect.blurPass.kernelSize}},xre=class extends Fd{constructor(){super(ire)}set contrast(t){this.effect.uniforms.get("contrast").value=t}get contrast(){return this.effect.uniforms.get("contrast").value}set brightness(t){this.effect.uniforms.get("brightness").value=t}get brightness(){return this.effect.uniforms.get("brightness").value}},_re=class extends Fd{constructor(){super(ore),this.effect.offset=new q(.01,.01)}set offset(t){this.effect.offset.set(t[0]/1e3,t[1]/1e3)}get offset(){return[this.effect.offset.x*1e3,this.effect.offset.y*1e3]}},kre=class extends Fd{constructor(){super(rre)}},Sre=class extends Fd{constructor(){super(ure),this._hue=0}set hue(t){this._hue=t,this.effect.setHue(t)}get hue(){return this._hue}set saturation(t){this.effect.uniforms.get("saturation").value=t}get saturation(){return this.effect.uniforms.get("saturation").value}},Are=class extends Fd{constructor(){super(fre),this.blendFunction=Fi.OVERLAY}},Cre=class extends Fd{constructor(){super(bre)}get eskil(){return this.effect.eskil}set eskil(t){this.effect.eskil=t}get darkness(){return this.effect.uniforms.get("darkness").value}set darkness(t){this.effect.uniforms.get("darkness").value=t}get offset(){return this.effect.uniforms.get("offset").value}set offset(t){this.effect.uniforms.get("offset").value=t}},Ere=class extends Fd{constructor(t){super(dre,t)}set focalLength(t){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=t}get focalLength(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value}set focusDistance(t){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=t}get focusDistance(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value}get bokehScale(){return this.effect.bokehScale}set bokehScale(t){this.effect.bokehScale=t}},Mre=class extends Fd{constructor(){super(mre)}get granularity(){return this.effect.getGranularity()}set granularity(t){this.effect.setGranularity(t)}},Tre=`#define GLSLIFY 1
varying vec2 vUv;varying vec2 vTexCoords[9];uniform vec2 resolution;void main(){vUv=position.xy*0.5+0.5;vec2 texelSize=vec2(1.0)/resolution;vTexCoords[0]=vUv+vec2(-texelSize.x,-texelSize.y);vTexCoords[1]=vUv+vec2(0.0,-texelSize.y);vTexCoords[2]=vUv+vec2(texelSize.x,-texelSize.y);vTexCoords[3]=vUv+vec2(-texelSize.x,0.0);vTexCoords[4]=vUv+vec2(0.0,0.0);vTexCoords[5]=vUv+vec2(texelSize.x,0.0);vTexCoords[6]=vUv+vec2(-texelSize.x,texelSize.y);vTexCoords[7]=vUv+vec2(0.0,texelSize.y);vTexCoords[8]=vUv+vec2(texelSize.x,texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}`,Dre=`#define GLSLIFY 1
#include <common>
varying vec2 vUv;varying vec2 vTexCoords[9];uniform sampler2D inputBuffer;uniform sampler2D historyBuffer;uniform sampler2D velocityBuffer;uniform sampler2D depthBuffer;uniform vec2 resolution;
#define USE_YCOCG
#define USE_CATMULL_ROM
const float feedback_min=0.5;const float feedback_max=0.95;vec3 RGB_YCoCg(vec3 c){return vec3(c.x/4.0+c.y/2.0+c.z/4.0,c.x/2.0-c.z/2.0,-c.x/4.0+c.y/2.0-c.z/4.0);}vec3 YCoCg_RGB(vec3 c){return clamp(vec3(c.x+c.y-c.z,c.x+c.z,c.x-c.y-c.z),vec3(0.0),vec3(1.0));}vec4 sample_color(sampler2D tex,vec2 uv){
#ifdef USE_YCOCG
vec4 c=texture(tex,uv);return vec4(RGB_YCoCg(c.rgb),c.a);
#else
return texture(tex,uv);
#endif
}vec4 sample_catmull_rom(sampler2D tex,vec2 uv,vec2 texSize){vec2 samplePos=uv*texSize;vec2 texPos1=floor(samplePos-0.5)+0.5;vec2 f=samplePos-texPos1;vec2 w0=f*(-0.5+f*(1.0-0.5*f));vec2 w1=1.0+f*f*(-2.5+1.5*f);vec2 w2=f*(0.5+f*(2.0-1.5*f));vec2 w3=f*f*(-0.5+0.5*f);vec2 w12=w1+w2;vec2 offset12=w2/(w1+w2);vec2 texPos0=texPos1-1.0;vec2 texPos3=texPos1+2.0;vec2 texPos12=texPos1+offset12;texPos0/=texSize;texPos3/=texSize;texPos12/=texSize;vec4 result=vec4(0.0);result+=texture2D(tex,vec2(texPos12.x,texPos0.y))*w12.x*w0.y;result+=texture2D(tex,vec2(texPos0.x,texPos12.y))*w0.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos12.y))*w12.x*w12.y;result+=texture2D(tex,vec2(texPos3.x,texPos12.y))*w3.x*w12.y;result+=texture2D(tex,vec2(texPos12.x,texPos3.y))*w12.x*w3.y;return result;}vec3 choose_motion_vector(){
#ifdef CHOOSE_LONGEST_MOTION_VECTOR
float longest=-1.0;vec3 v_choose=vec3(-1.0);for(int i=0;i<9;i++){vec3 v=texture2D(velocityBuffer,vTexCoords[i]).rgb;float l=length(v.xy);if(l>longest){longest=l;v_choose=v;}}return v_choose;
#else
float closest_depth=1000.0;vec2 closest_uv_offset=vec2(0.0);for(int i=0;i<9;i++){float neighbor_depth=texture2D(depthBuffer,vTexCoords[i]).r;if(neighbor_depth<closest_depth){closest_uv_offset=vTexCoords[i];closest_depth=neighbor_depth;}}return texture2D(velocityBuffer,closest_uv_offset).rgb;
#endif
}vec4 clipAabb(vec3 aabb_min,vec3 aabb_max,vec4 avg,vec4 input_texel){const float FLT_EPS=0.00000001;vec3 p_clip=0.5*(aabb_max+aabb_min);vec3 e_clip=0.5*(aabb_max-aabb_min)+FLT_EPS;vec4 v_clip=input_texel-vec4(p_clip,avg.w);vec3 v_unit=v_clip.xyz/e_clip;vec3 a_unit=abs(v_unit);float ma_unit=max(a_unit.x,max(a_unit.y,a_unit.z));if(ma_unit>1.0){return vec4(p_clip,avg.w)+v_clip/ma_unit;}else{return input_texel;}}vec3 clip_aabb_variance(in vec3 cOld,in vec3 cNew,in vec3 centre,in vec3 halfSize){if(all(lessThanEqual(abs(cOld-centre),halfSize))){return cOld;}vec3 dir=(cNew-cOld);vec3 near=centre-sign(dir)*halfSize;vec3 tAll=(near-cOld)/dir;float t=0.0001;for(int i=0;i<3;i++){if(tAll[i]>=0.0&&tAll[i]<t){t=tAll[i];}}if(t>=0.0001){return cOld;}return cOld+dir*t;}void main(){vec3 v=choose_motion_vector();vec2 velocity=v.rg;vec2 previousPixelPos=vUv-velocity;vec4 currentColor=sample_color(inputBuffer,vUv);
#ifdef USE_CATMULL_ROM
vec4 previousColor=sample_catmull_rom(historyBuffer,previousPixelPos,resolution);
#else
vec4 previousColor=sample_color(historyBuffer,previousPixelPos);
#endif
#ifdef USE_YCOCG
previousColor=vec4(RGB_YCoCg(previousColor.rgb),previousColor.a);
#endif
vec4 ctl=sample_color(inputBuffer,vTexCoords[0]);vec4 ctc=sample_color(inputBuffer,vTexCoords[1]);vec4 ctr=sample_color(inputBuffer,vTexCoords[2]);vec4 cml=sample_color(inputBuffer,vTexCoords[3]);vec4 cmc=sample_color(inputBuffer,vTexCoords[4]);vec4 cmr=sample_color(inputBuffer,vTexCoords[5]);vec4 cbl=sample_color(inputBuffer,vTexCoords[6]);vec4 cbc=sample_color(inputBuffer,vTexCoords[7]);vec4 cbr=sample_color(inputBuffer,vTexCoords[8]);vec4 cmin=min(ctl,min(ctc,min(ctr,min(cml,min(cmc,min(cmr,min(cbl,min(cbc,cbr))))))));vec4 cmax=max(ctl,max(ctc,max(ctr,max(cml,max(cmc,max(cmr,max(cbl,max(cbc,cbr))))))));vec4 cavg=(ctl+ctc+ctr+cml+cmc+cmr+cbl+cbc+cbr)/9.0;vec4 cmin5=min(ctc,min(cml,min(cmc,min(cmr,cbc))));vec4 cmax5=max(ctc,max(cml,max(cmc,max(cmr,cbc))));vec4 cavg5=(ctc+cml+cmc+cmr+cbc)/5.0;cmin=0.5*(cmin+cmin5);cmax=0.5*(cmax+cmax5);cavg=0.5*(cavg+cavg5);
#ifdef USE_YCOCG
vec2 chroma_extent=vec2(0.25*0.5*(cmax.r-cmin.r));vec2 chroma_center=currentColor.gb;cmin.yz=chroma_center-chroma_extent;cmax.yz=chroma_center+chroma_extent;cavg.yz=chroma_center;
#endif
vec4 previousColorClipped=clamp(previousColor,cmin,cmax);
#ifdef LUMINANCE_DIFFERENCES
#ifdef USE_YCOCG
float lum0=currentColor.r;float lum1=previousColorClipped.r;
#else
float lum0=luminance(currentColor.rgb);float lum1=luminance(previousColorClipped.rgb);
#endif
float unbiased_diff=abs(lum0-lum1)/max(lum0,max(lum1,0.2));float unbiased_weight=1.0-unbiased_diff;float unbiased_weight_sqr=unbiased_weight*unbiased_weight;float k_feedback=mix(feedback_min,feedback_max,unbiased_weight_sqr);vec4 result=mix(currentColor,previousColorClipped,vec4(k_feedback));
#else
const float alpha=0.1;vec4 result=mix(currentColor,previousColorClipped,1.0-alpha);
#endif
#ifdef USE_YCOCG
gl_FragColor=vec4(YCoCg_RGB(result.rgb).rgb,result.a);
#else
gl_FragColor=result;
#endif
}`,Pre=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position.xy,1.0,1.0);vUv=position.xy*0.5+0.5;}`,Ore=`#define GLSLIFY 1
layout(location=1)out vec4 gVelocity;varying vec2 vUv;uniform sampler2D inputBuffer;void main(){gl_FragColor=texture2D(inputBuffer,vUv);gVelocity=vec4(0.0);}`,r4=class extends gn{constructor(){super({name:"PassthroughMaterial",uniforms:{inputBuffer:new Ye(null)},blending:$n,depthWrite:!1,depthTest:!1,vertexShader:Pre,fragmentShader:Ore})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}},Ire=class extends Za{constructor(){super("TAAResolvePass"),this.MRTCompatible=!0,this.needsSwap=!1,this.passThroughMaterial=new r4,this.resolutionVector=new q,this.resolveMaterial=new gn({name:"TAAResolveMaterial",uniforms:{inputBuffer:new Ye(null),historyBuffer:new Ye(null),velocityBuffer:new Ye(null),depthBuffer:new Ye(null),resolution:new Ye(new q)},blending:$n,depthWrite:!1,depthTest:!1,vertexShader:Tre,fragmentShader:Dre}),this.historyRenderTarget=new Oi(1024,1024,{minFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.historyRenderTarget.texture.name="TAA.History",this.resultRenderTarget=new Oi(1024,1024,{minFilter:yi,stencilBuffer:!1,depthBuffer:!1}),this.resultRenderTarget.texture.name="TAA.Output"}setSize(t,i){this.historyRenderTarget.setSize(t,i),this.resultRenderTarget.setSize(t,i)}render(t,i){this.fullscreenMaterial=this.resolveMaterial,this.resolveMaterial.uniforms.inputBuffer.value=i.texture[0],this.resolveMaterial.uniforms.velocityBuffer.value=i.texture[1],this.resolveMaterial.uniforms.depthBuffer.value=i.depthTexture,this.resolveMaterial.uniforms.historyBuffer.value=this.historyRenderTarget.texture,this.resolveMaterial.uniforms.resolution.value.set(i.width,i.height),t.setRenderTarget(this.resultRenderTarget),t.render(this.scene,this.camera),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,t.setRenderTarget(this.historyRenderTarget),t.render(this.scene,this.camera);let r=this.renderToScreen?null:i;this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=this.resultRenderTarget.texture,t.setRenderTarget(r),t.render(this.scene,this.camera)}dispose(){this.resultRenderTarget.dispose(),this.historyRenderTarget.dispose(),this.resolveMaterial.dispose(),this.passThroughMaterial.dispose()}},Rre=class extends Za{constructor(t,i,r){super("TransmissionPass",void 0,i),this.MRTCompatible=!0,this.depthPass=new B9(t,i,{renderTarget:r.transmissionDepthTarget}),this.passThroughMaterial=new r4,this.splineScene=t,this.needsSwap=!1}updatePasses(t){this.passThroughMaterial=new r4,this.depthPass=new B9(this.splineScene,this.camera,{renderTarget:t.transmissionDepthTarget})}setCamera(t){this.camera=t}setScene(t){this.splineScene=t}render(t,i,r){let s=this.camera.layers.mask,l=t;l.setRenderTarget(l.transmissionRenderTarget),this.fullscreenMaterial=this.passThroughMaterial,this.passThroughMaterial.inputBuffer=i.texture[0],l.clear(),l.render(this.scene,this.camera),this.camera.layers.disable(3),this.depthPass.render(t,i,r),l.shadowMap.needsUpdate=!1,l.shadowMap.autoUpdate=!1;let d=this.renderToScreen?null:i;this.camera.layers.set(3),t.setRenderTarget(d),t.render(this.splineScene,this.camera),this.camera.layers.mask=s}},H9=new Ac,zre=new gn({transparent:!0,vertexShader:`
        void main() {
            gl_Position = vec4(0.0);
        }
    `,fragmentShader:`
        layout(location = 1) out vec4 gVelocity;

        void main() {
            gl_FragColor = vec4(0.0);
			gVelocity = vec4(0.0);
        }
    `}),a4=class extends Za{constructor(t,i,r){super("OpaquePass",i!=null?i:H9,r),this.MRTCompatible=!0,this.hasTransmissionPass=!1,this.clear=!0,this.clearColorOnly=!1,this.clearDepth=!1,this.needsSwap=!1,this.originalMaterials=new Map,this.MRTCompatible=t}set splatViewer(t){this._splatViewer=t}get splatViewer(){return this._splatViewer}setCamera(t){this.camera=t}setScene(t){this.scene=t!=null?t:H9}getScene(){return this.scene}render(t,i){var s;this.camera.layers.enable(3),this.hasTransmissionPass&&(this.originalMaterials.clear(),this.scene.traverse(l=>{l.layers.isEnabled(3)&&l instanceof ds&&(this.originalMaterials.set(l.id,l.material),l.material=zre)}),t.shadowMap.needsUpdate=!0,t.shadowMap.autoUpdate=!0),this.camera.layers.enable(8);let r=this.renderToScreen?null:i;if(t.setRenderTarget(r),this.clearColorOnly&&t.clear(!0,!1,!0),this.clear&&t.clear(),((s=this._splatViewer)==null?void 0:s.splatRenderingInitialized)===!0){let l=t.autoClear;t.autoClear=!1,t.render(this.scene,this.camera),this._splatViewer.update(),t.render(this._splatViewer.splatMesh,this.camera),t.autoClear=l}else t.render(this.scene,this.camera);this.clearDepth&&t.clear(!1,!0,!1),this.hasTransmissionPass&&this.originalMaterials.forEach((l,d)=>{let c=this.scene.getObjectById(d);c&&(c.material=l)})}},Lre=class{constructor(t,{depthBuffer:i=!0,stencilBuffer:r=!1,multisampling:s=0,frameBufferType:l=0}={}){this.renderer=t,this.helperStartIndex=0,this.copyPass=new KM,this.depthTexture=null,this.timer=new Qne,this._width=1,this._height=1,this.passes=[],this.helperPasses=[],this.autoRenderToScreen=!0,this.inputBuffer=this.createBuffer(i,r,l,s,!0,"input buffer mrt"),this.inputBufferSingle=this.createBuffer(i,r,l,s,!1," input buffer single"),this.inputBufferSingle.texture.dispose(),this.inputBufferSingle.depthTexture.dispose(),this.inputBufferSingle.texture=this.inputBuffer.texture[0],this.inputBufferSingle.depthTexture=this.inputBuffer.depthTexture,this.outputBuffer=this.inputBuffer.clone(),this.outputBuffer.name="output buffer mrt",this.outputBufferSingle=this.createBuffer(i,r,l,s,!1,"output buffer single"),this.outputBufferSingle.texture.dispose(),this.outputBufferSingle.depthTexture.dispose(),this.outputBufferSingle.texture=this.outputBuffer.texture[0],this.outputBufferSingle.depthTexture=this.outputBuffer.depthTexture,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){let i=this.inputBuffer,r=this.multisampling;r>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("creating new input buffer"),this.inputBuffer=this.createBuffer(i.depthBuffer,i.stencilBuffer,i.texture.type,t,!0,"new input buffer"),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){var i,r;if(this.renderer=t,t!==null){let s=t.getSize(new q),l=(r=(i=t.getContext().getContextAttributes())==null?void 0:i.alpha)!=null?r:!1,d=this.inputBuffer.texture[0].type;d===Nr&&t.outputEncoding===ci&&(this.inputBuffer.texture[0].encoding=ci,this.outputBuffer.texture[0].encoding=ci,this.inputBuffer.dispose(),this.outputBuffer.dispose(),console.log("doing some kinda dispose??")),t.autoClear=!1,this.setSize(s.width,s.height,!1);for(let c of this.passes)c.initialize(t,l,d)}}replaceRenderer(t,i=!0){let r=this.renderer,s=r.domElement.parentNode;return this.setRenderer(t),i&&s!==null&&(s.removeChild(r.domElement),s.appendChild(t.domElement)),r}createDepthTexture(){let t=this.depthTexture=new Qf(this._width,this._height);return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=pd,t.type=hd):t.type=Mo,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(let t of this.passes)t.setDepthTexture(null)}}createBuffer(t,i,r,s,l,d){let c=this.renderer,u=c===null?new q:c.getDrawingBufferSize(new q),h={minFilter:yi,magFilter:yi,wrapS:Nn,wrapT:Nn,stencilBuffer:i,depthBuffer:t},f;return s>0?(f=new Oi(u.width,u.height,h),f.samples=s):(l?(f=new gl(u.width,u.height,2,h),f.texture[1].type=yc):f=new Oi(u.width,u.height,h),f.depthTexture=new Qf(2048,2048),f.depthTexture.type=ia),r===Nr&&c!==null&&c.outputEncoding===ci&&(Array.isArray(f.texture)?f.texture.forEach(m=>m.encoding=ci):f.texture.encoding=ci),Array.isArray(f.texture)?f.texture.forEach((m,p)=>{m.name=`EffectComposer.Buffer ${l} ${p}`,m.generateMipmaps=!1}):(f.texture.name=`EffectComposer.Buffer ${l}`,f.texture.generateMipmaps=!1),f.name=d,f}addPass(t,i){var u,h;let r=this.passes,s=this.renderer,l=s.getDrawingBufferSize(new q),d=(h=(u=s.getContext().getContextAttributes())==null?void 0:u.alpha)!=null?h:!1,c;if(t.MRTCompatible&&(c=this.inputBuffer.texture[0].type),t.MRTCompatible||(c=this.inputBuffer.texture.type),t.setRenderer(s),t.setSize(l.width,l.height),t.initialize(s,d,c),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),i!==void 0?r.splice(i,0,t):r.push(t),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){let f=this.createDepthTexture();for(t of r)t.setDepthTexture(f)}else t.setDepthTexture(this.depthTexture)}setHelperStartIndex(t){this.helperStartIndex=t}removePass(t){let i=this.passes,r=i.indexOf(t);if(r!==-1&&i.splice(r,1).length>0){if(this.depthTexture!==null){let s=(l,d)=>l||d.needsDepthTexture;i.reduce(s,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===i.length&&(t.renderToScreen=!1,i.length>0&&(i[i.length-1].renderToScreen=!0))}}removeAllPasses(){let t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){let i=this.renderer,r=this.copyPass,s=this.inputBuffer,l=this.outputBuffer,d=this.inputBufferSingle,c=this.outputBufferSingle,u=!1,h,f,m,p;t===void 0&&(t=this.timer.update().getDelta());for(let g of this.passes)g.enabled&&(g.MRTCompatible?g.render(i,s,l,t,u):g.render(i,d,c,t,u),g.needsSwap&&(u&&(r.renderToScreen=g.renderToScreen,h=i.getContext(),f=i.state.buffers.stencil,f.setFunc(h.NOTEQUAL,1,4294967295),r.render(i,s,l,t,u),f.setFunc(h.EQUAL,1,4294967295)),m=s,p=d,s=l,d=c,l=m,c=p),g instanceof Xne?u=!0:g instanceof Ane&&(u=!1))}setSize(t,i,r){let s=this.renderer;if(this._width=t,this._height=i,t===void 0||i===void 0){let d=s.getSize(new q);t=d.width,i=d.height}s.setSize(t,i,r);let l=s.getDrawingBufferSize(new q);this.inputBuffer.setSize(l.width,l.height),this.outputBuffer.setSize(l.width,l.height),this.inputBufferSingle.setSize(l.width,l.height),this.outputBufferSingle.setSize(l.width,l.height);for(let d of this.passes)d.setSize(l.width,l.height)}reset(){let t=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(t)}dispose(){for(let t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.inputBufferSingle!==null&&this.inputBufferSingle.dispose(),this.outputBufferSingle!==null&&this.outputBufferSingle.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Bre=new gn({name:"CombineMaterial",uniforms:{inputBufferA:new Ye(null),inputBufferB:new Ye(null)},blending:$n,depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
    gl_Position = vec4(position.xy, 1.0, 1.0);
    vUv = position.xy * 0.5 + 0.5;
}
`,fragmentShader:`
    varying vec2 vUv;
    uniform sampler2D inputBufferA;
    uniform sampler2D inputBufferB;

    // TODO: Why do we need these when postpro of framemode is enabled???
    layout(location = 1) out vec4 gVelocity;

    void main() {
	vec4 resA = texture2D(inputBufferA, vUv);
	vec4 resB = texture2D(inputBufferB, vUv);
    float a = resA.a + resB.a * ( 1.0 - resA.a );

	vec4 res;
	res.rgb =  resA.rgb + (resB.rgb * (1.0 - resA.a));
	res.a = resA.a + resB.a * (1.0 - resA.a);
	gl_FragColor = res;
    gVelocity = vec4(0.0);
    }
`}),Fre=class extends Za{constructor(t){super("HelperPass",void 0,t),this.MRTCompatible=!1,this.fullscreenMaterial=Bre,this.helperPass=new a4(!1,void 0,this.camera),this.helperPass.hasTransmissionPass=!1,this.helperPass.clear=!1,this.helperPass.renderToScreen=!1,this.helperPassOnTop=new a4(!1,void 0,this.camera),this.helperPassOnTop.hasTransmissionPass=!1,this.helperPassOnTop.clear=!1,this.helperPassOnTop.renderToScreen=!1;let i=new V9({preset:xh.LOW,edgeDetectionMode:j_.COLOR});this.effectPass=new U_(this.camera,i),this.rt=new Oi(10,10,{minFilter:yi,magFilter:yi,wrapS:Nn,wrapT:Nn,depthBuffer:!0})}setSize(t,i){this.rt.setSize(t,i),this.effectPass.setSize(t,i)}set sceneHelpers(t){this.helperPass.setScene(t)}get sceneHelpers(){return this.helperPass.getScene()}set sceneHelpersOnTop(t){this.helperPassOnTop.setScene(t)}get sceneHelpersOnTop(){return this.helperPassOnTop.getScene()}setCamera(t){this.helperPass.setCamera(t),this.helperPassOnTop.setCamera(t)}initialize(t,i,r){super.initialize(t,i,r),this.effectPass.initialize(t,i,r)}dispose(){super.dispose(),this.rt.dispose(),this.effectPass.dispose()}render(t,i,r){this.rt.depthTexture=i.depthTexture;let s=t.getClearAlpha();t.setClearAlpha(0),this.helperPass.clearDepth=!0,this.helperPass.clearColorOnly=!0,this.helperPass.render(t,this.rt),this.helperPassOnTop.render(t,this.rt),this.effectPass.renderToScreen=!1,this.effectPass.render(t,this.rt,r),this.fullscreenMaterial.uniforms.inputBufferA.value=r.texture,this.fullscreenMaterial.uniforms.inputBufferB.value=i.texture,t.setClearAlpha(s),t.setRenderTarget(null),t.clear(),t.render(this.scene,this.camera)}},Nre=`#define GLSLIFY 1
#include <skinning_pars_vertex>
out vec3 n;void main(){
#include <beginnormal_vertex>
#include <skinbase_vertex>
#include <skinnormal_vertex>
#include <defaultnormal_vertex>
#include <begin_vertex>
#include <skinning_vertex>
vec4 view_space=viewMatrix*modelMatrix*vec4(transformed,1.0);gl_Position=projectionMatrix*view_space;n=normalize(transformedNormal);}`,jre=`#define GLSLIFY 1
in vec3 n;void main(){gl_FragColor=vec4(n,1.0);}`,Ure=`#define GLSLIFY 1
out vec2 v_uv;void main(){v_uv=uv;gl_Position=vec4(position.xy,1.0,1.0);}`,Vre=`#define GLSLIFY 1
in vec2 v_uv;const float pi=3.14159265;const float num_steps=4.0;const float num_directions=4.0;uniform float near;uniform float far;uniform float fov;uniform vec4 proj_info;uniform bool is_ortho;uniform vec2 resolution;uniform float radius_of_influence;uniform float radius_in_screen_space;uniform float exponent;uniform vec3 ao_color;uniform float bias;uniform sampler2D texture_depth;uniform sampler2D texture_normals;uniform sampler2D texture_blue_noise;uniform sampler2D texture_blue_noise_in_disk;uniform sampler2D texture_color_pass;uniform int frame_index;uniform bool fog_enabled;uniform float fog_near;uniform float fog_far;vec3 uv_to_view_space(vec2 uv,float eye_z){return vec3((uv*proj_info.xy+proj_info.zw)*(is_ortho ? 1.0 : eye_z),eye_z);}float linearize_depth(float depth_sampled){float z=is_ortho ? depth_sampled : depth_sampled*2.0-1.0;return mix((2.0*near*far)/(far+near-z*(far-near)),near+z*(far-near),float(is_ortho));}vec3 get_view_position(vec2 uv_coords){float linear_depth=linearize_depth(texture(texture_depth,uv_coords).x);return uv_to_view_space(uv_coords,linear_depth);}vec3 min_difference(vec3 p,vec3 right,vec3 left){vec3 v1=right-p;vec3 v2=p-left;return(dot(v1,v1)<dot(v2,v2))? v1 : v2;}vec3 rebuild_normal(in vec2 uv,in vec3 p){vec2 one_over_resolution=1.0/resolution;vec3 r=get_view_position(uv+vec2(one_over_resolution.x,0));vec3 l=get_view_position(uv+vec2(-one_over_resolution.x,0));vec3 t=get_view_position(uv+vec2(0,one_over_resolution.y));vec3 b=get_view_position(uv+vec2(0,-one_over_resolution.y));return normalize(cross(min_difference(p,r,l),min_difference(p,t,b)));}float falloff(float distance_squared){float neg_inv_r2=-1.0/(radius_of_influence*radius_of_influence);return distance_squared*neg_inv_r2+1.0;}float ao_contribution(vec3 P,vec3 N,vec3 S){vec3 to_sample=S-P;float norm_squared=dot(to_sample,to_sample);float norm=sqrt(norm_squared);float cos_theta=dot(N,to_sample)/norm;return clamp(cos_theta-bias,0.0,1.0)*clamp(falloff(norm_squared),0.0,1.0);}float compute_ambient_occlusion(vec2 uv,float radius_in_screen_space,vec3 pc,vec3 view_space_n){vec2 one_over_resolution=1.0/resolution;ivec2 noise_uv=ivec2(int(mod(gl_FragCoord.x,128.0)),int(mod(gl_FragCoord.y,128.0)));float noise=texelFetch(texture_blue_noise,noise_uv,0).r;noise=fract(noise+0.61803398875*float(frame_index));float theta=noise*2.0*3.1415;float ct=cos(theta);float st=sin(theta);float step_size=radius_in_screen_space/(num_steps+1.0);const float angle_step=2.0*pi/num_directions;float contribution=0.0;for(int i=0;i<int(num_directions);++i){float current_pixel=step_size+1.0;for(int j=0;j<int(num_steps);++j){int index=i*int(num_steps)+j;vec2 blue_noise_sample=texelFetch(texture_blue_noise_in_disk,ivec2(index,0),0).rg;vec2 disk_point;disk_point.x=blue_noise_sample.x*ct-blue_noise_sample.y*st;disk_point.y=blue_noise_sample.x*st+blue_noise_sample.y*ct;vec2 sample_direction=disk_point;vec2 snapped_uv=round(current_pixel*sample_direction)*one_over_resolution+uv;vec3 ps=get_view_position(snapped_uv);current_pixel+=step_size;contribution+=ao_contribution(pc,view_space_n,ps);}}float mult=1.0/(1.0-bias);contribution*=mult/(num_directions*num_steps);return clamp(1.0-contribution*2.0,0.0,1.0);}
#define USE_GBUFFER_NORMALS
void main(){vec3 view_space_p=get_view_position(v_uv);
#ifdef USE_GBUFFER_NORMALS
vec3 view_space_n=texture(texture_normals,v_uv).rgb;view_space_n.z*=-1.0;
#else
vec3 view_space_n=-rebuild_normal(v_uv,view_space_p);
#endif
float radius_ss=radius_in_screen_space/(is_ortho ? 1.0 : view_space_p.z);float ao=compute_ambient_occlusion(v_uv,radius_ss,view_space_p,view_space_n);float final=pow(ao,exponent);if(view_space_p.z>=far){final=1.0;}vec3 color=mix(ao_color,vec3(1.0),final);if(fog_enabled){float fog_factor=smoothstep(fog_near,fog_far,view_space_p.z);color=mix(color,vec3(1.0),fog_factor);}gl_FragColor=vec4(color,1.0);}`,Hre=`#define GLSLIFY 1
out vec2 v_uv;void main(){gl_Position=vec4(position.xy,1.0,1.0);v_uv=uv;}`,Gre=`#define GLSLIFY 1
in vec2 v_uv;uniform sampler2D texture_ao_lrez;uniform sampler2D texture_depth_lrez;uniform sampler2D texture_depth_hrez;uniform float near;uniform float far;float linearize_depth(float depth_sampled){float z=depth_sampled*2.0-1.0;return(2.0*near*far)/(far+near-z*(far-near));}vec2 nearest_depth_filter(in vec2 uv){vec2 resolution=vec2(textureSize(texture_depth_lrez,0));vec2 texel_size=1.0/resolution;vec2 offset=uv-0.5*texel_size;float d_hrez=texture(texture_depth_hrez,uv).r;float a=abs(d_hrez-texture(texture_depth_lrez,offset).r);float b=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,0.0)).r);float c=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(0.0,texel_size.y)).r);float d=abs(d_hrez-texture(texture_depth_lrez,offset+vec2(texel_size.x,texel_size.y)).r);float min_diff=min(a,min(b,min(c,d)));if(min_diff==a)return offset;if(min_diff==b)return offset+vec2(texel_size.x,0.0);if(min_diff==c)return offset+vec2(0.0,texel_size.y);if(min_diff==d)return offset+vec2(texel_size.x,texel_size.y);}void main(){
#ifdef DEBUG
float d_lrez=texture(texture_depth_lrez,v_uv).r;float d_hrez=texture(texture_depth_hrez,v_uv).r;float output_d=mix(linearize_depth(d_lrez)/far,linearize_depth(d_hrez)/far,step(0.5,v_uv.x));gl_FragColor=vec4(vec3(output_d),1.0);
#else
vec2 filtered_uv=nearest_depth_filter(v_uv);vec4 ao=texture(texture_ao_lrez,filtered_uv);gl_FragColor=vec4(ao.rgb,1.0);gl_FragColor=ao;
#endif
}`,M0=[[.478712,.875764],[-.337956,-.793959],[-.955259,-.028164],[.864527,.325689],[.209342,-.395657],[-.106779,.672585],[.156213,.235113],[-.413644,-.082856],[-.415667,.323909],[.141896,-.93998],[.954932,-.182516],[-.766184,.410799],[-.434912,-.458845],[.415242,-.078724],[.728335,-.491777],[-.058086,-.066401],[.20299,.686837],[-.808362,-.556402],[.507386,-.640839],[-.723494,-.22924],[.48974,.317826],[-.622663,.765301],[-.01064,.929347],[.663146,.647618],[-.096674,-.413835],[.525945,-.321063],[-.122533,.366019],[.195235,-.687983],[-.563203,.098748],[.418563,.561335],[-.378595,.800367],[.826922,.001024],[-.085372,-.766651],[-.92192,.183673],[-.590008,-.721799],[.167751,-.164393],[.032961,-.56253],[.6329,-.107059],[-.46408,.569669],[-.173676,-.958758],[-.242648,-.234303],[-.275362,.157163],[.382295,-.795131],[.562955,.115562],[.190586,.470121],[.770764,-.297576],[.237281,.93105],[-.666642,-.455871],[-.905649,-.298379],[.33952,.157829],[.701438,-.7041],[-.062758,.160346],[-.220674,.957141],[.642692,.432706],[-.77339,-.015272],[-.671467,.24688],[.158051,.062859],[.806009,.527232],[-.05762,-.247071],[.333436,-.51671],[-.550658,-.315773],[-.652078,.589846],[.008818,.530556],[-.210004,.519896]],Wre=new gn({vertexShader:Nre,fragmentShader:jre}),H_=new gn({vertexShader:Hre,fragmentShader:Gre,uniforms:{texture_ao_lrez:new Ye(null),texture_depth_lrez:new Ye(null),texture_depth_hrez:new Ye(null),near:new Ye(null),far:new Ye(null)}}),qre=class extends Za{constructor(t,i){super("AmbientOcclusionPass",void 0,i),this.fogEnabled=!1,this.fogNear=1,this.fogFar=1e3,this.frameIndex=0,this._runHalfRes=!0,this._width=1,this._height=1;let r=1024,s=1024;this.gBuffer=new Oi(r,s,{type:ia,depthTexture:new Qf(r,s),minFilter:yi,magFilter:yi}),this.depthBufferHighRes=new Oi(r,s,{depthTexture:new Qf(r,s)}),this.aoBuffer=new Oi(r,s,{minFilter:yi,magFilter:yi}),this.splineScene=t,this.splineCamera=i;let l=new Float32Array(M0.length*2);for(let c=0;c<M0.length;c++){let u=c*2;l[u+0]=M0[c][0],l[u+1]=M0[c][1]}this.blueNoiseInDiskTexture=new Cc(l,M0.length,1,Fu,ia),this.blueNoiseInDiskTexture.wrapS=Eo,this.blueNoiseInDiskTexture.wrapT=Eo,this.blueNoiseInDiskTexture.needsUpdate=!0,this.hbaoMaterial=new gn({vertexShader:Ure,fragmentShader:Vre,uniforms:{near:new Ye(null),far:new Ye(null),fov:new Ye(null),proj_info:new Ye(new ri),is_ortho:new Ye(!1),resolution:new Ye(new q),radius_of_influence:new Ye(8),radius_in_screen_space:new Ye(1),exponent:new Ye(1),ao_color:new Ye(new N),bias:new Ye(.5),texture_depth:new Ye(null),texture_normals:new Ye(null),texture_blue_noise:new Ye(null),texture_blue_noise_in_disk:new Ye(this.blueNoiseInDiskTexture),frame_index:new Ye(0),fog_enabled:new Ye(!1),fog_near:new Ye(1),fog_far:new Ye(1e3)}}),this.radius=128,this.aoColor={r:0,g:0,b:0},this.bias=.5,this.hbaoMaterial.uniforms.texture_depth.value=this.gBuffer.depthTexture,this.hbaoMaterial.uniforms.texture_normals.value=this.gBuffer.texture,this.needsSwap=!0,this.aaBuffer=new Oi(r,s,{minFilter:yi,magFilter:yi,wrapS:Nn,wrapT:Nn,depthBuffer:!1,type:ia});let d=new V9({preset:xh.ULTRA,edgeDetectionMode:j_.COLOR});this.effectPass=new U_(this.camera,d)}initialize(t,i,r){super.initialize(t,i,r),this.effectPass.initialize(t,i,r)}setBlueNoiseTexture(t){this.hbaoMaterial.uniforms.texture_blue_noise.value=t}setSize(t,i){this._width=t,this._height=i,this.depthBufferHighRes.setSize(t,i);let r=this._runHalfRes?.5:1,s=t*r,l=i*r;this.gBuffer.setSize(s,l),this.aoBuffer.setSize(s,l),this.hbaoMaterial.uniforms.resolution.value.set(s,l),this.aaBuffer.setSize(s,l),this.effectPass.setSize(s,l)}get runHalfRes(){return this._runHalfRes}set runHalfRes(t){this._runHalfRes=t,this.setSize(this._width,this._height)}setCamera(t){this.splineCamera=t}setScene(t){this.splineScene=t}render(t,i,r){this.splineScene.overrideMaterial=Wre;let s=this.splineCamera.layers.mask;if(this.splineCamera.layers.set(5),t.setRenderTarget(this.gBuffer),t.clear(),t.render(this.splineScene,this.splineCamera),t.setRenderTarget(this.depthBufferHighRes),t.clear(),t.render(this.splineScene,this.splineCamera),this.splineScene.overrideMaterial=null,this.splineCamera.layers.mask=s,this.hbaoMaterial.uniforms.radius_of_influence.value=this.radius,this.hbaoMaterial.uniforms.ao_color.value.set(this.aoColor.r,this.aoColor.g,this.aoColor.b),this.hbaoMaterial.uniforms.bias.value=this.bias,this.hbaoMaterial.uniforms.fog_enabled.value=this.fogEnabled,this.hbaoMaterial.uniforms.fog_near.value=this.fogNear,this.hbaoMaterial.uniforms.fog_far.value=this.fogFar,this.hbaoMaterial.uniforms.frame_index.value=this.frameIndex,this.frameIndex++,this.splineCamera.isPerspectiveCamera){this.hbaoMaterial.uniforms.near.value=this.splineCamera.perspCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.perspCamera.far;let l=this.splineCamera.perspCamera.projectionMatrix.elements,d=2/l[0],c=2/l[5],u=-(1-l[8])/l[0],h=-(1+l[9])/l[5];this.hbaoMaterial.uniforms.proj_info.value.set(d,c,u,h);let f=this.splineCamera.perspCamera.fov*(Math.PI/180),m=this.hbaoMaterial.uniforms.resolution.value.y/(Math.tan(f*.5)*2),p=this.hbaoMaterial.uniforms.radius_of_influence.value*.5*m;this.hbaoMaterial.uniforms.radius_in_screen_space.value=p,this.hbaoMaterial.uniforms.is_ortho.value=!1}else{this.hbaoMaterial.uniforms.near.value=this.splineCamera.orthoCamera.near,this.hbaoMaterial.uniforms.far.value=this.splineCamera.orthoCamera.far;let l=this.splineCamera.orthoCamera.projectionMatrix.elements,d=2/l[0],c=2/l[5],u=-(1+l[12])/l[0],h=-(1-l[13])/l[5];this.hbaoMaterial.uniforms.proj_info.value.set(d,c,u,h);let f=.5*(this.hbaoMaterial.uniforms.resolution.value.y/c),m=this.hbaoMaterial.uniforms.radius_of_influence.value*f;this.hbaoMaterial.uniforms.radius_in_screen_space.value=m,this.hbaoMaterial.uniforms.is_ortho.value=!0}this.runHalfRes?(this.fullscreenMaterial=this.hbaoMaterial,t.setRenderTarget(this.aoBuffer),t.clear(),t.render(this.scene,this.camera),this.fullscreenMaterial=H_,H_.uniforms.texture_ao_lrez.value=this.aoBuffer.texture,H_.uniforms.texture_depth_lrez.value=this.gBuffer.depthTexture,H_.uniforms.texture_depth_hrez.value=this.depthBufferHighRes.depthTexture,t.setRenderTarget(t.aoRenderTarget),t.clear(),t.render(this.scene,this.camera)):(this.fullscreenMaterial=this.hbaoMaterial,t.setRenderTarget(this.aaBuffer),t.clear(),t.render(this.scene,this.camera),this.effectPass.renderToScreen=!1,this.effectPass.render(t,this.aaBuffer,t.aoRenderTarget))}dispose(){this.gBuffer.dispose(),this.depthBufferHighRes.dispose(),this.aoBuffer.dispose()}},$re=`
varying vec2 vUv;
void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Zre=`
uniform sampler2D tInput;
uniform sampler2D tMap;
uniform vec2 resolution;
varying vec2 vUv;

uniform vec2 uResolution;
uniform vec2 uCoords;

// Draws a rectangle at center <st> with size <size>
float rectangle(vec2 st, vec2 size) {
    size = vec2(0.5) - size * 0.5;
    vec2 uv = vec2(step(size.x, st.x), step(size.y, st.y));
    uv *= vec2(step(size.x, 1.0 - st.x), step(size.y, 1.0 - st.y));

    return uv.x * uv.y;
}

uniform vec2 uSize;
uniform float uScale;
uniform float uDPR;
uniform float uCurrent;
uniform vec3 uSceneColor;

void main() {
    vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
    screenUv *= 1.0 / uDPR;

    vec2 center = vec2(0.5, -0.5);
    vec2 outsideUv = screenUv;
    outsideUv += center;
    outsideUv -= uCoords.xy / uResolution.xy;
    outsideUv = (outsideUv - 0.5) + 0.5;
    outsideUv -= center;
    vec2 s = (uSize / uResolution) * uScale;
    float isOutside = 1.0 - rectangle(outsideUv, s);
    
    vec2 mid = vec2(0.5);
    vec2 insideUv = (screenUv - mid + s * mid) / s;
    vec4 background = texture2D(tInput, screenUv);
    vec4 image = texture2D(tMap, insideUv);
    gl_FragColor = mix(image, background, isOutside);
}
`,Yre=class extends Vl{constructor(){super(new gn({vertexShader:$re,fragmentShader:Zre,uniforms:{tInput:new Ye(null),tMap:new Ye(null),uResolution:new Ye(new q),uSize:new Ye(new q),uCoords:new Ye(new q),uScale:new Ye(1),uSceneColor:new Ye(new _t(16711680)),uDPR:new Ye(1),uCurrent:new Ye(0)}}),"tInput"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.tMap.value}set texture(t){this.uniforms.tMap.value=t}},Xre=`
void main() {
    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Kre=`
uniform sampler2D toScene;
uniform sampler2D fromScene;
uniform vec2 resolution;

uniform vec2 uResolution;
uniform float uDPR;

uniform float mixRatio;
uniform sampler2D tMixTexture;
uniform int useTexture;
uniform float threshold;

void main() {
	vec2 screenUv = gl_FragCoord.xy / uResolution.xy;
	screenUv *= 1.0 / uDPR;

	vec4 texel1 = texture2D( fromScene, screenUv );
	vec4 texel2 = texture2D( toScene, screenUv );

	if (useTexture==1) {
		
		vec4 transitionTexel = texture2D( tMixTexture, screenUv );
		float r = mixRatio * (1.0 + threshold * 2.0) - threshold;
		float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0);
		
		gl_FragColor = mix( texel1, texel2, mixf );
	} else {
		
		gl_FragColor = mix( texel1, texel2, mixRatio );
		
	}
}
`,Qre=[],Jre=class extends Vl{constructor(){super(new gn({vertexShader:Xre,fragmentShader:Kre,uniforms:{toScene:new Ye(null),fromScene:new Ye(null),uResolution:new Ye(new q),uDPR:new Ye(1),mixRatio:new Ye(0),threshold:new Ye(.1),useTexture:new Ye(0),tMixTexture:{value:Qre[0]}}}),"toScene"),this.needsSwap=!0}get uniforms(){return this.fullscreenMaterial.uniforms}get texture(){return this.uniforms.fromScene.value}set texture(t){this.uniforms.fromScene.value=t}};function G9(t,i){return i&&i.enabled&&t.push(i.effect),t}var eae=t=>Object.values(Fi).includes(t)?t:Fi.NORMAL,tae=class extends Cr{constructor(t){super(),this.postprocessingState=Zx.defaultData,this._scene=new Ac,this._camera=new ga,this.effects=new Map,this.blueNoiseTexture=new Cc,this._renderToScreen=!0,this.clock=new mV,this.renderer=t,this.debug=!1,this.effects.set("bloom",new wre),this.effects.set("chromaticAberration",new _re),this.effects.set("vignette",new Cre),this.effects.set("noise",new Are),this.effects.set("colorAverage",new kre),this.effects.set("hueSaturation",new Sre),this.effects.set("brightnessContrast",new xre),this.effects.set("depthOfField",new Ere),this.effects.set("pixelation",new Mre),this.effectComposer=new Lre(this.renderer),this.effectComposer.autoRenderToScreen=!1,this.opaquePass=new a4(!0,this.scene,this.camera),this.opaquePass.clear=!0,this.transmissionPass=new Rre(this.scene,this.camera,this.renderer),this.aoPass=new qre(this.scene,this.camera),this.taaPass=new Ire,this.taaPass.renderToScreen=!1,this.helperPass=new Fre(this.camera),this.helperPass.renderToScreen=!1,this.overlayPass=new Yre,this.overlayPass.enabled=!1,this.sceneTransitionPass=new Jre,this.sceneTransitionPass.enabled=!1,this._initCopyPass(),this._initPasses()}set overlayTexture(t){t!==void 0?(this.overlayPass.texture=t,this.overlayPass.enabled=!0):this.overlayPass.enabled=!1}get overlayTexture(){return this.overlayPass.texture}set sceneHelpers(t){this.helperPass.sceneHelpers=t}get sceneHelpers(){return this.helperPass.sceneHelpers}set sceneHelpersOnTop(t){this.helperPass.sceneHelpersOnTop=t}get sceneHelpersOnTop(){return this.helperPass.sceneHelpersOnTop}get scene(){return this._scene}set scene(t){this._scene=t,this.opaquePass.setScene(t),this.transmissionPass.setScene(t),this.aoPass.setScene(t)}get camera(){return this._camera}set camera(t){this._camera=t,this.opaquePass.setCamera(t),this.transmissionPass.setCamera(t),this.aoPass.setCamera(t),this.helperPass.setCamera(t)}updateRenderToScreen(){let t=!1;for(let i=this.effectComposer.passes.length-1;i>=0;i--){let r=this.effectComposer.passes[i];if(r.enabled===!0&&!t&&this._renderToScreen){r.renderToScreen=!0,t=!0;continue}r.renderToScreen=!1}}disableHelpers(){this.helperPass.enabled=!1,this.updateRenderToScreen()}enableHelpers(){this.helperPass.enabled=!0,this.updateRenderToScreen()}updateBlueNoiseTexture(t){this.blueNoiseTexture=new Cc(t,128,128),this.blueNoiseTexture.wrapS=Eo,this.blueNoiseTexture.wrapT=Eo,this.blueNoiseTexture.minFilter=on,this.blueNoiseTexture.magFilter=on,this.blueNoiseTexture.needsUpdate=!0}setAmbientOcclusionParams(t,i,r,s,l,d,c,u){this.aoPass.enabled=t,this.aoPass.radius=i,this.aoPass.bias=r,this.aoPass.aoColor=s,this.aoPass.fogEnabled=l,this.aoPass.fogNear=d,this.aoPass.fogFar=c,this.aoPass.runHalfRes!==!u&&(this.aoPass.runHalfRes=!u)}setTransmissionPassEnabled(t){this.transmissionPass.enabled=t,this.opaquePass.hasTransmissionPass=t}_initPasses(){var t,i;if((t=this.uvEffectPass)==null||t.dispose(),(i=this.effectPass)==null||i.dispose(),this.effectComposer.removeAllPasses(),this.transmissionPass.updatePasses(this.renderer),this.effectComposer.addPass(this.aoPass),this.effectComposer.addPass(this.opaquePass),this.effectComposer.addPass(this.transmissionPass),this.effectComposer.addPass(this.taaPass),this.postprocessingState.enabled){let r=[this.effects.get("pixelation")].reduce(G9,[]);r.length>0&&(this.uvEffectPass=new U_(this.camera,...r),this.uvEffectPass.renderToScreen=!1,this.effectComposer.addPass(this.uvEffectPass));let s=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(G9,[]);s.length>0&&(this.effectPass=new U_(this.camera,...s),this.effectPass.renderToScreen=!1,this.effectComposer.addPass(this.effectPass))}this.effectComposer.addPass(this.overlayPass),this.effectComposer.addPass(this.sceneTransitionPass),this.effectComposer.addPass(this.helperPass)}_initCopyPass(){if(this._savePass)return;let t=new q;this.renderer.getDrawingBufferSize(t),this._rt=new Oi(t.x,t.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:Eo,wrapT:Eo}),this._rt.samples=0,this._savePass=new KM(this._rt,!1),this._savePass.renderToScreen=!1}setCopyPass(t){this._rt=t,this._savePass=new KM(this._rt,!1),this.renderToScreen=!1}get renderToScreen(){return this._renderToScreen}set renderToScreen(t){if(this._renderToScreen===t)return;let i=this.effectComposer;!i||(t===!0?i.removePass(this._savePass):i.addPass(this._savePass),this._renderToScreen=t,this.updateRenderToScreen())}set sceneTransitionFromTexture(t){t!==this.sceneTransitionPass.texture&&(t!==null?this.sceneTransitionPass.enabled=!0:(this.sceneTransitionPass.enabled=!1,this.updateRenderToScreen()),this.sceneTransitionPass.texture=t)}get texture(){return this._rt&&this._rt.texture}get renderTarget(){return this._rt}updatePostprocessing(t){let l=t,{enabled:i}=l,r=Cn(l,["enabled"]),s=!1;i!==this.postprocessingState.enabled&&(s=!0);for(let d of Object.entries(r)){let c=d[1],u=this.effects.get(d[0]);if(u){u.enabled!==c.enabled&&(s=!0),u.enabled=c.enabled;for(let[h,f]of Object.entries(c))h==="blendFunction"?u.blendFunction=eae(f):u[h]=f}}this.postprocessingState=t,s&&this._initPasses()}render(){this.effectComposer.render(this.clock.getDelta())}setScissor(t,i,r,s){t instanceof ri?(this.effectComposer.inputBuffer.scissor.set(t.x,t.y,t.z,t.w),this.effectComposer.outputBuffer.scissor.set(t.x,t.y,t.z,t.w)):(this.effectComposer.inputBuffer.scissor.set(t,i,r,s),this.effectComposer.outputBuffer.scissor.set(t,i,r,s));let l=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(l),this.effectComposer.outputBuffer.scissor.multiplyScalar(l),this.renderer.setScissor(t,i,r,s)}setScissorTest(t){this.effectComposer.inputBuffer.scissorTest=t,this.effectComposer.outputBuffer.scissorTest=t,this.renderer.setScissorTest(t)}setViewport(t,i,r,s){t instanceof ri?(this.effectComposer.inputBuffer.viewport.copy(t),this.effectComposer.outputBuffer.viewport.copy(t)):(this.effectComposer.inputBuffer.viewport.set(t,i,r,s),this.effectComposer.outputBuffer.viewport.set(t,i,r,s))}resize(t,i,r){if(this.effectComposer.setSize(t,i,r),this._rt){let s=this.renderer.getPixelRatio();this._rt.setSize(t*s,i*s)}}dispose(){var t,i;(t=this.uvEffectPass)==null||t.dispose(),(i=this.effectPass)==null||i.dispose(),this.effectComposer.dispose()}},iae=t=>`

// PCSS implementation based on:
// https://www.gamedev.net/articles/programming/graphics/contact-hardening-soft-shadows-made-fast-r4906/
// NOTE: This number affects how big the shadow blur can
// possibly get. Bigger number == bigger blur, but less precise results

const float  gPenumbraFilterSize = 80.0;
const int   gPenumbraSamples = ${t};
const int gShadowSamples = ${t};
const float gShadowSamplesRpc = 1.0f / float(gShadowSamples);

#ifdef USE_SHADOWMAP
    #if NUM_DIR_LIGHT_SHADOWS > 0

        uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
        varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];

        struct DirectionalLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];

    #endif

    #if NUM_SPOT_LIGHT_SHADOWS > 0

        uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
        varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_SHADOWS ];

        struct SpotLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
        };

        uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];

    #endif

    #if NUM_POINT_LIGHT_SHADOWS > 0

        uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
        varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];

        struct PointLightShadow {
            float shadowBias;
            float shadowNormalBias;
            float shadowRadius;
            vec2 shadowMapSize;
            float shadowCameraNear;
            float shadowCameraFar;
        };

        uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];

    #endif

    /*
    #if NUM_RECT_AREA_LIGHTS > 0

        // TODO (abelnation): create uniforms for area light shadows

    #endif
    */

float computePenumbra(int index, sampler2D shadowMap, float temporalAngle, float texelSize, vec2 uv, float compare, float texelScalar, float shadowRadius)
{
    float penumbra = 1.0;
    float blockerDepthAvg = 0.0;
    float blockerCount = 0.0;

    #pragma unroll_loop_start
    for(int i = 0; i < gPenumbraSamples; i ++)
    {
        vec2 offset = (vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize) * texelScalar;
        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) );

        if(depth < compare + 0.0001)
        {
            blockerDepthAvg += depth;
            blockerCount++;
        }
    }
    #pragma unroll_loop_end

    if (blockerCount > 0.0)
    {
        blockerDepthAvg /= blockerCount;

        // Compute penumbra
        penumbra = (compare - blockerDepthAvg) / (blockerDepthAvg);
        penumbra *= penumbra;
        penumbra *= 200.0 * penumbraSize[min(index, 5 - 1)]; // Magic number that affects how quickly the penumbra grows

        return clamp(penumbra, 0.00, 1.0);
    }
    return 0.0;
}

float vogelShadow(int index, sampler2D shadowMap, vec2 uv, float texelSize, float compare, float shadowRadius)
{
    float shadow         = 0.0f;

    // NOTE: When using TAA, we should use screen space interleaved gradient noise
    vec2 halton = haltonSequence[frameIndex];
    float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
    float temporalAngle  = temporalOffset * PI2;

    float texelScalar = (gPenumbraFilterSize) / (texelSize * 1024.);
    float penumbra = computePenumbra(index, shadowMap, temporalAngle, texelSize, uv, compare, texelScalar, shadowRadius);
    if (penumbra == -1.0) {
        return 1.0;
    }

    #pragma unroll_loop_start
    for (int i = 0; i < gShadowSamples; i++)
    {
        vec2 vogelSample =  vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;
        // Overall blurring offset
        vec2 offset = vogelSample * (shadowRadius * 2.);

        // Penumbra offset
        offset += vogelSample * (penumbra * texelScalar);

        shadow += step( compare, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    }
    #pragma unroll_loop_end

    return shadow * gShadowSamplesRpc;
}


    float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {

        return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );

    }

    vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {

        return unpackRGBATo2Half( texture2D( shadow, uv ) );

    }

    float VSMShadow (sampler2D shadow, vec2 uv, float compare ){

        float occlusion = 1.0;

        vec2 distribution = texture2DDistribution( shadow, uv );

        float hard_shadow = step( compare , distribution.x ); // Hard Shadow

        if (hard_shadow != 1.0 ) {

            float distance = compare - distribution.x ;
            float variance = max( 0.00000, distribution.y * distribution.y );
            float softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality
            softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed
            occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );

        }
        return occlusion;

    }

    float getShadow( int i, sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {

        float shadow = 1.0;

        shadowCoord.xyz /= shadowCoord.w;
        shadowCoord.z += shadowBias;

        // if ( something && something ) breaks ATI OpenGL shader compiler
        // if ( all( something, something ) ) using this instead

        bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
        bool inFrustum = all( inFrustumVec );

        bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );

        bool frustumTest = all( frustumTestVec );

        if ( frustumTest ) {

        #if defined( SHADOWMAP_TYPE_PCF )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            return vogelShadow(i, shadowMap, shadowCoord.xy, texelSize.x, shadowCoord.z, shadowRadius );

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )

            vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
            float dx = texelSize.x;
            float dy = texelSize.y;

            vec2 uv = shadowCoord.xy;
            vec2 f = fract( uv * shadowMapSize + 0.5 );
            uv -= f * texelSize;

            shadow = (
                texture2DCompare( shadowMap, uv, shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
                texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
                     f.x ) +
                mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
                     texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
                     f.y ) +
                mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
                          f.x ),
                     mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
                          texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
                          f.x ),
                     f.y )
            ) * ( 1.0 / 9.0 );

        #elif defined( SHADOWMAP_TYPE_VSM )

            shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );

        #else // no percentage-closer filtering:

            shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );

        #endif

        }

        return shadow;

    }

    // cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D
    // vector suitable for 2D texture mapping. This code uses the following layout for the
    // 2D texture:
    //
    // xzXZ
    //  y Y
    //
    // Y - Positive y direction
    // y - Negative y direction
    // X - Positive x direction
    // x - Negative x direction
    // Z - Positive z direction
    // z - Negative z direction
    //
    // Source and test bed:
    // https://gist.github.com/tschw/da10c43c467ce8afd0c4

    vec2 cubeToUV( vec3 v, float texelSizeY ) {

        // Number of texels to avoid at the edge of each square

        vec3 absV = abs( v );

        // Intersect unit cube

        float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
        absV *= scaleToCube;

        // Apply scale to avoid seams

        // two texels less per square (one texel will do for NEAREST)
        v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );

        // Unwrap

        // space: -1 ... 1 range for each square
        //
        // #X##         dim    := ( 4 , 2 )
        //  # #         center := ( 1 , 1 )

        vec2 planar = v.xy;

        float almostATexel = 1.5 * texelSizeY;
        float almostOne = 1.0 - almostATexel;

        if ( absV.z >= almostOne ) {

            if ( v.z > 0.0 )
                planar.x = 4.0 - v.x;

        } else if ( absV.x >= almostOne ) {

            float signX = sign( v.x );
            planar.x = v.z * signX + 2.0 * signX;

        } else if ( absV.y >= almostOne ) {

            float signY = sign( v.y );
            planar.x = v.x + 2.0 * signY + 2.0;
            planar.y = v.z * signY - 2.0;

        }

        // Transform to UV space

        // scale := 0.5 / dim
        // translate := ( center + 0.5 ) / dim
        return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );

    }

    float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {

        float shadow = 1.0;
        vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );

        // for point lights, the uniform @vShadowCoord is re-purposed to hold
        // the vector from the light to the world-space position of the fragment.
        vec3 lightToPosition = shadowCoord.xyz;

        // dp = normalized distance from light to fragment position
        float compare = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?
        compare += shadowBias;

        // bd3D = base direction 3D
        vec3 bd3D = normalize( lightToPosition );

        vec2 halton = haltonSequence[frameIndex];
        float temporalOffset = getNoiseInterleavedGradient(gl_FragCoord.xy + halton);
        float temporalAngle  = temporalOffset * PI2;

        #if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_VSM )
            for (int i = 0; i < gShadowSamples; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                // NOTE: Removed for now
                // Penumbra offset
                //offset += vec3(vogelSample.x, vogelSample.y, vogelSample.y)  * (penumbra * gPenumbraFilterSize);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * gShadowSamplesRpc;

        #elif defined( SHADOWMAP_TYPE_PCF_SOFT )
            for (int i = 0; i < 16; i++) {
                vec2 vogelSample = vogelDiskSample(i, gShadowSamples, temporalAngle) * texelSize;

                // Overall blurring offset
                vec3 offset = vec3(vogelSample.x, vogelSample.y, -vogelSample.x) * (shadowRadius + 5.);

                shadow += texture2DCompare( shadowMap, cubeToUV( bd3D + offset, texelSize.y ), compare );

            }
            return shadow * (1.0 / 16.0);
        #else // no percentage-closer filtering

            return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), compare );

        #endif

    }

#endif
`,nae=bi.lights_fragment_begin,rae=bi.shadowmask_pars_fragment,W9=null,aae=t=>{switch(t){case"low":return 8;case"medium":return 16;case"high":return 32;default:return 16}},sae=(t="medium")=>{if(W9===t)return!1;W9=t;let i=aae(t);bi.shadowmap_pars_fragment=iae(i);let r=nae.slice();r=r.replace("getShadow( spotShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX + 3, spotShadowMap[ i ]"),r=r.replace("getShadow( directionalShadowMap[ i ]","getShadow( UNROLLED_LOOP_INDEX, directionalShadowMap[ i ]"),bi.lights_fragment_begin=r;let s=rae.slice();return s=s.replaceAll("getShadow(","getShadow( UNROLLED_LOOP_INDEX, "),bi.shadowmask_pars_fragment=s,!0},oae=`
attribute vec3 randomColor;
varying vec3 vNormal;
flat out vec3 vColor;

void main()
{
vNormal = normal;
vColor = randomColor;
gl_Position = projectionMatrix * (modelViewMatrix * vec4(position, 1.0));
}
`,lae=`
uniform float depthContrast;
varying vec3 vNormal;
flat in vec3 vColor;
void main()
{
vec3 normal = (normalize(vNormal)).rgb;

float contrastDepth = (gl_FragCoord.z - 0.5) * depthContrast + 0.5;

vec3 resultColor = mix(mix(vColor, normal, 0.2), vec3(contrastDepth), 0.4);
gl_FragColor = vec4(resultColor, vColor.r);
}
`,s4=new gn({vertexShader:oae,fragmentShader:lae,uniforms:{depthContrast:{value:1}}}),q9=new zn,dae=class extends uP{constructor(t){super(t),this._pixelRatio=this.getPixelRatio(),this.viewportWidth=1,this.viewportHeight=1,this.resolution=new q,this.pipeline=new tae(this),this.dummyCamera=new ga,this.sceneTransitionDuration=0,this.sceneTransitionTimeRemaining=-1,this.isXRCopyPassSet=!1,this.clear=(l=!0,d=!0,c=!0)=>{let u=this.getContext(),h=0;l&&(h|=u.COLOR_BUFFER_BIT),d&&(h|=u.DEPTH_BUFFER_BIT),c&&(h|=u.STENCIL_BUFFER_BIT),u.clear(h),u.clearBufferfv(u.COLOR,1,[0,0,0,1])},this.autoClear=!1;let i=this.setPixelRatio.bind(this),r=this.setSize.bind(this);this.shadowMap.enabled=!0,this.shadowMap.type=Zg,this.dummyCamera.matrixAutoUpdate=!1;let s=this.getContext();if(s&&"drawingBufferColorSpace"in s)try{s.drawingBufferColorSpace="display-p3"}catch(l){console.warn(l)}this.setPixelRatio=l=>{this._pixelRatio!==l&&(this._pixelRatio=l,i(l))},this.setSize=(l,d,c=!0)=>{var u,h;(this.viewportWidth!==l||this.viewportHeight!==d)&&(this.viewportWidth=l,this.viewportHeight=d,r(l,d,c),(u=this.normalRenderTarget)==null||u.setSize(l*this._pixelRatio,d*this._pixelRatio),this._resizeTransmission(l,d),(h=this.transmissionDepthTarget)==null||h.setSize(l*this._pixelRatio/2,d*this._pixelRatio/2),this.pipeline.resize(l,d,c))},this._superDispose=this.dispose,this.dispose=this._currentDispose}createAORenderTarget(){this.aoRenderTarget===void 0&&(this.aoRenderTarget=new Oi(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:yi,magFilter:yi,wrapS:Nn,wrapT:Nn,depthBuffer:!1}))}_resizeTransmission(t,i){var r,s;(r=this.transmissionRenderTarget)==null||r.setSize(t*this._pixelRatio/(this.hdTransmission?1:2),i*this._pixelRatio/(this.hdTransmission?1:2)),(s=this.aoRenderTarget)==null||s.setSize(t*this._pixelRatio/1,i*this._pixelRatio/1)}get hdTransmission(){return Yt.transmissionLod.value===1}set hdTransmission(t){Yt.transmissionLod.value=t===!0?1:2,this._resizeTransmission(this.viewportWidth,this.viewportHeight)}createTransmissionRenderTarget(){this.transmissionRenderTarget===void 0&&(this.transmissionRenderTarget=new Oi(this.viewportWidth*this._pixelRatio/(this.hdTransmission?1:2),this.viewportHeight*this._pixelRatio/(this.hdTransmission?1:2),{generateMipmaps:!0,minFilter:vc,magFilter:yi,wrapS:Nn,wrapT:Nn,depthBuffer:!1}),this.transmissionDepthTarget=new Oi(this.viewportWidth*this._pixelRatio/2,this.viewportHeight*this._pixelRatio/2,{minFilter:on,magFilter:on,depthBuffer:!1}))}createNormalRenderTarget(){this.normalRenderTarget===void 0&&(this.normalRenderTarget=new Oi(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio,{generateMipmaps:!1,minFilter:on,magFilter:on,type:ia,depthTexture:new Qf(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio)}))}renderNormal(t,i,r){this.normalRenderTarget&&(this.setClearColor(0),r.layers.enable(8),r.layers.disable(0),r.layers.disable(3),i.traverseEntity(s=>{s.layers.isEnabled(8)&&(s.copyPreviousMatrix=!1)}),this.setRenderTarget(this.normalRenderTarget),this.clear(),r instanceof ga?s4.uniforms.depthContrast.value=(r.far-r.near)/1e4:s4.uniforms.depthContrast.value=1,i.overrideMaterial=s4,this.render(i,r),this.setClearColor(i.bgColor,i.bgColor.a),this.setRenderTarget(null),i.overrideMaterial=t.wireframeState?y4:null,r.layers.enable(0),r.layers.enable(3),i.traverseEntity(s=>{s.layers.isEnabled(8)&&(s.copyPreviousMatrix=!0)}))}renderSplineSceneWithDummyCamera(t,i,r=1){this.dummyCamera.updateCameraState(i.dataPatched),this.dummyCamera.matrix.copy(i.matrixWorld);let s=i.height,l=i.width,d=this.viewportWidth/this.viewportHeight;l<s?l=s*d:s=l/d,this.dummyCamera.setViewplaneSize(l,s);for(let c=0;c<r;c++)this.renderSplineScene(t,this.dummyCamera)}renderSplineScene(t,i,{sceneHelpers:r=void 0,sceneHelpersOnTop:s=void 0,overrideTransmission:l=void 0,overrideNormal:d=void 0}={}){let c=t instanceof b4?t.activePage:t,u=c.visible;c.visible=!0;let h=c.scene;this.xr.enabled&&(this.isXRCopyPassSet===!1&&this.getRenderTarget()!==null&&(this.pipeline.setCopyPass(this.getRenderTarget()),this.isXRCopyPassSet=!0),this.xr.updateCamera(i)),this.setClearColor(c.bgColor,c.bgColor.a),c.penumbraSizeArray.forEach((g,v)=>{Yt.penumbraSize.value[v]=g}),Yt.pixelRatioNode.value=this.getPixelRatio(),this.resolution.x!==0&&this.resolution.y!==0?Yt.resolution.value.set(this.resolution.x,this.resolution.y):Yt.resolution.value.set(this.viewportWidth*this._pixelRatio,this.viewportHeight*this._pixelRatio),d!==void 0?(Yt.normalRenderTarget.value=d,Yt.normalRenderTargetDepth.value=q9):h.needsNormal()&&(this.createNormalRenderTarget(),Yt.normalRenderTarget.value=this.normalRenderTarget.texture,Yt.normalRenderTargetDepth.value=this.normalRenderTarget.depthTexture,this.renderNormal(h,c,i));let f=c.data.ao,m=f.occlusion;m&&(this.createAORenderTarget(),Yt.aoRenderTarget.value=this.aoRenderTarget.texture),Yt.aoEnabled.value=m,this.pipeline.setAmbientOcclusionParams(f.occlusion,f.radius,f.bias,c.aoColor,c.fog!==null,c.backupFog.near,c.backupFog.far,f.aoFullRes),this.pipeline.aoPass.setBlueNoiseTexture(this.pipeline.blueNoiseTexture);let p=!1;if(l!==void 0)Yt.transmissionRenderTarget.value=l,Yt.transmissionRenderTargetDepth.value=q9,this.pipeline.setTransmissionPassEnabled(!1);else{let g=h.needsTransmission();g&&(this.transmissionRenderTarget===void 0&&(p=!0),this.createTransmissionRenderTarget(),Yt.transmissionRenderTarget.value=this.transmissionRenderTarget.texture,Yt.aspectRatio.value=wte(this.viewportWidth,this.viewportHeight),Yt.transmissionRenderTargetDepth.value=this.transmissionDepthTarget.texture),this.pipeline.setTransmissionPassEnabled(g)}i.layers.enable(3),i.layers.enable(8),this.pipeline.sceneHelpers=r,this.pipeline.sceneHelpersOnTop=s,this.pipeline.scene=c,this.pipeline.camera=i,p&&this.pipeline.transmissionPass.updatePasses(this),this.pipeline.postprocessingState!==c.postprocessing&&(this.pipeline.updatePostprocessing(c.postprocessing),!r&&!s&&this.pipeline.disableHelpers()),this.clearAlphaOverride!==void 0&&this.setClearAlpha(this.clearAlphaOverride),c.overrideMaterial=h.wireframeState?y4:null,this.pipeline.render(),Yt.frameIndex.value=(Yt.frameIndex.value+1)%16,i instanceof ga&&i.copyHistory(),c.visible=u}renderFromSceneForSceneTransitionPass(t,i,r){this.pipeline.renderToScreen=!1,this.pipeline.renderTarget,this.renderSplineScene(t,i),this.pipeline.sceneTransitionFromTexture=this.pipeline.renderTarget.texture,this.sceneTransitionDuration=r,this.sceneTransitionTimeRemaining=r,this.pipeline.renderToScreen=!0;let s=this.pipeline.sceneTransitionPass.uniforms;s.uDPR.value=window.devicePixelRatio,s.uResolution.value.set(this.domElement.width,this.domElement.height).divideScalar(window.devicePixelRatio)}_currentDispose(){var t,i,r,s,l,d;this._superDispose(),this.pipeline.dispose(),(t=this.aoRenderTarget)==null||t.dispose(),(i=this.transmissionRenderTarget)==null||i.dispose(),(r=this.transmissionDepthTarget)==null||r.dispose(),(s=this.normalRenderTarget)==null||s.dispose(),(d=(l=this.normalRenderTarget)==null?void 0:l.depthTexture)==null||d.dispose()}},$9=class extends k0(PV){constructor(t,i=15,r=10066329){super(t,i,r),this.object=t,this.added=!1,this.name=`DirectionalLightHelper: ${t.uuid}`}raycast(t,i){S0(this.object,$9.geometryHelper,t,i)}},Z9=class extends k0(DV){constructor(t,i=15,r=6710886){super(t,i,r),this.object=t,this.name=`PointLightHelper: ${t.uuid}`}raycast(t,i){S0(this.object,Z9.geometryHelper,t,i)}},o4=class extends k0(TV){constructor(t,i=6710886){super(t,i),this.object=t,this.name=`SpotLightHelper: ${t.uuid}`}raycast(t,i){S0(this.object,o4.geometryHelper,t,i)}update(){if(this.object!==void 0){let t=o4._vector,i=this.object.distance?this.object.distance:1e3,r=i*Math.tan(this.object.angle);this.cone.scale.set(r,r,i),t.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(t);let s=this.color!==void 0?this.color:this.light.color;if(this.cone.material instanceof Array)for(let l=0,d=this.cone.material.length;l<d;l++)this.cone.material[l].color.set(s);else this.cone.material.color.set(s)}}},Y9=o4;Y9._vector=new N;function cae(t,i){t.shadow.camera.right=i/2,t.shadow.camera.left=-i/2,t.shadow.camera.top=i/2,t.shadow.camera.bottom=-i/2,t.shadow.needsUpdate=!0}var X9=class extends $M(pV,$9){constructor(t,i,r){super(),this.super_Entity(t,i),this.castShadow=!0,this.shadow.mapSize.width=2048,this.shadow.mapSize.height=2048,this.shadow.normalBias=1,this.layers.enable(3);let s=this.shadow.camera;s.top=1250,s.bottom=-1250,s.right=1250,s.left=-1250,s.near=-1e4,s.far=2500;let l=new rx(this.shadow.camera);l.visible=!1,this.gizmos.shadowmap=l}update(){this.shadow.camera.updateProjectionMatrix();for(let t in this.gizmos){let i=this.gizmos[t];i instanceof rx&&i.update()}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.objectHelper&&this.objectHelper.update()}updateState(t,i){this.updateState_Light(t,i);let r=t.depth!==void 0&&t.depth!==this.shadow.camera.far||t.size!==void 0&&t.size/2!==this.shadow.camera.right;t.size!==void 0&&cae(this,t.size),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),t.penumbraSize!==void 0&&i.scene.markPenumbraSizeDirty(),r&&this.update()}},K9=new N,Q9=new N,J9=new Ut,ez=class extends $M(cV,Y9){constructor(t,i,r){super(),this.super_Entity(t,i),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let s=this.shadow.camera;s.fov=fe.RAD2DEG*2*this.angle,s.aspect=1,s.near=100,s.far=2500;let l=new rx(this.shadow.camera);l.visible=!1,this.gizmos.shadowmap=l,this.update()}update(){this.shadow.camera.updateProjectionMatrix();for(let t in this.gizmos){let i=this.gizmos[t];i instanceof rx&&i.update()}}updateMatrixWorld(t){super.updateMatrixWorld(t),Q9.setFromMatrixPosition(this.matrixWorld),J9.setFromRotationMatrix(this.matrixWorld),K9.copy(this.up).applyQuaternion(J9).negate().multiplyScalar(this.distance),this.target.position.copy(Q9).add(K9),this.target.updateMatrixWorld(),this.objectHelper&&this.objectHelper.update()}updateState(t,i){this.updateState_Light(t,i),t.distance!==void 0&&(this.distance=t.distance),t.decay!==void 0&&(this.decay=t.decay),t.angle!==void 0&&(this.angle=t.angle),t.penumbra!==void 0&&(this.penumbra=t.penumbra),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.penumbraSize!==void 0&&i.scene.markPenumbraSizeDirty(),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},Jc=class extends WE(Ac){constructor(t,i){super(),this.data=i,this.bgColor=new hs(1,1,1,1),this.fog=null,this.backupFog=new hP(16777215,.1,2e3),this.fogUseBGColor=!1,this.isActive=!1,this.aoColor=new _t,this.penumbraSizeArrayCache=null,this.super_Entity(t,i),this.personalCamera=new ga(pp,ge(Z(Z({},Kv.defaultData),i.camera),{name:"Personal Camera"})),this.personalCamera.objectHelper.visible=!1,this.add(this.personalCamera),this.activeCamera=this.personalCamera,this.ambientLight=new lV(13882323,8553090,.75),this.ambientLight.name="Default Ambient Light",this.ambientLight.layers.enable(3),this.ambientLight.removeFromParent(),this.add(this.ambientLight)}get scene(){return this.parent}get postprocessing(){return this.data.postprocessing}updateVisible(){}setBackgroundColor(t){this.bgColor=t,this.fogUseBGColor===!0&&(this.backupFog.color=t)}updateAmbientLight(t,i){t.color!==void 0&&(this.ambientLight.color=Wa(t.color,i)),t.intensity!==void 0&&(this.ambientLight.intensity=t.intensity),t.enabled!==void 0&&(t.enabled?this.add(this.ambientLight):this.remove(this.ambientLight))}onDeactive(){this.isActive=!1}onActive(t){this.isActive=!0,t.fog=this.fog,this.traverseEntity(i=>{i instanceof wh&&i.recomputeBoolean()}),this.updateShadow(this.data.shadow)}forceMaterialsUpdate(){this.traverseEntity(t=>{if(t instanceof Kp)if(Array.isArray(t.material))for(let i of t.material)i.needsUpdate=!0;else t.material.needsUpdate=!0,t.material.dispose()})}updateShadow(t){t.softShadowQuality!==void 0&&this.isActive&&sae(t.softShadowQuality)&&this.forceMaterialsUpdate()}updateFog(t,i){if(t.enabled?this.fog=this.backupFog:this.fog=null,this.isActive){let r=this.scene;r.fog=this.fog}this.fogUseBGColor=t.useBackgroundColor,t.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=Wa(t.color,i),this.backupFog.near=t.near,this.backupFog.far=t.far}updateAo(t,i){t.aoColor!==void 0&&(this.aoColor=Wa(t.aoColor,i))}updateByOp(t,i,r,s){super.updateByOp(t,i,r,s);let l=i;to(t.path,["fog"])?this.updateFog(l.fog,r.shared):to(t.path,["ao"])?this.updateAo(l.ao,r.shared):to(t.path,["ambient"])?this.updateAmbientLight(l.ambient,r.shared):to(t.path,["shadow"])&&this.updateShadow(l.shadow)}updateState(t,i){this.updateState_Entity(t,i),t.backgroundColor!==void 0&&this.setBackgroundColor(Wa(t.backgroundColor,i.shared)),t.fog!==void 0&&this.updateFog(t.fog,i.shared),t.ambient!==void 0&&this.updateAmbientLight(t.ambient,i.shared),t.ao!==void 0&&this.updateAo(t.ao,i.shared),t.shadow!==void 0&&this.updateShadow(t.shadow)}raycast(t,i){super.raycast(t,i)}switchActiveCamera(t){t&&t.isDescendantOf(this)&&(this.activeCamera!==this.personalCamera&&(this.activeCamera.objectHelper.visible=!0),this.activeCamera=t,t.objectHelper.visible=!1)}get playCamera(){var t,i;return(i=(t=this.scene)==null?void 0:t.find(this.data.publish.playCamera))!=null?i:this.personalCamera}switchToPlayCamera(){this.switchActiveCamera(this.playCamera)}get penumbraSizeArray(){return this.penumbraSizeArrayCache===null&&this.updatePenumbraSizeArray(),this.penumbraSizeArrayCache}updatePenumbraSizeArray(){this.penumbraSizeArrayCache=new Array(5).fill(.5);let t=0,i=0;this.traverseEntity(r=>{if(!r.visible)return!0;r instanceof X9&&r.visible&&t<3&&(this.penumbraSizeArrayCache[t]=r.data.penumbraSize,t+=1),r instanceof ez&&r.visible&&t<5-3&&(this.penumbraSizeArrayCache[3+i]=r.data.penumbraSize,i+=1)})}raycastWithClones(t){let i=[],r=s=>{for(let l of s.children){let d=l.cloner;Ri.is(l)&&(l.visible||d!=null&&d.object.data.visible)&&((Go(l)||ZM(l)&&this.scene.enableHelpers&&l.objectHelper.visible)&&(t.intersectObject(l,!1,i),u4(l,t,i,!0)),r(l))}};return r(this),i}},uae=class extends $M(hV,Z9){constructor(t,i,r){super(),this.super_Entity(t,i),this.castShadow=!0,this.shadow.mapSize.width=1024,this.shadow.mapSize.height=1024,this.shadow.normalBias=1,this.layers.enable(3);let s=this.shadow.camera;s.fov=90,s.aspect=1,s.near=100,s.far=2500;let l=new N(-s.far+this.position.x,-s.far+this.position.y,-s.far+this.position.z),d=new N(s.far+this.position.x,s.far+this.position.y,s.far+this.position.z),c=new nn(l,d),u=new ax(c,new _t(16755200));u.visible=!1,this.gizmos.shadowmap=u,this.update()}update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this.gizmos))for(let t in this.gizmos){let i=this.gizmos[t];if(i instanceof ax){let r=this.shadow.camera,s=new N(-r.far+this.position.x,-r.far+this.position.y,-r.far+this.position.z),l=new N(r.far+this.position.x,r.far+this.position.y,r.far+this.position.z);i.box.set(s,l),i.updateMatrixWorld(!0)}}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.objectHelper&&this.objectHelper.update()}updateState(t,i){this.updateState_Light(t,i),t.distance!==void 0&&(this.distance=t.distance),t.decay!==void 0&&(this.decay=t.decay),t.shadowRadius!==void 0&&(this.shadow.radius=t.shadowRadius),t.shadowResolution!==void 0&&(this.shadow.mapSize.set(t.shadowResolution,t.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null))}},hae=class extends qa{get forceComputeSize(){return!0}get shape(){return this.geometry.userData.shape}updateEntityBoxSize(t,i){let r=this.geometry.getAttribute("position");r!==void 0?yM(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,t,i):super.updateEntityBoxSize(t,i)}},l4=class extends qa{constructor(t,i,r){super(t,i,r),this._shapeId=null,this._context=r}updateState(t,i){super.updateState(t,i),this.updateShape()}updateShape(){var s;let t=Z({},this.data.geometry.extrusion.shape);for(let l in t)typeof t[l]=="string"&&(t[l]=this._context.shared.getVariable(t[l],[this.uuid,"geometry","extrusion","shape",l]));let i;if(t.type==="Custom"){let l=t.shapeId;if(l!==this._shapeId&&this.detachShape(),l){this._shapeId=l;let d=this._context.scene.find(l);d!=null&&d.data&&(d.attachedPaths.add(this),i=(s=d.geometry.userData)==null?void 0:s.shape),i||this._context.scene.addPendingCommand(()=>this.updateShape())}}else{let l;switch(t.type){case"Rectangle":l=YR;break;case"Ellipse":l=sM;break;case"Polygon":l=ZR;break;case"Star":l=XR;break;default:throw new Error(`Unknown shape type: ${t.type}`)}i=l.create({parameters:t}).userData.shape}let r=this.geometry;i&&r.inputs&&(r.inputs.shapeData=i,r.build(),this.attachedSurfaceCloners.forEach(l=>l.update()))}detachShape(){var t;this._shapeId!==null&&((t=this._context.scene.find(this._shapeId))==null||t.attachedPaths.delete(this))}createGeometryDelayed(t){this.geometryCreateDeleyed=t.shared,this.updateShape(),this.refreshAttachedPaths(t)}updateTransformState(t,i){return super.updateTransformState(t,i)}updateGeometryInteractions(t,i){super.updateGeometryInteractions(t,i),this.updateShape()}updateEntityBoxSize(t,i){let r=this.geometry.getAttribute("position");r!==void 0?yM(r,this.geometry.drawRange.start,this.geometry.drawRange.count<1/0?this.geometry.drawRange.count:r.count,t,i):super.updateEntityBoxSize(t,i)}},im=class extends A0(Kf,F_){constructor(t,i,r){super(),i.type==="Instance"&&typeof t=="string"&&(i=this.transformAssignData(i,r)),this.super_Entity(t,i),this.objectHelper.update()}get isComponentRoot(){return this.data.type==="Component"&&typeof this.identity=="string"}get isInstanceRoot(){return this.data.type==="Instance"&&typeof this.identity=="string"}transformAssignData(t,i){let r=e_.getComponentData({scene:i.scene.data,shared:i.shared.data},t.component);if(r){let s,l;for(let d of Bc.rootOverrideProps)t[d]===void 0?(s===void 0&&(s=Z({},t)),s[d]=r.data[d]):(l===void 0&&(l={}),l[d]=t[d],s===void 0&&(s=Z({},t)),s[d]=Oc.apply(r.data[d],t[d]));return this.overrideData=l,s}else return Z(Z(Z({},Ua.defaultData),t),Sd(Ua.defaultData,Bc.rootOverrideProps))}updateByOp(t,i,r,s){let l;if(this.isInstanceRoot&&!s){if(i=this.transformAssignData(i,r),t.type===0&&t.path.length===0&&this.component)for(let d of Bc.rootOverrideProps)d in t.props&&t.props[d]===void 0&&(l===void 0&&(l=ge(Z({},t),{props:Z({},t.props)})),l.props[d]=this.component.data[d]);else if(t.type===0&&t.path.length>0&&Bc.rootOverrideProps.includes(t.path[0])){let d=t.path[0];l===void 0&&(l=ge(Z({},t),{path:[],props:{[d]:i[d]}}))}}super.updateByOp(l!=null?l:t,i,r,s)}updateState(t,i){this.updateState_Entity(t,i)}expandInstanceChildren(t){var r;let i=this.data;if(this.component===void 0){let s=(r=t.scene.find(i.component))!=null?r:null,l=!1;if(s!==this.oldComponent){if(this.oldComponent){let d=0;for(let c of this.children)if(Ri.is(c))t.scene.disposeAndUnregisterEntityRecursivelyIfNotReregistered(c),d4(c),d+=1;else break;this.children.splice(0,d)}l=!0}if(s){let d={};iz(t,[this.uuid],i.overrides,this,s,s,0,l,d);for(let c of this.children)if(Ri.is(c)){let u=c.data;u.type==="Empty"&&u.animations&&c.traverseEntity(h=>{if(h instanceof qa&&h.isSkinnedMesh){let f=h.dataPatched;if(f.bones&&f.boneInverses){let m=f.bones.map(v=>t.scene.find(d[v])),p=f.boneInverses.map(v=>new Ze().fromArray(v)),g=new LA(m,p);h.bind(g,h.bindMatrix)}}else h.matrixAutoUpdate=!0})}}this.oldComponent=this.component}}};function d4(t){if(t.component){let i=t.component.instances.indexOf(t);i>=0&&t.component.instances.splice(i,1);for(let r of t.children)Ri.is(r)&&d4(r)}}function tz(t,i,r,s){return t.component===i&&xO(t.identity,s)?t.overrideData===r?2:1:0}function iz(t,i,r,s,l,d,c,u,h){var m;if(c>50)return!1;if(s.component!==l){if(s.component){let p=s.component.instances.indexOf(s);p>=0&&s.component.instances.splice(p,1)}l.instances.push(s),s.component=l}l instanceof im&&l.isInstanceRoot&&l.expandInstanceChildren(t);let f=0;for(let p of l.children)if(Ri.is(p)){let g=[...i,...typeof p.identity=="string"?[p.identity]:p.identity],v=Yx.resolve(r,g,1);v!=null&&!(v instanceof Dr)&&(Object.setPrototypeOf(v,Dr.prototype),console.error("wrong prototype"));let w=null,x;if(!u){let _=s.children[f];if(w=Ri.is(_)?_:null,w!==null){let k=tz(w,p,v,g);x=k>=1?w.stateSelection:void 0,k!==2&&(w=null)}if(w===null&&(w=(m=t.scene.findInstance(g))!=null?m:null,w!==null)){let k=tz(w,p,v,g);if(x=k>=1?w.stateSelection:void 0,k!==2)w=null;else{let A=w.parent.children.indexOf(w);w.parent.children.splice(A,1),s.children.splice(f,0,w),w.parent===s?A<=f&&console.error("not possible"):(w.parent=s,w.matrixWorldNeedsUpdate=!0,w.resetBBoxNeedsUpdate(),w.updateVisible(),t.pendingDeletes.delete(w))}}}if(w===null){let _=v?Oc.apply(p.data,v):p.data;rh.is(_.type)&&(_=ge(Z({},_),{type:"Empty"})),w=Wc.createEntity(g,_,t),w.overrideData=v,s.add(w),s.children.splice(s.children.length-1,1),s.children.splice(f,0,w),w.updateState(w.data,t),x&&w.changeSelectedState(x,t),t.scene.registerInstanceAndSetUuid(w)}if(w.isBone){let _=w.identity[w.identity.length-1];h[_]=w.uuid}f+=1,iz(t,i,r,w,p,d,c+1,u,h)}if(!u){let p=f;for(;;){let g=s.children[f];if(Ri.is(g))t.pendingDeletes.add(g);else break;f+=1}s.children.splice(p,f-p)}return!0}var fae=class extends A0(fP,F_){constructor(t,i){super(),this.super_Entity(t,i),this.objectHelper.update(),this.matrixAutoUpdate=!0}updateState(t,i){this.updateState_Entity(t,i)}};function pae(t,i,r){let s;return i.geometry.type==="TextGeometry"?new _9(t,i,r):(i.geometry.type==="SubdivGeometry"?s=new x0(t,i,r):i.geometry.type==="PathGeometry"?s=new l4(t,i,r):i.geometry.type==="VectorGeometry"?s=new hae(t,i,r):i.geometry.type==="BooleanGeometry"?s=new wh(t,i,r):s=new qa(t,i,r),s)}function c4(t,i,r){return i.type==="Mesh"?pae(t,i,r):i.type==="Empty"?new tm(t,i):i.type==="Splat"?new tm(t,i):i.type==="Bone"?new fae(t,i):i.type==="Page"?new Jc(t,i):i.type==="PointLight"?new uae(t,i,r):i.type==="SpotLight"?new ez(t,i,r):i.type==="DirectionalLight"?new X9(t,i,r):i.type==="Component"||i.type==="Instance"?new im(t,i,r):rh.is(i.type)?new ga(t,i):(console.error(i),new tm(t,i))}Wc.createEntity=c4;function mae(t,i,r){let s=c4(t.identity,i,r),l=t.children,d=t.attachedPaths,c=t.parent,u=t.component,h=t.instances,f=t.overrideData,m=t.uuid,p=t.stateSelection;t.dispose();for(let g of Object.keys(t))delete t[g];Object.setPrototypeOf(t,Object.getPrototypeOf(s));for(let g of Object.keys(s))t[g]=s[g];t.children=[...t.children,...l],t.attachedPaths=d,t.parent=c,t.component=u,t.instances=h,t.uuid=m,t.overrideData=f,t.updateState(t.data,r),p&&t.changeSelectedState(p,r),t.resetBBoxNeedsUpdate()}Wc.changeEntityProptotype=mae,Wc.Cloner=Vo;function gae(t,i,r,s){t.updateByOp(i,r,s,!1)}function nz(t,i){let r=!1,s=i.getLayersOfType("transmission"),l=i.getLayersOfType("outline");return l.length>0&&(t.layers.set(8),s.length>0&&t.layers.enable(3),r=!0,BM(t),LM(t)),s.length===0&&l.length===0&&t.layers.set(0),t instanceof Kp&&t.needsAO&&t.layers.enable(5),r}function rz(t,i){if(!i.layers)return!1;let r=!1,s=i.getLayersOfType("transmission").filter(d=>d.data.visible),l=i.getLayersOfType("outline").filter(d=>d.data.visible);return s.length>0&&(t.layers.set(3),l.length>0&&t.layers.enable(8),r=!0),s.length===0&&l.length===0&&t.layers.set(0),t.needsAO&&t.layers.enable(5),r}function vae(t){let i=!1;return t.traverseEntity(r=>{if(r instanceof Kp)if(Array.isArray(r.material))for(let s=0;s<r.material.length;s++)nz(r,r.material[s])&&(i=!0);else nz(r,r.material)&&(i=!0)}),i}function yae(t){let i=!1;return t.traverseEntity(r=>{if(r instanceof Kp)if(Array.isArray(r.material))for(let s=0;s<r.material.length;s++)rz(r,r.material[s])&&(i=!0);else rz(r,r.material)&&(i=!0)}),i}var bae=new YP,wae=new Ze,xae=new Rf;function u4(t,i,r,s=!1){let l=t.cloner;if(l)for(let d of l.children){let c=wae.copy(d.matrixWorld).invert(),u=xae.copy(i.ray).applyMatrix4(c),h=t.matrixWorld;u.applyMatrix4(h);let f=bae;f.set(u.origin,u.direction),f.near=i.near,f.far=i.far;let m=f.intersectObject(t,!1);m.length>0&&r.push(ge(Z({},m[0]),{object:s?d:t}))}}var _ae=class{constructor(){this._constraints=new Map}setConstraint(t,i){i===null?this._constraints.delete(t):this._constraints.set(t,i)}removeDependencies(t){this._constraints.delete(t)}applyConstraints(t){let i=new Set;this._constraints.forEach((r,s)=>{let l=[s,r],d=r;for(;this._constraints.has(d);)d=this._constraints.get(d),i.has(d)||l.push(d);for(let c=l.length-2;c>=0;c--)if(!i.has(l[c])){let u=t.find(l[c]);u?u.applyPathSnapping(t):console.warn(`missing entity ${l[c]}`),i.add(l[c])}})}findDependency(t,i){let r=t;for(;this._constraints.has(r);)if(r=this._constraints.get(r),r===i)return!0;return!1}},Hl=sn(Lu()),Nd=sn(ud()),sr=sn(Lu()),Si=sn(ud()),G_=class{constructor(t,i,r){this._dataNormalized=t,this._minD=i,this._maxD=r}static createFromUnnormalized(t){let i=Si.sup(t),r=Si.inf(t),s=(0,sr.default)(new Float32Array(t.size),t.shape),l=i-r;return l<1e-4?Si.assigns(s,0):(Si.subs(s,t,r),Si.divs(s,s,l)),new G_(s,r,i)}get data(){return this._dataNormalized}get minD(){return this._minD}get maxD(){return this._maxD}denormalize(){let t=(0,sr.default)(new Float32Array(this._dataNormalized.size),this._dataNormalized.shape);return Si.muls(t,this._dataNormalized,this._maxD-this._minD),Si.adds(t,t,this._minD),t}},Gn=class{constructor(t,i){this._quantized=t,this._method=i}get quantized(){return this._quantized}static maxIntBits(t){return wn(2,t)-1}static fromNormalized(t,i){let r=t.data,s;if(i==="norm8x"){let l=Gn.maxIntBits(8),d=(0,sr.default)(new Float32Array(r.size),r.shape);Si.muls(d,r,l),Si.roundeq(d),s=(0,sr.default)(new Uint8Array(d.data),r.shape)}else if(i==="norm565"){let l=(0,sr.default)(new Float32Array(r.size),r.shape);Si.assign(l,r),Si.mulseq(l.pick(null,0),Gn.maxIntBits(5)),Si.mulseq(l.pick(null,1),Gn.maxIntBits(6)),Si.mulseq(l.pick(null,2),Gn.maxIntBits(5)),Si.roundeq(l);let d=(0,sr.default)(new Uint16Array(l.data),r.shape),c=(0,sr.default)(new Uint16Array(r.shape[0]),[r.shape[0]]),u=(0,sr.default)(new Uint16Array(r.shape[0]),[r.shape[0]]);Si.lshifts(c,d.pick(null,0),11),Si.lshifts(u,d.pick(null,1),5),Si.boreq(c,u),Si.boreq(c,d.pick(null,2)),s=c}else{let l=(0,sr.default)(new Float32Array(r.size),r.shape);Si.assign(l,r),Si.mulseq(l.pick(null,0),Gn.maxIntBits(11)),Si.mulseq(l.pick(null,1),Gn.maxIntBits(10)),Si.mulseq(l.pick(null,2),Gn.maxIntBits(11)),Si.roundeq(l);let d=(0,sr.default)(new Uint32Array(l.data),r.shape),c=(0,sr.default)(new Uint32Array(r.shape[0]),[r.shape[0]]),u=(0,sr.default)(new Uint32Array(r.shape[0]),[r.shape[0]]);Si.lshifts(c,d.pick(null,0),21),Si.lshifts(u,d.pick(null,1),11),Si.boreq(c,u),Si.boreq(c,d.pick(null,2)),s=c}return new Gn(s,i)}dequantize(t,i){let r=this._method,s,l=this._quantized;if(r==="norm8x"){let d=Gn.maxIntBits(8);s=(0,sr.default)(new Float32Array(l.size),l.shape),Si.muls(s,l,1/d)}else if(r==="norm565"){let d=(0,sr.default)(new Uint8Array(l.shape[0]),[l.shape[0]]),c=(0,sr.default)(new Uint8Array(l.shape[0]),[l.shape[0]]),u=(0,sr.default)(new Uint8Array(l.shape[0]),[l.shape[0]]);Si.rrshifts(d,l,11),Si.rrshifts(c,l,5),Si.bandseq(c,Gn.maxIntBits(6)),Si.bands(u,l,Gn.maxIntBits(5)),s=(0,sr.default)(new Float32Array(l.shape[0]*3),[l.shape[0],3]),Si.muls(s.pick(null,0),d,1/Gn.maxIntBits(5)),Si.muls(s.pick(null,1),c,1/Gn.maxIntBits(6)),Si.muls(s.pick(null,2),u,1/Gn.maxIntBits(5))}else{let d=(0,sr.default)(new Uint16Array(l.shape[0]),[l.shape[0]]),c=(0,sr.default)(new Uint16Array(l.shape[0]),[l.shape[0]]),u=(0,sr.default)(new Uint16Array(l.shape[0]),[l.shape[0]]);Si.rrshifts(d,l,21),Si.rrshifts(c,l,11),Si.bandseq(c,Gn.maxIntBits(10)),Si.bands(u,l,Gn.maxIntBits(11)),s=(0,sr.default)(new Float32Array(l.shape[0]*3),[l.shape[0],3]),Si.muls(s.pick(null,0),d,1/Gn.maxIntBits(11)),Si.muls(s.pick(null,1),c,1/Gn.maxIntBits(10)),Si.muls(s.pick(null,2),u,1/Gn.maxIntBits(11))}return new G_(s,t,i)}},nr=class{constructor(t,i,r,s,l,d=!1){this._quantized=t,this._minMaxMatrix=i,this._chunkSize=r,this._quantizationMethod=s,this._variableChunkSize=l,this._isDynamicChunks=d}get length(){return this._quantized.shape[0]}get nchunks(){return this._minMaxMatrix.shape[0]}get quantized(){return this._quantized}get method(){return this._quantizationMethod}get minmaxMatrix(){return this._minMaxMatrix}_createPrunedMinMax(t){let i=t.length,r=this.minmaxMatrix.shape[0]-i,s=(0,Hl.default)(new Float32Array(r*2),[r,2]),l=0,d=r,c=0,u=this.minmaxMatrix.shape[0];for(let h=0;h<t.length;h++)u=t[h],d=u-c+l,d>l&&Nd.assign(s.hi(d,2).lo(l,0),this.minmaxMatrix.hi(u,2).lo(c,0)),l=d,c=u+1;return l<r&&Nd.assign(s.lo(l,0),this.minmaxMatrix.lo(c,0)),s}_createPrunedQuantized(t){let i=t.length,r=this.quantized.shape[0]-i,s=this._quantizationMethod,l,d;if(s==="norm8x"){d=this._quantized.shape[1];let m=d?r*d:r;l=(0,Hl.default)(new Uint8Array(m),d?[r,d]:[r,1])}else s==="norm565"?l=(0,Hl.default)(new Uint16Array(r),[r]):l=(0,Hl.default)(new Uint32Array(r),[r]);let c=0,u=r,h=0,f=l.shape[0];for(let m=0;m<t.length;m++)f=t[m],u=f-h+c,u>c&&(d?Nd.assign(l.hi(u,d).lo(c,0),this._quantized.hi(f,d).lo(h,0)):Nd.assign(l.hi(u).lo(c),this._quantized.hi(f).lo(h))),c=u,h=f+1;return c<r&&(d?Nd.assign(l.lo(c,0),this._quantized.lo(h,0)):Nd.assign(l.lo(c),this._quantized.lo(h))),l}pruneFeature(t,i,r){let s=this._createPrunedQuantized(t),l=this._createPrunedMinMax(i);return new nr(s,l,this._chunkSize,this._quantizationMethod,r,!0)}static getRequiredNChunks(t,i){return Math.floor(t/i)}static fromArray(t,i,r){let s=t.shape[0],l=Math.floor(s/r),d=(0,Hl.default)(new Float32Array(l*2),[l,2],[2,1]),c;i==="norm8x"?c=(0,Hl.default)(new Uint8Array(t.size),t.shape):i==="norm565"?c=(0,Hl.default)(new Uint16Array(t.shape[0]),[t.shape[0]]):c=(0,Hl.default)(new Uint32Array(t.shape[0]),[t.shape[0]]);for(let u=0;u<l;u++){let h=u*r,f=u+1<l?(u+1)*r:s,m;t.shape.length>1?m=G_.createFromUnnormalized(t.hi(f,t.shape[1]).lo(h,0)):m=G_.createFromUnnormalized(t.hi(f).lo(h)),d.set(u,0,m.minD),d.set(u,1,m.maxD),c.shape.length>1?Nd.assign(c.hi(f,c.shape[1]).lo(h,0),Gn.fromNormalized(m,i).quantized):Nd.assign(c.hi(f).lo(h),Gn.fromNormalized(m,i).quantized)}return new nr(c,d,r,i)}denormDequant(){let t=this._minMaxMatrix.shape[0],i=this._quantized,r=i.shape[0],s=this._quantizationMethod,l=this._chunkSize,d;if(this._isDynamicChunks){if(!this._variableChunkSize)throw new Error("variable chunk must exists if chunkSize isDynamic");d=this._variableChunkSize}let c;s==="norm8x"?c=(0,Hl.default)(new Float32Array(i.size),i.shape):c=(0,Hl.default)(new Float32Array(r*3),[r,3]);let u=0,h=l;for(let f=0;f<t;f++){let[m,p]=[this._minMaxMatrix.get(f,0),this._minMaxMatrix.get(f,1)];this._isDynamicChunks&&(h=d[f]);let g=f+1<t?u+h:r,v;i.shape.length>1?v=new Gn(i.hi(g,i.shape[1]).lo(u,0),s):v=new Gn(i.hi(g).lo(u),s),Nd.assign(c.hi(g,c.shape[1]).lo(u,0),v.dequantize(m,p).denormalize()),u=g}return c}static fetchArrayBuffer(t){return qi(this,null,function*(){return yield(yield fetch(t,{mode:"cors"})).arrayBuffer()})}},eu=sn(Lu()),Ni=sn(ud()),kae="http://127.0.0.1:8000",nm=sn(Lu()),wr=sn(ud()),az=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function sz(t){return t<1e5?t<100?t<10?0:1:t<1e4?t<1e3?2:3:4:t<1e7?t<1e6?5:6:t<1e9?t<1e8?7:8:9}function oz(t,i){if(t===i)return 0;if(~~t===t&&~~i===i){if(t===0||i===0)return t<i?-1:1;if(t<0||i<0){if(i>=0)return-1;if(t>=0)return 1;t=-t,i=-i}let l=sz(t),d=sz(i),c=0;return l<d?(t*=az[d-l-1],i/=10,c=-1):l>d&&(i*=az[l-d-1],t/=10,c=1),t===i?c:t<i?-1:1}let r=String(t),s=String(i);return r===s?0:r<s?-1:1}function Sae(t){let i=0;for(;t>=32;)i|=t&1,t>>=1;return t+i}function lz(t,i,r,s){let l=i+1;if(l===r)return 1;if(s(t[l++],t[i])<0){for(;l<r&&s(t[l],t[l-1])<0;)l++;Aae(t,i,l)}else for(;l<r&&s(t[l],t[l-1])>=0;)l++;return l-i}function Aae(t,i,r){for(r--;i<r;){let s=t[i];t[i++]=t[r],t[r--]=s}}function dz(t,i,r,s,l){for(s===i&&s++;s<r;s++){let d=t[s],c=i,u=s;for(;c<u;){let f=c+u>>>1;l(d,t[f])<0?u=f:c=f+1}let h=s-c;switch(h){case 3:t[c+3]=t[c+2];case 2:t[c+2]=t[c+1];case 1:t[c+1]=t[c];break;default:for(;h>0;)t[c+h]=t[c+h-1],h--}t[c]=d}}function h4(t,i,r,s,l,d){let c=0,u=0,h=1;if(d(t,i[r+l])>0){for(u=s-l;h<u&&d(t,i[r+l+h])>0;)c=h,h=(h<<1)+1,h<=0&&(h=u);h>u&&(h=u),c+=l,h+=l}else{for(u=l+1;h<u&&d(t,i[r+l-h])<=0;)c=h,h=(h<<1)+1,h<=0&&(h=u);h>u&&(h=u);let f=c;c=l-h,h=l-f}for(c++;c<h;){let f=c+(h-c>>>1);d(t,i[r+f])>0?c=f+1:h=f}return h}function f4(t,i,r,s,l,d){let c=0,u=0,h=1;if(d(t,i[r+l])<0){for(u=l+1;h<u&&d(t,i[r+l-h])<0;)c=h,h=(h<<1)+1,h<=0&&(h=u);h>u&&(h=u);let f=c;c=l-h,h=l-f}else{for(u=s-l;h<u&&d(t,i[r+l+h])>=0;)c=h,h=(h<<1)+1,h<=0&&(h=u);h>u&&(h=u),c+=l,h+=l}for(c++;c<h;){let f=c+(h-c>>>1);d(t,i[r+f])<0?h=f:c=f+1}return h}var Cae=class{constructor(t,i){ea(this,"array",null),ea(this,"compare",null),ea(this,"minGallop",7),ea(this,"length",0),ea(this,"tmpStorageLength",256),ea(this,"stackLength",0),ea(this,"runStart",null),ea(this,"runLength",null),ea(this,"stackSize",0),this.array=t,this.compare=i,this.length=t.length,this.length<2*256&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}pushRun(t,i){this.runStart[this.stackSize]=t,this.runLength[this.stackSize]=i,this.stackSize+=1}mergeRuns(){for(;this.stackSize>1;){let t=this.stackSize-2;if(t>=1&&this.runLength[t-1]<=this.runLength[t]+this.runLength[t+1]||t>=2&&this.runLength[t-2]<=this.runLength[t]+this.runLength[t-1])this.runLength[t-1]<this.runLength[t+1]&&t--;else if(this.runLength[t]>this.runLength[t+1])break;this.mergeAt(t)}}forceMergeRuns(){for(;this.stackSize>1;){let t=this.stackSize-2;t>0&&this.runLength[t-1]<this.runLength[t+1]&&t--,this.mergeAt(t)}}mergeAt(t){let i=this.compare,r=this.array,s=this.runStart[t],l=this.runLength[t],d=this.runStart[t+1],c=this.runLength[t+1];this.runLength[t]=l+c,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--;let u=f4(r[d],r,s,l,0,i);s+=u,l-=u,l!==0&&(c=h4(r[s+l-1],r,d,c,c-1,i),c!==0&&(l<=c?this.mergeLow(s,l,d,c):this.mergeHigh(s,l,d,c)))}mergeLow(t,i,r,s){let l=this.compare,d=this.array,c=this.tmp,u=0;for(u=0;u<i;u++)c[u]=d[t+u];let h=0,f=r,m=t;if(d[m++]=d[f++],--s===0){for(u=0;u<i;u++)d[m+u]=c[h+u];return}if(i===1){for(u=0;u<s;u++)d[m+u]=d[f+u];d[m+s]=c[h];return}let p=this.minGallop;for(;;){let g=0,v=0,w=!1;do if(l(d[f],c[h])<0){if(d[m++]=d[f++],v++,g=0,--s===0){w=!0;break}}else if(d[m++]=c[h++],g++,v=0,--i===1){w=!0;break}while((g|v)<p);if(w)break;do{if(g=f4(d[f],c,h,i,0,l),g!==0){for(u=0;u<g;u++)d[m+u]=c[h+u];if(m+=g,h+=g,i-=g,i<=1){w=!0;break}}if(d[m++]=d[f++],--s===0){w=!0;break}if(v=h4(c[h],d,f,s,0,l),v!==0){for(u=0;u<v;u++)d[m+u]=d[f+u];if(m+=v,f+=v,s-=v,s===0){w=!0;break}}if(d[m++]=c[h++],--i===1){w=!0;break}p--}while(g>=7||v>=7);if(w)break;p<0&&(p=0),p+=2}if(this.minGallop=p,p<1&&(this.minGallop=1),i===1){for(u=0;u<s;u++)d[m+u]=d[f+u];d[m+s]=c[h]}else{if(i===0)throw new Error("mergeLow preconditions were not respected");for(u=0;u<i;u++)d[m+u]=c[h+u]}}mergeHigh(t,i,r,s){let l=this.compare,d=this.array,c=this.tmp,u=0;for(u=0;u<s;u++)c[u]=d[r+u];let h=t+i-1,f=s-1,m=r+s-1,p=0,g=0;if(d[m--]=d[h--],--i===0){for(p=m-(s-1),u=0;u<s;u++)d[p+u]=c[u];return}if(s===1){for(m-=i,h-=i,g=m+1,p=h+1,u=i-1;u>=0;u--)d[g+u]=d[p+u];d[m]=c[f];return}let v=this.minGallop;for(;;){let w=0,x=0,_=!1;do if(l(c[f],d[h])<0){if(d[m--]=d[h--],w++,x=0,--i===0){_=!0;break}}else if(d[m--]=c[f--],x++,w=0,--s===1){_=!0;break}while((w|x)<v);if(_)break;do{if(w=i-f4(c[f],d,t,i,i-1,l),w!==0){for(m-=w,h-=w,i-=w,g=m+1,p=h+1,u=w-1;u>=0;u--)d[g+u]=d[p+u];if(i===0){_=!0;break}}if(d[m--]=c[f--],--s===1){_=!0;break}if(x=s-h4(d[h],c,0,s,s-1,l),x!==0){for(m-=x,f-=x,s-=x,g=m+1,p=f+1,u=0;u<x;u++)d[g+u]=c[p+u];if(s<=1){_=!0;break}}if(d[m--]=d[h--],--i===0){_=!0;break}v--}while(w>=7||x>=7);if(_)break;v<0&&(v=0),v+=2}if(this.minGallop=v,v<1&&(this.minGallop=1),s===1){for(m-=i,h-=i,g=m+1,p=h+1,u=i-1;u>=0;u--)d[g+u]=d[p+u];d[m]=c[f]}else{if(s===0)throw new Error("mergeHigh preconditions were not respected");for(p=m-(s-1),u=0;u<s;u++)d[p+u]=c[u]}}};function Eae(t,i,r,s){if(!Array.isArray(t))throw new TypeError("Can only sort arrays");i?typeof i!="function"&&(s=r,r=i,i=oz):i=oz,r||(r=0),s||(s=t.length);let l=s-r;if(l<2)return;let d=0;if(l<32){d=lz(t,r,s,i),dz(t,r,s,r+d,i);return}let c=new Cae(t,i),u=Sae(l);do{if(d=lz(t,r,s,i),d<u){let h=l;h>u&&(h=u),dz(t,r,r+h,r+d,i),d=h}c.pushRun(r,d),c.mergeRuns(),l-=d,r+=d}while(l!==0);c.forceMergeRuns()}function p4(t){let i=(0,nm.default)(new Int32Array(t.shape[0]),[t.shape[0]]),r=(0,nm.default)(new Int32Array(t.shape[0]),[t.shape[0]]);return wr.bands(i,t,1023),wr.lshifts(r,i,16),wr.bxoreq(i,r),wr.bandseq(i,4278190335),wr.lshifts(r,i,8),wr.bxoreq(i,r),wr.bandseq(i,50393103),wr.lshifts(r,i,4),wr.bxoreq(i,r),wr.bandseq(i,51130563),wr.lshifts(r,i,2),wr.bxoreq(i,r),wr.bandseq(i,153391689),i}function Mae(t){let i=p4(t.pick(null,0)),r=p4(t.pick(null,1));wr.lshiftseq(r,1);let s=p4(t.pick(null,2));return wr.lshiftseq(s,2),wr.boreq(i,r),wr.boreq(i,s),i}function rm(t,i){if(t.shape[0]!==i.shape[0])throw new Error("wrong length");let r=(0,nm.default)(new Float32Array(t.size),t.shape,t.stride,t.offset);for(let s=0;s<i.shape[0];s++){let l=i.get(s);if(t.shape.length>1)for(let d=0;d<t.shape[1];d++)r.set(s,d,t.get(l,d));else r.set(s,t.get(l))}return r}function Tae(t){let i=wr.sup(t),r=wr.inf(t),s=1e3/Math.min(1e3,i-r),l=(0,nm.default)(new Float32Array(t.data),t.shape);wr.mulseq(l,s);let d=(0,nm.default)(new Int32Array(l.data),t.shape),c=Mae(d),u=Array.from(c.data).map((f,m)=>[f,m]);Eae(u,(f,m)=>f[0]-m[0]);let h=u.map(([f,m])=>m);return(0,nm.default)(Uint32Array.from(h))}var _h=class{constructor(t,i,r,s,l,d,c,u,h,f){this.propertyDescs=t,this.format=i,this.nsplats=r,this.xyz=s,this.colors=l,this.harmonics=d,this.opacity=c,this.scaling=u,this.rotation=h,this.maxSHDegree=f}getPlyBinary(){let t=_h._generateHeaderString(this.propertyDescs,this.format,this.nsplats),i=new TextEncoder().encode(t),r=Object.keys(this.propertyDescs).length,s=(0,eu.default)(new Float32Array(this.nsplats*r),[this.nsplats,r]);if(Ni.assign(s.pick(null,this.propertyDescs.x.index),this.xyz.pick(null,0)),Ni.assign(s.pick(null,this.propertyDescs.y.index),this.xyz.pick(null,1)),Ni.assign(s.pick(null,this.propertyDescs.z.index),this.xyz.pick(null,2)),Ni.assign(s.pick(null,this.propertyDescs.f_dc_0.index),this.colors.pick(null,0)),Ni.assign(s.pick(null,this.propertyDescs.f_dc_1.index),this.colors.pick(null,1)),Ni.assign(s.pick(null,this.propertyDescs.f_dc_2.index),this.colors.pick(null,2)),Ni.assign(s.pick(null,this.propertyDescs.opacity.index),this.opacity.pick(null,0)),Ni.assign(s.pick(null,this.propertyDescs.scale_0.index),this.scaling.pick(null,0)),Ni.assign(s.pick(null,this.propertyDescs.scale_1.index),this.scaling.pick(null,1)),Ni.assign(s.pick(null,this.propertyDescs.scale_2.index),this.scaling.pick(null,2)),Ni.assign(s.pick(null,this.propertyDescs.rot_0.index),this.rotation.pick(null,0)),Ni.assign(s.pick(null,this.propertyDescs.rot_1.index),this.rotation.pick(null,1)),Ni.assign(s.pick(null,this.propertyDescs.rot_2.index),this.rotation.pick(null,2)),Ni.assign(s.pick(null,this.propertyDescs.rot_3.index),this.rotation.pick(null,3)),this.harmonics&&this.harmonics.length>0)for(let c=0;c<this.harmonics.length;c++){let u=c*3;Ni.assign(s.pick(null,this.propertyDescs[`f_rest_${u}`].index),this.harmonics[c].pick(null,0)),Ni.assign(s.pick(null,this.propertyDescs[`f_rest_${u+1}`].index),this.harmonics[c].pick(null,1)),Ni.assign(s.pick(null,this.propertyDescs[`f_rest_${u+2}`].index),this.harmonics[c].pick(null,2))}let l=new Uint8Array(s.data.buffer),d=new Uint8Array(l.length+i.length);return d.set(i),d.set(l,i.length),d.buffer}save(t,i){let r=this.getPlyBinary(),s=new Blob([r],{type:"application/octet-stream"}),l=new File([s],t),d=new FormData;d.append("file",l),d.append("filename",t),d.append("basedir",i),fetch(`${kae}/push_file`,{method:"POST",body:d})}static loadFile(t){return qi(this,null,function*(){return yield(yield fetch(t)).arrayBuffer()})}mortonPositionSplatsSort(){let t=Tae(this.xyz),i=rm(this.xyz,t),r=rm(this.colors,t),s=rm(this.opacity,t),l=rm(this.scaling,t),d=rm(this.rotation,t),c=[];for(let u=0;u<this.harmonics.length;u++)c.push(rm(this.harmonics[u],t));return new _h(this.propertyDescs,this.format,this.nsplats,i,r,c,s,l,d,this.maxSHDegree)}static _generateHeaderString(t,i,r){let s=`ply
format ${i.format} ${i.version}
element vertex ${r}`,l=Object.keys(t).length,d=Array(l);for(let c in t){let u=t[c];d[u.index]={name:c,dtype:u.dtype}}for(let c=0;c<d.length;c++)s=`${s}
property ${d[c].dtype} ${d[c].name}`;return`${s}
end_header
`}static fromArrayBuffer(t,i=3){let{splatCount:r,vertexData:s,propertiesDesc:l,format:d}=_h.decodeHeader(t),c=s.buffer.slice(s.byteOffset),u=Object.keys(l).length,h=(0,eu.default)(new Float32Array(c),[r,u]),f=0,m={},p={double:8,int:4,uint:4,float:4,short:2,ushort:2,uchar:1};for(let C in l)if(l.hasOwnProperty(C)){let M=l[C].dtype;m[C]=f,f+=p[M]}let g=(0,eu.default)(new Float32Array(r*3),[r,3]);Ni.assign(g.pick(null,0),h.pick(null,m.x/4)),Ni.assign(g.pick(null,1),h.pick(null,m.y/4)),Ni.assign(g.pick(null,2),h.pick(null,m.z/4));let v=(0,eu.default)(new Float32Array(r*3),[r,3]);Ni.assign(v.pick(null,0),h.pick(null,m.scale_0/4)),Ni.assign(v.pick(null,1),h.pick(null,m.scale_1/4)),Ni.assign(v.pick(null,2),h.pick(null,m.scale_2/4));let w=(0,eu.default)(new Float32Array(r*3),[r,3]);Ni.assign(w.pick(null,0),h.pick(null,m.f_dc_0/4)),Ni.assign(w.pick(null,1),h.pick(null,m.f_dc_1/4)),Ni.assign(w.pick(null,2),h.pick(null,m.f_dc_2/4));let x=(0,eu.default)(new Float32Array(r*4),[r,4]);Ni.assign(x.pick(null,0),h.pick(null,m.rot_1/4)),Ni.assign(x.pick(null,1),h.pick(null,m.rot_2/4)),Ni.assign(x.pick(null,2),h.pick(null,m.rot_3/4)),Ni.assign(x.pick(null,3),h.pick(null,m.rot_0/4));for(let C=0;C<r;C++){let M=x.pick(C,null),D=Math.sqrt(wn(M.get(0),2)+wn(M.get(1),2)+wn(M.get(2),2)+wn(M.get(3),2));Ni.divseq(M,D)}let _=(0,eu.default)(new Float32Array(r*1),[r,1]);Ni.assign(_.pick(null,0),h.pick(null,m.opacity/4));let k=wn(Math.min(Math.max(i,0),3)+1,2)-1,A=[];for(let C=0;C<k;C++){let M=(0,eu.default)(new Float32Array(r*3),[r,3]),D=C*3;Ni.assign(M.pick(null,0),h.pick(null,m[`f_rest_${D}`]/4)),Ni.assign(M.pick(null,1),h.pick(null,m[`f_rest_${D+1}`]/4)),Ni.assign(M.pick(null,2),h.pick(null,m[`f_rest_${D+2}`]/4)),A.push(M)}return new _h(l,d,r,g,w,A,_,v,x,i)}static fromPLYFile(t,i=3){return qi(this,null,function*(){let r=yield _h.loadFile(t);return _h.fromArrayBuffer(r,i)})}static decodeHeader(t){let i=new TextDecoder,r=0,s="",l=100;for(;;){if(r+l>=t.byteLength)throw new Error("End of file reached while searching for end of header");let v=new Uint8Array(t,r,l);s+=i.decode(v),r+=l;let w=r-l*2,x=new Uint8Array(t,Math.max(0,w),w>0?l*2:l);if(i.decode(x).includes("end_header"))break}let d=s.split(`
`),c=0,u={},h={},f=0,m;for(let v=0;v<d.length;v++){let w=d[v].trim();if(w.startsWith("element vertex")){let x=w.match(/\d+/);x&&(c=parseInt(x[0]))}else if(w.startsWith("property")){let x=w.match(/(\w+)\s+(\w+)\s+(\w+)/);if(x){let _=x[2],k=x[3];u[k]=f,h[k]={dtype:_,index:f},f++}}else if(w.startsWith("format")){let x=w.match(/(\w+)\s+(\w+)\s+(\d+\.?\d*)/);x&&(m={format:x[2],version:x[3]})}else if(w==="end_header")break}let p=s.indexOf("end_header")+10+1,g=new DataView(t,p);return{splatCount:c,vertexData:g,headerOffset:r,propertiesDesc:h,format:m}}},m4=class{constructor(t,i,r,s,l,d,c,u){this.config=t,this.xyz=i,this.scaling=r,this.color=s,this.opacity=l,this.harmonics=c,this.quaternion=d,this.variableChunkSize=u}get isDynamicChunks(){return this.variableChunkSize&&this.variableChunkSize.length>0}get nchunks(){return this.xyz.nchunks}get nsplats(){return this.xyz.length}get chunkSize(){return this.config.chunkSize}static compressFromGaussianData(t,i){let r=nr.fromArray(t.xyz,i.xyz,i.chunkSize),s=nr.fromArray(t.scaling,i.scaling,i.chunkSize),l=nr.fromArray(t.colors,i.color,i.chunkSize),d=nr.fromArray(t.opacity,i.opacity,i.chunkSize),c=nr.fromArray(t.rotation,i.quaternion,i.chunkSize),u=t.harmonics,h=[];if(i.harmonics)for(let f=0;f<u.length;f++){let m=nr.fromArray(u[f],i.harmonics,i.chunkSize);h.push(m)}return new m4(i,r,s,l,d,c,h)}_countIndexesInChunks(t){let i=[],r=this.nchunks,s=this.chunkSize,l=this.nsplats,d=nr.getRequiredNChunks(l,s);if(r===d)for(let c=0;c<t.length;c++){let u=t[c],h=Math.floor(u/this.chunkSize);h in i?i[h].push(u):i[h]=[u]}else{let c=this.variableChunkSize,u={},h=0;for(let f=0;f<r;f++)u[f]=h,h+=c[f];for(let f=0;f<t.length;f++){let m=t[f],p=Math.min(Math.floor(m/s),r-1);for(;m>=u[p]+c[p];)p++;p in i?i[p].push(m):i[p]=[m]}}return i}pruneSplats(t){let i=this._countIndexesInChunks(t),r,s=[];return i.length>0&&(r=this.variableChunkSize?[...this.variableChunkSize]:Array(this.nchunks).fill(this.chunkSize),i.forEach((l,d)=>{r[d]-=l.length,r[d]<=0&&s.push(d)}),r=r.filter(l=>l>0)),new m4(this.config,this.xyz.pruneFeature(t,s,r),this.scaling.pruneFeature(t,s,r),this.color.pruneFeature(t,s,r),this.opacity.pruneFeature(t,s,r),this.quaternion.pruneFeature(t,s,r),this.harmonics?this.harmonics.map(l=>l.pruneFeature(t,s,this.variableChunkSize)):void 0,r)}static loadConfig(t){return qi(this,null,function*(){return yield(yield fetch(t,{method:"GET",mode:"cors",headers:{Accept:"application/json"}})).json()})}toGaussians(){var l;let t={format:"binary_little_endian",version:"1.0"},i={},r=0;if(i.x={dtype:"float",index:r},r++,i.y={dtype:"float",index:r},r++,i.z={dtype:"float",index:r},r++,i.f_dc_0={dtype:"float",index:r},r++,i.f_dc_1={dtype:"float",index:r},r++,i.f_dc_2={dtype:"float",index:r},r++,this.harmonics&&this.harmonics.length>0)for(let d=0;d<this.harmonics.length;d++)i[`f_rest_${d}`]={dtype:"float",index:r},r++,i[`f_rest_${d+1}`]={dtype:"float",index:r},r++,i[`f_rest_${d+2}`]={dtype:"float",index:r},r++;i.opacity={dtype:"float",index:r},r++,i.scale_0={dtype:"float",index:r},r++,i.scale_1={dtype:"float",index:r},r++,i.scale_2={dtype:"float",index:r},r++,i.rot_0={dtype:"float",index:r},r++,i.rot_1={dtype:"float",index:r},r++,i.rot_2={dtype:"float",index:r},r++,i.rot_3={dtype:"float",index:r},r++;let s=(l=this.harmonics)==null?void 0:l.map(d=>d.denormDequant());return new _h(i,t,this.xyz.length,this.xyz.denormDequant(),this.color.denormDequant(),s||[],this.opacity.denormDequant(),this.scaling.denormDequant(),this.quaternion.denormDequant(),3)}},am=sn(Lu()),lo=sn(ud()),cz={xyz:3,color:3,opacity:1,scaling:3,quaternion:4,harmonics:3},g4=class{constructor(t){this._buffer=t}get buffer(){return this._buffer}get decoded(){return this._decoded||(this._decoded=this.decodeBuffer()),this._decoded}get colorsA(){let t=.28209479177387814,i=this.decoded.color.denormDequant(),r=this.decoded.opacity.denormDequant(),s=(0,am.default)(new Float32Array(i.shape[0]*4),[i.shape[0],4]);return lo.mulseq(i,t),lo.addseq(i,.5),lo.mulseq(i,255),lo.maxseq(i,0),lo.minseq(i,255),lo.negeq(r),lo.expeq(r),lo.addseq(r,1),lo.recipeq(r),lo.mulseq(r,255),lo.assign(s.hi(i.shape[0],3).lo(0,0),i),lo.assign(s.hi(i.shape[0],4).lo(0,3),r),(0,am.default)(new Uint8Array(s.data),[i.shape[0],4]).data}get nsplats(){return this.decoded.nsplats}getSplatCount(){return this.decoded.nsplats}get precomputedCovarianceBufferData(){return this._precomputedCovarianceBufferData}decodeBuffer(){let{splatCount:t,chunkCount:i,chunkSize:r,typeChunks:s,vertexData:l,propertiesDesc:d}=this.decodeHeader(),c={xyz:d.xyz.compressionMethod,color:d.color.compressionMethod,opacity:d.opacity.compressionMethod,scaling:d.scaling.compressionMethod,quaternion:d.quaternion.compressionMethod,chunkSize:r};d.harmonics_0&&(c.harmonics=d.harmonics_0.compressionMethod);let u=l.byteOffset,h=Array(Object.keys(d).length);for(let _ in d)h[d[_].index]={name:_,method:d[_].compressionMethod};let f=i*2*4,m=u,p=s==="dynamic"?i*2:0,g,v=!1;if(p>0){let _=new Uint16Array(l.buffer.slice(m,m+p));m+=p,g=Array.from(_),v=!0}let w={};for(let _ of h){let k=0,A=!0;if(_.method==="norm8x")k=t*1*cz[_.name];else if(_.method==="norm11")k=t*4;else if(_.method==="norm565")k=t*2;else throw A=!1,new Error(`Not Implemented format: ${_.method}`);let C;if(A){let P=l.buffer.slice(m,m+f);C=(0,am.default)(new Float32Array(P),[i,2]),m+=f}else throw new Error("loading chunk byt hasnot minmax!");let M=l.buffer.slice(m,m+k);m+=k;let D;if(_.method==="norm8x")D=(0,am.default)(new Uint8Array(M),[t,cz[_.name]]);else if(_.method==="norm11")D=(0,am.default)(new Uint32Array(M));else if(_.method==="norm565")D=(0,am.default)(new Uint16Array(M));else throw new Error(`Not Implemented format: ${_.method}`);w[_.name]=new nr(D,C,r,_.method,g,v)}let x=[];for(let _=0;_<15;_++){let k=w[`harmonics_${_}`];k&&(x.push(k),delete w[`harmonics_${_}`])}return x.length>0&&(w.harmonics=x),new m4(c,w.xyz,w.scaling,w.color,w.opacity,w.quaternion,w.harmonics,g)}buildPreComputedBuffers(){let t=this.decoded,i=t.nsplats,r=new ArrayBuffer(24*i),s=new Float32Array(r),l=t.scaling.denormDequant(),d=t.quaternion.denormDequant(),c=new Ut,u=new Me,h=new Me,f=new Me,m=new Ze;for(let p=0;p<i;p++){m.makeScale(Math.exp(l.get(p,0)),Math.exp(l.get(p,1)),Math.exp(l.get(p,2))),h.setFromMatrix4(m),c.set(d.get(p,0),d.get(p,1),d.get(p,2),d.get(p,3)),m.makeRotationFromQuaternion(c),u.setFromMatrix4(m),f.copy(u).multiply(h);let g=f.elements;s[6*p]=g[0]*g[0]+g[3]*g[3]+g[6]*g[6],s[6*p+1]=g[0]*g[1]+g[3]*g[4]+g[6]*g[7],s[6*p+2]=g[0]*g[2]+g[3]*g[5]+g[6]*g[8],s[6*p+3]=g[1]*g[1]+g[4]*g[4]+g[7]*g[7],s[6*p+4]=g[1]*g[2]+g[4]*g[5]+g[7]*g[8],s[6*p+5]=g[2]*g[2]+g[5]*g[5]+g[8]*g[8]}this._precomputedCovarianceBufferData=r}decodeHeader(){let t=this._buffer,i=new TextDecoder,r=0,s="",l=100;for(;;){if(r+l>=t.byteLength)throw new Error("End of file reached while searching for end of header");let w=new Uint8Array(t,r,l);s+=i.decode(w),r+=l;let x=r-l*2,_=new Uint8Array(t,Math.max(0,x),x>=0?l*2:l);if(i.decode(_).includes("end_header"))break}let d=s.split(`
`),c=0,u=0,h=0,f=0,m="",p={};for(let w=0;w<d.length;w++){let x=d[w].trim();if(x.startsWith("element vertex")){let _=x.match(/\d+/);_&&(c=parseInt(_[0]))}else if(x.startsWith("property")){let _=x.match(/(\w+)\s+(\w+)\s+(\w+)/);if(_){let k=_[2],A=_[3];p[k]={compressionMethod:A,index:f},f++}}else if(x.startsWith("element chunks")){let _=x.match(/\d+/);_&&(u=parseInt(_[0]))}else if(x.startsWith("element chunkSize")){let _=x.match(/\d+/);_&&(h=parseInt(_[0]))}else if(x.startsWith("element typeChunks")){let _=x.match(/(\w+)\s+(\w+)\s+(\w+)/);_&&(m=_[3])}else if(x==="end_header")break}let g=s.indexOf("end_header")+10+1,v=new DataView(t,g);return{splatCount:c,chunkCount:u,chunkSize:h,typeChunks:m,vertexData:v,propertiesDesc:p}}pruneSplats(t){let i=this.decodeBuffer().pruneSplats(t);return g4.fromCompressedGaussianSplats(i)}static fromCompressedGaussianSplats(t){let i=t.xyz.length,r=t.xyz.nchunks,s=`gspline
element vertex ${i}
element chunks ${r}
element chunkSize ${t.chunkSize}
element typeChunks ${t.isDynamicChunks?"dynamic":"static"}
property xyz ${t.xyz.method}
property color ${t.color.method}
property opacity ${t.opacity.method}
property scaling ${t.scaling.method}
property quaternion ${t.quaternion.method}`;if(t.harmonics&&t.harmonics.length>0)for(let T=0;T<t.harmonics.length;T++)s=`${s}
property harmonics_${T} ${t.harmonics[T].method}`;s=`${s}
end_header
`;let l=new TextEncoder().encode(s),d=r*2*4,c=t.xyz.quantized.data.buffer.byteLength,u=t.xyz instanceof nr?d:0,h=t.color.quantized.data.buffer.byteLength,f=t.color instanceof nr?d:0,m=t.opacity.quantized.data.buffer.byteLength,p=t.opacity instanceof nr?d:0,g=t.scaling.quantized.data.buffer.byteLength,v=t.scaling instanceof nr?d:0,w=t.quaternion.quantized.data.buffer.byteLength,x=t.quaternion instanceof nr?d:0,_=t.variableChunkSize?Uint16Array.from(t.variableChunkSize):void 0,k=_?_.byteLength:0,A=l.byteLength+k+c+u+h+f+m+p+g+v+w+x,C=0,M=0;if(t.harmonics&&t.harmonics.length>0)for(let T=0;T<t.harmonics.length;T++)C+=t.harmonics[T].quantized.data.buffer.byteLength,M+=t.harmonics[T]instanceof nr?d:0;C=0,M=0,A+=C+M;let D=new Uint8Array(A),P=0;if(D.set(l,P),P+=l.byteLength,k>0&&(D.set(new Uint8Array(_.buffer),P),P+=k),t.xyz instanceof nr&&(D.set(new Uint8Array(t.xyz.minmaxMatrix.data.buffer),P),P+=d),D.set(new Uint8Array(t.xyz.quantized.data.buffer),P),P+=c,t.color instanceof nr&&(D.set(new Uint8Array(t.color.minmaxMatrix.data.buffer),P),P+=d),D.set(new Uint8Array(t.color.quantized.data.buffer),P),P+=h,t.opacity instanceof nr&&(D.set(new Uint8Array(t.opacity.minmaxMatrix.data.buffer),P),P+=d),D.set(new Uint8Array(t.opacity.quantized.data.buffer),P),P+=m,t.scaling instanceof nr&&(D.set(new Uint8Array(t.scaling.minmaxMatrix.data.buffer),P),P+=d),D.set(new Uint8Array(t.scaling.quantized.data.buffer),P),P+=g,t.quaternion instanceof nr&&(D.set(new Uint8Array(t.quaternion.minmaxMatrix.data.buffer),P),P+=d),D.set(new Uint8Array(t.quaternion.quantized.data.buffer),P),P+=w,C>0&&t.harmonics&&t.harmonics.length>0)for(let T=0;T<t.harmonics.length;T++){let O=t.harmonics[T];O instanceof nr&&(D.set(new Uint8Array(O.minmaxMatrix.data.buffer),P),P+=d),D.set(new Uint8Array(O.quantized.data.buffer),P),P+=O.quantized.data.byteLength}return new g4(D.buffer)}},Dae="AGFzbQEAAAAADwhkeWxpbmsuMAEEAAAAAAETA2AAAGAIf39/f39/f38AYAABfwISAQNlbnYGbWVtb3J5AgMAgIAEAwQDAAECBzkDEV9fd2FzbV9jYWxsX2N0b3JzAAALc29ydEluZGV4ZXMAARNlbXNjcmlwdGVuX3Rsc19pbml0AAIK3gMDAwABC9IDAwF/BnwBfgJAIAdFDQAgAysDUCEMIAMrAzAhDSADKwMQIQ5BACEDRP///////+9/IQtEAAAAAAAAEAAhCgNAIAIgA0ECdGoCfyAOIAEgA0EMbGoiCCoCALuiIA0gCCoCBLuioCAMIAgqAgi7oqBEAAAAAAAAsECiIgmZRAAAAAAAAOBBYwRAIAmqDAELQYCAgIB4CzYCACAJIAsgCSALYxshCyAJIAogCSAKZBshCiADQQFqIgMgB0cNAAsgB0UNACAGuCAKIAuhoyEJQQAhAwNAAn8gCSACIANBAnRqIgEoAgC3IAuhoiIKmUQAAAAAAADgQWMEQCAKqgwBC0GAgICAeAshCCABIAg2AgAgBCAIQQJ0aiIBIAEoAgBBAWo2AgAgA0EBaiIDIAdHDQALCyAGQQJPBEAgBCgCACEIQQEhAwNAIAQgA0ECdGoiASABKAIAIAhqIgg2AgAgA0EBaiIDIAZHDQALCyAHQQFrIgGtIQ8DQCAEIAIgD6dBAnQiA2ooAgBBAnRqIgcgBygCAEEBayIHNgIAIAUgASAHa0ECdGogACADaigCADYCACAPUCEDIA9CAX0hDyADRQ0ACyAGBEAgBEEAIAZBAnT8CwALCwQAQQAL",tu=class{};ea(tu,"DepthMapRange",65536),ea(tu,"MemoryPageSize",65536),ea(tu,"BytesPerFloat",4),ea(tu,"BytesPerInt",4);function Pae(t){let i,r,s,l,d,c,u,h,f,m,p,g,v,w,x,_;function k(B){let j=new Float64Array(m,c,16);for(let H=0;H<16;H++)j[H]=B[H];let V;if(s>1){i.exports.sortIndexes(l,d,f,c,u,h,g.DepthMapRange,s);let H=new Uint32Array(s);V=H.buffer,H.set(new Uint32Array(m,h,s))}else if(s===1){let H=new Uint32Array(s);H[0]=new Uint32Array(m,l,r)[0],V=H.buffer}else V=new ArrayBuffer(0);t.postMessage({sortDone:!0,indexesBuffer:V},[V])}function A(B,j,V){let H=new Float32Array(m,d,r*3);s=0;let Y=new Uint32Array(m,l,r);for(let se=0;se<V.length-1;se++){let re=j[se],$=B[se].elements,te=re.filter(oe=>oe.enabled&&oe.mode==="Include").map(oe=>oe.type==="Box"?P(oe):z(oe)),he=re.filter(oe=>oe.enabled&&oe.mode==="Exclude").map(oe=>oe.type==="Box"?P(oe):z(oe));for(let oe=V[se];oe<V[se+1];oe++){let ee=v[oe*3],pe=v[oe*3+1],ce=v[oe*3+2];if((te.length===0||M(ee,pe,ce,te))&&(he.length===0||!M(ee,pe,ce,he))){let ve=1/($[3]*ee+$[7]*pe+$[11]*ce+$[15]);H[s*3]=($[0]*ee+$[4]*pe+$[8]*ce+$[12])*ve,H[s*3+1]=($[1]*ee+$[5]*pe+$[9]*ce+$[13])*ve,H[s*3+2]=($[2]*ee+$[6]*pe+$[10]*ce+$[14])*ve,Y[s]=oe,s++}}}}function C(B,j){let V=[],H=j.filter(re=>re.enabled&&re.mode==="Include").map(re=>re.type==="Box"?P(re):z(re)),Y=j.filter(re=>re.enabled&&re.mode==="Exclude").map(re=>re.type==="Box"?P(re):z(re)),se=B.length;for(let re=0;re<se;re+=3){let $=B[re],te=B[re+1],he=B[re+2];(H.length===0||M($,te,he,H))&&(Y.length===0||!M($,te,he,Y))||V.push(re/3)}return console.log(V),V}function M(B,j,V,H,Y){return H[Y==="Intersect"?"every":"some"](se=>{let re=D(B,j,V,se.invRotationMatrix,se.cropCenter);return Array.isArray(se)?O(re.x,re.y,re.z,se):L(re.x,re.y,re.z,se)})}function D(B,j,V,H,Y){let se=B-Y[0],re=j-Y[1],$=V-Y[2],te=1/(H[3]*se+H[7]*re+H[11]*$+H[15]);return{x:(H[0]*se+H[4]*re+H[8]*$+H[12])*te+Y[0],y:(H[1]*se+H[5]*re+H[9]*$+H[13])*te+Y[1],z:(H[2]*se+H[6]*re+H[10]*$+H[14])*te+Y[2]}}function P(B){let j=B.cropSize[0]/2,V=B.cropSize[1]/2,H=B.cropSize[2]/2,Y=[B.cropCenter[0]-j,B.cropCenter[1]-V,B.cropCenter[2]-H,B.cropCenter[0]+j,B.cropCenter[1]+V,B.cropCenter[2]+H],se=T(B.cropRotation);return Object.assign(Y,{invRotationMatrix:se,cropCenter:B.cropCenter})}function T(B){let j=[],V=B[0]*Math.PI/180,H=B[1]*Math.PI/180,Y=B[2]*Math.PI/180,se=Math.cos(V),re=Math.sin(V),$=Math.cos(H),te=Math.sin(H),he=Math.cos(Y),oe=Math.sin(Y),ee=se*he,pe=se*oe,ce=re*he,ve=re*oe;return j[0]=$*he,j[1]=-$*oe,j[2]=te,j[4]=pe+ce*te,j[5]=ee-ve*te,j[6]=-re*$,j[8]=ve-ee*te,j[9]=ce+pe*te,j[10]=se*$,j[12]=0,j[13]=0,j[14]=0,j[3]=0,j[7]=0,j[11]=0,j[15]=1,j}function O(B,j,V,H){return B>=H[0]&&B<=H[3]&&j>=H[1]&&j<=H[4]&&V>=H[2]&&V<=H[5]}function z(B){let j=2/B.cropSize[0],V=2/B.cropSize[1],H=2/B.cropSize[2],Y=T(B.cropRotation);return{invRadiusX:j,invRadiusY:V,invRadiusZ:H,cropCenter:B.cropCenter,invRotationMatrix:Y}}function L(B,j,V,H){let Y=(B-H.cropCenter[0])*H.invRadiusX,se=(j-H.cropCenter[1])*H.invRadiusY,re=(V-H.cropCenter[2])*H.invRadiusZ;return Y*Y+se*se+re*re<=1}t.onmessage=B=>{if(B.data.getCroppedIndexes){let j=new Uint32Array(C(new Float32Array(B.data.positions),B.data.crops)).buffer;t.postMessage({outOfBoundsIndexes:j},[j])}else if(B.data.positions)p=B.data.positions,v=new Float32Array(p),x=B.data.meshMatrixWorlds,_=B.data.cropsArray,w=B.data.meshIndexIntervals,A(x,_,w),t.postMessage({sortSetupComplete:!0});else if(B.data.sort||B.data.newMatrixWorlds||B.data.newCropsArray)(B.data.newMatrixWorlds||B.data.newCropsArray)&&(_=B.data.newCropsArray||_,x=B.data.newMatrixWorlds||x,A(x,_,w)),k(B.data.sort.view,B.data.sort.cameraPosition);else if(B.data.init){g=B.data.init.Constants,r=B.data.init.splatCount;let j=g.BytesPerInt,V=g.BytesPerFloat*3,H=new Uint8Array(B.data.init.sorterWasmBytes),Y=j+V,se=r*Y,re=r*g.BytesPerInt*2+g.DepthMapRange*g.BytesPerInt*2,$=g.MemoryPageSize*32,te=se+re+$,he=Math.floor(te/g.MemoryPageSize)+1,oe={module:{},env:{memory:new WebAssembly.Memory({initial:he*2,maximum:he*3,shared:!0})}};WebAssembly.compile(H).then(ee=>WebAssembly.instantiate(ee,oe)).then(ee=>{i=ee,l=0,d=r*j,c=d+r*V,f=c+16*g.BytesPerFloat*2,u=f+r*g.BytesPerInt,h=u+g.DepthMapRange*g.BytesPerInt,m=oe.env.memory.buffer,t.postMessage({sortSetupPhase1Complete:!0})})}}}function Oae(t){let i=new Worker(URL.createObjectURL(new Blob(["(",Pae.toString(),")(self)"],{type:"application/javascript"}))),r=atob(Dae),s=new Uint8Array(r.length);for(let l=0;l<r.length;l++)s[l]=r.charCodeAt(l);return i.postMessage({init:{sorterWasmBytes:s.buffer,splatCount:t,Constants:{BytesPerFloat:tu.BytesPerFloat,BytesPerInt:tu.BytesPerInt,DepthMapRange:tu.DepthMapRange,MemoryPageSize:tu.MemoryPageSize}}}),i}var v4=function(){let t=new Float32Array(1),i=new Int32Array(t.buffer);return function(r){return t[0]=r,i[0]}}(),Iae=function(t,i,r,s){return t+(i<<8)+(r<<16)+(s<<24)},W_=new q,q_=class extends za{constructor(t,i,r,s,l=!1,d=1,c,u){super(r,s),this.splatCount=i,this.meshIndexIntervals=c,this.meshMatrixWorlds=u,this.splatBuffers=t,this.geometry=r,this.material=s,this.splatDataTextures=null,this.halfPrecisionCovariancesOnGPU=l,this.devicePixelRatio=d,this.resetLocalSplatDataAndTexturesFromSplatBuffer()}static buildMesh(t,i,r=!1,s=1,l,d){let c=q_.buildGeomtery(i),u=q_.buildMaterial(l);return new q_(t,i,c,u,r,s,l,d)}static buildMaterial(t){let i=`
            precision highp float;
            #include <common>

            attribute uint splatIndex;

            uniform highp sampler2D covariancesTexture;
            uniform highp usampler2D centersColorsTexture;
            uniform vec2 focal;
            uniform vec2 viewport;
            uniform vec2 basisViewport;
            uniform vec2 covariancesTextureSize;
            uniform vec2 centersColorsTextureSize;
						uniform highp sampler2D meshMatrixWorldsTexture;
						uniform uint meshIndexIntervals[257];
						uniform float orthoZoom;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;

            const vec4 encodeNorm4 = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0);
            const uvec4 mask4 = uvec4(uint(0x000000FF), uint(0x0000FF00), uint(0x00FF0000), uint(0xFF000000));
            const uvec4 shift4 = uvec4(0, 8, 16, 24);
            vec4 uintToRGBAVec (uint u) {
               uvec4 urgba = mask4 & u;
               urgba = urgba >> shift4;
               vec4 rgba = vec4(urgba) * encodeNorm4;
               return rgba;
            }

            vec2 getDataUV(in int stride, in int offset, in vec2 dimensions) {
                vec2 samplerUV = vec2(0.0, 0.0);
                float d = float(splatIndex * uint(stride) + uint(offset)) / dimensions.x;
                samplerUV.y = float(floor(d)) / dimensions.y;
                samplerUV.x = fract(d);
                return samplerUV;
            }

            void main () {
                uvec4 sampledCenterColor = texture(centersColorsTexture, getDataUV(1, 0, centersColorsTextureSize));
                vec3 splatCenter = uintBitsToFloat(uvec3(sampledCenterColor.gba));
                vColor = uintToRGBAVec(sampledCenterColor.r);

                vPosition = position.xy * 2.0;

								uint meshIndex;
								for (int i = 1; i < 257; i++) {
									if (splatIndex < meshIndexIntervals[i]) {
										meshIndex = uint(i - 1);
										break;
									}
								}

								float strideMulmeshIndex = float(4u*meshIndex);
								float meshMatrixWorldsTextureLength = float(256*4);

								mat4 modelMat = mat4(
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+0.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+1.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+2.0)/meshMatrixWorldsTextureLength, 0)),
									texture(meshMatrixWorldsTexture, vec2((strideMulmeshIndex+3.0)/meshMatrixWorldsTextureLength, 0))
								);
								mat4 modelViewMat = viewMatrix * modelMat;
								vec4 viewCenter = modelViewMat * vec4(splatCenter, 1.0); 
                vec4 clipCenter = projectionMatrix * viewCenter;

                vec2 sampledCovarianceA = texture(covariancesTexture, getDataUV(3, 0, covariancesTextureSize)).rg;
                vec2 sampledCovarianceB = texture(covariancesTexture, getDataUV(3, 1, covariancesTextureSize)).rg;
                vec2 sampledCovarianceC = texture(covariancesTexture, getDataUV(3, 2, covariancesTextureSize)).rg;

                vec3 cov3D_M11_M12_M13 = vec3(sampledCovarianceA.rg, sampledCovarianceB.r);
                vec3 cov3D_M22_M23_M33 = vec3(sampledCovarianceB.g, sampledCovarianceC.rg);

                // Compute the 2D covariance matrix from the upper-right portion of the 3D covariance matrix
                mat3 Vrk = mat3(
                    cov3D_M11_M12_M13.x, cov3D_M11_M12_M13.y, cov3D_M11_M12_M13.z,
                    cov3D_M11_M12_M13.y, cov3D_M22_M23_M33.x, cov3D_M22_M23_M33.y,
                    cov3D_M11_M12_M13.z, cov3D_M22_M23_M33.y, cov3D_M22_M23_M33.z
                );
                float s = 1.0 / (viewCenter.z * viewCenter.z);

                mat3 W = transpose(mat3(modelViewMat));
                mat3 T = orthoZoom > 0.0 ? W : W * mat3(
									focal.x / viewCenter.z, 0., -(focal.x * viewCenter.x) * s,
									0., focal.y / viewCenter.z, -(focal.y * viewCenter.y) * s,
									0., 0., 0.
								);
                mat3 cov2Dm = transpose(T) * Vrk * T;
                cov2Dm[0][0] += 0.3;
                cov2Dm[1][1] += 0.3;

                // We are interested in the upper-left 2x2 portion of the projected 3D covariance matrix because
                // we only care about the X and Y values. We want the X-diagonal, cov2Dm[0][0],
                // the Y-diagonal, cov2Dm[1][1], and the correlation between the two cov2Dm[0][1]. We don't
                // need cov2Dm[1][0] because it is a symetric matrix.
                vec3 cov2Dv = vec3(cov2Dm[0][0], cov2Dm[0][1], cov2Dm[1][1]);

                vec3 ndcCenter = clipCenter.xyz / clipCenter.w;

                // We now need to solve for the eigen-values and eigen vectors of the 2D covariance matrix
                // so that we can determine the 2D basis for the splat. This is done using the method described
                // here: https://people.math.harvard.edu/~knill/teaching/math21b2004/exhibits/2dmatrices/index.html
                //
                // This is a different approach than in the original work at INRIA. In that work they compute the
                // max extents of the 2D covariance matrix in screen space to form an axis aligned bounding rectangle
                // which forms the geometry that is actually rasterized. They then use the inverse 2D covariance
                // matrix (called 'conic') to determine fragment opacity.
                float a = cov2Dv.x;
                float d = cov2Dv.z;
                float b = cov2Dv.y;
                float D = a * d - b * b;
                float trace = a + d;
                float traceOver2 = 0.5 * trace;
                float term2 = sqrt(trace * trace / 4.0 - D);
                float eigenValue1 = traceOver2 + term2;
								float eigenValue2 = max(traceOver2 - term2, 0.00); // prevent negative eigen value

                const float maxSplatSize = 1024.0;
                vec2 eigenVector1 = normalize(vec2(b, eigenValue1 - a));
                // since the eigen vectors are orthogonal, we derive the second one from the first
                vec2 eigenVector2 = vec2(eigenVector1.y, -eigenVector1.x);
                vec2 basisVector1 = eigenVector1 * min(sqrt(2.0 * eigenValue1), maxSplatSize);
                vec2 basisVector2 = eigenVector2 * min(sqrt(2.0 * eigenValue2), maxSplatSize);

                vec2 ndcOffset = vec2(vPosition.x * basisVector1 + vPosition.y * basisVector2) * basisViewport;

								if (orthoZoom > 0.0) {
									ndcOffset *= orthoZoom;
								}

                gl_Position = vec4(ndcCenter.xy + ndcOffset, ndcCenter.z, 1.0);
            }`,r=`
            precision highp float;
            #include <common>

            uniform vec3 debugColor;

            varying vec4 vColor;
            varying vec2 vUv;

            varying vec2 vPosition;
						layout(location = 1) out vec4 gVelocity; 

            void main () {
                // compute the negative squared distance from the center of the splat to the
                // current fragment in the splat's local space.
                float A = -dot(vPosition, vPosition);
                if (A < -4.0) discard;
                vec3 color = vColor.rgb;
                A = exp(A) * vColor.a;
                gl_FragColor = vec4(color.rgb, A);
								gVelocity = vec4(0.0); // so it is ignored by TAA
            }`,s={covariancesTexture:{type:"t",value:null},centersColorsTexture:{type:"t",value:null},meshIndexIntervals:{value:t},meshMatrixWorldsTexture:{type:"t",value:null},focal:{type:"v2",value:new q},viewport:{type:"v2",value:new q},basisViewport:{type:"v2",value:new q},debugColor:{type:"v3",value:new _t},covariancesTextureSize:{type:"v2",value:new q(1024,1024)},centersColorsTextureSize:{type:"v2",value:new q(1024,1024)},orthoZoom:{type:"f",value:-1}};return new gn({uniforms:s,vertexShader:i,fragmentShader:r,transparent:!0,alphaTest:1,blending:pl,depthTest:!0,depthWrite:!1,side:ta})}static buildGeomtery(t){let i=new Nt;i.setIndex([0,1,2,0,2,3]);let r=new Float32Array(4*3),s=new Qt(r,3);i.setAttribute("position",s),s.setXYZ(0,-1,-1,0),s.setXYZ(1,-1,1,0),s.setXYZ(2,1,1,0),s.setXYZ(3,1,-1,0),s.needsUpdate=!0;let l=new qP().copy(i),d=new Uint32Array(t),c=new mP(d,1,!1);return c.setUsage(hA),l.setAttribute("splatIndex",c),l.instanceCount=t,l}resetLocalSplatDataAndTexturesFromSplatBuffer(){this.updateLocalSplatDataFromSplatBuffer(),this.allocateAndStoreLocalSplatDataInTextures()}updateLocalSplatDataFromSplatBuffer(){this.splatBuffers.forEach(s=>s.buildPreComputedBuffers()),this.covariances=new Float32Array(this.splatCount*6),this.colors=new Uint8Array(this.splatCount*4),this.centers=new Float32Array(this.splatCount*3);let t=0,i=0,r=0;for(let s of this.splatBuffers){let l=s.nsplats;this.colors.subarray(t,t+l*4).set(s.colorsA),t+=l*4,this.centers.subarray(i,i+l*3).set(s.decoded.xyz.denormDequant().data),i+=l*3,this.covariances.subarray(r,r+l*6).set(new Float32Array(s.precomputedCovarianceBufferData)),r+=l*6}}allocateAndStoreLocalSplatDataInTextures(){let t=this.splatCount,i=new q(4096,1024);for(;i.x*i.y*2<t*6;)i.y*=2;let r=new q(4096,1024);for(;r.x*r.y*4<t*4;)r.y*=2;let s,l;if(this.halfPrecisionCovariancesOnGPU){l=new Uint16Array(i.x*i.y*2);for(let m=0;m<this.covariances.length;m++)l[m]=LV.toHalfFloat(this.covariances[m]);s=new Cc(l,i.x,i.y,Fu,yc)}else l=new Float32Array(i.x*i.y*2),l.set(this.covariances),s=new Cc(l,i.x,i.y,Fu,ia);s.needsUpdate=!0,this.material.uniforms.covariancesTexture.value=s,this.material.uniforms.covariancesTextureSize.value.copy(i);let d=new Uint32Array(r.x*r.y*4);for(let m=0;m<t;m++){let p=m*4,g=m*3,v=m*4;d[v]=Iae(this.colors[p],this.colors[p+1],this.colors[p+2],this.colors[p+3]),d[v+1]=v4(this.centers[g]),d[v+2]=v4(this.centers[g+1]),d[v+3]=v4(this.centers[g+2])}let c=new Cc(d,r.x,r.y,Nu,Mo);c.internalFormat="RGBA32UI",c.needsUpdate=!0,this.material.uniforms.centersColorsTexture.value=c,this.material.uniforms.centersColorsTextureSize.value.copy(r);let u=256*4,h=new Float32Array(256*16);for(let m=0;m<this.meshMatrixWorlds.length;m++)h.set(this.meshMatrixWorlds[m].elements,m*16);let f=new Cc(h,u,1,Pa,ia);f.needsUpdate=!0,this.material.uniforms.meshMatrixWorldsTexture.value=f,this.material.uniformsNeedUpdate=!0,this.splatDataTextures={covariances:{data:l,texture:s,size:i},centerColors:{data:d,texture:c,size:r},meshMatrixWorlds:{data:h,texture:f}}}updateIndexes(t){let i=this.geometry;i.attributes.splatIndex.set(t),i.attributes.splatIndex.needsUpdate=!0,i.instanceCount=t.length}updateUniforms(t,i,r,s){this.splatCount>0&&(W_.set(t.x*this.devicePixelRatio,t.y*this.devicePixelRatio),this.material.uniforms.viewport.value.copy(W_),this.material.uniforms.basisViewport.value.set(2/W_.x,2/W_.y),this.material.uniforms.focal.value.set(i,r),this.material.uniforms.orthoZoom.value=s,this.material.uniformsNeedUpdate=!0)}getSplatDataTextures(){return this.splatDataTextures}getSplatCount(){return this.splatCount}getCenters(){return this.centers}getColors(){return this.colors}getCovariances(){return this.covariances}dispose(){this.geometry.dispose(),this.material.dispose(),this.splatDataTextures&&(this.splatDataTextures.covariances.texture.dispose(),this.splatDataTextures.centerColors.texture.dispose(),this.splatDataTextures.meshMatrixWorlds.texture.dispose())}},Rae=class{constructor(t={}){ea(this,"updateSplatMeshUniforms",function(){let i=new q;return function(){this.splatMesh!==null&&this.splatMesh.getSplatCount()>0&&(this.renderer.getSize(i),this.cameraFocalLengthX=this.camera.projectionMatrix.elements[0]*this.devicePixelRatio*i.x*.45,this.cameraFocalLengthY=this.camera.projectionMatrix.elements[5]*this.devicePixelRatio*i.y*.45,this.splatMesh.updateUniforms(i,this.cameraFocalLengthX,this.cameraFocalLengthY,this.camera.isPerspectiveCamera?-1:this.camera.zoom*this.devicePixelRatio))}}()),ea(this,"updateView",function(){let i=new Ze,r=[],s=new N(0,0,-1),l=new N(0,0,-1),d=new N,c=new N;return function(u=!1){let h=this.updateMatrixWorldsInWorkerIfNeeded(),f=this.cropsChanged();if(!u){l.set(0,0,-1).applyQuaternion(this.camera.quaternion);let p=!1,g=!1;if(l.dot(s)<=.95&&(p=!0),c.copy(this.camera.position).sub(d).length()>=1&&(g=!0),!p&&!g&&!h&&!f)return}d.copy(this.camera.position),s.copy(l),i.copy(this.camera.matrixWorld).invert(),i.premultiply(this.camera.perspCamera.projectionMatrix),r[0]=this.camera.position.x,r[1]=this.camera.position.y,r[2]=this.camera.position.z;let m=Z(Z({sort:{view:i.elements,cameraPosition:r,splatRenderCount:this.splatRenderCount,splatSortCount:this.splatRenderCount}},h?{newMatrixWorlds:this.meshMatrixWorlds}:{}),f?{newCropsArray:this.cropsArray}:{});this.sortRunning?this.queuedMessage=m:(this.queuedMessage=null,this.sortRunning=!0,this.sortWorker.postMessage(m))}}()),this.scene=t.scene,this.currentPage=null,this.renderer=t.renderer,this.devicePixelRatio=window.devicePixelRatio,this.sortWorker=null,this.splatRenderCount=0,this.splatSortCount=0,this.splatMesh=null,this.sortRunning=!1,this.splatRenderingInitialized=!1,this.meshMatrixWorlds=null,this.meshMatrixWorldsOld=null,this.cropsArray=null,this.splatEntries=null,this.queuedMessage=null}get camera(){return this.scene.activeCamera}reloadSplats(){this.splatRenderingInitialized=!1;let t=this.loadSplat();this.renderer.pipeline.opaquePass.splatViewer=t?this:null}loadSplat(t={}){this.activePage=this.scene.activePage,t.position&&(t.position=new N().fromArray(t.position)),t.orientation&&(t.orientation=new Ut().fromArray(t.orientation)),t.halfPrecisionCovariances=!!t.halfPrecisionCovariances;let i=[];if(this.splatEntries=i,this.activePage.traverseEntity(d=>{if(d.data.type==="Splat"){let c=d.visible;d.traverseAncestors(u=>{c&&(c=u.visible)}),c&&i.push(d)}}),this.splatMesh&&this.splatMesh.dispose(),i.length===0)return this.splatMesh=null,!1;this.meshMatrixWorlds=i.map(d=>d.matrixWorld),this.meshMatrixWorldsOld=i.map(d=>d.matrixWorld.clone()),this.cropsArray=i.map(d=>d.data.crops.map(c=>c.data));let r=i.map(d=>new g4(new Uint8Array(d.data.buffer).buffer)),s=0,l=[0];for(let d of r)s+=d.getSplatCount(),l.push(s);return this.setupSplatMesh(r,s,t.position,t.orientation,t.halfPrecisionCovariances,this.devicePixelRatio,l,this.meshMatrixWorlds),this.setupSortWorker(s),!0}updateMatrixWorldsInWorkerIfNeeded(){let t=this.splatDataTextures.meshMatrixWorlds.data;for(let i=0;i<this.meshMatrixWorlds.length;i++)t.set(this.meshMatrixWorlds[i].elements,i*16);return this.splatDataTextures.meshMatrixWorlds.texture.needsUpdate=!0,this.meshMatrixWorlds.every((i,r)=>i.equals(this.meshMatrixWorldsOld[r]))?!1:(this.meshMatrixWorldsOld=this.meshMatrixWorlds.map(i=>i.clone()),!0)}cropsChanged(){let t=!1;return this.splatEntries.forEach((i,r)=>{var s;i.data.crops.forEach((l,d)=>{this.cropsArray[r][d]===void 0?(t=!0,this.cropsArray[r][d]=l.data):Object.entries(l.data).forEach(([c,u])=>{var h;Array.isArray(u)&&u.some((f,m)=>f!==this.cropsArray[r][d][c][m])?(t=!0,this.cropsArray[r][d][c]=u):u!==((h=this.cropsArray[r][d])==null?void 0:h[c])&&(t=!0,this.cropsArray[r][d][c]=u)})}),i.data.crops.length!==((s=this.cropsArray[r])==null?void 0:s.length)&&(this.cropsArray[r].length=i.data.crops.length,t=!0)}),t}setupSplatMesh(t,i,r=new N,s=new Ut,l=!1,d=1,c,u){this.splatMesh=q_.buildMesh(t,i,l,d,c,u),this.splatMesh.position.copy(r),this.splatMesh.quaternion.copy(s),this.splatMesh.frustumCulled=!1,this.splatMesh.renderOrder=10,this.updateSplatMeshUniforms(),this.splatRenderCount=i}setupSortWorker(t){this.sortWorker=Oae(t),this.sortWorker.onmessage=i=>{var r;i.data.sortDone?(this.sortRunning=!1,(r=this.splatMesh)==null||r.updateIndexes(new Uint32Array(i.data.indexesBuffer)),this.lastSortTime=i.data.sortTime,this.queuedMessage&&(this.sortWorker.postMessage(this.queuedMessage),this.queuedMessage=null)):i.data.sortCanceled?this.sortRunning=!1:i.data.sortSetupPhase1Complete?this.sortWorker.postMessage({positions:this.splatMesh.getCenters().buffer,meshMatrixWorlds:this.splatMesh.meshMatrixWorlds,meshIndexIntervals:this.splatMesh.meshIndexIntervals,cropsArray:this.cropsArray}):i.data.sortSetupComplete&&(this.splatDataTextures=this.splatMesh.getSplatDataTextures(),this.updateView(!0,!0),this.splatRenderingInitialized=!0)}}update(){this.splatRenderingInitialized!==!1&&(this.updateSplatMeshUniforms(),this.updateView())}getSplatMesh(){return this.splatMesh}},y4=new _v;y4.wireframe=!0;var uz=new N,b4=class extends Ac{constructor(t,i){super(),this.data=t,this.enableHelpers=!1,this.wireframeState=!1,this.needsTransmissionDirty=!0,this.needsNormalDirty=!0,this._needsTransmission=!1,this._needsNormal=!1,this.geometryCacheChanged=!1,this.splatViewer=null,this.entityByUuid={},this.entityIdentityToEntity={},this.toExpandCloner=new Set,this.toUpdateCloner=new Set,this.pendingCommands=[],this.pathConstraints=new _ae,this.errorPage=new Jc("fdasfa",ge(Z({},kp.defaultData),{name:""})),this.invisibleObjects=new tm("jflkdsafjasdifjaslk",ge(Z({},kE.defaultData),{visible:!1,name:"buildin invisible"})),this.needsRecomputeInstances=!1,this.init(t,i),this.matrixAutoUpdate=!1}markGeometryCacheDirty(){this.geometryCacheChanged=!0}markNeedsUpdateRendererDirty(){this.needsTransmissionDirty=!0,this.needsNormalDirty=!0}needsTransmission(){return this.needsTransmissionDirty&&(this._needsTransmission=yae(this),this.needsTransmissionDirty=!1),this._needsTransmission}needsNormal(){return this.needsNormalDirty&&(this._needsNormal=vae(this),this.needsNormalDirty=!1),this._needsNormal}registerInstanceAndSetUuid(t){let i=t.identity.join("-"),r=this.entityIdentityToEntity[i];r&&(t.uuid=r.uuid),this.entityIdentityToEntity[i]=t,this.entityByUuid[t.uuid]=t}markPenumbraSizeDirty(){for(let t of this.children)t instanceof Jc&&(t.penumbraSizeArrayCache=null)}findInstance(t){return this.entityIdentityToEntity[t.join("-")]}get bgColor(){return this.activePage.bgColor}get postprocessing(){return this.activePage.data.postprocessing}getWithSortKey(t){let i=this.find(t);if(i===void 0)return;let r=[],s=i;for(;s!==this;){let l=s;s=s.parent;let d=s.children.indexOf(l);r.splice(0,0,d)}return{entity:i,sortKey:r}}getAllSorted(t){let i=[];for(let r of t){let s=this.getWithSortKey(r.id);s!==void 0&&i.push(s)}return i.sort((r,s)=>oK(r.sortKey,s.sortKey)),i.map(r=>r.entity)}nonExistOrDescendantOf(t,i){let r=this.find(t);if(r===void 0)return!0;for(;r;){if(r.uuid===i)return!0;r=r.parent}return!1}find(t){if(this.activePage&&this.activePage.personalCamera.parent){if(t==="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera")return this.activePage.personalCamera;if(t===pp)return this.activePage.personalCamera}if(t===""||t===void 0)return;let i=this.entityByUuid[t];return i===void 0?this.getObjectByProperty("uuid",t):i}debugEnsureEntity(t){let i=this.find(t);if(i){if(Array.isArray(i.identity)&&this.findInstance(i.identity)===void 0){console.error("not found instance");debugger}}else{console.error("not found");debugger}}addPendingExpandCloner(t){this.toExpandCloner.add(t)}addPendingUpdateCloner(t){this.toUpdateCloner.add(t)}markToExpandCloner(t){this.toExpandCloner.add(t),t.traverseEntityAncestors(i=>{this.toExpandCloner.add(i)})}doPendingExpandCloner(){this.toExpandCloner.forEach(t=>{t.expandCloner(this)}),this.toExpandCloner.clear()}doPendingUpdateCloner(){this.toUpdateCloner.forEach(t=>{var i;(i=t.cloner)==null||i.update()}),this.toUpdateCloner.clear()}doPendingUpdates(){this.doPendingExpandCloner(),this.doPendingUpdateCloner(),this.applyPendingCommands()}addPendingCommand(t){this.pendingCommands.push(t)}applyPendingCommands(){this.pendingCommands.forEach(t=>t()),this.pendingCommands.length=0}updateByLibOp(t,i){t.path.length===1&&t.path[0]==="components"&&t.type===1&&this.createChildrenObjects([ge(Z({},t.data.asset),{id:t.id})],this.invisibleObjects,i)}updateTreeByOp(t,i){var r;if(t.path.length===0&&t.type===7){let s=t.parent===null?this:this.find(t.parent);if(s===void 0)throw new Error("unexpected");let l=this.createObject(t.id,t.data,t.children,s,t.localIndex,i);l.updateVisible(),l.resetBBoxNeedsUpdate(),Go(l)&&Bd(l.parent)&&(l.invalidateUpstreamBooleanData(),l.parent.invalidateDownstreamBooleanData().recomputeBoolean()),this.markNeedsRecomputeInstancesForAncessors(s),this.markNeedsRecomputeInstancesForChildren(l),this.markToExpandCloner(l),this.markPenumbraSizeDirty(),l.updatePathSnapping()}else if(t.path.length===0&&t.type===8){let s=this.find(t.id);if(s===void 0)throw new Error("unexpected");this.markToExpandCloner(s),s.resetBBoxNeedsUpdate(),this.unregisterObject(s);let l=s.parent;this.markNeedsRecomputeInstancesForAncessors(l),this.markNeedsRecomputeInstancesForChildren(s),this.markPenumbraSizeDirty(),s.parent.remove(s),Bd(s.parent)&&(s.parent.invalidateUpstreamBooleanData(),s.parent.invalidateDownstreamBooleanData().recomputeBoolean()),Go(s)&&(s.freeBooleanPointer(),l instanceof wh&&l.invalidateDownstreamBooleanData().recomputeBoolean()),s instanceof l4&&s.detachShape(),this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(s),this.pathConstraints.removeDependencies(s.uuid),s.updatePathSnapping()}else if(t.path.length===0&&t.type===9){let s=this.find(t.id);if(s===void 0)throw new Error("unexpected");this.markNeedsRecomputeInstancesForChildren(s);let l=s.parent;this.markNeedsRecomputeInstancesForAncessors(l),(r=s.cloner)==null||r.resetOnMove(),this.markToExpandCloner(s);let d=t.parent===null?this:this.find(t.parent);if(d===void 0)throw new Error("unexpected");d.add(s),this.markNeedsRecomputeInstancesForAncessors(d),this.markToExpandCloner(s),s.invalidateClonerTransform(s),s.updateVisible(),s.resetBBoxNeedsUpdate(),this.markPenumbraSizeDirty();let c=t.localIndex;d.children.splice(c,0,d.children.pop()),Go(s)&&(s.invalidateUpstreamBooleanData(),Bd(s.parent)?s.parent.invalidateDownstreamBooleanData().recomputeBoolean():l instanceof wh&&l.invalidateDownstreamBooleanData().recomputeBoolean()),s.updatePathSnapping()}this.markNeedsUpdateRendererDirty(),this.markGeometryCacheDirty()}get playPage(){var t;return(t=this.find(this.data.publish.playPage))!=null?t:this.errorPage}updatePage(t){var i;this.activePage&&this.activePage.onDeactive(),this.activePage=this.errorPage;for(let r of this.children)r instanceof Jc&&(r.visible=r.uuid===t,r.visible&&(this.activePage=r,this.activePage.onActive(this)));this.activePage!==((i=this.splatViewer)==null?void 0:i.activePage)&&this.reloadSplats()}updateEntityByOp(t,i,r,s){if(i.type===0){if(("overrides"in i.props||"component"in i.props)&&this.markNeedsRecomputeInstances(),"visible"in i.props&&this.markPenumbraSizeDirty(),i.path.includes("overrides")&&"states"in i.props){let{rest:d}=i.props;i=ge(Z({},i),{props:d}),this.markNeedsRecomputeInstances()}i.path[0]==="pathSnapping"&&i.props.pathId!==void 0&&this.pathConstraints.setConstraint(t,i.props.pathId)}let l=this.find(t);if(l)try{gae(l,i,r,{scene:this,shared:s}),l instanceof qa&&l.updateGeometryGroupsIfNeeded()}catch(d){console.error(d)}}get activeCamera(){return this.activePage.activeCamera}switchActiveCamera(t){this.activePage.switchActiveCamera(t)}isInvisibleObjects(t){return t===this.invisibleObjects||t.hasAnccestor(this.invisibleObjects)}init(t,i){let r=Object.entries(i.data.lib.components).map((s,l)=>({data:s[1].asset.data,children:s[1].asset.children,id:s[0],fi:l}));this.invisibleObjects.updateState(this.invisibleObjects.data,{scene:this,shared:i}),this.add(this.invisibleObjects),this.createChildrenObjects(r,this.invisibleObjects,i),this.createChildrenObjects(t.objects,this,i),this.updatePage(t.publish.playPage),this.activePage.switchToPlayCamera(),this.expandInstances(i,!0),this.traverseEntity(s=>{s instanceof ga&&s.updateUp()}),this.doPendingExpandCloner(),this.applyPendingCommands()}markNeedsRecomputeInstances(){this.needsRecomputeInstances=!0}markNeedsRecomputeInstancesForChildren(t){t.traverseEntity(i=>{(i.data.type==="Component"||i.data.type==="Instance")&&this.markNeedsRecomputeInstances()})}markNeedsRecomputeInstancesForAncessors(t){Ri.is(t)&&(t.data.type==="Component"&&this.markNeedsRecomputeInstances(),t.traverseAncestors(i=>{Ri.is(i)&&i.data.type==="Component"&&this.markNeedsRecomputeInstances()}))}relativeizeInner(t,i,r,s,l,d,c){if(t){let u=s.find(t);u&&u!==s&&l.forInstancesRec(h=>{h.data=Zv(h.data,f=>{let m=f.events.data(c.id),p=h.goUp(d);if(p){let g=[...SO(p.identity),t].join("-"),v=this.entityIdentityToEntity[g];if(v){let w=v.uuid,x=Fa.zoom(m,i);x[r]=w}else console.warn("cannot find instance")}}).data})}}rewriteActions(t,i,r,s,l,d){t.forEach(c=>{c.data.type==="Transition"?this.relativeizeInner(c.data.object,[...i,c.id],"object",r,s,l,d):c.data.type==="Animation"&&this.relativeizeInner(c.data.object,[...i,c.id],"object",r,s,l,d)})}rewriteEventsBeforeGoToPlayMode(){this.traverseEntity(t=>{if(t instanceof im&&typeof t.identity=="string"&&t.data.type==="Component")return t.traverseEntity((i,r)=>{i.data.events.forEach(s=>{if(s.data.type==="GameControl"){let l=!1;if(i.forInstancesRec(d=>{d.data=Zv(d.data,c=>{d.isInstanceRoot||(c.events.delete(s.id),l=!0)}).data}),l===!1)for(let d of Qx.list)this.rewriteActions(s.data.gameActions[d],["gameActions",d],t,i,r,s)}else s.data.type==="Conditional"?(s.data.condition.type==="Distance"?(this.relativeizeInner(s.data.condition.fromObject,["condition"],"fromObject",t,i,r,s),this.relativeizeInner(s.data.condition.toObject,["condition"],"toObject",t,i,r,s)):s.data.condition.type==="State"?this.relativeizeInner(s.data.condition.object,["condition"],"object",t,i,r,s):s.data.condition.type==="Comparison"&&(s.data.condition.lOperand.type==="Property"&&this.relativeizeInner(s.data.condition.lOperand.value[0],["condition","lOperand","value"],0,t,i,r,s),s.data.condition.rOperand.type==="Property"&&this.relativeizeInner(s.data.condition.rOperand.value[0],["condition","rOperand","value"],0,t,i,r,s)),this.rewriteActions(s.data.inActions,["inActions"],t,i,r,s),this.rewriteActions(s.data.outActions,["outActions"],t,i,r,s)):"actions"in s.data&&this.rewriteActions(s.data.actions,["actions"],t,i,r,s)})}),!0})}expandInstances(t,i,r){let s=new Set;this.traverseEntity(l=>{if(l instanceof im&&l.isInstanceRoot)return l.expandInstanceChildren({scene:this,shared:t,pendingDeletes:s}),i||l.resetBBoxNeedsUpdate(),r&&l.traverseEntity(d=>{r.addClip(d)}),!0});for(let l of s)this.disposeAndUnregisterEntityRecursivelyIfNotReregistered(l),d4(l)}recomputeInstances(t,i){this.needsRecomputeInstances&&(this.needsRecomputeInstances=!1,this.traverseEntity(r=>{r instanceof im&&r.isInstanceRoot&&(r.component=void 0)}),this.expandInstances(t,!1,i))}disposeAndUnregisterEntityRecursivelyIfNotReregistered(t){t.traverseEntity(i=>{let r=typeof i.identity=="string"?i.identity:i.identity.join("-");this.entityIdentityToEntity[r]===i&&(delete this.entityByUuid[i.uuid],delete this.entityIdentityToEntity[r]),i.dispose()})}clearScene(){for(let t of this.children)Ri.is(t)&&t.disposeRecursively();this.children.length=0}resetAfterClear(t,i){this.init(t,i)}raycast(t){return this.raycast1(t,!1)}raycast1(t,i){let r=[],s=l=>{for(let d of l.children){let c=d.cloner;if(Ri.is(d)&&!d.raycastLock&&(d.visible||c!=null&&c.object.data.visible))if(i===!0&&d.isInstanceRoot){let u=[];if(t.intersectObject(d,!0,u),u.length){let h=u[0];h.object=d,h.point.applyMatrix4(h.object.matrixWorld);let f=d.matrixWorld.clone().invert();h.point.applyMatrix4(f),r.push(h)}}else(Go(d)||ZM(d)&&this.enableHelpers&&d.objectHelper.visible)&&(t.intersectObject(d,!1,r),u4(d,t,r)),s(d)}};return s(this),r}raycastWithClones(t){let i=[],r=s=>{for(let l of s.children){let d=l.cloner;Ri.is(l)&&(l.visible||d!=null&&d.object.data.visible)&&((Go(l)||ZM(l)&&this.enableHelpers&&l.objectHelper.visible)&&(t.intersectObject(l,!1,i),u4(l,t,i,!0)),r(l))}};return r(this),i}forEachEntity(t){for(let i of this.children)Ri.is(i)&&t(i)}traverseConcreteEntity(t){for(let i of this.children)Ri.is(i)&&i.isConcreteEntity&&i.traverseEntity(t)}traverseEntity(t){for(let i of this.children)Ri.is(i)&&i.traverseEntity(t)}updateFont(t,i){this.traverseEntity(r=>{if(r instanceof qa&&r.data.type==="Mesh"&&r.data.geometry.type==="TextGeometry"&&r.data.geometry.font===t){let s=r.geometry,l=r.data.geometry;s.updateFont(t,i).then(()=>{s.update(l);let d=r.invalidateDownstreamBooleanData();Bd(d)&&d.recomputeBoolean()})}})}traverseObject(t){for(let i of this.children)u0.is(i)&&i.traverseObject(t)}traverseVisibleEntity(t){for(let i of this.children)Ri.is(i)&&i.visible&&i.traverseVisibleEntity(t)}dispose(){this.clearScene()}createChildrenObjects(t,i,r){let s=0;for(let l of t)this.createObject(l.id,l.data,l.children,i,s,r),s+=1}registerObjectCreatedInLegacy(t){this.entityByUuid[t.uuid]=t}unregisterObject(t){delete this.entityByUuid[t.uuid];for(let i of t.children)this.unregisterObject(i)}createObject(t,i,r,s,l,d){var h;let c={scene:this,shared:d},u=c4(t,i,c);return u&&(this.entityByUuid[t]=u,s.add(u),s.children.splice(l,0,s.children.pop()),r.length>0&&(u.isInstanceRoot?console.error("instance should not have children!"):this.createChildrenObjects(r,u,d)),u.updateState(i,c),u instanceof qa&&u.updateGeometryGroupsIfNeeded(),u.updateVisible(),u.cloner&&this.toExpandCloner.add(u),(h=i.pathSnapping)!=null&&h.pathId&&this.pathConstraints.setConstraint(t,i.pathSnapping.pathId)),i.type==="Empty"&&i.animations&&u.traverseEntity(f=>{let m=f.dataPatched;if(f instanceof qa&&m.bones&&m.boneInverses){let p=m.bones.map(w=>this.find(w)),g=m.boneInverses.map(w=>new Ze().fromArray(w)),v=new LA(p,g);f.bind(v,f.bindMatrix)}else f.matrixAutoUpdate=!0}),u}getCenter(t){let i=[];for(let s=0,l=t.length;s<l;++s){let{id:d,recursive:c}=t[s],u=this.find(d),h=c?u.recursiveBBox:u.singleBBox;i.push(...h.vertices)}let r=new nn;return r.setFromPoints(i),r.getCenter(uz),uz}copyMatrixWorld(t,i){if(t===null){i.identity();return}let r=this.find(t);r?i.copy(r.matrixWorld):i.identity()}copyParentMatrixWorld(t,i){var s;if(t===null){i.identity();return}let r=(s=this.find(t))==null?void 0:s.parent;r?i.copy(r.matrixWorld):i.identity()}traverseMaterial(t){this.traverseEntity(i=>{if(i instanceof ds)if(Array.isArray(i.material))for(let r=0;r<i.material.length;r++)i.material[r]instanceof Yc&&t(i.material[r]);else i.material instanceof Yc&&t(i.material)})}updateViewPlaneSize(t,i,r=!1){this.traverseConcreteEntity(s=>{s instanceof ga&&s.setViewplaneSize(t,i,r)})}initializeSplatViewer(t){this.splatViewer=new Rae({scene:this,renderer:t}),this.reloadSplats()}reloadSplats(){var t;(t=this.splatViewer)==null||t.reloadSplats()}},$_=(t,i)=>{let r=i.x-t.x,s=i.y-t.y;return Math.sqrt(r*r+s*s)},zae=(t,i)=>{let r=i.x-t.x,s=i.y-t.y;return Bae(Math.atan2(s,r))},Lae=(t,i,r)=>{let s={x:0,y:0};return r=w4(r),s.x=t.x-i*Math.cos(r),s.y=t.y-i*Math.sin(r),s},w4=t=>t*(Math.PI/180),Bae=t=>t*(180/Math.PI),Fae=t=>isNaN(t.buttons)?t.pressure!==0:t.buttons!==0,x4=new Map,hz=t=>{x4.has(t)&&clearTimeout(x4.get(t)),x4.set(t,setTimeout(t,100))},Z_=(t,i,r)=>{let s=i.split(/[ ,]+/g),l;for(let d=0;d<s.length;d+=1)l=s[d],t.addEventListener?t.addEventListener(l,r,!1):t.attachEvent&&t.attachEvent(l,r)},fz=(t,i,r)=>{let s=i.split(/[ ,]+/g),l;for(let d=0;d<s.length;d+=1)l=s[d],t.removeEventListener?t.removeEventListener(l,r):t.detachEvent&&t.detachEvent(l,r)},pz=t=>(t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t),mz=()=>{if(typeof window>"u")return;let t=window.pageXOffset!==void 0?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,i=window.pageYOffset!==void 0?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;return{x:t,y:i}},_4=(t,i)=>{i.top||i.right||i.bottom||i.left?(t.style.top=i.top,t.style.right=i.right,t.style.bottom=i.bottom,t.style.left=i.left):(t.style.left=i.x+"px",t.style.top=i.y+"px")},k4=(t,i,r)=>{let s=gz(t);for(let l in s)if(s.hasOwnProperty(l))if(typeof i=="string")s[l]=i+" "+r;else{let d="";for(let c=0,u=i.length;c<u;c+=1)d+=i[c]+" "+r+", ";s[l]=d.slice(0,-2)}return s},Nae=(t,i)=>{let r=gz(t);for(let s in r)r.hasOwnProperty(s)&&(r[s]=i);return r},gz=t=>{let i={};return i[t]="",["webkit","Moz","o"].forEach(function(r){i[r+t.charAt(0).toUpperCase()+t.slice(1)]=""}),i},S4=(t,i)=>{for(let r in i)i.hasOwnProperty(r)&&(t[r]=i[r]);return t},jae=(t,i)=>{let r={};for(let s in t)t.hasOwnProperty(s)&&i.hasOwnProperty(s)?r[s]=i[s]:t.hasOwnProperty(s)&&(r[s]=t[s]);return r},A4=(t,i)=>{if(t.length)for(let r=0,s=t.length;r<s;r+=1)i(t[r]);else i(t)},Uae=(t,i,r)=>({x:Math.min(Math.max(t.x,i.x-r),i.x+r),y:Math.min(Math.max(t.y,i.y-r),i.y+r)});typeof window<"u"&&(vz="ontouchstart"in window,yz=!!window.PointerEvent,bz=!!window.MSPointerEvent);var vz,yz,bz,T0={touch:{start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"},MSPointer:{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}},sm,D0={};yz?sm=T0.pointer:bz?sm=T0.MSPointer:vz?(sm=T0.touch,D0=T0.mouse):sm=T0.mouse;function kh(){}kh.prototype.on=function(t,i){var r=this,s=t.split(/[ ,]+/g),l;r._handlers_=r._handlers_||{};for(var d=0;d<s.length;d+=1)l=s[d],r._handlers_[l]=r._handlers_[l]||[],r._handlers_[l].push(i);return r},kh.prototype.off=function(t,i){var r=this;return r._handlers_=r._handlers_||{},t===void 0?r._handlers_={}:i===void 0?r._handlers_[t]=null:r._handlers_[t]&&r._handlers_[t].indexOf(i)>=0&&r._handlers_[t].splice(r._handlers_[t].indexOf(i),1),r},kh.prototype.trigger=function(t,i){var r=this,s=t.split(/[ ,]+/g),l;r._handlers_=r._handlers_||{};for(var d=0;d<s.length;d+=1)l=s[d],r._handlers_[l]&&r._handlers_[l].length&&r._handlers_[l].forEach(function(c){c.call(r,{type:l,target:r},i)})},kh.prototype.config=function(t){var i=this;i.options=i.defaults||{},t&&(i.options=jae(i.options,t))},kh.prototype.bindEvt=function(t,i){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[i]=function(){typeof r["on"+i]=="function"?r["on"+i].apply(r,arguments):console.warn('[WARNING] : Missing "on'+i+'" handler.')},Z_(t,sm[i],r._domHandlers_[i]),D0[i]&&Z_(t,D0[i],r._domHandlers_[i]),r},kh.prototype.unbindEvt=function(t,i){var r=this;return r._domHandlers_=r._domHandlers_||{},fz(t,sm[i],r._domHandlers_[i]),D0[i]&&fz(t,D0[i],r._domHandlers_[i]),delete r._domHandlers_[i],this};var C4=kh;function Or(t,i){return this.identifier=i.identifier,this.position=i.position,this.frontPosition=i.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(i),this.options.mode==="dynamic"&&(this.options.restOpacity=0),this.id=Or.id,Or.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}Or.prototype=new C4,Or.constructor=Or,Or.id=0,Or.prototype.buildEl=function(t){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},Or.prototype.stylize=function(){if(this.options.dataOnly)return this;var t=this.options.fadeTime+"ms",i=Nae("borderRadius","50%"),r=k4("transition","opacity",t),s={};return s.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},s.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:"rgba(255, 255, 255, .4)",border:"solid 2px rgba(0, 0, 0, .1)"},s.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:"rgba(255, 255, 255, .8)",border:"solid 2px rgba(0, 0, 0, .1)"},S4(s.el,r),this.options.shape==="circle"&&S4(s.back,i),S4(s.front,i),this.applyStyles(s),this},Or.prototype.applyStyles=function(t){for(var i in this.ui)if(this.ui.hasOwnProperty(i))for(var r in t[i])this.ui[i].style[r]=t[i][r];return this},Or.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},Or.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},Or.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},Or.prototype.show=function(t){var i=this;return i.options.dataOnly||(clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.addToDom(),i.restCallback(),setTimeout(function(){i.ui.el.style.opacity=1},0),i.showTimeout=setTimeout(function(){i.trigger("shown",i.instance),typeof t=="function"&&t.call(this)},i.options.fadeTime)),i},Or.prototype.hide=function(t){var i=this;if(i.options.dataOnly)return i;if(i.ui.el.style.opacity=i.options.restOpacity,clearTimeout(i.removeTimeout),clearTimeout(i.showTimeout),clearTimeout(i.restTimeout),i.removeTimeout=setTimeout(function(){var r=i.options.mode==="dynamic"?"none":"block";i.ui.el.style.display=r,typeof t=="function"&&t.call(i),i.trigger("hidden",i.instance)},i.options.fadeTime),i.options.restJoystick){let r=i.options.restJoystick,s={};s.x=r===!0||r.x!==!1?0:i.instance.frontPosition.x,s.y=r===!0||r.y!==!1?0:i.instance.frontPosition.y,i.setPosition(t,s)}return i},Or.prototype.setPosition=function(t,i){var r=this;r.frontPosition={x:i.x,y:i.y};var s=r.options.fadeTime+"ms",l={};l.front=k4("transition",["top","left"],s);var d={front:{}};d.front={left:r.frontPosition.x+"px",top:r.frontPosition.y+"px"},r.applyStyles(l),r.applyStyles(d),r.restTimeout=setTimeout(function(){typeof t=="function"&&t.call(r),r.restCallback()},r.options.fadeTime)},Or.prototype.restCallback=function(){var t=this,i={};i.front=k4("transition","none",""),t.applyStyles(i),t.trigger("rested",t.instance)},Or.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},Or.prototype.computeDirection=function(t){var i=t.angle.radian,r=Math.PI/4,s=Math.PI/2,l,d,c;if(i>r&&i<r*3&&!t.lockX?l="up":i>-r&&i<=r&&!t.lockY?l="left":i>-r*3&&i<=-r&&!t.lockX?l="down":t.lockY||(l="right"),t.lockY||(i>-s&&i<s?d="left":d="right"),t.lockX||(i>0?c="up":c="down"),t.force>this.options.threshold){var u={},h;for(h in this.direction)this.direction.hasOwnProperty(h)&&(u[h]=this.direction[h]);var f={};this.direction={x:d,y:c,angle:l},t.direction=this.direction;for(h in u)u[h]===this.direction[h]&&(f[h]=!0);if(f.x&&f.y&&f.angle)return t;(!f.x||!f.y)&&this.trigger("plain",t),f.x||this.trigger("plain:"+d,t),f.y||this.trigger("plain:"+c,t),f.angle||this.trigger("dir dir:"+l,t)}else this.resetDirection();return t};var Vae=Or;function or(t,i){var r=this;r.nipples=[],r.idles=[],r.actives=[],r.ids=[],r.pressureIntervals={},r.manager=t,r.id=or.id,or.id+=1,r.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:1,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},r.config(i),(r.options.mode==="static"||r.options.mode==="semi")&&(r.options.multitouch=!1),r.options.multitouch||(r.options.maxNumberOfNipples=1);let s=getComputedStyle(r.options.zone.parentElement);return s&&s.display==="flex"&&(r.parentIsFlex=!0),r.updateBox(),r.prepareNipples(),r.bindings(),r.begin(),r.nipples}or.prototype=new C4,or.constructor=or,or.id=0,or.prototype.prepareNipples=function(){var t=this,i=t.nipples;i.on=t.on.bind(t),i.off=t.off.bind(t),i.options=t.options,i.destroy=t.destroy.bind(t),i.ids=t.ids,i.id=t.id,i.processOnMove=t.processOnMove.bind(t),i.processOnEnd=t.processOnEnd.bind(t),i.get=function(r){if(r===void 0)return i[0];for(var s=0,l=i.length;s<l;s+=1)if(i[s].identifier===r)return i[s];return!1}},or.prototype.bindings=function(){var t=this;t.bindEvt(t.options.zone,"start"),t.options.zone.style.touchAction="none",t.options.zone.style.msTouchAction="none"},or.prototype.begin=function(){var t=this,i=t.options;if(i.mode==="static"){var r=t.createNipple(i.position,t.manager.getIdentifier());r.add(),t.idles.push(r)}},or.prototype.createNipple=function(t,i){var r=this,s=r.manager.scroll,l={},d=r.options,c={x:r.parentIsFlex?s.x:s.x+r.box.left,y:r.parentIsFlex?s.y:s.y+r.box.top};if(t.x&&t.y)l={x:t.x-c.x,y:t.y-c.y};else if(t.top||t.right||t.bottom||t.left){var u=document.createElement("DIV");u.style.display="hidden",u.style.top=t.top,u.style.right=t.right,u.style.bottom=t.bottom,u.style.left=t.left,u.style.position="absolute",d.zone.appendChild(u);var h=u.getBoundingClientRect();d.zone.removeChild(u),l=t,t={x:h.left+s.x,y:h.top+s.y}}var f=new Vae(r,{color:d.color,size:d.size,threshold:d.threshold,fadeTime:d.fadeTime,dataOnly:d.dataOnly,restJoystick:d.restJoystick,restOpacity:d.restOpacity,mode:d.mode,identifier:i,position:t,zone:d.zone,frontPosition:{x:0,y:0},shape:d.shape});return d.dataOnly||(_4(f.ui.el,l),_4(f.ui.front,f.frontPosition)),r.nipples.push(f),r.trigger("added "+f.identifier+":added",f),r.manager.trigger("added "+f.identifier+":added",f),r.bindNipple(f),f},or.prototype.updateBox=function(){var t=this;t.box=t.options.zone.getBoundingClientRect()},or.prototype.bindNipple=function(t){var i=this,r,s=function(l,d){r=l.type+" "+d.id+":"+l.type,i.trigger(r,d)};t.on("destroyed",i.onDestroyed.bind(i)),t.on("shown hidden rested dir plain",s),t.on("dir:up dir:right dir:down dir:left",s),t.on("plain:up plain:right plain:down plain:left",s)},or.prototype.pressureFn=function(t,i,r){var s=this,l=0;clearInterval(s.pressureIntervals[r]),s.pressureIntervals[r]=setInterval(function(){var d=t.force||t.pressure||t.webkitForce||0;d!==l&&(i.trigger("pressure",d),s.trigger("pressure "+i.identifier+":pressure",d),l=d)}.bind(s),100)},or.prototype.onstart=function(t){var i=this,r=i.options,s=t;t=pz(t),i.updateBox();var l=function(d){i.actives.length<r.maxNumberOfNipples?i.processOnStart(d):s.type.match(/^touch/)&&(Object.keys(i.manager.ids).forEach(function(c){if(Object.values(s.touches).findIndex(function(h){return h.identifier===c})<0){var u=[t[0]];u.identifier=c,i.processOnEnd(u)}}),i.actives.length<r.maxNumberOfNipples&&i.processOnStart(d))};return A4(t,l),i.manager.bindDocument(),!1},or.prototype.processOnStart=function(t){var i=this,r=i.options,s,l=i.manager.getIdentifier(t),d=t.force||t.pressure||t.webkitForce||0,c={x:t.pageX,y:t.pageY},u=i.getOrCreate(l,c);u.identifier!==l&&i.manager.removeIdentifier(u.identifier),u.identifier=l;var h=function(m){m.trigger("start",m),i.trigger("start "+m.id+":start",m),m.show(),d>0&&i.pressureFn(t,m,m.identifier),i.processOnMove(t)};if((s=i.idles.indexOf(u))>=0&&i.idles.splice(s,1),i.actives.push(u),i.ids.push(u.identifier),r.mode!=="semi")h(u);else{var f=$_(c,u.position);if(f<=r.catchDistance)h(u);else{u.destroy(),i.processOnStart(t);return}}return u},or.prototype.getOrCreate=function(t,i){var r=this,s=r.options,l;return/(semi|static)/.test(s.mode)?(l=r.idles[0],l?(r.idles.splice(0,1),l):s.mode==="semi"?r.createNipple(i,t):(console.warn("Coudln't find the needed nipple."),!1)):(l=r.createNipple(i,t),l)},or.prototype.processOnMove=function(t){var i=this,r=i.options,s=i.manager.getIdentifier(t),l=i.nipples.get(s),d=i.manager.scroll;if(!Fae(t)){this.processOnEnd(t);return}if(!l){console.error("Found zombie joystick with ID "+s),i.manager.removeIdentifier(s);return}if(r.dynamicPage){var c=l.el.getBoundingClientRect();l.position={x:d.x+c.left,y:d.y+c.top}}l.identifier=s;var u=l.options.size/2,h={x:t.pageX,y:t.pageY};r.lockX&&(h.y=l.position.y),r.lockY&&(h.x=l.position.x);var f=$_(h,l.position),m=zae(h,l.position),p=w4(m),g=f/u,v={distance:f,position:h},w,x;if(l.options.shape==="circle"?(w=Math.min(f,u),x=Lae(l.position,w,m)):(x=Uae(h,l.position,u),w=$_(x,l.position)),r.follow){if(f>u){let C=h.x-x.x,M=h.y-x.y;l.position.x+=C,l.position.y+=M,l.el.style.top=l.position.y-(i.box.top+d.y)+"px",l.el.style.left=l.position.x-(i.box.left+d.x)+"px",f=$_(h,l.position)}}else h=x,f=w;var _=h.x-l.position.x,k=h.y-l.position.y;l.frontPosition={x:_,y:k},r.dataOnly||_4(l.ui.front,l.frontPosition);var A={identifier:l.identifier,position:h,force:g,pressure:t.force||t.pressure||t.webkitForce||0,distance:f,angle:{radian:p,degree:m},vector:{x:_/u,y:-k/u},raw:v,instance:l,lockX:r.lockX,lockY:r.lockY};A=l.computeDirection(A),A.angle={radian:w4(180-m),degree:180-m},l.trigger("move",A),i.trigger("move "+l.id+":move",A)},or.prototype.processOnEnd=function(t){var i=this,r=i.options,s=i.manager.getIdentifier(t),l=i.nipples.get(s),d=i.manager.removeIdentifier(l.identifier);!l||(r.dataOnly||l.hide(function(){r.mode==="dynamic"&&(l.trigger("removed",l),i.trigger("removed "+l.id+":removed",l),i.manager.trigger("removed "+l.id+":removed",l),l.destroy())}),clearInterval(i.pressureIntervals[l.identifier]),l.resetDirection(),l.trigger("end",l),i.trigger("end "+l.id+":end",l),i.ids.indexOf(l.identifier)>=0&&i.ids.splice(i.ids.indexOf(l.identifier),1),i.actives.indexOf(l)>=0&&i.actives.splice(i.actives.indexOf(l),1),/(semi|static)/.test(r.mode)?i.idles.push(l):i.nipples.indexOf(l)>=0&&i.nipples.splice(i.nipples.indexOf(l),1),i.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(i.manager.ids[d.id]=d.identifier))},or.prototype.onDestroyed=function(t,i){var r=this;r.nipples.indexOf(i)>=0&&r.nipples.splice(r.nipples.indexOf(i),1),r.actives.indexOf(i)>=0&&r.actives.splice(r.actives.indexOf(i),1),r.idles.indexOf(i)>=0&&r.idles.splice(r.idles.indexOf(i),1),r.ids.indexOf(i.identifier)>=0&&r.ids.splice(r.ids.indexOf(i.identifier),1),r.manager.removeIdentifier(i.identifier),r.manager.unbindDocument()},or.prototype.destroy=function(){var t=this;t.unbindEvt(t.options.zone,"start"),t.nipples.forEach(function(r){r.destroy()});for(var i in t.pressureIntervals)t.pressureIntervals.hasOwnProperty(i)&&clearInterval(t.pressureIntervals[i]);t.trigger("destroyed",t.nipples),t.manager.unbindDocument(),t.off()};var Hae=or;function Wr(t){var i=this;i.ids={},i.index=0,i.collections=[],i.scroll=mz(),i.config(t),i.prepareCollections();var r=function(){var l;i.collections.forEach(function(d){d.forEach(function(c){l=c.el.getBoundingClientRect(),c.position={x:i.scroll.x+l.left,y:i.scroll.y+l.top}})})};if(typeof window>"u")return i.collections;Z_(window,"resize",function(){hz(r)});var s=function(){i.scroll=mz()};return Z_(window,"scroll",function(){hz(s)}),i.collections}Wr.prototype=new C4,Wr.constructor=Wr,Wr.prototype.prepareCollections=function(){var t=this;t.collections.create=t.create.bind(t),t.collections.on=t.on.bind(t),t.collections.off=t.off.bind(t),t.collections.destroy=t.destroy.bind(t),t.collections.get=function(i){var r;return t.collections.every(function(s){return r=s.get(i),!r}),r}},Wr.prototype.create=function(t){return this.createCollection(t)},Wr.prototype.createCollection=function(t){var i=this,r=new Hae(i,t);return i.bindCollection(r),i.collections.push(r),r},Wr.prototype.bindCollection=function(t){var i=this,r,s=function(l,d){r=l.type+" "+d.id+":"+l.type,i.trigger(r,d)};t.on("destroyed",i.onDestroyed.bind(i)),t.on("shown hidden rested dir plain",s),t.on("dir:up dir:right dir:down dir:left",s),t.on("plain:up plain:right plain:down plain:left",s)},Wr.prototype.bindDocument=function(){var t=this;t.binded||(t.bindEvt(document,"move").bindEvt(document,"end"),t.binded=!0)},Wr.prototype.unbindDocument=function(t){var i=this;(!Object.keys(i.ids).length||t===!0)&&(i.unbindEvt(document,"move").unbindEvt(document,"end"),i.binded=!1)},Wr.prototype.getIdentifier=function(t){var i;return t?(i=t.identifier===void 0?t.pointerId:t.identifier,i===void 0&&(i=this.latest||0)):i=this.index,this.ids[i]===void 0&&(this.ids[i]=this.index,this.index+=1),this.latest=i,this.ids[i]},Wr.prototype.removeIdentifier=function(t){var i={};for(var r in this.ids)if(this.ids[r]===t){i.id=r,i.identifier=this.ids[r],delete this.ids[r];break}return i},Wr.prototype.onmove=function(t){var i=this;return i.onAny("move",t),!1},Wr.prototype.onend=function(t){var i=this;return i.onAny("end",t),!1},Wr.prototype.oncancel=function(t){var i=this;return i.onAny("end",t),!1},Wr.prototype.onAny=function(t,i){var r=this,s,l="processOn"+t.charAt(0).toUpperCase()+t.slice(1);i=pz(i);var d=function(u,h,f){f.ids.indexOf(h)>=0&&(f[l](u),u._found_=!0)},c=function(u){s=r.getIdentifier(u),A4(r.collections,d.bind(null,u,s)),u._found_||r.removeIdentifier(s)};return A4(i,c),!1},Wr.prototype.destroy=function(){var t=this;t.unbindDocument(!0),t.ids={},t.index=0,t.collections.forEach(function(i){i.destroy()}),t.off()},Wr.prototype.onDestroyed=function(t,i){var r=this;if(r.collections.indexOf(i)<0)return!1;r.collections.splice(r.collections.indexOf(i),1)};var Gae=Wr,wz=new Gae,Wae={create:function(t){return wz.create(t)},factory:wz},xz=new Map,P0=new Map,Sh=class{constructor(t,i,r,s){this.data=i;let{audio:l,volume:d,delay:c,loop:u}=i;if(!l)throw new Error("Missing property");let h=typeof l=="string"?s.getAudio(l).src:l.data;this.audioPlayer=new b0({src:h,volume:d,delay:c,loop:u}),P0.has(r.uuid)?P0.get(r.uuid).push(this):P0.set(r.uuid,[this]),xz.set(t,this)}playByToggle(){this.data.toggle==="stop"?this.audioPlayer.status==="playing"?this.audioPlayer.stop():(this.audioPlayer.stop(),this.audioPlayer.play()):this.data.toggle==="pause"?this.audioPlayer.status==="playing"?this.audioPlayer.pause():this.audioPlayer.play():(this.audioPlayer.stop(),this.audioPlayer.play())}dispose(){this.audioPlayer.stop()}},E4=class{constructor(t){this.data=t}dispatch(){this.data.playAudio?this.pauseAudio(this.data.playAudio):this.data.object?this.pauseAllAudiosFromObject(this.data.object):this.pauseAllAudios()}pauseAudio(t){let i=xz.get(t);!i||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{i.audioPlayer[this.data.interaction](),this.disposeDelay()},this.data.delay)):i.audioPlayer[this.data.interaction]())}pauseAllAudiosFromObject(t){let i=P0.get(t);!(i!=null&&i.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{i.forEach(r=>r.audioPlayer[this.data.interaction]()),this.disposeDelay()},this.data.delay)):i.forEach(r=>r.audioPlayer[this.data.interaction]()))}pauseAllAudios(){let t=[...P0.values()];!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>{i.forEach(r=>{r.audioPlayer[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):t.forEach(i=>{i.forEach(r=>{r.audioPlayer[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},_z=class{constructor(t,i,r,s,l){if(this.data=i,this.shared=s,this.condition=l,i.interaction==="play")this.interaction=new Sh(t,i,r,s);else if(i.interaction==="pause"||i.interaction==="stop")this.interaction=new E4(i);else throw new Error("Missing property")}dispatchBasic(){if(xr(this.shared,this.condition)===!1)return!1;this.interaction instanceof Sh?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(xr(this.shared,this.condition)===!1)return!1;this.interaction instanceof Sh?this.interaction.audioPlayer.play():this.interaction.dispatch()}dispatchGameControl(t){if(xr(this.shared,this.condition)===!1)return!1;this.interaction instanceof Sh&&(t==="start"?this.interaction.audioPlayer.play():this.interaction.audioPlayer.stop())}dispose(){this.interaction.dispose()}},qae="text/plain",$ae="us-ascii",kz=(t,i)=>i.some(r=>r instanceof RegExp?r.test(t):r===t),Zae=(t,{stripHash:i})=>{let r=new RegExp("^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$").exec(t);if(!r)throw new Error(`Invalid URL: ${t}`);let{type:s,data:l,hash:d}=r.groups,c=s.split(";");d=i?"":d;let u=!1;c[c.length-1]==="base64"&&(c.pop(),u=!0);let h=(c.shift()||"").toLowerCase(),f=[...c.map(m=>{let[p,g=""]=m.split("=").map(v=>v.trim());return p==="charset"&&(g=g.toLowerCase(),g===$ae)?"":`${p}${g?`=${g}`:""}`}).filter(Boolean)];return u&&f.push("base64"),(f.length>0||h&&h!==qae)&&f.unshift(h),`data:${f.join(";")},${u?l.trim():l}${d?`#${d}`:""}`};function Yae(t,i){if(i=Z({defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0},i),t=t.trim(),/^data:/i.test(t))return Zae(t,i);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=t.startsWith("//");!r&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,i.defaultProtocol));let s=new URL(t);if(i.forceHttp&&i.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(i.forceHttp&&s.protocol==="https:"&&(s.protocol="http:"),i.forceHttps&&s.protocol==="http:"&&(s.protocol="https:"),i.stripAuthentication&&(s.username="",s.password=""),i.stripHash?s.hash="":i.stripTextFragment&&(s.hash=s.hash.replace(/#?:~:text.*?$/i,"")),s.pathname){let d=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,c=0,u="";for(;;){let f=d.exec(s.pathname);if(!f)break;let m=f[0],p=f.index,g=s.pathname.slice(c,p);u+=g.replace(/\/{2,}/g,"/"),u+=m,c=p+m.length}let h=s.pathname.slice(c,s.pathname.length);u+=h.replace(/\/{2,}/g,"/"),s.pathname=u}if(s.pathname)try{s.pathname=decodeURI(s.pathname)}catch(d){}if(i.removeDirectoryIndex===!0&&(i.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(i.removeDirectoryIndex)&&i.removeDirectoryIndex.length>0){let d=s.pathname.split("/"),c=d[d.length-1];kz(c,i.removeDirectoryIndex)&&(d=d.slice(0,-1),s.pathname=d.slice(1).join("/")+"/")}if(s.hostname&&(s.hostname=s.hostname.replace(/\.$/,""),i.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(s.hostname)&&(s.hostname=s.hostname.replace(/^www\./,""))),Array.isArray(i.removeQueryParameters))for(let d of[...s.searchParams.keys()])kz(d,i.removeQueryParameters)&&s.searchParams.delete(d);if(i.removeQueryParameters===!0&&(s.search=""),i.sortQueryParameters){s.searchParams.sort();try{s.search=decodeURIComponent(s.search)}catch(d){}}i.removeTrailingSlash&&(s.pathname=s.pathname.replace(/\/$/,""));let l=t;return t=s.toString(),!i.removeSingleSlash&&s.pathname==="/"&&!l.endsWith("/")&&s.hash===""&&(t=t.replace(/\/$/,"")),(i.removeTrailingSlash||s.pathname==="/")&&s.hash===""&&i.removeSingleSlash&&(t=t.replace(/\/$/,"")),r&&!i.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),i.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}var Xae=class{constructor({url:t,context:i},r,s,l){if(this.controlsManager=r,this.shared=s,this.condition=l,!t)throw new Error("Missing property");this.url=t.startsWith("mailto:")?t:Yae(t,{removeTrailingSlash:!1,removeSingleSlash:!1}),this.context=i!=null?i:"tab"}dispatch(){var t;if(xr(this.shared,this.condition)===!1)return!1;OC?window.location.assign(this.url):(this.context==="tab"?window.open(this.url,"_blank"):this.context==="window"?window.open(this.url,"_blank",`width=${window.innerWidth}, height=${window.innerHeight}`):window.open(this.url,"_parent"),(t=this.controlsManager.orbitControls)==null||t.onPointerUp(Jt[0]),lK())}},Sz=class{constructor(t,i,r,s,l){this.data=t,this.page=i,this.controlsManager=r,this.shared=s,this.condition=l,this.timeoutIdQueue=[],this.dispatchInner=()=>{this.objects.forEach(this.destroyCallback)},this.destroyCallback=d=>{var f,m;this.timeoutIdQueue.shift();let c=this.page.scene.find(d);if(c===void 0)return;let u=this.controlsManager.sharedGameControlGlobals.rapierWorld,h=u?(f=c.dataPatched.physics)==null?void 0:f.fusedBody:!0;if(c.cloner){for(let p of c.cloner.children)h?(p.playModeVisible=!1,p.rigidBody&&((m=c.dataPatched.physics)==null?void 0:m.rigidBody)==="positioned"&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(p.rigidBody.collider(0).handle),u.removeRigidBody(p.rigidBody),p.rigidBody=void 0),p.bvhGeometry&&(p.bvhGeometry=void 0)):this.clone===void 0||this.clone===p?(p.playModeVisible=!1,p.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(p.rigidBody.collider(0).handle),u.removeRigidBody(p.rigidBody),p.rigidBody=void 0)):p.playModeVisible===void 0&&(p.playModeVisible=!0);(h||this.clone===void 0||this.clone===!1)&&(c.visible=!1,c.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),u.removeRigidBody(c.rigidBody),c.rigidBody=void 0),c.bvhGeometry&&(c.bvhGeometry=void 0))}else c.rigidBody&&(this.controlsManager.sharedGameControlGlobals.colliderToEntity.delete(c.rigidBody.collider(0).handle),u.removeRigidBody(c.rigidBody),c.rigidBody=void 0),c.bvhGeometry&&(c.bvhGeometry=void 0),c.visible=!1;u===void 0?this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(p=>p.bvhGeometry!==void 0):this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim=this.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.filter(p=>p.rigidBody!==void 0),c.destroyedInAction=!0,this.controlsManager.requestRender()},this.objects=[...t.objects]}dispatch(t){if(xr(this.shared,this.condition)===!1)return!1;this.clone=t,this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()}dispatchFromStart(){if(xr(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))}dispose(){this.timeoutIdQueue.forEach(t=>window.clearTimeout(t))}},Az=class{constructor(t,i,r,s,l){this.data=t,this.page=i,this.shared=r,this.eventManager=s,this.condition=l,this.shared=r}dispatch(){var t;if(xr(this.shared,this.condition)===!1)return!1;clearTimeout(this.timeoutId),delete this.timeoutId,this.timeoutId=window.setTimeout(()=>{var i;this.shared.reset(this.shared.data,!0),U4(this.page,this.shared,!0),this.eventManager.reset(),(i=this.eventManager.controlsManager.gameControl)==null||i.reset(!0),this.page.switchToPlayCamera(),this.eventManager.controlsManager.requestRender(),delete this.timeoutId},((t=this.data.delay)!=null?t:0)*1e3)}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},Cz={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,timelineChangeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},M4={duration:1e3,delay:0,endDelay:0,startOnceDelay:0,pingPongDelayCorrection:0,pingPongEndDelayCorrection:0,easing:"easeOutElastic(1, .5)",round:0},Kae=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Y_={CSS:{},springs:{}};function qo(t,i,r){return Math.min(Math.max(t,i),r)}function O0(t,i){return t.indexOf(i)>-1}function T4(t,i){return t.apply(null,i)}var ti={arr:function(t){return Array.isArray(t)},obj:function(t){return O0(Object.prototype.toString.call(t),"Object")},pth:function(t){return ti.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return!("isNode"in t)&&(t.nodeType||ti.svg(t))},str:function(t){return typeof t=="string"},fnc:function(t){return typeof t=="function"},und:function(t){return typeof t>"u"},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return ti.hex(t)||ti.rgb(t)||ti.hsl(t)},key:function(t){return!Cz.hasOwnProperty(t)&&!M4.hasOwnProperty(t)&&t!=="targets"&&t!=="keyframes"}};function Ez(t){var i=/\(([^)]+)\)/.exec(t);return i?i[1].split(",").map(function(r){return parseFloat(r)}):[]}function Mz(t,i){var r=Ez(t),s=qo(ti.und(r[0])?1:r[0],.1,100),l=qo(ti.und(r[1])?100:r[1],.1,100),d=qo(ti.und(r[2])?10:r[2],.1,100),c=qo(ti.und(r[3])?0:r[3],.1,100),u=Math.sqrt(l/s),h=d/(2*Math.sqrt(l*s)),f=h<1?u*Math.sqrt(1-h*h):0,m=1,p=h<1?(h*u+-c)/f:-c+u;function g(w){var x=i?i*w/1e3:w;return h<1?x=Math.exp(-x*h*u)*(m*Math.cos(f*x)+p*Math.sin(f*x)):x=(m+p*x)*Math.exp(-x*u),w===0||w===1?w:1-x}function v(){var w=Y_.springs[t];if(w)return w;for(var x=1/6,_=0,k=0;;)if(_+=x,g(_)===1){if(k++,k>=16)break}else k=0;var A=_*x*1e3;return Y_.springs[t]=A,A}return i?g:v}function Qae(t){return t===void 0&&(t=10),function(i){return Math.ceil(qo(i,1e-6,1)*t)*(1/t)}}var Jae=function(){var t=11,i=1/(t-1);function r(m,p){return 1-3*p+3*m}function s(m,p){return 3*p-6*m}function l(m){return 3*m}function d(m,p,g){return((r(p,g)*m+s(p,g))*m+l(p))*m}function c(m,p,g){return 3*r(p,g)*m*m+2*s(p,g)*m+l(p)}function u(m,p,g,v,w){var x,_,k=0;do _=p+(g-p)/2,x=d(_,v,w)-m,x>0?g=_:p=_;while(Math.abs(x)>1e-7&&++k<10);return _}function h(m,p,g,v){for(var w=0;w<4;++w){var x=c(p,g,v);if(x===0)return p;var _=d(p,g,v)-m;p-=_/x}return p}function f(m,p,g,v){if(!(0<=m&&m<=1&&0<=g&&g<=1))return;var w=new Float32Array(t);if(m!==p||g!==v)for(var x=0;x<t;++x)w[x]=d(x*i,m,g);function _(k){for(var A=0,C=1,M=t-1;C!==M&&w[C]<=k;++C)A+=i;--C;var D=(k-w[C])/(w[C+1]-w[C]),P=A+D*i,T=c(P,m,g);return T>=.001?h(k,P,m,g):T===0?P:u(k,A,A+i,m,g)}return function(k){return m===p&&g===v||k===0||k===1?k:d(_(k),p,v)}}return f}(),Tz=function(){var t={linear:function(){return function(s){return s}}},i={Sine:function(){return function(s){return 1-Math.cos(s*Math.PI/2)}},Circ:function(){return function(s){return 1-Math.sqrt(1-s*s)}},Back:function(){return function(s){return s*s*(3*s-2)}},Bounce:function(){return function(s){for(var l,d=4;s<((l=Math.pow(2,--d))-1)/11;);return 1/Math.pow(4,3-d)-7.5625*Math.pow((l*3-2)/22-s,2)}},Elastic:function(s,l){s===void 0&&(s=1),l===void 0&&(l=.5);var d=qo(s,1,10),c=qo(l,.1,2);return function(u){return u===0||u===1?u:-d*Math.pow(2,10*(u-1))*Math.sin((u-1-c/(Math.PI*2)*Math.asin(1/d))*(Math.PI*2)/c)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(s,l){i[s]=function(){return function(d){return Math.pow(d,l+2)}}}),Object.keys(i).forEach(function(s){var l=i[s];t["easeIn"+s]=l,t["easeOut"+s]=function(d,c){return function(u){return 1-l(d,c)(1-u)}},t["easeInOut"+s]=function(d,c){return function(u){return u<.5?l(d,c)(u*2)/2:1-l(d,c)(u*-2+2)/2}}}),t}();function D4(t,i){if(ti.fnc(t))return t;var r=t.split("(")[0],s=Tz[r],l=Ez(t);switch(r){case"spring":return Mz(t,i);case"cubicBezier":return T4(Jae,l);case"steps":return T4(Qae,l);default:return T4(s,l)}}function Dz(t){try{var i=document.querySelectorAll(t);return i}catch(r){return}}function X_(t,i){for(var r=t.length,s=arguments.length>=2?arguments[1]:void 0,l=[],d=0;d<r;d++)if(d in t){var c=t[d];i.call(s,c,d,t)&&l.push(c)}return l}function K_(t){return t.reduce(function(i,r){return i.concat(ti.arr(r)?K_(r):r)},[])}function Pz(t){return ti.arr(t)?t:(ti.str(t)&&(t=Dz(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function P4(t,i){return t.some(function(r){return r===i})}function O4(t){var i={};for(var r in t)i[r]=t[r];return i}function I4(t,i){var r=O4(t);for(var s in t)r[s]=i.hasOwnProperty(s)?i[s]:t[s];return r}function Q_(t,i){var r=O4(t);for(var s in i)r[s]=ti.und(t[s])?i[s]:t[s];return r}function ese(t){var i=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return i?"rgba("+i[1]+",1)":t}function tse(t){var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=t.replace(i,function(u,h,f,m){return h+h+f+f+m+m}),s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),l=parseInt(s[1],16),d=parseInt(s[2],16),c=parseInt(s[3],16);return"rgba("+l+","+d+","+c+",1)"}function ise(t){var i=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),r=parseInt(i[1],10)/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100,d=i[4]||1;function c(g,v,w){return w<0&&(w+=1),w>1&&(w-=1),w<1/6?g+(v-g)*6*w:w<1/2?v:w<2/3?g+(v-g)*(2/3-w)*6:g}var u,h,f;if(s==0)u=h=f=l;else{var m=l<.5?l*(1+s):l+s-l*s,p=2*l-m;u=c(p,m,r+1/3),h=c(p,m,r),f=c(p,m,r-1/3)}return"rgba("+u*255+","+h*255+","+f*255+","+d+")"}function nse(t){if(ti.rgb(t))return ese(t);if(ti.hex(t))return tse(t);if(ti.hsl(t))return ise(t)}function jd(t){var i=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(i)return i[1]}function rse(t){if(O0(t,"translate")||t==="perspective")return"px";if(O0(t,"rotate")||O0(t,"skew"))return"deg"}function R4(t,i){return ti.fnc(t)?t(i.target,i.id,i.total):t}function Gl(t,i){return t.getAttribute(i)}function z4(t,i,r){var s=jd(i);if(P4([r,"deg","rad","turn"],s))return i;var l=Y_.CSS[i+r];if(!ti.und(l))return l;var d=100,c=document.createElement(t.tagName),u=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;u.appendChild(c),c.style.position="absolute",c.style.width=d+r;var h=d/c.offsetWidth;u.removeChild(c);var f=h*parseFloat(i);return Y_.CSS[i+r]=f,f}function Oz(t,i,r){if(i in t.style){var s=i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),l=t.style[i]||getComputedStyle(t).getPropertyValue(s)||"0";return r?z4(t,l,r):l}}function L4(t,i){if(ti.dom(t)&&!ti.inp(t)&&(Gl(t,i)||ti.svg(t)&&t[i]))return"attribute";if(ti.dom(t)&&P4(Kae,i))return"transform";if(ti.dom(t)&&i!=="transform"&&Oz(t,i))return"css";if(t[i]!=null)return"object"}function Iz(t){if(ti.dom(t)){for(var i=t.style.transform||"",r=/(\w+)\(([^)]*)\)/g,s=new Map,l;l=r.exec(i);)s.set(l[1],l[2]);return s}}function ase(t,i,r,s){var l=O0(i,"scale")?1:0+rse(i),d=Iz(t).get(i)||l;return r&&(r.transforms.list.set(i,d),r.transforms.last=i),s?z4(t,d,s):d}function B4(t,i,r,s){switch(L4(t,i)){case"transform":return ase(t,i,s,r);case"css":return Oz(t,i,r);case"attribute":return Gl(t,i);default:return t[i]||0}}function F4(t,i){var r=/^(\*=|\+=|-=)/.exec(t);if(!r)return t;var s=jd(t)||0,l=parseFloat(i),d=parseFloat(t.replace(r[0],""));switch(r[0][0]){case"+":return l+d+s;case"-":return l-d+s;case"*":return l*d+s}}function Rz(t,i){if(ti.col(t))return nse(t);if(/\s/g.test(t))return t;var r=jd(t),s=r?t.substr(0,t.length-r.length):t;return i?s+i:s}function N4(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))}function sse(t){return Math.PI*2*Gl(t,"r")}function ose(t){return Gl(t,"width")*2+Gl(t,"height")*2}function lse(t){return N4({x:Gl(t,"x1"),y:Gl(t,"y1")},{x:Gl(t,"x2"),y:Gl(t,"y2")})}function zz(t){for(var i=t.points,r=0,s,l=0;l<i.numberOfItems;l++){var d=i.getItem(l);l>0&&(r+=N4(s,d)),s=d}return r}function dse(t){var i=t.points;return zz(t)+N4(i.getItem(i.numberOfItems-1),i.getItem(0))}function Lz(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return sse(t);case"rect":return ose(t);case"line":return lse(t);case"polyline":return zz(t);case"polygon":return dse(t)}}function cse(t){var i=Lz(t);return t.setAttribute("stroke-dasharray",i),i}function use(t){for(var i=t.parentNode;ti.svg(i)&&ti.svg(i.parentNode);)i=i.parentNode;return i}function Bz(t,i){var r=i||{},s=r.el||use(t),l=s.getBoundingClientRect(),d=Gl(s,"viewBox"),c=l.width,u=l.height,h=r.viewBox||(d?d.split(" "):[0,0,c,u]);return{el:s,viewBox:h,x:h[0]/1,y:h[1]/1,w:c/h[2],h:u/h[3]}}function hse(t,i){var r=ti.str(t)?Dz(t)[0]:t,s=i||100;return function(l){return{property:l,el:r,svg:Bz(r),totalLength:Lz(r)*(s/100)}}}function fse(t,i){function r(u){u===void 0&&(u=0);var h=i+u>=1?i+u:0;return t.el.getPointAtLength(h)}var s=Bz(t.el,t.svg),l=r(),d=r(-1),c=r(1);switch(t.property){case"x":return(l.x-s.x)*s.w;case"y":return(l.y-s.y)*s.h;case"angle":return Math.atan2(c.y-d.y,c.x-d.x)*180/Math.PI}}function Fz(t,i){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,s=Rz(ti.pth(t)?t.totalLength:t,i)+"";return{original:s,numbers:s.match(r)?s.match(r).map(Number):[0],strings:ti.str(t)||i?s.split(r):[]}}function Nz(t){var i=t?K_(ti.arr(t)?t.map(Pz):Pz(t)):[];return X_(i,function(r,s,l){return l.indexOf(r)===s})}function jz(t){var i=Nz(t);return i.map(function(r,s){return{target:r,id:s,total:i.length,transforms:{list:Iz(r)}}})}function pse(t,i){var r=O4(i);if(/^spring/.test(r.easing)&&(r.duration=Mz(r.easing)),ti.arr(t)){var s=t.length,l=s===2&&!ti.obj(t[0]);l?t={value:t}:ti.fnc(i.duration)||(r.duration=i.duration/s)}var d=ti.arr(t)?t:[t];return d.map(function(c,u){var h=ti.obj(c)&&!ti.pth(c)?c:{value:c};return ti.und(h.delay)&&(h.delay=u?0:i.delay),ti.und(h.endDelay)&&(h.endDelay=u===d.length-1?i.endDelay:0),h}).map(function(c){return Q_(c,r)})}function mse(t){for(var i=X_(K_(t.map(function(d){return Object.keys(d)})),function(d){return ti.key(d)}).reduce(function(d,c){return d.indexOf(c)<0&&d.push(c),d},[]),r={},s=function(d){var c=i[d];r[c]=t.map(function(u){var h={};for(var f in u)ti.key(f)?f==c&&(h.value=u[f]):h[f]=u[f];return h})},l=0;l<i.length;l++)s(l);return r}function gse(t,i){var r=[],s=i.keyframes;s&&(i=Q_(mse(s),i));for(var l in i)ti.key(l)&&r.push({name:l,tweens:pse(i[l],t)});return r}function vse(t,i){var r={};for(var s in t){var l=R4(t[s],i);ti.arr(l)&&(l=l.map(function(d){return R4(d,i)}),l.length===1&&(l=l[0])),r[s]=l}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function yse(t,i){var r;return t.tweens.map(function(s){var l=vse(s,i),d=l.value,c=ti.arr(d)?d[1]:d,u=jd(c),h=B4(i.target,t.name,u,i),f=r?r.to.original:h,m=ti.arr(d)?d[0]:f,p=jd(m)||jd(h),g=u||p;return ti.und(c)&&(c=f),l.from=Fz(m,g),l.to=Fz(F4(c,m),g),l.start=r?r.end:0,l.end=l.start+l.delay+l.duration+l.endDelay,l.easing=D4(l.easing,l.duration),l.isPath=ti.pth(d),l.isColor=ti.col(l.from.original),l.isColor&&(l.round=1),r=l,l})}var Uz={css:function(t,i,r){return t.style[i]=r},attribute:function(t,i,r){return t.setAttribute(i,r)},object:function(t,i,r){return t[i]=r},transform:function(t,i,r,s,l){if(s.list.set(i,r),i===s.last||l){var d="";s.list.forEach(function(c,u){d+=u+"("+c+") "}),t.style.transform=d}}};function Vz(t,i){var r=jz(t);r.forEach(function(s){for(var l in i){var d=R4(i[l],s),c=s.target,u=jd(d),h=B4(c,l,u,s),f=u||jd(h),m=F4(Rz(d,f),h),p=L4(c,l);Uz[p](c,l,m,s.transforms,!0)}})}function bse(t,i){var r=L4(t.target,i.name);if(r){var s=yse(i,t),l=s[s.length-1];return{type:r,property:i.name,animatable:t,tweens:s,duration:l.end,delay:s[0].delay,endDelay:l.endDelay}}}function wse(t,i){return X_(K_(t.map(function(r){return i.map(function(s){return bse(r,s)})})),function(r){return!ti.und(r)})}function Hz(t,i){var r=t.length,s=function(d){return d.timelineOffset?d.timelineOffset:0},l={};return l.duration=r?Math.max.apply(Math,t.map(function(d){var f,m,p,g;let c=(f=d.startOnceDelay)!=null?f:0,u=(m=d.pingPongDelayCorrection)!=null?m:0,h=(p=d.pingPongEndDelayCorrection)!=null?p:0;return s(d)+c+u+h+d.duration*((g=d.loop)!=null?g:1)})):i.duration,l.delay=r?Math.min.apply(Math,t.map(function(d){var h,f;let c=(h=d.startOnceDelay)!=null?h:0,u=(f=d.pingPongDelayCorrection)!=null?f:0;return s(d)+c+u+d.delay})):i.delay,l.endDelay=r?l.duration-Math.max.apply(Math,t.map(function(d){var f,m,p,g;let c=(f=d.startOnceDelay)!=null?f:0,u=(m=d.pingPongDelayCorrection)!=null?m:0,h=(p=d.pingPongEndDelayCorrection)!=null?p:0;return s(d)+c+u+d.duration*((g=d.loop)!=null?g:1)-d.endDelay-h})):i.endDelay,l}var Gz=0;function xse(t){var i=I4(Cz,t),r=I4(M4,t),s=gse(r,t),l=jz(t.targets),d=wse(l,s),c=Hz(d,r),u=Gz;return Gz++,Q_(i,{id:u,children:[],animatables:l,animations:d,duration:c.duration,delay:c.delay,endDelay:c.endDelay,startOnceDelay:r.startOnceDelay,pingPongDelayCorrection:r.pingPongDelayCorrection,pingPongEndDelayCorrection:r.pingPongEndDelayCorrection})}var co=[],Wz=[],J_,_se=function(){function t(){J_=requestAnimationFrame(i)}function i(r){var s=co.length;if(s){for(var l=0;l<s;){var d=co[l];d.paused?(co.splice(l,1),s-=1):(d.tick(r),l++)}t()}else J_=cancelAnimationFrame(J_)}return t}();function kse(t){document.hidden?(co.forEach(function(i){return i.pause(t.timeStamp)}),Wz=co.slice(0),lr.running=co=[]):Wz.forEach(function(i){return i.play(t.timeStamp)})}typeof document<"u"&&document.addEventListener("visibilitychange",kse);function lr(t){t===void 0&&(t={});var i=0,r=0,s=0,l,d,c=0,u=null;function h(T){var O=window.Promise&&new Promise(function(z){return u=z});return T.finished=O,O}var f=xse(t),m=h(f);function p(){var T=f.direction;T!=="alternate"&&(f.direction=T!=="normal"?"normal":"reverse"),f.reversed=!f.reversed,d.forEach(function(O){(O.loop===1||O.loop%2===0)&&(O.reversed=f.reversed)})}function g(){f.direction="normal",f.reversed=!1,d.forEach(function(T){return T.reversed=!1})}function v(T){return f.reversed?f.duration-T:T}function w(){i=0,r=v(f.currentTime)*(1/lr.speed)}function x(T,O,z=!1){O&&(f.reversed?O.seek(O.duration*O.loop-(T-O.timelineOffset-O.pingPongDelayCorrection),z):O.seek(T-O.timelineOffset-O.startOnceDelay-O.pingPongDelayCorrection,z))}function _(T,O=!1){if(f.reversed)for(var z=c;z--;)x(T,d[z],O);else for(var L=0;L<c;L++)x(T,d[L],O)}function k(T){var Ee,xe,Ue,Le,Ie,rt,nt,ot,mt,it;var O=0,z=f.animations,L=z.length;for(f.direction!=="alternate"&&((Ee=f.parent)==null?void 0:Ee.direction)==="alternate"?((xe=f.parent)==null?void 0:xe.rewind)===!1&&f.reversePlayback===!0&&f.rewind===!1&&((Ue=f.parent)!=null&&Ue.reversed&&f.direction==="alternate"?T=f.duration-f.delay+f.endDelay-T:T=f.duration+f.delay-f.endDelay-T):D(!1,(Le=f.parent)==null?void 0:Le.rewind,f.rewind,(Ie=f.parent)==null?void 0:Ie.reversePlayback,f.reversePlayback)&&((rt=f.parent)!=null&&rt.reversed&&f.direction==="alternate"?T=f.duration-f.delay+f.endDelay-T:T=f.duration+f.delay-f.endDelay-T);O<L;){var B=z[O],j=B.animatable,V=B.tweens,H=V.length-1,Y=V[H];H&&(Y=X_(V,function(pt){return T<pt.end})[0]||Y);let Ke;(nt=f.parent)!=null&&nt.reversed&&f.direction==="alternate"?Ke=qo(T-Y.start-Y.endDelay,0,Y.duration)/Y.duration:Ke=qo(T-Y.start-Y.delay,0,Y.duration)/Y.duration;for(var se=isNaN(Ke)?1:Y.easing(Ke),re=Y.to.strings,$=Y.round,te=[],he=Y.to.numbers.length,oe=void 0,ee=0;ee<he;ee++){var pe=void 0;let pt,Rt;f.direction!=="alternate"?((ot=f.parent)==null?void 0:ot.rewind)===!1&&f.reversePlayback===!0&&f.rewind===!1?(pt=Y.to.numbers[ee],Rt=Y.from.numbers[ee]||0):(Rt=Y.to.numbers[ee],pt=Y.from.numbers[ee]||0):D(!0,(mt=f.parent)==null?void 0:mt.rewind,f.rewind,(it=f.parent)==null?void 0:it.reversePlayback,f.reversePlayback)?(pt=Y.to.numbers[ee],Rt=Y.from.numbers[ee]||0):(Rt=Y.to.numbers[ee],pt=Y.from.numbers[ee]||0),Y.isPath?pe=fse(Y.value,se*Rt):pe=pt+se*(Rt-pt),$&&(Y.isColor&&ee>2||(pe=Math.round(pe*$)/$)),te.push(pe)}var ce=re.length;if(!ce)oe=te[0];else{oe=re[0];for(var ve=0;ve<ce;ve++){var le=re[ve],Pe=re[ve+1],we=te[ve];isNaN(we)||(Pe?oe+=we+Pe:oe+=we+" ")}}Uz[B.type](j.target,B.property,oe,j.transforms),B.currentValue=oe,O++}}function A(T){f[T]&&!f.passThrough&&f[T](f)}function C(){f.remaining&&f.remaining!==!0&&f.remaining--}let M={0:!1,1:!0,2:!1,3:!0,4:!1,5:!1,6:!1,7:!1,8:!1,9:!0,10:!0,11:!1,12:!1,13:!1,14:!0,15:!0,16:!1,17:!0,18:!0,19:!1,20:!1,21:!1,22:!0,23:!0,24:!1,25:!0,26:!1,27:!0,28:!1,29:!1,30:!1,31:!1};function D(T,O,z,L,B){return M[T<<4|O<<3|z<<2|L<<1|B]}function P(T,O=!1){var V;var z=f.duration;let L=f.delay,B=z-f.endDelay;(V=f.parent)!=null&&V.reversed&&f.direction==="alternate"&&(L=f.endDelay,B=z-f.delay);var j=v(T);if(f.progress=qo(j/z*100,0,100),O||(f.reversePlayback=j<f.currentTime),c&&_(j,O),!f.began&&f.currentTime>=0&&(f.began=!0,A("begin")),!f.loopBegan&&f.currentTime>0&&(f.loopBegan=!0,A("loopBegin")),(f.reversed||j>=0)&&j<=L&&f.currentTime!==0&&(k(0),A("change")),(j>=B&&f.currentTime!==z+f.pingPongDelayCorrection||!z)&&(k(z),A("change")),j>L&&j<B?(f.changeBegan||(f.changeBegan=!0,f.changeCompleted=!1,A("changeBegin")),k(j),A("change")):f.changeBegan?(f.changeCompleted=!0,f.changeBegan=!1,A("change"),c&&A("timelineChangeComplete")):f.began&&j>B&&A("changeComplete"),f.currentTime=qo(j,0,z+f.pingPongDelayCorrection),f.began&&A("update"),T>=z)if(C(),!f.remaining)f.paused=!0,f.completed||(f.completed=!0,A("loopComplete"),A("complete"),!f.passThrough&&"Promise"in window&&(u(),m=h(f)));else{c?i+=f.duration/lr.speed:i+=f.duration;for(let H of d)H.setStartTime(0),H.remaining=H.loop;A("loopComplete"),f.loopBegan=!1,f.direction==="alternate"?p():c&&g()}}return f.reset=function(){var T=f.direction;f.passThrough=!1,f.currentTime=0,f.progress=0,f.paused=!0,f.began=!1,f.loopBegan=!1,f.changeBegan=!1,f.completed=!1,f.changeCompleted=!1,f.reversePlayback=!1,f.reversed=T==="reverse",f.remaining=f.loop,d=f.children,c=d.length;for(var O=c;O--;)f.children[O].reset();k(f.reversed?f.duration:0)},f.setStartTime=function(T){i=T},f.set=function(T,O){return Vz(T,O),f},f.tick=function(T){s=T,i||(i=s),P((s+(r-i))*lr.speed)},f.seek=function(T,O=!1){P(T-i,O)},f.pause=function(T){f.paused=!0,c&&(l=T!=null?T:performance.now())},f.play=function(T){!f.paused||(f.completed&&f.reset(),f.paused=!1,co.push(f),c&&l!==void 0&&(i+=(T!=null?T:performance.now())-l),J_||_se())},f.reverse=function(){p(),f.completed=!f.reversed,w()},f.restart=function(){f.reset(),f.play()},f.reset(),f.autoplay&&f.play(),f}function qz(t,i){for(var r=i.length;r--;)P4(t,i[r].animatable.target)&&i.splice(r,1)}function Sse(t){for(var i=Nz(t),r=co.length;r--;){var s=co[r],l=s.animations,d=s.children;qz(i,l);for(var c=d.length;c--;){var u=d[c],h=u.animations;qz(i,h),!h.length&&!u.children.length&&d.splice(c,1)}!l.length&&!d.length&&s.pause()}}function Ase(t,i){i===void 0&&(i={});var r=i.direction||"normal",s=i.easing?D4(i.easing):null,l=i.grid,d=i.axis,c=i.from||0,u=c==="first",h=c==="center",f=c==="last",m=ti.arr(t),p=parseFloat(m?t[0]:t),g=m?parseFloat(t[1]):0,v=jd(m?t[1]:t)||0,w=i.start||0+(m?p:0),x=[],_=0;return function(k,A,C){if(u&&(c=0),h&&(c=(C-1)/2),f&&(c=C-1),!x.length){for(var M=0;M<C;M++){if(!l)x.push(Math.abs(c-M));else{var D=h?(l[0]-1)/2:c%l[0],P=h?(l[1]-1)/2:Math.floor(c/l[0]),T=M%l[0],O=Math.floor(M/l[0]),z=D-T,L=P-O,B=Math.sqrt(z*z+L*L);d==="x"&&(B=-z),d==="y"&&(B=-L),x.push(B)}_=Math.max.apply(Math,x)}s&&(x=x.map(function(V){return s(V/_)*_})),r==="reverse"&&(x=x.map(function(V){return d?V<0?V*-1:-V:Math.abs(_-V)}))}var j=m?(g-p)/_:p;return w+j*(Math.round(x[A]*100)/100)+v}}function Cse(t){t===void 0&&(t={});var i=lr(t);return i.duration=0,i.add=function(r,s){var l=co.indexOf(i),d=i.children;l>-1&&co.splice(l,1);function c(g){g.passThrough=!0}for(var u=0;u<d.length;u++)c(d[u]);var h=Q_(r,I4(M4,t));h.targets=h.targets||t.targets;var f=i.duration;h.autoplay=!1,h.timelineOffset=ti.und(s)?f:F4(s,f),c(i);var m=lr(h);c(m),d.push(m),m.parent=i;var p=Hz(d,t);return i.delay=p.delay,i.endDelay=p.endDelay,i.duration=p.duration,m.loop===!0&&(i.duration=1/0),i.seek(0),i.reset(),i.autoplay&&i.play(),i},i}lr.version="3.2.0",lr.speed=1,lr.running=co,lr.remove=Sse,lr.get=B4,lr.set=Vz,lr.convertPx=z4,lr.path=hse,lr.setDashoffset=cse,lr.stagger=Ase,lr.timeline=Cse,lr.easing=D4,lr.penner=Tz,lr.random=function(t,i){return Math.floor(Math.random()*(i-t+1))+t};var $z=lr,Zz=new N,Yz=new N,Xz=new Ut;function Ese(t,i,r,s){if(s===0)return r.copy(t);if(s===1)return r.copy(i);let l=t.w*i.w+t.x*i.x+t.y*i.y+t.z*i.z;if(l>=1)return r.copy(t);let d=1-l*l;if(d<=Number.EPSILON){let m=1-s;return r.w=m*t.w+s*i.w,r.x=m*t.x+s*i.x,r.y=m*t.y+s*i.y,r.z=m*t.z+s*i.z,r.normalize(),r}let c=Math.sqrt(d),u=Math.atan2(c,l),h=Math.sin((1-s)*u)/c,f=Math.sin(s*u)/c;return r.w=t.w*h+i.w*f,r.x=t.x*h+i.x*f,r.y=t.y*h+i.y*f,r.z=t.z*h+i.z*f,r}function Ah(t,i,r,s,l,d){var m,p;let c=r[t]?r[t]:void 0,u=s[t];if(u==null)return;let h=c!=null?typeof c=="string"?Number((m=l.getVariable(c))!=null?m:0):c:i[t],f=typeof u=="string"?Number((p=l.getVariable(u))!=null?p:0):u;if(h!==f)return{update:g=>{let v=fe.lerp(h,f,g);d?i[t]=Math.trunc(v):i[t]=v},start:()=>{i[t]=h},end:()=>{i[t]=f}}}function Kz(t,i,r,s,l,d){let c=r[t]?r[t]:void 0,u=s[t];if(!u)return;let h=i[t],f=[...c!=null?c:h].map(p=>{var g;return typeof p=="string"?Number((g=l.getVariable(p))!=null?g:0):p}),m=[...u].map(p=>{var g;return typeof p=="string"?Number((g=l.getVariable(p))!=null?g:0):p});if(!(f.length!==m.length||xO(f,m)))return{update:p=>{f.forEach((g,v)=>{let w=fe.lerp(g,m[v],p);i[t][v]=d?Math.trunc(w):w})},start:()=>{Object.assign(i[t],f)},end:()=>{Object.assign(i[t],m)}}}function e2(t,i,r){return i.forEach((s,l)=>{var d;t.setComponent(l,typeof s=="string"?Number((d=r.getVariable(s))!=null?d:0):s)}),t}function Qz(t,i,r,s,l){let d=r[t]?r[t]:void 0,c=s[t];if(!c)return;let u=i[t],h=d?e2(new N,d,l):u.clone(),f=e2(new N,c,l);if(!h.equals(f))return{update:m=>{u.lerpVectors(h,f,m)},start:()=>{u.copy(h)},end:()=>{u.copy(f)}}}function Mse(t,i,r,s){let l=r[t]?r[t]:void 0,d=s[t];if(!d)return;let c=i[t],u=l?new Ze().fromArray(l):c.clone(),h=new N,f=new Ut,m=new N;u.decompose(h,f,m);let p=new Ze().fromArray(d),g=new N,v=new Ut,w=new N;if(p.decompose(g,v,w),!u.equals(p))return{update:x=>{Xz.slerpQuaternions(f,v,x),Zz.lerpVectors(h,g,x),Yz.lerpVectors(m,w,x),c.compose(Zz,Xz,Yz)},start:()=>{c.compose(h,f,m)},end:()=>{c.compose(g,v,w)}}}function Tse(t,i,r,s,l){let d=r[t]?r[t]:void 0,c=s[t];if(!c)return;let u=i[t],h=d?typeof d=="string"?l.getColor(d).clone():new _t().setRGB(d.r,d.g,d.b):u.clone(),f=typeof c=="string"?l.getColor(c).clone():new _t().setRGB(c.r,c.g,c.b);if(h.equals(f))return;let m=u.clone();return i[t]=m,{update:p=>{m.lerpColors(h,f,p)},start:()=>{m.copy(h)},end:()=>{m.copy(f)}}}function iu(t,i,r,s,l){if(typeof i[t]=="number")return Ah(t,i,r!=null?r:{},s,l);if(Array.isArray(i[t]))return Kz(t,i,r!=null?r:{},s,l)}function Dse(t,i,r,s){var u,h,f,m;let l=[],d=t.cameraType==="OrthographicCamera"?(u=i.orthographic)==null?void 0:u.zoom:(h=i.perspective)==null?void 0:h.zoom,c=t.cameraType==="OrthographicCamera"?(f=r.orthographic)==null?void 0:f.zoom:(m=r.perspective)==null?void 0:m.zoom;if(c!==void 0){let p=d!=null?d:t.zoom,g=c;p!==g&&l.push({update:v=>{t.zoom=fe.lerp(p,g,v),t.updateProjectionMatrix()},start:()=>{t.zoom=p,t.updateProjectionMatrix()},end:()=>{t.zoom=g,t.updateProjectionMatrix()}})}if(r.targetOffset!==void 0){let p=Ah("targetOffset",t,i,r,s);p&&l.push(p)}return l}function Pse(t,i,r,s){var u;if(r.scaleBaked===void 0)return;let l=((u=i.scaleBaked)!=null?u:t.data.geometry.scaleBaked).map(h=>{var f;return typeof h=="string"?Number((f=s.getVariable(h))!=null?f:0):h}),d=r.scaleBaked.map(h=>{var f;return typeof h=="string"?Number((f=s.getVariable(h))!=null?f:0):h});if(nh.isEqual(l,d))return;let c=[];return c.push({update:h=>{t.updateGeometryInteractions({scaleBaked:[fe.lerp(l[0],d[0],h),fe.lerp(l[1],d[1],h),fe.lerp(l[2],d[2],h)]},s),t.invalidateDownstreamBooleanData()},start:()=>{t.updateGeometryInteractions({scaleBaked:l},s),t.invalidateDownstreamBooleanData()},end:()=>{t.updateGeometryInteractions({scaleBaked:d},s),t.invalidateDownstreamBooleanData()}}),c}function Ose(t,i,r,s){var h;if(!r.extrusion)return;let l=t.extrusion,d=(h=i.extrusion)!=null?h:{},c=r.extrusion,u=[];return RI.forEach(f=>{let m=iu(f,l,d,c,s);m&&u.push(m)}),u}function Ise(t,i,r,s){let l=[];if(!("geometry"in r))return l;let d=t.geometry.userData.parameters,c="geometry"in i?i.geometry:{},u=r.geometry;if(t instanceof x0){let h=Pse(t,c,u,s);h&&l.push(...h)}else{let h={};if(Object.assign(h,Sd(d,zI)),zI.forEach(f=>{let m=iu(f,h,c,u,s);m&&l.push(m)}),t instanceof l4){Object.assign(h,{extrusion:Z({},d.extrusion)});let f=Ose(h,c,u,s);f&&l.push(...f)}l.length&&l.push({update:f=>{t.updateGeometryInteractions(h,s),t.updateGeometryGroupsIfNeeded()},start:f=>{t.updateGeometryInteractions(h,s),t.updateGeometryGroupsIfNeeded()},end:f=>{t.updateGeometryInteractions(h,s),t.updateGeometryGroupsIfNeeded()}})}return l}function Rse(t,i,r,s){let l=[];if(r.intensity!==void 0){let d=Ah("intensity",t,i,r,s);d&&l.push(d)}if(r.color!==void 0){let d=Tse("color",t,i,r,s);d&&l.push(d)}return l}function zse(t,i,r,s){let l=[];if(Array.isArray(t.material)){if(!("materials"in r&&r.materials))return l;let d="materials"in i&&i.materials?i.materials:[],c=r.materials;t.material.forEach((u,h)=>{var p;if(!c[h])return;let f=(p=d[h])!=null?p:{},m=c[h];typeof f=="string"||typeof m=="string"||l.push(...Jz(u,f,m,s))})}else{if(!("material"in r&&r.material))return l;let d="material"in i&&i.material?i.material:{},c=r.material;if(typeof d=="string"||typeof c=="string")return l;l.push(...Jz(t.material,d,c,s))}return l}function Jz(t,i,r,s){var c,u,h;let l=[],d=Xp(r,s)||!!i.layers&&Xp(i,s);l.push(Gse(t,d));for(let f of t.layers){let m=(c=i.layers)==null?void 0:c.data(f.uuid),p=r.layers.data(f.uuid);if(!p||f.type!=="light"&&(!((u=f.visible)==null||u)||!((h=p.visible)==null||h)))continue;let g=f.getNames().filter(v=>!PI.some(w=>v.includes(w)));for(let v of g)try{let w=f.getValue(v),x;if(v==="colors")x=Vse(f,m,p,v);else if(Array.isArray(w))v==="steps"&&(x=Use(f,m,p,v));else if(typeof w=="number")x=Lse(f,m,p,v,s);else{if(typeof w=="boolean")continue;w instanceof q?x=Bse(f,m,p,v):w instanceof N?x=Fse(f,m,p,v,s):w instanceof hs?x=jse(f,m,p,v,s):w instanceof _t?x=Nse(f,m,p,v,s):"isTexture"in w&&(x=Hse(f,m,p,v))}x&&(Array.isArray(x)?l.push(...x):l.push(x))}catch(w){console.error(`lerpMaterial: unexpected material layer for ${v}`,w)}}return l}function Lse(t,i,r,s,l){var f,m;if(!t.hasValue(s)||!(s in r))return;let d=i?i[s]:t.getValue(s),c=r[s],u=typeof d=="string"?Number((f=l.getVariable(d))!=null?f:0):d,h=typeof c=="string"?Number((m=l.getVariable(c))!=null?m:0):c;if(u!==h)return{update:p=>{t.setValue(s,fe.lerp(u,h,p))},start:()=>{t.setValue(s,u)},end:()=>{t.setValue(s,h)}}}function Bse(t,i,r,s){if(!t.hasValue(s)||!(s in r))return;let l=t.getValue(s),d=i?new q().fromArray(i[s]):l.clone(),c=new q().fromArray(r[s]);if(!d.equals(c))return{update:u=>{l.lerpVectors(d,c,u)},start:()=>{l.copy(d)},end:()=>{l.copy(c)}}}function Fse(t,i,r,s,l){if(!t.hasValue(s)||!(s in r))return;let d=t.getValue(s),c=i?i[s]:void 0,u=r[s],h=c?e2(new N,c,l):d.clone(),f=e2(new N,u,l);if(!h.equals(f))return{update:m=>{d.lerpVectors(h,f,m)},start:()=>{d.copy(h)},end:()=>{d.copy(f)}}}function Nse(t,i,r,s,l){if(!t.hasValue(s)||!(s in r))return;let d=i?i[s]:void 0,c=r[s],u=t.getValue(s),h=d?typeof d=="string"?l.getColor(d).clone():new _t().setRGB(d.r,d.g,d.b):u.clone(),f=typeof c=="string"?l.getColor(c).clone():new _t().setRGB(c.r,c.g,c.b);if(h.equals(f))return;let m=u.clone();return{update:p=>{t.getValue(s)!==m&&t.setValue(s,m),m.lerpColors(h,f,p)},start:()=>{m.copy(h)},end:()=>{m.copy(f)}}}function jse(t,i,r,s,l){if(!t.hasValue(s)||!(s in r))return;let d=i?i[s]:void 0,c=r[s],u=t.getValue(s),h=d?typeof d=="string"?l.getColor(d).clone():new _t().setRGB(d.r,d.g,d.b):u.clone(),f=typeof c=="string"?l.getColor(c).clone():new hs(c.r,c.g,c.b,c.a);if(h.equals(f))return;let m=u.clone();return{update:p=>{t.getValue(s)!==m&&t.setValue(s,m),m.lerpColors(h,f,p)},start:()=>{m.copy(h)},end:()=>{m.copy(f)}}}function Use(t,i,r,s="steps"){if(!t.hasValue(s)||!(s in r))return;let l=[],d=t.getValue(s),c=i?i[s]:d,u=r[s];for(let h=0;h<d.length;++h){let f=c[h],m=u[h];f!==m&&l.push({update:p=>{d[h]=fe.lerp(f,m,p)},start:()=>{d[h]=f},end:()=>{d[h]=m}})}return l.length?l:void 0}function Vse(t,i,r,s="colors"){if(!t.hasValue(s)||!(s in r))return;let l=[],d=t.getValue(s),c=i?i[s]:d.map(h=>h.toArray()),u=r[s];for(let h=0;h<d.length;++h){let f=[...c[h]],m=[...u[h]];Hx.isEqual(f,m)||l.push({update:p=>{d[h].fromArray(Hx.lerp(f,m,p))},start:()=>{d[h].fromArray(f)},end:()=>{d[h].fromArray(m)}})}return l.length?l:void 0}function Hse(t,i,r,s="texture"){if(!t.hasValue(s)||!(s in r))return;let l=t.getNode("mat");if(!l)return;let d=i?i[s]:l,c=r[s],u=[...d.repeat],h=[...d.offset],f=[...c.repeat],m=[...c.offset];if(!mp.isEqual(u,f)||!mp.isEqual(h,m))return{update:p=>{l.repeat=mp.lerp(u,f,p),l.offset=mp.lerp(h,m,p),l.updateMatrix()},start:()=>{l.repeat=[...u],l.offset=[...h],l.updateMatrix()},end:()=>{l.repeat=[...f],l.offset=[...m],l.updateMatrix()}}}function Gse(t,i){return{update:()=>{t.transparent=i}}}var j4=new N,eL=new Vr;function Wse(t,i,r,s,l){var v,w,x,_,k,A,C,M,D,P,T,O,z,L,B,j,V,H;let d=[],c,u,h,f,m,p,g={slide:(A=(k=(x=(v=i.pathSnapping)==null?void 0:v.slide)!=null?x:(w=t.updatedPathSnapping)==null?void 0:w.slide)!=null?k:(_=t.dataPatched.pathSnapping)==null?void 0:_.slide)!=null?A:0,offset:(O=(T=(D=(C=i.pathSnapping)==null?void 0:C.offset)!=null?D:(M=t.updatedPathSnapping)==null?void 0:M.offset)!=null?T:(P=t.dataPatched.pathSnapping)==null?void 0:P.offset)!=null?O:0};if(m=Ah("slide",g,(L=(z=i.pathSnapping)!=null?z:t.updatedPathSnapping)!=null?L:t.dataPatched.pathSnapping,(B=r.pathSnapping)!=null?B:t.dataPatched.pathSnapping,l),m&&d.push(m),p=Ah("offset",g,(V=(j=i.pathSnapping)!=null?j:t.updatedPathSnapping)!=null?V:t.dataPatched.pathSnapping,(H=r.pathSnapping)!=null?H:t.dataPatched.pathSnapping,l),p&&d.push(p),!m&&!p&&(c=Qz("position",t,i,r,l),c&&d.push(c),u=Qz("scale",t,i,r,l),u&&d.push(u),h=qse(t,i,r,s,l),h&&d.push(h),f=Mse("hiddenMatrix",t,i,r),f&&d.push(f)),c||u||h||f||m||p){let Y=()=>{var se;t.updateMatrix(),t.hasNonUniformScale&&(t.updateMatrixWorld(),t.updateMatrixWorldSVD()),(se=t.parent)!=null&&se.matrixWorldFusedFalse&&(t.matrixWorld.multiplyMatrices(t.parent.matrixWorldFusedFalse,t.matrix),t.matrixWorldNeedsUpdate=!1),Go(t)&&Bd(t.parent)&&t.invalidateDownstreamBooleanData(!0),t.updatePathSnapping(Object.assign({},i.pathSnapping,g))};d.push({update:Y,start:Y,end:Y})}return d}function qse(t,i,r,s,l){var m;let d=i!=null&&i.rotation?i.rotation.map(p=>{var g;return(typeof p=="string"?Number((g=l.getVariable(p))!=null?g:0):p)*fe.DEG2RAD}):void 0,c=(m=r.rotation)==null?void 0:m.map(p=>{var g;return(typeof p=="string"?Number((g=l.getVariable(p))!=null?g:0):p)*fe.DEG2RAD});if(!c)return;let u=d?new N().fromArray(d):new N().setFromEuler(t.rotation),h=new N().fromArray(c);if(u.equals(h))return;let f=j4.subVectors(h,u);if(s&&f.toArray().every(p=>Math.abs(p)<2*Math.PI)){let p=new Ut().setFromEuler(eL.setFromVector3(u)),g=new Ut().setFromEuler(eL.setFromVector3(h));return{update:v=>{Ese(p,g,t.quaternion,v)},start:()=>{t.rotation.setFromVector3(u)},end:()=>{t.rotation.setFromVector3(h)}}}else return{update:p=>{j4.lerpVectors(u,h,p),t.rotation.setFromVector3(j4)},start:()=>{t.rotation.setFromVector3(u)},end:()=>{t.rotation.setFromVector3(h)}}}function $se(t,i,r,s){let l=[];if(!("cloner"in r)||!t.cloner)return l;let d=t.cloner,c="cloner"in i?i.cloner:{},u=r.cloner;_I.forEach(v=>{let w;v==="count"?w=Ah("count",d.parameters,c,u,s,!0):w=iu(v,d.parameters,c!=null?c:{},u,s),w&&l.push(w)});let h=Zse(d,c,u,s);h!=null&&h.length&&l.push(...h);let f=Yse(d,c,u,s);f!=null&&f.length&&l.push(...f);let m=Xse(d,c,u,s);m!=null&&m.length&&l.push(...m);let p=Kse(d,c,u,s);p!=null&&p.length&&l.push(...p);let g=Qse(d,c,u,s);return g!=null&&g.length&&l.push(...g),l.length&&l.push({update:()=>{d.update()}}),l}function Zse(t,i,r,s){if(t.parameters.type!=="radial")return;let l=i.radial,d=r.radial;if(!d)return;let c=t.parameters.radial,u=[];return kI.forEach(h=>{let f=iu(h,c,l!=null?l:{},d,s);f&&u.push(f)}),u}function Yse(t,i,r,s){if(t.parameters.type!=="linear")return;let l=i.linear,d=r.linear;if(!d)return;let c=[],u=t.parameters.linear;return SI.forEach(h=>{let f=iu(h,u,l!=null?l:{},d,s);f&&c.push(f)}),c}function Xse(t,i,r,s){if(t.parameters.type!=="grid")return;let l=i.grid,d=r.grid;if(!d)return;let c=[],u=t.parameters.grid;return AI.forEach(h=>{let f;h==="count"?f=Kz(h,u,l!=null?l:{},d,s,!0):f=iu(h,u,l!=null?l:{},d,s),f&&c.push(f)}),c}function Kse(t,i,r,s){if(t.parameters.type!=="toObject")return;let l=i.toObject,d=r.toObject;if(!d)return;let c=[],u=t.parameters.toObject;return CI.forEach(h=>{let f;h==="count"?f=Ah(h,u,l!=null?l:{},d,s,!0):f=iu(h,u,l!=null?l:{},d,s),f&&c.push(f)}),c}function Qse(t,i,r,s){if(!t.parameters.randomness)return;let l=i.randomnessObject,d=r.randomnessObject;if(!d)return;let c=[],u=t.parameters.randomnessObject;return EI.forEach(h=>{let f=iu(h,u,l!=null?l:{},d,s);f&&c.push(f)}),c}function tL(t,i,r,s,l){let d=[];return t.data.visible&&d.push(...Wse(t,i,r,l,s)),t.data.visible&&d.push(...$se(t,i,r,s)),Go(t)?(t instanceof qa&&t.data.visible&&d.push(...Ise(t,i,r,s)),t.data.visible&&d.push(...zse(t,i,r,s))):ine(t)?t.data.visible&&d.push(...Rse(t,i,r,s)):tne(t)&&d.push(...Dse(t,i,r,s)),d.length?{update:c=>{d.forEach(u=>u.update(c))},start:c=>{d.forEach(u=>{var h;return(h=u.start)==null?void 0:h.call(u,c)})},end:c=>{d.forEach(u=>{var h;return(h=u.end)==null?void 0:h.call(u,c)})}}:void 0}var iL=new N;function U4(t,i,r=!1){let s=[];t.traverseChildren(l=>{var h,f,m,p,g;if(r&&((h=l.rigidBody)==null||h.setTranslation(l.position0,!0),(f=l.rigidBody)==null||f.setRotation(l.rotation0,!0),(m=l.rigidBody)==null||m.setLinvel(iL,!0),(p=l.rigidBody)==null||p.setAngvel(iL,!0)),!Ri.is(l))return;let d=l.uuid,c=l.data;if(delete l.states,l.uuid===pp)return;let u=!1;s.some(v=>{var w;return(w=t.scene.find(d))==null?void 0:w.isDescendantOf(v)})?u=!0:((g=c.physics)==null?void 0:g.fusedBody)===!0&&c.physics.rigidBody==="dynamic"&&s.push(d),l.data=c,l.currentState=null,l.reversibleToState=null,l.currentTransitionEvent=null;for(let v of c.states){let w=Z({},v.data);t.data.globalPhysics.usePhysics===!0&&c.physics&&(c.physics.rigidBody==="dynamic"||u)&&(v.data.position!==void 0&&delete w.position,v.data.rotation!==void 0&&delete w.rotation,v.data.hiddenMatrix!==void 0&&delete w.hiddenMatrix),l.states||(l.states={}),l.states[v.id]=ah.patch(c,w)}eoe(t.scene,l,null,i,c.events.find(v=>v.data.type==="Follow"||v.data.type==="LookAt")!==void 0),Jse(t)})}function Jse(t){t.traverseEntity(i=>{for(let r of i.data.events){let s=[];switch(r.data.type){case"Follow":case"MouseHover":case"Scroll":case"MouseDown":case"MouseUp":case"MousePress":case"KeyUp":case"KeyDown":case"KeyPress":case"Collision":s.push(...r.data.actions);break;case"GameControl":for(let l of Object.values(r.data.gameActions))s.push(...l);break;case"DragDrop":s.push(...r.data.dragDropActions.drag,...r.data.dragDropActions.drop);break;case"Conditional":s.push(...r.data.inActions,...r.data.outActions);break}for(let l of s)if(l.data.type==="Create"&&l.data.hideBase==="Yes"){let d=t.scene.find(l.data.object);d&&(d.visible=!1)}}})}function eoe(t,i,r,s,l=!1){if(i instanceof qa&&i.removeInteractionGeometry(),i.changeSelectedState(r,{scene:t,shared:s},l),i instanceof qa&&i.updateGeometryGroupsIfNeeded(),i instanceof ga&&i.updateCameraState(i.dataPatched,{scene:t,shared:s}),i.cloner)for(let d of i.cloner.children)d.playModeVisible=void 0;i.updateVisible()}function nL(t){let i;if(t.easing===5){let{control1:r,control2:s}=t;i=`cubicBezier(
			${r[0]}, ${r[1]}, ${s[0]}, ${s[1]}
		)`}else if(t.easing===6){let{mass:r,stiffness:s,damping:l,velocity:d}=t;i=`spring( ${r}, ${s}, ${l}, ${d} )`}else{let r;switch(t.easing){case 0:r=zc.linear;break;case 1:r=zc.ease;break;case 2:r=zc.easeIn;break;case 3:r=zc.easeOut;break;case 4:r=zc.easeInOut;break;default:r=zc.linear}let[s,l,d,c]=r;i=`cubicBezier( ${s}, ${l}, ${d}, ${c} )`}return{duration:t.duration,easing:i}}function V4(t){let i={delay:0,loop:t.repeat===-1?!0:t.repeat+1};if(t.repeat===0)i.direction="normal",i.rewind=!1;else switch(t.direction){case"pingpong":i.direction="alternate",i.rewind=!1;break;case"pingpong-rewind":i.direction="alternate",i.rewind=!0;break;default:i.direction="normal",i.rewind=!1;break}switch(i.delay=0,i.endDelay=0,i.startOnceDelay=0,i.pingPongDelayCorrection=0,i.pingPongEndDelayCorrection=0,t.delayDirection){case"start-once":i.startOnceDelay=t.delay;break;case"start":i.delay=t.delay;break;case"end":i.endDelay=t.delay;break;case"start-end":case void 0:i.delay=t.delay,i.endDelay=t.delay;break}return i.direction==="alternate"&&(i.delay/=2,i.endDelay/=2,t.delayDirection==="start"?(i.pingPongDelayCorrection=i.delay,typeof i.loop=="number"&&i.loop%2===0&&(i.pingPongEndDelayCorrection=i.delay)):t.delayDirection==="end"?typeof i.loop=="number"&&i.loop%2!==0&&(i.pingPongEndDelayCorrection=i.endDelay):t.delayDirection==="start-end"&&(i.pingPongDelayCorrection=i.delay,i.pingPongEndDelayCorrection=i.endDelay)),i}var toe={type:"beginState"},ioe={type:"completeState",isfromEntity:!1},rL=class{constructor(t,i,r,s,l,d){if(this.object=t,this.data=s,this.sharedAssets=l,this.allowSlerp=d,this.targets={t:0},this.firstLoop=!0,this._changeBegan=!1,this._changeCompleted=!0,this.onChange=()=>{this.callback&&(this.callback.update(this.targets.t),this.object.dispatchEvent({type:"requestRender"})),this.targets.t===0||this.targets.t===1?this._changeCompleted||(this._changeCompleted=!0,this._changeBegan=!1,this.onChangeComplete()):(this._changeCompleted&&(this._changeCompleted=!1),this._changeBegan||(this._changeBegan=!0,this.onChangeBegin()))},this.onChangeBegin=()=>{this.object.reversibleToState=this.to.id;let c=this.targets.t>.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=c,this.object.dispatchEvent({type:"beginState",state:c}),this.object.traverseEntity(u=>{u!==this.object&&u instanceof ga&&u.dispatchEvent(toe)})},this.onChangeComplete=()=>{this.firstLoop&&(this.onFirstLoop(),this.firstLoop=!1),this.object.reversibleToState=this.to.id;let c=this.targets.t<.5?this.from.id:this.to.id;this.object.prevState!==this.object.currentState&&(this.object.prevState=this.object.currentState),this.object.currentState=c,this.object.dispatchEvent({type:"completeState",state:c}),this.object.traverseEntity(u=>{u!==this.object&&u instanceof ga&&u.dispatchEvent(ioe)})},this.onFirstLoop=()=>{this.useCurrentState&&(this.callback=tL(this.object,this.from.data,this.to.data,this.sharedAssets,this.allowSlerp))},i===void 0){let c=t2(this.object,this.object.currentState===r?this.object.prevState:this.object.currentState);if(!c)throw new Error("Missing property");this.from=c}else{let c=t2(this.object,i);if(!c)throw new Error("Missing property");this.from=c}if(r===void 0)throw new Error("Missing property");{let c=t2(this.object,r);if(!c)throw new Error("Missing property");this.to=c}this.useCurrentState=i===void 0||r===void 0,this.params=ge(Z(Z({targets:this.targets,t:1,autoplay:!1},V4(s)),nL(s)),{change:this.onChange}),this.callback=tL(this.object,i===void 0?{}:this.from.data,r===void 0?{}:this.to.data,this.sharedAssets,this.allowSlerp)}get changeBegan(){return this._changeBegan}get changeCompleted(){return this._changeCompleted}},aL=class extends Cr{constructor(t,i,r,s){if(super(),this.data=t,this.page=i,this.shared=r,this.condition=s,this.toggleIsForward=!1,this.timelineNeedsRebuild=!1,this.useToggle=!1,this.onTimelineChangeComplete=()=>{var d;this.data.tweens[0].data.direction!=="normal"&&(this.toggleIsForward=!this.toggleIsForward),this.timelineNeedsRebuild!==!1&&((d=this.timeline)==null||d.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!1,isRebuild:!0}),this.timeline.play())},!t.object)throw new Error("Missing property");let l=this.page.scene.find(t.object);if(!l)throw new Error("Missing property");if(!l.states)throw new Error("Missing property");if(this.object=l,t.tweens.length<2)throw new Error("Missing property");this.tweens=Array(this.data.tweens.length-1),this.startOnceDelay=t.tweens[0].data.delayDirection==="start-once"?t.tweens[0].data.delay:0,this.init()}get playing(){return this.timeline&&this.timeline.paused===!1}init(){this.initialCurrentState=t2(this.object,this.object.currentState).id,this.toggleIsForward=!1}get currentState(){return this.useToggle?this.initialCurrentState:this.object.currentState}buildTimeline({isForward:t=!0,needsRebuild:i=!1,isRebuild:r=!1}={}){var s,l,d,c,u,h;try{let f=V4(this.data.tweens[0].data);r&&typeof f.loop=="number"&&f.loop--,(s=this.timeline)==null||s.pause(),this.timeline=$z.timeline(Z(Z({autoplay:!1},f),f.loop===!0||f.loop>1?{timelineChangeComplete:this.onTimelineChangeComplete}:{}));let m=this.tweens.findIndex(p=>p==null?void 0:p.changeBegan);if(i===!0&&(this.timelineNeedsRebuild=!0),t){let p=m===-1?0:m;for(let g=p;g<this.data.tweens.length-1;g++){let v=this.data.tweens[g],w=this.data.tweens[g+1],x;g===p&&(this.object.wasMovedByUser===!0||((l=this.object.previousAction)==null?void 0:l.playing)===!0)?(x=void 0,this.object instanceof ga&&(this.object.wasMovedByUser=!1)):x=v.data.state===void 0?this.currentState:v.data.state;let _=new rL(this.object,x,w.data.state===void 0?this.currentState:w.data.state,w.data,this.shared,(d=this.data.allowSlerp)!=null?d:!1);m!==-1&&g===p&&Object.assign(_.params,{startOnceDelay:0}),this.tweens[g]=_,this.timeline.add(_.params,this.timeline.duration+(g===p?f.delay:0))}this.timeline.duration+=f.endDelay}else{let p=m===-1?this.data.tweens.length-1:m+1;for(let g=p;g>0;g--){let v=this.data.tweens[g],w=this.data.tweens[g-1],x;g===p&&(this.object.wasMovedByUser===!0||((c=this.object.previousAction)==null?void 0:c.playing)===!0)?(x=void 0,this.object instanceof ga&&(this.object.wasMovedByUser=!1)):x=v.data.state===void 0?this.currentState:v.data.state;let _=new rL(this.object,x,w.data.state===void 0?this.currentState:w.data.state,v.data,this.shared,(u=this.data.allowSlerp)!=null?u:!1);m!==-1&&g===p&&Object.assign(_.params,{startOnceDelay:0}),this.tweens[g-1]=_,this.timeline.add(_.params,this.timeline.duration+(g===p?f.endDelay:0))}this.timeline.duration+=f.delay}}catch(f){f instanceof Error&&console.error(f.message)}((h=this.object.previousAction)==null?void 0:h.playing)===!0&&this.object.previousAction.pause(),this.object.previousAction=this}play(){if(xr(this.shared,this.condition)===!1||this.playing)return!1;clearTimeout(this.timeoutId);let t=V4(this.data.tweens[0].data).pingPongDelayCorrection;this.timeoutId=window.setTimeout(()=>{try{this.buildTimeline(),this.timeline.play()}catch(i){i instanceof Error&&console.error(i.message)}},this.startOnceDelay+t)}pause(){var t;(t=this.timeline)==null||t.pause(),clearTimeout(this.timeoutId),this.tweens=Array(this.data.tweens.length-1),delete this.timeoutId}stop(){this.pause();let t=this.data.tweens[0].data.state===void 0?this.initialCurrentState:this.data.tweens[0].data.state;this.object.changeSelectedState(t,{scene:this.page.scene,shared:this.shared}),this.object.currentState=t}seek(t){var i;this.timeline===void 0&&this.buildTimeline(),(i=this.timeline)==null||i.seek(t*this.timeline.duration,!0)}toggle(t){var i;if(xr(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=t!=null?t:!this.toggleIsForward,this.playing?((i=this.timeline)==null||i.pause(),this.buildTimeline({isForward:this.toggleIsForward,needsRebuild:!0}),this.timeline.play()):this.timeoutId=window.setTimeout(()=>{var r;(r=this.timeline)==null||r.pause(),this.buildTimeline({isForward:this.toggleIsForward}),this.timeline.play()},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause()}};function t2(t,i){var l;let r,s;if(typeof i=="string"?(r=i,s=(l=t.states)==null?void 0:l[r]):i===null&&(r=null,s=t.data),!(r===void 0||s===void 0))return{id:r,data:s}}var noe={type:"beginState"},sL={type:"completeState",isfromEntity:!1},oL={type:"requestRender"},lL=class extends Cr{constructor(t,i,r,s){super(),this.data=t,this.page=i,this.shared=r,this.condition=s,this.toggleIsForward=!1,this.useToggle=!1,this.posStart=new N,this.posEnd=new N,this.qStart=new Ut,this.qEnd=new Ut,this.zoomStart=1,this.zoomEnd=1}init(){}get playing(){return this.animation&&this.animation.began&&!this.animation.completed}buildAnimation(t=!1){if(!this.data.animate)return;let i=this.page.scene.find(this.data.targetCamera);if(!i||!i.visible)throw new ReferenceError("Target camera not founded or not visible");let r={t:0};this.posStart.copy(this.page.activeCamera.position),this.qStart.copy(this.page.activeCamera.quaternion),this.zoomStart=this.page.activeCamera.zoom,this.animation=$z(ge(Z({targets:r,t:1},nL(this.data)),{update:()=>{r.t===0&&(this.useToggle&&!this.toggleIsForward?(this.posEnd.copy(this.fromCamera.position),this.qEnd.copy(this.fromCamera.quaternion),this.zoomEnd=this.fromCamera.zoom,this.switchCamera(this.fromCamera.uuid)):(this.posEnd.copy(i.position),this.qEnd.copy(i.quaternion),this.zoomEnd=i.zoom,this.fromCamera=this.page.activeCamera,this.switchCamera(i.uuid)),this.page.activeCamera.dispatchEvent(noe));let s=this.page.activeCamera;s.position.lerpVectors(this.posStart,this.posEnd,r.t),s.quaternion.slerpQuaternions(this.qStart,this.qEnd,r.t),s.zoom=this.zoomStart+(this.zoomEnd-this.zoomStart)*r.t,s.wasMovedBySwitchCameraAction=!0,s.updateMatrix(),s.updateMatrixWorld(),s.updateProjectionMatrix(),s.dispatchEvent(oL),r.t===1&&s.dispatchEvent(sL)}}))}switchCamera(t){let i=this.page.scene.find(t);if(!i||!i.visible)throw new ReferenceError("Target camera not founded or not visible");this.page.switchActiveCamera(i),this.page.activeCamera.dispatchEvent({type:"cameraChange",camera:i})}play(){if(xr(this.shared,this.condition)===!1)return!1;if(!this.playing&&this.page.activeCamera.uuid!==this.data.targetCamera)try{clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var t;delete this.timeoutId,this.data.animate?(this.buildAnimation(),(t=this.animation)==null||t.play()):this.switchCamera(this.data.targetCamera)},this.data.delay*1e3)}catch(t){}}pause(){var t;(t=this.animation)==null||t.pause(),clearTimeout(this.timeoutId),delete this.timeoutId}toggle(t){var i,r;if(xr(this.shared,this.condition)===!1)return!1;this.useToggle=!0,clearTimeout(this.timeoutId),this.toggleIsForward=t!=null?t:!this.toggleIsForward;try{this.playing?((i=this.animation)==null||i.pause(),this.buildAnimation(!0),(r=this.animation)==null||r.play()):this.timeoutId=window.setTimeout(()=>{var s,l;delete this.timeoutId,this.data.animate?((s=this.animation)==null||s.pause(),this.buildAnimation(),(l=this.animation)==null||l.play()):(this.toggleIsForward?(this.fromCamera=this.page.activeCamera,this.switchCamera(this.data.targetCamera)):this.switchCamera(this.fromCamera.uuid),this.page.activeCamera.dispatchEvent(sL),this.page.activeCamera.dispatchEvent(oL))},this.data.delay*1e3)}catch(s){}}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){this.pause(),this.toggleIsForward=!1}},dL=class extends Cr{constructor(t,i,r,s,l){var f,m,p,g,v;super(),this.page=i,this.animationControls=r,this.shared=s,this.condition=l,this.startOnceDelay=0,this.toggleIsForward=!1;let d=t.object,c=i.scene.find(t.object);c&&Array.isArray(c.identity)&&(d=c.identity[0]),this.data=ge(Z({},t),{object:d});let u=this.animationControls.clipIdToAction[t.clipId+"/"+d];this.duration=(m=(f=u==null?void 0:u.getClip())==null?void 0:f.duration)!=null?m:1;let h=(v=(g=(p=u==null?void 0:u.getClip())==null?void 0:p.tracks[0])==null?void 0:g.times.length)!=null?v:1/0;this.leftFrameTime=this.data.crop[0]/h*this.duration,this.rightFrameTime=this.data.crop[1]/h*this.duration,this.startOnceDelay=t.delay}get playing(){var t,i;return(i=(t=this.threeAnimAction)==null?void 0:t.isRunning())!=null?i:!1}play(t=!1){if(xr(this.shared,this.condition)===!1)return!1;window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),!this.threeAnimAction)return;this.threeAnimAction.reset(),this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime;let i=this.data.object;Object.entries(this.animationControls.clipIdToAction).forEach(([s,l])=>{let d=s.split("/")[1];this.threeAnimAction!==l&&d===i&&l.isRunning()&&(t?l.fadeOut(.2):l.stop())}),t&&((r=this.threeAnimAction)==null||r.fadeIn(.2))},this.startOnceDelay)}pause(){this.threeAnimAction&&(this.threeAnimAction.paused=!0),window.clearTimeout(this.timeoutId),delete this.timeoutId}stop(){var t;(t=this.threeAnimAction)==null||t.fadeOut(.2)}seek(t){this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction&&(this.threeAnimAction.paused=!0,this.threeAnimAction.time=fe.clamp(this.threeAnimAction.time+1/60*t,this.leftFrameTime,this.rightFrameTime-16e-5),this.animationControls.needsUpdate=!0,this.animationControls.requestRender())}toggle(t,i=!1){if(xr(this.shared,this.condition)===!1)return!1;this.toggleIsForward=t!=null?t:!this.toggleIsForward,this.threeAnimAction&&(this.threeAnimAction._loopCount=0),this.playing?this.threeAnimAction&&(this.threeAnimAction.timeScale=this.toggleIsForward?1:-1,this.toggleIsForward?(this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime)):this.timeoutId=window.setTimeout(()=>{var r;if(this.threeAnimAction=this.animationControls.play(this.data),this.threeAnimAction){this.toggleIsForward?(this.threeAnimAction.time=this.leftFrameTime,this.threeAnimAction._clip.start=this.leftFrameTime,this.threeAnimAction._clip.duration=this.rightFrameTime):(this.threeAnimAction.time=this.rightFrameTime,this.threeAnimAction._clip.start=this.rightFrameTime,this.threeAnimAction._clip.duration=this.leftFrameTime),this.threeAnimAction.paused=!1,this.threeAnimAction.timeScale=this.toggleIsForward?1:-1;let s=this.data.clipId.split("/")[1];Object.entries(this.animationControls.clipIdToAction).forEach(([l,d])=>{let c=l.split("/")[1];this.threeAnimAction!==d&&c===s&&d.isRunning()&&(i?d.fadeOut(.2):d.stop())}),i&&((r=this.threeAnimAction)==null||r.fadeIn(.2))}},this.startOnceDelay)}playFromCurrent(){this.toggle(!0)}reverseFromCurrent(){this.toggle(!1)}dispose(){var i;let t=(i=this.animationControls.clipIdToAction[this.data.clipId+"/"+this.data.object])==null?void 0:i.getClip();t&&(t.duration=this.duration),this.pause()}},cL=class{constructor(t,i,r,s,l){this.data=t,this.page=i,this.eventManager=r,this.shared=s,this.condition=l,this.timeOutId=-1,this.scene=i.scene}dispatch(){if(xr(this.shared,this.condition)===!1)return!1;this.data.target!==this.page.uuid&&(window.clearTimeout(this.timeOutId),this.timeOutId=window.setTimeout(()=>{this.play()},this.data.delay*1e3))}dispose(){window.clearTimeout(this.timeOutId)}play(){if(this.scene.children.every(i=>i.uuid!==this.data.target))return;this.data.transition==="fade"&&this.data.duration>0&&this.eventManager.eventContext.renderer.renderFromSceneForSceneTransitionPass(this.scene,this.scene.activeCamera,this.data.duration*1e3),this.eventManager.deactivate(),this.eventManager.controlsManager.deactivate();let t=this.scene.activeCamera;this.scene.updatePage(this.data.target),this.scene.activePage.switchToPlayCamera(),this.scene.activeCamera.copyViewPlaneSize(t),U4(this.scene.activePage,this.shared),this.eventManager.activate(),this.eventManager.controlsManager.activate(this.eventManager)}},uL=class{constructor(t,i,r,s){this.data=t,this.page=i,this.shared=r,this.condition=s,this.evaluatedCondition=!1}checkConditions(){this.evaluatedCondition=xr(this.shared,this.condition)}dispatch(){if(this.evaluatedCondition===!1)return!1;let t=this.shared.getVariable(this.data.variableId),i=KR(this.data.expression,this.shared,zs.typeOfVariable(t));i!==void 0&&this.shared.updateVariable(this.data.variableId,typeof i=="string"?{textValue:i}:i)}dispose(){}},hL=class{constructor(t,i,r,s){this.data=t,this.page=i,this.shared=r,this.condition=s,this.timeoutId=null}dispatchInner(){if(xr(this.shared,this.condition)===!1)return!1;let t=this.shared.getDynamicVariablePlayState(this.data.variableId);if(this.data.mode==="PlayPause")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,t==="Playing"?"Paused":"Playing");else if(this.data.mode==="Play"&&t!=="Playing")this.shared.getDynamicVariableToggleIsForward(this.data.variableId)===void 0&&this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!0),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing");else if(this.data.mode==="Stop"&&t!=="Stopped")this.shared.setDynamicVariablePlayState(this.data.variableId,"Stopped");else if(this.data.mode==="Pause"&&t!=="Paused")this.shared.setDynamicVariablePlayState(this.data.variableId,"Paused");else if(this.data.mode==="Restart")this.shared.setDynamicVariablePlayState(this.data.variableId,"Restarted");else if(this.data.mode==="Toggle"){let i=this.shared.getDynamicVariableToggleIsForward(this.data.variableId);t==="Playing"?this.shared.setDynamicVariableToggleIsForward(this.data.variableId,i===void 0?!1:!i):(this.shared.setDynamicVariableToggleIsForward(this.data.variableId,!i),this.shared.setDynamicVariablePlayState(this.data.variableId,"Playing"))}}dispatch(){let t=this.data.delay,i=this.shared.getDynamicVariablePlayState(this.data.variableId);this.data.mode==="PlayPause"&&i==="Playing"&&(t=this.data.pauseDelay),t!==0?(this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.timeoutId=null,this.dispatchInner()},t)):this.dispatchInner()}dispose(){this.timeoutId&&window.clearTimeout(this.timeoutId)}};function xr(t,i){if(i===void 0)return!0;if(i.expression.length===0)return!1;let r=KR(i.expression,t,"boolean");return i.negate?!r:!!r}function Ya(t,i,r,s,l,d){let c={Audio:[],Video:[],Link:[],Destroy:[],Create:[],Reset:[],Transition:[],SwitchCamera:[],Animation:[],SceneTransition:[],SetVariable:[],DynamicVariablePlay:[]},u=h=>({id:f,data:m})=>{try{m.type==="Audio"?Rs[t.type].includes("Audio")&&c.Audio.push(new _z(f,m,d,s,h)):m.type==="Video"?Rs[t.type].includes("Video")&&c.Video.push(new pL(f,m,d,s,h)):m.type==="Link"?Rs[t.type].includes("Link")&&c.Link.push(new Xae(m,l.controlsManager,s,h)):m.type==="Create"?Rs[t.type].includes("Create")&&c.Create.push(new yL(m,r,l.controlsManager,s,h)):m.type==="Destroy"?Rs[t.type].includes("Destroy")&&c.Destroy.push(new Sz(m,r,l.controlsManager,s,h)):m.type==="Reset"?Rs[t.type].includes("Reset")&&c.Reset.push(new Az(m,r,s,l,h)):m.type==="Transition"?Rs[t.type].includes("Transition")&&c.Transition.push(new aL(m,r,s,h)):m.type==="SwitchCamera"?Rs[t.type].includes("SwitchCamera")&&c.SwitchCamera.push(new lL(m,r,s,h)):m.type==="SceneTransition"?Rs[t.type].includes("SceneTransition")&&c.SceneTransition.push(new cL(m,r,l,s,h)):m.type==="Animation"?Rs[t.type].includes("Animation")&&c.Animation.push(new dL(m,r,l.animationControls,s,h)):m.type==="SetVariable"?Rs[t.type].includes("SetVariable")&&c.SetVariable.push(new uL(m,r,s,h)):m.type==="DynamicVariablePlay"?Rs[t.type].includes("DynamicVariablePlay")&&c.DynamicVariablePlay.push(new hL(m,r,s,h)):m.type==="Conditional"&&Rs[t.type].includes("Conditional")&&(m.ifActions.forEach(u({expression:m.condition,negate:!1})),m.elseActions.forEach(u({expression:m.condition,negate:!0})))}catch(p){}};return i.forEach(u()),c}function qr(t){Object.values(t).forEach(i=>{i.forEach(r=>{(r instanceof _z||r instanceof pL||r instanceof dL||r instanceof aL||r instanceof yL||r instanceof Sz||r instanceof lL||r instanceof cL||r instanceof Az||r instanceof uL||r instanceof hL)&&r.dispose()})})}function roe(t,i){let r;if("material"in t){let s=t.material;Array.isArray(s)?r=t.material[0].layers.find(l=>l.uuid===i):r=t.material.layers.find(l=>l.uuid===i)}if(r)return r.color.texture.image.img instanceof HTMLVideoElement?r.color.texture.image.img:void 0}var fL=new Map,I0=new Map,om=class{constructor(t,i,r){this.data=i,this.delay=0,this.status="stopped";let{layerId:s,loop:l,volume:d,delay:c}=i;if(this.object=r,s===void 0)throw new Error("Missing property");let u=roe(r,s);u&&(this.videoElement=u,this.videoElement.loop=l===1/0,OC&&(this.videoElement.autoplay=!0),d!==void 0&&(this.videoElement.volume=d)),c!==void 0&&(this.delay=c),I0.has(r.uuid)?I0.get(r.uuid).push(this):I0.set(r.uuid,[this]),fL.set(t,this),this.pause()}mute(){!this.videoElement||(this.videoElement.muted=!0)}unMute(){!this.videoElement||(this.videoElement.muted=!1)}play(t){if(!this.videoElement)return;let i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);t?(this.mute(),this.delay+=150):i?(this.mute(),window.setTimeout(()=>{this.unMute()},100)):this.unMute(),this.delayTimerId=window.setTimeout(()=>{if(!this.videoElement)return;let r=this.videoElement.play();r!==void 0&&r.then(s=>{}).catch(s=>{this.play()}),this.clearDelay()},this.delay),this.status="playing"}clearDelay(){this.delayTimerId&&(clearTimeout(this.delayTimerId),delete this.delayTimerId)}pause(){!this.videoElement||(this.videoElement.pause(),this.status="paused")}stop(){!this.videoElement||(this.videoElement.pause(),this.videoElement.currentTime=0,this.status="stopped",this.clearDelay())}playByToggle(){this.data.toggle==="stop"?this.status==="playing"?this.stop():(this.stop(),this.play()):this.data.toggle==="pause"?this.status==="playing"?this.pause():this.play():(this.stop(),this.play())}dispose(){!this.videoElement||(this.stop(),this.videoElement.muted=!0)}},H4=class{constructor(t){this.data=t}dispatch(){this.data.playVideo?this.pauseVideo(this.data.playVideo):this.data.object?this.pauseAllVideosFromObject(this.data.object):this.pauseAllVideos()}pauseVideo(t){let i=fL.get(t);!i||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{i[this.data.interaction](),this.disposeDelay()},this.data.delay)):i[this.data.interaction]())}pauseAllVideosFromObject(t){let i=I0.get(t);!(i!=null&&i.length)||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{i.forEach(r=>r[this.data.interaction]()),this.disposeDelay()},this.data.delay)):i.forEach(r=>r[this.data.interaction]()))}pauseAllVideos(){let t=[...I0.values()];!t.length||(this.data.delay>0?(this.disposeDelay(),this.timeoutId=window.setTimeout(()=>{t.forEach(i=>{i.forEach(r=>{r[this.data.interaction]()})}),this.disposeDelay()},this.data.delay)):t.forEach(i=>{i.forEach(r=>{r[this.data.interaction]()})}))}disposeDelay(){clearTimeout(this.timeoutId),delete this.timeoutId}dispose(){clearTimeout(this.timeoutId),delete this.timeoutId}},pL=class{constructor(t,i,r,s,l){if(this.data=i,this.shared=s,this.condition=l,i.interaction==="play")this.interaction=new om(t,i,r);else if(i.interaction==="pause"||i.interaction==="stop")this.interaction=new H4(i);else throw new Error("Missing property")}dispatchBasic(){if(xr(this.shared,this.condition)===!1)return!1;this.interaction instanceof om?this.interaction.playByToggle():this.interaction.dispatch()}dispatchConditional(){if(xr(this.shared,this.condition)===!1)return!1;this.interaction instanceof om?this.interaction.play():this.interaction.dispatch()}dispose(){this.interaction.dispose()}},mL=(()=>{let t,i,r,s;function l(u){!t&&!gL()&&(i==null?void 0:i.sharedGameControlGlobals.createdObjects.length)>0&&(t=requestAnimationFrame(d)),u&&(i=u,s=u.requestRender)}function d(u){let h=r?u-r:0,f=i.sharedGameControlGlobals.createdObjects,m=i.sharedGameControlGlobals.nCreatedPerAction,p=f.length,g=0;for(;g<p;){let v=f[g];v.userData.createdTime===void 0&&(v.userData.createdTime=u),v.userData.lifetime===void 0&&v.userData.quantity===void 0||v.userData.lifetime&&u-v.userData.createdTime<v.userData.lifetime||v.userData.quantity&&m[v.userData.actionId]<=v.userData.quantity?(v.userData.velocity&&(v.position.addScaledVector(v.userData.velocity,h/1e3),v.updateMatrix(),s()),g++):(m[v.userData.actionId]>v.userData.quantity&&m[v.userData.actionId]--,f.splice(g,1),v.removeFromParent(),i.sharedGameControlGlobals.rapierWorld&&v.rigidBody?(i.sharedGameControlGlobals.colliderToEntity.delete(v.rigidBody.collider(0).handle),i.sharedGameControlGlobals.rapierWorld.removeRigidBody(v.rigidBody)):(v.bvhGeometry=void 0,i.sharedGameControlGlobals.entitiesWithTransformAnim=i.sharedGameControlGlobals.entitiesWithTransformAnim.filter(w=>w.bvhGeometry!==void 0)),p--,s())}t=g>0?requestAnimationFrame(d):void 0,r=g>0?u:void 0}function c(){gL()?t&&(cancelAnimationFrame(t),t=void 0,r=void 0):l()}return typeof document<"u"&&document.addEventListener("visibilitychange",c),l})();function gL(){return!!document&&document.hidden}var vL=new Ut,aoe=new N,soe=new N,yL=class{constructor(t,i,r,s,l){this.data=t,this.page=i,this.controlsManager=r,this.shared=s,this.condition=l,this.intervalId=null,this.timeoutIdQueue=[],this.uniqueId=fe.generateUUID(),this.dispatch=()=>{if(xr(this.shared,this.condition)===!1)return!1;this.data.delay?this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3)):this.dispatchInner()},this.dispatchFromStart=()=>{if(xr(this.shared,this.condition)===!1)return!1;this.timeoutIdQueue.push(window.setTimeout(this.dispatchInner,this.data.delay*1e3))},this.dispatchThrottled=YX(this.dispatch,1e3/this.data.creationSpeed),this.dispatchStart=()=>{this.intervalId===null&&(this.intervalId=window.setInterval(this.dispatch,1e3/this.data.creationSpeed))},this.dispatchStop=()=>{this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null)},this.dispatchInner=()=>{this.timeoutIdQueue.shift();let c=new ma(this.object);if(c.playModeVisible=!0,c.expand(),this.data.coordinateSystem!=="world"){let h=this.data.coordinateSystem,f=this.page.scene.find(h);f&&(f.updateMatrixWorldSVD(),c.hiddenMatrix.copy(f.matrixWorldRigid))}c.position.fromArray(this.data.position),c.rotation.fromArray(this.data.rotation),c.updateMatrix(),this.page.add(c);let u=this.controlsManager.sharedGameControlGlobals;u.createdObjects.push(c),u.nCreatedPerAction[this.uniqueId]===void 0?u.nCreatedPerAction[this.uniqueId]=1:u.nCreatedPerAction[this.uniqueId]++,c.updateWorldMatrix(!0,!0),c.traverseObject(this.traverseObjectCB),mL(),this.controlsManager.requestRender()},this.traverseObjectCB=c=>{var m,p,g,v;c.hasNonUniformScale&&c.updateMatrixWorldSVD();let u;if(this.controlsManager.sharedGameControlGlobals.rapierWorld){if(c instanceof Vo)if(c.objectForSample){if(c.objectForSample.dataPatched.physics.fusedBody)return;u=c.object}else return c.object.dataPatched.physics.fusedBody===!0&&c.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(c instanceof ma)u=c.object;else if(u=c,(m=u.dataPatched.cloner)==null?void 0:m.hideBase)return!0}else{if(c instanceof Vo)return;c instanceof ma?u=c.object:u=c}this.data.destroy==="Time"?c.userData.lifetime=this.data.lifetime*1e3:this.data.destroy==="Quantity"&&(c.userData.quantity=this.data.destroyAfterQuantity,c.userData.actionId=this.uniqueId);let h=new N().fromArray(this.data.velocity),f=u.dataPatched;if(!(f.physics.enabled==="visibility"?!f.visible:!f.physics.enabled)&&(this.controlsManager.sharedGameControlGlobals.rapierWorld?(this.controlsManager.addRigidBody(c,u,{fromCreate:!0,dynamic:this.data.dynamic}),this.data.destroy==="Collision"&&((p=c.rigidBody)==null||p.collider(0).setActiveEvents(1),c.userData.hasCollisionDestroy=!0),c.matrixWorld.decompose(aoe,vL,soe),h.applyQuaternion(vL),this.data.velocity.some(w=>w!==0)&&this.data.dynamic&&((g=c.rigidBody)==null||g.setLinvel(h.divideScalar(this.controlsManager.pixelsPerMeter),!0))):("geometry"in c.object&&this.controlsManager.addBoundsTree(c),this.data.velocity.some(w=>w!==0)&&this.data.dynamic&&(c.userData.velocity=h)),((v=u.dataPatched.physics)==null?void 0:v.fusedBody)===!0))return!0};let d=this.page.scene.find(this.data.object);if(!d)throw new Error("Missing Property");if(this.object=d,this.data.coordinateSystem!=="world"&&!this.page.scene.find(this.data.coordinateSystem))throw new Error("Missing Property");mL(r)}dispose(){this.intervalId!==null&&(window.clearInterval(this.intervalId),this.intervalId=null),this.timeoutIdQueue.forEach(t=>window.clearTimeout(t)),this.dispatchThrottled.cancel(),this.page.remove(...this.controlsManager.sharedGameControlGlobals.createdObjects),this.controlsManager.sharedGameControlGlobals.createdObjects=[]}},bL=200,G4=.02,W4=.3,ooe=65,Mfe=new N,wL=new N,xL=new N,loe=new N,Xa=new N,vs=new N,nu=new N,q4=new Ze,_L=new Ze,doe=new Ze,Tfe=new Ze,$o=new Ut,Ud=new Ut,Wl=new Vr(0,0,0,"YXZ"),coe=new N(1,0,0),Zo=new N(0,1,0),uoe=new N(0,0,1),kL=new N(1,1,1),Dfe=new Ur,hoe=1,foe=.025,poe=16e-6,SL=12,moe=20,$r=new Qs,uo=new nn,goe={type:"requestRender"},voe={type:"updateMatrix"},AL=Math.PI/6,$4=class extends Cr{constructor(t,i,r,s,l,d,c,u,h){var w,x,_,k,A,C,M,D,P,T,O,z,L,B,j,V,H,Y,se,re;super(),this.object=t,this.domElement=i,this.data=r,this.gloabalPhysics=s,this.controlsManager=l,this.cameraFollow=d,this.camera=c,this.page=u,this.sharedAssets=h,this.enableDamping=!0,this.hiddenMatrix0=new Ze,this.target0=new N,this.zoom0=1,this.rotForce=1,this.moveForce=1,this.pixelsPerMeter=bL,this.euler0=new Vr(0,0,0,"YXZ"),this.position0Cam=new N,this.quat0Cam=new Ut,this.scale0Cam=new N,this.hiddenMatrix0Cam=new Ze,this.threshEndTranslate=.01,this.threshEndRotate=1e-8,this.threshEndRotVel=.005,this.collider={type:"capsule",radius:40,segment:new Qs(new N(0,-40,0),new N(0,40,0)),matrix:new Ze,position:new N,rotation:new Ut},this.euler=new Vr(0,0,0,"YXZ"),this.eulerDelta=new N,this.lastPosition=new N,this.lastCameraQuaternion=new Ut,this.lastCameraPosition=new N,this.PI_2=Math.PI/2,this.prevMouse=new q,this.velocityTarget=new N,this.velocity=new N,this.directionXZ=new N,this.rotVelocityStick=new N,this.rotVelocityTarget=new N,this.rotVelocity=new N,this.rotDirection=new N,this.nonColliderRotOffset=new Ze,this.nonColliderPosOffset=new Ze,this.firstPointerId=-1,this.rot=new N,this.path=[],this.movementState={moveNegZ:0,movePosZ:0,moveNegX:0,movePosX:0,moveNegY:0,movePosY:0,rotPosX:0,rotNegX:0,rotPosY:0,rotNegY:0,jump:0,run:0},this.vrEulerYOffset=0,this.onObject=!1,this.actionState={},this.keyAssignments=[["moveNegZ","W"],["moveNegX","A"],["movePosZ","S"],["movePosX","D"],["rotPosX","ArrowUp"],["rotPosY","ArrowLeft"],["rotNegX","ArrowDown"],["rotNegY","ArrowRight"],["jump"," "]],this.collisionEnabled=!0,this.offsetMatrix=new Ze,this.objectToTarget=new N,this.objectToTarget0=new N,this.objectToCamXZ=new N,this.objectToCamXZ0=new N,this.targetToCamera=new N,this.targetToCamera0=new N,this.cameraPolarAxis0=new N,this.targetPos=new N,this.targetQuat=new Ut,this.lerpFactorPos=new N().setScalar(.3),this.lerpFactorPosStart=.3,this.lerpFactorPosEnd=.3,this.lerpFactorRotStart=.3,this.lerpFactorRotEnd=.3,this.lerpFactorPosCamera=.3,this.lerpFactorRotCamera=.3,this.objXZQuat=new Ut,this.objXZQuatInv=new Ut,this.objXZRotMat=new Ze,this.isFirstPerson=!1,this.didHit=!1,this.groundVelocity=new N,this.pushedVelocity=new N,this.groundYRotation=0,this.objectRealQuat=new Ut,this.colliderWorldQuat=new Ut,this.groundNormal=new N,this.groundTilt=new Ut,this.groundTiltInv=new Ut,this.lastHitObj=null,this.isFirstFrame=!0,this.rotationAccumWhenOrientWithCamera=0,this.navMeshPathDest=null,this.position=new N,this.quaternion=new Ut,this.scale=new N,this.initialAction=!0,this.onPointerDown=$=>{$.target!==this.domElement||this.firstPointerId!==-1||(this.firstPointerId=$.pointerId,this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.rotBy!=="keys"&&!Os&&(!_O||kO>=15.5)&&this.domElement.requestPointerLock(),this.prevMouse.set($.clientX,$.clientY))},this.onPointerUp=$=>{this.firstPointerId=-1,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),$.pointerType==="mouse"&&this.domElement.ownerDocument.exitPointerLock()},this.onPointerMove=$=>{if($.pointerId!==this.firstPointerId)return;let te=$.clientX-this.prevMouse.x,he=$.clientY-this.prevMouse.y;this.prevMouse.set($.clientX,$.clientY),$.pointerType==="mouse"&&this.rotBy!=="keys"&&(_O&&kO<15.5&&!Os?(this.eulerDelta.y=-te*this.mouseOrbitSensitivity,this.eulerDelta.x=-he*this.mouseOrbitSensitivity):(this.eulerDelta.y=-$.movementX*this.mouseOrbitSensitivity,this.eulerDelta.x=-$.movementY*this.mouseOrbitSensitivity)),$.pointerType!=="mouse"&&this.rotByTouch==="drag"&&(this.eulerDelta.y=-te*this.mouseOrbitSensitivity*5,this.eulerDelta.x=-he*this.mouseOrbitSensitivity*5),this.controlsManager.requestRender()},this.onPointerlockChange=$=>{this.domElement.ownerDocument.pointerLockElement===this.domElement?$4.isLocked=!0:$4.isLocked=!1},this.onPointerlockError=()=>{console.error("SPE.GameControls: Unable to use Pointer Lock API")},this.handleVisibilityChange=()=>{if(document!=null&&document.hidden)for(let $ in this.movementState)this.movementState[$]=0},this.onKeyDown=$=>{!($.target instanceof HTMLInputElement)&&($.code==="ArrowLeft"||$.code==="ArrowUp"||$.code==="ArrowRight"||$.code==="ArrowDown"||$.code==="Space")&&$.preventDefault();for(let te of this.keyAssignments)if($.key.toUpperCase()===te[1]||$.key===te[1]){this.movementState[te[0]]=1;break}this.controlsManager.requestRender()},this.onKeyUp=$=>{for(let te of this.keyAssignments)if($.key.toUpperCase()===te[1]||$.key===te[1]||$.code.slice(3,$.code.length).toUpperCase()===te[1]){this.movementState[te[0]]=0;break}},this.copyVRGamePadValues=($,te)=>{for(let he=2;he<4;he++){let oe=$.axes[he];te===0?he===2?this.movementState.movePosX=oe:this.movementState.movePosZ=oe:($.buttons[3].pressed?this.movementState.jump=1:this.movementState.jump=0,he===2?(Math.abs(this.movementState.rotPosY)<.3&&Math.abs(oe)>=.3&&(this.vrEulerYOffset+=oe<0?1:-1),this.movementState.rotPosY=oe):this.moveMode==="fly"&&(this.movementState.moveNegY=oe))}},this.sharedGameControlGlobals=l.sharedGameControlGlobals,t===c&&(this.isFirstPerson=!0),this.hiddenMatrix0.copy(this.object.hiddenMatrix),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.euler0.setFromQuaternion(this.quaternion,"YXZ");let f=this.euler0.clone(),m=f.y;if(this.objectRealQuat.copy(this.quaternion),f.y=0,this.quaternion.setFromEuler(f),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),f.set(0,m,0),this.quaternion.setFromEuler(f),this.rot.setFromEuler(f),this.object.matrixAutoUpdate=!1,(this.isFirstPerson||this.cameraFollow===!0)&&(this.target0.copy(this.camera.getTarget()),this.zoom0=this.camera.zoom),this.cameraFollow===!0){this.position0Cam.copy(this.camera.position),this.quat0Cam.copy(this.camera.quaternion),this.scale0Cam.copy(this.camera.scale),this.hiddenMatrix0Cam.copy(this.camera.hiddenMatrix),this.camera.parent?(this.camera.hiddenMatrix.copy((w=this.camera)==null?void 0:w.parent.matrixWorld),this.camera.matrix.copy(this.camera.matrixWorld)):this.camera.hiddenMatrix.identity(),this.camera.matrix.copy(this.camera.matrixWorld),this.camera.matrix.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.matrixAutoUpdate=!1,this.offsetMatrix.copy(this.object.matrix).invert().multiply(this.camera.matrix);let $=new N(0,0,-1).applyQuaternion(this.camera.quaternion),te=new N().subVectors(this.position,this.camera.position);this.objectToCamXZ.copy(te),this.objectToCamXZ.y=0,this.objectToCamXZ0.copy(this.objectToCamXZ);let he,oe;Math.abs($.y)<1e-6?(te.y=0,$.y=0,oe=te.projectOnVector($)):te.y/$.y>0?oe=$.multiplyScalar(te.y/$.y):oe=$.multiplyScalar(te.length()),this.targetToCamera0.copy(oe).negate(),he=this.camera.position.clone().add(oe),this.objectToTarget0.subVectors(he,this.position);let ee=new Vr().setFromQuaternion(this.camera.quaternion,"YXZ");this.cameraPolarOffset=-ee.x,ee.x=0,ee.z=0,ee.y-=Math.PI/2,this.cameraPolarAxis0.set(0,0,-1).applyEuler(ee)}if(this.object instanceof ga&&(this.object.matrixAutoUpdate=!1),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.rotByTouch=(x=r.rotByTouch)!=null?x:"joystick",this.rotBy=(_=r.rotBy)!=null?_:"keys",this.rotationMode=(k=r.rotationMode)!=null?k:"normal",this.moveMode=(A=r.moveMode)!=null?A:"walk",this.collisionEnabled=r.collisionEnabled,this.speedTranslate=((C=r.speedTranslate)!=null?C:250)*hoe,this.speedOrbit=((M=r.speedRotate)!=null?M:100)*foe,this.mouseOrbitSensitivity=((D=r.speedRotate)!=null?D:100)*poe,this.keyAssignments=r.keyAssignments.map($=>{let te=[$[0],$[1]];return te[1]==="\u25B2"?te[1]="ArrowUp":te[1]==="\u25C0"?te[1]="ArrowLeft":te[1]==="\u25BC"?te[1]="ArrowDown":te[1]==="\u25B6"?te[1]="ArrowRight":te[1]==="\u21E7"?te[1]="Shift":te[1]==="\u21B5"?te[1]="Enter":te[1]==="Space"?te[1]=" ":te[1]==="\u2318"?te[1]="Meta":te[1]==="Ctrl"?te[1]="Control":te[1]==="Esc"&&(te[1]="Escape"),te}),r.rotBy==="mouse"){let $;$=this.keyAssignments.findIndex(te=>te[0]==="rotNegX"),$!==-1&&(this.keyAssignments[$][1]=""),$=this.keyAssignments.findIndex(te=>te[0]==="rotPosX"),$!==-1&&(this.keyAssignments[$][1]=""),$=this.keyAssignments.findIndex(te=>te[0]==="rotPosY"),$!==-1&&(this.keyAssignments[$][1]=""),$=this.keyAssignments.findIndex(te=>te[0]==="rotNegY"),$!==-1&&(this.keyAssignments[$][1]="")}this.lerpFactorPosStart=1-wn(.02,1/(((P=r.delayPos[0])!=null?P:.3)*60)),this.lerpFactorPosEnd=1-wn(.02,1/(((T=r.delayPos[1])!=null?T:.3)*60)),this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.lerpFactorRotStart=1-wn(.02,1/(((O=r.delayRot[0])!=null?O:.3)*60)),this.lerpFactorRotEnd=1-wn(.02,1/(((z=r.delayRot[1])!=null?z:.3)*60)),this.lerpFactorPosCamera=1-wn(.02,1/(((L=r.delayPosCamera)!=null?L:.3)*60)),this.lerpFactorRotCamera=1-wn(.02,1/(((B=r.delayRotCamera)!=null?B:.3)*60)),this.gravity=((j=this.gloabalPhysics.gravity)!=null?j:wp.defaultData.gravity)*SL,this.usePhysics=(V=this.gloabalPhysics.usePhysics)!=null?V:wp.defaultData.usePhysics,this.jumpPower=r.jumpPower*moe,this.resetYPosition=this.position.y+Math.abs(r.resetYPosition)*(this.gravity>0?1:-1),this.alignToGround=(H=r.alignToGround)!=null?H:!1,this.orientMode=r.autoOrientMove?r.orientMode:"none",this.orientWith=(Y=r.orientWith)!=null?Y:Jx.defaultDataThirdPerson.orientWith,this.slopeThresh=ooe*Math.PI/180,r.collider.type==="capsule"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=r.collider.height/2-r.collider.radius,this.collider.segment.end.y=-this.collider.segment.start.y,this.offset=r.collider.height*G4/this.pixelsPerMeter,this.stepThresh=r.collider.height*W4/this.pixelsPerMeter,this.colliderHeight=r.collider.height):r.collider.type==="sphere"?(this.collider.radius=r.collider.radius,this.collider.segment.start.y=0,this.collider.segment.end.y=0,this.offset=2*r.collider.radius*G4/this.pixelsPerMeter,this.stepThresh=2*r.collider.radius*W4/this.pixelsPerMeter,this.colliderHeight=r.collider.radius*2):(this.offset=r.collider.height*G4/this.pixelsPerMeter,this.stepThresh=r.collider.height*W4/this.pixelsPerMeter,this.colliderHeight=r.collider.height),this.collider.type=r.collider.type;let p=new N().fromArray(r.collider.position),g=new Ut().setFromEuler(new Vr().fromArray([...r.collider.rotation,"XYZ"]));this.collider.position.copy(p).multiply(this.scale),this.collider.rotation.copy(g),this.collider.matrix.compose(p,g,kL),r.cameraXAxis!==void 0&&(this.cameraXAxis=r.cameraXAxis,this.cameraYAxis=r.cameraYAxis,this.minPolarAngle=r.cameraRotXLimits[0],this.maxPolarAngle=r.cameraRotXLimits[1],this.minAzimuthAngleRel=r.cameraRotYLimits[0],this.maxAzimuthAngleRel=r.cameraRotYLimits[1]),this.forwardDir=(se=r.forwardDirection)!=null?se:"-z",this.runMultiplier=(re=r.runMultiplier)!=null?re:2;let v=r.navmesh.destinationHelperRadius*2;if(v>0){let $=new Kt;$.push({fi:0,data:ge(Z({},ls.defaultData("light","phong")),{alpha:0}),id:"layer1"}),$.push({fi:0,data:ge(Z({},ls.defaultData("color")),{color:r.navmesh.destinationHelperColor,alpha:r.navmesh.destinationHelperColor.a}),id:"layer2"});let te=new IM({layers:$},{scene:this.page.scene,shared:this.sharedAssets});this.navMeshPathDest=new za(vR.create({parameters:{width:v,height:v/10,hollow:.7}}),te),this.navMeshPathDest.material.userData.opacity0=r.navmesh.destinationHelperColor.a}this.activate()}reset(t=!1){if(this.object.hiddenMatrix.copy(this.hiddenMatrix0),t){this.object.updateMatrix(),this.object.updateMatrixWorld(),this.object.matrix.copy(this.object.matrixWorld),this.object.matrix.decompose(this.position,this.quaternion,this.scale),this.object.parent?this.object.hiddenMatrix.copy(this.object.parent.matrixWorld).invert():this.object.hiddenMatrix.identity();let i=new Vr().setFromQuaternion(this.quaternion,"YXZ"),r=i.y;this.objectRealQuat.copy(this.quaternion),i.y=0,this.quaternion.setFromEuler(i),this.objXZQuat.copy(this.quaternion),this.objXZQuatInv.copy(this.objXZQuat).invert(),this.objXZRotMat.makeRotationFromQuaternion(this.quaternion),i.set(0,r,0),this.quaternion.setFromEuler(i),this.rot.setFromEuler(i),this.euler.setFromQuaternion(this.quaternion,"YXZ"),this.velocityTarget.set(0,0,0),this.velocity.set(0,0,0)}else this.object instanceof ga?this.object.matrixAutoUpdate=!0:this.object.updateMatrix();this.cameraFollow===!0&&(this.camera.quaternion.copy(this.quat0Cam),this.camera.position.copy(this.position0Cam),this.camera.scale.copy(this.scale0Cam),this.camera.hiddenMatrix.copy(this.hiddenMatrix0Cam),this.camera.matrixAutoUpdate=!0),this.controlsManager.requestRender()}activate(){this.instantiateActions(),this.domElement.ownerDocument.addEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.addEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.addEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.addEventListener("visibilitychange",this.handleVisibilityChange)}deactivate(){this.disposeActions(),this.domElement.ownerDocument.removeEventListener("pointerdown",this.onPointerDown),this.domElement.ownerDocument.removeEventListener("keydown",this.onKeyDown),this.domElement.ownerDocument.removeEventListener("keyup",this.onKeyUp),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError),this.domElement.ownerDocument.removeEventListener("visibilitychange",this.handleVisibilityChange)}dispose(){var t;this.deactivate(),(t=this.navMeshPathDest)!=null&&t.parent&&this.page.remove(this.navMeshPathDest)}instantiateActions(){let t=this.data,i=this.sharedAssets;t.gameActions!==void 0&&(this.actions={},Qx.list.forEach(r=>{this.actions[r]=Ya(ge(Z({},t),{disabled:!1,type:"GameControl"}),t.gameActions[r],this.page,i,this.controlsManager.eventManager,this.object)})),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"),this.initialAction&&(this.initialAction=!1)}disposeActions(){this.initialAction=!1,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),qr(this.actions.idle),qr(this.actions.move),qr(this.actions.run),qr(this.actions.jump)}dispatchStartEvent(t){this.actions[t]!==void 0&&(this.actionState[t]||(this.actionState[t]=!0,this.actions[t].Transition.forEach(i=>{i.play()}),this.actions[t].Animation.forEach(i=>{i.play(this.initialAction===!1)}),this.actions[t].Create.forEach(i=>{i.dispatchStart()}),this.actions[t].Audio.forEach(i=>{i.dispatchGameControl("start")})))}dispatchStopEvent(t){this.actions[t]!==void 0&&(!this.actionState[t]||(this.actionState[t]=!1,this.actions[t].Transition.forEach(i=>{i.stop(),i.object.currentState!==null&&i.object.changeSelectedState(null,{scene:this.page.scene,shared:this.sharedAssets})}),this.actions[t].Create.forEach(i=>{i.dispatchStop()}),this.actions[t].Audio.forEach(i=>{i.dispatchGameControl("stop")})))}get colliderWorldPosition(){return Xa.copy(this.collider.position).applyQuaternion(this.objectRealQuat).add(this.position)}update(t,i,r){var u,h,f,m,p,g,v,w,x;if(this.gravity<0?this.position.y<this.resetYPosition:this.position.y>this.resetYPosition)return this.reset(!0),!0;this.sharedGameControlGlobals.gamePads.forEach(this.copyVRGamePadValues);let s=(this.isFirstFrame?16.6:t)/1e3;this.isFirstFrame&&(this.isFirstFrame=!1);let l=s*60,d=!1;if(this.usePhysics&&this.collisionEnabled){let _=vs.set(0,(this.velocity.y===0?this.pixelsPerMeter*Math.max(Math.abs(this.gravity)/(10*SL),1)*(this.gravity>0?1:-1):this.velocity.y)*s,0).divideScalar(this.pixelsPerMeter),k=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter),this.colliderWorldQuat,_,(u=this.object.rigidBody)==null?void 0:u.collider(0).shape,1,!1,16,void 0,void 0,this.object.rigidBody);if(k){this.onObject=!0,this.groundNormal.set(k.normal2.x,k.normal2.y,k.normal2.z).applyQuaternion(this.colliderWorldQuat).negate(),this.alignToGround&&this.groundTiltAdjustment(this.groundNormal),Math.acos(this.groundNormal.y)<this.slopeThresh&&(d=!0),((h=k.collider.parent())==null?void 0:h.bodyType())===0&&Math.acos(this.groundNormal.y)*(180/Math.PI)>45&&(this.onObject=!1);let A=k.collider.parent();this.groundYRotation=0,this.groundVelocity.set(0,0,0);for(let C of this.sharedGameControlGlobals.entitiesWithTransformAnim)if(C.rigidBody===A&&C.userData.isFollowingObj!==this.object.uuid){(C.hasNonUniformScale?C.matrixWorldRigid:C.matrixWorld).decompose(Xa,Ud,vs),this.groundVelocity.subVectors(Xa,C.prevT),this.object.getWorldPosition(vs).add(this.collider.position).sub(Xa),this.groundYRotation=Wl.setFromQuaternion(Ud).y-C.prevR.y,nu.copy(vs).applyAxisAngle(Zo,this.groundYRotation),this.groundVelocity.add(nu.sub(vs)).divideScalar(s);break}}else this.onObject=!1}if(this.moveMode==="walk"&&this.collisionEnabled&&(this.movementState.jump===1&&this.onObject&&(this.velocityTarget.y=this.jumpPower,this.movementState.jump=0,this.dispatchStopEvent("idle"),this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.dispatchStopEvent("jump"),this.dispatchStartEvent("jump"),this.onObject=!1),this.onObject?this.velocityTarget.y/=2:this.velocityTarget.y+=this.gravity*l),this.moveMode==="fly"&&(this.velocityTarget.y=(this.movementState.movePosY-this.movementState.moveNegY)*this.speedTranslate),this.directionXZ.z=this.movementState.movePosZ-this.movementState.moveNegZ,this.directionXZ.x=this.movementState.movePosX-this.movementState.moveNegX,this.forwardDir==="+z"&&this.directionXZ.multiplyScalar(-1),this.directionXZ.manhattanLength()>0&&(this.path=[]),this.navMeshPathDest){let _=this.navMeshPathDest.material;if(this.moveMode==="walk"&&this.path.length>1){this.navMeshPathDest.position.copy(this.path[this.path.length-1]),this.navMeshPathDest.parent||this.page.add(this.navMeshPathDest);let k=Xa.subVectors(this.path[1],this.position),A=vs.subVectors(this.path[1],this.path[0]);k.dot(A)<0?this.path.shift():(this.directionXZ.x=A.x,this.directionXZ.z=A.z),_.opacity=_.userData.opacity0}else _.opacity-=.05*_.userData.opacity0,this.navMeshPathDest.material.opacity<=0&&this.navMeshPathDest.parent&&this.page.remove(this.navMeshPathDest)}this.directionXZ.normalize(),this.movementState.run?this.moveForce=this.runMultiplier:this.moveForce=1,this.velocityTarget.z=this.directionXZ.z*this.speedTranslate*this.moveForce,this.velocityTarget.x=this.directionXZ.x*this.speedTranslate*this.moveForce,(this.moveMode==="walk"?this.velocityTarget.x+this.velocityTarget.z===0:this.velocityTarget.manhattanLength()===0)?this.lerpFactorPos.setScalar(this.lerpFactorPosEnd):this.lerpFactorPos.setScalar(this.lerpFactorPosStart),this.moveMode==="walk"&&(this.lerpFactorPos.y=1),this.didHit===!1&&this.pushedVelocity.manhattanLength()===0||this.usePhysics===!1?(this.velocity.x+=(this.velocityTarget.x-this.velocity.x)*(1-wn(1-this.lerpFactorPos.x,l)),this.velocity.y+=(this.velocityTarget.y-this.velocity.y)*(1-wn(1-this.lerpFactorPos.y,l)),this.velocity.z+=(this.velocityTarget.z-this.velocity.z)*(1-wn(1-this.lerpFactorPos.z,l))):this.velocity.copy(this.velocityTarget),(this.moveMode==="walk"?wn(this.velocity.x,2)+wn(this.velocity.z,2)<this.speedTranslate:this.velocity.lengthSq()<this.speedTranslate)?(this.dispatchStopEvent("move"),this.dispatchStopEvent("run"),this.onObject&&(this.dispatchStopEvent("jump"),this.dispatchStartEvent("idle"))):(this.dispatchStopEvent("idle"),this.onObject&&(this.dispatchStopEvent("jump"),this.movementState.run?(this.dispatchStopEvent("move"),this.dispatchStartEvent("run")):(this.dispatchStopEvent("run"),this.dispatchStartEvent("move"))));let c=loe.copy(this.velocity);if(this.orientMode!=="none"&&this.isFirstPerson===!1){let _=vs.copy(c);_.y=0,c.set(0,c.y,_.length()*(this.forwardDir==="+z"?1:-1))}if(this.directionXZ.manhattanLength()>0&&this.orientMode!=="none")if(this.orientWith==="camera"&&this.path.length<=1){let _=Xa;this.camera.getWorldDirection(_);let k=nu.copy(Zo).multiplyScalar(_.dot(Zo));_.sub(k);let A=vs.copy(this.directionXZ);A.x*=-1,this.rot.y=_.angleTo(A)*(_.cross(A).y>0?-1:1)+this.rotationAccumWhenOrientWithCamera}else this.rot.y=(this.path.length>1?0:this.euler.y)+Math.atan2(-this.directionXZ.z,this.directionXZ.x)+Math.PI/2*(this.forwardDir==="+z"?1:-1);if(Wl.setFromVector3(this.rot),this.moveMode==="walk"&&(Wl.x=0),c.applyEuler(Wl),d&&(Ud.setFromUnitVectors(Zo,this.groundNormal),c.applyQuaternion(Ud)),r){let _=Wl.set(0,this.vrEulerYOffset*AL,0);r.applyEuler(_),c.x+=r.x,c.z+=r.z,this.nonColliderPosOffset.elements[13]+=r.y*s}if(this.usePhysics===!0){let _=vs;this.pushedVelocity.set(0,0,0);for(let k of this.sharedGameControlGlobals.entitiesWithTransformAnim){let A=nu.setFromMatrixPosition(k.matrixWorld).sub(k.prevT).divideScalar(s).divideScalar(this.pixelsPerMeter),C=k.rigidBody.collider(0).castCollider(A,this.object.rigidBody.collider(0),Xa.copy(c).divideScalar(this.pixelsPerMeter),s,!1);A.multiplyScalar(this.pixelsPerMeter);let M=Ri.is(k)?k:k.object;if(C!==null&&this.lastHitObj!==M){let D;k instanceof ma&&(D=k);let P=this.sharedGameControlGlobals.entityToCollisionEvents[M.uuid];if(P)for(let T of P)T.data.target==="character"&&(T.dispatch(D),M.dispatchEvent(lT));this.lastHitObj=M}if(C!==null){this.pushedVelocity.copy(A),_.copy(C.normal1).applyQuaternion(k.quaternion);break}}if(this.pushedVelocity.manhattanLength()!==0){let k=_.dot(c);k<0&&c.addScaledVector(_,-k),c.add(this.pushedVelocity)}else c.add(this.groundVelocity)}if(this.rotDirection.y=Number(this.movementState.rotPosY)-Number(this.movementState.rotNegY),this.rotDirection.x=Number(this.movementState.rotPosX)-Number(this.movementState.rotNegX),this.rotDirection.normalize(),this.rotationMode==="normal"&&(this.movementState.rotPosX||this.movementState.rotNegX)||this.rotationMode==="steer"&&(this.movementState.rotPosX||this.movementState.rotNegX)&&(this.movementState.movePosZ||this.movementState.moveNegZ||this.moveMode==="walk")?this.rotVelocityStick.x=-this.rotDirection.x*this.speedOrbit*this.rotForce:this.rotVelocityStick.x=0,this.rotationMode==="normal"&&(this.movementState.rotPosY||this.movementState.rotNegY)||this.rotationMode==="steer"&&(this.movementState.rotPosY||this.movementState.rotNegY)&&(this.movementState.movePosZ||this.movementState.moveNegZ)?this.rotVelocityStick.y=-this.rotDirection.y*this.speedOrbit*this.rotForce:this.rotVelocityStick.y=0,this.rotVelocityTarget.subVectors(this.eulerDelta.divideScalar(s),this.rotVelocityStick),this.rotVelocityTarget.manhattanLength()===0?this.rotVelocity.lerp(this.rotVelocityTarget,1-wn(1-this.lerpFactorRotEnd,l)):this.rotVelocity.lerp(this.rotVelocityTarget,1-wn(1-this.lerpFactorRotStart,l)),this.euler.x+=this.rotVelocity.x*s,this.euler.y+=this.rotVelocity.y*s+this.groundYRotation,this.rotVelocityTarget.y===0&&this.directionXZ.manhattanLength()===0?this.rotationAccumWhenOrientWithCamera=0:(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.rotationAccumWhenOrientWithCamera+=this.rotVelocity.y*s),this.isFirstPerson===!1&&this.orientMode!=="none"&&this.directionXZ.manhattanLength()>0){if(this.orientMode==="radial"){this.objectToCamXZ.copy(this.objectToCamXZ0).applyAxisAngle(Zo,this.euler.y-this.euler0.y);let _=vs.copy(this.objectToCamXZ).normalize(),k=nu.copy(c).multiplyScalar(s);k.y=0;let A=k.sub(Xa.copy(_).multiplyScalar(k.dot(_))).cross(_).y;this.euler.y-=Math.atan2(A,this.objectToCamXZ.length())}}else this.rot.y+=this.rotVelocity.y*s+this.groundYRotation,this.rotVelocityTarget.y!==0&&(this.cameraFollow===!1||this.cameraYAxis==="Locked")&&(this.euler.y=this.rot.y);if(this.cameraFollow===!0&&(this.moveMode==="walk"?this.cameraXAxis==="Limit"?this.euler.x=fe.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):this.euler.x=fe.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset,this.PI_2+this.cameraPolarOffset):this.cameraXAxis==="Limit"&&(this.euler.x=fe.clamp(this.euler.x,-this.PI_2,this.PI_2))),this.moveMode==="fly"?this.rot.x=this.euler.x:this.isFirstPerson&&(i?(Wl.copy(i),Wl.y=0):(Wl.copy(this.euler),Wl.y=0),this.nonColliderRotOffset.makeRotationFromEuler(Wl)),i&&(this.moveMode==="walk"?(this.rot.y=i.y,this.rot.x=0,this.rot.z=0):this.rot.setFromEuler(i),this.rot.y+=this.vrEulerYOffset*AL),$o.setFromAxisAngle(coe,this.rot.x),Ud.setFromAxisAngle(Zo,this.rot.y),Ud.multiply($o),$o.setFromAxisAngle(uoe,this.rot.z),Ud.multiply($o),this.quaternion.copy(Ud),this.objectRealQuat.multiplyQuaternions(this.quaternion,this.objXZQuat),this.objectRealQuat.multiply(this.objXZQuat),this.colliderWorldQuat.copy(this.objectRealQuat).multiply(this.collider.rotation),this.collisionEnabled)if(this.usePhysics){let _=vs.copy(c).multiplyScalar(s/this.pixelsPerMeter),k=null;this.didHit=!1;let A=new N;for(let C=0;C<5;C++){let M=_.length(),D=nu.copy(_).normalize();if(k=this.sharedGameControlGlobals.rapierWorld.castShape(this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(A),this.colliderWorldQuat,D,(f=this.object.rigidBody)==null?void 0:f.collider(0).shape,M,!1,24,void 0,void 0,this.object.rigidBody),k!==null){this.didHit=!0;let P=this.sharedGameControlGlobals.colliderToEntity.get(k.collider.handle);if(P!==this.lastHitObj&&C===0){this.lastHitObj=P;let L=this.sharedGameControlGlobals.entityToCollisionEvents[P==null?void 0:P.uuid];if(L){for(let B of L)if(B.data.target==="character"){let j=((m=this.sharedGameControlGlobals.rapierWorld)==null?void 0:m.getCollider(k.collider.handle))._parent,V;if(P.cloner){for(let H of P.cloner.children)if(H.rigidBody===j){V=H;break}}B.dispatch(V),P.dispatchEvent(lT)}}}let T=wL.set(k.normal2.x,k.normal2.y,k.normal2.z).applyQuaternion(this.colliderWorldQuat),O=xL.copy(D).multiplyScalar(k.toi).dot(T),z=k.toi;if(z===0&&(this.position.y+=this.offset*this.pixelsPerMeter),O>this.offset&&(z=k.toi*(O-this.offset)/O,A.addScaledVector(D,z)),_.copy(D).multiplyScalar(M-z),Math.acos(-T.y)>this.slopeThresh){let L=this.colliderWorldPosition.divideScalar(this.pixelsPerMeter).add(A),B=nu.copy(k.witness2).applyQuaternion(this.colliderWorldQuat);B.y=0;let j=L.add(B);j.y+=this.stepThresh;let V=this.sharedGameControlGlobals.rapierWorld.castShape(j,this.colliderWorldQuat,_,(p=this.object.rigidBody)==null?void 0:p.collider(0).shape,1,!1,24,void 0,void 0,this.object.rigidBody);V!==null&&V.toi===0&&(T.y=0,T.normalize())}_.addScaledVector(T,-_.dot(T))}else{C===0&&this.directionXZ.manhattanLength()!==0&&(this.lastHitObj=null),A.add(_);break}}this.position.addScaledVector(A,this.pixelsPerMeter),(g=this.object.rigidBody)==null||g.setTranslation(Xa.copy(this.position).divideScalar(this.pixelsPerMeter),!0),(v=this.object.rigidBody)==null||v.setRotation($o.copy(this.quaternion).premultiply(this.groundTilt).multiply(this.objXZQuat),!0)}else{let _=this.onObject?1:5,k=c.multiplyScalar(s/_);for(let A=0;A<_;A++)this.position.add(k),this.collisionAdjustment(s/_)}else this.position.addScaledVector(c,s);if(this.moveMode==="walk"&&this.onObject&&(this.velocityTarget.y=0,this.velocity.y=0),this.quaternion.premultiply(this.groundTilt).multiply(this.objXZQuat),this.object.matrix.compose(this.position,this.quaternion,this.scale),this.object.matrixWorldNeedsUpdate=!0,this.object.matrix.multiply(this.nonColliderPosOffset).multiply(this.nonColliderRotOffset),this.quaternion.premultiply(this.groundTiltInv).multiply(this.objXZQuatInv),this.cameraFollow===!0){this.updateFollowArms();let _=this.objectToTarget.add(this.position),k=this.targetToCamera.add(_);q4.lookAt(k,_,Zo).setPosition(k),q4.decompose(this.targetPos,this.targetQuat,Xa),this.camera.quaternion.slerp(this.targetQuat,1-wn(1-this.lerpFactorRotCamera,l)),this.camera.position.lerp(this.targetPos,1-wn(1-this.lerpFactorPosCamera,l)),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.cameraYAxis==="Limit"&&this.orientMode==="cartesian"&&(this.euler.y=fe.clamp(this.euler.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel)),this.euler.x=fe.clamp(this.euler.x,-this.PI_2+(this.cameraPolarOffset<0?this.cameraPolarOffset:0),this.PI_2+(this.cameraPolarOffset>0?this.cameraPolarOffset:0))}return this.eulerDelta.set(0,0,0),this.object.dispatchEvent(voe),this.path.length<2&&this.lastPosition.distanceToSquared(this.position)<this.threshEndTranslate&&Math.abs(this.rotVelocity.x)<this.threshEndRotVel&&Math.abs(this.rotVelocity.y)<this.threshEndRotVel&&(this.camera===void 0||this.isFirstPerson||this.lastCameraPosition.distanceToSquared(this.camera.position)<this.threshEndTranslate&&8*(1-this.lastCameraQuaternion.dot(this.camera.quaternion))<this.threshEndRotate)&&(this.moveMode==="fly"||this.onObject===!0||this.collisionEnabled===!1)&&(this.navMeshPathDest===null||this.navMeshPathDest.material.opacity<-.04*((x=(w=this.navMeshPathDest)==null?void 0:w.material)==null?void 0:x.userData.opacity0))?!1:(this.camera&&(this.lastCameraPosition.copy(this.camera.position),this.lastCameraQuaternion.copy(this.camera.quaternion)),this.lastPosition.copy(this.position),this.object.dispatchEvent(goe),!0)}updateFollowArms(){this.objectToTarget.copy(this.objectToTarget0),this.targetToCamera.copy(this.targetToCamera0);let t=$o.setFromAxisAngle(Zo,this.cameraYAxis==="Limit"&&this.orientMode!=="radial"?fe.clamp(this.euler.y-this.euler0.y,this.minAzimuthAngleRel,this.maxAzimuthAngleRel):this.euler.y-this.euler0.y);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&this.objectToTarget.applyQuaternion(t);let i;this.cameraXAxis==="Limit"?i=fe.clamp(this.euler.x,-this.maxPolarAngle+this.cameraPolarOffset+1e-6,-this.minPolarAngle+this.cameraPolarOffset-1e-6):i=fe.clamp(this.euler.x,-this.PI_2+this.cameraPolarOffset+1e-6,this.PI_2+this.cameraPolarOffset-1e-6);let r=Xa.copy(this.cameraPolarAxis0);(this.cameraYAxis!=="Locked"||this.orientMode==="radial")&&r.applyQuaternion(t);let s=Ud.setFromAxisAngle(r,i);this.cameraYAxis!=="Locked"&&this.targetToCamera.applyQuaternion(t),this.cameraXAxis!=="Locked"&&this.targetToCamera.applyQuaternion(s)}groundTiltAdjustment(t){Zo.angleTo(t)*180/Math.PI<15||Zo.angleTo(t)*180/Math.PI>85?$o.identity():$o.setFromUnitVectors(Zo,t),this.groundTilt.slerp($o,.06),this.groundTiltInv.copy(this.groundTilt).invert()}collisionAdjustment(t){var l;let i=xL.set(0,0,0);this.object.matrix.compose(this.position,this.quaternion,this.scale);let r=q4.multiplyMatrices(this.object.matrix,this.objXZRotMat).multiply(this.collider.matrix).decompose(Xa,$o,vs).compose(Xa,$o,kL);this.sharedGameControlGlobals.entitiesWithTransformAnim.forEach(d=>{if(d===this.object||d.isDescendantOf(this.object))return;uo.makeEmpty(),d.updateMatrixWorldSVD();let c=d.matrixWorldRigid,u=_L.copy(c).invert(),h=doe.copy(_L).multiply(r);$r.copy(this.collider.segment),$r.start.applyMatrix4(h),$r.end.applyMatrix4(h);let f=wL.copy(this.position).applyMatrix4(u);uo.expandByPoint($r.start),uo.expandByPoint($r.end),uo.min.addScalar(-this.collider.radius),uo.max.addScalar(this.collider.radius),d.bvhGeometry.boundsTree.shapecast({traverseBoundsOrder(m){return m.distanceToPoint($r.end)},intersectsBounds:m=>m.intersectsBox(uo),intersectsTriangle:m=>{let p=Xa,g=vs,v=m.closestPointToSegment($r,p,g);if(v<this.collider.radius){let w=this.collider.radius-v,x=g.sub(p).normalize(),_=nu.copy(f);_.addScaledVector(x,w);let k=_.applyMatrix4(c).sub(this.position);i.add(k),$r.start.addScaledVector(x,w),$r.end.addScaledVector(x,w)}}})}),uo.makeEmpty(),$r.copy(this.collider.segment),$r.start.applyMatrix4(r),$r.end.applyMatrix4(r),uo.expandByPoint($r.start),uo.expandByPoint($r.end),uo.min.addScalar(-this.collider.radius),uo.max.addScalar(this.collider.radius),(l=this.sharedGameControlGlobals.staticMeshBVH)==null||l.shapecast({traverseBoundsOrder(d){return d.distanceToPoint($r.end)},intersectsBounds:d=>d.intersectsBox(uo),intersectsTriangle:d=>{let c=Xa,u=vs,h=d.closestPointToSegment($r,c,u);if(h<this.collider.radius){let f=this.collider.radius-h,m=u.sub(c).normalize();this.alignToGround&&this.groundTiltAdjustment(m),i.addScaledVector(m,f),$r.start.addScaledVector(m,f),$r.end.addScaledVector(m,f)}}}),this.onObject=Math.abs(i.y)>Math.abs(t*this.velocity.y*.25),this.onObject&&this.dispatchStopEvent("jump");let s=Math.max(0,i.length()-1e-5);i.normalize().multiplyScalar(s),this.position.add(i)}},CL=$4;CL.isLocked=!1;var yoe=sn(Ub());function Vd(t,i){let r=new Nt;if(!t.getAttribute("position"))return r.setAttribute("position",new wt([],3)),r.setIndex([]),r;let{positions:s,triIndices:l}=S_(t.getAttribute("position"),t.getIndex());return r.setAttribute("position",new wt(s,3)),r.setIndex(l),i&&r.applyMatrix4(i),r}var boe=new Ze,woe=new Ze,ql=[[0,0,0],[0,0,0],[0,0,0]];function EL(t){let i=t.elements;ql[0][0]=i[0],ql[0][1]=i[4],ql[0][2]=i[8],ql[1][0]=i[1],ql[1][1]=i[5],ql[1][2]=i[9],ql[2][0]=i[2],ql[2][1]=i[6],ql[2][2]=i[10];let{u:r,v:s}=(0,yoe.SVD)(ql),l=boe.set(r[0][0],r[0][1],r[0][2],0,r[1][0],r[1][1],r[1][2],0,r[2][0],r[2][1],r[2][2],0,0,0,0,1),d=woe.set(s[0][0],s[0][1],s[0][2],0,s[1][0],s[1][1],s[1][2],0,s[2][0],s[2][1],s[2][2],0,0,0,0,1);return l.multiply(d.transpose())}var xoe=class extends YP{constructor(){super(),this.layers.enable(3),this.layers.enable(8)}setFromCamera(t,i){i.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(i),this.ray.direction.set(0,0,-1).transformDirection(i.matrixWorld),this.camera=i):i.isPerspectiveCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(i),this.ray.direction.set(t.x,t.y,.5).unproject(i).sub(this.ray.origin).normalize(),this.camera=i):console.error("Raycaster: Unsupported camera type.")}intersectVisibleObjects(t,i=!0,r=[]){return t.forEach(s=>{s.visible&&this.intersectObject(s,i,r)}),r}createRaycastLineHelper(){let t=new Ec({color:65280,linewidth:10}),i=new N(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),r=new N(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),s=this.camera.far-this.camera.near,l=new N().addVectors(i,r.multiplyScalar(s)),d=new Nt;return d.setFromPoints([i,l]),new Vw(d,t)}},ML=t=>t instanceof tm||t instanceof im;function _oe(t,i){return t.distance-i.distance}function TL(t,i,r){if(!(!Td(i)||!i.visible)){Go(i)&&i.raycast(t,r);for(let s of i.children)TL(t,s,r)}}function i2(t,i,r,s=!1){if(!s&&!r.some(d=>n2(t,d)!==void 0))return[];let l=[];return i.children.forEach(d=>TL(t,d,l)),l.sort(_oe),l}function Z4(t){let i=[];if(t.length){let r=t[0].object;Td(r)&&i.push(r);let s=r.parent;for(;s;)ML(s)&&i.push(s),s=s.parent}return i}function n2(t,i){if(Go(i)){if(i.visible){let r=[];return i.raycast(t,r),r.length?r[0]:void 0}}else if(ML(i))return DL(t,i)}function DL(t,i){if(!(!Td(i)||!i.visible)){if(Go(i)){let r=[];if(i.raycast(t,r),r.length)return r[0]}for(let r of i.children){let s=DL(t,r);if(s)return s}}}function koe(t,i,r){return{x:(t-(r.left+window.scrollX))/r.width*2-1,y:-((i-(r.top+window.scrollY))/r.height)*2+1}}var Soe=class{constructor(t,i,r,s,l,d,c,u){this.renderer=t,this.publish=i,this.scene=r,this.getCamera=s,this.sharedAssets=l,this.requestRender=d,this.isExport=c,this.frame=u,this.raycaster=new xoe,this._useWindowEvents=!1,this._useWindowEvents=i.mouseEventTarget==="window",this.domElement=t.domElement,this.eventElement=this._useWindowEvents?window:t.domElement,this._domRect=this.domElement.getBoundingClientRect()}get stopRaycast(){return this.publish.stopRaycast}get page(){return this.scene.activePage}set useWindowEvents(t){this._useWindowEvents=t,this.eventElement=t?window:this.renderer.domElement}get useWindowEvents(){return this._useWindowEvents}set domRect(t){this._domRect=t}updateRaycaster(t){var s;let{pageX:i,pageY:r}=((s=t.touches)==null?void 0:s.length)>0?t.touches[0]:t;this.raycaster.setFromCamera(koe(i,r,this._domRect),this.getCamera())}},Yo=class{constructor(t){this.eventContext=t,this.domEventsNeeded=new Set,this.hasVideoAction=!1}connect(){}disconnect(){}},Y4=[["start","Start"],["keyDown","KeyDown"],["keyUp","KeyUp"],["mouseDown","MouseDown"],["mouseUp","MouseUp"],["mouseHover","MouseHover"],["collision","Collision"],["lookAt","LookAt"],["follow","Follow"],["scroll","Scroll"]],PL=t=>{var i;return(i=Y4.find(([r,s])=>s===t))==null?void 0:i[0]},R0=t=>{var i;return(i=Y4.find(([r])=>r===t))==null?void 0:i[1]},Aoe=(t,i)=>{let r=PL(t);if(r){let s=new CustomEvent(r,{bubbles:!0});return Object.defineProperty(s,"target",{writable:!1,value:i}),s}},Coe=class extends Yo{constructor(t){super(t),this.objectsPerEvents=new Map,this.splineEvents={},this.onBeginEvent=r=>{var d;if(!r.eventName||!r.target||r.eventName==="Scroll")return;let s=(d=this.splineEvents[PL(r.eventName)])==null?void 0:d[r.target.uuid];if(!s)return;r.eventName==="Scroll"&&r.deltaY!==void 0&&Object.assign(s,{deltaY:r.deltaY});let{domElement:l}=this.eventContext;l.dispatchEvent(s)};let{page:i}=this.eventContext;i.traverseEntity(r=>{var s,l;if((s=r.data)!=null&&s.events.length){for(let[d,c]of Y4)if(r.data.events.some(u=>u.data.type===c&&!u.data.disabled)){this.objectsPerEvents.has(d)?(l=this.objectsPerEvents.get(d))==null||l.push(r):this.objectsPerEvents.set(d,[r]);let u={id:r.uuid,name:r.name},h=Aoe(c,u),f=this.splineEvents[d];f?f[r.uuid]=h:this.splineEvents[d]={[r.uuid]:h}}}})}connect(){this.objectsPerEvents.forEach(t=>{t.forEach(i=>{i.addEventListener("beginEvent",this.onBeginEvent)})})}disconnect(){this.objectsPerEvents.forEach(t=>{t.forEach(i=>{i.removeEventListener("beginEvent",this.onBeginEvent)})})}},Eoe=class{constructor(t,i,r,s,l,d){if(this.id=t,this.data=i,this.object=r,this.entered=!1,this.alreadyPlayedNonTogglingActions=new Set,this.useToggle=i.runMode==="Toggle",(i.type==="KeyDown"||i.type==="KeyUp"||i.type==="KeyPress")&&!i.key)throw new Error("Missing property");this.actions=Ya(i,i.actions,s,l,d,r)}disconnect(){qr(this.actions)}dispatchHeld(t){this.actions.Create.forEach(i=>{t&&i.dispatchThrottled.cancel(),i.dispatchThrottled()})}dispatch(t=!1){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this?(i.object.currentTransitionEvent=this,i.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(i)}),this.useToggle?(this.actions.Transition.forEach(i=>{i.toggle()}),this.actions.Animation.forEach(i=>{i.toggle()}),this.actions.SwitchCamera.forEach(i=>{i.toggle()})):this.data.type==="MousePress"||this.data.type==="KeyPress"?this.entered||(this.entered=!0,this.actions.Transition.forEach(i=>i.playFromCurrent()),this.actions.Animation.forEach(i=>i.playFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.playFromCurrent()),this.actions.Create.forEach(i=>i.dispatchStart())):(this.actions.Transition.some(i=>i.playing)||this.actions.Transition.forEach(i=>{this.alreadyPlayedNonTogglingActions.has(i)===!1&&i.play()}),this.actions.SwitchCamera.some(i=>i.playing)||this.actions.SwitchCamera.forEach(i=>{i.play()}),this.actions.Animation.forEach(i=>{i.play()})),this.actions.Link.forEach(i=>{i.dispatch()}),this.actions.SceneTransition.forEach(i=>{i.dispatch()}),t===!1&&this.actions.Create.forEach(i=>{i.dispatch()}),this.actions.Destroy.forEach(i=>{i.dispatch()}),this.actions.Reset.forEach(i=>{i.dispatch()}),this.actions.Audio.forEach(i=>{i.dispatchBasic()}),this.actions.Video.forEach(i=>{i.dispatchBasic()}),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}dispatchRelease(){this.entered&&(this.entered=!1,this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.Animation.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent()),this.actions.Create.forEach(t=>t.dispatchStop()))}dispatchUserEvent(t){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())}),t?(this.actions.Transition.forEach(i=>i.reverseFromCurrent()),this.actions.Animation.forEach(i=>i.reverseFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.reverseFromCurrent())):(this.actions.Transition.forEach(i=>i.playFromCurrent()),this.actions.Animation.forEach(i=>i.playFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.playFromCurrent())),this.actions.Link.forEach(i=>{i.dispatch()}),this.actions.SceneTransition.forEach(i=>{i.dispatch()}),this.actions.Create.forEach(i=>{i.dispatch()}),this.actions.Destroy.forEach(i=>{i.dispatch()}),this.actions.Reset.forEach(i=>{i.dispatch()}),this.actions.Audio.forEach(i=>{i.dispatchBasic()}),this.actions.Video.forEach(i=>{i.dispatchBasic()}),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}},Moe=class extends Yo{constructor(t,i,r){super(t),this.useForRaycastProperty=r,this.objectsPerTypes={MouseDown:[],MouseUp:[],MousePress:[],KeyDown:[],KeyUp:[],KeyPress:[]},this.canvasMouseEvents=[],this.eventsPerObjects={MouseDown:{},MouseUp:{},MousePress:{},KeyDown:{},KeyUp:{},KeyPress:{}},this.heldKeys={},this.heldKeysPress={},this._prevObjects=[],this.sceneInterects=null,this.onCanvasRaycast=d=>{if(this.useForRaycastProperty===!0&&this.sceneInterects===null){this.eventContext.updateRaycaster(d);let{raycaster:c,page:u}=this.eventContext,h=i2(c,u,[],!0);this.sceneInterects=h,h.length&&(this.eventContext.sharedAssets.raycastProperty={x:h[0].point.x,y:h[0].point.y,z:h[0].point.z,objX:h[0].object.matrixWorld.elements[12],objY:h[0].object.matrixWorld.elements[13],objZ:h[0].object.matrixWorld.elements[14]})}},this.onCanvasMouseDown=d=>{(d.target===this.eventContext.domElement||d.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(c=>{(c.data.type==="MouseDown"||c.data.type==="MousePress")&&(this.onCanvasRaycast(d),c.dispatch())})},this.onCanvasMouseUp=d=>{(d.target===this.eventContext.domElement||d.target.tagName==="SPLINE-VIEWER")&&this.canvasMouseEvents.forEach(c=>{c.data.type==="MouseUp"?(this.onCanvasRaycast(d),c.dispatch()):c.data.type==="MousePress"&&c.dispatchRelease()})},this.onMouseDown=d=>{Jt.length>1||(this.eventContext.updateRaycaster(d),this.handleMouseEvent("MouseDown"))},this.onMouseUp=d=>{Jt.length>1||(this.eventContext.updateRaycaster(d),this.handleMouseEvent("MouseUp"))},this.onMousePressDown=d=>{Jt.length>1||(this.eventContext.updateRaycaster(d),this.handleMousePressEvent())},this.onMousePressRelease=d=>{Jt.length>1||(this.eventContext.updateRaycaster(d),this.handleMousePressEvent(!0))},this.onKeyDown=d=>{this.heldKeys[d.key]||(this.handleKeyEvent(d,"KeyDown"),this.handleKeyEventHeld(d,"KeyDown",!0)),this.heldKeys[d.key]=!0},this.onKeyUp=d=>{this.handleKeyEvent(d,"KeyUp"),this.handleKeyEventHeld(d,"KeyUp",!0)},this.onKeyPressDown=d=>{this.heldKeysPress[d.key]?this.handleKeyEventHeld(d,"KeyPress"):(this.handleKeyEvent(d,"KeyPress"),this.handleKeyEventHeld(d,"KeyPress",!0)),this.heldKeysPress[d.key]=!0},this.onKeyPressUp=d=>{this.handleKeyEvent(d,"KeyPress",!0)},this.releaseHeldKey=d=>{delete this.heldKeys[d.key]},this.releaseHeldKeyPress=d=>{delete this.heldKeysPress[d.key]},this._onUserEvent=({eventName:d,target:c,reverse:u})=>{var f,m,p,g;if(!d||!c)return;let h=R0(d);h&&(h==="MouseDown"||h==="MouseUp"||h==="MousePress"?(c.dispatchEvent({type:"beginEvent",eventName:h}),(m=(f=this.eventsPerObjects[h])==null?void 0:f[c.uuid])==null||m.forEach(v=>{v.dispatchUserEvent(u)})):(h==="KeyDown"||h==="KeyUp"||h==="KeyPress")&&(c.dispatchEvent({type:"beginEvent",eventName:h}),(g=(p=this.eventsPerObjects[h])==null?void 0:p[c.uuid])==null||g.forEach(v=>{v.dispatchUserEvent()})))};let{page:s,sharedAssets:l}=this.eventContext;s.traverseEntity(d=>{var u,h;if(!((u=d.data)!=null&&u.events.length))return;let c=["MouseDown","MouseUp","MousePress","KeyDown","KeyUp","KeyPress"];for(let f of c){let m=this.eventsPerObjects[f];d.data.events.filter(({data:p})=>p.type===f&&p.disabled!==!0).forEach(({id:p,data:g})=>{try{let v=new Eoe(p,g,d,s,l,i);v.actions.Video.length&&(this.hasVideoAction=!0),(g.type==="MouseDown"||g.type==="MouseUp"||g.type==="MousePress")&&(g.mode==="Canvas"||g.mode==="Window")?this.canvasMouseEvents.push(v):m[d.uuid]?m[d.uuid].push(v):m[d.uuid]=[v]}catch(v){}}),(h=m[d.uuid])!=null&&h.length&&this.objectsPerTypes[f].push(d)}})}connect(){var i,r,s,l,d,c;let{domElement:t}=this.eventContext;this.heldKeys={},this.heldKeysPress={},this.domEventsNeeded.clear(),t.addEventListener("pointerdown",this.onCanvasMouseDown),t.addEventListener("pointerup",this.onCanvasMouseUp),((i=this.objectsPerTypes.MouseDown)!=null&&i.length||this.useForRaycastProperty)&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown)),(r=this.objectsPerTypes.MouseUp)!=null&&r.length&&(this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMouseUp)),(s=this.objectsPerTypes.MousePress)!=null&&s.length&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMousePressDown),this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMousePressRelease)),(l=this.objectsPerTypes.KeyDown)!=null&&l.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.releaseHeldKey)),(d=this.objectsPerTypes.KeyUp)!=null&&d.length&&(this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyUp)),(c=this.objectsPerTypes.KeyPress)!=null&&c.length&&(this.domEventsNeeded.add("keydown"),document.addEventListener("keydown",this.onKeyPressDown),document.addEventListener("keyup",this.releaseHeldKeyPress),this.domEventsNeeded.add("keyup"),document.addEventListener("keyup",this.onKeyPressUp)),Object.entries(this.objectsPerTypes).forEach(([u,h])=>{h.forEach(f=>{f.addEventListener("userEvent",this._onUserEvent)})})}disconnect(){let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),this.heldKeys={},this.heldKeysPress={},t.removeEventListener("pointerdown",this.onCanvasMouseDown),t.removeEventListener("pointerup",this.onCanvasMouseUp),t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerdown",this.onMousePressDown),t.removeEventListener("pointerup",this.onMouseUp),t.removeEventListener("pointerup",this.onMousePressRelease),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("keydown",this.onKeyPressDown),document.removeEventListener("keyup",this.onKeyPressUp),document.removeEventListener("keyup",this.releaseHeldKey),Object.values(this.eventsPerObjects).forEach(i=>{Object.values(i).forEach(r=>{r.forEach(s=>{s.disconnect()})})}),this.canvasMouseEvents.forEach(i=>{i.disconnect()}),Object.entries(this.objectsPerTypes).forEach(([i,r])=>{r.forEach(s=>{s.removeEventListener("userEvent",this._onUserEvent)})})}handleMouseEvent(t){let{stopRaycast:i,raycaster:r,page:s}=this.eventContext,l=this.objectsPerTypes[t];if(!(!l.length&&!this.useForRaycastProperty)){if(i||this.useForRaycastProperty){let d;this.sceneInterects===null?d=i2(r,s,l,this.useForRaycastProperty):(d=this.sceneInterects,this.sceneInterects=null),this.useForRaycastProperty&&d.length&&(this.eventContext.sharedAssets.raycastProperty={x:d[0].point.x,y:d[0].point.y,z:d[0].point.z,objX:d[0].object.matrixWorld.elements[12],objY:d[0].object.matrixWorld.elements[13],objZ:d[0].object.matrixWorld.elements[14]}),i&&Z4(d).forEach(c=>{this.eventsPerObjects[t][c.uuid]&&this.handleObjectMouseEventDispatch(c,t)})}i||l.forEach(d=>{n2(r,d)&&this.handleObjectMouseEventDispatch(d,t)})}}handleMousePressEvent(t=!1){let i="MousePress",r=this.objectsPerTypes[i],s=[];if(r.length){if(!t){let{stopRaycast:l,raycaster:d,page:c}=this.eventContext;if(l){let u=i2(d,c,r);s=Z4(u)}else r.forEach(u=>{n2(d,u)&&s.push(u)})}this._prevObjects.length&&this._prevObjects.forEach(l=>{s.includes(l)||this.handleObjectMouseEventDispatchRelease(l,i)}),s.length&&s.forEach(l=>{this.handleObjectMouseEventDispatch(l,i)}),this._prevObjects=s}}handleObjectMouseEventDispatch(t,i){var r,s;t.dispatchEvent({type:"beginEvent",eventName:i}),(s=(r=this.eventsPerObjects[i])==null?void 0:r[t.uuid])==null||s.forEach(l=>{l.dispatch()})}handleObjectMouseEventDispatchRelease(t,i){var r,s;t.dispatchEvent({type:"beginEvent",eventName:i}),(s=(r=this.eventsPerObjects[i])==null?void 0:r[t.uuid])==null||s.forEach(l=>{l.dispatchRelease()})}handleKeyEvent(t,i,r=!1){this.objectsPerTypes[i].forEach(s=>{let l=this.eventsPerObjects[i][s.uuid];l.some(({data:d})=>"key"in d&&d.key===t.key)&&s.dispatchEvent({type:"beginEvent",eventName:i}),l.forEach(d=>{"key"in d.data&&d.data.key===t.key&&(r?d.dispatchRelease():d.dispatch(!0))})})}handleKeyEventHeld(t,i,r=!1){this.objectsPerTypes[i].forEach(s=>{this.eventsPerObjects[i][s.uuid].forEach(l=>{"key"in l.data&&l.data.key===t.key&&l.dispatchHeld(r)})})}},Toe=new N,Doe=new N,OL=class{constructor(t,i,r,s,l){this.actionsIn=Ya(t,t.inActions,r,s,l,i),this.actionsOut=Ya(t,t.outActions,r,s,l,i)}disconnect(){qr(this.actionsIn),qr(this.actionsOut)}},Poe=class extends OL{constructor(t,i,r,s,l,d){super(i,r,s,l,d),this.id=t,this.data=i,this.object=r,this.stage="out",this.objects=[],this.onUpdateMatrixWorld=()=>{for(let g of this.objects)if(!g.visible)return;let f=Toe.setFromMatrixPosition(this.objects[0].matrixWorld),m=Doe.setFromMatrixPosition(this.objects[1].matrixWorld),p=f.distanceTo(m)<=this.distance?"in":"out";if(this.stage!==p){this.stage=p;let g=p==="in"?this.actionsIn:this.actionsOut;g.Audio.forEach(v=>v.dispatchConditional()),g.Video.forEach(v=>v.dispatchConditional()),g.Link.forEach(v=>v.dispatch()),g.Create.forEach(v=>v.dispatch()),g.Destroy.forEach(v=>v.dispatch()),g.Reset.forEach(v=>v.dispatch()),g.Transition.forEach(v=>{v.object.currentTransitionEvent!==this&&(v.object.currentTransitionEvent=this),v.init()}),g.Transition.forEach(v=>v.play()),g.Animation.forEach(v=>v.play()),g.SwitchCamera.forEach(v=>v.play()),g.SceneTransition.forEach(v=>v.dispatch()),g.SetVariable.forEach(v=>v.checkConditions()),g.SetVariable.forEach(v=>v.dispatch()),g.DynamicVariablePlay.forEach(v=>v.dispatch())}};let{distance:c,fromObject:u,toObject:h}=i.condition;this.distance=c;for(let f of[u,h]){if(!f)throw new Error("Missing property");let m=s.find(f);if(!m)throw new Error("Missing property");this.objects.push(m)}}connect(){window.setTimeout(()=>{this.objects.forEach(t=>{t.addEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)}),this.onUpdateMatrixWorld()},0)}disconnect(){super.disconnect(),this.stage="out",this.objects.forEach(t=>{t.removeEventListener("updateMatrixWorld",this.onUpdateMatrixWorld)})}},Ooe=class extends OL{constructor(t,i,r,s,l,d){var h;super(i,r,s,l,d),this.id=t,this.data=i,this.object=r,this.onBegin=({target:f,state:m})=>{this.toState!==m&&(this.actionsOut.Audio.forEach(p=>p.dispatchConditional()),this.actionsOut.Video.forEach(p=>p.dispatchConditional()),this.actionsOut.Link.forEach(p=>p.dispatch()),this.actionsOut.Create.forEach(p=>p.dispatch()),this.actionsOut.Destroy.forEach(p=>p.dispatch()),this.actionsOut.Reset.forEach(p=>p.dispatch()),this.actionsIn.Transition.forEach(p=>p.pause()),this.object.currentTransitionEvent=this,this.actionsOut.Transition.forEach(p=>p.play()),this.actionsOut.Animation.forEach(p=>p.play()),this.actionsIn.SwitchCamera.forEach(p=>p.pause()),this.actionsOut.SwitchCamera.forEach(p=>p.play()),this.actionsOut.SceneTransition.forEach(p=>p.dispatch()),this.actionsOut.SetVariable.forEach(p=>p.checkConditions()),this.actionsOut.SetVariable.forEach(p=>p.dispatch()),this.actionsOut.DynamicVariablePlay.forEach(p=>p.dispatch()))},this.onComplete=({target:f,state:m})=>{this.toState===m&&(this.actionsIn.Audio.forEach(p=>p.dispatchConditional()),this.actionsIn.Video.forEach(p=>p.dispatchConditional()),this.actionsIn.Link.forEach(p=>p.dispatch()),this.actionsIn.Create.forEach(p=>p.dispatch()),this.actionsIn.Destroy.forEach(p=>p.dispatch()),this.actionsIn.Reset.forEach(p=>p.dispatch()),this.actionsOut.Transition.forEach(p=>p.pause()),this.actionsOut.Transition.forEach(p=>p.pause()),this.object.currentTransitionEvent=this,this.actionsIn.Transition.forEach(p=>p.play()),this.actionsIn.Animation.forEach(p=>p.play()),this.actionsOut.SwitchCamera.forEach(p=>p.pause()),this.actionsIn.SwitchCamera.forEach(p=>p.play()),this.actionsIn.SceneTransition.forEach(p=>p.dispatch()),this.actionsIn.SetVariable.forEach(p=>p.checkConditions()),this.actionsIn.SetVariable.forEach(p=>p.dispatch()),this.actionsIn.DynamicVariablePlay.forEach(p=>p.dispatch()))};let{condition:c}=i;if(!c.object)throw new Error("Missing property");let u=s.find(c.object);if(!u)throw new Error("Missing property");if(this.toObject=u,c.state&&!((h=this.toObject.states)!=null&&h[c.state]))throw new Error("Missing property");this.toState=c.state}connect(){eh(this.actionsOut).forEach(t=>{var i;(i=this.actionsOut[t])!=null&&i.length&&this.toObject.addEventListener("beginState",this.onBegin)}),eh(this.actionsIn).forEach(t=>{var i;(i=this.actionsIn[t])!=null&&i.length&&this.toObject.addEventListener("completeState",this.onComplete)})}disconnect(){super.disconnect(),eh(this.actionsOut).forEach(t=>{var i;(i=this.actionsIn[t])!=null&&i.length&&this.toObject.removeEventListener("beginState",this.onBegin)}),eh(this.actionsIn).forEach(t=>{var i;(i=this.actionsIn[t])!=null&&i.length&&this.toObject.removeEventListener("completeState",this.onComplete)})}},Ioe=class extends Yo{constructor(t,i){super(t),this.eventsPerConditions={Comparison:[],Distance:[],State:[]},this.hasVideoAction=!1;let{page:r,sharedAssets:s}=this.eventContext;r.traverseEntity(l=>{var d;if((d=l.data)!=null&&d.events.length){for(let{id:c,data:u}of l.data.events)if(!u.disabled&&u.type==="Conditional")try{let h;u.condition.type==="Comparison"||(u.condition.type==="Distance"?h=new Poe(c,u,l,r,s,i):u.condition.type==="State"&&(h=new Ooe(c,u,l,r,s,i))),h&&(this.eventsPerConditions[u.condition.type].push(h),(h.actionsIn.Video.length||h.actionsOut.Video.length)&&(this.hasVideoAction=!0))}catch(h){}}})}connect(){super.connect(),Object.values(this.eventsPerConditions).forEach(t=>t.forEach(i=>i.connect()))}disconnect(){super.disconnect(),Object.values(this.eventsPerConditions).forEach(t=>t.forEach(i=>i.disconnect()))}},z0=new N,ru=new N,Ch=new N,IL=new Ps,Roe=.01,en=new N,Ir=new N,RL=new N,Eh=new Ut,X4=new Vr,zoe=new Ze,K4=new Me,lm=new N,$l=new N,dm=.2;function Q4(t,i){!i||(i[0]<i[1]&&(t.x=Math.min(Math.max(t.x,i[0]),i[1])),i[2]<i[3]&&(t.y=Math.min(Math.max(t.y,i[2]),i[3])),i[4]<i[5]&&(t.z=Math.min(Math.max(t.z,i[4]),i[5])))}var Loe=function(){let t=new Ze;return(i,r,s)=>{let l=i.obj;t.copy(l.hiddenMatrix),l.parent!==null&&t.premultiply(l.parent.matrixWorld),t.invert(),l.position.copy(r),i.reference==="global"&&Q4(l.position,i.limits),l.position.applyMatrix4(t),i.reference==="parent"?Q4(l.position,i.limits):i.reference==="local"&&(Eh.copy(i.quat0).invert(),l.position.sub(i.position0),l.position.applyQuaternion(Eh),Q4(l.position,i.limits),Eh.invert(),l.position.applyQuaternion(Eh),l.position.add(i.position0)),t.multiply(s!=null?s:l.matrixWorld).decompose(en,l.quaternion,Ir),l.updateMatrix(),l.hasNonUniformScale&&(l.updateMatrixWorld(),l.updateMatrixWorldSVD()),l instanceof ds&&Bd(l.parent)&&l.invalidateDownstreamBooleanData(!0)}}(),Boe=class{constructor(t,i,r,s,l,d){this.object=t,this.data=i,this.dropDestIds=[],this.activeIdx=null,this.wasDragEventTriggered=!1,this.resetDampingFactor=this.data.resetSpeed===0?1:8/this.data.resetSpeed+1,this.snapDampingFactor=this.data.snapSpeed===0?1:8/this.data.snapSpeed+1,this.actionsDrag=Ya(i,i.dragDropActions.drag,r,s,l,this.object),this.actionsDrop=Ya(i,i.dragDropActions.drop,r,s,l,this.object);let c=[];this.data.objects.forEach(u=>{let h=r.find(u);!h||h.data.visible!==!1&&(c.push(h),d[h.uuid]&&d[h.uuid].forEach(f=>{let m=r.find(f);!m||m.data.visible!==!1&&c.push(m)}))}),this.data.dropDestinations.forEach(u=>{let h=r.find(u);!h||h.data.visible!==!1&&(this.dropDestIds.push(h.uuid),d[h.uuid]&&d[h.uuid].forEach(f=>{let m=r.find(f);!m||m.data.visible!==!1&&this.dropDestIds.push(m.uuid)}))}),this.dragItems=c.map(u=>(this.data.planeMode==="locked"&&(u.userData.lockedPlane=!0),u.userData.worldPosition0=new N().setFromMatrixPosition(u.matrixWorld),{obj:u,fromPosition:new N().setFromMatrixPosition(u.matrixWorld),pointStart:new N,pointEnd:new N,paused:!0,currentDampingFactor:this.data.dampingFactor,reset:!1,position0:new N().copy(u.position),quat0:new Ut().copy(u.quaternion),snapped:!1,orientationMatrix:new Ze,limits:this.data.limits,reference:this.data.referenceFrame}))}get activeDragItem(){return this.activeIdx!==null?this.dragItems[this.activeIdx]:null}dispose(){qr(this.actionsDrag),qr(this.actionsDrop),this.dragItems.forEach(t=>{t.fromPosition.copy(t.obj.userData.worldPosition0),t.pointStart.copy(t.fromPosition),t.pointEnd.copy(t.pointStart),t.obj.recursiveBBoxNeedsUpdate=!0,t.obj.userData.lockedPlane=void 0,t.obj.position.copy(t.position0),t.obj.quaternion.copy(t.quat0),t.obj.updateMatrix()})}},Foe=class extends Yo{constructor(t,i){super(t),this.eventManager=i,this.events=[],this.lastDropDestination=null,this.dragTimeout=null,this.onPointerDown=s=>{var u;if(Jt.length>1)return;this.eventContext.updateRaycaster(s);let{raycaster:l,page:d}=this.eventContext,c=d.raycastWithClones(l);if(this.lastDropDestination=null,c.length===0){this.activeEvent=null;return}for(let h of this.events){let f=0;for(let{obj:m,pointEnd:p,pointStart:g}of h.dragItems){if(m===c[0].object||m===c[0].object.object||Ri.is(m)&&m.isAncestorOf(c[0].object.uuid)){if(h.activeIdx=f,h.activeDragItem.reset=!1,h.activeDragItem.currentDampingFactor=h.data.dampingFactor,h.activeDragItem.snapped=!1,h.data.cursor==="hand"&&this.setCursor("grabbing"),this.eventManager.controlsManager.usePhysics){h.activeDragItem.obj.rigidBody&&h.activeDragItem.obj.rigidBody.setBodyType(2,!0);let v=h.activeDragItem.obj;m.hasNonUniformScale&&m.updateMatrixWorldSVD(),(v.hasNonUniformScale?v.matrixWorldRigid:v.matrixWorld).decompose(en,Eh,Ir),X4.setFromQuaternion(Eh),v.prevR===void 0?(v.prevR=X4.clone(),v.prevT=en.clone()):(v.prevR.copy(X4),v.prevT.copy(en)),this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.push(h.activeDragItem.obj)}this.calcPlaneIntersectPos(m,g,h.data.plane,h.data.referenceFrame),p.copy(g),(this.eventManager.controlsManager.usePhysics&&((u=m.data.physics)==null?void 0:u.rigidBody)==="dynamic"||h.data.drop===!1||h.data.resetOnSnapFail===!1)&&h.activeDragItem.fromPosition.setFromMatrixPosition(h.activeDragItem.obj.matrixWorld),this.activeEvent=h,this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!1);return}f++}}this.activeEvent=null},this.onPointerMove=s=>{var u,h,f,m;if(Jt.length>1)return;this.eventContext.updateRaycaster(s);let{raycaster:l,page:d}=this.eventContext,c=d.raycastWithClones(l);if(Jt.length===0){let p=!1;for(let g of this.events){for(let{obj:v}of g.dragItems)if(v===((u=c[0])==null?void 0:u.object)||v===((f=(h=c[0])==null?void 0:h.object)==null?void 0:f.object)||Ri.is(v)&&v.isAncestorOf((m=c[0])==null?void 0:m.object.uuid)){switch(p=!0,g.data.cursor){case"hand":this.setCursor("grab");break;case"move":this.setCursor("move");break;default:break}break}if(p)break}p||this.setCursor("default");return}if(this.activeEvent&&this.activeEvent.activeDragItem){let p=this.activeEvent.activeDragItem;p.snapped=!1;let g;if(this.activeEvent.data.drop&&(g=c.filter(v=>p.obj!==v.object&&!p.obj.isAncestorOf(v.object.uuid)&&!(v.object instanceof tm)&&(this.activeEvent.data.dropOn==="all"||this.activeEvent.dropDestIds.some(w=>w===v.object.uuid||d.scene.find(w).isAncestorOf(v.object.uuid))))[0]),g){let v=RL.copy(g.face.normal).applyMatrix3(K4.getNormalMatrix(g.object.matrixWorld));if(this.activeEvent.data.snapTo==="center")p.fromPosition.setFromMatrixPosition(g.object.matrixWorld);else if(this.activeEvent.data.snapTo==="surface"){if(p.fromPosition.copy(g.point),this.activeEvent.data.snapSurfaceMode==="bbox"){en.copy(v).applyMatrix3(K4.setFromMatrix4(p.obj.matrixWorld).transpose());let w=p.obj;en.x>dm?Ir.x=-w.recursiveBBox.min.x:en.x<-dm&&(Ir.x=-w.recursiveBBox.max.x),en.y>dm?Ir.y=-w.recursiveBBox.min.y:en.y<-dm&&(Ir.y=-w.recursiveBBox.max.y),en.z>dm?Ir.z=-w.recursiveBBox.min.z:en.z<-dm&&(Ir.z=-w.recursiveBBox.max.z),Ir.applyMatrix3(K4.invert())}else Ir.copy(v).multiplyScalar(this.activeEvent.data.snapSurfaceOffset);p.fromPosition.add(Ir)}this.activeEvent.data.autoOrient&&(en.set(0,1,0).cross(v),en.length()<1e-4&&en.set(-1,0,0).cross(v),Ir.crossVectors(RL,en),p.orientationMatrix.makeBasis(en,Ir,v)),p.pointStart.copy(p.fromPosition),p.pointEnd.copy(p.pointStart),p.currentDampingFactor=this.activeEvent.snapDampingFactor,p.snapped=!0,this.lastDropDestination!==g.object&&(this.lastDropDestination=g.object,this.activeEvent.actionsDrop.Transition.forEach(w=>{w.play()}),this.activeEvent.actionsDrop.Animation.forEach(w=>{w.play()}),this.activeEvent.actionsDrop.Audio.forEach(w=>{w.dispatchGameControl("start")}),this.activeEvent.actionsDrop.Create.forEach(w=>{w.dispatchThrottled()}))}else p.orientationMatrix.makeRotationFromQuaternion(p.quat0),this.lastDropDestination=null,p.currentDampingFactor=this.activeEvent.data.dampingFactor,this.calcPlaneIntersectPos(p.obj,p.pointEnd,this.activeEvent.data.plane,this.activeEvent.data.referenceFrame),this.activeEvent.actionsDrop.Transition.forEach(v=>{v.stop(),v.object.currentState!==null&&v.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrop.Animation.forEach(v=>{v.stop()}),this.activeEvent.actionsDrop.Audio.forEach(v=>{v.dispatchGameControl("stop")});this.activeEvent.actionsDrag.Create.forEach(v=>{v.dispatchThrottled()}),this.activeEvent.actionsDrag.SetVariable.forEach(v=>v.checkConditions()),this.activeEvent.actionsDrag.SetVariable.forEach(v=>v.dispatch()),this.activeEvent.actionsDrag.DynamicVariablePlay.forEach(v=>v.dispatch()),this.activeEvent.wasDragEventTriggered===!1&&(this.activeEvent.wasDragEventTriggered=!0,this.activeEvent.actionsDrag.Transition.forEach(v=>{v.play()}),this.activeEvent.actionsDrag.Animation.forEach(v=>{v.play()}),this.activeEvent.actionsDrag.Audio.forEach(v=>{v.dispatchGameControl("start")})),this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>{!this.activeEvent||(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Audio.forEach(v=>{v.dispatchGameControl("stop")}),this.activeEvent.actionsDrag.Transition.forEach(v=>{v.stop(),v.object.currentState!==null&&v.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(v=>{v.stop()}))},500),this.updateDragItem(p),p.obj.dispatchEvent({type:"requestRender"})}},this.onPointerUp=s=>{var l;if(this.activeEvent&&this.activeEvent.activeDragItem){this.activeEvent.data.cursor==="hand"&&this.setCursor("grab");let d=((l=this.activeEvent.activeDragItem.obj.data.physics)==null?void 0:l.rigidBody)==="dynamic";this.activeEvent.activeDragItem.snapped===!1&&this.activeEvent.data.drop&&this.activeEvent.data.resetOnSnapFail&&(this.eventManager.controlsManager.usePhysics===!1||!d)&&(this.activeEvent.activeDragItem.reset=this.activeEvent.data.resetOnSnapFail,this.activeEvent.activeDragItem.paused=!1,this.activeEvent.activeDragItem.currentDampingFactor=this.activeEvent.resetDampingFactor),this.eventManager.controlsManager.usePhysics&&d&&(this.eventManager.controlsManager.sharedGameControlGlobals.entitiesWithTransformAnim.pop(),this.activeEvent.activeDragItem.obj.rigidBody.setBodyType(0,!0),this.activeEvent.activeDragItem.paused=!0),this.activeEvent.wasDragEventTriggered===!0&&(this.activeEvent.wasDragEventTriggered=!1,this.activeEvent.actionsDrag.Transition.forEach(c=>{c.stop(),c.object.currentState!==null&&c.object.changeSelectedState(null,{scene:this.eventContext.page.scene,shared:this.eventContext.sharedAssets})}),this.activeEvent.actionsDrag.Animation.forEach(c=>{c.stop()}),this.activeEvent.actionsDrag.Audio.forEach(c=>{c.dispatchGameControl("stop")}),this.activeEvent.actionsDrop.SetVariable.forEach(c=>c.checkConditions()),this.activeEvent.actionsDrop.SetVariable.forEach(c=>c.dispatch()),this.activeEvent.actionsDrop.DynamicVariablePlay.forEach(c=>c.dispatch())),this.eventManager.controlsManager.orbitControls&&(this.eventManager.controlsManager.orbitControls.enabled=!0)}};let r={};t.page.traverseEntity(s=>{s.component&&(r[s.component.uuid]?r[s.component.uuid].push(s.uuid):r[s.component.uuid]=[s.uuid])}),t.page.traverseEntity(s=>{var l;(l=s.data)==null||l.events.filter(d=>d.data.type==="DragDrop"&&!d.data.disabled).forEach(d=>{this.events.push(new Boe(s,d.data,t.page,t.sharedAssets,i,r))})})}connect(){if(!this.events.length)return;this.domEventsNeeded.clear(),this.domEventsNeeded.add("pointerdown");let t=this.eventContext.domElement;t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),this.domEventsNeeded.add("pointermove")}disconnect(){if(!this.events.length)return;this.domEventsNeeded.clear();let t=this.eventContext.domElement;t.removeEventListener("pointerdown",this.onPointerDown),t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),this.events.forEach(i=>i.dispose())}setCursor(t){this.eventContext.domElement.style.cursor=t}onAnimationFrameDamping(){for(let t of this.events)for(let i of t.dragItems)i.paused||this.updateDragItem(i,!0)}calcPlaneIntersectPos(t,i,r,s){let{getCamera:l,raycaster:d}=this.eventContext;l().getWorldDirection(ru),ru.negate();let c=Eh.identity();switch(s==="parent"?zoe.multiplyMatrices(t.parent.matrixWorld,t.hiddenMatrix).decompose(en,c,Ir):s==="local"&&t.matrixWorld.decompose(en,c,Ir),r){case"x":en.set(1,0,0).applyQuaternion(c),lm.copy(ru).cross(en),$l.copy(en).cross(lm);break;case"y":en.set(0,1,0).applyQuaternion(c),lm.copy(ru).cross(en),$l.copy(en).cross(lm);break;case"z":en.set(0,0,1).applyQuaternion(c),lm.copy(ru).cross(en),$l.copy(en).cross(lm);break;case"xy":$l.set(0,0,1).applyQuaternion(c);break;case"yz":$l.set(1,0,0).applyQuaternion(c);break;case"xz":$l.set(0,1,0).applyQuaternion(c);break;case"adaptive":ru.angleTo(Ir.set(0,1,0))>Math.PI/6?(en.crossVectors(Ir.set(0,1,0),ru),$l.crossVectors(en,Ir)):$l.set(0,1,0);break;default:$l.copy(ru);break}Ch.setFromMatrixPosition(t.matrixWorld);let u=t.userData.lockedPlane?t.userData.worldPosition0:Ch;if(IL.setFromNormalAndCoplanarPoint($l,u),!!d.ray.intersectPlane(IL,i)&&(r==="x"||r==="y"||r==="z")){let h=Ir.subVectors(i,u).dot(en);i.copy(u).addScaledVector(en,h)}}updateDragItem(t,i=!1){var r,s;Ch.setFromMatrixPosition(t.obj.matrixWorld),t.reset==="current"?z0.subVectors(t.fromPosition,Ch).divideScalar(t.currentDampingFactor):t.reset==="original"?(z0.subVectors(t.obj.userData.worldPosition0,Ch).divideScalar(t.currentDampingFactor),t.fromPosition.copy(t.obj.userData.worldPosition0),t.pointStart.copy(t.fromPosition),t.pointEnd.copy(t.pointStart)):z0.subVectors(t.pointEnd,t.pointStart).add(t.fromPosition).sub(Ch).divideScalar(t.currentDampingFactor),t.paused=t.currentDampingFactor>1?z0.length()<Roe:!0,(this.activeEvent&&this.activeEvent.data.dampingFactor===1||i)&&Loe(t,z0.add(Ch),(r=this.activeEvent)!=null&&r.data.drop&&((s=this.activeEvent)!=null&&s.data.autoOrient)?t.orientationMatrix:null),t.obj.dispatchEvent({type:"beginEvent",eventName:"DragDrop"}),this.eventManager.requestRender()}},cm=new N,J4=new N,Hd=new N,Gd=new N,zL=new Ps,Noe=.01,joe={type:"requestRender"},Uoe=function(){let t=new N,i=new N;return(r,s,l)=>l>0?(t.subVectors(r,s),t.length()<=l?r:i.copy(s).add(t.normalize().multiplyScalar(l))):s}(),LL=function(){let t=new Ze;return(i,r)=>{i.position.copy(r),i.parent!==null&&(t.copy(i.parent.matrixWorld).invert(),i.position.applyMatrix4(t)),t.copy(i.hiddenMatrix).invert(),i.position.applyMatrix4(t),i.updateMatrix(),i.hasNonUniformScale&&(i.updateMatrixWorld(),i.updateMatrixWorldSVD()),i instanceof ds&&Bd(i.parent)&&i.invalidateDownstreamBooleanData(!0)}}(),Voe=class{constructor(t,i,r,s,l){this.data=t,this.object=i,this.paused=!1,this.currentDampingFactor=1,this.snapComplete=!1,this.isReset=!1,this.worldPosition0=new N,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data=Z(Z(Z({},rE.defaultData),t),t.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}),t.target===void 0||t.target==="cursor"||(this.target=r.find(t.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.resetDampingFactor=80/this.data.resetSpeed+1,this.object.getWorldPosition(this.worldPosition0),this.actions=Ya(t,t.actions,r,s,l,i)}},Hoe=class extends Yo{constructor(t,i){super(t),this.events=[],this.pairOfEventListeners=[],this.onMouseMove=s=>{if(!(Jt.length>1)){this.eventContext.updateRaycaster(s);for(let l of this.events)l.target===void 0&&this.updateSingleEvent(l)}},this.onMouseEnter=s=>{for(let l of this.events)l.target===void 0&&(l.isReset=!1,l.currentDampingFactor=l.data.dampingFactor)},this.onMouseLeave=s=>{for(let l of this.events)l.target===void 0&&(l.data.resetOnPointerLeave&&(l.isReset=!0,l.currentDampingFactor=l.resetDampingFactor),this.updateSingleEvent(l))},this.onTargetChange=s=>()=>{this.updateSingleEvent(s)};let{page:r}=this.eventContext;r.traverseEntity(s=>{var d,c;let l=(d=s.data)==null?void 0:d.events.find(u=>u.data.type==="Follow"&&!u.data.disabled);l&&(!r.data.globalPhysics.usePhysics||((c=s.dataPatched.physics)==null?void 0:c.rigidBody)!=="dynamic")&&this.events.push(new Voe(l.data,s,r,t.sharedAssets,i))})}connect(){if(!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Os&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents||(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events)if(r.target!==void 0){let s=r.target,l=this.onTargetChange(r);this.pairOfEventListeners.push([s,l]),s.addEventListener("requestRender",l)}}disconnect(){if(!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Os&&t.removeEventListener("pointerdown",this.onMouseMove),i.removeEventListener("pointermove",this.onMouseMove),t.removeEventListener("pointerenter",this.onMouseEnter),t.removeEventListener("pointerleave",this.onMouseLeave);for(let[r,s]of this.pairOfEventListeners)r.removeEventListener("requestRender",s);for(let r of this.events)r.paused=!0,r.isReset=!1,qr(r.actions)}onAnimationFrameDamping(){for(let t of this.events)t.paused||this.updateSingleEvent(t,!0)}updateSingleEvent(t,i=!1){var c;this.events.forEach(u=>{u.actions.Create.forEach(h=>{h.dispatchThrottled()})});let{plane:r,limitDistance:s,limitDistanceEnabled:l}=t.data;if(t.object.getWorldPosition(Hd),t.isReset)Gd.copy(t.worldPosition0);else if(t.target)t.target.getWorldPosition(Gd);else{let{getCamera:u,raycaster:h}=this.eventContext;if(r==="custom"?(u().getWorldDirection(J4),J4.negate(),cm.copy(J4)):r==="xy"?cm.set(0,0,1):r==="xz"?cm.set(0,1,0):r==="yz"&&cm.set(1,0,0),zL.setFromNormalAndCoplanarPoint(cm,Hd),!h.ray.intersectPlane(zL,Gd))return}if(!t.isReset){if(Gd.distanceTo(t.worldPosition0)>s&&l&&t.target)if(t.snapComplete=!1,t.data.snapDelay&&(t.delayFinished=!1,typeof window<"u"&&t.timeoutId!==null&&(window.clearTimeout(t.timeoutId),t.timeoutId=null)),t.wasOutside=!0,t.data.resetAfterDistanceLimit)Gd.copy(t.worldPosition0),t.currentDampingFactor=t.resetDampingFactor;else return;else if(t.wasOutside&&(t.data.snapDelay&&typeof window<"u"&&(t.timeoutId=window.setTimeout(()=>{t.delayFinished=!0,t.paused=!1,this.updateSingleEvent(t)},t.data.snapDelay*1e3)),t.currentDampingFactor=t.data.dampingFactor,t.wasOutside=!1),t.delayFinished===!1)return}t.data.enabledTranslation[0]===!1&&(Gd.x=Hd.x),t.data.enabledTranslation[1]===!1&&(Gd.y=Hd.y),t.data.enabledTranslation[2]===!1&&(Gd.z=Hd.z);let d=Uoe(Hd,Gd,t.wasOutside?0:t.data.maxDelta);if(t.currentDampingFactor>1){let u=cm.subVectors(d,Hd).divideScalar(t.currentDampingFactor);Hd.add(u),i&&LL(t.object,Hd),t.paused=u.length()<Noe}else LL(t.object,d),t.paused=!0;(c=t.object)==null||c.dispatchEvent({type:"beginEvent",eventName:"Follow"}),t.object.dispatchEvent(joe)}},L0=new N,r2=new N,B0=new Ze,um=new Ut,au=new Ut,F0=new N,N0=new N,Mh=new N,Wd=new N,eT=new Ps,Goe=1e-6,Woe={type:"requestRender"},qoe={type:"changeRotation"},BL=function(){let t=new Ze;return function(i,r){i.parent!==null?t.multiplyMatrices(i.parent.matrixWorld,i.hiddenMatrix):t.copy(i.hiddenMatrix),r.premultiply(EL(t).invert()),i.rotation.setFromRotationMatrix(r),i.updateMatrix(),i instanceof ds&&Bd(i.parent)&&i.invalidateDownstreamBooleanData(!0)}}(),$oe=class{constructor(t,i,r){this.object=i,this.paused=!1,this.currentDampingFactor=1,this.isReset=!1,this.worldQuaternion0=new Ut,this.timeoutId=null,this.delayFinished=!0,this.wasOutside=!1,this.data=Z(Z(Z({},aE.defaultData),t),t.resetOnPointerLeave===void 0&&{resetOnPointerLeave:!1}),t.target===void 0||t.target==="cursor"||(this.target=r.find(t.target)),this.data.dampingFactor&&(this.currentDampingFactor=this.data.dampingFactor),this.object.getWorldQuaternion(this.worldQuaternion0),this.resetDampingFactor=80/this.data.resetSpeed+1}},Zoe=class extends Yo{constructor(t){super(t),this.events=[],this.pairOfEventListeners=[],this.pairOfUserEventListeners=[],this.onMouseMove=r=>{if(!(Jt.length>1)){this._lastMouseEvent=r,this.eventContext.updateRaycaster(r);for(let s of this.events)s.target===void 0&&this.updateSingleEvent(s)}},this.onMouseEnter=r=>{for(let s of this.events)s.target===void 0&&(s.isReset=!1,s.currentDampingFactor=s.data.dampingFactor)},this.onMouseLeave=r=>{for(let s of this.events)s.target===void 0&&(s.data.resetOnPointerLeave&&(s.isReset=!0,s.currentDampingFactor=s.resetDampingFactor),this.updateSingleEvent(s))},this.onScroll=r=>{if(this._lastMouseEvent){let s=new PointerEvent("pointermove",{clientX:this._lastMouseEvent.clientX,clientY:this._lastMouseEvent.clientY,bubbles:!0,cancelable:!0,view:window});this.eventContext.eventElement.dispatchEvent(s)}},this.onTargetChange=r=>()=>{this.updateSingleEvent(r)},this.createUserEventListener=r=>({eventName:s,target:l})=>{if(!s||!l)return;let d=R0(s);d&&d==="LookAt"&&this.updateSingleEvent(r)};let{page:i}=this.eventContext;i.traverseEntity(r=>{var l,d;let s=(l=r.data)==null?void 0:l.events.find(c=>c.data.type==="LookAt"&&!c.data.disabled);s&&(!i.data.globalPhysics.usePhysics||((d=r.dataPatched.physics)==null?void 0:d.rigidBody)!=="dynamic")&&this.events.push(new $oe(s.data,r,i))})}connect(){if(!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Os&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseMove)),this.domEventsNeeded.add("pointermove"),i.addEventListener("pointermove",this.onMouseMove),this.eventContext.useWindowEvents?i.addEventListener("scroll",this.onScroll):(t.addEventListener("pointerenter",this.onMouseEnter),t.addEventListener("pointerleave",this.onMouseLeave));for(let r of this.events){if(r.target!==void 0){let d=this.onTargetChange(r),c=r.target;this.pairOfEventListeners.push([c,d]),c.addEventListener("requestRender",d)}let s=this.createUserEventListener(r),l=r.object;this.pairOfUserEventListeners.push([l,s]),l.addEventListener("userEvent",s)}}disconnect(){if(!this.events.length)return;let{domElement:t,eventElement:i}=this.eventContext;this.domEventsNeeded.clear(),Os&&t.removeEventListener("pointerdown",this.onMouseMove),i.removeEventListener("pointermove",this.onMouseMove),t.removeEventListener("pointerenter",this.onMouseEnter),t.removeEventListener("pointerleave",this.onMouseLeave),i.removeEventListener("scroll",this.onScroll);for(let[r,s]of this.pairOfEventListeners)r.removeEventListener("requestRender",s);for(let[r,s]of this.pairOfUserEventListeners)r.removeEventListener("userEvent",s);for(let r of this.events)r.paused=!0,r.isReset=!1}onAnimationFrameDamping(){for(let t of this.events)t.paused||this.updateSingleEvent(t)}updateSingleEvent(t){var g;let{tilt:i,axis:r,distance:s,plane:l,limitDistance:d,enabledRotation:c,limitDistanceEnabled:u}=t.data,{getCamera:h,raycaster:f}=this.eventContext,{object:m,target:p}=t;if(m.getWorldPosition(F0),!t.isReset)if(t.target)t.target.getWorldPosition(N0);else{if(l==="custom"?(h().getWorldDirection(r2),r2.negate(),eT.setFromNormalAndCoplanarPoint(r2,F0)):(l==="xy"?L0.set(0,0,1):l==="xz"?L0.set(0,1,0):l==="yz"&&L0.set(1,0,0),eT.setFromNormalAndCoplanarPoint(L0,F0)),!f.ray.intersectPlane(eT,N0))return;s>0&&(l==="custom"||l===void 0)&&N0.addScaledVector(r2,s)}if(t.isReset||(p?i==="target"?Mh.copy(p.up).applyMatrix4(B0.extractRotation(p.matrixWorld)).normalize():c.some(v=>v===!1)?(r==="x"?(Wd.set(0,0,1),c[2]===!1&&Wd.set(0,1,0)):r==="y"?(Wd.set(1,0,0),c[0]===!1&&Wd.set(0,0,1)):(Wd.set(0,1,0),c[1]===!1&&Wd.set(1,0,0)),Mh.copy(Wd).applyQuaternion(t.worldQuaternion0).normalize()):Mh.set(0,1,0):l==="custom"?Mh.set(0,1,0):Mh.copy(L0)),t.isReset)au.copy(t.worldQuaternion0);else if(F0.distanceTo(N0)>d&&u&&p)if(t.data.snapDelay&&(t.delayFinished=!1,typeof window<"u"&&t.timeoutId!==null&&(window.clearTimeout(t.timeoutId),t.timeoutId=null)),t.wasOutside=!0,t.data.resetAfterDistanceLimit)au.copy(t.worldQuaternion0),t.currentDampingFactor=t.resetDampingFactor;else return;else{if(t.wasOutside&&(t.data.snapDelay&&typeof window<"u"&&(t.timeoutId=window.setTimeout(()=>{t.delayFinished=!0,t.paused=!1,this.updateSingleEvent(t)},t.data.snapDelay*1e3)),t.currentDampingFactor=t.data.dampingFactor,t.wasOutside=!1),t.delayFinished===!1)return;Yoe(B0,N0,F0,Mh,r,Wd),au.setFromRotationMatrix(B0),um.setFromUnitVectors(Wd.applyQuaternion(au),Mh),c.some(v=>v===!1)&&i!=="target"&&au.premultiply(um).normalize()}t.currentDampingFactor>1?(m.updateWorldMatrix(!0,!1),um.setFromRotationMatrix(EL(m.matrixWorld)),um.slerp(au,1/t.currentDampingFactor),BL(m,B0.makeRotationFromQuaternion(um)),t.paused=8*(1-um.dot(au))<Goe):(BL(m,B0.makeRotationFromQuaternion(au)),t.paused=!0),(g=t.object)==null||g.dispatchEvent({type:"beginEvent",eventName:"LookAt"}),m.dispatchEvent(Woe),m.dispatchEvent(qoe)}},ho=new N,Rr=new N,dr=new N;function Yoe(t,i,r,s,l,d){let c=t.elements;dr.subVectors(i,r),dr.lengthSq()===0&&(dr.z=1),dr.normalize(),Rr.crossVectors(s,dr),Rr.lengthSq()===0&&(Math.abs(s.z)===1?dr.x+=1e-4:dr.z+=1e-4,dr.normalize(),Rr.crossVectors(s,dr)),Rr.normalize(),ho.crossVectors(dr,Rr),l==="x"?d.z===1?[Rr,ho,dr]=[dr,Rr,ho]:(Rr.negate(),[Rr,dr]=[dr,Rr]):l==="y"?d.x===1?[Rr,ho,dr]=[ho,dr,Rr]:(Rr.negate(),[ho,dr]=[dr,ho]):d.x===1&&(Rr.negate(),[Rr,ho]=[ho,Rr]),c[0]=Rr.x,c[4]=ho.x,c[8]=dr.x,c[1]=Rr.y,c[5]=ho.y,c[9]=dr.y,c[2]=Rr.z,c[6]=ho.z,c[10]=dr.z}var Xoe=class{constructor(t,i,r,s,l,d){this.id=t,this.data=i,this.object=r,this.entered=!1,this.actions=Ya(i,i.actions,s,l,d,r)}disconnect(){qr(this.actions)}dispatchEnter(){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.entered||(this.entered=!0,this.actions.Transition.forEach(t=>t.playFromCurrent()),this.actions.Animation.forEach(t=>t.play()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.SwitchCamera.forEach(t=>t.playFromCurrent()),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()))}dispatchLeave(){this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.entered&&(this.entered=!1,this.actions.Transition.forEach(t=>t.reverseFromCurrent()),this.actions.SwitchCamera.forEach(t=>t.reverseFromCurrent()))}dispatchUserEvent(t){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())}),t?(this.actions.Transition.forEach(i=>i.reverseFromCurrent()),this.actions.Animation.forEach(i=>i.reverseFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.reverseFromCurrent())):(this.actions.Transition.forEach(i=>i.playFromCurrent()),this.actions.Animation.forEach(i=>i.playFromCurrent()),this.actions.Create.forEach(i=>i.dispatch()),this.actions.Destroy.forEach(i=>i.dispatch()),this.actions.SwitchCamera.forEach(i=>i.playFromCurrent())),this.actions.SceneTransition.forEach(i=>i.dispatch()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}},Koe=class extends Yo{constructor(t,i){super(t),this.eventsPerObjects={},this.objects=[],this._prevObjects=[],this.onMouseDown=l=>{Jt.length>1||(this.eventContext.updateRaycaster(l),this.handleMouseHoverEvent())},this.onMouseUp=l=>{Jt.length>1||this.handleMouseHoverEvent(!0)},this.onMouseMove=l=>{Jt.length>1||(this.eventContext.updateRaycaster(l),this.handleMouseHoverEvent())},this.onUserEvent=({eventName:l,target:d,reverse:c})=>{var h;if(!l||!d)return;let u=R0(l);u&&u==="MouseHover"&&(d.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(h=this.eventsPerObjects[d.uuid])==null||h.forEach(f=>f.dispatchUserEvent(c)))};let{page:r,sharedAssets:s}=this.eventContext;r.traverseEntity(l=>{var d,c;if(!(!l.visible||!((d=l.data)!=null&&d.events.length))){for(let{id:u,data:h}of l.data.events)if(!h.disabled&&h.type==="MouseHover")try{let f=new Xoe(u,h,l,r,s,i);this.eventsPerObjects[l.uuid]?this.eventsPerObjects[l.uuid].push(f):this.eventsPerObjects[l.uuid]=[f]}catch(f){}(c=this.eventsPerObjects[l.uuid])!=null&&c.length&&this.objects.push(l)}})}connect(){if(!this.objects.length)return;let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),Os&&(this.domEventsNeeded.add("pointerdown"),t.addEventListener("pointerdown",this.onMouseDown),this.domEventsNeeded.add("pointerup"),t.addEventListener("pointerup",this.onMouseUp)),this.domEventsNeeded.add("pointermove"),t.addEventListener("pointermove",this.onMouseMove),this.objects.forEach(i=>{i.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if(!this.objects.length)return;let{domElement:t}=this.eventContext;this.domEventsNeeded.clear(),Os&&(t.removeEventListener("pointerdown",this.onMouseDown),t.removeEventListener("pointerup",this.onMouseUp)),t.removeEventListener("pointermove",this.onMouseMove),Object.values(this.eventsPerObjects).forEach(i=>{i.forEach(r=>{r.disconnect()})}),this.objects.forEach(i=>{i.removeEventListener("userEvent",this.onUserEvent)})}handleMouseHoverEvent(t=!1){let i=[];if(!t){let{stopRaycast:r,raycaster:s,page:l}=this.eventContext;if(r){let d=i2(s,l,this.objects);i=Z4(d)}else this.objects.forEach(d=>{n2(s,d)&&i.push(d)})}this._prevObjects.length&&this._prevObjects.forEach(r=>{var s;i.includes(r)||(r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(s=this.eventsPerObjects[r.uuid])==null||s.forEach(l=>l.dispatchLeave()))}),i.length&&i.forEach(r=>{var s;r.dispatchEvent({type:"beginEvent",eventName:"MouseHover"}),(s=this.eventsPerObjects[r.uuid])==null||s.forEach(l=>l.dispatchEnter())}),this._prevObjects=i}},Qoe=class{constructor(t,i,r,s,l,d){this.id=t,this.data=i,this.object=r,this.scrollCounter=0,this.actions=Ya(i,i.actions,s,l,d,r)}connect(){this.scrollCounter=0}disconnect(){qr(this.actions)}dispatch(t){this.actions.Transition.forEach(s=>{s.object.currentTransitionEvent!==this&&(s.object.currentTransitionEvent=this,s.init())});let i=t>0?1:-1;this.scrollCounter+=i,this.scrollCounter=Math.min(Math.max(this.scrollCounter,0),this.data.steps);let r=this.scrollCounter/this.data.steps;this.actions.Transition.forEach(s=>s.seek(r)),this.actions.Animation.forEach(s=>s.seek(i)),this.actions.Create.forEach(s=>s.dispatchThrottled()),this.actions.SetVariable.forEach(s=>s.checkConditions()),this.actions.SetVariable.forEach(s=>s.dispatch()),this.actions.DynamicVariablePlay.forEach(s=>s.dispatch())}dispatchUserEvent(t){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())}),t?(this.actions.Transition.forEach(i=>i.reverseFromCurrent()),this.actions.Animation.forEach(i=>i.reverseFromCurrent())):(this.actions.Transition.forEach(i=>{i.playFromCurrent()}),this.actions.Animation.forEach(i=>{i.playFromCurrent()})),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}},Joe=class{constructor(t,i,r,s,l,d,c){this.id=t,this.data=i,this.object=r,this.domElement=d,this.eventManager=c,this.scrollStart=0,this.scrollEnd=0,this.actions=Ya(i,i.actions,s,l,c,r)}computeScrollBounds(){var c,u;let t=this.domElement.getBoundingClientRect(),i=document.body,r=document.documentElement,s=window.pageYOffset||r.scrollTop||i.scrollTop,l=r.clientTop||i.clientTop||0,d=Math.round(t.top+s-l);if(this.data.startFrom==="enter"){let h=window.innerHeight,f=t.height,m=this.data.enterAnchor,p=m==="top"?h:m==="bottom"?h-f:h-f*.5;this.scrollStart=d-p}else this.scrollStart=0;this.scrollStart+=(c=this.data.startOffset)!=null?c:0,this.scrollEnd=this.scrollStart+((u=this.data.endAfter)!=null?u:400),this.box=t,this.computeScroll({x:window.scrollX,y:window.scrollY})}connect(){this.computeScrollBounds()}disconnect(){qr(this.actions)}handleResize(){this.computeScrollBounds()}get isInvalidBox(){return this.box===void 0||this.box.width===0&&this.box.height===0&&this.box.top===0&&this.box.bottom===0}computeScroll({x:t,y:i}){this.actions.Transition.forEach(l=>{l.object.currentTransitionEvent!==this&&(l.object.currentTransitionEvent=this,l.init())});let r=this.scrollEnd-this.scrollStart,s=Math.min(1,Math.max(0,(i-this.scrollStart)/r));this.actions.Transition.forEach(l=>l.seek(s)),this.actions.Animation.forEach(l=>l.seek(s)),this.actions.Create.forEach(l=>l.dispatchThrottled()),this.actions.SetVariable.forEach(l=>l.checkConditions()),this.actions.SetVariable.forEach(l=>l.dispatch()),this.actions.DynamicVariablePlay.forEach(l=>l.dispatch())}dispatch(t){this.isInvalidBox&&this.computeScrollBounds(),this.computeScroll(t)}dispatchUserEvent(t){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())}),t?(this.actions.Transition.forEach(i=>i.reverseFromCurrent()),this.actions.Animation.forEach(i=>i.reverseFromCurrent())):(this.actions.Transition.forEach(i=>{i.playFromCurrent()}),this.actions.Animation.forEach(i=>{i.playFromCurrent()})),this.actions.Create.forEach(i=>i.dispatchThrottled()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch())}},ele=class extends Yo{constructor(t,i){super(t),this.wheelEventsPerObject=new Map,this.scrollEventsPerObject=new Map,this.isInview=!0,this.handleResize=()=>{[...this.scrollEventsPerObject.entries()].forEach(([c,u])=>{u.forEach(h=>h.handleResize())})},this.onScroll=c=>{if(!this.isInview)return;let u={y:window.scrollY,x:window.scrollX};[...this.scrollEventsPerObject.entries()].forEach(([h,f])=>{h.dispatchEvent({type:"beginEvent",eventName:"Scroll",scroll:u}),f.forEach(m=>m.dispatch(u))})},this.onWheel=c=>{!this.isInview||c.ctrlKey||[...this.wheelEventsPerObject.entries()].forEach(([u,h])=>{u.dispatchEvent({type:"beginEvent",eventName:"Scroll",deltaY:c.deltaY}),h.forEach(f=>f.dispatch(c.deltaY))})},this.onUserEvent=({eventName:c,target:u,reverse:h})=>{var m;if(!c||!u)return;let f=R0(c);f&&f==="Scroll"&&(u.dispatchEvent({type:"beginEvent",eventName:"Scroll"}),(m=this.wheelEventsPerObject.get(u))==null||m.forEach(p=>{p.dispatchUserEvent(h)}))};let{page:r,sharedAssets:s,domElement:l,isExport:d}=this.eventContext;r.traverseEntity(c=>{var u,h,f;if((u=c.data)!=null&&u.events.length){for(let{id:m,data:p}of c.data.events)if(!p.disabled&&p.type==="Scroll")if(p.trigger==="load"||!d){let g=new Qoe(m,p,c,r,s,i);this.wheelEventsPerObject.has(c)?(h=this.wheelEventsPerObject.get(c))==null||h.push(g):this.wheelEventsPerObject.set(c,[g])}else{let g=new Joe(m,p,c,r,s,l,i);this.scrollEventsPerObject.has(c)?(f=this.scrollEventsPerObject.get(c))==null||f.push(g):this.scrollEventsPerObject.set(c,[g])}}}),this.intersectionObserver=new IntersectionObserver(c=>{let u=c[0];u&&(this.isInview=u.isIntersecting)},{root:null})}connect(){this.intersectionObserver.observe(this.eventContext.domElement),[...this.wheelEventsPerObject.entries()].forEach(([t,i])=>{i.forEach(r=>r.connect()),t.addEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([t,i])=>{i.forEach(r=>r.connect()),t.addEventListener("userEvent",this.onUserEvent)}),[...this.wheelEventsPerObject.values()].some(t=>t.length)&&(this.domEventsNeeded.add("wheel"),window.addEventListener("wheel",this.onWheel)),[...this.scrollEventsPerObject.values()].some(t=>t.length)&&(this.domEventsNeeded.add("scroll"),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.handleResize))}disconnect(){window.removeEventListener("wheel",this.onWheel),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.handleResize),this.intersectionObserver.unobserve(this.eventContext.domElement),this.domEventsNeeded.clear(),[...this.wheelEventsPerObject.entries()].forEach(([t,i])=>{i.forEach(r=>r.disconnect()),t.removeEventListener("userEvent",this.onUserEvent)}),[...this.scrollEventsPerObject.entries()].forEach(([t,i])=>{i.forEach(r=>r.disconnect()),t.removeEventListener("userEvent",this.onUserEvent)})}},tle=class{constructor(t,i,r,s,l,d){this.id=t,this.data=i,this.object=r,this.actions=Ya(i,i.actions,s,l,d,r)}disconnect(){qr(this.actions)}dispatch(){this.actions.Transition.forEach(t=>{t.play()}),this.actions.Animation.forEach(t=>{t.play()}),this.actions.SwitchCamera.forEach(t=>{t.play()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()),this.actions.Create.forEach(t=>{t.dispatchFromStart()}),this.actions.Destroy.forEach(t=>{t.dispatchFromStart()})}dispatchAfter(t){this.actions.Audio.forEach(i=>{var r;((r=i.interaction.data.triggerAfter)!=null?r:"any")===t&&(i.interaction instanceof Sh?i.interaction.audioPlayer.play():i.interaction instanceof E4&&i.interaction.dispatch())}),this.actions.Video.forEach(i=>{var s;let r=(s=i.interaction.data.triggerAfter)!=null?s:"autoplay";r===t&&(i.interaction instanceof om?i.interaction.play(r==="autoplay"):i.interaction instanceof H4&&i.interaction.dispatch())})}dispatchUserEvent(t){this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this,i.init())}),t?(this.actions.Transition.forEach(i=>i.reverseFromCurrent()),this.actions.Animation.forEach(i=>i.reverseFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.reverseFromCurrent())):(this.actions.Transition.forEach(i=>i.playFromCurrent()),this.actions.Animation.forEach(i=>i.playFromCurrent()),this.actions.SwitchCamera.forEach(i=>i.playFromCurrent())),this.actions.SceneTransition.forEach(i=>i.dispatch()),this.actions.Reset.forEach(i=>i.dispatch()),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch()),this.actions.Create.forEach(i=>{i.dispatch()}),this.actions.Destroy.forEach(i=>{i.dispatch()}),this.actions.Audio.forEach(i=>{i.interaction instanceof Sh?i.interaction.audioPlayer.play():i.interaction instanceof E4&&i.interaction.dispatch()}),this.actions.Video.forEach(i=>{i.interaction instanceof om?i.interaction.play():i.interaction instanceof H4&&i.interaction.dispatch()})}},ile=class extends Yo{constructor(t,i){super(t),this.eventManager=i,this.eventsPerObject=new Map,this.eventsAfterPerObject=new Map,this.onMouseDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(l=>{l.dispatchAfter("mouseDown")})})},this.onKeyDown=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(l=>{l.dispatchAfter("keyDown")})})},this.onAny=()=>{let{domElement:r,isExport:s}=this.eventContext;(s?document:r).removeEventListener("pointerdown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([l,d])=>{l.dispatchEvent({type:"beginEvent",eventName:"Start"}),d.forEach(c=>{c.dispatchAfter("any")})})},this.onSceneTransitionAudioVideoPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(l=>{l.actions.Audio.forEach(d=>{d.interaction instanceof Sh&&d.interaction.audioPlayer.play()}),l.actions.Video.forEach(d=>{var u;let c=(u=d.interaction.data.triggerAfter)!=null?u:"autoplay";d.interaction instanceof om&&d.interaction.play(c==="autoplay")})})})},this.onPlay=()=>{[...this.eventsAfterPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(l=>{l.dispatchAfter("autoplay")})})},this.onUserEvent=({eventName:r,target:s,reverse:l})=>{var c,u;if(!r||!s)return;let d=R0(r);d&&d==="Start"&&(s.dispatchEvent({type:"beginEvent",eventName:"Start"}),(c=this.eventsPerObject.get(s))==null||c.forEach(h=>{h.dispatchUserEvent(l)}),(u=this.eventsAfterPerObject.get(s))==null||u.forEach(h=>{h.dispatchUserEvent(l)}))}}connect(){let{sharedAssets:t,page:i}=this.eventContext;if(i.traverseEntity(r=>{var s,l,d,c;if((s=r.data)!=null&&s.events.length)for(let{id:u,data:h}of r.data.events){if(h.disabled||h.type!=="Start")continue;let f=new tle(u,h,r,i,t,this.eventManager);(f.actions.Transition.length||f.actions.Animation.length||f.actions.SwitchCamera.length||f.actions.Create.length||f.actions.Destroy.length||f.actions.SceneTransition.length||f.actions.Reset.length||f.actions.SetVariable.length||f.actions.DynamicVariablePlay.length)&&(this.eventsPerObject.has(r)?(l=this.eventsPerObject.get(r))==null||l.push(f):this.eventsPerObject.set(r,[f])),f.actions.Audio.length&&(this.eventsAfterPerObject.has(r)?(d=this.eventsAfterPerObject.get(r))==null||d.push(f):this.eventsAfterPerObject.set(r,[f])),f.actions.Video.length&&(this.hasVideoAction=!0,this.eventsAfterPerObject.has(r)?(c=this.eventsAfterPerObject.get(r))==null||c.push(f):this.eventsAfterPerObject.set(r,[f]))}}),[...this.eventsAfterPerObject.values()].some(r=>r.length)){if(this.eventManager.activateCount===0){let{domElement:r,isExport:s}=this.eventContext,l=s?document:r;l.addEventListener("pointerdown",this.onMouseDown,{once:!0}),l.addEventListener("mousedown",this.onMouseDown,{once:!0}),document.addEventListener("keydown",this.onKeyDown,{once:!0}),l.addEventListener("pointerdown",this.onAny),l.addEventListener("mousedown",this.onAny),document.addEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([d,c])=>{d.addEventListener("userEvent",this.onUserEvent)})}else this.onSceneTransitionAudioVideoPlay();this.onPlay()}[...this.eventsPerObject.entries()].forEach(([r,s])=>{r.dispatchEvent({type:"beginEvent",eventName:"Start"}),s.forEach(l=>l.dispatch()),r.addEventListener("userEvent",this.onUserEvent)})}disconnect(){if([...this.eventsAfterPerObject.values()].some(t=>t.length)){let{domElement:t,isExport:i}=this.eventContext,r=i?document:t;r.removeEventListener("pointerdown",this.onMouseDown),r.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keydown",this.onKeyDown),r.removeEventListener("pointerdown",this.onAny),r.removeEventListener("mousedown",this.onAny),document.removeEventListener("keydown",this.onAny),[...this.eventsAfterPerObject.entries()].forEach(([s,l])=>{s.removeEventListener("userEvent",this.onUserEvent),l.forEach(d=>d.disconnect())})}[...this.eventsPerObject.entries()].forEach(([t,i])=>{t.removeEventListener("userEvent",this.onUserEvent),i.forEach(r=>r.disconnect())}),this.eventsPerObject.clear(),this.eventsAfterPerObject.clear()}},nle=class{constructor(t,i,r,s,l,d){this.id=t,this.data=i,this.object=r,this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Ya(i,i.actions,s,l,d,r),this.target=i.target,this.useToggle=i.runMode==="Toggle"}disconnect(){qr(this.actions)}dispatch(t){this.disabled||(this.actions.Transition.forEach(i=>{i.object.currentTransitionEvent!==this?(i.object.currentTransitionEvent=this,i.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(i)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Collision"}),this.useToggle?(this.actions.Transition.forEach(i=>{i.toggle()}),this.actions.Animation.forEach(i=>{i.toggle()})):(this.actions.Transition.forEach(i=>{this.alreadyPlayedNonTogglingActions.has(i)===!1&&i.play()}),this.actions.Animation.forEach(i=>{i.play()})),this.actions.Reset.forEach(i=>{i.dispatch()}),this.actions.Link.forEach(i=>{i.dispatch()}),this.actions.Reset.forEach(i=>{i.dispatch()}),this.actions.Create.forEach(i=>{i.dispatch()}),this.actions.Destroy.forEach(i=>{i.dispatch(t!=null?t:!1)}),this.actions.SetVariable.forEach(i=>i.checkConditions()),this.actions.SetVariable.forEach(i=>i.dispatch()),this.actions.DynamicVariablePlay.forEach(i=>i.dispatch()),this.actions.Audio.forEach(i=>{i.dispatchBasic()}),this.actions.Video.forEach(i=>{i.dispatchBasic()}))}},rle=class extends Yo{constructor(t,i,r,s,l){super(t),this.sharedVariables=i,this.eventManager=r,this.needsMouse=s,this.needsRaycast=l,this.dynamicVars=[],this.variablesToWatch=[],this.prevMouseProperty=null,this.prevRaycastProperty=null,this.pauseTime=0,this.events=[],this.onFrame=d=>{var p,g;this.rafId=window.requestAnimationFrame(this.onFrame);let c=new Date,u=[],h=[];for(let v=0;v<this.propertiesToWatch.length;v++){let{objectId:w,property:x,prevValue:_}=this.propertiesToWatch[v],k=this.eventContext.scene.find(w),A=oE.propertyPaths[x];if(A[0]==="width"||A[0]==="height"||A[0]==="depth")k=k.geometry.userData.parameters[A[0]];else for(let C=0;C<A.length;C++)k=k[A[C]];_===null?this.propertiesToWatch[v].prevValue=k instanceof N?k.clone():k:(k instanceof N?!k.equals(_):_!==k)&&(h.push({objId:w,property:x}),k instanceof N?this.propertiesToWatch[v].prevValue.copy(k):this.propertiesToWatch[v].prevValue=k)}for(let v=0;v<this.variablesToWatch.length;v++){let{id:w,prevValue:x}=this.variablesToWatch[v],_=this.shared.getVariable(w);_!==x&&(u.push(w),this.variablesToWatch[v].prevValue=_)}for(let v=0;v<this.dynamicVars.length;v++){let{id:w,expectedTime:x,last:_,data:k,timerSeconds:A,startValue:C}=this.dynamicVars[v],M=1e3;if((k.dynamicVariableType==="timer"||k.dynamicVariableType==="stopwatch")&&k.format==="number3decimal"?M=1:k.dynamicVariableType==="counter"?M=k.updateInterval:k.dynamicVariableType==="random"&&(M=k.isStatic?1/0:k.updateInterval),x===-1){this.dynamicVars[v].last=d,this.dynamicVars[v].expectedTime=d+M;continue}if(!((this.shared.getDynamicVariablePlayState(w)==="Stopped"||this.shared.getDynamicVariablePlayState(w)==="Restarted")&&(this.dynamicVars[v].last=d,this.dynamicVars[v].expectedTime=d+M,k.dynamicVariableType==="counter"&&this.shared.getVariable(w)!==C&&(this.shared.updateVariable(w,C),this.eventManager.requestRender()),(k.dynamicVariableType==="timer"||k.dynamicVariableType==="stopwatch")&&this.dynamicVars[v].timerSeconds!==C&&(this.dynamicVars[v].timerSeconds=C,this.shared.updateVariable(w,Fo.getFormattedTimerTime(C,k)),this.eventManager.requestRender()),this.shared.getDynamicVariablePlayState(w)==="Restarted"&&this.shared.setDynamicVariablePlayState(w,"Playing"),this.shared.getDynamicVariablePlayState(w)==="Stopped"))){if(this.shared.getDynamicVariablePlayState(w)==="Paused"){this.dynamicVars[v].deltaToExpectedTime===void 0&&(this.dynamicVars[v].deltaToExpectedTime=Math.max(this.dynamicVars[v].expectedTime-d,0)),this.dynamicVars[v].last=d-(M-this.dynamicVars[v].deltaToExpectedTime),this.dynamicVars[v].expectedTime=d+this.dynamicVars[v].deltaToExpectedTime;continue}else this.dynamicVars[v].deltaToExpectedTime=void 0;if(d>=x)if(this.dynamicVars[v].last=d,this.dynamicVars[v].expectedTime+=M,k.dynamicVariableType==="random"){let D=k.min+Math.random()*(k.max-k.min),P=k.decimals;D=Math.round(D*Math.pow(10,P))/Math.pow(10,P),this.shared.updateVariable(w,D),u.push(w),this.eventManager.requestRender()}else if(k.dynamicVariableType==="counter"){if(k.increment===0)continue;let D=this.shared.getVariable(w),P=(p=this.shared.getDynamicVariableToggleIsForward(w))!=null?p:!0,T=this.shared.getVariable(w)+k.increment*(P?1:-1);k.hasEnd&&(T=k.increment>0?fe.clamp(T,C,k.endValue):fe.clamp(T,k.endValue,C),T===C&&this.shared.setDynamicVariableToggleIsForward(w,void 0),k.repeat?T===k.endValue&&(T=C):(T===C||T===k.endValue)&&this.shared.setDynamicVariablePlayState(w,"Paused")),T!==D&&(u.push(w),this.shared.updateVariable(w,T),this.eventManager.requestRender())}else if(k.dynamicVariableType==="time")this.shared.updateVariable(w,t9(c,k)),u.push(w),this.eventManager.requestRender();else{let D=zs.isTextValue(k.endValue)?FL(k.endValue.textValue):k.endValue,P=(g=this.shared.getDynamicVariableToggleIsForward(w))!=null?g:!0,T=A+(d-_)/1e3*(k.dynamicVariableType==="timer"?-1:1)*(P?1:-1);T=Math.max(T,0),k.hasEnd&&(T=k.dynamicVariableType==="stopwatch"?fe.clamp(T,C,D):fe.clamp(T,D,C),T===C&&this.shared.setDynamicVariableToggleIsForward(w,void 0),k.repeat?Math.abs(T-D)<(k.format==="number3decimal"?1e-4:.1)&&(T=C):(Math.abs(T-C)<(k.format==="number3decimal"?1e-4:.1)||Math.abs(T-D)<(k.format==="number3decimal"?1e-4:.1))&&this.shared.setDynamicVariablePlayState(w,"Paused")),T!==A&&(u.push(w),this.dynamicVars[v].timerSeconds=T,this.shared.updateVariable(w,Fo.getFormattedTimerTime(T,k)),this.eventManager.requestRender())}}}this.needsMouse&&this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,this.events.forEach(v=>{v.data.variableId==="mouseProperty"&&(v.dispatch(),this.eventManager.requestRender())}));let f=!1;this.shared.mouseProperty!==this.prevMouseProperty&&(this.prevMouseProperty=this.shared.mouseProperty,f=!0);let m=!1;this.shared.raycastProperty!==this.prevRaycastProperty&&(this.prevRaycastProperty=this.shared.raycastProperty,m=!0),this.events.forEach(v=>{(u.includes(v.data.variableId)||h.find(w=>w.objId===v.data.objectId&&w.property===v.data.property)||v.data.variableId==="mouseProperty"&&f||v.data.variableId==="raycastProperty"&&m)&&(v.dispatch(),this.eventManager.requestRender())})},this.onBlur=()=>{this.pause()},this.onFocus=()=>{this.resume()},t.page.traverseEntity(d=>{var c;(c=d.data)==null||c.events.filter(u=>u.data.type==="VariableChange"&&!u.data.disabled).forEach(u=>{this.events.push(new ale(d.uuid,u.data,d,t.page,t.sharedAssets,r))})}),this.propertiesToWatch=this.events.filter(d=>d.data.variableId==="objectProperty"&&d.data.objectId!==null).map(d=>({objectId:d.data.objectId,property:d.data.property,prevValue:null})),this.shared=t.sharedAssets,this.sharedVariables.forEach(({id:d,data:c})=>{if(!("dynamicVariableType"in c)){this.events.find(h=>h.data.variableId===d)&&this.variablesToWatch.push({id:d,prevValue:this.shared.getVariable(d)});return}let u;if(c.dynamicVariableType==="timer"||c.dynamicVariableType==="stopwatch"){let h;if(zs.isTextValue(c.value)&&Array.isArray(c.value.textValue)){let f=c.value.textValue;f.length===3?h=f[2]+f[1]*60+f[0]*3600:h=f[1]+f[0]*60}else h=c.value;u=h,this.dynamicVars.push({id:d,last:-1,expectedTime:-1,data:c,timerSeconds:h,startValue:u})}else c.dynamicVariableType==="time"&&this.shared.updateVariable(d,t9(new Date,c)),c.dynamicVariableType==="counter"&&(u=zs.isTextValue(c.value)?FL(c.value.textValue):c.value),this.dynamicVars.push({id:d,last:-1,expectedTime:-1,data:c,startValue:u})})}pause(){this.pauseTime=Date.now()}resume(){let t=Date.now()-this.pauseTime;for(let i=0;i<this.dynamicVars.length;i++)this.dynamicVars[i].last+=t,this.dynamicVars[i].expectedTime+=t}connect(){this.rafId=window.requestAnimationFrame(this.onFrame),window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus)}disconnect(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=void 0),this.events.forEach(t=>t.dispose())}},ale=class{constructor(t,i,r,s,l,d){this.id=t,this.data=i,this.object=r,this.actions=Ya(i,i.actions,s,l,d,r)}dispatch(){let t=this.actions;t.Audio.forEach(i=>i.dispatchConditional()),t.Video.forEach(i=>i.dispatchConditional()),t.Create.forEach(i=>i.dispatch()),t.Destroy.forEach(i=>i.dispatch()),t.Reset.forEach(i=>i.dispatch()),t.Transition.forEach(i=>{i.object.currentTransitionEvent!==this&&(i.object.currentTransitionEvent=this),i.init()}),t.Transition.forEach(i=>i.play()),t.Animation.forEach(i=>i.play()),t.SwitchCamera.forEach(i=>i.play()),t.SceneTransition.forEach(i=>i.dispatch()),t.SetVariable.forEach(i=>i.checkConditions()),t.SetVariable.forEach(i=>i.dispatch()),t.DynamicVariablePlay.forEach(i=>i.dispatch())}dispose(){qr(this.actions)}};function FL(t){return t.length===3?t[2]+t[1]*60+t[0]*3600:t[1]+t[0]*60}var sle="https://unpkg.com/@splinetool/runtime@0.9.526/build/",ole="https://unpkg.com/@splinetool/navmesh-wasm@0.9.526/build/",lle=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import('${sle}' + 'navmesh.js'),
		fetch('${ole}' + 'navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,dle=`
(async function() {
	const [wasmImport, wasmBinary] = await Promise.all([
		import(self.location.origin + '/_libraries/navmesh.js'),
		fetch(self.location.origin + '/_libraries/navmesh.wasm').then((res) => res.arrayBuffer()),
	]);
	const wasmModule = wasmImport.default;
	self.module = await wasmModule({ wasmBinary });
	postMessage('ready');
})();
`,cle=`

onmessage = function(messageEvent) {
	const meshData = messageEvent.data;
	const positions = meshData[0];
	const offset = meshData[1];
	const indices = meshData[2];
	const indicesLength = meshData[3];
	const parameters = meshData[4];

	const module = self.module;
	const rc = new module.rcConfig();
	rc.cs = parameters.cs;
	rc.ch = parameters.ch;
	rc.borderSize = parameters.borderSize ? parameters.borderSize : 0;
	rc.tileSize = parameters.tileSize ? parameters.tileSize : 0;
	rc.walkableSlopeAngle = parameters.walkableSlopeAngle;
	rc.walkableHeight = parameters.walkableHeight;
	rc.walkableClimb = parameters.walkableClimb;
	rc.walkableRadius = parameters.walkableRadius;
	rc.maxEdgeLen = parameters.maxEdgeLen;
	rc.maxSimplificationError = parameters.maxSimplificationError;
	rc.minRegionArea = parameters.minRegionArea;
	rc.mergeRegionArea = parameters.mergeRegionArea;
	rc.maxVertsPerPoly = parameters.maxVertsPerPoly;
	rc.detailSampleDist = parameters.detailSampleDist;
	rc.detailSampleMaxError = parameters.detailSampleMaxError;

	if (!self.navMesh) {
		self.navMesh = new module.NavMesh();
	}
	self.navMesh.build(positions, offset, indices, indicesLength, rc);

	const navmeshData = navMesh.getNavmeshData();
	const arrView = new Uint8Array(module.HEAPU8.buffer, navmeshData.dataPointer, navmeshData.size);
	const ret = new Uint8Array(navmeshData.size);
	ret.set(arrView);
	navMesh.freeNavmeshData(navmeshData);

	postMessage(ret);
}
`,NL=.001,ule={cs:6,ch:2,walkableSlopeAngle:90,walkableHeight:20,walkableClimb:5,walkableRadius:0,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},jL,Ti,aa;uK.then(t=>{jL=t,Ti=new t.Vec3,aa=new t.Vec3});var hle=new N,fle=class{constructor(t=!1,i=!1){this.usePhysics=t,this.isExport=i,this.onPointerDown=r=>{if(Jt.length!==1)return;let{raycaster:s,page:l}=this.eventContext;this.eventContext.updateRaycaster(r);let d=l.raycastWithClones(s);if(d.length!==0){if(this.gameControl){let c=hle.copy(this.gameControl.colliderWorldPosition);c.y-=this.gameControl.colliderHeight/2,this.gameControl.path=this.computePath(c,d[0].point)}this.eventContext.requestRender()}},this.traverseWithPhysics=(r,s)=>l=>{var g,v,w,x,_,k,A;let d;if(l instanceof Vo)if(l.objectForSample){if(l.objectForSample.dataPatched.physics.fusedBody)return;d=l.object}else return l.object.dataPatched.physics.fusedBody===!0&&l.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(l instanceof ma)d=l.object;else if(d=l,((g=d.dataPatched.cloner)==null?void 0:g.disabled)===!1&&((v=d.dataPatched.cloner)==null?void 0:v.hideBase)&&((w=d.dataPatched.physics)==null?void 0:w.fusedBody)!==!0)return!0;if(s&&!d.userData.navmesh)return;let c=d.dataPatched;if(!c.visible&&((x=c.physics)==null?void 0:x.enabled)!==!0)return!0;l.updateMatrixWorldSVD();let u=l2(c),h=d.userData.hasDestroy,f=d.userData.hasDrag,m=!1,p=!1;for(let C of c.events)C.data.disabled!==!0&&(C.data.type==="GameControl"?m=!0:C.data.type==="Follow"&&(p=!0));if(m||u||p||h||f)return!0;if(this.usePhysics&&((_=c.physics)==null?void 0:_.rigidBody)==="dynamic"){if(this.usePhysics&&((k=c.physics)!=null&&k.fusedBody))return!0}else if("geometry"in l&&l.geometry&&r.push(Vd(l.geometry,l.matrixWorld)),this.usePhysics&&((A=c.physics)==null?void 0:A.fusedBody))return l.traverseObject((C,M)=>{var T,O;if(M===0)return;let D;if(C instanceof Vo)if(C.objectForSample){if(C.objectForSample.dataPatched.physics.fusedBody)return;D=C.object}else return C.object.dataPatched.physics.fusedBody===!0&&C.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(C instanceof ma)D=C.object;else if(D=C,(T=C.dataPatched.cloner)==null?void 0:T.hideBase)return!0;let P=D.dataPatched;if(!P.visible&&((O=P.physics)==null?void 0:O.enabled)!==!0)return!0;"geometry"in C&&C.geometry&&r.push(Vd(C.geometry,C.matrixWorld))}),!0},this.traverseNoPhysics=(r,s)=>l=>{let d;if(l instanceof Vo)return;l instanceof ma?d=l.object:d=l;let c=d.dataPatched;if(c.physics.enabled==="visibility"?!c.visible:!c.physics.enabled)return!0;if(s&&!d.userData.navmesh)return;let u=l.geometry,h=d.userData.hasDestroy===!0,f=d.userData.hasDrag===!0;if(l2(c)||h||f||d.dataPatched.events.some(m=>m.data.disabled!==!0&&m.data.type==="GameControl"))return!0;u&&r.push(Vd(u,l.matrixWorld))},this.navmeshWasm=jL,this.navMesh=new this.navmeshWasm.NavMesh,this._workerURL=URL.createObjectURL(new Blob([(i?lle:dle)+cle])),this._worker=new Worker(this._workerURL)}init(t,i,r){this.gameControl=i,this.eventContext=r,this.resolution=t.ch,this.setDefaultQueryExtent(new N().setScalar(t.ch*t.walkableRadius*1.2)),this._worker.onmessage=()=>{this.createNavMesh(r.page,t,s=>{this.buildFromNavmeshData(s.data)})},this.eventContext.renderer.domElement.addEventListener("pointerdown",this.onPointerDown)}createNavMesh(t,i,r){i.objects.forEach(h=>{var m;let f=t.scene.find(h);f.traverseEntity(p=>{p.userData.navmesh=!0}),(m=f.cloner)==null||m.traverseObject(p=>{p.userData.navmesh=!0})});let s=[],l=(this.usePhysics?this.traverseWithPhysics:this.traverseNoPhysics)(s,i.zones==="custom");if(t.traverseChildren(l),i.objects.forEach(h=>{var m;let f=t.scene.find(h);f.traverseEntity(p=>{p.userData.navmesh=void 0}),(m=f.cloner)==null||m.traverseObject(p=>{p.userData.navmesh=void 0})}),s.length===0)return!1;let d=oh(s),{positions:c,triIndices:u}=S_(d.getAttribute("position"),d.getIndex());return this._worker.postMessage([c,c.length/3,u,u.length,Z(Z({},ule),i)]),this._worker.onmessage=r,!0}createDebugNavGeometry(){let t,i,r=this.navMesh.getDebugNavMesh(),s=r.getTriangleCount(),l=new Uint32Array(s*3),d=new Float32Array(s*3*3);for(t=0;t<s*3;t++)l[t]=t;for(t=0;t<s;t++)for(i=0;i<3;i++){let u=r.getTriangle(t).getPoint(i);d[t*9+i*3+0]=u.x,d[t*9+i*3+1]=u.y,d[t*9+i*3+2]=u.z}let c=new Nt;return c.setIndex(new Qt(l,1)),c.setAttribute("position",new Qt(d,3)),c}getClosestPoint(t){return Ti.x=t.x,Ti.y=t.y,Ti.z=t.z,this.navMesh.getClosestPoint(Ti)}getClosestPointToRef(t,i){Ti.x=t.x,Ti.y=t.y,Ti.z=t.z;let r=this.navMesh.getClosestPoint(Ti);i.set(r.x,r.y,r.z)}getRandomPointAround(t,i){return Ti.x=t.x,Ti.y=t.y,Ti.z=t.z,this.navMesh.getRandomPointAround(Ti,i)}getRandomPointAroundToRef(t,i,r){Ti.x=t.x,Ti.y=t.y,Ti.z=t.z;let s=this.navMesh.getRandomPointAround(Ti,i);r.set(s.x,s.y,s.z)}moveAlong(t,i){return Ti.x=t.x,Ti.y=t.y,Ti.z=t.z,aa.x=i.x,aa.y=i.y,aa.z=i.z,this.navMesh.moveAlong(Ti,aa)}moveAlongToRef(t,i,r){return Ti.x=t.x,Ti.y=t.y,Ti.z=t.z,aa.x=i.x,aa.y=i.y,aa.z=i.z,this.navMesh.moveAlong(Ti,aa)}computePath(t,i){let r=this.getClosestPoint(i);aa.x=r.x,aa.y=r.y,aa.z=r.z,this.getClosestPoint(t);let s=this.navMesh.computePath(Ti,aa),l=s.getPointCount(),d=[];for(let c=0;c<l;c++){let u=s.getPoint(c);d.push(new N(u.x,u.y,u.z))}return d}createCrowd(t,i){return new ple(this,t,i)}setDefaultQueryExtent(t){Ti.x=t.x,Ti.y=t.y,Ti.z=t.z,this.navMesh.setDefaultQueryExtent(Ti)}getDefaultQueryExtent(){return this.navMesh.getDefaultQueryExtent()}buildFromNavmeshData(t){let i=t.length*t.BYTES_PER_ELEMENT,r=this.navmeshWasm._malloc(i),s=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,r,i);s.set(t);let l=new this.navmeshWasm.NavmeshData;l.dataPointer=s.byteOffset,l.size=t.length,this.navMesh.buildFromNavmeshData(l),this.navmeshWasm._free(s.byteOffset)}getNavmeshData(){let t=this.navMesh.getNavmeshData(),i=new Uint8Array(this.navmeshWasm.HEAPU8.buffer,t.dataPointer,t.size),r=new Uint8Array(t.size);return r.set(i),this.navMesh.freeNavmeshData(t),r}getDefaultQueryExtentToRef(t){let i=this.navMesh.getDefaultQueryExtent();t.set(i.x,i.y,i.z)}dispose(){var t;this.navMesh.destroy(),this._worker.terminate(),URL.revokeObjectURL(this._workerURL),(t=this.eventContext)==null||t.renderer.domElement.removeEventListener("pointerdown",this.onPointerDown)}addCylinderObstacle(t,i,r){return Ti.x=t.x,Ti.y=t.y,Ti.z=t.z,this.navMesh.addCylinderObstacle(Ti,i,r)}addBoxObstacle(t,i,r){return Ti.x=t.x,Ti.y=t.y,Ti.z=t.z,aa.x=i.x,aa.y=i.y,aa.z=i.z,this.navMesh.addBoxObstacle(Ti,aa,r)}removeObstacle(t){this.navMesh.removeObstacle(t)}isSupported(){return this.navmeshWasm!==void 0}},ple=class{constructor(t,i,r){this.navmeshWasmWrapper=t,this.transforms=[],this.agents=new Array,this.reachRadii=new Array,this._agentDestinationArmed=new Array,this._agentDestination=new Array,this.crowd=new this.navmeshWasmWrapper.navmeshWasm.Crowd(i,r,this.navmeshWasmWrapper.navMesh.getNavMesh())}onReachTarget(t,i){}addAgent(t,i,r){let s=new this.navmeshWasmWrapper.navmeshWasm.dtCrowdAgentParams;s.radius=i.radius,s.height=i.height,s.maxAcceleration=i.maxAcceleration,s.maxSpeed=i.maxSpeed,s.collisionQueryRange=i.collisionQueryRange,s.pathOptimizationRange=i.pathOptimizationRange,s.separationWeight=i.separationWeight,s.updateFlags=7,s.obstacleAvoidanceType=0,s.queryFilterType=0,s.userData=0;let l=this.crowd.addAgent(new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z),s);return this.transforms.push(r),this.agents.push(l),this.reachRadii.push(i.reachRadius?i.reachRadius:i.radius),this._agentDestinationArmed.push(!1),this._agentDestination.push(new N(0,0,0)),l}getAgentPosition(t){return this.crowd.getAgentPosition(t)}getAgentPositionToRef(t,i){let r=this.crowd.getAgentPosition(t);i.set(r.x,r.y,r.z)}getAgentVelocity(t){return this.crowd.getAgentVelocity(t)}getAgentVelocityToRef(t,i){let r=this.crowd.getAgentVelocity(t);i.set(r.x,r.y,r.z)}getAgentNextTargetPath(t){return this.crowd.getAgentNextTargetPath(t)}getAgentNextTargetPathToRef(t,i){let r=this.crowd.getAgentNextTargetPath(t);i.set(r.x,r.y,r.z)}getAgentState(t){return this.crowd.getAgentState(t)}overOffmeshConnection(t){return this.crowd.overOffmeshConnection(t)}agentGoto(t,i){this.crowd.agentGoto(t,new this.navmeshWasmWrapper.navmeshWasm.Vec3(i.x,i.y,i.z));let r=this.agents.indexOf(t);r>-1&&(this._agentDestinationArmed[r]=!0,this._agentDestination[r].set(i.x,i.y,i.z))}agentTeleport(t,i){this.crowd.agentTeleport(t,new this.navmeshWasmWrapper.navmeshWasm.Vec3(i.x,i.y,i.z))}updateAgentParameters(t,i){let r=this.crowd.getAgentParameters(t);i.radius!==void 0&&(r.radius=i.radius),i.height!==void 0&&(r.height=i.height),i.maxAcceleration!==void 0&&(r.maxAcceleration=i.maxAcceleration),i.maxSpeed!==void 0&&(r.maxSpeed=i.maxSpeed),i.collisionQueryRange!==void 0&&(r.collisionQueryRange=i.collisionQueryRange),i.pathOptimizationRange!==void 0&&(r.pathOptimizationRange=i.pathOptimizationRange),i.separationWeight!==void 0&&(r.separationWeight=i.separationWeight),this.crowd.setAgentParameters(t,r)}removeAgent(t){this.crowd.removeAgent(t);let i=this.agents.indexOf(t);i>-1&&(this.agents.splice(i,1),this.transforms.splice(i,1),this.reachRadii.splice(i,1),this._agentDestinationArmed.splice(i,1),this._agentDestination.splice(i,1))}getAgents(){return this.agents}update(t){if(this.navmeshWasmWrapper.navMesh.update(),t<=NL)return;let i=1/60,r=10;if(i<=NL)this.crowd.update(t);else{let s=Math.floor(t/i);r&&s>r&&(s=r),s<1&&(s=1);let l=t/s;for(let d=0;d<s;d++)this.crowd.update(l)}for(let s=0;s<this.agents.length;s++){let l=this.agents[s],d=this.getAgentPosition(l);if(this.transforms[s].copy(d),this._agentDestinationArmed[s]){let c=d.x-this._agentDestination[s].x,u=d.z-this._agentDestination[s].z,h=this.reachRadii[s],f=this._agentDestination[s].y-this.reachRadii[s],m=this._agentDestination[s].y+this.reachRadii[s],p=c*c+u*u;d.y>f&&d.y<m&&p<h*h&&(this.onReachTarget(l,this._agentDestination[s]),this._agentDestinationArmed[s]=!1)}}}setDefaultQueryExtent(t){let i=new this.navmeshWasmWrapper.navmeshWasm.Vec3(t.x,t.y,t.z);this.crowd.setDefaultQueryExtent(i)}getDefaultQueryExtent(){return this.crowd.getDefaultQueryExtent()}getDefaultQueryExtentToRef(t){let i=this.crowd.getDefaultQueryExtent();t.set(i.x,i.y,i.z)}getCorners(t){let i,r=this.crowd.getCorners(t),s=r.getPointCount(),l=[];for(i=0;i<s;i++){let d=r.getPoint(i);l.push(new N(d.x,d.y,d.z))}return l}dispose(){this.crowd.destroy()}};function mle(t){let i=!1;return t.scene.objects.forEach(r=>{r.data.type==="Page"&&!i&&r.data.publish.gameControlObject&&Qv.traverseModuleInstances(t,r.id,(s,l,d)=>{for(let c of d)c.data.type==="GameControl"&&c.data.navmesh.enabled&&(i=!0)})}),i}var gle={type:"change"},UL={type:"changeZoom"},vle={type:"changePan"},hm={type:"start"},fm={type:"end",changed:!0},yle={type:"end",changed:!1},tT=new Ut,VL=new q,ble=2*Math.PI,wle=1e-8,xle=.01,iT=new N,a2=new q,nT=new N,s2=new Ut,HL=new Ze,_le={type:"requestRender"},GL=class extends Cr{constructor(t,i,r={isPlayMode:!1,isExport:!1}){super(),this.object=t,this.domElement=i,this.options=r,this.enabled=!0,this.useKeyEvents=!0,this.enableDamping=!1,this.enableZoom=!0,this.enableRotate=!0,this.enablePan=!0,this.autoRotate=!1,this.rotationLimitsMode=0,this.panLimitsMode=0,this.rotationSoftLimit=2,this.panSoftLimit=2,this.hoverRotatePanMode=0,this.zoomLimitsEnabled=!1,this.mouseButtons=[0,5],this.mouseButtonsPlay=[3,4,5],this.touches=[null,Da.DOLLY_ROTATE,Da.PAN],this.offset=new N,this.eye=new N,this.lastPosition=new N,this.lastQuaternion=new Ut,this.current=new q,this.overShoot=new q,this.overRatio=new q,this.spherical=new KP,this.sphericalDelta=new KP,this.panOffset=new N,this.panLeftV=new N,this.panUpV=new N,this.panV=new N,this.rotateStart=new q,this.rotateEnd=new q,this.rotateDelta=new q,this.panStart=new q,this.panEnd=new q,this.panDelta=new q,this.dollyStart=new q,this.dollyEnd=new q,this.dollyDelta=new q,this.rotationRangeFactor=new q,this.panRangeFactor=new q,this.state=-1,this.zoomChanged=!1,this.isPointerDown=!1,this.isThetaFlipped=!1,this.prevScale=0,this.scale=1,this.gesture=!1,this.timer=-1,this.timerHover=-1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPhi=0,this.maxPhi=Math.PI,this.minTheta=-1/0,this.maxTheta=1/0,this.minH=0,this.maxH=Math.PI,this.minV=-1/0,this.maxV=1/0,this.autoRotateClockwise=!0,this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.resetHoverEffectOnPointerLeave=!1,this.hasChange=!1,this.useWindowEvents=!1,this.isTouchZoom=!0,this.autoRotateSpeed=2,this.dampingFactor=.125,this.zoomSpeed=2,this.rotateSpeed=1,this.panSpeed=1,this.hoverRotatePanStrength=.1,this.hoverRotateDamping=this.dampingFactor,this.thetaIsFree=!1,this.phiIsFree=!1,this.needsUpdate=!0,this.onCameraChange=s=>{this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange),this.object=s.camera,this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)},this.update=()=>{this.object.updateWorldMatrix(!0,!1),this.object.matrixWorld.decompose(nT,s2,iT),this.offset.copy(nT).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.autoRotate&&this.state===-1&&this.rotateLeft((this.autoRotateClockwise===!0?1:-1)*this.getAutoRotationAngle()),this.rotationLimitsMode!==0&&this.applyLimits(this.sphericalDelta,this.rotationLimitsMode,this.rotationSoftLimit,this.maxTheta,this.minTheta,this.maxPhi,this.minPhi,this.rotationRangeFactor),this.rotationLimitsMode!==2&&(this.spherical.phi+=this.sphericalDelta.phi),(this.rotationLimitsMode!==1||this.autoRotate===!0)&&(this.spherical.theta+=this.sphericalDelta.theta),this.spherical.radius*=this.scale,this.zoomLimitsEnabled&&(this.spherical.radius=Math.max(this.minDistance,Math.min(this.maxDistance,this.spherical.radius))),this.panLimitsMode!==0&&(this.target.applyQuaternion(tT.copy(s2).invert()),this.panOffset.applyQuaternion(tT),this.applyLimits(this.panOffset,this.panLimitsMode,this.panSoftLimit,this.maxH,this.minH,this.maxV,this.minV,this.panRangeFactor),this.target.applyQuaternion(s2),this.panOffset.applyQuaternion(s2)),this.panLimitsMode===2&&(this.panOffset.y=0),this.panLimitsMode===1&&(this.panOffset.x=0),this.state===-1&&!this.gesture?(this.panOffset.multiplyScalar(1-this.dampingFactor),this.target.add(this.panOffset)):(this.target.add(this.panOffset),this.panOffset.set(0,0,0)),this.offset.setFromSpherical(this.spherical),nT.copy(this.target).add(this.offset),this.object.position.copy(this.target).add(this.offset),this.object.parent&&(HL.copy(this.object.parent.matrixWorld).invert(),this.object.position.applyMatrix4(HL));let s=this.spherical.phi%ble;if(this.eye.copy(this.offset).normalize(),this.object.up.copy(ln.DEFAULT_UP).applyAxisAngle(this.eye,this.object.angleOffsetFromUp),s>0&&s>Math.PI||s<0&&s>-Math.PI?(this.object.up.negate(),this.object.lookAt(this.target),this.object.isUpVectorFlipped=!0):(this.object.lookAt(this.target),this.object.isUpVectorFlipped=!1),this.state===-1||this.enableDamping===!0){let l=this.hoverRotatePanMode===1?this.hoverRotateDamping:this.dampingFactor;this.sphericalDelta.theta*=1-l,this.sphericalDelta.phi*=1-l}else this.sphericalDelta.set(0,0,0);return this.scale=1,this.zoomChanged||this.lastPosition.distanceToSquared(this.object.position)>xle||8*(1-this.lastQuaternion.dot(this.object.quaternion))>wle?(this.dispatchEvent(gle),this.object.dispatchEvent(_le),this.lastPosition.copy(this.object.position),this.lastQuaternion.copy(this.object.quaternion),this.zoomChanged=!1,!0):(this.isPanOverShoot=!1,this.isRotateOverShoot=!1,this.object.wasMovedBySwitchCameraAction=!1,this.sphericalDelta.set(0,0,0),this.panOffset.set(0,0,0),!1)},this.onPointerDown=s=>{this.enabled!==!1&&(s.pointerType==="touch"||s.pointerType==="pen"&&Os?this.onPointerDownTouch(s):this.onPointerDownMouse(s),this.state!==-1&&(this.isPointerDown=!0,this.dispatchEvent(hm),this.domElement.addEventListener("pointermove",this.onPointerMove),this.domElement.addEventListener("pointerup",this.onPointerUp),s.stopPropagation(),s.pointerType==="touch"||s.pointerType==="pen"&&Os||this.domElement.setPointerCapture(s.pointerId)))},this.onPointerLeave=s=>{this.resetHoverEffectOnPointerLeave&&!this.useWindowEvents?(this.hoverRotatePanMode===1?(this.sphericalDelta.theta=-this.spherical.theta,this.sphericalDelta.phi=-this.spherical.phi,iT.subVectors(this.position0,this.target0),this.spherical.setFromVector3(iT),this.sphericalDelta.theta+=this.spherical.theta,this.sphericalDelta.phi+=this.spherical.phi,this.sphericalDelta.theta/=8,this.sphericalDelta.phi/=8):this.hoverRotatePanMode===2&&this.panOffset.subVectors(this.target0,this.target).divideScalar(8),this.update()):this.pointerLeaveEvent=s},this.onPointerEnter=s=>{this.resetHoverEffectOnPointerLeave||this.pointerLeaveEvent===void 0?a2.set(s.clientX-this.domElement.clientWidth/2,s.clientY-this.domElement.clientHeight/2):a2.set(s.clientX-this.pointerLeaveEvent.clientX,s.clientY-this.pointerLeaveEvent.clientY),this.hoverRotatePanMode===1?(this.rotateDelta.copy(a2).multiplyScalar(this.rotateSpeed*this.hoverRotatePanStrength).rotateAround(VL,-this.object.angleOffsetFromUp),this.rotateLeft(2*Math.PI*this.rotateDelta.x/this.domElement.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/this.domElement.clientHeight),this.rotateStart.set(s.clientX,s.clientY)):this.hoverRotatePanMode===2&&(this.panDelta.copy(a2).multiplyScalar(this.panSpeed*this.hoverRotatePanStrength),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.set(s.clientX,s.clientY)),this.update()},this.onPointerMove=s=>{this.enabled!==!1&&(this.checkRaycastLock()||(s.pointerType==="touch"||s.pointerType==="pen"&&Os?this.onPointerMoveTouch(s):this.onPointerMoveMouse(s),s.stopPropagation()))},this.onPointerUp=s=>{this.isPointerDown=!1,Jt.length===0&&(this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)),Jt.length>1&&s.preventDefault(),this.hasChange?this.dispatchEvent(fm):this.dispatchEvent(yle),this.state=-1,s&&(s.stopPropagation(),s.pointerType==="touch"||s.pointerType==="pen"&&Os||this.domElement.releasePointerCapture(s.pointerId))},this.onPointerDownMouse=s=>{let l;switch(this.useKeyEvents?l=this.mouseButtons[s.button]:l=this.mouseButtonsPlay[s.button],l){case 0:if(s.altKey===!0&&!s.shiftKey&&!Sx(s)){if(this.enableRotate===!1)return;this.handleMouseDownRotate(s),this.state=0}else if(this.key===" "){if(this.enablePan===!1)return;this.handleMouseDownPan(s),this.state=2}break;case 4:if(this.enablePan===!1)return;this.handleMouseDownPan(s),this.state=2;break;case 3:if(Sx(s)||s.shiftKey){if(this.enablePan===!1)return;this.handleMouseDownPan(s),this.state=2}else{if(this.enableRotate===!1)return;this.handleMouseDownRotate(s),this.state=0}break;case 5:if(Sx(s)||s.shiftKey){if(this.enableRotate===!1)return;this.handleMouseDownRotate(s),this.state=0}else{if(this.enablePan===!1)return;this.handleMouseDownPan(s),this.state=2}break;default:this.state=-1}},this.onPointerMoveMouse=s=>{switch(this.state){case 0:if(this.enableRotate===!1)return;this.handleMouseMoveRotate(s);break;case 1:if(this.enableZoom===!1)return;this.handleMouseMoveDolly(s);break;case 2:if(this.enablePan===!1)return;this.handleMouseMovePan(s);break}this.object.wasMovedByUser=!0},this.onPointerDownTouch=s=>{switch(Jt.length>1&&s.preventDefault(),this.touches[Jt.length-1]){case Da.ROTATE:if(this.enableRotate===!1){this.state=-1;return}this.handleTouchStartRotate(),this.state=3;break;case Da.PAN:if(this.enablePan===!1){this.state=-1;return}this.handleTouchStartPan(),this.state=4;break;case Da.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchStartDollyPan(),this.state=5;break;case Da.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchStartDollyRotate(),this.state=6;break;default:this.state=-1}},this.onPointerMoveTouch=s=>{switch(Jt.length>1&&s.preventDefault(),this.state){case 3:if(this.enableRotate===!1)return;this.handleTouchMoveRotate(s),this.update();break;case 4:if(this.enablePan===!1)return;this.handleTouchMovePan(s),this.update();break;case 5:if(this.enableZoom===!1&&this.enablePan===!1)return;this.handleTouchMoveDollyPan(s),this.update();break;case 6:if(this.enableZoom===!1&&this.enableRotate===!1)return;this.handleTouchMoveDollyRotate(s),this.update();break;default:this.state=-1}this.object.wasMovedByUser=!0},this.dispatchEndDebounced=DC(()=>this.dispatchEvent(fm),33),this.onMouseWheel=s=>{this.enabled===!1||this.enableZoom===!1&&this.enablePan===!1||this.checkRaycastLock()||(!this.options.isExport&&this.domElement.clientHeight===document.body.clientHeight&&this.domElement.clientWidth===document.body.clientWidth&&s.preventDefault(),this.dispatchEvent(hm),this.handleMouseWheel(s),this.dispatchEndDebounced(),this.object.wasMovedByUser=!0)},this.onGesture=s=>{if(s.preventDefault(),this.enabled!==!1&&!this.checkRaycastLock()&&!OC)if(s.type==="gesturechange"){if(this.enableZoom===!1||this.isTouchZoom===!1)return;this.dispatchEvent(hm),s.scale>this.prevScale?this.dollyIn(this.getZoomScale()):s.scale<this.prevScale&&this.dollyOut(this.getZoomScale()),this.prevScale=s.scale,this.update(),this.object.wasMovedByUser=!0}else this.dispatchEvent(fm)},this.onContextMenu=s=>{s.preventDefault()},this.onTouchEnd=s=>{s.preventDefault()},this.onKeyDown=s=>{this.enabled!==!1&&(this.key=s.key,s.key===" "&&this.dispatchEvent(hm))},this.onKeyUp=s=>{this.enabled!==!1&&(this.key=void 0,this.state!==-1&&s.key==="Alt"&&this.onPointerUp(Jt[0]),s.key===" "&&this.dispatchEvent(fm))},this.onPointerHover=s=>{s.pointerType!=="mouse"||this.enabled===!1||this.state!==-1||this.hoverRotatePanMode===2&&this.isPanOverShoot||this.hoverRotatePanMode===1&&this.isRotateOverShoot||(this.isPointerDown=!0,this.hoverRotatePanMode===2?this.handleMouseMovePan(s,this.hoverRotatePanStrength):this.hoverRotatePanMode===1&&this.handleMouseMoveRotate(s,this.hoverRotatePanStrength))},this.onBeginState=()=>{this.enabled=!1,this.needsUpdate=!1},this.onCompleteState=s=>{s.isfromEntity&&this.options.isPlayMode||(this.enabled=!0,this.needsUpdate=!0,this.object.updateUp(),this.object.getTarget(this.target))},this.target=this.object.getTarget(),this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.quat0=this.object.quaternion.clone(),this.isUpVectorFlipped0=this.object.isUpVectorFlipped,this.offset.copy(this.object.position).sub(this.target),this.spherical.setFromVector3(this.offset),this.object.isUpVectorFlipped&&(this.spherical.phi*=-1,this.spherical.theta-=Math.PI),this.addEventListenersToCamera()}dispatchEvent(t){t.type==="start"?this.hasChange=!1:this.hasChange=!0,super.dispatchEvent(t)}addEventListenersToCamera(){this.object.addEventListener("beginState",this.onBeginState),this.object.addEventListener("completeState",this.onCompleteState),this.object.addEventListener("cameraChange",this.onCameraChange)}removeEventListenersFromCamera(){this.object.removeEventListener("beginState",this.onBeginState),this.object.removeEventListener("completeState",this.onCompleteState),this.object.removeEventListener("cameraChange",this.onCameraChange)}updateUseWindowEvents(t){if(window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("pointermove",this.onPointerHover),this.useWindowEvents=t,this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover)),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let i=this.useWindowEvents?window:this.domElement;i.addEventListener("pointerleave",this.onPointerLeave),i.addEventListener("pointerenter",this.onPointerEnter)}}fromJSON(t,i){var l,d;this.setEnableDampingSpeed(t.enableDamping),this.enablePan=t.enablePan,this.enableZoom=t.enableZoom,this.enableRotate=t.enableRotate,this.rotationLimitsMode=t.rotationLimitsMode,this.thetaIsFree=t.rotationHorizontalOffset.min===t.rotationHorizontalOffset.max&&t.rotationHorizontalOffset.min===Math.PI,this.phiIsFree=t.rotationVerticalOffset.min===t.rotationVerticalOffset.max&&t.rotationVerticalOffset.min===Math.PI,this.panLimitsMode=t.panLimitsMode,this.panSoftLimit=t.panSoftLimit,this.rotationSoftLimit=t.rotationSoftLimit,this.hoverRotatePanMode=t.hoverRotatePanMode,this.hoverRotateDamping=(l=t.hoverRotateDamping)!=null?l:this.dampingFactor,this.useWindowEvents=i==="window",this.hoverRotatePanMode!==0&&(this.useWindowEvents?window.addEventListener("pointermove",this.onPointerHover):this.domElement.addEventListener("pointermove",this.onPointerHover));let r=t.hoverRotatePanStrength/100;this.hoverRotatePanStrength=wn(r,2),this.zoomLimitsEnabled=t.zoomLimitsEnabled,this.minZoom=t.zoomLimits.min,this.maxZoom=Math.max(t.zoomLimits.min,t.zoomLimits.max),this.minDistance=1e3/t.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/t.zoomLimits.min),this.autoRotate=t.autoRotate,this.autoRotateSpeed=t.autoRotateSpeed,this.autoRotateClockwise=t.autoRotateClockwise;let s=this.object.getTarget().applyQuaternion(tT.copy(this.object.quaternion).invert());this.minV=-t.panVerticalOffset.min+s.y,this.maxV=t.panVerticalOffset.max+s.y,this.minH=-t.panHorizontalOffset.min+s.x,this.maxH=t.panHorizontalOffset.max+s.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=Zl(this.spherical.phi-t.rotationVerticalOffset.min),this.maxPhi=Zl(this.spherical.phi+t.rotationVerticalOffset.max),this.minTheta=Zl(Zl(this.spherical.theta)-t.rotationHorizontalOffset.min),this.maxTheta=Zl(Zl(this.spherical.theta)+t.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,t.orbitTouches===1&&(this.touches[0]=Da.ROTATE),t.panTouches===1&&(this.touches[0]=Da.PAN),t.orbitTouches===2&&(this.touches[1]=Da.DOLLY_ROTATE),t.panTouches===2&&(this.touches[1]=Da.DOLLY_PAN),t.orbitTouches===3&&(this.touches[2]=Da.ROTATE),t.panTouches===3&&(this.touches[2]=Da.PAN),this.isTouchZoom=t.isTouchZoom,this.resetHoverEffectOnPointerLeave=(d=t.resetHoverEffectOnPointerLeave)!=null?d:!1}connect(){if(this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture),this.domElement.addEventListener("touchend",this.onTouchEnd),this.hoverRotatePanMode!==0&&!this.useWindowEvents){let t=this.useWindowEvents?window:this.domElement;t.addEventListener("pointerleave",this.onPointerLeave),t.addEventListener("pointerenter",this.onPointerEnter)}this.pointerLeaveEvent=void 0}dispose(){this.removeEventListenersFromCamera(),this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),window.removeEventListener("pointermove",this.onPointerHover),this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.removeEventListener("pointerleave",this.onPointerLeave),this.domElement.removeEventListener("pointerenter",this.onPointerEnter),window.removeEventListener("pointerleave",this.onPointerLeave),window.removeEventListener("pointerenter",this.onPointerEnter),this.domElement.removeEventListener("pointermove",this.onPointerMove),this.domElement.removeEventListener("pointerup",this.onPointerUp)}applyLimits(t,i,r,s,l,d,c,u){this.overShoot.set(0,0);let h,f,m;t instanceof N?(h=t.x,f=t.y,this.current.set(this.target.x,this.target.y),m=!0):(h=t.theta,f=t.phi,this.current.set(Zl(this.spherical.theta),Zl(this.spherical.phi)),m=!1),r===0&&(this.current.x+=h,this.current.y+=f),(i===3||i===2)&&(!m&&this.isThetaFlipped?this.current.x>s&&this.current.x<0?this.overShoot.x=s-this.current.x:this.current.x<l&&this.current.x>0&&(this.overShoot.x=l-this.current.x):this.current.x>s?this.overShoot.x=s-this.current.x:this.current.x<l&&(this.overShoot.x=l-this.current.x)),(i===3||i===1)&&(this.current.y>d?this.overShoot.y=d-this.current.y:this.current.y<c&&(this.overShoot.y=c-this.current.y)),m||(this.overShoot.x=Zl(this.overShoot.x),this.overShoot.y=Zl(this.overShoot.y)),r!==0?(this.overRatio.copy(this.overShoot).divide(u),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),r===1&&(this.overRatio.x=WL(Math.abs(this.overRatio.x)),this.overRatio.y=WL(Math.abs(this.overRatio.y))),this.isPointerDown||r===1?r===2&&(this.overRatio.x>.9&&!this.thetaIsFree||this.overRatio.y>.9&&!this.phiIsFree)?this.isPointerDown=!1:(h*this.overShoot.x<0&&!this.thetaIsFree&&(h*=1-this.overRatio.x),f*this.overShoot.y<0&&!this.phiIsFree&&(f*=1-this.overRatio.y)):r===2&&(!m&&(this.overRatio.x>.002&&!this.thetaIsFree||this.overRatio.y>.002&&!this.phiIsFree)||m&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(this.thetaIsFree||(h=this.overShoot.x*.05),this.phiIsFree||(f=this.overShoot.y*.05),m?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):m?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(h+=this.overShoot.x,f+=this.overShoot.y),t instanceof N?(t.x=h,t.y=f):(this.thetaIsFree||(t.theta=h),this.phiIsFree||(t.phi=f))}setEnableDampingSpeed(t){this.enableDamping=t,this.rotateSpeed=t===!0?.2:1}stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}getAutoRotationAngle(){return 2*Math.PI/60/60*this.autoRotateSpeed}getZoomScale(){return Math.pow(.95,this.zoomSpeed)}rotateLeft(t){this.sphericalDelta.theta-=t}rotateUp(t){this.sphericalDelta.phi-=t}panLeft(t,i){this.panLeftV.setFromMatrixColumn(i,0),this.panLeftV.multiplyScalar(-t),this.panOffset.add(this.panLeftV)}panUp(t,i){this.panUpV.setFromMatrixColumn(i,1),this.panUpV.multiplyScalar(t),this.panOffset.add(this.panUpV)}pan(t,i){let r=this.domElement;if(r&&this.object.isPerspectiveCamera){let s=this.object.position;this.panV.copy(s).sub(this.target);let l=this.panV.length();l*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*t*l/r.clientHeight,this.object.matrixWorld),this.panUp(2*i*l/r.clientHeight,this.object.matrixWorld)}else r&&this.object.isOrthographicCamera&&(this.panLeft(t*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrixWorld),this.panUp(i*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrixWorld));this.dispatchEvent(vle)}dollyOut(t){this.object.isPerspectiveCamera?this.scale/=t:this.object.isOrthographicCamera&&(this.object.zoom*=t,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(UL)}dollyIn(t){this.object.isPerspectiveCamera?this.scale*=t:this.object.isOrthographicCamera&&(this.object.zoom/=t,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(UL)}zoomOut(t=this.getZoomScale()){this.dispatchEvent(hm),this.dollyOut(t),this.dispatchEvent(fm)}zoomIn(t=this.getZoomScale()){this.dispatchEvent(hm),this.dollyIn(t),this.dispatchEvent(fm)}handleMouseDownRotate(t){this.rotateStart.set(t.clientX,t.clientY)}handleMouseDownDolly(t){this.dollyStart.set(t.clientX,t.clientY)}handleMouseDownPan(t){this.panStart.set(t.clientX,t.clientY)}handleMouseMoveRotate(t,i=1){t.movementX!==void 0?this.rotateDelta.set(t.movementX,t.movementY):(this.rotateEnd.set(t.clientX,t.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd)),this.rotateDelta.multiplyScalar(this.rotateSpeed*i).rotateAround(VL,-this.object.angleOffsetFromUp);let r=this.domElement,s=this.useWindowEvents?window.innerHeight:r.clientHeight,l=2*Math.PI*this.rotateDelta.x/s,d=2*Math.PI*this.rotateDelta.y/s;this.rotateLeft(l),this.rotateUp(d),this.update()}handleMouseMoveDolly(t){this.dollyEnd.set(t.clientX,t.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}handleMouseMovePan(t,i=1){t.movementX!==void 0?this.panDelta.set(t.movementX,t.movementY):(this.panEnd.set(t.clientX,t.clientY),this.panDelta.subVectors(this.panEnd,this.panStart),this.panStart.copy(this.panEnd)),this.panDelta.multiplyScalar(this.panSpeed*i),this.pan(this.panDelta.x,this.panDelta.y),this.update()}handleMouseWheel(t){if(sK===!1&&Sx(t)===!1&&kle(t)===!0){if(this.enablePan===!1)return;this.gesture?(this.panDelta.set(-t.deltaX,-t.deltaY).multiplyScalar(this.panSpeed),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),t.altKey?this.pan(0,this.panDelta.y):t.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout(()=>{this.gesture=!1,this.isPointerDown=!1},30)}else{if(this.enableZoom===!1)return;t.deltaY===0?t.deltaX<0?this.dollyIn(this.getZoomScale()):t.deltaX>0&&this.dollyOut(this.getZoomScale()):t.deltaY<0?this.dollyIn(this.getZoomScale()):t.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}handleTouchStartRotate(){if(Jt.length===2){let t=.5*(Jt[0].pageX+Jt[1].pageX),i=.5*(Jt[0].pageY+Jt[1].pageY);this.rotateStart.set(t,i)}else this.rotateStart.set(Jt[0].pageX,Jt[0].pageY)}handleTouchStartPan(){if(Jt.length===2){let t=.5*(Jt[0].pageX+Jt[1].pageX),i=.5*(Jt[0].pageY+Jt[1].pageY);this.panStart.set(t,i)}else this.panStart.set(Jt[0].pageX,Jt[0].pageY)}handleTouchStartDolly(){let t=Jt[0].pageX-Jt[1].pageX,i=Jt[0].pageY-Jt[1].pageY,r=Math.sqrt(t*t+i*i);this.dollyStart.set(0,r)}handleTouchStartDollyPan(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}handleTouchStartDollyRotate(){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}handleTouchMoveRotate(t){if(Jt.length===2){let r=IC(t),s=.5*(t.pageX+r.x),l=.5*(t.pageY+r.y);this.rotateEnd.set(s,l)}else{if(t.pointerId!==Jt[0].pointerId)return;this.rotateEnd.set(t.pageX,t.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(this.rotateSpeed);let i=this.domElement;i&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/i.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/i.clientHeight)),this.rotateStart.copy(this.rotateEnd)}handleTouchMovePan(t){if(Jt.length===2){let i=IC(t),r=.5*(t.pageX+i.x),s=.5*(t.pageY+i.y);this.panEnd.set(r,s)}else{if(t.pointerId!==Jt[0].pointerId)return;this.panEnd.set(t.pageX,t.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(this.panSpeed),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}handleTouchMoveDolly(t){let i=IC(t),r=t.pageX-i.x,s=t.pageY-i.y,l=Math.sqrt(r*r+s*s);this.dollyEnd.set(0,l),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,this.zoomSpeed)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}handleTouchMoveDollyPan(t){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(t),this.enablePan&&this.handleTouchMovePan(t)}handleTouchMoveDollyRotate(t){this.enableZoom&&this.isTouchZoom===!0&&this.handleTouchMoveDolly(t),this.enableRotate&&this.handleTouchMoveRotate(t)}checkRaycastLock(){var t;if(this.object.data.raycastLock){if(this.options.isPlayMode)return!1;{let i=(t=this.options)==null?void 0:t.showCameraLock;return i&&i(),!0}}else return!1}};function Zl(t){let i=Math.PI*2;for(;t<=-Math.PI;)t+=i;for(;t>Math.PI;)t-=i;return t}function WL(t){return 1-Math.pow(1-t,4)}function kle(t){return t.wheelDeltaY===0||t.deltaY===0?kx&&t.shiftKey&&Math.abs(t.wheelDeltaX)>=120?!1:t.wheelDeltaX?t.wheelDeltaX===-3*t.deltaX||t.wheelDeltaX===-3*window.devicePixelRatio*t.deltaX:t.deltaMode===0:t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY||t.wheelDeltaY===-3*window.devicePixelRatio*t.deltaY:t.deltaMode===0}var qL=class{constructor(t,i,r,s,l,d){this.id=t,this.data=i,this.object=r,this.page=s,this.currentIntersectedObjects=[],this.disabled=!1,this.alreadyPlayedNonTogglingActions=new Set,this.actions=Ya(i,i.actions,s,l,d,r),this.target=i.target,this.useToggle=i.runMode==="Toggle",this.triggeringObjects=i.triggeringObjects.map(c=>s.scene.find(c))}isValidTriggeringObject(t){return this.target==="all"?!0:this.triggeringObjects.some(i=>i===t||i.isAncestorOf(t.uuid)||t.isAncestorOf(i.uuid))}disconnect(){qr(this.actions)}dispatch(){this.disabled||this.object.destroyedInAction||(this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this?(t.object.currentTransitionEvent=this,t.init()):this.data.runMode==="Once"&&this.alreadyPlayedNonTogglingActions.add(t)}),this.object.dispatchEvent({type:"beginEvent",eventName:"Trigger"}),this.useToggle?(this.actions.Transition.forEach(t=>{t.toggle()}),this.actions.SwitchCamera.forEach(t=>{t.toggle()})):(this.actions.Transition.forEach(t=>{this.alreadyPlayedNonTogglingActions.has(t)===!1&&t.play()}),this.actions.SwitchCamera.forEach(t=>{t.play()})),this.actions.Link.forEach(t=>{t.dispatch()}),this.actions.Reset.forEach(t=>{t.dispatch()}),this.actions.Create.forEach(t=>{t.dispatch()}),this.actions.Destroy.forEach(t=>{t.dispatch(!1)}),this.actions.Audio.forEach(t=>{t.dispatchBasic()}),this.actions.Video.forEach(t=>{t.dispatchBasic()}),this.actions.SceneTransition.forEach(t=>{t.dispatch()}),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch()))}},ji;fK.then(t=>ji=t);var _r=new N,Xo=new Ut,su=new N,rT=new Vr(0,0,0,"YXZ"),$L=new Vr(0,0,0,"XYZ"),Ko=new N,aT=new N,sT=new N(1,1,1),pm=new Ut,o2=new Ze,ZL=new Ze,Sle={type:"updateMatrix"},YL=new Ut,oT=new Ur,lT={type:"beginEvent",eventName:"Collision"},Ale={type:"beginEvent",eventName:"Trigger"};function Cle(t){if(Qv.physicsEnabled(t.scene.objects))return!0;let i=!1;return t.scene.objects.traverse((r,s)=>{if(s.events){if(Array.isArray(s.events)){for(let l of s.events)if(l.data.disabled!==!0&&l.data.type==="GameControl"&&l.data.collisionEnabled){i=!0;break}}else for(let l of Object.values(s.events))if(l.disabled!==!0&&l.type==="GameControl"&&l.collisionEnabled){i=!0;break}}}),i}var l2=t=>t.states.some(i=>i.data.position!==void 0||i.data.rotation!==void 0||i.data.hiddenMatrix!==void 0||i.data.cloner!==void 0||i.data.pathSnapping!==void 0),Ele=class{constructor(t){this.eventContext=t,this.isEnabled=!1,this.gameControl=null,this.joysticks=[],this.joystickToGameControls=[],this.sharedGameControlGlobals={entitiesWithTransformAnim:[],entityToCollisionEvents:{},colliderToEntity:new Map,triggers:[],gamePads:[],createdObjects:[],nCreatedPerAction:{}},this.sensorToTriggerEvent={},this.eventManager=void 0,this.needsCollisionDetection=!1,this.initializationCounter=-1,this.rigidBodyToMesh=new Map,this.nActiveRigidBodies=0,this.collisionEvents=[],this.isExport=!1,this.processRigidBody=i=>{if(i.bodyType()!==ji.RigidBodyType.Dynamic)return;i.isSleeping()||this.nActiveRigidBodies++;let[r,s,l]=this.rigidBodyToMesh.get(i.handle);if(_r.copy(i.translation()).multiplyScalar(this.pixelsPerMeter),Xo.copy(i.rotation()),r.matrixWorld.compose(_r,Xo,s),r.hasNonUniformScale&&r.matrixWorld.multiply(r.shearScale),r.dispatchEvent(Sle),l){let d=r.cloner;if(d&&d.objectForSample===void 0){d.matrixWorld.copy(r.matrixWorld);for(let c of d.children)c.updateMatrixWorld(!0)}for(let c of r.children)c.updateMatrixWorld(!0)}},this.accumulator=0,this.handleCollisionEvents=(i,r,s)=>{var c,u,h,f;if(s===!1)return;let l,d;if(this.sensorToTriggerEvent[i]?(l=this.sensorToTriggerEvent[i],d=this.sharedGameControlGlobals.colliderToEntity.get(r)):this.sensorToTriggerEvent[r]&&(l=this.sensorToTriggerEvent[r],d=this.sharedGameControlGlobals.colliderToEntity.get(i)),l&&d&&l.isValidTriggeringObject(d)){l.dispatch();return}for(let m=this.sharedGameControlGlobals.createdObjects.length-1;m>=0;m--){let p=this.sharedGameControlGlobals.createdObjects[m];if(p.userData.hasCollisionDestroy&&(((c=p.rigidBody)==null?void 0:c.collider(0).handle)===i||((u=p.rigidBody)==null?void 0:u.collider(0).handle)===r)){this.sharedGameControlGlobals.createdObjects.splice(m,1),p.removeFromParent(),requestAnimationFrame(()=>{var g;return(g=this.sharedGameControlGlobals.rapierWorld)==null?void 0:g.removeRigidBody(p.rigidBody)});break}}if(((h=this.gameControl)==null?void 0:h.object)===this.sharedGameControlGlobals.colliderToEntity.get(i)){let m=this.sharedGameControlGlobals.colliderToEntity.get(r),p=this.sharedGameControlGlobals.entityToCollisionEvents[m.uuid];if(p===void 0)return;for(let g of p)g.data.target==="character"&&this.dispatchCollisionEvent(g,m,r)}else if(((f=this.gameControl)==null?void 0:f.object)===this.sharedGameControlGlobals.colliderToEntity.get(r)){let m=this.sharedGameControlGlobals.colliderToEntity.get(i),p=this.sharedGameControlGlobals.entityToCollisionEvents[m.uuid];if(p===void 0)return;for(let g of p)g.data.target==="character"&&this.dispatchCollisionEvent(g,m,i)}else{let m=this.sharedGameControlGlobals.colliderToEntity.get(i),p=this.sharedGameControlGlobals.entityToCollisionEvents[m.uuid];if(p!==void 0)for(let w of p)w.data.target==="scene"&&this.dispatchCollisionEvent(w,m,i);let g=this.sharedGameControlGlobals.colliderToEntity.get(r),v=this.sharedGameControlGlobals.entityToCollisionEvents[g==null?void 0:g.uuid];if(v!==void 0)for(let w of v)w.data.target==="scene"&&this.dispatchCollisionEvent(w,g,r)}},this.isExport=t.isExport,this.sharedAssets=t.sharedAssets,this.renderer=t.renderer,this.requestRender=t.requestRender,this.domElement=this.renderer.domElement,this.pixelsPerMeter=bL,this.gravity=this.page.data.globalPhysics.gravity}get page(){return this.eventContext.page}attachVRControllers(t){t.forEach(i=>{i.addEventListener("connected",r=>{"gamepad"in r.data&&"axes"in r.data.gamepad&&this.sharedGameControlGlobals.gamePads.push(r.data.gamepad)})})}markIsDestroyTarget(){this.page.traverseVisibleEntity(t=>{var r,s;let i=t.dataPatched;for(let l of i.events){if(l.data.disabled===!0)continue;let d=(s=(r=l.data.actions)==null?void 0:r.find(c=>c.data.type==="Destroy"))==null?void 0:s.data;if(d)for(let c of d.objects){let u=this.page.scene.find(c);u&&(u.userData.hasDestroy=!0)}}})}markIsDragObject(){this.page.traverseVisibleEntity(t=>{let i=t.dataPatched;for(let r of i.events)if(!(r.data.disabled===!0||r.data.type!=="DragDrop"))for(let s of r.data.objects){let l=this.page.scene.find(s);l&&(l.userData.hasDrag=!0)}})}initBVH(){let t=[];if(this.page.traverseChildren(i=>{var u,h;let r;if(i instanceof Vo)return;i instanceof ma?r=i.object:r=i;let s=r.dataPatched;if(((u=s.physics)==null?void 0:u.enabled)==="visibility"?!s.visible:!((h=s.physics)!=null&&h.enabled))return!0;let l=i.geometry,d=r.userData.hasDestroy===!0,c=r.userData.hasDrag===!0;if(l2(s)||d||c||r.dataPatched.events.some(f=>f.data.disabled!==!0&&f.data.type==="GameControl"))return i.updateMatrixWorldSVD(),this.addBoundsTree(i),!0;l&&t.push(Vd(l,i.matrixWorld))}),t.length>0){let i=oh(t,!1);this.sharedGameControlGlobals.staticMeshBVH=new o0(i)}}addRigidBody(t,i,r){let s=[],l="geometry"in t?t.geometry:void 0,d=i.dataPatched;if((l==null?void 0:l.getAttribute("position"))!==void 0&&s.push(Vd(l,t.shearScale)),d.physics.fusedBody){let c=this.gatherChildrenGeom(t,s);t.traverseObject(c),t.children.forEach(h=>h.updateMatrixWorld(!0));let u=t.cloner;u&&u.objectForSample===void 0&&d.physics.rigidBody==="dynamic"&&(u.traverseObject(c),u.children.forEach(h=>h.updateMatrixWorld(!0)))}if(s.length>0){let c,u=!r.fromCreate&&d.physics.rigidBody==="dynamic"||r.fromCreate&&r.dynamic;u?(c=ji.RigidBodyDesc.dynamic(),c.setLinearDamping(d.physics.damping).setAngularDamping(d.physics.damping).setAdditionalMass(1e-9).setGravityScale(d.physics.gravityScale).enabledRotations(...d.physics.enabledRotation).enabledTranslations(...d.physics.enabledTranslation)):(r.hasTransformAnim||r.hasFollow||r.hasDrag)&&!r.fromCreate?(c=ji.RigidBodyDesc.kinematicPositionBased(),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(t)):c=ji.RigidBodyDesc.fixed();let h=oh(s);(t.hasNonUniformScale?t.matrixWorldRigid:t.matrixWorld).decompose(_r,Xo,su),t.position0=_r.clone().divideScalar(this.pixelsPerMeter),t.rotation0=Xo.clone(),_r.divideScalar(this.pixelsPerMeter),c.setTranslation(_r.x,_r.y,_r.z).setRotation(Xo),l?h==null||h.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter):h==null||h.scale(su.x/this.pixelsPerMeter,su.y/this.pixelsPerMeter,su.z/this.pixelsPerMeter);let f=this.sharedGameControlGlobals.rapierWorld.createRigidBody(c);u&&this.rigidBodyToMesh.set(f.handle,[t,su.clone(),d.physics.fusedBody]);let m=!(d.geometry===void 0||d.geometry.type==="SubdivGeometry"||d.geometry.type==="NonParametricGeometry"||d.geometry.type==="BooleanGeometry"||d.geometry.type==="VectorGeometry"||d.geometry.type==="StarGeometry"||d.geometry.type==="RectangleGeometry"||d.geometry.type==="EllipseGeometry"||d.geometry.type==="TriangleGeometry"||d.geometry.type==="TorusGeometry"||d.geometry.type==="HelixGeometry");try{this.addCollider(f,d.physics,h,i,m)}catch(p){try{this.addCollider(f,d.physics,h,i,!1)}catch(g){console.error(g)}}t.rigidBody=f}}addBoundsTree(t){var r,s;let i=[];if(((r=t.geometry)==null?void 0:r.getAttribute("position"))!==void 0&&((s=t.geometry)==null?void 0:s.getAttribute("position").count)>0&&i.push(Vd(t.geometry,t.shearScale)),t.traverseObject(this.gatherChildrenGeom(t,i)),t.children.forEach(l=>l.updateMatrixWorld(!0)),i.length>0){let l=oh(i,!1);t.bvhGeometry=l,t.bvhGeometry.boundsTree=new o0(l),this.sharedGameControlGlobals.entitiesWithTransformAnim.push(t)}}addCollider(t,i,r,s,l=!0){var u,h;if((r==null?void 0:r.getAttribute("position").count)===0||((u=r==null?void 0:r.getIndex())==null?void 0:u.count)===0)return;let d;r&&(i.colliderType==="trimesh"?d=ji.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array):d=ji.ColliderDesc.convexMesh(r.getAttribute("position").array,l?r.getIndex().array:void 0)),d.setFrictionCombineRule(ji.CoefficientCombineRule.Average).setRestitutionCombineRule(ji.CoefficientCombineRule.Average).setDensity(i.density).setFriction(i.friction).setRestitution(i.restitution);let c=this.sharedGameControlGlobals.rapierWorld.createCollider(d,t);this.sharedGameControlGlobals.colliderToEntity.set(c.handle,s),(h=this.sharedGameControlGlobals.entityToCollisionEvents[s.uuid])!=null&&h.some(f=>f.target==="scene")&&c.setActiveEvents(ji.ActiveEvents.COLLISION_EVENTS)}gatherChildrenGeom(t,i){return(r,s)=>{var u;if(s===0)return;let l;if(r instanceof Vo)if(r.objectForSample){if(r.objectForSample.dataPatched.physics.fusedBody)return;l=r.object}else return r.object.dataPatched.physics.fusedBody===!0&&r.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(r instanceof ma)l=r.object;else if(l=r,(u=l.dataPatched.cloner)==null?void 0:u.hideBase)return!0;let d=l.dataPatched;if(d.physics.enabled==="visibility"?!d.visible:!d.physics.enabled)return!0;s===1?t.hasNonUniformScale?r.matrixWorld.multiplyMatrices(t.shearScale,r.hiddenMatrix):r.matrixWorld.copy(r.hiddenMatrix):r.matrixWorld.multiplyMatrices(r.parent.matrixWorld,r.hiddenMatrix),r.matrixWorld.multiply(r.matrix);let c=r.geometry;(c==null?void 0:c.getAttribute("position"))!==void 0&&i.push(Vd(c,r.matrixWorld))}}activate(t){var g,v;if(this.isEnabled)return;this.isEnabled=!0,this.eventManager=t,this.usePhysics=this.page.data.globalPhysics.usePhysics;let i=this.page.playCamera,r=!1,s=5,l=8,d=9,c="drag",u=this.page.data.publish.gameControlObject,h=u!==null?this.page.find(u):null,f=null;if(h)for(let w of h.data.events){if(w.data.disabled||w.data.type!=="GameControl")break;let x=h;for(;this.usePhysics&&((g=x=x.parent)==null?void 0:g.parent)!==null&&!((v=x.data.physics)!=null&&v.fusedBody););w.data.collisionEnabled&&(this.needsCollisionDetection=!0),f===null&&(f=w.data)}if(this.page.traverseEntity(w=>{for(let x of w.dataPatched.events)if(x.data.disabled===!1&&x.data.type==="Trigger")return this.needsCollisionDetection=!0,!0}),h&&f){r=r||f.camera===i.uuid||h.uuid===i.uuid;let w=new CL(h,this.renderer.domElement,f,this.eventContext.page.data.globalPhysics,this,h.uuid!==i.uuid&&f.camera===i.uuid,i,this.page,this.sharedAssets);this.gameControl=w,s=f.joystickPosLoc,l=f.joystickRotLoc,d=f.jumpTouchButtonLoc,c=f.rotByTouch,Os&&f.touchControl&&(this.joystickToGameControls[s]="pos",f.moveMode==="walk"&&(this.joystickToGameControls[d]="jmp"),c==="joystick"&&(this.joystickToGameControls[l]="rot"))}if(this.gameControl&&this.gameControl.data.navmesh.enabled){let w=this.gameControl.data;if(!this.navigationMeshWrapper){this.navigationMeshWrapper=new fle(this.usePhysics,this.isExport);let x;w.collider.type==="sphere"?x=w.collider.radius*2:x=w.collider.height,x=Math.floor(x/w.navmesh.ch-1),this.navigationMeshWrapper.init(ge(Z({},w.navmesh),{walkableHeight:x}),this.gameControl,this.eventContext)}}if(r===!1){let{enableRotate:w,enablePan:x,enableZoom:_,autoRotate:k,hoverRotatePanMode:A}=this.eventManager.publish.orbitControls;(w||x||_||k||A!==0)&&(this.orbitControls=new GL(i,this.renderer.domElement,{isExport:this.isExport,isPlayMode:!0}),this.orbitControls.addEventListener("change",this.requestRender),this.orbitControls.addEventListener("end",this.requestRender),this.orbitControls.addEventListener("start",this.requestRender),this.orbitControls.fromJSON(this.eventManager.publish.orbitControls,this.eventManager.publish.mouseEventTarget),this.orbitControls.useKeyEvents=!1,this.orbitControls.addEventListenersToCamera(),this.orbitControls.connect(),this.orbitControls.update())}let m=this.renderer.domElement.width/this.renderer.getPixelRatio(),p=this.renderer.domElement.height/this.renderer.getPixelRatio();this.joystickToGameControls.forEach((w,x)=>{let _=document.body.appendChild(document.createElement("div")),[k,A,C]=this.eventManager.eventContext.publish.joystickSizeAndXYOffset[x],M=(m-5*k)/4+k,D={},P=w==="jmp",T=P?0:k;x<10?(x<5?D.top=T/2:D.bottom=T/2,D.left=T/2+x%5*M):x===10?(D.left=T/2,D.top=p/2):(D.right=T/2,D.top=p/2),D.top?D.top-=A[1]:D.bottom+=A[1],D.left?D.left+=A[0]:D.right-=A[0];for(let L in D)D[L]+="px";if(P){let L=_.appendChild(document.createElement("div"));Object.assign(L.style,D,{position:"absolute",width:k+"px",height:k+"px",backgroundColor:`rgba(255,255,255,${C==="show"?.4:0})`,zIndex:"9999",borderRadius:k+"px",border:C==="show"?"solid 2px rgba(0, 0, 0, .1)":"none",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none"});let B=k/16*16*.4;C==="show"&&(L.innerHTML=`
						<svg width="${B}" height="${k*.4}" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M2 10L8 4L14 10" stroke="black" stroke-opacity="40%" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
						</svg>
					`),L.addEventListener("pointerdown",()=>{this.gameControl.movementState.jump=1,this.requestRender()}),L.addEventListener("touchend",j=>j.preventDefault()),this.joysticks[x]=[void 0,_];return}let O={zone:_,mode:"static",position:D,size:k};C==="hide"&&(O.restOpacity=0);let z=Wae.create(O);z.on("move",(L,B)=>{let j=this.gameControl;w==="pos"?B.force<.2?j.moveForce=0:(j.movementState.movePosZ=Math.sin(-B.angle.radian),j.movementState.movePosX=Math.cos(-B.angle.radian),B.force>1.2?j.movementState.run=1:j.movementState.run=0,B.force<.3?j.moveForce=(B.force-.2)/.1:j.moveForce=1):w==="rot"&&(B.force<.2?j.rotForce=0:(j.movementState.rotPosX=B.vector.y,j.movementState.rotPosY=-B.vector.x,B.force<.3?j.rotForce=(B.force-.2)/.1:j.rotForce=1)),this.requestRender()}),z.on("end",(L,B)=>{let j=this.gameControl;w==="pos"?(j.movementState.movePosZ=0,j.movementState.movePosX=0,j.moveForce=1):w==="rot"&&(j.movementState.rotPosX=0,j.movementState.rotPosY=0,j.rotForce=1)}),this.joysticks[x]=[z,_]}),this.markIsDestroyTarget(),this.markIsDragObject(),this.rebuildBVH(),this.initializationCounter++,window.setTimeout(()=>{this.collisionEvents.forEach(w=>w.disabled=!1)},80)}initPhysics(){var c;(c=this.sharedGameControlGlobals.rapierWorld)==null||c.free(),this.sharedGameControlGlobals.rapierWorld=new ji.World(new ji.Vector3(0,this.gravity,0)),this.events=new ji.EventQueue(!0);let t=[],i=[];if(this.page.traverseChildren(u=>{var k,A,C,M;let h;if(u instanceof Vo)if(u.objectForSample){if(u.objectForSample.dataPatched.physics.fusedBody)return;h=u.object}else return u.object.dataPatched.physics.fusedBody===!0&&u.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(u instanceof ma)h=u.object;else if(h=u,((k=h.dataPatched.cloner)==null?void 0:k.disabled)===!1&&((A=h.dataPatched.cloner)==null?void 0:A.hideBase)&&((C=h.dataPatched.physics)==null?void 0:C.fusedBody)!==!0)return!0;let f=h.dataPatched,m;for(let D of f.events)D.data.disabled!==!0&&D.data.type==="GameControl"&&(m=D.data);if(!f.physics||(f.physics.enabled==="visibility"?!f.visible:!f.physics.enabled))return!0;u.updateMatrixWorldSVD();let p=l2(f),g=!1,v=h.userData.hasDestroy,w=h.userData.hasDrag,x=!1;for(let D of f.events)if(D.data.disabled!==!0){if(D.data.type==="Collision"){g=!0;let P=new nle(D.id,D.data,h,this.page,this.sharedAssets,this.eventManager);P.disabled=!0,this.collisionEvents.push(P),this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid]&&this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid].every(T=>T.id!==D.id)?this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid].push(P):this.sharedGameControlGlobals.entityToCollisionEvents[h.uuid]=[P]}else if(D.data.type==="Follow"){x=!0;let P=D.data.target;u.traverseVisible(T=>{T.userData.isFollowingObj=P})}}f.physics.rigidBody==="dynamic"&&f.physics.fusedBody===!1&&(u.matrixWorldFusedFalse=u.matrixWorld.clone());let _=u.geometry;if(m!==void 0){let D=ji.RigidBodyDesc.kinematicPositionBased();(u.hasNonUniformScale?u.matrixWorldRigid:u.matrixWorld).decompose(_r,Xo,su),u.position0=_r.clone().divideScalar(this.pixelsPerMeter),u.rotation0=Xo.clone(),_r.divideScalar(this.pixelsPerMeter),D.setTranslation(_r.x,_r.y,_r.z).setRotation(Xo);let P=this.sharedGameControlGlobals.rapierWorld.createRigidBody(D);u.rigidBody=P;let T;m.collider.type==="sphere"?T=ji.ColliderDesc.ball(m.collider.radius/this.pixelsPerMeter):m.collider.type==="capsule"?T=ji.ColliderDesc.capsule((m.collider.height/2-m.collider.radius)/this.pixelsPerMeter,m.collider.radius/this.pixelsPerMeter):T=ji.ColliderDesc.cuboid(m.collider.width/this.pixelsPerMeter/2,m.collider.height/this.pixelsPerMeter/2,m.collider.depth/this.pixelsPerMeter/2),T.setFrictionCombineRule(ji.CoefficientCombineRule.Average).setRestitutionCombineRule(ji.CoefficientCombineRule.Average).setDensity(f.physics.density).setFriction(f.physics.friction).setRestitution(f.physics.restitution);let O=this.sharedGameControlGlobals.rapierWorld.createCollider(T,P);this.sharedGameControlGlobals.colliderToEntity.set(O.handle,h),_r.fromArray(m.collider.position).multiply(su.setFromMatrixScale(h.matrixWorld)).divideScalar(this.pixelsPerMeter),O.setTranslationWrtParent(_r);let z=new Ut().setFromEuler(new Vr().setFromVector3(new N().fromArray(m.collider.rotation)));O.setRotationWrtParent(z),O.setActiveEvents(ji.ActiveEvents.COLLISION_EVENTS),this.generateSensorColliderDescs(h,!0)}else f.physics.rigidBody==="dynamic"||p||x||v||w||g?(this.addRigidBody(u,h,{hasFollow:x,hasTransformAnim:p,hasDrag:w}),this.generateSensorColliderDescs(h,f.physics.fusedBody)):(_&&t.push(Vd(_,u.matrixWorld)),f.physics.fusedBody&&u.traverseObject((D,P)=>{var L;if(P===0)return;let T;if(D instanceof Vo)if(D.objectForSample){if(D.objectForSample.dataPatched.physics.fusedBody)return;T=D.object}else return D.object.dataPatched.physics.fusedBody===!0&&D.object.dataPatched.physics.rigidBody==="dynamic"?!0:void 0;else if(D instanceof ma)T=D.object;else if(T=D,(L=T.dataPatched.cloner)==null?void 0:L.hideBase)return!0;let O=T.dataPatched;if(O.physics.enabled==="visibility"?!O.visible:!O.physics.enabled)return!0;let z=D.geometry;(z==null?void 0:z.getAttribute("position"))!==void 0&&t.push(Vd(z,D.matrixWorld))}),this.generateSensorColliderDescs(h,f.physics.fusedBody,i));if(((M=f.physics)==null?void 0:M.fusedBody)===!0||m)return!0}),t.length===0)return;let r=oh(t);r.scale(1/this.pixelsPerMeter,1/this.pixelsPerMeter,1/this.pixelsPerMeter);let s=ji.RigidBodyDesc.fixed(),l=this.sharedGameControlGlobals.rapierWorld.createRigidBody(s),d=ji.ColliderDesc.trimesh(r.getAttribute("position").array,r.getIndex().array).setFrictionCombineRule(ji.CoefficientCombineRule.Multiply).setRestitutionCombineRule(ji.CoefficientCombineRule.Multiply).setFriction(1).setRestitution(1);this.sharedGameControlGlobals.rapierWorld.createCollider(d,l);for(let[u,h]of i){let f=this.sharedGameControlGlobals.rapierWorld.createCollider(u,l);this.sensorToTriggerEvent[f.handle]=h}}updatePositions(){return this.nActiveRigidBodies=0,this.sharedGameControlGlobals.rapierWorld.forEachRigidBody(this.processRigidBody),this.nActiveRigidBodies>0}rebuildBVH(){this.usePhysics?this.initPhysics():(this.page.traverseEntity(t=>{for(let i of t.dataPatched.events)if(i.data.type==="Trigger"&&i.data.disabled!==!0){let r=new qL(i.id,i.data,t,this.page,this.sharedAssets,this.eventManager),s=new Ze().compose(Ko.fromArray(i.data.position),pm.setFromEuler($L.fromArray(i.data.rotation)),sT);if(i.data.triggerZone==="box"){let l=new nn;l.min.fromArray(i.data.size).multiplyScalar(-.5),l.max.fromArray(i.data.size).multiplyScalar(.5),this.sharedGameControlGlobals.triggers.push([l,s,t,r])}else this.sharedGameControlGlobals.triggers.push([i.data.radius,s,t,r])}}),this.needsCollisionDetection&&this.initBVH())}disconnectEvents(){this.collisionEvents.forEach(t=>t.disconnect()),this.sharedGameControlGlobals.triggers.forEach(t=>t[3].disconnect()),this.sharedGameControlGlobals.triggers.length=0}deactivate(){var t,i,r,s;if(this.isEnabled){this.isEnabled=!1,this.page.traverse(l=>{let d=l;d.matrixWorldFusedFalse&&(d.matrixWorldFusedFalse=void 0),d.rigidBody&&(d.rigidBody=void 0),d.position0&&(d.position0=void 0),d.rotation0&&(d.rotation0=void 0)}),(t=this.sharedGameControlGlobals.rapierWorld)==null||t.free(),this.sharedGameControlGlobals.rapierWorld=void 0,this.sharedGameControlGlobals.staticMeshBVH=void 0,this.accumulator=0,this.sharedGameControlGlobals.entitiesWithTransformAnim=[],this.disconnectEvents(),(i=this.gameControl)==null||i.reset(),(r=this.gameControl)==null||r.dispose(),this.gameControl=null,this.initializationCounter=-1,this.joysticks.forEach(([l,d])=>{l==null||l.destroy(),d.remove()}),this.joystickToGameControls=[],this.joysticks=[],this.orbitControls&&(this.orbitControls.dispose(),this.orbitControls=void 0),(s=this.navigationMeshWrapper)==null||s.dispose(),this.navigationMeshWrapper=void 0;for(let l of Object.values(this.sharedGameControlGlobals.entityToCollisionEvents))l.forEach(d=>d.disconnect());this.sharedGameControlGlobals.entityToCollisionEvents={},this.page.updateMatrixWorld(!0)}}update(t,i,r){if(!this.isEnabled)return!0;let s=!0;if(this.orbitControls!==void 0&&this.orbitControls.needsUpdate&&(s=!this.orbitControls.update()),this.initializationCounter>=0&&this.initializationCounter<2?(this.initializationCounter++,s=!1):this.initializationCounter===2&&this.gameControl&&(s=!this.gameControl.update(t,i,r)&&s),this.usePhysics===!1&&this.checkTrigger(),this.usePhysics){let l=.016666666666666666;if(t===0)s=this.stepPhysics()&&s;else{let d=t/1e3;d<l&&d>l*.55&&(d=l),this.accumulator+=d;let c=performance.now(),u=0,h=6;for(;this.accumulator>=l&&u<h&&(s=this.stepPhysics()&&s,this.accumulator-=l,u++,!(performance.now()-c>l*1e3)););this.accumulator=this.accumulator%l}}return s}stepPhysics(){var t;for(let i of this.sharedGameControlGlobals.entitiesWithTransformAnim){(i.hasNonUniformScale?i.matrixWorldRigid:i.matrixWorld).decompose(_r,Xo,su),rT.setFromQuaternion(Xo);let r=i;r.prevR===void 0?(r.prevR=rT.clone(),r.prevT=_r.clone()):(r.prevR.copy(rT),r.prevT.copy(_r)),i.rigidBody&&(i.rigidBody.setNextKinematicTranslation(_r.divideScalar(this.pixelsPerMeter)),i.rigidBody.setNextKinematicRotation(Xo))}return this.sharedGameControlGlobals.rapierWorld.step(this.events),(t=this.events)==null||t.drainCollisionEvents(this.handleCollisionEvents),!this.updatePositions()}dispatchCollisionEvent(t,i,r){var d;let s=((d=this.sharedGameControlGlobals.rapierWorld)==null?void 0:d.getCollider(r))._parent,l;if(i.cloner){for(let c of i.cloner.children)if(c.rigidBody===s){l=c;break}}t.dispatch(l),i.dispatchEvent(lT)}updateUseWindowEvents(t){var i;(i=this.orbitControls)==null||i.updateUseWindowEvents(t)}generateSensorColliderDescs(t,i,r){let s=ZL.copy(t.matrixWorld).invert();t.traverseEntity((l,d)=>{if(i===!1&&d===1)return!0;for(let c of l.dataPatched.events)if(c.data.type==="Trigger"&&c.data.disabled!==!0){let u=new qL(c.id,c.data,l,this.page,this.sharedAssets,this.eventManager),h;if(c.data.triggerZone==="box"?h=ji.ColliderDesc.cuboid(...c.data.size.map(f=>f/(2*this.pixelsPerMeter))):h=ji.ColliderDesc.ball(c.data.radius/this.pixelsPerMeter),h.setDensity(0).setSensor(!0).setActiveEvents(ji.ActiveEvents.COLLISION_EVENTS),Ko.fromArray(c.data.position),pm.setFromEuler($L.fromArray(c.data.rotation)),o2.compose(Ko,pm,sT).premultiply(l.matrixWorld),r?(o2.decompose(Ko,pm,aT),h.setActiveCollisionTypes(ji.ActiveCollisionTypes.KINEMATIC_FIXED|ji.ActiveCollisionTypes.DYNAMIC_FIXED)):(o2.premultiply(s).decompose(Ko,pm,aT),t.rigidBody.bodyType()===ji.RigidBodyType.Dynamic||(t.rigidBody.bodyType()===ji.RigidBodyType.Fixed?h.setActiveCollisionTypes(ji.ActiveCollisionTypes.KINEMATIC_FIXED|ji.ActiveCollisionTypes.DYNAMIC_FIXED):h.setActiveCollisionTypes(ji.ActiveCollisionTypes.KINEMATIC_KINEMATIC|ji.ActiveCollisionTypes.DYNAMIC_KINEMATIC))),Ko.divideScalar(this.pixelsPerMeter),h.setTranslation(Ko.x,Ko.y,Ko.z),h.setRotation(pm),r)r.push([h,u]);else{let f=this.sharedGameControlGlobals.rapierWorld.createCollider(h,t.rigidBody);this.sensorToTriggerEvent[f.handle]=u}}})}checkTrigger(){let t;for(let i=0;i<this.sharedGameControlGlobals.triggers.length;i++){let[r,s,l,d]=this.sharedGameControlGlobals.triggers[i];for(let c=0;c<this.sharedGameControlGlobals.entitiesWithTransformAnim.length;c++){let u=this.sharedGameControlGlobals.entitiesWithTransformAnim[c];if(l===u||d.isValidTriggeringObject(Ri.is(u)?u:u.object)===!1)continue;let h=ZL.copy(l.matrixWorld).decompose(Ko,YL,aT).compose(Ko,YL,sT).multiply(s),f=o2.copy(u.matrixWorld).invert().multiply(h);r instanceof nn?t=u.bvhGeometry.boundsTree.intersectsBox(r,f):(oT.radius=r,oT.center.setFromMatrixPosition(f),t=u.bvhGeometry.boundsTree.intersectsSphere(oT)),t?d.currentIntersectedObjects.indexOf(u)===-1&&(d.currentIntersectedObjects.push(u),d.dispatch(),l.dispatchEvent(Ale)):d.currentIntersectedObjects=d.currentIntersectedObjects.filter(m=>m!==u)}}}};function Mle(t){var u;let i=this._clip.duration,r=(u=this._clip.start)!=null?u:0,s=this.loop,l=this.time+t,d=this._loopCount,c=s===hv;if(t===0)return d===-1?l:c&&(d&1)===1?i-(l-r):l;if(s===ww){d===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(l>=i)l=i;else if(l<0)l=0;else{this.time=l;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(d===-1&&(t>=0?(d=0,this._setEndings(!0,this.repetitions===0,c)):this._setEndings(this.repetitions===0,!0,c)),l>=i||l<r){let h=Math.floor((l-r)/(i-r));l-=(i-r)*h,d+=Math.abs(h);let f=this.repetitions-d;if(f<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,c||(l=t>0?i:r,this.repetitions===1&&(l=i)),this.time=l,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(f===1){let m=t<0;this._setEndings(m,!m,c)}else this._setEndings(!1,!1,c);this._loopCount=d,this.time=l,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=l;if(c&&(d&1)===1)return i-(l-r)}return l}var XL=!1,Tle=class{constructor(t,i,r,s){this.scene=t,this.requestRender=i,this.updateDisplayProgress=r,this.animationInspectorState=s,this.clipIdToAction={},this.activeClip=null,this.needsUpdate=!1,this.addClip=l=>{l.data.type==="Empty"&&l.data.animations&&l.data.animations.forEach((d,c)=>{let u=d[0]+"/";if(Array.isArray(l.identity)?u+=l.identity[0]:u+=l.uuid,this.clipIdToAction[u])return;let h=ZA.parse(JSON.parse(d[2]));l.animations[c]=h;let f=this.mixer.clipAction(h,l);XL===!1&&(Object.getPrototypeOf(f)._updateTime=Mle,XL=!0),f.clampWhenFinished=!0,this.clipIdToAction[u]=f})},this.mixer=new MV(t),this.scene.traverseEntity(this.addClip)}deleteClip(t,i){let r=this.scene.find(i);if(!r)return;let s=r.animations.find(d=>d.uuid===t);if(!s)return;let l=this.clipIdToAction[t];!l||(l.stop(),this.mixer.uncacheClip(s),delete this.clipIdToAction[t],r.animations=r.animations.filter(d=>d.uuid!==t))}get isPlaying(){return Object.values(this.clipIdToAction).some(t=>t.isRunning())}playFromInspector(t){this.mixer.stopAllAction();let i=this.clipIdToAction[t];!i||(i.play(),this.activeClip=i.getClip(),this.requestRender())}onExitPlayMode(){Object.values(this.clipIdToAction).forEach(t=>{t.repetitions=1/0,t.loop=xw}),this.mixer.stopAllAction(),this.requestRender()}play(t){let i=t.clipId+"/"+t.object,r=this.clipIdToAction[i];if(r)return t&&(t.repeat>=0&&(r.repetitions=t.repeat+1),t.direction==="pingpong"&&t.repeat!==0&&(r.loop=hv)),r.play(),r.paused=!1,this.requestRender(),r}resumeFromInspector(t){let i=this.clipIdToAction[t];!i||(i.play(),i.paused=!1,this.requestRender())}pauseFromInspector(t){let i=this.clipIdToAction[t];!i||(i.paused=!0)}stop(){this.mixer.stopAllAction(),this.requestRender()}update(t){var i;if(this.needsUpdate)this.needsUpdate=!1;else if(this.isPlaying===!1||(i=this.animationInspectorState)!=null&&i.isScrubbing)return;this.mixer.update(t/1e3),this.activeClip&&this.updateDisplayProgress(Math.round(this.mixer.time/this.activeClip.duration*this.maxFrames%this.maxFrames)),this.requestRender()}get maxFrames(){var t,i,r;return(r=(i=(t=this.activeClip)==null?void 0:t.tracks[0])==null?void 0:i.times.length)!=null?r:0}setProgressFromInspector(t,i){if(!this.clipIdToAction[i])return;this.activeClip!==this.clipIdToAction[i].getClip()&&this.playFromInspector(i);let r=this.clipIdToAction[i].paused;this.clipIdToAction[i].paused=!1,this.mixer.setTime(Math.min(this.maxFrames?t/this.maxFrames:0,.9999)*this.activeClip.duration),this.requestRender(),r&&(this.clipIdToAction[i].paused=!0)}},dT=new WeakMap,Dle=class extends YA{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,i,r,s){let l=new XA(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,d=>{this.decodeDracoFile(d,i).catch(s)},r,s)}decodeDracoFile(t,i,r,s){let l={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:s||this.defaultAttributeTypes,useUniqueIDs:!!r};return this.decodeGeometry(t,l).then(i)}decodeGeometry(t,i){let r=JSON.stringify(i);if(dT.has(t)){let u=dT.get(t);if(u.key===r)return u.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let s,l=this.workerNextTaskID++,d=t.byteLength,c=this._getWorker(l,d).then(u=>(s=u,new Promise((h,f)=>{s._callbacks[l]={resolve:h,reject:f},s.postMessage({type:"decode",id:l,taskConfig:i,buffer:t},[t])}))).then(u=>this._createGeometry(u.geometry));return c.catch(()=>!0).then(()=>{s&&l&&this._releaseTask(s,l)}),dT.set(t,{key:r,promise:c}),c}_createGeometry(t){let i=new Nt;t.index&&i.setIndex(new Qt(t.index.array,1));for(let r=0;r<t.attributes.length;r++){let s=t.attributes[r],l=s.name,d=s.array,c=s.itemSize;i.setAttribute(l,new Qt(d,c))}return i}_loadLibrary(t,i){let r=new XA(this.manager);return r.setPath(this.decoderPath),r.setResponseType(i),r.setWithCredentials(this.withCredentials),new Promise((s,l)=>{r.load(t,s,void 0,l)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;let t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",i=[];return t?i.push(this._loadLibrary("draco_decoder.js","text")):(i.push(this._loadLibrary("draco_wasm_wrapper.js","text")),i.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(i).then(r=>{let s=r[0];t||(this.decoderConfig.wasmBinary=r[1]);let l=Ple.toString(),d=["/* draco decoder */",s,"","/* worker */",l.substring(l.indexOf("{")+1,l.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([d]))}),this.decoderPending}_getWorker(t,i){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){let s=new Worker(this.workerSourceURL);s._callbacks={},s._taskCosts={},s._taskLoad=0,s.postMessage({type:"init",decoderConfig:this.decoderConfig}),s.onmessage=function(l){let d=l.data;switch(d.type){case"decode":s._callbacks[d.id].resolve(d);break;case"error":s._callbacks[d.id].reject(d);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+d.type+'"')}},this.workerPool.push(s)}else this.workerPool.sort(function(s,l){return s._taskLoad>l._taskLoad?-1:1});let r=this.workerPool[this.workerPool.length-1];return r._taskCosts[t]=i,r._taskLoad+=i,r})}_releaseTask(t,i){t._taskLoad-=t._taskCosts[i],delete t._callbacks[i],delete t._taskCosts[i]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}};function Ple(){let t,i;onmessage=function(c){let u=c.data;switch(u.type){case"init":t=u.decoderConfig,i=new Promise(function(m){t.onModuleLoaded=function(p){m({draco:p})},DracoDecoderModule(t)});break;case"decode":let h=u.buffer,f=u.taskConfig;i.then(m=>{let p=m.draco,g=new p.Decoder,v=new p.DecoderBuffer;v.Init(new Int8Array(h),h.byteLength);try{let w=r(p,g,v,f),x=w.attributes.map(_=>_.array.buffer);w.index&&x.push(w.index.array.buffer),self.postMessage({type:"decode",id:u.id,geometry:w},x)}catch(w){console.error(w),self.postMessage({type:"error",id:u.id,error:w.message})}finally{p.destroy(v),p.destroy(g)}});break}};function r(c,u,h,f){let m=f.attributeIDs,p=f.attributeTypes,g,v,w=u.GetEncodedGeometryType(h);if(w===c.TRIANGULAR_MESH)g=new c.Mesh,v=u.DecodeBufferToMesh(h,g);else if(w===c.POINT_CLOUD)g=new c.PointCloud,v=u.DecodeBufferToPointCloud(h,g);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!v.ok()||g.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+v.error_msg());let x={index:null,attributes:[]};for(let _ in m){let k=self[p[_]],A,C;if(f.useUniqueIDs)C=m[_],A=u.GetAttributeByUniqueId(g,C);else{if(C=u.GetAttributeId(g,c[m[_]]),C===-1)continue;A=u.GetAttribute(g,C)}x.attributes.push(l(c,u,g,_,k,A))}return w===c.TRIANGULAR_MESH&&(x.index=s(c,u,g)),c.destroy(g),x}function s(c,u,h){let f=h.num_faces()*3,m=f*4,p=c._malloc(m);u.GetTrianglesUInt32Array(h,m,p);let g=new Uint32Array(c.HEAPF32.buffer,p,f).slice();return c._free(p),{array:g,itemSize:1}}function l(c,u,h,f,m,p){let g=p.num_components(),v=h.num_points()*g,w=v*m.BYTES_PER_ELEMENT,x=d(c,m),_=c._malloc(w);u.GetAttributeDataArrayForAllPoints(h,p,x,w,_);let k=new m(c.HEAPF32.buffer,_,v).slice();return c._free(_),{name:f,array:k,itemSize:g}}function d(c,u){switch(u){case Float32Array:return c.DT_FLOAT32;case Int8Array:return c.DT_INT8;case Int16Array:return c.DT_INT16;case Int32Array:return c.DT_INT32;case Uint8Array:return c.DT_UINT8;case Uint16Array:return c.DT_UINT16;case Uint32Array:return c.DT_UINT32}}}var ou;function Ole(){return ou||(ou=new Dle,ou.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload()),ou.decoderPending}function Ile(t){return qi(this,null,function*(){if(ou){let i={attributeIDs:ou.defaultAttributeIDs,attributeTypes:ou.defaultAttributeTypes,useUniqueIDs:!1},r;try{r=yield ou.decodeGeometry(new Int8Array(t).buffer,i)}catch(s){console.error(s)}if(r)return{index:r.index?{array:r.index.array}:void 0,attributes:Object.entries(r.attributes).map(([s,l])=>({name:s,itemSize:l.itemSize,array:l.array}))}}return null})}function Rle(t,i){return qi(this,null,function*(){let[r,s]=BO(iE.deserialize(new Uint8Array(t)));JI(r);let l=[];r.scene.objects.traverse((d,c)=>{c.type==="Mesh"&&c.geometry.type==="NonParametricGeometry"&&c.geometry.data.draco!==void 0&&l.push(c)}),l.length&&(yield Ole());for(let d of l){let c=yield Ile(yr(d.geometry.data.draco));if(c){c.index&&(d.geometry.data.index={array:c.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});let u={};c.attributes.forEach(({name:h,array:f,itemSize:m})=>{u[h]={array:f,itemSize:m,type:"Float32Array",normalized:!1}}),d.geometry.data.attributes=u,d.geometry.data.draco=void 0}}return i&&i(r),s.result().data})}var zle=class{constructor(t,i,r,s,l,d,c){this.id=t,this.data=i,this.dataEvent=r,this.object=s,this.stage=!1,this.actions=Ya(r,i.actions,l,d,c,s)}disconnect(){qr(this.actions)}dispatchIn(){this.actions.Audio.forEach(t=>t.dispatchBasic()),this.actions.Video.forEach(t=>t.dispatchBasic()),this.actions.Create.forEach(t=>t.dispatch()),this.actions.Destroy.forEach(t=>t.dispatch()),this.actions.Reset.forEach(t=>t.dispatch()),this.actions.Link.forEach(t=>t.dispatch()),this.actions.Transition.forEach(t=>{t.object.currentTransitionEvent!==this&&(t.object.currentTransitionEvent=this,t.init())}),this.actions.Transition.forEach(t=>t.toggle()),this.actions.Animation.forEach(t=>t.play()),this.actions.SwitchCamera.forEach(t=>t.play()),this.actions.SceneTransition.forEach(t=>t.dispatch()),this.actions.SetVariable.forEach(t=>t.checkConditions()),this.actions.SetVariable.forEach(t=>t.dispatch()),this.actions.DynamicVariablePlay.forEach(t=>t.dispatch())}dispatchOut(){this.actions.Transition.forEach(t=>{t.toggle()})}},Lle=class extends Yo{constructor(t,i){super(t),this.eventManager=i,this.breakpoints=[],this.resize=(r,s)=>{this.breakpoints.forEach(l=>{let d=sE.deviceToSize(l.data.size),c=l.dataEvent.orientation==="horizontal"?r:s,u;switch(l.data.operator){case"<":u=c<d[0];break;case">":u=c>d[0];break;case"<>":u=c>d[0]&&c<d[1];break}l.stage!==u&&(l.stage=u,l.stage?l.dispatchIn():l.dispatchOut())})},this.onResizeObserver=new ResizeObserver(r=>{for(let s of r){let{width:l,height:d}=s.contentRect;this.resize(l,d)}})}connect(){let{page:t,sharedAssets:i,domElement:r}=this.eventContext;this.onResizeObserver.observe(r),t.traverseEntity(s=>{var l;if(!(!s.visible||!((l=s.data)!=null&&l.events.length)))for(let{data:d}of s.data.events)d.disabled||d.type==="Resize"&&d.breakpoints.forEach(({data:c,id:u})=>{try{let h=new zle(u,c,d,s,t,i,this.eventManager);this.breakpoints.push(h)}catch(h){}})})}disconnect(){this.onResizeObserver.disconnect(),this.breakpoints.forEach(t=>{t.disconnect()}),this.breakpoints=[]}},Ble=class{constructor(t,i,r,s,l){this.publish=t,this.controlsManager=i,this.animationControls=r,this.eventContext=s,this.sharedVariables=l,this.isEnabled=!1,this.activateCount=0,this.needsMouse=!1,this.needsRaycast=!1,this.onTouchMovePreventScroll=d=>{(d.touches.length>1||this.preventTouchScroll)&&d.preventDefault()},this.onMouseWheelPreventScroll=d=>{this.preventScroll&&d.preventDefault()},this.onMouseMove=d=>{this.eventContext.sharedAssets.mouseProperty=ge(Z({},this.getMousePosition(d)),{pressed:d.buttons>0})},this.onMouseDown=d=>{this.eventContext.sharedAssets.mouseProperty=ge(Z({},this.getMousePosition(d)),{pressed:!0})},this.onMouseUp=d=>{this.eventContext.sharedAssets.mouseProperty=ge(Z({},this.getMousePosition(d)),{pressed:!1})},this.getMousePosition=d=>{var f;let{domRect:c}=this.eventContext,{pageX:u,pageY:h}=((f=d.touches)==null?void 0:f.length)>0?d.touches[0]:d;return{x:u-(c.left+window.scrollX),y:h-(c.top+window.scrollY)}},this.stopRaycast=t.stopRaycast,this.preventScroll=t.preventScroll,this.preventTouchScroll=t.preventTouchScroll,this.hideCursor=t.hideCursor,this.requestRender=s.requestRender}activate(){if(this.isEnabled)return;this.isEnabled=!0,this.initializeActionsDependentStates(),this.needsMouse&&(this.eventContext.domElement.addEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.addEventListener("pointerdown",this.onMouseDown)),this.handlers={Spline:new Coe(this.eventContext),DynamicVariable:new rle(this.eventContext,this.sharedVariables,this,this.needsMouse,this.needsRaycast),Conditional:new Ioe(this.eventContext,this),Start:new ile(this.eventContext,this),Basic:new Moe(this.eventContext,this,this.needsRaycast),MouseHover:new Koe(this.eventContext,this),Scroll:new ele(this.eventContext,this),Follow:new Hoe(this.eventContext,this),DragDrop:new Foe(this.eventContext,this),LookAt:new Zoe(this.eventContext),Resize:new Lle(this.eventContext,this)};let{page:t,domElement:i,eventElement:r}=this.eventContext;this.hideCursor&&(i.style.cursor="none"),t.traverseEntity(s=>{s.addEventListener("requestRender",this.requestRender)}),Object.values(this.handlers).forEach(s=>s.connect()),i.addEventListener("wheel",this.onMouseWheelPreventScroll),i.addEventListener("touchmove",this.onTouchMovePreventScroll),this.activateCount++}deactivate(){var r;if(!this.isEnabled)return;this.isEnabled=!1,this.eventContext.domElement.removeEventListener("pointermove",this.onMouseMove),this.eventContext.domElement.removeEventListener("pointerdown",this.onMouseDown),this.eventContext.domElement.removeEventListener("pointerup",this.onMouseUp),this.eventContext.sharedAssets.mouseProperty=null,this.eventContext.sharedAssets.raycastProperty=null;let{page:t,domElement:i}=this.eventContext;i.style.cursor="",Object.values(this.handlers).forEach(s=>s.disconnect()),(r=this.controlsManager.gameControl)==null||r.disposeActions(),this.controlsManager.disconnectEvents(),t.traverseEntity(s=>{s.removeEventListener("requestRender",this.requestRender),s.destroyedInAction=!1}),i.removeEventListener("touchmove",this.onTouchMovePreventScroll),i.removeEventListener("wheel",this.onMouseWheelPreventScroll),this.animationControls.onExitPlayMode()}get isPaused(){return this.isEnabled}pause(){this.deactivate()}resume(){this.activate()}reset(){this.deactivate(),this.activate(),this.controlsManager.page.updateMatrixWorld(!0),this.controlsManager.rebuildBVH()}updateUseWindowEvents(t){let i=this.isEnabled;i&&this.deactivate(),this.eventContext.useWindowEvents=t,i&&this.activate()}initializeActionsDependentStates(){let t=this.eventContext.sharedAssets;t.resetDynamicVariablePlayState();let i=r=>{if(r.data.type==="Conditional"&&(r.data.ifActions.forEach(i),r.data.elseActions.forEach(i)),r.data.type==="Conditional"||r.data.type==="SetVariable")for(let s of r.data.type==="Conditional"?r.data.condition:r.data.expression)"id"in s&&Array.isArray(s.id)&&(s.id[0]==="mouse"&&(this.needsMouse=!0),s.id[0]==="raycast"&&(this.needsRaycast=!0));r.data.type==="DynamicVariablePlay"&&r.data.variableId!==""&&(r.data.mode==="Play"||r.data.mode==="PlayPause"||r.data.mode==="Toggle")&&t.setDynamicVariablePlayState(r.data.variableId,"Stopped")};this.eventContext.page.traverseEntity(r=>{var s;if((s=r.data)!=null&&s.events.length){for(let l of r.data.events)if(!l.data.disabled)if(l.data.type==="VariableChange"&&(l.data.variableId==="mouseProperty"&&(this.needsMouse=!0),l.data.variableId==="raycastProperty"&&(this.needsRaycast=!0)),l.data.type==="Conditional")for(let d of["inActions","outActions"])l.data[d].forEach(i);else if(l.data.type==="DragDrop")for(let d of["drag","drop"])l.data.dragDropActions[d].forEach(i);else if(l.data.type==="GameControl")for(let d of["idle","move","jump","run"])l.data.gameActions[d].forEach(i);else if(l.data.type==="Resize")for(let d of l.data.breakpoints)d.data.actions.forEach(i);else l.data.type==="LookAt"||l.data.actions.forEach(i)}})}},Fle=class{constructor(t,i,r,s,l){this._aspect=1,this.enableResponsive=!1,this._renderer=t,this._camera=i,this._frameSize=new q().copy(r),this._editorSize=new q().copy(s),this._aspect=i.aspect,this._fov=l!=null?l:i.fov}set frameSize(t){this._frameSize.copy(t)}updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y)}updateViewport(){if(!this._renderer||!this._camera||this._camera.cameraType!=="PerspectiveCamera")return;let t=this._frameSize.x,i=this._frameSize.y,r=this._editorSize.y;this._aspect=t/i,i<=r&&(this._camera.zoom*=r/i),this._renderer.setViewport(0,0,t,i)}updateCamera(t=!0){if(this._camera)if(this._camera.cameraType==="PerspectiveCamera"){let i=this._frameSize.y,r=this._editorSize.y,s=this._fov;if(t&&i>r){let l=Nle(i,1080,2160,1,15)/100;s*=i/r,s*=1-l}this._camera.aspect=this._aspect,this._camera.fov=s,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y,this.enableResponsive)}setCamera(t){this._camera=t,this._aspect=t.aspect,this._fov=t.fov}revert(){let t=window.innerWidth,i=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,t,i),this._renderer.setSize(t,i)),this._camera&&(this._camera.aspect=t/i,this._camera.fov=this._fov,this._camera.setViewplaneSize(t,i,this.enableResponsive),this._camera.updateProjectionMatrix())}};function Nle(t,i,r,s,l){return(t-i)/(r-i)*(l-s)+s}var jle=class{get sharedAssets(){return this.shared}constructor(t,i={}){this.shared=new zM(t.shared,i),this.scene=new b4(t.scene,this.sharedAssets),this.shared.setEntityOpContext({scene:this.scene,shared:this.shared})}reset(t,i){this.scene.clearScene(),this.sharedAssets.reset(t.shared),this.scene.resetAfterClear(t.scene,this.sharedAssets)}resetPersonalCameraFromDocumentData(){for(let t of this.scene.children)t instanceof Jc&&t.personalCamera.updateState(t.data.camera,{scene:this.scene,shared:this.shared})}dispose(){this.scene.dispose(),this.shared.dispose()}gc(){this.shared.geometryCache.startGc(),this.shared.geometryCache2.startGc(),this.scene.traverseEntity(t=>{t instanceof qa&&t.markGeometryAsReachable(this.shared)}),this.shared.geometryCache.endGc(),this.shared.geometryCache2.endGc()}},Ule=class{constructor({x:t=10,y:i=10}){this._startTime=0;let r=document.getElementById("spe-perfs");r?this.element=r:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left=`${t}px`,this.element.style.top=`${i}px`}dispose(){var t;(t=this.element.parentElement)==null||t.removeChild(this.element)}start(){this._startTime=performance.now()}end(){let t=performance.now()-this._startTime;this.element.innerHTML=t.toFixed(3)+" ms"}};function Vle(t){let i;if(t.index)for(let r=0;r<t.index.array.length;r+=3)i=t.index.array[r],t.index.array[r]=t.index.array[r+2],t.index.array[r+2]=i}function j0(t){return t instanceof x0?"SubdivObject":t.geometry.type==="NonParametricGeometry"?"NonParametric":"Mesh"}function Hle(t,i){let r={};return t.traverseEntity(s=>{var h;if(!s.visible||!(s instanceof ds)||s.type!=="Mesh"||Array.isArray(s.material)||s.states&&Object.keys(s.states).length)return;let l=s.parent;for(;l;){if(l instanceof ds&&s.states&&Object.keys(s.states).length)return;l=l.parent}let d=s.material.uuid,c=i.shared.materials[d];if(c){if(!pa.isMergable(c))return}else{let f=(h=i.scene.objects.get(s.uuid))==null?void 0:h.data;if(f&&"material"in f&&typeof f.material!="string"){if(!pa.isMergable(f.material))return;d=pa.getHash(f.material)}}r[d]||(r[d]={});let u=r[d][j0(s)];if(u){if(u.push(s),s.cloner)for(let f of s.cloner.children)u.push(f)}else if(r[d][j0(s)]=[s],s.cloner)for(let f of s.cloner.children)r[d][j0(s)].push(f)}),r}function Gle(t){let i=0;return Object.values(t).forEach(r=>{Object.values(r).forEach(s=>{let l=s.length;l>i&&(i=l)})}),i}function Wle(t,i){let r=Hle(i,t),s=Gle(r),l=new Array(s),d=0,c=new Array(s),u=0,h=new Array(s),f=0,m=new Array(s),p=0;for(let[g,v]of Object.entries(r))for(let w of Object.values(v)){if(u=0,f=0,w.forEach(_=>{_ instanceof ds&&(c[u++]=_.geometry.clone(),h[f++]=_)}),f<2)continue;for(let _=0;_<f;_++)h[_].updateWorldMatrix(!0,!1),c[_].applyMatrix4(h[_].matrixWorld),h[_].matrixWorld.determinant()<0&&Vle(c[_]);let x=oh(c.slice(0,u),!1);if(x){let _;switch(g){case"SubdivObject":{console.warn("Turning subdiv object into mesh"),_=new za(x,h[0].material);break}default:{_=new za(x,h[0].material);break}}_.castShadow=h[0].castShadow,_.receiveShadow=h[0].receiveShadow,i.add(_);let k=A=>{p=0;for(let C of A)C.children&&k(C.children),C instanceof ds&&(Array.isArray(C.material)||r[C.material.uuid]&&r[C.material.uuid][j0(C)]&&r[C.material.uuid][j0(C)].length>1||(m[p++]=C));for(let C=0;C<p;C++)i.attach(m[C])};for(let A=0;A<f;A++){let C=h[A];k(C.children),l[d++]=C}}}for(let g=0;g<d;g++)l[g].removeFromParent()}var qle=sn(IS(),1),$le=new q;function Zle(t){let i="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.";t.endsWith(".spline")?console.warn(i+" The .spline files are only meant to be used by the Editor."):t.endsWith(".splinecode")||console.warn(i)}var Yle=class{constructor(t,{renderOnDemand:i,renderMode:r="auto"}={}){this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._variablesCache=new Map,this._isPaused=!1,this._renderRequested=!1,this._skipRender=!1,this.time=performance.now(),this.dt=0,this.currentTAAFrame=0,this.disposed=!1,this._requestRenderAutoMode=()=>{this._skipRender=!1},this.requestRender=()=>{this._renderRequested=!0},this.render=s=>{var l,d,c,u,h,f,m,p,g,v,w,x;if(this.time=s,this._lastTime&&(this.dt=this.time-this._lastTime),this._lastTime=this.time,(l=this._perfs)==null||l.start(),!this._renderer){(d=this._perfs)==null||d.end();return}if(!this._isPaused&&(this.renderMode==="manual"&&!this._renderRequested||this.renderMode==="auto"&&this._skipRender)){(c=this._perfs)==null||c.end();return}if(this._renderRequested=!1,this._skipRender=!0,this._controls&&(this._skipRender=this._controls.update(this.dt)),this._eventManager&&((u=this._eventManager.handlers)!=null&&u.Start.hasVideoAction||(h=this._eventManager.handlers)!=null&&h.Basic.hasVideoAction||(f=this._eventManager.handlers)!=null&&f.Conditional.hasVideoAction)&&(this._skipRender=!1),(m=this._animationControls)==null||m.update(this.dt),this._skipRender?(this.currentTAAFrame++,this.currentTAAFrame<32?this._skipRender=!1:this.currentTAAFrame=0):this.currentTAAFrame=0,this._scene&&this._scene.activeCamera!==this._camera&&(this._camera=this._scene.activeCamera),(p=this._eventManager)!=null&&p.isEnabled&&(((g=this._eventManager.handlers)==null?void 0:g.Follow).onAnimationFrameDamping(),((v=this._eventManager.handlers)==null?void 0:v.LookAt).onAnimationFrameDamping(),((w=this._eventManager.handlers)==null?void 0:w.DragDrop).onAnimationFrameDamping()),this._scene&&this._camera){if(this._scene.pathConstraints.applyConstraints(this._scene),this._renderer.sceneTransitionTimeRemaining>0){this._renderer.sceneTransitionTimeRemaining-=this.dt;let _=1-this._renderer.sceneTransitionTimeRemaining/this._renderer.sceneTransitionDuration;this._renderer.pipeline.sceneTransitionPass.uniforms.mixRatio.value=_,this._skipRender=!1}else this._renderer.pipeline.sceneTransitionFromTexture=null;this._renderer.renderSplineScene(this._scene,this._camera)}this.canvas.dispatchEvent(this._renderedEvent),(x=this._perfs)==null||x.end()},this._resize=()=>{var s,l,d,c,u,h,f,m,p,g,v,w,x,_,k;if(this._renderer){if(this._viewportMode===1&&this._frameView&&(this._frameView.frameSize=$le.set(this._viewportWidth,this._viewportHeight)),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._camera=(s=this._scene)==null?void 0:s.activeCamera,(g=this._scene)==null||g.updateViewPlaneSize((c=(d=(l=this._frameView)==null?void 0:l.frameSize)==null?void 0:d.x)!=null?c:this._viewportWidth,(f=(h=(u=this._frameView)==null?void 0:u.frameSize)==null?void 0:h.y)!=null?f:this._viewportHeight,(p=(m=this._frameView)==null?void 0:m.enableResponsive)!=null?p:!1),this._camera){let A=(x=Object.values((w=(v=this._data)==null?void 0:v.frames)!=null?w:{})[0].preset)!=null?x:"fullscreen";(_=this._frameView)==null||_.setCamera(this._camera),(k=this._frameView)==null||k.updateCamera(A!=="fullscreen"),this._camera.cameraType==="PerspectiveCamera"&&(this._camera.aspect=this._viewportWidth/this._viewportHeight),this._camera.updateProjectionMatrix()}this.eventManager&&(this.eventManager.eventContext.domRect=this.canvas.getBoundingClientRect()),this._requestRenderAutoMode()}},this._debouncedResize=DC(this._resize,10),this.canvas=t,this.renderMode=i?"auto":r,this._renderedEvent=new CustomEvent("rendered",{bubbles:!0}),Object.defineProperty(this._renderedEvent,"target",{writable:!1,value:this}),window.location.search.includes("perfs")&&(this._perfs=new Ule({x:10,y:10})),dK(t)}load(t,i,r){return qi(this,null,function*(){Zle(t),this.disposed=!1;let s=yield(yield fetch(t,r)).arrayBuffer();yield this.start(s,{variables:i})})}start(s){return qi(this,arguments,function*(t,{interactive:i=!0,variables:r}={}){var h,f,m,p;if(this.disposed)return;let l=yield Rle(t);this._data=l,l.version&&(0,qle.default)(l.version,"0.9.526")>0&&console.warn("Your .splinecode file is more recent than the library. Please upgrade @splinetool/runtime to the latest version."),yield Promise.all([P9(l)&&Gee(),Rie(l)&&jee(),Qv.physicsEnabled(l.scene.objects)&&pK(),x9(l)&&wie(),mle(l)&&hK()].filter(Boolean)),(h=this._eventManager)==null||h.deactivate(),(f=this._controls)==null||f.deactivate(),(m=this._scene)==null||m.dispose();let d=new jle(l);if(d.resetPersonalCameraFromDocumentData(),this._scene=d.scene,this._sharedAssetsManager=d.sharedAssets,this._camera=this._scene.activeCamera,window.location.search.includes("merge-geometries")){let g=performance.now();Wle(l,d.scene);let v=performance.now();console.log("Merged geometries in ",v-g," ms")}P9(l)&&this._scene.traverse(g=>{Bd(g)&&g.recomputeBoolean()}),this._sharedAssetsManager.setRequestRender(()=>{var g;this._requestRenderAutoMode(),(g=this._scene)==null||g.traverse(v=>{v instanceof Vo&&v.pendingMediaLoad&&v.update()})});let c=Object.keys(l.shared.fonts).map(g=>this._sharedAssetsManager.getFont(g).loadingPromise);Promise.all(c).then(()=>{d.scene.markNeedsUpdateRendererDirty(),this._requestRenderAutoMode()}),x9(l)&&Cle(l)&&(yield Promise.all(c)),this._scene.rewriteEventsBeforeGoToPlayMode(),U4(this._scene.activePage,this._sharedAssetsManager),this._renderer||(this._renderer=new dae({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._renderer.hdTransmission=l.scene.publish.hdTransmission===!0,this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.pipeline.addEventListener("smaaloaded",this._requestRenderAutoMode)),this._scene.initializeSplatViewer(this._renderer),l.scene.blueNoiseTextureData!==void 0&&this._renderer.pipeline.updateBlueNoiseTexture(l.scene.blueNoiseTextureData);let u=Object.values(l.frames)[0];if(this._frameView?this._frameView.setCamera(this._camera):(u.preset==="fullscreen"?(this._viewportMode=1,this.canvas.style.display="block",this.canvas.parentElement&&(this._viewportWidth=this.canvas.parentElement.clientWidth||300,this.canvas.style.width="100%"),this.canvas.parentElement&&(this._viewportHeight=this.canvas.parentElement.clientHeight||150,this.canvas.style.height="100%")):(this._viewportMode=2,this._viewportWidth=u.size[0],this._viewportHeight=u.size[1],this.canvas.style.width=`${this._viewportWidth}px`,this.canvas.style.height=`${this._viewportHeight}px`),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._frameView=new Fle(this._renderer,this._camera,new q(this._viewportWidth,this._viewportHeight),new q(window.innerWidth,window.innerHeight)),this._frameView.enableResponsive=((p=u.allowResponsive)!=null?p:!1)&&u.preset==="fullscreen"),i){let g=new Soe(this._renderer,this.data.scene.publish,this._scene,()=>this._scene.activeCamera,this._sharedAssetsManager,this._requestRenderAutoMode,!0,u);this._scene.updateMatrixWorld(!0),this._controls=new Ele(g),this._animationControls=new Tle(this._scene,this._requestRenderAutoMode),this._eventManager=new Ble(l.scene.publish,this._controls,this._animationControls,g,l.shared.variables),this._eventManager.activate(),this._controls.activate(this._eventManager)}this._resize(),r!==void 0&&this.setVariables(r),this.dt===0&&(this.render(performance.now()),setTimeout(()=>{var g;(g=this._renderer)==null||g.setAnimationLoop(this.render)},0)),this._resizeObserverTimeout=setTimeout(()=>{!this._resizeObserver&&this.canvas.parentElement&&(this._resizeObserver=new ResizeObserver(()=>{this._viewportWidth=this.canvas.clientWidth,this._viewportHeight=this.canvas.clientHeight,this._debouncedResize()}),this._resizeObserver.observe(this.canvas.parentElement))},300)})}setVariables(t){if(this._data!==void 0){let i=Object.entries(t);for(let[r,s]of i)this.setVariable(r,s)}}setVariable(t,i){var s;let r=this._getVariableByName(t);if(r&&!("dynamicVariableType"in r.data)){let l=i;typeof r.data.value=="number"?l=typeof i=="number"?i:typeof i=="boolean"?i===!0?1:0:parseFloat(i):typeof r.data.value=="boolean"?l=typeof i=="number"?!!i:typeof i=="boolean"?i:i.toLocaleLowerCase()==="false"?!1:!!i:typeof r.data.value!="string"&&r.data.value.textValue!==void 0&&(l=i.toString());let d=typeof l=="string"?{textValue:l}:l;(s=this._sharedAssetsManager)==null||s.updateVariable(r.id,d),this.requestRender(),this._requestRenderAutoMode()}else r===void 0?console.warn(`No variable named ${t} was found in your Spline file. Make sure to create it from Spline editor.`):"dynamicVariableType"in r.data&&console.warn(`Dynamic variables like ${t} cannot be updated from code.`)}getVariables(){let t={};return this._data&&this._data.shared.variables.forEach(i=>{t[i.data.name]===void 0&&(t[i.data.name]=this._getVariableValue(this._sharedAssetsManager.getVariable(i.id)))}),t}getVariable(t){let i=this._getVariableByName(t);if(i){let r=this._sharedAssetsManager.getVariable(i.id);return this._getVariableValue(r)}}_getVariableValue(t){return typeof t!="string"&&zs.isTextValue(t)?zs.getDisplayedValue(t):t}_getVariableByName(t){if(this._data){if(this._variablesCache.has(t))return this._variablesCache.get(t);let i=this._data.shared.variables.find(r=>r.data.name===t);return i&&this._variablesCache.set(t,i),i}}findObjectById(t){var r;let i=(r=this._scene)==null?void 0:r.getObjectByProperty("uuid",t);return this._createProxyObject(i)}findObjectByName(t){var r;let i=(r=this._scene)==null?void 0:r.getObjectByName(t);return this._createProxyObject(i)}getAllObjects(){var i;let t=[];return(i=this._scene)==null||i.traverseEntity(r=>{if(r.uuid!==pp&&!this._scene.isInvisibleObjects(r)&&!(r instanceof Jc)){let s=this._createProxyObject(r);s&&t.push(s)}}),t}getSplineEvents(){var t,i;return((i=(t=this._eventManager)==null?void 0:t.handlers)==null?void 0:i.Spline).splineEvents}emitEvent(t,i){var r;(r=this.findObjectById(i)||this.findObjectByName(i))==null||r.emitEvent(t)}emitEventReverse(t,i){var r;(r=this.findObjectById(i)||this.findObjectByName(i))==null||r.emitEventReverse(t)}addEventListener(t,i){this.canvas.addEventListener(t,i)}removeEventListener(t,i){this.canvas.removeEventListener(t,i)}setZoom(t){var i,r;((i=this._controls)==null?void 0:i.orbitControls)instanceof GL&&((r=this._controls)==null||r.orbitControls.zoomOut(t))}get eventManager(){return this._eventManager}get controls(){return this._controls}setSize(t,i){this._viewportWidth=t,this._viewportHeight=i,this._viewportMode=2,this._resize()}setBackgroundColor(t){var c;let{r:i,g:r,b:s,a:l}={r:0,g:0,b:0,a:1},d=new hs(i,r,s,l);try{d.setStyle(t)}catch(u){console.error("This is not a valid css color",t)}(c=this._scene)==null||c.activePage.setBackgroundColor(d),this._requestRenderAutoMode()}dispose(){var t,i,r,s,l,d,c;this.disposed=!0,(t=this._eventManager)==null||t.deactivate(),(i=this._scene)==null||i.dispose(),(r=this._sharedAssetsManager)==null||r.dispose(),this._proxyObjectCache.forEach(u=>{m6.unsubscribe(u)}),this._variablesCache.clear(),(s=this._renderer)==null||s.setAnimationLoop(null),(l=this._renderer)==null||l.dispose(),this._renderer=void 0,(d=this._sharedAssetsManager)==null||d.dispose(),this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=void 0),this._resizeObserverTimeout!==void 0&&clearTimeout(this._resizeObserverTimeout),this.canvas.style.width="",this.canvas.style.height="",this.canvas.removeAttribute("width"),this.canvas.removeAttribute("height"),this._frameView&&(this._frameView=void 0),(c=this._controls)==null||c.deactivate(),cK(this.canvas)}get isStopped(){return this._isPaused}stop(){var t,i,r;this._isPaused||((t=this._renderer)==null||t.setAnimationLoop(null),this._isPaused=!0,(i=this._eventManager)==null||i.pause(),(r=this._controls)!=null&&r.orbitControls&&(this._controls.orbitControls.enabled=!1))}play(){var t,i,r;!this._isPaused||(this._isPaused=!1,(t=this._eventManager)==null||t.resume(),(i=this._controls)!=null&&i.orbitControls&&(this._controls.orbitControls.enabled=!0),(r=this._renderer)==null||r.setAnimationLoop(this.render))}setGlobalEvents(t){var i;(i=this._eventManager)==null||i.updateUseWindowEvents(t)}get data(){return this._data}_createProxyObject(t){var l;if(t==null)return;if(this._proxyObjectCache.has(t.uuid))return this._proxyObjectCache.get(t.uuid);let i;t.traverseAncestors(d=>{d instanceof Jc&&(i=d.name)});let r={name:t.name,uuid:t.uuid,visible:t.visible,intensity:t.intensity,position:t.position,rotation:t.rotation,scale:t.scale,type:t.data.type,page:i,parentUuid:t.parent instanceof Jc||t instanceof b4||(l=t.parent)==null?void 0:l.uuid,emitEvent(d){t.dispatchEvent({type:"userEvent",eventName:d})},emitEventReverse(d){t.dispatchEvent({type:"userEvent",eventName:d,reverse:!0})}},s=m6(r,(d,c)=>{var u;typeof t[d]!="object"&&((u=Object.getOwnPropertyDescriptor(t,d))!=null&&u.writable)&&(t[d]=c),this._requestRenderAutoMode(),t.updateMatrix()});return this._proxyObjectCache.set(t.uuid,s),s}},cT=de(82433),Xle=de(99615),Kle=function(){return Xle.Z.Date.now()},uT=Kle,Qle=/\s/;function Jle(t){for(var i=t.length;i--&&Qle.test(t.charAt(i)););return i}var ede=Jle,tde=/^\s+/;function ide(t){return t&&t.slice(0,ede(t)+1).replace(tde,"")}var nde=ide,rde=de(98111),KL=0/0,ade=/^[-+]0x[0-9a-f]+$/i,sde=/^0b[01]+$/i,ode=/^0o[0-7]+$/i,lde=parseInt;function dde(t){if(typeof t=="number")return t;if((0,rde.Z)(t))return KL;if((0,cT.Z)(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=(0,cT.Z)(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=nde(t);var r=sde.test(t);return r||ode.test(t)?lde(t.slice(2),r?2:8):ade.test(t)?KL:+t}var QL=dde,cde="Expected a function",ude=Math.max,hde=Math.min;function fde(t,i,r){var s,l,d,c,u,h,f=0,m=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(cde);i=QL(i)||0,(0,cT.Z)(r)&&(m=!!r.leading,p="maxWait"in r,d=p?ude(QL(r.maxWait)||0,i):d,g="trailing"in r?!!r.trailing:g);function v(P){var T=s,O=l;return s=l=void 0,f=P,c=t.apply(O,T),c}function w(P){return f=P,u=setTimeout(k,i),m?v(P):c}function x(P){var T=P-h,O=P-f,z=i-T;return p?hde(z,d-O):z}function _(P){var T=P-h,O=P-f;return h===void 0||T>=i||T<0||p&&O>=d}function k(){var P=uT();if(_(P))return A(P);u=setTimeout(k,x(P))}function A(P){return u=void 0,g&&s?v(P):(s=l=void 0,c)}function C(){u!==void 0&&clearTimeout(u),f=0,s=h=l=u=void 0}function M(){return u===void 0?c:A(uT())}function D(){var P=uT(),T=_(P);if(s=arguments,l=this,h=P,T){if(u===void 0)return w(h);if(p)return clearTimeout(u),u=setTimeout(k,i),v(h)}return u===void 0&&(u=setTimeout(k,i)),c}return D.cancel=C,D.flush=M,D}var pde=fde;function mde(t){return i=>{t.forEach(r=>{typeof r=="function"?r(i):r!=null&&(r.current=i)})}}var gde=["className","children","debounceTime","ignoreDimensions","parentSizeStyles","enableDebounceLeadingCall","resizeObserverPolyfill"],vde=[],yde={height:"100%",width:"100%"},bde=(0,X.forwardRef)(function(i,r){var s=i.className,l=i.children,d=i.debounceTime,c=d===void 0?300:d,u=i.ignoreDimensions,h=u===void 0?vde:u,f=i.parentSizeStyles,m=i.enableDebounceLeadingCall,p=m===void 0?!0:m,g=i.resizeObserverPolyfill,v=(0,ht.Z)(i,gde),w=(0,X.useRef)(null),x=(0,X.useRef)(0),_=(0,X.useState)({height:0,left:0,top:0,width:0}),k=(0,Xt.Z)(_,2),A=k[0],C=k[1],M=(0,X.useMemo)(function(){var D=Array.isArray(h)?h:[h];return pde(function(P){C(function(T){var O=Object.keys(T),z=O.filter(function(B){return T[B]!==P[B]}),L=z.every(function(B){return D.includes(B)});return L?T:P})},c,{leading:p})},[c,p,h]);return(0,X.useEffect)(function(){var D=g||window.ResizeObserver,P=new D(function(T){var O=(0,qg.Z)(T),z;try{var L=function(){var j,V=z.value,H=(j=V==null?void 0:V.contentRect)!==null&&j!==void 0?j:{},Y=H.left,se=H.top,re=H.width,$=H.height;x.current=window.requestAnimationFrame(function(){M({height:$,left:Y,top:se,width:re})})};for(O.s();!(z=O.n()).done;)L()}catch(B){O.e(B)}finally{O.f()}});return w.current&&P.observe(w.current),function(){window.cancelAnimationFrame(x.current),P.disconnect(),M.cancel()}},[M,g]),(0,J.jsx)("div",(0,R.Z)((0,R.Z)({className:s,ref:mde([r,w]),style:(0,R.Z)((0,R.Z)({},yde),f)},v),{},{children:l((0,R.Z)((0,R.Z)({},A),{},{ref:w.current,resize:M}))}))}),wde=["scene","style","onMouseDown","onMouseUp","onMouseHover","onKeyDown","onKeyUp","onStart","onLookAt","onFollow","onWheel","onLoad","renderOnDemand"],xde=(0,X.forwardRef)(function(t,i){var r=t.scene,s=t.style,l=t.onMouseDown,d=t.onMouseUp,c=t.onMouseHover,u=t.onKeyDown,h=t.onKeyUp,f=t.onStart,m=t.onLookAt,p=t.onFollow,g=t.onWheel,v=t.onLoad,w=t.renderOnDemand,x=w===void 0?!0:w,_=(0,ht.Z)(t,wde),k=(0,X.useRef)(null),A=(0,X.useState)(!0),C=(0,Xt.Z)(A,2),M=C[0],D=C[1],P=function(){var T=(0,Rm.Z)((0,Aa.Z)().mark(function O(z,L){var B,j,V;return(0,Aa.Z)().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,z.load(r);case 2:B=(0,qg.Z)(L);try{for(B.s();!(j=B.n()).done;)V=j.value,V.cb&&z.addEventListener(V.name,V.cb)}catch(se){B.e(se)}finally{B.f()}D(!1),v==null||v(z);case 6:case"end":return Y.stop()}},O)}));return function(z,L){return T.apply(this,arguments)}}();return(0,X.useEffect)(function(){D(!0);var T,O=[{cb:l,name:"mouseDown"},{cb:d,name:"mouseUp"},{cb:c,name:"mouseHover"},{cb:u,name:"keyDown"},{cb:h,name:"keyUp"},{cb:f,name:"start"},{cb:m,name:"lookAt"},{cb:p,name:"follow"},{cb:g,name:"scroll"}];return k.current&&(T=new Yle(k.current,{renderOnDemand:x}),P(T,O)),function(){for(var z=0,L=O;z<L.length;z++){var B=L[z];B.cb&&T.removeEventListener(B.name,B.cb)}T.dispose()}},[r]),(0,J.jsx)(bde,(0,R.Z)((0,R.Z)({debounceTime:50,parentSizeStyles:s,ref:i},_),{},{children:function(){return(0,J.jsx)("canvas",{ref:k,style:{display:M?"none":"block"}})}}))}),hT=xde,_de=["className","style","size","onLoad"],kde=(0,X.memo)(function(t){var i=t.className,r=t.style,s=t.size,l=s===void 0?128:s,d=t.onLoad,c=(0,ht.Z)(t,_de),u=(0,Um.nc)(),h=(0,X.useState)(!0),f=(0,Xt.Z)(h,2),m=f[0],p=f[1];return(0,J.jsxs)(Ae.D,{align:"center",className:i,flex:"none",justify:"center",style:(0,R.Z)({height:l,overflow:"hidden",position:"relative",width:l},r),children:[m&&(0,J.jsx)(bf.Z,{alt:"logo",height:l*.75,src:u(Fb.El),style:{position:"absolute"},width:l*.75}),(0,J.jsx)(hT,(0,R.Z)({onLoad:function(v){p(!1),d==null||d(v)},scene:"https://gw.alipayobjects.com/os/kitchen/8LH7slSv3s/logo.splinecode",style:{flex:"none",height:l,width:l}},c))]})}),Sde=kde,Ade=de(68459),Cde=de(55471),Ede=(0,X.memo)(function(t){var i=t.size,r=i===void 0?32:i;return(0,J.jsx)(Cde.Z,{height:"100%",justify:"center",style:{position:"absolute"},width:"100%",children:(0,J.jsx)(yt.Z,{icon:cu.Z,size:{fontSize:r},spin:!0})})}),Mde=Ede,Tde=["className","style","width","height","onLoad"],Dde="https://gw.alipayobjects.com/os/kitchen/J9jiHITGrs/scene.splinecode",Pde="https://gw.alipayobjects.com/os/kitchen/CzQKKvSE8a/scene.splinecode",Ode=(0,X.memo)(function(t){var i=t.className,r=t.style,s=t.width,l=t.height,d=t.onLoad,c=(0,ht.Z)(t,Tde),u=(0,Ade.r)(),h=u.isDarkMode,f=(0,X.useState)(!0),m=(0,Xt.Z)(f,2),p=m[0],g=m[1];return(0,J.jsxs)("div",{className:i,style:(0,R.Z)({height:l,position:"relative",width:s},r),children:[p&&(0,J.jsx)(Mde,{}),(0,J.jsx)(hT,(0,R.Z)({onLoad:function(w){g(!1),d==null||d(w)},scene:h?Pde:Dde},c))]})}),Ide=Ode,Rde=de(2465),zde=["children","className","fontSize","headerMultiple","marginMultiple","lineHeight"],Lde=function(i){var r=i.children,s=i.className,l=i.fontSize,d=i.headerMultiple,c=i.marginMultiple,u=i.lineHeight,h=(0,ht.Z)(i,zde),f=(0,Rde.y)({fontSize:l,headerMultiple:d,lineHeight:u,marginMultiple:c}),m=f.cx,p=f.styles;return(0,J.jsx)("article",(0,R.Z)((0,R.Z)({className:m(p.__root,p.a,p.blockquote,p.code,p.details,p.header,p.hr,p.img,p.kbd,p.list,p.p,p.pre,p.strong,p.table,p.video,s)},h),{},{children:r}))},JL,eB,tB,iB,nB,Bde=(0,Et.kc)(function(t){var i=t.css,r=t.token;return{center:i(JL||(JL=(0,be.Z)([`
      height: 100%;
    `]))),container:i(eB||(eB=(0,be.Z)([`
      overflow: hidden;
      flex: none;
      width: 100vw;
      background: `,`;
    `])),r.colorBgLayout),inner:i(tB||(tB=(0,be.Z)([`
      position: relative;

      width: 100%;
      height: 44px;
      min-height: 44px;
      max-height: 44px;
      padding-block: 0;
      padding-inline: 6px;
    `]))),left:i(iB||(iB=(0,be.Z)([`
      justify-content: flex-start;
      height: 100%;
    `]))),right:i(nB||(nB=(0,be.Z)([`
      justify-content: flex-end;
      height: 100%;
    `])))}}),Fde=(0,X.memo)(function(t){var i=t.className,r=t.safeArea,s=r===void 0?!0:r,l=t.style,d=t.center,c=t.left,u=t.right,h=t.gap,f=t.classNames,m=t.onBackClick,p=t.showBackButton,g=t.contentStyles,v=Bde(),w=v.styles,x=v.cx;return(0,J.jsxs)(Ae.D,{className:x(w.container,i),style:l,children:[s&&(0,J.jsx)(uu,{position:"top"}),(0,J.jsxs)(Ae.D,{align:"center",className:w.inner,flex:1,horizontal:!0,justify:"space-between",children:[(0,J.jsxs)(Ae.D,{align:"center",className:x(w.left,f==null?void 0:f.left),flex:1,gap:h==null?void 0:h.left,horizontal:!0,style:g==null?void 0:g.left,children:[p&&(0,J.jsx)(st.Z,{icon:xm.Z,onClick:function(){return m==null?void 0:m()},size:{fontSize:24}}),c]}),(0,J.jsx)(Ae.D,{align:"center",className:x(w.center,f==null?void 0:f.center),flex:1,gap:h==null?void 0:h.center,horizontal:!0,justify:"center",style:g==null?void 0:g.center,children:d}),(0,J.jsx)(Ae.D,{align:"center",className:x(w.right,f==null?void 0:f.right),flex:1,gap:h==null?void 0:h.right,horizontal:!0,style:g==null?void 0:g.right,children:u})]})]})}),Nde=Fde,rB,aB,sB,oB,lB,jde=(0,Et.kc)(function(t){var i=t.css,r=t.token;return{desc:i(rB||(rB=(0,be.Z)([`
    overflow: hidden;

    width: 100%;

    font-size: 12px;
    line-height: 1;
    color: `,`;
    text-overflow: ellipsis;
    white-space: nowrap;
  `])),r.colorTextTertiary),tag:i(aB||(aB=(0,be.Z)([`
    flex: none;
  `]))),title:i(sB||(sB=(0,be.Z)([`
    overflow: hidden;

    font-size: 16px;
    font-weight: bold;
    line-height: 1;
    text-overflow: ellipsis;
    white-space: nowrap;
  `]))),titleContainer:i(oB||(oB=(0,be.Z)([`
    flex: 1;
  `]))),titleWithDesc:i(lB||(lB=(0,be.Z)([`
    overflow: hidden;

    font-weight: bold;
    line-height: 1;
    text-overflow: ellipsis;
    white-space: nowrap;
  `])))}}),Ude=(0,X.memo)(function(t){var i=t.title,r=t.desc,s=t.tag,l=jde(),d=l.styles;return r?(0,J.jsxs)(Ae.D,{align:"center",flex:1,gap:4,justify:"center",children:[(0,J.jsxs)(Ae.D,{align:"center",className:d.titleContainer,gap:4,horizontal:!0,children:[(0,J.jsx)("div",{className:d.titleWithDesc,children:i}),s&&(0,J.jsx)(Ae.D,{className:d.tag,horizontal:!0,children:s})]}),(0,J.jsx)(Ae.D,{align:"center",horizontal:!0,children:(0,J.jsx)("div",{className:d.desc,children:r})})]}):(0,J.jsxs)(Ae.D,{align:"center",flex:1,gap:4,horizontal:!0,justify:"center",children:[(0,J.jsx)("div",{className:d.title,children:i}),(0,J.jsx)(Ae.D,{className:d.tag,horizontal:!0,children:s})]})}),Vde=Ude,dB,cB,uB,hB,fB,pB,Hde=(0,Et.kc)(function(t){var i=t.css,r=t.token;return{active:i(dB||(dB=(0,be.Z)([`
      color: `,`;
    `])),r.colorPrimary),container:i(cB||(cB=(0,be.Z)([`
      user-select: none;

      overflow: hidden;
      flex: none;

      width: 100vw;

      background: `,`;
      border-block-start: 1px solid `,`;
    `])),r.colorBgLayout,(0,ka.m4)(r.colorBorder,.25)),icon:i(uB||(uB=(0,be.Z)([`
      width: 24px;
      height: 24px;
      font-size: 24px;
    `]))),inner:i(hB||(hB=(0,be.Z)([`
      position: relative;
      width: 100%;
      height: 48px;
    `]))),tab:i(fB||(fB=(0,be.Z)([`
      cursor: pointer;
      width: 48px;
      height: 48px;
      color: `,`;
    `])),r.colorTextDescription),title:i(pB||(pB=(0,be.Z)([`
      overflow: hidden;

      width: 100%;
      margin-block-start: -0.125em;

      font-size: 12px;
      line-height: 1.125em;
      text-align: center;
      text-overflow: ellipsis;
      white-space: nowrap;
    `])))}}),Gde=(0,X.memo)(function(t){var i=t.className,r=t.safeArea,s=t.style,l=t.items,d=t.activeKey,c=t.defaultActiveKey,u=t.onChange,h=(0,Ns.Z)(c||l[0].key,{defaultValue:c,onChange:u,value:d}),f=(0,Xt.Z)(h,2),m=f[0],p=f[1],g=Hde(),v=g.styles,w=g.cx;return(0,J.jsxs)(Ae.D,{className:w(v.container,i),style:s,children:[(0,J.jsx)(Ae.D,{align:"center",className:v.inner,horizontal:!0,justify:"space-around",children:l.map(function(x){var _=x.key===m;return(0,J.jsxs)(Ae.D,{align:"center",className:w(v.tab,_&&v.active),gap:4,justify:"center",onClick:function(){var A;p(x.key),x==null||(A=x.onClick)===null||A===void 0||A.call(x)},children:[(0,J.jsx)(Ae.D,{align:"center",className:v.icon,justify:"center",children:typeof x.icon=="function"?x.icon(_):x.icon}),(0,J.jsx)("div",{className:v.title,children:typeof x.title=="function"?x.title(_):x.title})]},x.key)})}),r&&(0,J.jsx)(uu,{position:"bottom"})]})}),Wde=Gde,qde=de(34652),mB,gB,vB,yB,bB,wB,$de=(0,Et.kc)(function(t){var i=t.css,r=t.token,s=t.cx,l=i(mB||(mB=(0,be.Z)([`
    &:hover {
      border-color: `,`;
      box-shadow: 0 0 0 2px `,`;
    }
  `])),r.colorText,r.colorText),d=s(i(gB||(gB=(0,be.Z)([`
      position: relative;
      overflow: hidden;
      border-radius: `,`px;
      transition: all 100ms `,`;

      &::before {
        content: '';

        position: absolute;
        inset: 0;

        display: block;

        width: 100%;
        height: 100%;

        border-radius: inherit;
        box-shadow: inset 0 0 0 2px `,`;
      }
    `])),r.borderRadius,r.motionEaseOut,r.colorSplit),l);return{active:i(vB||(vB=(0,be.Z)([`
      color: `,`;
    `])),r.colorText),container:i(yB||(yB=(0,be.Z)([`
      cursor: pointer;
      color: `,`;
    `])),r.colorTextDescription),img:d,imgActive:i(bB||(bB=(0,be.Z)([`
      box-shadow: 0 0 0 2px `,`;

      .`,`:before {
        box-shadow: none;
      }
    `])),r.colorTextTertiary,d),imgCtn:i(wB||(wB=(0,be.Z)([`
      background: `,`;
      border-radius: `,`px;

      `,`
    `])),r.colorFillTertiary,r.borderRadius,l)}}),Zde=(0,X.memo)(function(t){var i=t.className,r=t.style,s=t.value,l=t.defaultValue,d=t.onChange,c=t.options,u=t.width,h=u===void 0?144:u,f=t.height,m=f===void 0?86:f,p=t.styles,g=p===void 0?{}:p,v=t.classNames,w=v===void 0?{}:v,x=t.unoptimized,_=(0,Ns.Z)(l,{defaultValue:l,onChange:d,value:s}),k=(0,Xt.Z)(_,2),A=k[0],C=k[1],M=$de(),D=M.styles,P=M.cx;return(0,J.jsx)(Ae.D,{className:i,gap:16,horizontal:!0,style:r,children:c==null?void 0:c.map(function(T){var O=T.value===A;return(0,J.jsxs)(Ae.D,{align:"center",className:P(D.container,O&&D.active),gap:4,onClick:function(){return C(T.value)},children:[(0,J.jsx)("div",{className:P(D.imgCtn,O&&D.imgActive,w.img),style:(0,R.Z)((0,R.Z)({},g.img),{},{height:m,width:h}),children:(0,J.jsx)("div",{className:D.img,children:(0,J.jsx)(bf.Z,{alt:typeof T.label=="string"?T.label:T.ariaLabel,height:m,src:T.img,unoptimized:x,width:h})})}),(0,J.jsxs)(Ae.D,{align:"center",gap:4,horizontal:!0,children:[T.icon&&(0,J.jsx)(yt.Z,{icon:T.icon}),T.label]})]},T.value)})})}),Yde=Zde,xB,Xde=(0,Et.kc)(function(t){var i=t.css,r=t.token;return i(xB||(xB=(0,be.Z)([`
    width: 64px;
    height: 100%;
    min-height: 640px;
    padding-block: 16px;
    padding-inline: 0;

    background: `,`;
    border-inline-end: 1px solid `,`;
  `])),r.colorBgContainer,r.colorBorder)}),Kde=["className","avatar","topActions","bottomActions"],Qde=(0,X.memo)(function(t){var i=t.className,r=t.avatar,s=t.topActions,l=t.bottomActions,d=(0,ht.Z)(t,Kde),c=Xde(),u=c.styles,h=c.cx;return(0,J.jsxs)(Ae.D,(0,R.Z)((0,R.Z)({align:"center",className:h(u,i),flex:"none",justify:"space-between"},d),{},{children:[(0,J.jsxs)(Ae.D,{align:"center",direction:"vertical",gap:16,children:[r,(0,J.jsx)(Ae.D,{align:"center",direction:"vertical",gap:8,children:s})]}),(0,J.jsx)(Ae.D,{align:"center",direction:"vertical",gap:4,children:l})]}))}),Jde=Qde,ece=de(27076),tce=de(47813);function ice(t){return t===null}var _B=ice,nce=["step","value","onChange","max","min","defaultValue","size","controls","gap","style","className","disabled"],rce=(0,X.memo)(function(t){var i=t.step,r=t.value,s=t.onChange,l=t.max,d=t.min,c=t.defaultValue,u=t.size,h=t.controls,f=t.gap,m=f===void 0?16:f,p=t.style,g=t.className,v=t.disabled,w=(0,ht.Z)(t,nce),x=(0,X.useCallback)(function(_){Number.isNaN(_)||_B(_)||s==null||s(_)},[]);return(0,J.jsxs)(Ae.D,{align:"center",className:g,direction:"horizontal",gap:m,style:p,children:[(0,J.jsx)(ece.Z,(0,R.Z)({defaultValue:c,disabled:v,max:l,min:d,onChange:x,step:i,style:u==="small"?{flex:1,margin:0}:{flex:1},tooltip:{open:!1},value:typeof r=="number"?r:0},w)),(0,J.jsx)(tce.Z,{controls:u!=="small"||h,defaultValue:c,disabled:v,max:l,min:d,onChange:x,size:u,step:Number.isNaN(i)||_B(i)?void 0:i,style:{flex:1,maxWidth:u==="small"?40:64},value:typeof r=="number"?r:0})]})}),ace=rce,sce=de(99321),mm=de(30967);function oce(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(0,X.useMemo)(()=>s=>{i.forEach(l=>l(s))},i)}const d2=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function gm(t){const i=Object.prototype.toString.call(t);return i==="[object Window]"||i==="[object global]"}function fT(t){return"nodeType"in t}function Ka(t){var i,r;return t?gm(t)?t:fT(t)&&(i=(r=t.ownerDocument)==null?void 0:r.defaultView)!=null?i:window:window}function pT(t){const{Document:i}=Ka(t);return t instanceof i}function U0(t){return gm(t)?!1:t instanceof Ka(t).HTMLElement}function kB(t){return t instanceof Ka(t).SVGElement}function vm(t){return t?gm(t)?t.document:fT(t)?pT(t)?t:U0(t)||kB(t)?t.ownerDocument:document:document:document}const fo=d2?X.useLayoutEffect:X.useEffect;function c2(t){const i=(0,X.useRef)(t);return fo(()=>{i.current=t}),(0,X.useCallback)(function(){for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return i.current==null?void 0:i.current(...s)},[])}function lce(){const t=(0,X.useRef)(null),i=(0,X.useCallback)((s,l)=>{t.current=setInterval(s,l)},[]),r=(0,X.useCallback)(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[i,r]}function V0(t,i){i===void 0&&(i=[t]);const r=(0,X.useRef)(t);return fo(()=>{r.current!==t&&(r.current=t)},i),r}function H0(t,i){const r=(0,X.useRef)();return(0,X.useMemo)(()=>{const s=t(r.current);return r.current=s,s},[...i])}function u2(t){const i=c2(t),r=(0,X.useRef)(null),s=(0,X.useCallback)(l=>{l!==r.current&&(i==null||i(l,r.current)),r.current=l},[]);return[r,s]}function h2(t){const i=(0,X.useRef)();return(0,X.useEffect)(()=>{i.current=t},[t]),i.current}let mT={};function G0(t,i){return(0,X.useMemo)(()=>{if(i)return i;const r=mT[t]==null?0:mT[t]+1;return mT[t]=r,t+"-"+r},[t,i])}function SB(t){return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((d,c)=>{const u=Object.entries(c);for(const[h,f]of u){const m=d[h];m!=null&&(d[h]=m+t*f)}return d},Z({},i))}}const ym=SB(1),W0=SB(-1);function dce(t){return"clientX"in t&&"clientY"in t}function f2(t){if(!t)return!1;const{KeyboardEvent:i}=Ka(t.target);return i&&t instanceof i}function cce(t){if(!t)return!1;const{TouchEvent:i}=Ka(t.target);return i&&t instanceof i}function p2(t){if(cce(t)){if(t.touches&&t.touches.length){const{clientX:i,clientY:r}=t.touches[0];return{x:i,y:r}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:i,clientY:r}=t.changedTouches[0];return{x:i,y:r}}}return dce(t)?{x:t.clientX,y:t.clientY}:null}const lu=Object.freeze({Translate:{toString(t){if(!t)return;const{x:i,y:r}=t;return"translate3d("+(i?Math.round(i):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:i,scaleY:r}=t;return"scaleX("+i+") scaleY("+r+")"}},Transform:{toString(t){if(t)return[lu.Translate.toString(t),lu.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:i,duration:r,easing:s}=t;return i+" "+r+"ms "+s}}}),AB="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function uce(t){return t.matches(AB)?t:t.querySelector(AB)}const hce={display:"none"};function fce(t){let{id:i,value:r}=t;return X.createElement("div",{id:i,style:hce},r)}function pce(t){let{id:i,announcement:r,ariaLiveType:s="assertive"}=t;const l={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return X.createElement("div",{id:i,style:l,role:"status","aria-live":s,"aria-atomic":!0},r)}function mce(){const[t,i]=(0,X.useState)("");return{announce:(0,X.useCallback)(s=>{s!=null&&i(s)},[]),announcement:t}}const CB=(0,X.createContext)(null);function gce(t){const i=(0,X.useContext)(CB);(0,X.useEffect)(()=>{if(!i)throw new Error("useDndMonitor must be used within a children of <DndContext>");return i(t)},[t,i])}function vce(){const[t]=(0,X.useState)(()=>new Set),i=(0,X.useCallback)(s=>(t.add(s),()=>t.delete(s)),[t]);return[(0,X.useCallback)(s=>{let{type:l,event:d}=s;t.forEach(c=>{var u;return(u=c[l])==null?void 0:u.call(c,d)})},[t]),i]}const yce={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},bce={onDragStart(t){let{active:i}=t;return"Picked up draggable item "+i.id+"."},onDragOver(t){let{active:i,over:r}=t;return r?"Draggable item "+i.id+" was moved over droppable area "+r.id+".":"Draggable item "+i.id+" is no longer over a droppable area."},onDragEnd(t){let{active:i,over:r}=t;return r?"Draggable item "+i.id+" was dropped over droppable area "+r.id:"Draggable item "+i.id+" was dropped."},onDragCancel(t){let{active:i}=t;return"Dragging was cancelled. Draggable item "+i.id+" was dropped."}};function wce(t){let{announcements:i=bce,container:r,hiddenTextDescribedById:s,screenReaderInstructions:l=yce}=t;const{announce:d,announcement:c}=mce(),u=G0("DndLiveRegion"),[h,f]=(0,X.useState)(!1);if((0,X.useEffect)(()=>{f(!0)},[]),gce((0,X.useMemo)(()=>({onDragStart(p){let{active:g}=p;d(i.onDragStart({active:g}))},onDragMove(p){let{active:g,over:v}=p;i.onDragMove&&d(i.onDragMove({active:g,over:v}))},onDragOver(p){let{active:g,over:v}=p;d(i.onDragOver({active:g,over:v}))},onDragEnd(p){let{active:g,over:v}=p;d(i.onDragEnd({active:g,over:v}))},onDragCancel(p){let{active:g,over:v}=p;d(i.onDragCancel({active:g,over:v}))}}),[d,i])),!h)return null;const m=X.createElement(X.Fragment,null,X.createElement(fce,{id:s,value:l.draggable}),X.createElement(pce,{id:u,announcement:c}));return r?(0,mm.createPortal)(m,r):m}var zr;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(zr||(zr={}));function m2(){}function EB(t,i){return(0,X.useMemo)(()=>({sensor:t,options:i!=null?i:{}}),[t,i])}function xce(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return(0,X.useMemo)(()=>[...i].filter(s=>s!=null),[...i])}const Qo=Object.freeze({x:0,y:0});function gT(t,i){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function _ce(t,i){const r=p2(t);if(!r)return"0 0";const s={x:(r.x-i.left)/i.width*100,y:(r.y-i.top)/i.height*100};return s.x+"% "+s.y+"%"}function vT(t,i){let{data:{value:r}}=t,{data:{value:s}}=i;return r-s}function kce(t,i){let{data:{value:r}}=t,{data:{value:s}}=i;return s-r}function yT(t){let{left:i,top:r,height:s,width:l}=t;return[{x:i,y:r},{x:i+l,y:r},{x:i,y:r+s},{x:i+l,y:r+s}]}function MB(t,i){if(!t||t.length===0)return null;const[r]=t;return i?r[i]:r}function TB(t,i,r){return i===void 0&&(i=t.left),r===void 0&&(r=t.top),{x:i+t.width*.5,y:r+t.height*.5}}const Pfe=t=>{let{collisionRect:i,droppableRects:r,droppableContainers:s}=t;const l=TB(i,i.left,i.top),d=[];for(const c of s){const{id:u}=c,h=r.get(u);if(h){const f=gT(TB(h),l);d.push({id:u,data:{droppableContainer:c,value:f}})}}return d.sort(vT)},Sce=t=>{let{collisionRect:i,droppableRects:r,droppableContainers:s}=t;const l=yT(i),d=[];for(const c of s){const{id:u}=c,h=r.get(u);if(h){const f=yT(h),m=l.reduce((g,v,w)=>g+gT(f[w],v),0),p=Number((m/4).toFixed(4));d.push({id:u,data:{droppableContainer:c,value:p}})}}return d.sort(vT)};function Ace(t,i){const r=Math.max(i.top,t.top),s=Math.max(i.left,t.left),l=Math.min(i.left+i.width,t.left+t.width),d=Math.min(i.top+i.height,t.top+t.height),c=l-s,u=d-r;if(s<l&&r<d){const h=i.width*i.height,f=t.width*t.height,m=c*u,p=m/(h+f-m);return Number(p.toFixed(4))}return 0}const Cce=t=>{let{collisionRect:i,droppableRects:r,droppableContainers:s}=t;const l=[];for(const d of s){const{id:c}=d,u=r.get(c);if(u){const h=Ace(u,i);h>0&&l.push({id:c,data:{droppableContainer:d,value:h}})}}return l.sort(kce)};function Ece(t,i){const{top:r,left:s,bottom:l,right:d}=i;return r<=t.y&&t.y<=l&&s<=t.x&&t.x<=d}const Ofe=t=>{let{droppableContainers:i,droppableRects:r,pointerCoordinates:s}=t;if(!s)return[];const l=[];for(const d of i){const{id:c}=d,u=r.get(c);if(u&&Ece(s,u)){const f=yT(u).reduce((p,g)=>p+gT(s,g),0),m=Number((f/4).toFixed(4));l.push({id:c,data:{droppableContainer:d,value:m}})}}return l.sort(vT)};function Mce(t,i,r){return ge(Z({},t),{scaleX:i&&r?i.width/r.width:1,scaleY:i&&r?i.height/r.height:1})}function DB(t,i){return t&&i?{x:t.left-i.left,y:t.top-i.top}:Qo}function Tce(t){return function(r){for(var s=arguments.length,l=new Array(s>1?s-1:0),d=1;d<s;d++)l[d-1]=arguments[d];return l.reduce((c,u)=>ge(Z({},c),{top:c.top+t*u.y,bottom:c.bottom+t*u.y,left:c.left+t*u.x,right:c.right+t*u.x}),Z({},r))}}const Dce=Tce(1);function PB(t){if(t.startsWith("matrix3d(")){const i=t.slice(9,-1).split(/, /);return{x:+i[12],y:+i[13],scaleX:+i[0],scaleY:+i[5]}}else if(t.startsWith("matrix(")){const i=t.slice(7,-1).split(/, /);return{x:+i[4],y:+i[5],scaleX:+i[0],scaleY:+i[3]}}return null}function Pce(t,i,r){const s=PB(i);if(!s)return t;const{scaleX:l,scaleY:d,x:c,y:u}=s,h=t.left-c-(1-l)*parseFloat(r),f=t.top-u-(1-d)*parseFloat(r.slice(r.indexOf(" ")+1)),m=l?t.width/l:t.width,p=d?t.height/d:t.height;return{width:m,height:p,top:f,right:h+m,bottom:f+p,left:h}}const Oce={ignoreTransform:!1};function bm(t,i){i===void 0&&(i=Oce);let r=t.getBoundingClientRect();if(i.ignoreTransform){const{transform:f,transformOrigin:m}=Ka(t).getComputedStyle(t);f&&(r=Pce(r,f,m))}const{top:s,left:l,width:d,height:c,bottom:u,right:h}=r;return{top:s,left:l,width:d,height:c,bottom:u,right:h}}function OB(t){return bm(t,{ignoreTransform:!0})}function Ice(t){const i=t.innerWidth,r=t.innerHeight;return{top:0,left:0,right:i,bottom:r,width:i,height:r}}function Rce(t,i){return i===void 0&&(i=Ka(t).getComputedStyle(t)),i.position==="fixed"}function zce(t,i){i===void 0&&(i=Ka(t).getComputedStyle(t));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const d=i[l];return typeof d=="string"?r.test(d):!1})}function g2(t,i){const r=[];function s(l){if(i!=null&&r.length>=i||!l)return r;if(pT(l)&&l.scrollingElement!=null&&!r.includes(l.scrollingElement))return r.push(l.scrollingElement),r;if(!U0(l)||kB(l)||r.includes(l))return r;const d=Ka(t).getComputedStyle(l);return l!==t&&zce(l,d)&&r.push(l),Rce(l,d)?r:s(l.parentNode)}return t?s(t):r}function IB(t){const[i]=g2(t,1);return i!=null?i:null}function bT(t){return!d2||!t?null:gm(t)?t:fT(t)?pT(t)||t===vm(t).scrollingElement?window:U0(t)?t:null:null}function RB(t){return gm(t)?t.scrollX:t.scrollLeft}function zB(t){return gm(t)?t.scrollY:t.scrollTop}function wT(t){return{x:RB(t),y:zB(t)}}var Zr;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Zr||(Zr={}));function LB(t){return!d2||!t?!1:t===document.scrollingElement}function BB(t){const i={x:0,y:0},r=LB(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},s={x:t.scrollWidth-r.width,y:t.scrollHeight-r.height},l=t.scrollTop<=i.y,d=t.scrollLeft<=i.x,c=t.scrollTop>=s.y,u=t.scrollLeft>=s.x;return{isTop:l,isLeft:d,isBottom:c,isRight:u,maxScroll:s,minScroll:i}}const Lce={x:.2,y:.2};function Bce(t,i,r,s,l){let{top:d,left:c,right:u,bottom:h}=r;s===void 0&&(s=10),l===void 0&&(l=Lce);const{isTop:f,isBottom:m,isLeft:p,isRight:g}=BB(t),v={x:0,y:0},w={x:0,y:0},x={height:i.height*l.y,width:i.width*l.x};return!f&&d<=i.top+x.height?(v.y=Zr.Backward,w.y=s*Math.abs((i.top+x.height-d)/x.height)):!m&&h>=i.bottom-x.height&&(v.y=Zr.Forward,w.y=s*Math.abs((i.bottom-x.height-h)/x.height)),!g&&u>=i.right-x.width?(v.x=Zr.Forward,w.x=s*Math.abs((i.right-x.width-u)/x.width)):!p&&c<=i.left+x.width&&(v.x=Zr.Backward,w.x=s*Math.abs((i.left+x.width-c)/x.width)),{direction:v,speed:w}}function Fce(t){if(t===document.scrollingElement){const{innerWidth:d,innerHeight:c}=window;return{top:0,left:0,right:d,bottom:c,width:d,height:c}}const{top:i,left:r,right:s,bottom:l}=t.getBoundingClientRect();return{top:i,left:r,right:s,bottom:l,width:t.clientWidth,height:t.clientHeight}}function FB(t){return t.reduce((i,r)=>ym(i,wT(r)),Qo)}function Nce(t){return t.reduce((i,r)=>i+RB(r),0)}function jce(t){return t.reduce((i,r)=>i+zB(r),0)}function NB(t,i){if(i===void 0&&(i=bm),!t)return;const{top:r,left:s,bottom:l,right:d}=i(t);IB(t)&&(l<=0||d<=0||r>=window.innerHeight||s>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const Uce=[["x",["left","right"],Nce],["y",["top","bottom"],jce]];class xT{constructor(i,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=g2(r),l=FB(s);this.rect=Z({},i),this.width=i.width,this.height=i.height;for(const[d,c,u]of Uce)for(const h of c)Object.defineProperty(this,h,{get:()=>{const f=u(s),m=l[d]-f;return this.rect[h]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class q0{constructor(i){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=i}add(i,r,s){var l;(l=this.target)==null||l.addEventListener(i,r,s),this.listeners.push([i,r,s])}}function Vce(t){const{EventTarget:i}=Ka(t);return t instanceof i?t:vm(t)}function _T(t,i){const r=Math.abs(t.x),s=Math.abs(t.y);return typeof i=="number"?Math.sqrt(wn(r,2)+wn(s,2))>i:"x"in i&&"y"in i?r>i.x&&s>i.y:"x"in i?r>i.x:"y"in i?s>i.y:!1}var po;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(po||(po={}));function jB(t){t.preventDefault()}function Hce(t){t.stopPropagation()}var Hi;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter"})(Hi||(Hi={}));const UB={start:[Hi.Space,Hi.Enter],cancel:[Hi.Esc],end:[Hi.Space,Hi.Enter]},Gce=(t,i)=>{let{currentCoordinates:r}=i;switch(t.code){case Hi.Right:return ge(Z({},r),{x:r.x+25});case Hi.Left:return ge(Z({},r),{x:r.x-25});case Hi.Down:return ge(Z({},r),{y:r.y+25});case Hi.Up:return ge(Z({},r),{y:r.y-25})}};class kT{constructor(i){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=i;const{event:{target:r}}=i;this.props=i,this.listeners=new q0(vm(r)),this.windowListeners=new q0(Ka(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(po.Resize,this.handleCancel),this.windowListeners.add(po.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(po.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:i,onStart:r}=this.props,s=i.node.current;s&&NB(s),r(Qo)}handleKeyDown(i){if(f2(i)){const{active:r,context:s,options:l}=this.props,{keyboardCodes:d=UB,coordinateGetter:c=Gce,scrollBehavior:u="smooth"}=l,{code:h}=i;if(d.end.includes(h)){this.handleEnd(i);return}if(d.cancel.includes(h)){this.handleCancel(i);return}const{collisionRect:f}=s.current,m=f?{x:f.left,y:f.top}:Qo;this.referenceCoordinates||(this.referenceCoordinates=m);const p=c(i,{active:r,context:s.current,currentCoordinates:m});if(p){const g=W0(p,m),v={x:0,y:0},{scrollableAncestors:w}=s.current;for(const x of w){const _=i.code,{isTop:k,isRight:A,isLeft:C,isBottom:M,maxScroll:D,minScroll:P}=BB(x),T=Fce(x),O={x:Math.min(_===Hi.Right?T.right-T.width/2:T.right,Math.max(_===Hi.Right?T.left:T.left+T.width/2,p.x)),y:Math.min(_===Hi.Down?T.bottom-T.height/2:T.bottom,Math.max(_===Hi.Down?T.top:T.top+T.height/2,p.y))},z=_===Hi.Right&&!A||_===Hi.Left&&!C,L=_===Hi.Down&&!M||_===Hi.Up&&!k;if(z&&O.x!==p.x){const B=x.scrollLeft+g.x,j=_===Hi.Right&&B<=D.x||_===Hi.Left&&B>=P.x;if(j&&!g.y){x.scrollTo({left:B,behavior:u});return}j?v.x=x.scrollLeft-B:v.x=_===Hi.Right?x.scrollLeft-D.x:x.scrollLeft-P.x,v.x&&x.scrollBy({left:-v.x,behavior:u});break}else if(L&&O.y!==p.y){const B=x.scrollTop+g.y,j=_===Hi.Down&&B<=D.y||_===Hi.Up&&B>=P.y;if(j&&!g.x){x.scrollTo({top:B,behavior:u});return}j?v.y=x.scrollTop-B:v.y=_===Hi.Down?x.scrollTop-D.y:x.scrollTop-P.y,v.y&&x.scrollBy({top:-v.y,behavior:u});break}}this.handleMove(i,ym(W0(p,this.referenceCoordinates),v))}}}handleMove(i,r){const{onMove:s}=this.props;i.preventDefault(),s(r)}handleEnd(i){const{onEnd:r}=this.props;i.preventDefault(),this.detach(),r()}handleCancel(i){const{onCancel:r}=this.props;i.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}kT.activators=[{eventName:"onKeyDown",handler:(t,i,r)=>{let{keyboardCodes:s=UB,onActivation:l}=i,{active:d}=r;const{code:c}=t.nativeEvent;if(s.start.includes(c)){const u=d.activatorNode.current;return u&&t.target!==u?!1:(t.preventDefault(),l==null||l({event:t.nativeEvent}),!0)}return!1}}];function VB(t){return!!(t&&"distance"in t)}function HB(t){return!!(t&&"delay"in t)}class ST{constructor(i,r,s){var l;s===void 0&&(s=Vce(i.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=i,this.events=r;const{event:d}=i,{target:c}=d;this.props=i,this.events=r,this.document=vm(c),this.documentListeners=new q0(this.document),this.listeners=new q0(s),this.windowListeners=new q0(Ka(c)),this.initialCoordinates=(l=p2(d))!=null?l:Qo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:i,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(i.move.name,this.handleMove,{passive:!1}),this.listeners.add(i.end.name,this.handleEnd),this.windowListeners.add(po.Resize,this.handleCancel),this.windowListeners.add(po.DragStart,jB),this.windowListeners.add(po.VisibilityChange,this.handleCancel),this.windowListeners.add(po.ContextMenu,jB),this.documentListeners.add(po.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(HB(r)){this.timeoutId=setTimeout(this.handleStart,r.delay);return}if(VB(r))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:i}=this,{onStart:r}=this.props;i&&(this.activated=!0,this.documentListeners.add(po.Click,Hce,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(po.SelectionChange,this.removeTextSelection),r(i))}handleMove(i){var r;const{activated:s,initialCoordinates:l,props:d}=this,{onMove:c,options:{activationConstraint:u}}=d;if(!l)return;const h=(r=p2(i))!=null?r:Qo,f=W0(l,h);if(!s&&u){if(VB(u)){if(u.tolerance!=null&&_T(f,u.tolerance))return this.handleCancel();if(_T(f,u.distance))return this.handleStart()}return HB(u)&&_T(f,u.tolerance)?this.handleCancel():void 0}i.cancelable&&i.preventDefault(),c(h)}handleEnd(){const{onEnd:i}=this.props;this.detach(),i()}handleCancel(){const{onCancel:i}=this.props;this.detach(),i()}handleKeydown(i){i.code===Hi.Esc&&this.handleCancel()}removeTextSelection(){var i;(i=this.document.getSelection())==null||i.removeAllRanges()}}const Wce={move:{name:"pointermove"},end:{name:"pointerup"}};class AT extends ST{constructor(i){const{event:r}=i,s=vm(r.target);super(i,Wce,s)}}AT.activators=[{eventName:"onPointerDown",handler:(t,i)=>{let{nativeEvent:r}=t,{onActivation:s}=i;return!r.isPrimary||r.button!==0?!1:(s==null||s({event:r}),!0)}}];const qce={move:{name:"mousemove"},end:{name:"mouseup"}};var CT;(function(t){t[t.RightClick=2]="RightClick"})(CT||(CT={}));class $ce extends ST{constructor(i){super(i,qce,vm(i.event.target))}}$ce.activators=[{eventName:"onMouseDown",handler:(t,i)=>{let{nativeEvent:r}=t,{onActivation:s}=i;return r.button===CT.RightClick?!1:(s==null||s({event:r}),!0)}}];const ET={move:{name:"touchmove"},end:{name:"touchend"}};class Zce extends ST{constructor(i){super(i,ET)}static setup(){return window.addEventListener(ET.move.name,i,{capture:!1,passive:!1}),function(){window.removeEventListener(ET.move.name,i)};function i(){}}}Zce.activators=[{eventName:"onTouchStart",handler:(t,i)=>{let{nativeEvent:r}=t,{onActivation:s}=i;const{touches:l}=r;return l.length>1?!1:(s==null||s({event:r}),!0)}}];var $0;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})($0||($0={}));var v2;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(v2||(v2={}));function Yce(t){let{acceleration:i,activator:r=$0.Pointer,canScroll:s,draggingRect:l,enabled:d,interval:c=5,order:u=v2.TreeOrder,pointerCoordinates:h,scrollableAncestors:f,scrollableAncestorRects:m,delta:p,threshold:g}=t;const v=Kce({delta:p,disabled:!d}),[w,x]=lce(),_=(0,X.useRef)({x:0,y:0}),k=(0,X.useRef)({x:0,y:0}),A=(0,X.useMemo)(()=>{switch(r){case $0.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case $0.DraggableRect:return l}},[r,l,h]),C=(0,X.useRef)(null),M=(0,X.useCallback)(()=>{const P=C.current;if(!P)return;const T=_.current.x*k.current.x,O=_.current.y*k.current.y;P.scrollBy(T,O)},[]),D=(0,X.useMemo)(()=>u===v2.TreeOrder?[...f].reverse():f,[u,f]);(0,X.useEffect)(()=>{if(!d||!f.length||!A){x();return}for(const P of D){if((s==null?void 0:s(P))===!1)continue;const T=f.indexOf(P),O=m[T];if(!O)continue;const{direction:z,speed:L}=Bce(P,O,A,i,g);for(const B of["x","y"])v[B][z[B]]||(L[B]=0,z[B]=0);if(L.x>0||L.y>0){x(),C.current=P,w(M,c),_.current=L,k.current=z;return}}_.current={x:0,y:0},k.current={x:0,y:0},x()},[i,M,s,x,d,c,JSON.stringify(A),JSON.stringify(v),w,f,D,m,JSON.stringify(g)])}const Xce={x:{[Zr.Backward]:!1,[Zr.Forward]:!1},y:{[Zr.Backward]:!1,[Zr.Forward]:!1}};function Kce(t){let{delta:i,disabled:r}=t;const s=h2(i);return H0(l=>{if(r||!s||!l)return Xce;const d={x:Math.sign(i.x-s.x),y:Math.sign(i.y-s.y)};return{x:{[Zr.Backward]:l.x[Zr.Backward]||d.x===-1,[Zr.Forward]:l.x[Zr.Forward]||d.x===1},y:{[Zr.Backward]:l.y[Zr.Backward]||d.y===-1,[Zr.Forward]:l.y[Zr.Forward]||d.y===1}}},[r,i,s])}function Qce(t,i){const r=i!==null?t.get(i):void 0,s=r?r.node.current:null;return H0(l=>{var d;return i===null?null:(d=s!=null?s:l)!=null?d:null},[s,i])}function Jce(t,i){return(0,X.useMemo)(()=>t.reduce((r,s)=>{const{sensor:l}=s,d=l.activators.map(c=>({eventName:c.eventName,handler:i(c.handler,s)}));return[...r,...d]},[]),[t,i])}var Z0;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Z0||(Z0={}));var MT;(function(t){t.Optimized="optimized"})(MT||(MT={}));const GB=new Map;function eue(t,i){let{dragging:r,dependencies:s,config:l}=i;const[d,c]=(0,X.useState)(null),{frequency:u,measure:h,strategy:f}=l,m=(0,X.useRef)(t),p=_(),g=V0(p),v=(0,X.useCallback)(function(k){k===void 0&&(k=[]),!g.current&&c(A=>A===null?k:A.concat(k.filter(C=>!A.includes(C))))},[g]),w=(0,X.useRef)(null),x=H0(k=>{if(p&&!r)return GB;if(!k||k===GB||m.current!==t||d!=null){const A=new Map;for(let C of t){if(!C)continue;if(d&&d.length>0&&!d.includes(C.id)&&C.rect.current){A.set(C.id,C.rect.current);continue}const M=C.node.current,D=M?new xT(h(M),M):null;C.rect.current=D,D&&A.set(C.id,D)}return A}return k},[t,d,r,p,h]);return(0,X.useEffect)(()=>{m.current=t},[t]),(0,X.useEffect)(()=>{p||v()},[r,p]),(0,X.useEffect)(()=>{d&&d.length>0&&c(null)},[JSON.stringify(d)]),(0,X.useEffect)(()=>{p||typeof u!="number"||w.current!==null||(w.current=setTimeout(()=>{v(),w.current=null},u))},[u,p,v,...s]),{droppableRects:x,measureDroppableContainers:v,measuringScheduled:d!=null};function _(){switch(f){case Z0.Always:return!1;case Z0.BeforeDragging:return r;default:return!r}}}function TT(t,i){return H0(r=>t?r||(typeof i=="function"?i(t):t):null,[i,t])}function tue(t,i){return TT(t,i)}function iue(t){let{callback:i,disabled:r}=t;const s=c2(i),l=(0,X.useMemo)(()=>{if(r||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:d}=window;return new d(s)},[s,r]);return(0,X.useEffect)(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function y2(t){let{callback:i,disabled:r}=t;const s=c2(i),l=(0,X.useMemo)(()=>{if(r||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:d}=window;return new d(s)},[r]);return(0,X.useEffect)(()=>()=>l==null?void 0:l.disconnect(),[l]),l}function nue(t){return new xT(bm(t),t)}function WB(t,i,r){i===void 0&&(i=nue);const[s,l]=(0,X.useReducer)(u,null),d=iue({callback(h){if(t)for(const f of h){const{type:m,target:p}=f;if(m==="childList"&&p instanceof HTMLElement&&p.contains(t)){l();break}}}}),c=y2({callback:l});return fo(()=>{l(),t?(c==null||c.observe(t),d==null||d.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),d==null||d.disconnect())},[t]),s;function u(h){if(!t)return null;if(t.isConnected===!1){var f;return(f=h!=null?h:r)!=null?f:null}const m=i(t);return JSON.stringify(h)===JSON.stringify(m)?h:m}}function rue(t){const i=TT(t);return DB(t,i)}const qB=[];function aue(t){const i=(0,X.useRef)(t),r=H0(s=>t?s&&s!==qB&&t&&i.current&&t.parentNode===i.current.parentNode?s:g2(t):qB,[t]);return(0,X.useEffect)(()=>{i.current=t},[t]),r}function sue(t){const[i,r]=(0,X.useState)(null),s=(0,X.useRef)(t),l=(0,X.useCallback)(d=>{const c=bT(d.target);c&&r(u=>u?(u.set(c,wT(c)),new Map(u)):null)},[]);return(0,X.useEffect)(()=>{const d=s.current;if(t!==d){c(d);const u=t.map(h=>{const f=bT(h);return f?(f.addEventListener("scroll",l,{passive:!0}),[f,wT(f)]):null}).filter(h=>h!=null);r(u.length?new Map(u):null),s.current=t}return()=>{c(t),c(d)};function c(u){u.forEach(h=>{const f=bT(h);f==null||f.removeEventListener("scroll",l)})}},[l,t]),(0,X.useMemo)(()=>t.length?i?Array.from(i.values()).reduce((d,c)=>ym(d,c),Qo):FB(t):Qo,[t,i])}function $B(t,i){i===void 0&&(i=[]);const r=(0,X.useRef)(null);return(0,X.useEffect)(()=>{r.current=null},i),(0,X.useEffect)(()=>{const s=t!==Qo;s&&!r.current&&(r.current=t),!s&&r.current&&(r.current=null)},[t]),r.current?W0(t,r.current):Qo}function oue(t){(0,X.useEffect)(()=>{if(!d2)return;const i=t.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of i)r==null||r()}},t.map(i=>{let{sensor:r}=i;return r}))}function lue(t,i){return(0,X.useMemo)(()=>t.reduce((r,s)=>{let{eventName:l,handler:d}=s;return r[l]=c=>{d(c,i)},r},{}),[t,i])}function ZB(t){return(0,X.useMemo)(()=>t?Ice(t):null,[t])}const DT=[];function due(t,i){i===void 0&&(i=bm);const[r]=t,s=ZB(r?Ka(r):null),[l,d]=(0,X.useReducer)(u,DT),c=y2({callback:d});return t.length>0&&l===DT&&d(),fo(()=>{t.length?t.forEach(h=>c==null?void 0:c.observe(h)):(c==null||c.disconnect(),d())},[t]),l;function u(){return t.length?t.map(h=>LB(h)?s:new xT(i(h),h)):DT}}function YB(t){if(!t)return null;if(t.children.length>1)return t;const i=t.children[0];return U0(i)?i:t}function cue(t){let{measure:i}=t;const[r,s]=(0,X.useState)(null),l=(0,X.useCallback)(f=>{for(const{target:m}of f)if(U0(m)){s(p=>{const g=i(m);return p?ge(Z({},p),{width:g.width,height:g.height}):g});break}},[i]),d=y2({callback:l}),c=(0,X.useCallback)(f=>{const m=YB(f);d==null||d.disconnect(),m&&(d==null||d.observe(m)),s(m?i(m):null)},[i,d]),[u,h]=u2(c);return(0,X.useMemo)(()=>({nodeRef:u,rect:r,setRef:h}),[r,u,h])}const uue=[{sensor:AT,options:{}},{sensor:kT,options:{}}],hue={current:{}},b2={draggable:{measure:OB},droppable:{measure:OB,strategy:Z0.WhileDragging,frequency:MT.Optimized},dragOverlay:{measure:bm}};class Y0 extends Map{get(i){var r;return i!=null&&(r=super.get(i))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(i=>{let{disabled:r}=i;return!r})}getNodeFor(i){var r,s;return(r=(s=this.get(i))==null?void 0:s.node.current)!=null?r:void 0}}const fue={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Y0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:m2},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:b2,measureDroppableContainers:m2,windowRect:null,measuringScheduled:!1},XB={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:m2,draggableNodes:new Map,over:null,measureDroppableContainers:m2},X0=(0,X.createContext)(XB),KB=(0,X.createContext)(fue);function pue(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Y0}}}function mue(t,i){switch(i.type){case zr.DragStart:return ge(Z({},t),{draggable:ge(Z({},t.draggable),{initialCoordinates:i.initialCoordinates,active:i.active})});case zr.DragMove:return t.draggable.active?ge(Z({},t),{draggable:ge(Z({},t.draggable),{translate:{x:i.coordinates.x-t.draggable.initialCoordinates.x,y:i.coordinates.y-t.draggable.initialCoordinates.y}})}):t;case zr.DragEnd:case zr.DragCancel:return ge(Z({},t),{draggable:ge(Z({},t.draggable),{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case zr.RegisterDroppable:{const{element:r}=i,{id:s}=r,l=new Y0(t.droppable.containers);return l.set(s,r),ge(Z({},t),{droppable:ge(Z({},t.droppable),{containers:l})})}case zr.SetDroppableDisabled:{const{id:r,key:s,disabled:l}=i,d=t.droppable.containers.get(r);if(!d||s!==d.key)return t;const c=new Y0(t.droppable.containers);return c.set(r,ge(Z({},d),{disabled:l})),ge(Z({},t),{droppable:ge(Z({},t.droppable),{containers:c})})}case zr.UnregisterDroppable:{const{id:r,key:s}=i,l=t.droppable.containers.get(r);if(!l||s!==l.key)return t;const d=new Y0(t.droppable.containers);return d.delete(r),ge(Z({},t),{droppable:ge(Z({},t.droppable),{containers:d})})}default:return t}}function gue(t){let{disabled:i}=t;const{active:r,activatorEvent:s,draggableNodes:l}=(0,X.useContext)(X0),d=h2(s),c=h2(r==null?void 0:r.id);return(0,X.useEffect)(()=>{if(!i&&!s&&d&&c!=null){if(!f2(d)||document.activeElement===d.target)return;const u=l.get(c);if(!u)return;const{activatorNode:h,node:f}=u;if(!h.current&&!f.current)return;requestAnimationFrame(()=>{for(const m of[h.current,f.current]){if(!m)continue;const p=uce(m);if(p){p.focus();break}}})}},[s,i,l,c,d]),null}function QB(t,i){let l=i,{transform:r}=l,s=Cn(l,["transform"]);return t!=null&&t.length?t.reduce((d,c)=>c(Z({transform:d},s)),r):r}function vue(t){return(0,X.useMemo)(()=>({draggable:Z(Z({},b2.draggable),t==null?void 0:t.draggable),droppable:Z(Z({},b2.droppable),t==null?void 0:t.droppable),dragOverlay:Z(Z({},b2.dragOverlay),t==null?void 0:t.dragOverlay)}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function yue(t){let{activeNode:i,measure:r,initialRect:s,config:l=!0}=t;const d=(0,X.useRef)(!1),{x:c,y:u}=typeof l=="boolean"?{x:l,y:l}:l;fo(()=>{if(!c&&!u||!i){d.current=!1;return}if(d.current||!s)return;const f=i==null?void 0:i.node.current;if(!f||f.isConnected===!1)return;const m=r(f),p=DB(m,s);if(c||(p.x=0),u||(p.y=0),d.current=!0,Math.abs(p.x)>0||Math.abs(p.y)>0){const g=IB(f);g&&g.scrollBy({top:p.y,left:p.x})}},[i,c,u,s,r])}const w2=(0,X.createContext)(ge(Z({},Qo),{scaleX:1,scaleY:1}));var du;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(du||(du={}));const bue=(0,X.memo)(function(i){var r,s,l,d;let Je=i,{id:c,accessibility:u,autoScroll:h=!0,children:f,sensors:m=uue,collisionDetection:p=Cce,measuring:g,modifiers:v}=Je,w=Cn(Je,["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const x=(0,X.useReducer)(mue,void 0,pue),[_,k]=x,[A,C]=vce(),[M,D]=(0,X.useState)(du.Uninitialized),P=M===du.Initialized,{draggable:{active:T,nodes:O,translate:z},droppable:{containers:L}}=_,B=T?O.get(T):null,j=(0,X.useRef)({initial:null,translated:null}),V=(0,X.useMemo)(()=>{var Fe;return T!=null?{id:T,data:(Fe=B==null?void 0:B.data)!=null?Fe:hue,rect:j}:null},[T,B]),H=(0,X.useRef)(null),[Y,se]=(0,X.useState)(null),[re,$]=(0,X.useState)(null),te=V0(w,Object.values(w)),he=G0("DndDescribedBy",c),oe=(0,X.useMemo)(()=>L.getEnabled(),[L]),ee=vue(g),{droppableRects:pe,measureDroppableContainers:ce,measuringScheduled:ve}=eue(oe,{dragging:P,dependencies:[z.x,z.y],config:ee.droppable}),le=Qce(O,T),Pe=(0,X.useMemo)(()=>re?p2(re):null,[re]),we=Ne(),Ee=tue(le,ee.draggable.measure);yue({activeNode:T?O.get(T):null,config:we.layoutShiftCompensation,initialRect:Ee,measure:ee.draggable.measure});const xe=WB(le,ee.draggable.measure,Ee),Ue=WB(le?le.parentElement:null),Le=(0,X.useRef)({activatorEvent:null,active:null,activeNode:le,collisionRect:null,collisions:null,droppableRects:pe,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ie=L.getNodeFor((r=Le.current.over)==null?void 0:r.id),rt=cue({measure:ee.dragOverlay.measure}),nt=(s=rt.nodeRef.current)!=null?s:le,ot=P?(l=rt.rect)!=null?l:xe:null,mt=!!(rt.nodeRef.current&&rt.rect),it=rue(mt?null:xe),Ke=ZB(nt?Ka(nt):null),pt=aue(P?Ie!=null?Ie:le:null),Rt=due(pt),ae=QB(v,{transform:{x:z.x-it.x,y:z.y-it.y,scaleX:1,scaleY:1},activatorEvent:re,active:V,activeNodeRect:xe,containerNodeRect:Ue,draggingNodeRect:ot,over:Le.current.over,overlayNodeRect:rt.rect,scrollableAncestors:pt,scrollableAncestorRects:Rt,windowRect:Ke}),Q=Pe?ym(Pe,z):null,Te=sue(pt),Qe=$B(Te),He=$B(Te,[xe]),et=ym(ae,Qe),Ct=ot?Dce(ot,ae):null,ct=V&&Ct?p({active:V,collisionRect:Ct,droppableRects:pe,droppableContainers:oe,pointerCoordinates:Q}):null,Ge=MB(ct,"id"),[ut,Tt]=(0,X.useState)(null),xt=mt?ae:ym(ae,He),Ht=Mce(xt,(d=ut==null?void 0:ut.rect)!=null?d:null,xe),Bt=(0,X.useCallback)((Fe,$e)=>{let{sensor:at,options:Dt}=$e;if(H.current==null)return;const Wt=O.get(H.current);if(!Wt)return;const si=Fe.nativeEvent,Pt=new at({active:H.current,activeNode:Wt,event:si,options:Dt,context:Le,onStart(ai){const Ui=H.current;if(Ui==null)return;const bn=O.get(Ui);if(!bn)return;const{onDragStart:cr}=te.current,ya={active:{id:Ui,data:bn.data,rect:j}};(0,mm.unstable_batchedUpdates)(()=>{cr==null||cr(ya),D(du.Initializing),k({type:zr.DragStart,initialCoordinates:ai,active:Ui}),A({type:"onDragStart",event:ya})})},onMove(ai){k({type:zr.DragMove,coordinates:ai})},onEnd:pi(zr.DragEnd),onCancel:pi(zr.DragCancel)});(0,mm.unstable_batchedUpdates)(()=>{se(Pt),$(Fe.nativeEvent)});function pi(ai){return function(){return qi(this,null,function*(){const{active:bn,collisions:cr,over:ya,scrollAdjustedTranslate:ne}=Le.current;let De=null;if(bn&&ne){const{cancelDrop:Be}=te.current;De={activatorEvent:si,active:bn,collisions:cr,delta:ne,over:ya},ai===zr.DragEnd&&typeof Be=="function"&&(yield Promise.resolve(Be(De)))&&(ai=zr.DragCancel)}H.current=null,(0,mm.unstable_batchedUpdates)(()=>{k({type:ai}),D(du.Uninitialized),Tt(null),se(null),$(null);const Be=ai===zr.DragEnd?"onDragEnd":"onDragCancel";if(De){const Se=te.current[Be];Se==null||Se(De),A({type:Be,event:De})}})})}}},[O]),Ei=(0,X.useCallback)((Fe,$e)=>(at,Dt)=>{const Wt=at.nativeEvent,si=O.get(Dt);if(H.current!==null||!si||Wt.dndKit||Wt.defaultPrevented)return;const Pt={active:si};Fe(at,$e.options,Pt)===!0&&(Wt.dndKit={capturedBy:$e.sensor},H.current=Dt,Bt(at,$e))},[O,Bt]),Xi=Jce(m,Ei);oue(m),fo(()=>{xe&&M===du.Initializing&&D(du.Initialized)},[xe,M]),(0,X.useEffect)(()=>{const{onDragMove:Fe}=te.current,{active:$e,activatorEvent:at,collisions:Dt,over:Wt}=Le.current;if(!$e||!at)return;const si={active:$e,activatorEvent:at,collisions:Dt,delta:{x:et.x,y:et.y},over:Wt};(0,mm.unstable_batchedUpdates)(()=>{Fe==null||Fe(si),A({type:"onDragMove",event:si})})},[et.x,et.y]),(0,X.useEffect)(()=>{const{active:Fe,activatorEvent:$e,collisions:at,droppableContainers:Dt,scrollAdjustedTranslate:Wt}=Le.current;if(!Fe||H.current==null||!$e||!Wt)return;const{onDragOver:si}=te.current,Pt=Dt.get(Ge),pi=Pt&&Pt.rect.current?{id:Pt.id,rect:Pt.rect.current,data:Pt.data,disabled:Pt.disabled}:null,ai={active:Fe,activatorEvent:$e,collisions:at,delta:{x:Wt.x,y:Wt.y},over:pi};(0,mm.unstable_batchedUpdates)(()=>{Tt(pi),si==null||si(ai),A({type:"onDragOver",event:ai})})},[Ge]),fo(()=>{Le.current={activatorEvent:re,active:V,activeNode:le,collisionRect:Ct,collisions:ct,droppableRects:pe,draggableNodes:O,draggingNode:nt,draggingNodeRect:ot,droppableContainers:L,over:ut,scrollableAncestors:pt,scrollAdjustedTranslate:et},j.current={initial:ot,translated:Ct}},[V,le,ct,Ct,O,nt,ot,pe,L,ut,pt,et]),Yce(ge(Z({},we),{delta:z,draggingRect:Ct,pointerCoordinates:Q,scrollableAncestors:pt,scrollableAncestorRects:Rt}));const Bn=(0,X.useMemo)(()=>({active:V,activeNode:le,activeNodeRect:xe,activatorEvent:re,collisions:ct,containerNodeRect:Ue,dragOverlay:rt,draggableNodes:O,droppableContainers:L,droppableRects:pe,over:ut,measureDroppableContainers:ce,scrollableAncestors:pt,scrollableAncestorRects:Rt,measuringConfiguration:ee,measuringScheduled:ve,windowRect:Ke}),[V,le,xe,re,ct,Ue,rt,O,L,pe,ut,ce,pt,Rt,ee,ve,Ke]),ye=(0,X.useMemo)(()=>({activatorEvent:re,activators:Xi,active:V,activeNodeRect:xe,ariaDescribedById:{draggable:he},dispatch:k,draggableNodes:O,over:ut,measureDroppableContainers:ce}),[re,Xi,V,xe,k,he,O,ut,ce]);return X.createElement(CB.Provider,{value:C},X.createElement(X0.Provider,{value:ye},X.createElement(KB.Provider,{value:Bn},X.createElement(w2.Provider,{value:Ht},f)),X.createElement(gue,{disabled:(u==null?void 0:u.restoreFocus)===!1})),X.createElement(wce,ge(Z({},u),{hiddenTextDescribedById:he})));function Ne(){const Fe=(Y==null?void 0:Y.autoScrollEnabled)===!1,$e=typeof h=="object"?h.enabled===!1:h===!1,at=P&&!Fe&&!$e;return typeof h=="object"?ge(Z({},h),{enabled:at}):{enabled:at}}}),wue=(0,X.createContext)(null),JB="button",xue="Droppable";function _ue(t){let{id:i,data:r,disabled:s=!1,attributes:l}=t;const d=G0(xue),{activators:c,activatorEvent:u,active:h,activeNodeRect:f,ariaDescribedById:m,draggableNodes:p,over:g}=(0,X.useContext)(X0),{role:v=JB,roleDescription:w="draggable",tabIndex:x=0}=l!=null?l:{},_=(h==null?void 0:h.id)===i,k=(0,X.useContext)(_?w2:wue),[A,C]=u2(),[M,D]=u2(),P=lue(c,i),T=V0(r);fo(()=>(p.set(i,{id:i,key:d,node:A,activatorNode:M,data:T}),()=>{const z=p.get(i);z&&z.key===d&&p.delete(i)}),[p,i]);const O=(0,X.useMemo)(()=>({role:v,tabIndex:x,"aria-disabled":s,"aria-pressed":_&&v===JB?!0:void 0,"aria-roledescription":w,"aria-describedby":m.draggable}),[s,v,x,_,w,m.draggable]);return{active:h,activatorEvent:u,activeNodeRect:f,attributes:O,isDragging:_,listeners:s?void 0:P,node:A,over:g,setNodeRef:C,setActivatorNodeRef:D,transform:k}}function eF(){return(0,X.useContext)(KB)}const kue="Droppable",Sue={timeout:25};function Aue(t){let{data:i,disabled:r=!1,id:s,resizeObserverConfig:l}=t;const d=G0(kue),{active:c,dispatch:u,over:h,measureDroppableContainers:f}=(0,X.useContext)(X0),m=(0,X.useRef)({disabled:r}),p=(0,X.useRef)(!1),g=(0,X.useRef)(null),v=(0,X.useRef)(null),{disabled:w,updateMeasurementsFor:x,timeout:_}=Z(Z({},Sue),l),k=V0(x!=null?x:s),A=(0,X.useCallback)(()=>{if(!p.current){p.current=!0;return}v.current!=null&&clearTimeout(v.current),v.current=setTimeout(()=>{f(Array.isArray(k.current)?k.current:[k.current]),v.current=null},_)},[_]),C=y2({callback:A,disabled:w||!c}),M=(0,X.useCallback)((O,z)=>{C&&(z&&(C.unobserve(z),p.current=!1),O&&C.observe(O))},[C]),[D,P]=u2(M),T=V0(i);return(0,X.useEffect)(()=>{!C||!D.current||(C.disconnect(),p.current=!1,C.observe(D.current))},[D,C]),fo(()=>(u({type:zr.RegisterDroppable,element:{id:s,key:d,disabled:r,node:D,rect:g,data:T}}),()=>u({type:zr.UnregisterDroppable,key:d,id:s})),[s]),(0,X.useEffect)(()=>{r!==m.current.disabled&&(u({type:zr.SetDroppableDisabled,id:s,key:d,disabled:r}),m.current.disabled=r)},[s,d,r,u]),{active:c,rect:g,isOver:(h==null?void 0:h.id)===s,node:D,over:h,setNodeRef:P}}function Cue(t){let{animation:i,children:r}=t;const[s,l]=(0,X.useState)(null),[d,c]=(0,X.useState)(null),u=h2(r);return!r&&!s&&u&&l(u),fo(()=>{if(!d)return;const h=s==null?void 0:s.key,f=s==null?void 0:s.props.id;if(h==null||f==null){l(null);return}Promise.resolve(i(f,d)).then(()=>{l(null)})},[i,s,d]),X.createElement(X.Fragment,null,r,s?(0,X.cloneElement)(s,{ref:c}):null)}const Eue={x:0,y:0,scaleX:1,scaleY:1};function Mue(t){let{children:i}=t;return X.createElement(X0.Provider,{value:XB},X.createElement(w2.Provider,{value:Eue},i))}const Tue={position:"fixed",touchAction:"none"},Due=t=>f2(t)?"transform 250ms ease":void 0,Pue=(0,X.forwardRef)((t,i)=>{let{as:r,activatorEvent:s,adjustScale:l,children:d,className:c,rect:u,style:h,transform:f,transition:m=Due}=t;if(!u)return null;const p=l?f:ge(Z({},f),{scaleX:1,scaleY:1}),g=Z(ge(Z({},Tue),{width:u.width,height:u.height,top:u.top,left:u.left,transform:lu.Transform.toString(p),transformOrigin:l&&s?_ce(s,u):void 0,transition:typeof m=="function"?m(s):m}),h);return X.createElement(r,{className:c,style:g,ref:i},d)}),tF=t=>i=>{let{active:r,dragOverlay:s}=i;const l={},{styles:d,className:c}=t;if(d!=null&&d.active)for(const[u,h]of Object.entries(d.active))h!==void 0&&(l[u]=r.node.style.getPropertyValue(u),r.node.style.setProperty(u,h));if(d!=null&&d.dragOverlay)for(const[u,h]of Object.entries(d.dragOverlay))h!==void 0&&s.node.style.setProperty(u,h);return c!=null&&c.active&&r.node.classList.add(c.active),c!=null&&c.dragOverlay&&s.node.classList.add(c.dragOverlay),function(){for(const[h,f]of Object.entries(l))r.node.style.setProperty(h,f);c!=null&&c.active&&r.node.classList.remove(c.active)}},Oue={duration:250,easing:"ease",keyframes:t=>{let{transform:{initial:i,final:r}}=t;return[{transform:lu.Transform.toString(i)},{transform:lu.Transform.toString(r)}]},sideEffects:tF({styles:{active:{opacity:"0"}}})};function Iue(t){let{config:i,draggableNodes:r,droppableContainers:s,measuringConfiguration:l}=t;return c2((d,c)=>{if(i===null)return;const u=r.get(d);if(!u)return;const h=u.node.current;if(!h)return;const f=YB(c);if(!f)return;const{transform:m}=Ka(c).getComputedStyle(c),p=PB(m);if(!p)return;const g=typeof i=="function"?i:Rue(i);return NB(h,l.draggable.measure),g({active:{id:d,data:u.data,node:h,rect:l.draggable.measure(h)},draggableNodes:r,dragOverlay:{node:c,rect:l.dragOverlay.measure(f)},droppableContainers:s,measuringConfiguration:l,transform:p})})}function Rue(t){const{duration:i,easing:r,sideEffects:s,keyframes:l}=Z(Z({},Oue),t);return d=>{let A=d,{active:c,dragOverlay:u,transform:h}=A,f=Cn(A,["active","dragOverlay","transform"]);if(!i)return;const m={x:u.rect.left-c.rect.left,y:u.rect.top-c.rect.top},p={scaleX:h.scaleX!==1?c.rect.width*h.scaleX/u.rect.width:1,scaleY:h.scaleY!==1?c.rect.height*h.scaleY/u.rect.height:1},g=Z({x:h.x-m.x,y:h.y-m.y},p),v=l(ge(Z({},f),{active:c,dragOverlay:u,transform:{initial:h,final:g}})),[w]=v,x=v[v.length-1];if(JSON.stringify(w)===JSON.stringify(x))return;const _=s==null?void 0:s(Z({active:c,dragOverlay:u},f)),k=u.node.animate(v,{duration:i,easing:r,fill:"forwards"});return new Promise(C=>{k.onfinish=()=>{_==null||_(),C()}})}}let iF=0;function zue(t){return(0,X.useMemo)(()=>{if(t!=null)return iF++,iF},[t])}const Lue=X.memo(t=>{let{adjustScale:i=!1,children:r,dropAnimation:s,style:l,transition:d,modifiers:c,wrapperElement:u="div",className:h,zIndex:f=999}=t;const{activatorEvent:m,active:p,activeNodeRect:g,containerNodeRect:v,draggableNodes:w,droppableContainers:x,dragOverlay:_,over:k,measuringConfiguration:A,scrollableAncestors:C,scrollableAncestorRects:M,windowRect:D}=eF(),P=(0,X.useContext)(w2),T=zue(p==null?void 0:p.id),O=QB(c,{activatorEvent:m,active:p,activeNodeRect:g,containerNodeRect:v,draggingNodeRect:_.rect,over:k,overlayNodeRect:_.rect,scrollableAncestors:C,scrollableAncestorRects:M,transform:P,windowRect:D}),z=TT(g),L=Iue({config:s,draggableNodes:w,droppableContainers:x,measuringConfiguration:A}),B=z?_.setRef:void 0;return X.createElement(Mue,null,X.createElement(Cue,{animation:L},p&&T?X.createElement(Pue,{key:T,id:p.id,ref:B,as:u,activatorEvent:m,adjustScale:i,className:h,transition:d,rect:z,style:Z({zIndex:f},l),transform:O},r):null))});function Rfe(t){return i=>{let{transform:r}=i;return ge(Z({},r),{x:Math.ceil(r.x/t)*t,y:Math.ceil(r.y/t)*t})}}const zfe=t=>{let{transform:i}=t;return ge(Z({},i),{y:0})};function PT(t,i,r){const s=Z({},t);return i.top+t.y<=r.top?s.y=r.top-i.top:i.bottom+t.y>=r.top+r.height&&(s.y=r.top+r.height-i.bottom),i.left+t.x<=r.left?s.x=r.left-i.left:i.right+t.x>=r.left+r.width&&(s.x=r.left+r.width-i.right),s}const Lfe=t=>{let{containerNodeRect:i,draggingNodeRect:r,transform:s}=t;return!r||!i?s:PT(s,r,i)},Bfe=t=>{let{draggingNodeRect:i,transform:r,scrollableAncestorRects:s}=t;const l=s[0];return!i||!l?r:PT(r,i,l)},Bue=t=>{let{transform:i}=t;return ge(Z({},i),{x:0})},Fue=t=>{let{transform:i,draggingNodeRect:r,windowRect:s}=t;return!r||!s?i:PT(i,r,s)},Ffe=t=>{let{activatorEvent:i,draggingNodeRect:r,transform:s}=t;if(r&&i){const l=getEventCoordinates(i);if(!l)return s;const d=l.x-r.left,c=l.y-r.top;return ge(Z({},s),{x:s.x+d-r.width/2,y:s.y+c-r.height/2})}return s};function OT(t,i,r){const s=t.slice();return s.splice(r<0?s.length+r:r,0,s.splice(i,1)[0]),s}function Nfe(t,i,r){const s=t.slice();return s[i]=t[r],s[r]=t[i],s}function Nue(t,i){return t.reduce((r,s,l)=>{const d=i.get(s);return d&&(r[l]=d),r},Array(t.length))}function x2(t){return t!==null&&t>=0}function jue(t,i){if(t===i)return!0;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==i[r])return!1;return!0}function Uue(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const _2={scaleX:1,scaleY:1},jfe=t=>{var i;let{rects:r,activeNodeRect:s,activeIndex:l,overIndex:d,index:c}=t;const u=(i=r[l])!=null?i:s;if(!u)return null;const h=Vue(r,c,l);if(c===l){const f=r[d];return f?Z({x:l<d?f.left+f.width-(u.left+u.width):f.left-u.left,y:0},_2):null}return c>l&&c<=d?Z({x:-u.width-h,y:0},_2):c<l&&c>=d?Z({x:u.width+h,y:0},_2):Z({x:0,y:0},_2)};function Vue(t,i,r){const s=t[i],l=t[i-1],d=t[i+1];return!s||!l&&!d?0:r<i?l?s.left-(l.left+l.width):d.left-(s.left+s.width):d?d.left-(s.left+s.width):s.left-(l.left+l.width)}const nF=t=>{let{rects:i,activeIndex:r,overIndex:s,index:l}=t;const d=OT(i,s,r),c=i[l],u=d[l];return!u||!c?null:{x:u.left-c.left,y:u.top-c.top,scaleX:u.width/c.width,scaleY:u.height/c.height}},Ufe=t=>{let{activeIndex:i,index:r,rects:s,overIndex:l}=t,d,c;return r===i&&(d=s[r],c=s[l]),r===l&&(d=s[r],c=s[i]),!c||!d?null:{x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height}},k2={scaleX:1,scaleY:1},Hue=t=>{var i;let{activeIndex:r,activeNodeRect:s,index:l,rects:d,overIndex:c}=t;const u=(i=d[r])!=null?i:s;if(!u)return null;if(l===r){const f=d[c];return f?Z({x:0,y:r<c?f.top+f.height-(u.top+u.height):f.top-u.top},k2):null}const h=Gue(d,l,r);return l>r&&l<=c?Z({x:0,y:-u.height-h},k2):l<r&&l>=c?Z({x:0,y:u.height+h},k2):Z({x:0,y:0},k2)};function Gue(t,i,r){const s=t[i],l=t[i-1],d=t[i+1];return s?r<i?l?s.top-(l.top+l.height):d?d.top-(s.top+s.height):0:d?d.top-(s.top+s.height):l?s.top-(l.top+l.height):0:0}const rF="Sortable",aF=X.createContext({activeIndex:-1,containerId:rF,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:nF,disabled:{draggable:!1,droppable:!1}});function Wue(t){let{children:i,id:r,items:s,strategy:l=nF,disabled:d=!1}=t;const{active:c,dragOverlay:u,droppableRects:h,over:f,measureDroppableContainers:m}=eF(),p=G0(rF,r),g=u.rect!==null,v=(0,X.useMemo)(()=>s.map(P=>typeof P=="object"&&"id"in P?P.id:P),[s]),w=c!=null,x=c?v.indexOf(c.id):-1,_=f?v.indexOf(f.id):-1,k=(0,X.useRef)(v),A=!jue(v,k.current),C=_!==-1&&x===-1||A,M=Uue(d);fo(()=>{A&&w&&m(v)},[A,v,w,m]),(0,X.useEffect)(()=>{k.current=v},[v]);const D=(0,X.useMemo)(()=>({activeIndex:x,containerId:p,disabled:M,disableTransforms:C,items:v,overIndex:_,useDragOverlay:g,sortedRects:Nue(v,h),strategy:l}),[x,p,M.draggable,M.droppable,C,v,_,h,g,l]);return X.createElement(aF.Provider,{value:D},i)}const que=t=>{let{id:i,items:r,activeIndex:s,overIndex:l}=t;return OT(r,s,l).indexOf(i)},$ue=t=>{let{containerId:i,isSorting:r,wasDragging:s,index:l,items:d,newIndex:c,previousItems:u,previousContainerId:h,transition:f}=t;return!f||!s||u!==d&&l===c?!1:r?!0:c!==l&&i===h},Zue={duration:200,easing:"ease"},sF="transform",Yue=lu.Transition.toString({property:sF,duration:0,easing:"linear"}),Xue={roleDescription:"sortable"};function Kue(t){let{disabled:i,index:r,node:s,rect:l}=t;const[d,c]=(0,X.useState)(null),u=(0,X.useRef)(r);return fo(()=>{if(!i&&r!==u.current&&s.current){const h=l.current;if(h){const f=bm(s.current,{ignoreTransform:!0}),m={x:h.left-f.left,y:h.top-f.top,scaleX:h.width/f.width,scaleY:h.height/f.height};(m.x||m.y)&&c(m)}}r!==u.current&&(u.current=r)},[i,r,s,l]),(0,X.useEffect)(()=>{d&&c(null)},[d]),d}function Que(t){let{animateLayoutChanges:i=$ue,attributes:r,disabled:s,data:l,getNewIndex:d=que,id:c,strategy:u,resizeObserverConfig:h,transition:f=Zue}=t;const{items:m,containerId:p,activeIndex:g,disabled:v,disableTransforms:w,sortedRects:x,overIndex:_,useDragOverlay:k,strategy:A}=(0,X.useContext)(aF),C=Jue(s,v),M=m.indexOf(c),D=(0,X.useMemo)(()=>Z({sortable:{containerId:p,index:M,items:m}},l),[p,l,M,m]),P=(0,X.useMemo)(()=>m.slice(m.indexOf(c)),[m,c]),{rect:T,node:O,isOver:z,setNodeRef:L}=Aue({id:c,data:D,disabled:C.droppable,resizeObserverConfig:Z({updateMeasurementsFor:P},h)}),{active:B,activatorEvent:j,activeNodeRect:V,attributes:H,setNodeRef:Y,listeners:se,isDragging:re,over:$,setActivatorNodeRef:te,transform:he}=_ue({id:c,data:D,attributes:Z(Z({},Xue),r),disabled:C.draggable}),oe=oce(L,Y),ee=!!B,pe=ee&&!w&&x2(g)&&x2(_),ce=!k&&re,ve=ce&&pe?he:null,le=u!=null?u:A,Pe=pe?ve!=null?ve:le({rects:x,activeNodeRect:V,activeIndex:g,overIndex:_,index:M}):null,we=x2(g)&&x2(_)?d({id:c,items:m,activeIndex:g,overIndex:_}):M,Ee=B==null?void 0:B.id,xe=(0,X.useRef)({activeId:Ee,items:m,newIndex:we,containerId:p}),Ue=m!==xe.current.items,Le=i({active:B,containerId:p,isDragging:re,isSorting:ee,id:c,index:M,items:m,newIndex:xe.current.newIndex,previousItems:xe.current.items,previousContainerId:xe.current.containerId,transition:f,wasDragging:xe.current.activeId!=null}),Ie=Kue({disabled:!Le,index:M,node:O,rect:T});return(0,X.useEffect)(()=>{ee&&xe.current.newIndex!==we&&(xe.current.newIndex=we),p!==xe.current.containerId&&(xe.current.containerId=p),m!==xe.current.items&&(xe.current.items=m)},[ee,we,p,m]),(0,X.useEffect)(()=>{if(Ee===xe.current.activeId)return;if(Ee&&!xe.current.activeId){xe.current.activeId=Ee;return}const nt=setTimeout(()=>{xe.current.activeId=Ee},50);return()=>clearTimeout(nt)},[Ee]),{active:B,activeIndex:g,attributes:H,data:D,rect:T,index:M,newIndex:we,items:m,isOver:z,isSorting:ee,isDragging:re,listeners:se,node:O,overIndex:_,over:$,setNodeRef:oe,setActivatorNodeRef:te,setDroppableNodeRef:L,setDraggableNodeRef:Y,transform:Ie!=null?Ie:Pe,transition:rt()};function rt(){if(Ie||Ue&&xe.current.newIndex===M)return Yue;if(!(ce&&!f2(j)||!f)&&(ee||Le))return lu.Transition.toString(ge(Z({},f),{property:sF}))}}function Jue(t,i){var r,s;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(r=t==null?void 0:t.draggable)!=null?r:i.draggable,droppable:(s=t==null?void 0:t.droppable)!=null?s:i.droppable}}function S2(t){if(!t)return!1;const i=t.data.current;return!!(i&&"sortable"in i&&typeof i.sortable=="object"&&"containerId"in i.sortable&&"items"in i.sortable&&"index"in i.sortable)}const ehe=[Hi.Down,Hi.Right,Hi.Up,Hi.Left],the=(t,i)=>{let{context:{active:r,collisionRect:s,droppableRects:l,droppableContainers:d,over:c,scrollableAncestors:u}}=i;if(ehe.includes(t.code)){if(t.preventDefault(),!r||!s)return;const h=[];d.getEnabled().forEach(p=>{if(!p||p!=null&&p.disabled)return;const g=l.get(p.id);if(g)switch(t.code){case Hi.Down:s.top<g.top&&h.push(p);break;case Hi.Up:s.top>g.top&&h.push(p);break;case Hi.Left:s.left>g.left&&h.push(p);break;case Hi.Right:s.left<g.left&&h.push(p);break}});const f=Sce({active:r,collisionRect:s,droppableRects:l,droppableContainers:h,pointerCoordinates:null});let m=MB(f,"id");if(m===(c==null?void 0:c.id)&&f.length>1&&(m=f[1].id),m!=null){const p=d.get(r.id),g=d.get(m),v=g?l.get(g.id):null,w=g==null?void 0:g.node.current;if(w&&v&&p&&g){const _=g2(w).some((P,T)=>u[T]!==P),k=oF(p,g),A=ihe(p,g),C=_||!k?{x:0,y:0}:{x:A?s.width-v.width:0,y:A?s.height-v.height:0},M={x:v.left,y:v.top};return C.x&&C.y?M:W0(M,C)}}}};function oF(t,i){return!S2(t)||!S2(i)?!1:t.data.current.sortable.containerId===i.data.current.sortable.containerId}function ihe(t,i){return!S2(t)||!S2(i)||!oF(t,i)?!1:t.data.current.sortable.index<i.data.current.sortable.index}var nhe=de(99245),lF,dF,cF=(0,Et.kc)(function(t){var i=t.css;return{container:i(lF||(lF=(0,be.Z)([`
      padding: 0;
      list-style: none;
    `]))),item:i(dF||(dF=(0,be.Z)([`
      box-sizing: border-box;
      list-style: none;
    `])))}}),rhe=["children","id","style"],uF=(0,X.createContext)({attributes:{},listeners:void 0,ref:function(){}}),ahe=(0,X.memo)(function(t){var i=t.children,r=t.id,s=t.style,l=(0,ht.Z)(t,rhe),d=cF(),c=d.styles,u=Que({id:r}),h=u.attributes,f=u.isDragging,m=u.listeners,p=u.setNodeRef,g=u.setActivatorNodeRef,v=u.transform,w=u.transition,x=(0,X.useMemo)(function(){return{attributes:h,listeners:m,ref:g}},[h,m,g]);return(0,J.jsx)(uF.Provider,{value:x,children:(0,J.jsx)(Ae.D,(0,R.Z)((0,R.Z)({align:"center",as:"li",className:c.item,gap:4,horizontal:!0,ref:p,style:(0,R.Z)({opacity:f?.4:void 0,transform:lu.Translate.toString(v),transition:w},s)},l),{},{children:i}))})}),she=ahe,ohe=["style"],lhe=(0,X.memo)(function(t){var i=t.style,r=(0,ht.Z)(t,ohe),s=(0,X.useState)(!1),l=(0,Xt.Z)(s,2),d=l[0],c=l[1],u=(0,X.useContext)(uF),h=u.attributes,f=u.listeners,m=u.ref;return(0,J.jsx)(st.Z,(0,R.Z)((0,R.Z)((0,R.Z)((0,R.Z)({"data-cypress":"draggable-handle",glass:!0,icon:nhe.Z,onMouseDown:function(){return c(!0)},onMouseUp:function(){return c(!1)},size:"small",style:(0,R.Z)({cursor:d?"grab":"grabbing"},i)},r),h),f),{},{ref:m}))}),dhe=lhe,che={sideEffects:tF({styles:{active:{opacity:"0.4"}}})},uhe=(0,X.memo)(function(t){var i=t.children;return(0,J.jsx)(Lue,{dropAnimation:che,children:i})}),hhe=uhe,fhe=["items","onChange","renderItem","gap"],phe=(0,X.memo)(function(t){var i=t.items,r=t.onChange,s=t.renderItem,l=t.gap,d=l===void 0?8:l,c=(0,ht.Z)(t,fhe),u=(0,X.useState)(null),h=(0,Xt.Z)(u,2),f=h[0],m=h[1],p=cF(),g=p.styles,v=(0,X.useMemo)(function(){return i.find(function(x){return x.id===(f==null?void 0:f.id)})},[f,i]),w=xce(EB(AT),EB(kT,{coordinateGetter:the}));return(0,J.jsxs)(bue,{modifiers:[Bue,Fue],onDragCancel:function(){m(null)},onDragEnd:function(_){var k=_.active,A=_.over;if(A&&k.id!==(A==null?void 0:A.id)){var C=i.findIndex(function(D){var P=D.id;return P===k.id}),M=i.findIndex(function(D){var P=D.id;return P===A.id});r(OT(i,C,M))}m(null)},onDragStart:function(_){var k=_.active;m(k)},sensors:w,children:[(0,J.jsx)(Wue,{items:i,strategy:Hue,children:(0,J.jsx)(Ae.D,(0,R.Z)((0,R.Z)({as:"ul",className:g.container,gap:d},c),{},{children:i.map(function(x){return(0,J.jsx)(X.Fragment,{children:s(x)},x.id)})}))}),(0,J.jsx)(hhe,{children:v?s(v):null})]})}),IT=phe;IT.Item=she,IT.DragHandle=dhe;var mhe=IT,ghe=de(59296),vhe=de(99549),hF=de(63039),ys=de(41626),fF=de(32450),wm=de(54526),bs={blue:ys._.blue.dark[9],cyan:ys._.cyan.dark[9],geekblue:ys._.geekblue.dark[9],gold:ys._.gold.dark[9],green:ys._.green.dark[9],lime:ys._.lime.dark[9],magenta:ys._.magenta.dark[9],orange:ys._.orange.dark[9],purple:ys._.purple.dark[9],red:ys._.red.dark[9],volcano:ys._.volcano.dark[9],yellow:ys._.yellow.dark[9]},yhe=[bs.red,bs.orange,bs.gold,bs.yellow,bs.lime,bs.green,bs.cyan,bs.blue,bs.geekblue,bs.purple,bs.magenta,bs.volcano],Th={mauve:wm.H.mauve.dark[9],olive:wm.H.olive.dark[9],sage:wm.H.sage.dark[9],sand:wm.H.sand.dark[9],slate:wm.H.slate.dark[9]},bhe=[Th.mauve,Th.slate,Th.sage,Th.olive,Th.sand],whe=function(i,r){var s=i==="primary"?bs:Th,l=Object.entries(s).find(function(d){return d[1]===r});return l==null?void 0:l[0]},xhe=de(94834),_he=de(68389),pF,mF,khe=(0,Et.kc)(function(t,i){var r=t.css,s=t.token;return{active:r(pF||(pF=(0,be.Z)([`
      box-shadow: 0 0 0 2px `,`;
    `])),s.colorTextTertiary),container:r(mF||(mF=(0,be.Z)([`
      cursor: pointer;

      width: `,`px;
      height: `,`px;

      background: `,`;
      border-radius: 50%;
      box-shadow: inset 0 0 0 2px `,`;

      transition:
        scale 400ms `,`,
        box-shadow 100ms `,`;

      &:hover {
        box-shadow: 0 0 0 3px `,`;
      }

      &:active {
        scale: 0.8;
      }
    `])),i,i,s.colorBgContainer,s.colorSplit,s.motionEaseOut,s.motionEaseOut,s.colorText)}}),She=(0,X.memo)(function(t){var i=t.colors,r=t.activeColor,s=t.onSelect,l=t.size,d=l===void 0?24:l,c=(0,Et.Fg)(),u=khe(d),h=u.cx,f=u.styles;return(0,J.jsxs)(Ae.D,{gap:8,horizontal:!0,style:{flexWrap:"wrap"},children:[(0,J.jsx)(Ae.D,{className:h(f.container,!r&&f.active),onClick:function(){s==null||s()},style:{background:c.colorBgContainer}}),i.map(function(m){var p=m===r;return(0,J.jsx)(Ae.D,{className:h(f.container,p&&f.active),onClick:function(){s==null||s(m)},style:{background:m}},m)})]})}),Ahe=She,Che=de(80334),Ehe=de(63556),Mhe=(0,X.memo)(function(t){var i=t.title,r=i===void 0?"LobeHub":i,s=t.description,l=s===void 0?"Empowering your AI dreams with LobeHub":s,d=t.withManifest,c=(0,Um.nc)(),u=(0,X.useCallback)(function(h){return c({path:h,pkg:"@lobehub/assets-favicons",version:"latest"})},[]);return(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)("link",{href:u("assets/favicon.ico"),rel:"shortcut icon"}),(0,J.jsx)("link",{href:u("assets/apple-touch-icon.png"),rel:"apple-touch-icon",sizes:"180x180"}),(0,J.jsx)("link",{href:u("assets/favicon-32x32.png"),rel:"icon",sizes:"32x32",type:"image/png"}),(0,J.jsx)("link",{href:u("assets/favicon-16x16.png"),rel:"icon",sizes:"16x16",type:"image/png"}),(0,J.jsx)("meta",{content:"width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover, user-scalable=no",name:"viewport"}),(0,J.jsx)("meta",{content:r,name:"apple-mobile-web-app-title"}),(0,J.jsx)("meta",{content:r,name:"application-name"}),(0,J.jsx)("meta",{content:l,name:"description"}),(0,J.jsx)("meta",{content:"#000000",name:"msapplication-TileColor"}),(0,J.jsx)("meta",{content:"#fff",media:"(prefers-color-scheme: light)",name:"theme-color"}),(0,J.jsx)("meta",{content:"#000",media:"(prefers-color-scheme: dark)",name:"theme-color"}),(0,J.jsx)("meta",{content:"yes",name:"apple-mobile-web-app-capable"}),(0,J.jsx)("meta",{content:r,name:"apple-mobile-web-app-title"}),(0,J.jsx)("meta",{content:"black-translucent",name:"apple-mobile-web-app-status-bar-style"}),d&&(0,J.jsx)("link",{href:u("assets/site.webmanifest"),rel:"manifest"})]})}),The=Mhe,Dhe=de(29852),Phe=de(64697),gF,vF,yF,bF,wF,xF,A2=28,RT=20,Ohe=(0,Et.kc)(function(t,i){var r=t.cx,s=t.css,l=t.token,d=t.isDarkMode,c=i.type,u=i.shape,h;switch(c){case"normal":{h=s(gF||(gF=(0,be.Z)([`
          color: `,`;
        `])),l.colorSuccessText);break}case"low":{h=s(vF||(vF=(0,be.Z)([`
          color: `,`;
        `])),l.colorWarningText);break}case"overload":{h=s(yF||(yF=(0,be.Z)([`
          color: `,`;
        `])),l.colorErrorText);break}}var f=s(bF||(bF=(0,be.Z)([`
      padding-block: 0;
      padding-inline: `,"px ",`px;
      background: `,`;
      border-radius: `,`px;
    `])),(A2-RT)/2,(A2-RT)*1.2,d?l.colorFillSecondary:l.colorFillTertiary,A2/2),m=s(wF||(wF=(0,be.Z)([`
      border-radius: `,`px;
    `])),l.borderRadiusSM);return{container:r(h,u==="round"?f:m,s(xF||(xF=(0,be.Z)([`
          user-select: none;

          overflow: hidden;

          min-width: fit-content;
          height: `,`px;

          font-family: `,`;
          font-size: 13px;
          line-height: 1;
        `])),A2,l.fontFamilyCode))}}),Ihe=["className","displayMode","maxValue","value","text","shape","unoptimized"],Rhe=(0,X.forwardRef)(function(t,i){var r=t.className,s=t.displayMode,l=s===void 0?"remained":s,d=t.maxValue,c=t.value,u=t.text,h=t.shape,f=h===void 0?"round":h,m=t.unoptimized,p=(0,ht.Z)(t,Ihe),g=(0,Ql.F)(),v=g.mobile,w=d-c,x=w/d,_,k;x>.3?(_="normal",k="\u{1F600}"):x>0?(_="low",k="\u{1F605}"):(_="overload",k="\u{1F92F}");var A=Ohe({shape:f,type:_}),C=A.styles,M=A.cx;return(0,J.jsxs)(Ae.D,(0,R.Z)((0,R.Z)({align:"center",className:M(C.container,r),flex:"none",gap:4,horizontal:!0,ref:i},p),{},{children:[(0,J.jsx)(fb.Z,{emoji:k,size:RT,unoptimized:m}),w>0?[v?"":l==="remained"?(u==null?void 0:u.remained)||"Remained":(u==null?void 0:u.used)||"Used",l==="remained"?w:c].join(" "):(u==null?void 0:u.overload)||"Overload"]}))}),zhe=Rhe,Lhe=de(45292),Bhe=de(81001),_F=de(86842),Fhe=de(68959)},80438:function(ii){"use strict";ii.exports=function(oi,de){if(oi===null||typeof oi=="undefined")throw new TypeError("expected first argument to be an object.");if(typeof de=="undefined"||typeof Symbol=="undefined"||typeof Object.getOwnPropertySymbols!="function")return oi;for(var st=Object.prototype.propertyIsEnumerable,R=Object(oi),ht=arguments.length,Gt=0;++Gt<ht;)for(var St=Object(arguments[Gt]),X=Object.getOwnPropertySymbols(St),Ae=0;Ae<X.length;Ae++){var yt=X[Ae];st.call(St,yt)&&(R[yt]=St[yt])}return R}},67715:function(ii,oi){"use strict";var de;de=!0,oi.Z=function(st,R){if(st&&R){var ht=Array.isArray(R)?R:R.split(","),Gt=st.name||"",St=(st.type||"").toLowerCase(),X=St.replace(/\/.*$/,"");return ht.some(function(Ae){var yt=Ae.trim().toLowerCase();return yt.charAt(0)==="."?Gt.toLowerCase().endsWith(yt):yt.endsWith("/*")?X===yt.replace(/\/.*$/,""):St===yt})}return!0}},48396:function(ii,oi,de){"use strict";var st=de(63566);ii.exports=function(St){st(St)||(St={});for(var X=arguments.length,Ae=1;Ae<X;Ae++){var yt=arguments[Ae];st(yt)&&R(St,yt)}return St};function R(Gt,St){for(var X in St)ht(St,X)&&(Gt[X]=St[X])}function ht(Gt,St){return Object.prototype.hasOwnProperty.call(Gt,St)}},85582:function(ii,oi,de){"use strict";var st=de(12723),R=de(80438);ii.exports=Object.assign||function(Ft){if(Ft===null||typeof Ft=="undefined")throw new TypeError("Cannot convert undefined or null to object");X(Ft)||(Ft={});for(var be=1;be<arguments.length;be++){var Et=arguments[be];Gt(Et)&&(Et=St(Et)),X(Et)&&(ht(Ft,Et),R(Ft,Et))}return Ft};function ht(Ft,be){for(var Et in be)Ae(be,Et)&&(Ft[Et]=be[Et])}function Gt(Ft){return Ft&&typeof Ft=="string"}function St(Ft){var be={};for(var Et in Ft)be[Et]=Ft[Et];return be}function X(Ft){return Ft&&typeof Ft=="object"||st(Ft)}function Ae(Ft,be){return Object.prototype.hasOwnProperty.call(Ft,be)}function yt(Ft,be){return Object.prototype.propertyIsEnumerable.call(Ft,be)}},21603:function(ii){"use strict";ii.exports=function(de,st,R){for(var ht in de)if(st.call(R,de[ht],ht,de)===!1)break}},33780:function(ii){ii.exports=function(st,R,ht,Gt,St){if(!oi(st)||!R)return st;if(R=de(R),ht&&(R+="."+de(ht)),Gt&&(R+="."+de(Gt)),St&&(R+="."+de(St)),R in st)return st[R];for(var X=R.split("."),Ae=X.length,yt=-1;st&&++yt<Ae;){for(var Ft=X[yt];Ft[Ft.length-1]==="\\";)Ft=Ft.slice(0,-1)+"."+X[++yt];st=st[Ft]}return st};function oi(st){return st!==null&&(typeof st=="object"||typeof st=="function")}function de(st){return st?Array.isArray(st)?st.join("."):st:""}},63566:function(ii){"use strict";ii.exports=function(de){return typeof de!="undefined"&&de!==null&&(typeof de=="object"||typeof de=="function")}},12723:function(ii,oi,de){"use strict";var st=de(76805);ii.exports=function(ht){return st(ht)||typeof ht=="function"||Array.isArray(ht)}},76805:function(ii,oi,de){"use strict";var st=de(48646);function R(ht){return st(ht)===!0&&Object.prototype.toString.call(ht)==="[object Object]"}ii.exports=function(Gt){var St,X;return!(R(Gt)===!1||(St=Gt.constructor,typeof St!="function")||(X=St.prototype,R(X)===!1)||X.hasOwnProperty("isPrototypeOf")===!1)}},48646:function(ii){"use strict";ii.exports=function(de){return de!=null&&typeof de=="object"&&Array.isArray(de)===!1}},63039:function(ii,oi,de){"use strict";de.d(oi,{MT:function(){return pA},M4:function(){return mA},WQ:function(){return cw}});var st=de(30967),R=de(75271),ht=de.t(R,2),Gt=de(80284);function St(y,b){typeof y=="function"?y(b):y!=null&&(y.current=b)}function X(...y){return b=>y.forEach(S=>St(S,b))}function Ae(...y){return(0,R.useCallback)(X(...y),y)}const yt=(0,R.forwardRef)((y,b)=>{const U=y,{children:S}=U,E=Cn(U,["children"]),I=R.Children.toArray(S),F=I.find(Et);if(F){const G=F.props.children,W=I.map(K=>K===F?R.Children.count(G)>1?R.Children.only(null):(0,R.isValidElement)(G)?G.props.children:null:K);return(0,R.createElement)(Ft,(0,Gt.Z)({},E,{ref:b}),(0,R.isValidElement)(G)?(0,R.cloneElement)(G,void 0,W):null)}return(0,R.createElement)(Ft,(0,Gt.Z)({},E,{ref:b}),S)});yt.displayName="Slot";const Ft=(0,R.forwardRef)((y,b)=>{const I=y,{children:S}=I,E=Cn(I,["children"]);return(0,R.isValidElement)(S)?(0,R.cloneElement)(S,ge(Z({},tn(E,S.props)),{ref:b?X(b,S.ref):S.ref})):R.Children.count(S)>1?R.Children.only(null):null});Ft.displayName="SlotClone";const be=({children:y})=>(0,R.createElement)(R.Fragment,null,y);function Et(y){return(0,R.isValidElement)(y)&&y.type===be}function tn(y,b){const S=Z({},b);for(const E in b){const I=y[E],F=b[E];/^on[A-Z]/.test(E)?I&&F?S[E]=(...G)=>{F(...G),I(...G)}:I&&(S[E]=I):E==="style"?S[E]=Z(Z({},I),F):E==="className"&&(S[E]=[I,F].filter(Boolean).join(" "))}return Z(Z({},y),S)}const fn=null,J=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((y,b)=>{const S=(0,R.forwardRef)((E,I)=>{const W=E,{asChild:F}=W,U=Cn(W,["asChild"]),G=F?yt:b;return(0,R.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,R.createElement)(G,(0,Gt.Z)({},U,{ref:I}))});return S.displayName=`Primitive.${b}`,ge(Z({},y),{[b]:S})},{});function xn(y,b){y&&(0,st.flushSync)(()=>y.dispatchEvent(b))}const Yr=null,mo="Portal",Xt=(0,R.forwardRef)((y,b)=>{var S;const F=y,{container:E=globalThis==null||(S=globalThis.document)===null||S===void 0?void 0:S.body}=F,I=Cn(F,["container"]);return E?st.createPortal((0,R.createElement)(J.div,(0,Gt.Z)({},I,{ref:b})),E):null}),Lr=Xt;var _n=Object.prototype.hasOwnProperty;function Fn(y,b){var S,E;if(y===b)return!0;if(y&&b&&(S=y.constructor)===b.constructor){if(S===Date)return y.getTime()===b.getTime();if(S===RegExp)return y.toString()===b.toString();if(S===Array){if((E=y.length)===b.length)for(;E--&&Fn(y[E],b[E]););return E===-1}if(!S||typeof y=="object"){E=0;for(S in y)if(_n.call(y,S)&&++E&&!_n.call(b,S)||!(S in b)||!Fn(y[S],b[S]))return!1;return Object.keys(b).length===E}}return y!==y&&b!==b}function Ii(y,b){if(Object.is(y,b))return!0;if(typeof y!="object"||y===null||typeof b!="object"||b===null)return!1;const S=Object.keys(y);if(S.length!==Object.keys(b).length)return!1;for(let E=0;E<S.length;E++)if(!Object.prototype.hasOwnProperty.call(b,S[E])||!Object.is(y[S[E]],b[S[E]]))return!1;return!0}var ur=function(b,S,E,I){this.name=b,this.fn=S,this.args=E,this.modifiers=I};ur.prototype._test=function(b){var S=this.fn;try{oa(this.modifiers.slice(),S,this)(b)}catch(E){S=function(){return!1}}try{return oa(this.modifiers.slice(),S,this)(b)}catch(E){return!1}},ur.prototype._check=function(b){try{oa(this.modifiers.slice(),this.fn,this)(b)}catch(S){if(oa(this.modifiers.slice(),function(E){return E},this)(!1))return}if(!oa(this.modifiers.slice(),this.fn,this)(b))throw null},ur.prototype._testAsync=function(b){var S=this;return new Promise(function(E,I){hi(S.modifiers.slice(),S.fn,S)(b).then(function(F){F?E(b):I(null)}).catch(function(F){return I(F)})})};function $d(y,b){return b===void 0&&(b="simple"),typeof y=="object"?y[b]:y}function oa(y,b,S){if(y.length){var E=y.shift(),I=oa(y,b,S);return E.perform(I,S)}else return $d(b)}function hi(y,b,S){if(y.length){var E=y.shift(),I=hi(y,b,S);return E.performAsync(I,S)}else return function(F){return Promise.resolve($d(b,"async")(F))}}var wi=function(b,S,E){this.name=b,this.perform=S,this.performAsync=E},Xe=function(y){function b(S,E,I,F){for(var U=[],G=arguments.length-4;G-- >0;)U[G]=arguments[G+4];y.call(this,U),y.captureStackTrace&&y.captureStackTrace(this,b),this.rule=S,this.value=E,this.cause=I,this.target=F}return y&&(b.__proto__=y),b.prototype=Object.create(y&&y.prototype),b.prototype.constructor=b,b}(Error),Re=function(b,S){b===void 0&&(b=[]),S===void 0&&(S=[]),this.chain=b,this.nextRuleModifiers=S};Re.prototype._applyRule=function(b,S){var E=this;return function(){for(var I=[],F=arguments.length;F--;)I[F]=arguments[F];return E.chain.push(new ur(S,b.apply(E,I),I,E.nextRuleModifiers)),E.nextRuleModifiers=[],E}},Re.prototype._applyModifier=function(b,S){return this.nextRuleModifiers.push(new wi(S,b.simple,b.async)),this},Re.prototype._clone=function(){return new Re(this.chain.slice(),this.nextRuleModifiers.slice())},Re.prototype.test=function(b){return this.chain.every(function(S){return S._test(b)})},Re.prototype.testAll=function(b){var S=[];return this.chain.forEach(function(E){try{E._check(b)}catch(I){S.push(new Xe(E,b,I))}}),S},Re.prototype.check=function(b){this.chain.forEach(function(S){try{S._check(b)}catch(E){throw new Xe(S,b,E)}})},Re.prototype.testAsync=function(b){var S=this;return new Promise(function(E,I){It(b,S.chain.slice(),E,I)})};function It(y,b,S,E){if(b.length){var I=b.shift();I._testAsync(y).then(function(){It(y,b,S,E)},function(F){E(new Xe(I,y,F))})}else S(y)}var Qi=function(y,b){return b&&typeof y=="string"&&y.trim().length===0?!0:y==null};function $i(y,b){return b===void 0&&(b=!1),{simple:function(S){return Qi(S,b)||y.check(S)===void 0},async:function(S){return Qi(S,b)||y.testAsync(S)}}}function la(){return typeof Proxy!="undefined"?ca(new Re):Ji(new Re)}var da={};la.extend=function(y){Object.assign(da,y)},la.clearCustomRules=function(){da={}};function ca(y){return new Proxy(y,{get:function(S,E){if(E in S)return S[E];var I=ca(y._clone());if(E in Li)return I._applyModifier(Li[E],E);if(E in da)return I._applyRule(da[E],E);if(E in Sr)return I._applyRule(Sr[E],E)}})}function Ji(y){var b=function(I,F){return Object.keys(I).forEach(function(U){F[U]=function(){for(var G=[],W=arguments.length;W--;)G[W]=arguments[W];var K=Ji(F._clone()),ie=K._applyRule(I[U],U).apply(void 0,G);return ie}}),F},S=b(Sr,y),E=b(da,S);return Object.keys(Li).forEach(function(I){Object.defineProperty(E,I,{get:function(){var F=Ji(E._clone());return F._applyModifier(Li[I],I)}})}),E}var Li={not:{simple:function(y){return function(b){return!y(b)}},async:function(y){return function(b){return Promise.resolve(y(b)).then(function(S){return!S}).catch(function(){return!0})}}},some:{simple:function(y){return function(b){return En(b).some(function(S){try{return y(S)}catch(E){return!1}})}},async:function(y){return function(b){return Promise.all(En(b).map(function(S){try{return y(S).catch(function(){return!1})}catch(E){return!1}})).then(function(S){return S.some(Boolean)})}}},every:{simple:function(y){return function(b){return b!==!1&&En(b).every(y)}},async:function(y){return function(b){return Promise.all(En(b).map(y)).then(function(S){return S.every(Boolean)})}}},strict:{simple:function(y,b){return function(S){return Dn(b)&&S&&typeof S=="object"?Object.keys(b.args[0]).length===Object.keys(S).length&&y(S):y(S)}},async:function(y,b){return function(S){return Promise.resolve(y(S)).then(function(E){return Dn(b)&&S&&typeof S=="object"?Object.keys(b.args[0]).length===Object.keys(S).length&&E:E}).catch(function(){return!1})}}}};function Dn(y){return y&&y.name==="schema"&&y.args.length>0&&typeof y.args[0]=="object"}function En(y){return typeof y=="string"?y.split(""):y}var Sr={equal:function(y){return function(b){return b==y}},exact:function(y){return function(b){return b===y}},number:function(y){return y===void 0&&(y=!0),function(b){return typeof b=="number"&&(y||isFinite(b))}},integer:function(){return function(y){var b=Number.isInteger||Fs;return b(y)}},numeric:function(){return function(y){return!isNaN(parseFloat(y))&&isFinite(y)}},string:function(){return Xr("string")},boolean:function(){return Xr("boolean")},undefined:function(){return Xr("undefined")},null:function(){return Xr("null")},array:function(){return Xr("array")},object:function(){return Xr("object")},instanceOf:function(y){return function(b){return b instanceof y}},pattern:function(y){return function(b){return y.test(b)}},lowercase:function(){return function(y){return typeof y=="boolean"||y===y.toLowerCase()&&y.trim()!==""}},uppercase:function(){return function(y){return y===y.toUpperCase()&&y.trim()!==""}},vowel:function(){return function(y){return/^[aeiou]+$/i.test(y)}},consonant:function(){return function(y){return/^(?=[^aeiou])([a-z]+)$/i.test(y)}},first:function(y){return function(b){return b[0]==y}},last:function(y){return function(b){return b[b.length-1]==y}},empty:function(){return function(y){return y.length===0}},length:function(y,b){return function(S){return S.length>=y&&S.length<=(b||y)}},minLength:function(y){return function(b){return b.length>=y}},maxLength:function(y){return function(b){return b.length<=y}},negative:function(){return function(y){return y<0}},positive:function(){return function(y){return y>=0}},between:function(y,b){return function(S){return S>=y&&S<=b}},range:function(y,b){return function(S){return S>=y&&S<=b}},lessThan:function(y){return function(b){return b<y}},lessThanOrEqual:function(y){return function(b){return b<=y}},greaterThan:function(y){return function(b){return b>y}},greaterThanOrEqual:function(y){return function(b){return b>=y}},even:function(){return function(y){return y%2===0}},odd:function(){return function(y){return y%2!==0}},includes:function(y){return function(b){return~b.indexOf(y)}},schema:function(y){return ws(y)},passesAnyOf:function(){for(var y=[],b=arguments.length;b--;)y[b]=arguments[b];return function(S){return y.some(function(E){return E.test(S)})}},optional:$i};function Xr(y){return function(b){return Array.isArray(b)&&y==="array"||b===null&&y==="null"||typeof b===y}}function Fs(y){return typeof y=="number"&&isFinite(y)&&Math.floor(y)===y}function ws(y){return{simple:function(b){var S=[];if(Object.keys(y).forEach(function(E){var I=y[E];try{I.check((b||{})[E])}catch(F){F.target=E,S.push(F)}}),S.length>0)throw S;return!0},async:function(b){var S=[],E=Object.keys(y).map(function(I){var F=y[I];return F.testAsync((b||{})[I]).catch(function(U){U.target=I,S.push(U)})});return Promise.all(E).then(function(){if(S.length>0)throw S;return!0})}}}var jn=la,_i="colors",Wn="sizes",ft="space",Yl={gap:ft,gridGap:ft,columnGap:ft,gridColumnGap:ft,rowGap:ft,gridRowGap:ft,inset:ft,insetBlock:ft,insetBlockEnd:ft,insetBlockStart:ft,insetInline:ft,insetInlineEnd:ft,insetInlineStart:ft,margin:ft,marginTop:ft,marginRight:ft,marginBottom:ft,marginLeft:ft,marginBlock:ft,marginBlockEnd:ft,marginBlockStart:ft,marginInline:ft,marginInlineEnd:ft,marginInlineStart:ft,padding:ft,paddingTop:ft,paddingRight:ft,paddingBottom:ft,paddingLeft:ft,paddingBlock:ft,paddingBlockEnd:ft,paddingBlockStart:ft,paddingInline:ft,paddingInlineEnd:ft,paddingInlineStart:ft,top:ft,right:ft,bottom:ft,left:ft,scrollMargin:ft,scrollMarginTop:ft,scrollMarginRight:ft,scrollMarginBottom:ft,scrollMarginLeft:ft,scrollMarginX:ft,scrollMarginY:ft,scrollMarginBlock:ft,scrollMarginBlockEnd:ft,scrollMarginBlockStart:ft,scrollMarginInline:ft,scrollMarginInlineEnd:ft,scrollMarginInlineStart:ft,scrollPadding:ft,scrollPaddingTop:ft,scrollPaddingRight:ft,scrollPaddingBottom:ft,scrollPaddingLeft:ft,scrollPaddingX:ft,scrollPaddingY:ft,scrollPaddingBlock:ft,scrollPaddingBlockEnd:ft,scrollPaddingBlockStart:ft,scrollPaddingInline:ft,scrollPaddingInlineEnd:ft,scrollPaddingInlineStart:ft,fontSize:"fontSizes",background:_i,backgroundColor:_i,backgroundImage:_i,borderImage:_i,border:_i,borderBlock:_i,borderBlockEnd:_i,borderBlockStart:_i,borderBottom:_i,borderBottomColor:_i,borderColor:_i,borderInline:_i,borderInlineEnd:_i,borderInlineStart:_i,borderLeft:_i,borderLeftColor:_i,borderRight:_i,borderRightColor:_i,borderTop:_i,borderTopColor:_i,caretColor:_i,color:_i,columnRuleColor:_i,fill:_i,outline:_i,outlineColor:_i,stroke:_i,textDecorationColor:_i,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Wn,minBlockSize:Wn,maxBlockSize:Wn,inlineSize:Wn,minInlineSize:Wn,maxInlineSize:Wn,width:Wn,minWidth:Wn,maxWidth:Wn,height:Wn,minHeight:Wn,maxHeight:Wn,flexBasis:Wn,gridTemplateColumns:Wn,gridTemplateRows:Wn,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},Ih=(y,b)=>typeof b=="function"?{"()":Function.prototype.toString.call(b)}:b,xs=()=>{const y=Object.create(null);return(b,S,...E)=>{const I=(F=>JSON.stringify(F,Ih))(b);return I in y?y[I]:y[I]=S(b,...E)}},wa=Symbol.for("sxs.internal"),Xl=(y,b)=>Object.defineProperties(y,Object.getOwnPropertyDescriptors(b)),xa=y=>{for(const b in y)return!0;return!1},{hasOwnProperty:go}=Object.prototype,el=y=>y.includes("-")?y:y.replace(/[A-Z]/g,b=>"-"+b.toLowerCase()),Kr=/\s+(?![^()]*\))/,_a=y=>b=>y(...typeof b=="string"?String(b).split(Kr):[b]),ka={appearance:y=>({WebkitAppearance:y,appearance:y}),backfaceVisibility:y=>({WebkitBackfaceVisibility:y,backfaceVisibility:y}),backdropFilter:y=>({WebkitBackdropFilter:y,backdropFilter:y}),backgroundClip:y=>({WebkitBackgroundClip:y,backgroundClip:y}),boxDecorationBreak:y=>({WebkitBoxDecorationBreak:y,boxDecorationBreak:y}),clipPath:y=>({WebkitClipPath:y,clipPath:y}),content:y=>({content:y.includes('"')||y.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(y)?y:`"${y}"`}),hyphens:y=>({WebkitHyphens:y,hyphens:y}),maskImage:y=>({WebkitMaskImage:y,maskImage:y}),maskSize:y=>({WebkitMaskSize:y,maskSize:y}),tabSize:y=>({MozTabSize:y,tabSize:y}),textSizeAdjust:y=>({WebkitTextSizeAdjust:y,textSizeAdjust:y}),userSelect:y=>({WebkitUserSelect:y,userSelect:y}),marginBlock:_a((y,b)=>({marginBlockStart:y,marginBlockEnd:b||y})),marginInline:_a((y,b)=>({marginInlineStart:y,marginInlineEnd:b||y})),maxSize:_a((y,b)=>({maxBlockSize:y,maxInlineSize:b||y})),minSize:_a((y,b)=>({minBlockSize:y,minInlineSize:b||y})),paddingBlock:_a((y,b)=>({paddingBlockStart:y,paddingBlockEnd:b||y})),paddingInline:_a((y,b)=>({paddingInlineStart:y,paddingInlineEnd:b||y}))},Rh=/([\d.]+)([^]*)/,E2=(y,b)=>y.length?y.reduce((S,E)=>(S.push(...b.map(I=>I.includes("&")?I.replace(/&/g,/[ +>|~]/.test(E)&&/&.*&/.test(I)?`:is(${E})`:E):E+" "+I)),S),[]):b,M2=(y,b)=>y in T2&&typeof b=="string"?b.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(S,E,I,F)=>E+(I==="stretch"?`-moz-available${F};${el(y)}:${E}-webkit-fill-available`:`-moz-fit-content${F};${el(y)}:${E}fit-content`)+F):String(b),T2={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},vo=y=>y?y+"-":"",xm=(y,b,S)=>y.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(E,I,F,U,G)=>U=="$"==!!F?E:(I||U=="--"?"calc(":"")+"var(--"+(U==="$"?vo(b)+(G.includes("$")?"":vo(S))+G.replace(/\$/g,"-"):G)+")"+(I||U=="--"?"*"+(I||"")+(F||"1")+")":"")),Q0=/\s*,\s*(?![^()]*\))/,J0=Object.prototype.toString,Kl=(y,b,S,E,I)=>{let F,U,G;const W=(K,ie,ue)=>{let me,_e;const ke=fe=>{for(me in fe){const Oe=me.charCodeAt(0)===64,tt=Oe&&Array.isArray(fe[me])?fe[me]:[fe[me]];for(_e of tt){const Mt=/[A-Z]/.test(Me=me)?Me:Me.replace(/-[^]/g,gt=>gt[1].toUpperCase()),li=typeof _e=="object"&&_e&&_e.toString===J0&&(!E.utils[Mt]||!ie.length);if(Mt in E.utils&&!li){const gt=E.utils[Mt];if(gt!==U){U=gt,ke(gt(_e)),U=null;continue}}else if(Mt in ka){const gt=ka[Mt];if(gt!==G){G=gt,ke(gt(_e)),G=null;continue}}if(Oe&&(q=me.slice(1)in E.media?"@media "+E.media[me.slice(1)]:me,me=q.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(gt,jt,mi,di,Ot,$t)=>{const vt=Rh.test(jt),xi=.0625*(vt?-1:1),[Bi,Pi]=vt?[di,jt]:[jt,di];return"("+(mi[0]==="="?"":mi[0]===">"===vt?"max-":"min-")+Bi+":"+(mi[0]!=="="&&mi.length===1?Pi.replace(Rh,(mn,_t,Yn)=>Number(_t)+xi*(mi===">"?1:-1)+Yn):Pi)+(Ot?") and ("+(Ot[0]===">"?"min-":"max-")+Bi+":"+(Ot.length===1?$t.replace(Rh,(mn,_t,Yn)=>Number(_t)+xi*(Ot===">"?-1:1)+Yn):$t):"")+")"})),li){const gt=Oe?ue.concat(me):[...ue],jt=Oe?[...ie]:E2(ie,me.split(Q0));F!==void 0&&I(e1(...F)),F=void 0,W(_e,jt,gt)}else F===void 0&&(F=[[],ie,ue]),me=Oe||me.charCodeAt(0)!==36?me:`--${vo(E.prefix)}${me.slice(1).replace(/\$/g,"-")}`,_e=li?_e:typeof _e=="number"?_e&&Mt in D2?String(_e)+"px":String(_e):xm(M2(Mt,_e==null?"":_e),E.prefix,E.themeMap[Mt]),F[0].push(`${Oe?`${me} `:`${el(me)}:`}${_e}`)}}var q,Me};ke(K),F!==void 0&&I(e1(...F)),F=void 0};W(y,b,S)},e1=(y,b,S)=>`${S.map(E=>`${E}{`).join("")}${b.length?`${b.join(",")}{`:""}${y.join(";")}${b.length?"}":""}${Array(S.length?S.length+1:0).join("}")}`,D2={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},t1=y=>String.fromCharCode(y+(y>25?39:97)),tl=y=>(b=>{let S,E="";for(S=Math.abs(b);S>52;S=S/52|0)E=t1(S%52)+E;return t1(S%52)+E})(((b,S)=>{let E=S.length;for(;E;)b=33*b^S.charCodeAt(--E);return b})(5381,JSON.stringify(y))>>>0),Zd=["themed","global","styled","onevar","resonevar","allvar","inline"],i1=y=>{if(y.href&&!y.href.startsWith(location.origin))return!1;try{return!!y.cssRules}catch(b){return!1}},n1=y=>{let b;const S=()=>{const{cssRules:I}=b.sheet;return[].map.call(I,(F,U)=>{const{cssText:G}=F;let W="";if(G.startsWith("--sxs"))return"";if(I[U-1]&&(W=I[U-1].cssText).startsWith("--sxs")){if(!F.cssRules.length)return"";for(const K in b.rules)if(b.rules[K].group===F)return`--sxs{--sxs:${[...b.rules[K].cache].join(" ")}}${G}`;return F.cssRules.length?`${W}${G}`:""}return G}).join("")},E=()=>{if(b){const{rules:G,sheet:W}=b;if(!W.deleteRule){for(;Object(Object(W.cssRules)[0]).type===3;)W.cssRules.splice(0,1);W.cssRules=[]}for(const K in G)delete G[K]}const I=Object(y).styleSheets||[];for(const G of I)if(i1(G)){for(let W=0,K=G.cssRules;K[W];++W){const ie=Object(K[W]);if(ie.type!==1)continue;const ue=Object(K[W+1]);if(ue.type!==4)continue;++W;const{cssText:me}=ie;if(!me.startsWith("--sxs"))continue;const _e=me.slice(14,-3).trim().split(/\s+/),ke=Zd[_e[0]];ke&&(b||(b={sheet:G,reset:E,rules:{},toString:S}),b.rules[ke]={group:ue,index:W,cache:new Set(_e)})}if(b)break}if(!b){const G=(W,K)=>({type:K,cssRules:[],insertRule(ie,ue){this.cssRules.splice(ue,0,G(ie,{import:3,undefined:1}[(ie.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return W==="@media{}"?`@media{${[].map.call(this.cssRules,ie=>ie.cssText).join("")}}`:W}});b={sheet:y?(y.head||y).appendChild(document.createElement("style")).sheet:G("","text/css"),rules:{},reset:E,toString:S}}const{sheet:F,rules:U}=b;for(let G=Zd.length-1;G>=0;--G){const W=Zd[G];if(!U[W]){const K=Zd[G+1],ie=U[K]?U[K].index:F.cssRules.length;F.insertRule("@media{}",ie),F.insertRule(`--sxs{--sxs:${G}}`,ie),U[W]={group:F.cssRules[ie+1],index:ie,cache:new Set([G])}}r1(U[W])}};return E(),b},r1=y=>{const b=y.group;let S=b.cssRules.length;y.apply=E=>{try{b.insertRule(E,S),++S}catch(I){}}},Yd=Symbol(),P2=xs(),a1=(y,b)=>P2(y,()=>(...S)=>{let E={type:null,composers:new Set};for(const I of S)if(I!=null)if(I[wa]){E.type==null&&(E.type=I[wa].type);for(const F of I[wa].composers)E.composers.add(F)}else I.constructor!==Object||I.$$typeof?E.type==null&&(E.type=I):E.composers.add(O2(I,y));return E.type==null&&(E.type="span"),E.composers.size||E.composers.add(["PJLV",{},[],[],{},[]]),Ql(y,E,b)}),O2=(F,I)=>{var U=F,{variants:y,compoundVariants:b,defaultVariants:S}=U,E=Cn(U,["variants","compoundVariants","defaultVariants"]);const G=`${vo(I.prefix)}c-${tl(E)}`,W=[],K=[],ie=Object.create(null),ue=[];for(const fe in S)ie[fe]=String(S[fe]);if(typeof y=="object"&&y)for(const fe in y){me=ie,_e=fe,go.call(me,_e)||(ie[fe]="undefined");const q=y[fe];for(const Me in q){const Oe={[fe]:String(Me)};String(Me)==="undefined"&&ue.push(fe);const tt=q[Me],Mt=[Oe,tt,!xa(tt)];W.push(Mt)}}var me,_e;if(typeof b=="object"&&b)for(const fe of b){let ke=fe,{css:q}=ke,Me=Cn(ke,["css"]);q=typeof q=="object"&&q||{};for(const tt in Me)Me[tt]=String(Me[tt]);const Oe=[Me,q,!xa(q)];K.push(Oe)}return[G,E,W,K,ie,ue]},Ql=(y,b,S)=>{const[E,I,F,U]=s1(b.composers),G=typeof b.type=="function"||b.type.$$typeof?(ue=>{function me(){for(let _e=0;_e<me[Yd].length;_e++){const[ke,fe]=me[Yd][_e];ue.rules[ke].apply(fe)}return me[Yd]=[],null}return me[Yd]=[],me.rules={},Zd.forEach(_e=>me.rules[_e]={apply:ke=>me[Yd].push([_e,ke])}),me})(S):null,W=(G||S).rules,K=`.${E}${I.length>1?`:where(.${I.slice(1).join(".")})`:""}`,ie=ue=>{ue=typeof ue=="object"&&ue||o1;const Me=ue,{css:me}=Me,_e=Cn(Me,["css"]),ke={};for(const Oe in F)if(delete _e[Oe],Oe in ue){let tt=ue[Oe];typeof tt=="object"&&tt?ke[Oe]=Z({"@initial":F[Oe]},tt):(tt=String(tt),ke[Oe]=tt!=="undefined"||U.has(Oe)?tt:F[Oe])}else ke[Oe]=F[Oe];const fe=new Set([...I]);for(const[Oe,tt,Mt,li]of b.composers){S.rules.styled.cache.has(Oe)||(S.rules.styled.cache.add(Oe),Kl(tt,[`.${Oe}`],[],y,mi=>{W.styled.apply(mi)}));const gt=_m(Mt,ke,y.media),jt=_m(li,ke,y.media,!0);for(const mi of gt)if(mi!==void 0)for(const[di,Ot,$t]of mi){const vt=`${Oe}-${tl(Ot)}-${di}`;fe.add(vt);const xi=($t?S.rules.resonevar:S.rules.onevar).cache,Bi=$t?W.resonevar:W.onevar;xi.has(vt)||(xi.add(vt),Kl(Ot,[`.${vt}`],[],y,Pi=>{Bi.apply(Pi)}))}for(const mi of jt)if(mi!==void 0)for(const[di,Ot]of mi){const $t=`${Oe}-${tl(Ot)}-${di}`;fe.add($t),S.rules.allvar.cache.has($t)||(S.rules.allvar.cache.add($t),Kl(Ot,[`.${$t}`],[],y,vt=>{W.allvar.apply(vt)}))}}if(typeof me=="object"&&me){const Oe=`${E}-i${tl(me)}-css`;fe.add(Oe),S.rules.inline.cache.has(Oe)||(S.rules.inline.cache.add(Oe),Kl(me,[`.${Oe}`],[],y,tt=>{W.inline.apply(tt)}))}for(const Oe of String(ue.className||"").trim().split(/\s+/))Oe&&fe.add(Oe);const q=_e.className=[...fe].join(" ");return{type:b.type,className:q,selector:K,props:_e,toString:()=>q,deferredInjector:G}};return Xl(ie,{className:E,selector:K,[wa]:b,toString:()=>(S.rules.styled.cache.has(E)||ie(),E)})},s1=y=>{let b="";const S=[],E={},I=[];for(const[F,,,,U,G]of y){b===""&&(b=F),S.push(F),I.push(...G);for(const W in U){const K=U[W];(E[W]===void 0||K!=="undefined"||G.includes(K))&&(E[W]=K)}}return[b,S,E,new Set(I)]},_m=(y,b,S,E)=>{const I=[];e:for(let[F,U,G]of y){if(G)continue;let W,K=0,ie=!1;for(W in F){const ue=F[W];let me=b[W];if(me!==ue){if(typeof me!="object"||!me)continue e;{let _e,ke,fe=0;for(const q in me){if(ue===String(me[q])){if(q!=="@initial"){const Me=q.slice(1);(ke=ke||[]).push(Me in S?S[Me]:q.replace(/^@media ?/,"")),ie=!0}K+=fe,_e=!0}++fe}if(ke&&ke.length&&(U={["@media "+ke.join(", ")]:U}),!_e)continue e}}}(I[K]=I[K]||[]).push([E?"cv":`${W}-${F[W]}`,U,ie])}return I},o1={},I2=xs(),R2=(y,b)=>I2(y,()=>(...S)=>{const E=()=>{for(let I of S){I=typeof I=="object"&&I||{};let F=tl(I);if(!b.rules.global.cache.has(F)){if(b.rules.global.cache.add(F),"@import"in I){let U=[].indexOf.call(b.sheet.cssRules,b.rules.themed.group)-1;for(let G of[].concat(I["@import"]))G=G.includes('"')||G.includes("'")?G:`"${G}"`,b.sheet.insertRule(`@import ${G};`,U++);delete I["@import"]}Kl(I,[],[],y,U=>{b.rules.global.apply(U)})}}return""};return Xl(E,{toString:E})}),z2=xs(),Xd=(y,b)=>z2(y,()=>S=>{const E=`${vo(y.prefix)}k-${tl(S)}`,I=()=>{if(!b.rules.global.cache.has(E)){b.rules.global.cache.add(E);const F=[];Kl(S,[],[],y,G=>F.push(G));const U=`@keyframes ${E}{${F.join("")}}`;b.rules.global.apply(U)}return E};return Xl(I,{get name(){return I()},toString:I})}),L2=class{constructor(y,b,S,E){this.token=y==null?"":String(y),this.value=b==null?"":String(b),this.scale=S==null?"":String(S),this.prefix=E==null?"":String(E)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+vo(this.prefix)+vo(this.scale)+this.token}toString(){return this.computedValue}},B2=xs(),km=(y,b)=>B2(y,()=>(S,E)=>{E=typeof S=="object"&&S||Object(E);const I=`.${S=(S=typeof S=="string"?S:"")||`${vo(y.prefix)}t-${tl(E)}`}`,F={},U=[];for(const W in E){F[W]={};for(const K in E[W]){const ie=`--${vo(y.prefix)}${W}-${K}`,ue=xm(String(E[W][K]),y.prefix,W);F[W][K]=new L2(K,ue,W,y.prefix),U.push(`${ie}:${ue}`)}}const G=()=>{if(U.length&&!b.rules.themed.cache.has(S)){b.rules.themed.cache.add(S);const W=`${E===y.theme?":root,":""}.${S}{${U.join(";")}}`;b.rules.themed.apply(W)}return S};return ge(Z({},F),{get className(){return G()},selector:I,toString:G})}),l1=xs(),d1,c1=xs(),Sm=y=>{const b=(S=>{let E=!1;const I=l1(S,F=>{E=!0;const U="prefix"in(F=typeof F=="object"&&F||{})?String(F.prefix):"",G=typeof F.media=="object"&&F.media||{},W=typeof F.root=="object"?F.root||null:globalThis.document||null,K=typeof F.theme=="object"&&F.theme||{},ie={prefix:U,media:G,theme:K,themeMap:typeof F.themeMap=="object"&&F.themeMap||Z({},Yl),utils:typeof F.utils=="object"&&F.utils||{}},ue=n1(W),me={css:a1(ie,ue),globalCss:R2(ie,ue),keyframes:Xd(ie,ue),createTheme:km(ie,ue),reset(){ue.reset(),me.theme.toString()},theme:{},sheet:ue,config:ie,prefix:U,getCssText:ue.toString,toString:ue.toString};return String(me.theme=me.createTheme(K)),me});return E||I.reset(),I})(y);return b.styled=(({config:S,sheet:E})=>c1(S,()=>{const I=a1(S,E);return(...F)=>{const U=I(...F),G=U[wa].type,W=R.forwardRef((K,ie)=>{const ue=K&&K.as||G,{props:me,deferredInjector:_e}=U(K);return delete me.as,me.ref=ie,_e?R.createElement(R.Fragment,null,R.createElement(ue,me),R.createElement(_e,null)):R.createElement(ue,me)});return W.className=U.className,W.displayName=`Styled.${G.displayName||G.name||G}`,W.selector=U.selector,W.toString=()=>U.selector,W[wa]=U[wa],W}}))(b),b},Kd=()=>d1||(d1=Sm()),jT=(...y)=>Kd().createTheme(...y),UT=(...y)=>Kd().globalCss(...y),VT=(...y)=>Kd().keyframes(...y),F2=(...y)=>Kd().css(...y),HT=(...y)=>Kd().styled(...y);function cu(y,b,S){return Math.max(b,Math.min(y,S))}const kn={toVector(y,b){return y===void 0&&(y=b),Array.isArray(y)?y:[y,y]},add(y,b){return[y[0]+b[0],y[1]+b[1]]},sub(y,b){return[y[0]-b[0],y[1]-b[1]]},addTo(y,b){y[0]+=b[0],y[1]+=b[1]},subTo(y,b){y[0]-=b[0],y[1]-=b[1]}};function u1(y,b,S){return b===0||Math.abs(b)===1/0?Math.pow(y,S*5):y*b*S/(b+S*y)}function h1(y,b,S,E=.15){return E===0?cu(y,b,S):y<b?-u1(b-y,S-b,E)+b:y>S?+u1(y-S,S-b,E)+S:y}function N2(y,[b,S],[E,I]){const[[F,U],[G,W]]=y;return[h1(b,F,U,E),h1(S,G,W,I)]}function f1(y,b){if(typeof y!="object"||y===null)return y;var S=y[Symbol.toPrimitive];if(S!==void 0){var E=S.call(y,b||"default");if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(y)}function p1(y){var b=f1(y,"string");return typeof b=="symbol"?b:String(b)}function Un(y,b,S){return b=p1(b),b in y?Object.defineProperty(y,b,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[b]=S,y}function m1(y,b){var S=Object.keys(y);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(y);b&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(y,I).enumerable})),S.push.apply(S,E)}return S}function Pn(y){for(var b=1;b<arguments.length;b++){var S=arguments[b]!=null?arguments[b]:{};b%2?m1(Object(S),!0).forEach(function(E){Un(y,E,S[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(S)):m1(Object(S)).forEach(function(E){Object.defineProperty(y,E,Object.getOwnPropertyDescriptor(S,E))})}return y}const g1={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function uu(y){return y?y[0].toUpperCase()+y.slice(1):""}const v1=["enter","leave"];function y1(y=!1,b){return y&&!v1.includes(b)}function b1(y,b="",S=!1){const E=g1[y],I=E&&E[b]||b;return"on"+uu(y)+uu(I)+(y1(S,I)?"Capture":"")}const w1=["gotpointercapture","lostpointercapture"];function x1(y){let b=y.substring(2).toLowerCase();const S=!!~b.indexOf("passive");S&&(b=b.replace("passive",""));const E=w1.includes(b)?"capturecapture":"capture",I=!!~b.indexOf(E);return I&&(b=b.replace("capture","")),{device:b,capture:I,passive:S}}function j2(y,b=""){const S=g1[y],E=S&&S[b]||b;return y+E}function zh(y){return"touches"in y}function _1(y){return zh(y)?"touch":"pointerType"in y?y.pointerType:"mouse"}function U2(y){return Array.from(y.touches).filter(b=>{var S,E;return b.target===y.currentTarget||((S=y.currentTarget)===null||S===void 0||(E=S.contains)===null||E===void 0?void 0:E.call(S,b.target))})}function V2(y){return y.type==="touchend"||y.type==="touchcancel"?y.changedTouches:y.targetTouches}function k1(y){return zh(y)?V2(y)[0]:y}function Lh(y,b){try{const S=b.clientX-y.clientX,E=b.clientY-y.clientY,I=(b.clientX+y.clientX)/2,F=(b.clientY+y.clientY)/2,U=Math.hypot(S,E);return{angle:-(Math.atan2(S,E)*180)/Math.PI,distance:U,origin:[I,F]}}catch(S){}return null}function S1(y){return U2(y).map(b=>b.identifier)}function Am(y,b){const[S,E]=Array.from(y.touches).filter(I=>b.includes(I.identifier));return Lh(S,E)}function Bh(y){const b=k1(y);return zh(y)?b.identifier:b.pointerId}function Jl(y){const b=k1(y);return[b.clientX,b.clientY]}const Cm=40,Em=800;function Mm(y){let{deltaX:b,deltaY:S,deltaMode:E}=y;return E===1?(b*=Cm,S*=Cm):E===2&&(b*=Em,S*=Em),[b,S]}function A1(y){var b,S;const{scrollX:E,scrollY:I,scrollLeft:F,scrollTop:U}=y.currentTarget;return[(b=E!=null?E:F)!==null&&b!==void 0?b:0,(S=I!=null?I:U)!==null&&S!==void 0?S:0]}function C1(y){const b={};if("buttons"in y&&(b.buttons=y.buttons),"shiftKey"in y){const{shiftKey:S,altKey:E,metaKey:I,ctrlKey:F}=y;Object.assign(b,{shiftKey:S,altKey:E,metaKey:I,ctrlKey:F})}return b}function hu(y,...b){return typeof y=="function"?y(...b):y}function E1(){}function M1(...y){return y.length===0?E1:y.length===1?y[0]:function(){let b;for(const S of y)b=S.apply(this,arguments)||b;return b}}function Tm(y,b){return Object.assign({},b,y||{})}const T1=32;class Dm{constructor(b,S,E){this.ctrl=b,this.args=S,this.key=E,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(b){this.ctrl.state[this.key]=b}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:b,shared:S,ingKey:E,args:I}=this;S[E]=b._active=b.active=b._blocked=b._force=!1,b._step=[!1,!1],b.intentional=!1,b._movement=[0,0],b._distance=[0,0],b._direction=[0,0],b._delta=[0,0],b._bounds=[[-1/0,1/0],[-1/0,1/0]],b.args=I,b.axis=void 0,b.memo=void 0,b.elapsedTime=b.timeDelta=0,b.direction=[0,0],b.distance=[0,0],b.overflow=[0,0],b._movementBound=[!1,!1],b.velocity=[0,0],b.movement=[0,0],b.delta=[0,0],b.timeStamp=0}start(b){const S=this.state,E=this.config;S._active||(this.reset(),this.computeInitial(),S._active=!0,S.target=b.target,S.currentTarget=b.currentTarget,S.lastOffset=E.from?hu(E.from,S):S.offset,S.offset=S.lastOffset,S.startTime=S.timeStamp=b.timeStamp)}computeValues(b){const S=this.state;S._values=b,S.values=this.config.transform(b)}computeInitial(){const b=this.state;b._initial=b._values,b.initial=b.values}compute(b){const{state:S,config:E,shared:I}=this;S.args=this.args;let F=0;if(b&&(S.event=b,E.preventDefault&&b.cancelable&&S.event.preventDefault(),S.type=b.type,I.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,I.locked=!!document.pointerLockElement,Object.assign(I,C1(b)),I.down=I.pressed=I.buttons%2===1||I.touches>0,F=b.timeStamp-S.timeStamp,S.timeStamp=b.timeStamp,S.elapsedTime=S.timeStamp-S.startTime),S._active){const gt=S._delta.map(Math.abs);kn.addTo(S._distance,gt)}this.axisIntent&&this.axisIntent(b);const[U,G]=S._movement,[W,K]=E.threshold,{_step:ie,values:ue}=S;if(E.hasCustomTransform?(ie[0]===!1&&(ie[0]=Math.abs(U)>=W&&ue[0]),ie[1]===!1&&(ie[1]=Math.abs(G)>=K&&ue[1])):(ie[0]===!1&&(ie[0]=Math.abs(U)>=W&&Math.sign(U)*W),ie[1]===!1&&(ie[1]=Math.abs(G)>=K&&Math.sign(G)*K)),S.intentional=ie[0]!==!1||ie[1]!==!1,!S.intentional)return;const me=[0,0];if(E.hasCustomTransform){const[gt,jt]=ue;me[0]=ie[0]!==!1?gt-ie[0]:0,me[1]=ie[1]!==!1?jt-ie[1]:0}else me[0]=ie[0]!==!1?U-ie[0]:0,me[1]=ie[1]!==!1?G-ie[1]:0;this.restrictToAxis&&!S._blocked&&this.restrictToAxis(me);const _e=S.offset,ke=S._active&&!S._blocked||S.active;ke&&(S.first=S._active&&!S.active,S.last=!S._active&&S.active,S.active=I[this.ingKey]=S._active,b&&(S.first&&("bounds"in E&&(S._bounds=hu(E.bounds,S)),this.setup&&this.setup()),S.movement=me,this.computeOffset()));const[fe,q]=S.offset,[[Me,Oe],[tt,Mt]]=S._bounds;S.overflow=[fe<Me?-1:fe>Oe?1:0,q<tt?-1:q>Mt?1:0],S._movementBound[0]=S.overflow[0]?S._movementBound[0]===!1?S._movement[0]:S._movementBound[0]:!1,S._movementBound[1]=S.overflow[1]?S._movementBound[1]===!1?S._movement[1]:S._movementBound[1]:!1;const li=S._active?E.rubberband||[0,0]:[0,0];if(S.offset=N2(S._bounds,S.offset,li),S.delta=kn.sub(S.offset,_e),this.computeMovement(),ke&&(!S.last||F>T1)){S.delta=kn.sub(S.offset,_e);const gt=S.delta.map(Math.abs);kn.addTo(S.distance,gt),S.direction=S.delta.map(Math.sign),S._direction=S._delta.map(Math.sign),!S.first&&F>0&&(S.velocity=[gt[0]/F,gt[1]/F],S.timeDelta=F)}}emit(){const b=this.state,S=this.shared,E=this.config;if(b._active||this.clean(),(b._blocked||!b.intentional)&&!b._force&&!E.triggerAllEvents)return;const I=this.handler(Pn(Pn(Pn({},S),b),{},{[this.aliasKey]:b.values}));I!==void 0&&(b.memo=I)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function D1([y,b],S){const E=Math.abs(y),I=Math.abs(b);if(E>I&&E>S)return"x";if(I>E&&I>S)return"y"}class Qd extends Dm{constructor(...b){super(...b),Un(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=kn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=kn.sub(this.state.offset,this.state.lastOffset)}axisIntent(b){const S=this.state,E=this.config;if(!S.axis&&b){const I=typeof E.axisThreshold=="object"?E.axisThreshold[_1(b)]:E.axisThreshold;S.axis=D1(S._movement,I)}S._blocked=(E.lockDirection||!!E.axis)&&!S.axis||!!E.axis&&E.axis!==S.axis}restrictToAxis(b){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":b[1]=0;break;case"y":b[0]=0;break}}}const ed=y=>y,P1=.15,O1={enabled(y=!0){return y},eventOptions(y,b,S){return Pn(Pn({},S.shared.eventOptions),y)},preventDefault(y=!1){return y},triggerAllEvents(y=!1){return y},rubberband(y=0){switch(y){case!0:return[P1,P1];case!1:return[0,0];default:return kn.toVector(y)}},from(y){if(typeof y=="function")return y;if(y!=null)return kn.toVector(y)},transform(y,b,S){const E=y||S.shared.transform;return this.hasCustomTransform=!!E,E||ed},threshold(y){return kn.toVector(y,0)}},H2=0,td=Pn(Pn({},O1),{},{axis(y,b,{axis:S}){if(this.lockDirection=S==="lock",!this.lockDirection)return S},axisThreshold(y=H2){return y},bounds(y={}){if(typeof y=="function")return F=>td.bounds(y(F));if("current"in y)return()=>y.current;if(typeof HTMLElement=="function"&&y instanceof HTMLElement)return y;const{left:b=-1/0,right:S=1/0,top:E=-1/0,bottom:I=1/0}=y;return[[b,S],[E,I]]}}),I1={ArrowRight:(y,b=1)=>[y*b,0],ArrowLeft:(y,b=1)=>[-1*y*b,0],ArrowUp:(y,b=1)=>[0,-1*y*b],ArrowDown:(y,b=1)=>[0,y*b]};class G2 extends Qd{constructor(...b){super(...b),Un(this,"ingKey","dragging")}reset(){super.reset();const b=this.state;b._pointerId=void 0,b._pointerActive=!1,b._keyboardActive=!1,b._preventScroll=!1,b._delayed=!1,b.swipe=[0,0],b.tap=!1,b.canceled=!1,b.cancel=this.cancel.bind(this)}setup(){const b=this.state;if(b._bounds instanceof HTMLElement){const S=b._bounds.getBoundingClientRect(),E=b.currentTarget.getBoundingClientRect(),I={left:S.left-E.left+b.offset[0],right:S.right-E.right+b.offset[0],top:S.top-E.top+b.offset[1],bottom:S.bottom-E.bottom+b.offset[1]};b._bounds=td.bounds(I)}}cancel(){const b=this.state;b.canceled||(b.canceled=!0,b._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(b){const S=this.config,E=this.state;if(b.buttons!=null&&(Array.isArray(S.pointerButtons)?!S.pointerButtons.includes(b.buttons):S.pointerButtons!==-1&&S.pointerButtons!==b.buttons))return;const I=this.ctrl.setEventIds(b);S.pointerCapture&&b.target.setPointerCapture(b.pointerId),!(I&&I.size>1&&E._pointerActive)&&(this.start(b),this.setupPointer(b),E._pointerId=Bh(b),E._pointerActive=!0,this.computeValues(Jl(b)),this.computeInitial(),S.preventScrollAxis&&_1(b)!=="mouse"?(E._active=!1,this.setupScrollPrevention(b)):S.delay>0?(this.setupDelayTrigger(b),S.triggerAllEvents&&(this.compute(b),this.emit())):this.startPointerDrag(b))}startPointerDrag(b){const S=this.state;S._active=!0,S._preventScroll=!0,S._delayed=!1,this.compute(b),this.emit()}pointerMove(b){const S=this.state,E=this.config;if(!S._pointerActive)return;const I=Bh(b);if(S._pointerId!==void 0&&I!==S._pointerId)return;const F=Jl(b);if(document.pointerLockElement===b.target?S._delta=[b.movementX,b.movementY]:(S._delta=kn.sub(F,S._values),this.computeValues(F)),kn.addTo(S._movement,S._delta),this.compute(b),S._delayed&&S.intentional){this.timeoutStore.remove("dragDelay"),S.active=!1,this.startPointerDrag(b);return}if(E.preventScrollAxis&&!S._preventScroll)if(S.axis)if(S.axis===E.preventScrollAxis||E.preventScrollAxis==="xy"){S._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(b);return}else return;this.emit()}pointerUp(b){this.ctrl.setEventIds(b);try{this.config.pointerCapture&&b.target.hasPointerCapture(b.pointerId)&&b.target.releasePointerCapture(b.pointerId)}catch(G){}const S=this.state,E=this.config;if(!S._active||!S._pointerActive)return;const I=Bh(b);if(S._pointerId!==void 0&&I!==S._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(b);const[F,U]=S._distance;if(S.tap=F<=E.tapsThreshold&&U<=E.tapsThreshold,S.tap&&E.filterTaps)S._force=!0;else{const[G,W]=S._delta,[K,ie]=S._movement,[ue,me]=E.swipe.velocity,[_e,ke]=E.swipe.distance,fe=E.swipe.duration;if(S.elapsedTime<fe){const q=Math.abs(G/S.timeDelta),Me=Math.abs(W/S.timeDelta);q>ue&&Math.abs(K)>_e&&(S.swipe[0]=Math.sign(G)),Me>me&&Math.abs(ie)>ke&&(S.swipe[1]=Math.sign(W))}}this.emit()}pointerClick(b){!this.state.tap&&b.detail>0&&(b.preventDefault(),b.stopPropagation())}setupPointer(b){const S=this.config,E=S.device;S.pointerLock&&b.currentTarget.requestPointerLock(),S.pointerCapture||(this.eventStore.add(this.sharedConfig.window,E,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,E,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,E,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(b){this.state._preventScroll&&b.cancelable&&b.preventDefault()}setupScrollPrevention(b){this.state._preventScroll=!1,W2(b);const S=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",S),this.eventStore.add(this.sharedConfig.window,"touch","cancel",S),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,b)}setupDelayTrigger(b){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(b)},this.config.delay)}keyDown(b){const S=I1[b.key];if(S){const E=this.state,I=b.shiftKey?10:b.altKey?.1:1;this.start(b),E._delta=S(this.config.keyboardDisplacement,I),E._keyboardActive=!0,kn.addTo(E._movement,E._delta),this.compute(b),this.emit()}}keyUp(b){b.key in I1&&(this.state._keyboardActive=!1,this.setActive(),this.compute(b),this.emit())}bind(b){const S=this.config.device;b(S,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(b(S,"change",this.pointerMove.bind(this)),b(S,"end",this.pointerUp.bind(this)),b(S,"cancel",this.pointerUp.bind(this)),b("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(b("key","down",this.keyDown.bind(this)),b("key","up",this.keyUp.bind(this))),this.config.filterTaps&&b("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function W2(y){"persist"in y&&typeof y.persist=="function"&&y.persist()}const fu=typeof window!="undefined"&&window.document&&window.document.createElement;function R1(){return fu&&"ontouchstart"in window}function q2(){return R1()||fu&&window.navigator.maxTouchPoints>1}function Ns(){return fu&&"onpointerdown"in window}function Pm(){return fu&&"exitPointerLock"in window.document}function z1(){try{return"constructor"in GestureEvent}catch(y){return!1}}const Sa={isBrowser:fu,gesture:z1(),touch:R1(),touchscreen:q2(),pointer:Ns(),pointerLock:Pm()},$2=250,Z2=180,L1=.5,Y2=50,B1=250,X2=10,F1={mouse:0,touch:0,pen:8},K2=Pn(Pn({},td),{},{device(y,b,{pointer:{touch:S=!1,lock:E=!1,mouse:I=!1}={}}){return this.pointerLock=E&&Sa.pointerLock,Sa.touch&&S?"touch":this.pointerLock?"mouse":Sa.pointer&&!I?"pointer":Sa.touch?"touch":"mouse"},preventScrollAxis(y,b,{preventScroll:S}){if(this.preventScrollDelay=typeof S=="number"?S:S||S===void 0&&y?$2:void 0,!(!Sa.touchscreen||S===!1))return y||(S!==void 0?"y":void 0)},pointerCapture(y,b,{pointer:{capture:S=!0,buttons:E=1,keys:I=!0}={}}){return this.pointerButtons=E,this.keys=I,!this.pointerLock&&this.device==="pointer"&&S},threshold(y,b,{filterTaps:S=!1,tapsThreshold:E=3,axis:I=void 0}){const F=kn.toVector(y,S?E:I?1:0);return this.filterTaps=S,this.tapsThreshold=E,F},swipe({velocity:y=L1,distance:b=Y2,duration:S=B1}={}){return{velocity:this.transform(kn.toVector(y)),distance:this.transform(kn.toVector(b)),duration:S}},delay(y=0){switch(y){case!0:return Z2;case!1:return 0;default:return y}},axisThreshold(y){return y?Pn(Pn({},F1),y):F1},keyboardDisplacement(y=X2){return y}});function N1(y){const[b,S]=y.overflow,[E,I]=y._delta,[F,U]=y._direction;(b<0&&E>0&&F<0||b>0&&E<0&&F>0)&&(y._movement[0]=y._movementBound[0]),(S<0&&I>0&&U<0||S>0&&I<0&&U>0)&&(y._movement[1]=y._movementBound[1])}const Q2=30,j1=100;class J2 extends Dm{constructor(...b){super(...b),Un(this,"ingKey","pinching"),Un(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const b=this.state;b._touchIds=[],b.canceled=!1,b.cancel=this.cancel.bind(this),b.turns=0}computeOffset(){const{type:b,movement:S,lastOffset:E}=this.state;b==="wheel"?this.state.offset=kn.add(S,E):this.state.offset=[(1+S[0])*E[0],S[1]+E[1]]}computeMovement(){const{offset:b,lastOffset:S}=this.state;this.state.movement=[b[0]/S[0],b[1]-S[1]]}axisIntent(){const b=this.state,[S,E]=b._movement;if(!b.axis){const I=Math.abs(S)*Q2-Math.abs(E);I<0?b.axis="angle":I>0&&(b.axis="scale")}}restrictToAxis(b){this.config.lockDirection&&(this.state.axis==="scale"?b[1]=0:this.state.axis==="angle"&&(b[0]=0))}cancel(){const b=this.state;b.canceled||setTimeout(()=>{b.canceled=!0,b._active=!1,this.compute(),this.emit()},0)}touchStart(b){this.ctrl.setEventIds(b);const S=this.state,E=this.ctrl.touchIds;if(S._active&&S._touchIds.every(F=>E.has(F))||E.size<2)return;this.start(b),S._touchIds=Array.from(E).slice(0,2);const I=Am(b,S._touchIds);I&&this.pinchStart(b,I)}pointerStart(b){if(b.buttons!=null&&b.buttons%2!==1)return;this.ctrl.setEventIds(b),b.target.setPointerCapture(b.pointerId);const S=this.state,E=S._pointerEvents,I=this.ctrl.pointerIds;if(S._active&&Array.from(E.keys()).every(U=>I.has(U))||(E.size<2&&E.set(b.pointerId,b),S._pointerEvents.size<2))return;this.start(b);const F=Lh(...Array.from(E.values()));F&&this.pinchStart(b,F)}pinchStart(b,S){const E=this.state;E.origin=S.origin,this.computeValues([S.distance,S.angle]),this.computeInitial(),this.compute(b),this.emit()}touchMove(b){if(!this.state._active)return;const S=Am(b,this.state._touchIds);S&&this.pinchMove(b,S)}pointerMove(b){const S=this.state._pointerEvents;if(S.has(b.pointerId)&&S.set(b.pointerId,b),!this.state._active)return;const E=Lh(...Array.from(S.values()));E&&this.pinchMove(b,E)}pinchMove(b,S){const E=this.state,I=E._values[1],F=S.angle-I;let U=0;Math.abs(F)>270&&(U+=Math.sign(F)),this.computeValues([S.distance,S.angle-360*U]),E.origin=S.origin,E.turns=U,E._movement=[E._values[0]/E._initial[0]-1,E._values[1]-E._initial[1]],this.compute(b),this.emit()}touchEnd(b){this.ctrl.setEventIds(b),this.state._active&&this.state._touchIds.some(S=>!this.ctrl.touchIds.has(S))&&(this.state._active=!1,this.compute(b),this.emit())}pointerEnd(b){const S=this.state;this.ctrl.setEventIds(b);try{b.target.releasePointerCapture(b.pointerId)}catch(E){}S._pointerEvents.has(b.pointerId)&&S._pointerEvents.delete(b.pointerId),S._active&&S._pointerEvents.size<2&&(S._active=!1,this.compute(b),this.emit())}gestureStart(b){b.cancelable&&b.preventDefault();const S=this.state;S._active||(this.start(b),this.computeValues([b.scale,b.rotation]),S.origin=[b.clientX,b.clientY],this.compute(b),this.emit())}gestureMove(b){if(b.cancelable&&b.preventDefault(),!this.state._active)return;const S=this.state;this.computeValues([b.scale,b.rotation]),S.origin=[b.clientX,b.clientY];const E=S._movement;S._movement=[b.scale-1,b.rotation],S._delta=kn.sub(S._movement,E),this.compute(b),this.emit()}gestureEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}wheel(b){const S=this.config.modifierKey;S&&(Array.isArray(S)?!S.find(E=>b[E]):!b[S])||(this.state._active?this.wheelChange(b):this.wheelStart(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(b){this.start(b),this.wheelChange(b)}wheelChange(b){"uv"in b||b.cancelable&&b.preventDefault();const E=this.state;E._delta=[-Mm(b)[1]/j1*E.offset[0],0],kn.addTo(E._movement,E._delta),N1(E),this.state.origin=[b.clientX,b.clientY],this.compute(b),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){const S=this.config.device;S&&(b(S,"start",this[S+"Start"].bind(this)),b(S,"change",this[S+"Move"].bind(this)),b(S,"end",this[S+"End"].bind(this)),b(S,"cancel",this[S+"End"].bind(this)),b("lostPointerCapture","",this[S+"End"].bind(this))),this.config.pinchOnWheel&&b("wheel","",this.wheel.bind(this),{passive:!1})}}const e3=Pn(Pn({},O1),{},{device(y,b,{shared:S,pointer:{touch:E=!1}={}}){if(S.target&&!Sa.touch&&Sa.gesture)return"gesture";if(Sa.touch&&E)return"touch";if(Sa.touchscreen){if(Sa.pointer)return"pointer";if(Sa.touch)return"touch"}},bounds(y,b,{scaleBounds:S={},angleBounds:E={}}){const I=U=>{const G=Tm(hu(S,U),{min:-1/0,max:1/0});return[G.min,G.max]},F=U=>{const G=Tm(hu(E,U),{min:-1/0,max:1/0});return[G.min,G.max]};return typeof S!="function"&&typeof E!="function"?[I(),F()]:U=>[I(U),F(U)]},threshold(y,b,S){return this.lockDirection=S.axis==="lock",kn.toVector(y,this.lockDirection?[.1,3]:0)},modifierKey(y){return y===void 0?"ctrlKey":y},pinchOnWheel(y=!0){return y}});class t3 extends Qd{constructor(...b){super(...b),Un(this,"ingKey","moving")}move(b){this.config.mouseOnly&&b.pointerType!=="mouse"||(this.state._active?this.moveChange(b):this.moveStart(b),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(b){this.start(b),this.computeValues(Jl(b)),this.compute(b),this.computeInitial(),this.emit()}moveChange(b){if(!this.state._active)return;const S=Jl(b),E=this.state;E._delta=kn.sub(S,E._values),kn.addTo(E._movement,E._delta),this.computeValues(S),this.compute(b),this.emit()}moveEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}bind(b){b("pointer","change",this.move.bind(this)),b("pointer","leave",this.moveEnd.bind(this))}}const i3=Pn(Pn({},td),{},{mouseOnly:(y=!0)=>y});class U1 extends Qd{constructor(...b){super(...b),Un(this,"ingKey","scrolling")}scroll(b){this.state._active||this.start(b),this.scrollChange(b),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(b){b.cancelable&&b.preventDefault();const S=this.state,E=A1(b);S._delta=kn.sub(E,S._values),kn.addTo(S._movement,S._delta),this.computeValues(E),this.compute(b),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("scroll","",this.scroll.bind(this))}}const V1=td;class H1 extends Qd{constructor(...b){super(...b),Un(this,"ingKey","wheeling")}wheel(b){this.state._active||this.start(b),this.wheelChange(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(b){const S=this.state;S._delta=Mm(b),kn.addTo(S._movement,S._delta),N1(S),this.compute(b),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("wheel","",this.wheel.bind(this))}}const G1=td;class n3 extends Qd{constructor(...b){super(...b),Un(this,"ingKey","hovering")}enter(b){this.config.mouseOnly&&b.pointerType!=="mouse"||(this.start(b),this.computeValues(Jl(b)),this.compute(b),this.emit())}leave(b){if(this.config.mouseOnly&&b.pointerType!=="mouse")return;const S=this.state;if(!S._active)return;S._active=!1;const E=Jl(b);S._movement=S._delta=kn.sub(E,S._values),this.computeValues(E),this.compute(b),S.delta=S.movement,this.emit()}bind(b){b("pointer","enter",this.enter.bind(this)),b("pointer","leave",this.leave.bind(this))}}const r3=Pn(Pn({},td),{},{mouseOnly:(y=!0)=>y}),W1=new Map,Om=new Map;function q1(y){W1.set(y.key,y.engine),Om.set(y.key,y.resolver)}const a3={key:"drag",engine:G2,resolver:K2},s3={key:"hover",engine:n3,resolver:r3},GT={key:"move",engine:t3,resolver:i3},o3={key:"pinch",engine:J2,resolver:e3},WT={key:"scroll",engine:U1,resolver:V1},qT={key:"wheel",engine:H1,resolver:G1};function l3(y,b){if(y==null)return{};var S={},E=Object.keys(y),I,F;for(F=0;F<E.length;F++)I=E[F],!(b.indexOf(I)>=0)&&(S[I]=y[I]);return S}function Fh(y,b){if(y==null)return{};var S=l3(y,b),E,I;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(y);for(I=0;I<F.length;I++)E=F[I],!(b.indexOf(E)>=0)&&Object.prototype.propertyIsEnumerable.call(y,E)&&(S[E]=y[E])}return S}const d3={target(y){if(y)return()=>"current"in y?y.current:y},enabled(y=!0){return y},window(y=Sa.isBrowser?window:void 0){return y},eventOptions({passive:y=!0,capture:b=!1}={}){return{passive:y,capture:b}},transform(y){return y}},c3=["target","eventOptions","window","enabled","transform"];function Nh(y={},b){const S={};for(const[E,I]of Object.entries(b))switch(typeof I){case"function":S[E]=I.call(S,y[E],E,y);break;case"object":S[E]=Nh(y[E],I);break;case"boolean":I&&(S[E]=y[E]);break}return S}function u3(y,b,S={}){const E=y,{target:I,eventOptions:F,window:U,enabled:G,transform:W}=E,K=Fh(E,c3);if(S.shared=Nh({target:I,eventOptions:F,window:U,enabled:G,transform:W},d3),b){const ie=Om.get(b);S[b]=Nh(Pn({shared:S.shared},K),ie)}else for(const ie in K){const ue=Om.get(ie);ue&&(S[ie]=Nh(Pn({shared:S.shared},K[ie]),ue))}return S}class Im{constructor(b,S){Un(this,"_listeners",new Set),this._ctrl=b,this._gestureKey=S}add(b,S,E,I,F){const U=this._listeners,G=j2(S,E),W=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},K=Pn(Pn({},W),F);b.addEventListener(G,I,K);const ie=()=>{b.removeEventListener(G,I,K),U.delete(ie)};return U.add(ie),ie}clean(){this._listeners.forEach(b=>b()),this._listeners.clear()}}class h3{constructor(){Un(this,"_timeouts",new Map)}add(b,S,E=140,...I){this.remove(b),this._timeouts.set(b,window.setTimeout(S,E,...I))}remove(b){const S=this._timeouts.get(b);S&&window.clearTimeout(S)}clean(){this._timeouts.forEach(b=>void window.clearTimeout(b)),this._timeouts.clear()}}class $1{constructor(b){Un(this,"gestures",new Set),Un(this,"_targetEventStore",new Im(this)),Un(this,"gestureEventStores",{}),Un(this,"gestureTimeoutStores",{}),Un(this,"handlers",{}),Un(this,"config",{}),Un(this,"pointerIds",new Set),Un(this,"touchIds",new Set),Un(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),f3(this,b)}setEventIds(b){if(zh(b))return this.touchIds=new Set(S1(b)),this.touchIds;if("pointerId"in b)return b.type==="pointerup"||b.type==="pointercancel"?this.pointerIds.delete(b.pointerId):b.type==="pointerdown"&&this.pointerIds.add(b.pointerId),this.pointerIds}applyHandlers(b,S){this.handlers=b,this.nativeHandlers=S}applyConfig(b,S){this.config=u3(b,S,this.config)}clean(){this._targetEventStore.clean();for(const b of this.gestures)this.gestureEventStores[b].clean(),this.gestureTimeoutStores[b].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...b){const S=this.config.shared,E={};let I;if(!(S.target&&(I=S.target(),!I))){if(S.enabled){for(const U of this.gestures){const G=this.config[U],W=jh(E,G.eventOptions,!!I);if(G.enabled){const K=W1.get(U);new K(this,b,U).bind(W)}}const F=jh(E,S.eventOptions,!!I);for(const U in this.nativeHandlers)F(U,"",G=>this.nativeHandlers[U](Pn(Pn({},this.state.shared),{},{event:G,args:b})),void 0,!0)}for(const F in E)E[F]=M1(...E[F]);if(!I)return E;for(const F in E){const{device:U,capture:G,passive:W}=x1(F);this._targetEventStore.add(I,U,"",E[F],{capture:G,passive:W})}}}}function id(y,b){y.gestures.add(b),y.gestureEventStores[b]=new Im(y,b),y.gestureTimeoutStores[b]=new h3}function f3(y,b){b.drag&&id(y,"drag"),b.wheel&&id(y,"wheel"),b.scroll&&id(y,"scroll"),b.move&&id(y,"move"),b.pinch&&id(y,"pinch"),b.hover&&id(y,"hover")}const jh=(y,b,S)=>(E,I,F,U={},G=!1)=>{var W,K;const ie=(W=U.capture)!==null&&W!==void 0?W:b.capture,ue=(K=U.passive)!==null&&K!==void 0?K:b.passive;let me=G?E:b1(E,I,ie);S&&ue&&(me+="Passive"),y[me]=y[me]||[],y[me].push(F)},p3=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function m3(y){const b={},S={},E=new Set;for(let I in y)p3.test(I)?(E.add(RegExp.lastMatch),S[I]=y[I]):b[I]=y[I];return[S,b,E]}function Aa(y,b,S,E,I,F){if(!y.has(S)||!EngineMap.has(E))return;const U=S+"Start",G=S+"End",W=K=>{let ie;return K.first&&U in b&&b[U](K),S in b&&(ie=b[S](K)),K.last&&G in b&&b[G](K),ie};I[E]=W,F[E]=F[E]||{}}function Rm(y,b){const[S,E,I]=m3(y),F={};return Aa(I,S,"onDrag","drag",F,b),Aa(I,S,"onWheel","wheel",F,b),Aa(I,S,"onScroll","scroll",F,b),Aa(I,S,"onPinch","pinch",F,b),Aa(I,S,"onMove","move",F,b),Aa(I,S,"onHover","hover",F,b),{handlers:F,config:b,nativeHandlers:E}}function nd(y,b={},S,E){const I=R.useMemo(()=>new $1(y),[]);if(I.applyHandlers(y,E),I.applyConfig(b,S),R.useEffect(I.effect.bind(I)),R.useEffect(()=>I.clean.bind(I),[]),b.target===void 0)return I.bind.bind(I)}function zm(y,b){return q1(a3),nd({drag:y},b||{},"drag")}function $T(y,b){return registerAction(pinchAction),nd({pinch:y},b||{},"pinch")}function g3(y,b){return registerAction(wheelAction),nd({wheel:y},b||{},"wheel")}function ZT(y,b){return registerAction(scrollAction),nd({scroll:y},b||{},"scroll")}function YT(y,b){return registerAction(moveAction),nd({move:y},b||{},"move")}function v3(y,b){return registerAction(hoverAction),nd({hover:y},b||{},"hover")}function y3(y){return y.forEach(registerAction),function(S,E){const{handlers:I,nativeHandlers:F,config:U}=parseMergedHandlers(S,E||{});return nd(I,U,void 0,F)}}function XT(y,b){return y3([dragAction,pinchAction,scrollAction,wheelAction,moveAction,hoverAction])(y,b||{})}function js(y,b,{checkForDefaultPrevented:S=!0}={}){return function(I){if(y==null||y(I),S===!1||!I.defaultPrevented)return b==null?void 0:b(I)}}function KT(y,b){const S=$3bkAK$createContext(b);function E(F){const K=F,{children:U}=K,G=Cn(K,["children"]),W=$3bkAK$useMemo(()=>G,Object.values(G));return $3bkAK$createElement(S.Provider,{value:W},U)}function I(F){const U=$3bkAK$useContext(S);if(U)return U;if(b!==void 0)return b;throw new Error(`\`${F}\` must be used within \`${y}\``)}return E.displayName=y+"Provider",[E,I]}function Z1(y,b=[]){let S=[];function E(F,U){const G=(0,R.createContext)(U),W=S.length;S=[...S,U];function K(ue){const Me=ue,{scope:me,children:_e}=Me,ke=Cn(Me,["scope","children"]),fe=(me==null?void 0:me[y][W])||G,q=(0,R.useMemo)(()=>ke,Object.values(ke));return(0,R.createElement)(fe.Provider,{value:q},_e)}function ie(ue,me){const _e=(me==null?void 0:me[y][W])||G,ke=(0,R.useContext)(_e);if(ke)return ke;if(U!==void 0)return U;throw new Error(`\`${ue}\` must be used within \`${F}\``)}return K.displayName=F+"Provider",[K,ie]}const I=()=>{const F=S.map(U=>(0,R.createContext)(U));return function(G){const W=(G==null?void 0:G[y])||F;return(0,R.useMemo)(()=>({[`__scope${y}`]:ge(Z({},G),{[y]:W})}),[G,W])}};return I.scopeName=y,[E,b3(I,...b)]}function b3(...y){const b=y[0];if(y.length===1)return b;const S=()=>{const E=y.map(I=>({useScope:I(),scopeName:I.scopeName}));return function(F){const U=E.reduce((G,{useScope:W,scopeName:K})=>{const ue=W(F)[`__scope${K}`];return Z(Z({},G),ue)},{});return(0,R.useMemo)(()=>({[`__scope${b.scopeName}`]:U}),[U])}};return S.scopeName=b.scopeName,S}function rd(y){const b=(0,R.useRef)(y);return(0,R.useEffect)(()=>{b.current=y}),(0,R.useMemo)(()=>(...S)=>{var E;return(E=b.current)===null||E===void 0?void 0:E.call(b,...S)},[])}function w3(y,b=globalThis==null?void 0:globalThis.document){const S=rd(y);(0,R.useEffect)(()=>{const E=I=>{I.key==="Escape"&&S(I)};return b.addEventListener("keydown",E),()=>b.removeEventListener("keydown",E)},[S,b])}const x3="DismissableLayer",Lm="dismissableLayer.update",_3="dismissableLayer.pointerDownOutside",k3="dismissableLayer.focusOutside";let Y1;const Bm=(0,R.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fm=(0,R.forwardRef)((y,b)=>{var S;const mi=y,{disableOutsidePointerEvents:E=!1,onEscapeKeyDown:I,onPointerDownOutside:F,onFocusOutside:U,onInteractOutside:G,onDismiss:W}=mi,K=Cn(mi,["disableOutsidePointerEvents","onEscapeKeyDown","onPointerDownOutside","onFocusOutside","onInteractOutside","onDismiss"]),ie=(0,R.useContext)(Bm),[ue,me]=(0,R.useState)(null),_e=(S=ue==null?void 0:ue.ownerDocument)!==null&&S!==void 0?S:globalThis==null?void 0:globalThis.document,[,ke]=(0,R.useState)({}),fe=Ae(b,di=>me(di)),q=Array.from(ie.layers),[Me]=[...ie.layersWithOutsidePointerEventsDisabled].slice(-1),Oe=q.indexOf(Me),tt=ue?q.indexOf(ue):-1,Mt=ie.layersWithOutsidePointerEventsDisabled.size>0,li=tt>=Oe,gt=Q1(di=>{const Ot=di.target,$t=[...ie.branches].some(vt=>vt.contains(Ot));!li||$t||(F==null||F(di),G==null||G(di),di.defaultPrevented||W==null||W())},_e),jt=S3(di=>{const Ot=di.target;[...ie.branches].some(vt=>vt.contains(Ot))||(U==null||U(di),G==null||G(di),di.defaultPrevented||W==null||W())},_e);return w3(di=>{tt===ie.layers.size-1&&(I==null||I(di),!di.defaultPrevented&&W&&(di.preventDefault(),W()))},_e),(0,R.useEffect)(()=>{if(ue)return E&&(ie.layersWithOutsidePointerEventsDisabled.size===0&&(Y1=_e.body.style.pointerEvents,_e.body.style.pointerEvents="none"),ie.layersWithOutsidePointerEventsDisabled.add(ue)),ie.layers.add(ue),J1(),()=>{E&&ie.layersWithOutsidePointerEventsDisabled.size===1&&(_e.body.style.pointerEvents=Y1)}},[ue,_e,E,ie]),(0,R.useEffect)(()=>()=>{ue&&(ie.layers.delete(ue),ie.layersWithOutsidePointerEventsDisabled.delete(ue),J1())},[ue,ie]),(0,R.useEffect)(()=>{const di=()=>ke({});return document.addEventListener(Lm,di),()=>document.removeEventListener(Lm,di)},[]),(0,R.createElement)(J.div,(0,Gt.Z)({},K,{ref:fe,style:Z({pointerEvents:Mt?li?"auto":"none":void 0},y.style),onFocusCapture:js(y.onFocusCapture,jt.onFocusCapture),onBlurCapture:js(y.onBlurCapture,jt.onBlurCapture),onPointerDownCapture:js(y.onPointerDownCapture,gt.onPointerDownCapture)}))}),X1="DismissableLayerBranch",K1=(0,R.forwardRef)((y,b)=>{const S=(0,R.useContext)(Bm),E=(0,R.useRef)(null),I=Ae(b,E);return(0,R.useEffect)(()=>{const F=E.current;if(F)return S.branches.add(F),()=>{S.branches.delete(F)}},[S.branches]),(0,R.createElement)(J.div,(0,Gt.Z)({},y,{ref:I}))});function Q1(y,b=globalThis==null?void 0:globalThis.document){const S=rd(y),E=(0,R.useRef)(!1),I=(0,R.useRef)(()=>{});return(0,R.useEffect)(()=>{const F=G=>{if(G.target&&!E.current){let K=function(){ey(_3,S,W,{discrete:!0})};const W={originalEvent:G};G.pointerType==="touch"?(b.removeEventListener("click",I.current),I.current=K,b.addEventListener("click",I.current,{once:!0})):K()}else b.removeEventListener("click",I.current);E.current=!1},U=window.setTimeout(()=>{b.addEventListener("pointerdown",F)},0);return()=>{window.clearTimeout(U),b.removeEventListener("pointerdown",F),b.removeEventListener("click",I.current)}},[b,S]),{onPointerDownCapture:()=>E.current=!0}}function S3(y,b=globalThis==null?void 0:globalThis.document){const S=rd(y),E=(0,R.useRef)(!1);return(0,R.useEffect)(()=>{const I=F=>{F.target&&!E.current&&ey(k3,S,{originalEvent:F},{discrete:!1})};return b.addEventListener("focusin",I),()=>b.removeEventListener("focusin",I)},[b,S]),{onFocusCapture:()=>E.current=!0,onBlurCapture:()=>E.current=!1}}function J1(){const y=new CustomEvent(Lm);document.dispatchEvent(y)}function ey(y,b,S,{discrete:E}){const I=S.originalEvent.target,F=new CustomEvent(y,{bubbles:!1,cancelable:!0,detail:S});b&&I.addEventListener(y,b,{once:!0}),E?xn(I,F):I.dispatchEvent(F)}const QT=null,Nm=null,ad=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},ty=ht["useId".toString()]||(()=>{});let iy=0;function ny(y){const[b,S]=R.useState(ty());return ad(()=>{y||S(E=>E!=null?E:String(iy++))},[y]),y||(b?`radix-${b}`:"")}var jm=de(609),il=de(33665);const A3="Arrow",pu=(0,R.forwardRef)((y,b)=>{const U=y,{children:S,width:E=10,height:I=5}=U,F=Cn(U,["children","width","height"]);return(0,R.createElement)(J.svg,(0,Gt.Z)({},F,{ref:b,width:E,height:I,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),y.asChild?S:(0,R.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),C3=pu;function E3(y){const[b,S]=(0,R.useState)(void 0);return ad(()=>{if(y){S({width:y.offsetWidth,height:y.offsetHeight});const E=new ResizeObserver(I=>{if(!Array.isArray(I)||!I.length)return;const F=I[0];let U,G;if("borderBoxSize"in F){const W=F.borderBoxSize,K=Array.isArray(W)?W[0]:W;U=K.inlineSize,G=K.blockSize}else U=y.offsetWidth,G=y.offsetHeight;S({width:U,height:G})});return E.observe(y,{box:"border-box"}),()=>E.unobserve(y)}else S(void 0)},[y]),b}const Um=null,JT=null,Vm="Popper",[ry,Hm]=Z1(Vm),[ay,Gm]=ry(Vm),Wm=y=>{const{__scopePopper:b,children:S}=y,[E,I]=(0,R.useState)(null);return(0,R.createElement)(ay,{scope:b,anchor:E,onAnchorChange:I},S)},mu="PopperAnchor",sy=(0,R.forwardRef)((y,b)=>{const W=y,{__scopePopper:S,virtualRef:E}=W,I=Cn(W,["__scopePopper","virtualRef"]),F=Gm(mu,S),U=(0,R.useRef)(null),G=Ae(b,U);return(0,R.useEffect)(()=>{F.onAnchorChange((E==null?void 0:E.current)||U.current)}),E?null:(0,R.createElement)(J.div,(0,Gt.Z)({},I,{ref:G}))}),qm="PopperContent",[M3,T3]=ry(qm),oy=(0,R.forwardRef)((y,b)=>{var S,E,I,F,U,G,W,K;const Ia=y,{__scopePopper:ie,side:ue="bottom",sideOffset:me=0,align:_e="center",alignOffset:ke=0,arrowPadding:fe=0,avoidCollisions:q=!0,collisionBoundary:Me=[],collisionPadding:Oe=0,sticky:tt="partial",hideWhenDetached:Mt=!1,updatePositionStrategy:li="optimized",onPlaced:gt}=Ia,jt=Cn(Ia,["__scopePopper","side","sideOffset","align","alignOffset","arrowPadding","avoidCollisions","collisionBoundary","collisionPadding","sticky","hideWhenDetached","updatePositionStrategy","onPlaced"]),mi=Gm(qm,ie),[di,Ot]=(0,R.useState)(null),$t=Ae(b,rs=>Ot(rs)),[vt,xi]=(0,R.useState)(null),Bi=E3(vt),Pi=(S=Bi==null?void 0:Bi.width)!==null&&S!==void 0?S:0,mn=(E=Bi==null?void 0:Bi.height)!==null&&E!==void 0?E:0,_t=ue+(_e!=="center"?"-"+_e:""),Yn=typeof Oe=="number"?Oe:Z({top:0,right:0,bottom:0,left:0},Oe),na=Array.isArray(Me)?Me:[Me],Zs=na.length>0,jr={padding:Yn,boundary:na.filter(P3),altBoundary:Zs},{refs:If,floatingStyles:zn,placement:ri,isPositioned:Oi,middlewareData:ns}=(0,jm.YF)({strategy:"fixed",placement:_t,whileElementsMounted:(...rs)=>(0,il.Me)(...rs,{animationFrame:li==="always"}),elements:{reference:mi.anchor},middleware:[(0,il.cv)({mainAxis:me+mn,alignmentAxis:ke}),q&&(0,il.uY)(Z({mainAxis:!0,crossAxis:!1,limiter:tt==="partial"?(0,il.dr)():void 0},jr)),q&&(0,il.RR)(Z({},jr)),(0,il.dp)(ge(Z({},jr),{apply:({elements:rs,rects:Do,availableWidth:vl,availableHeight:yl})=>{const{width:Cs,height:Es}=Do.reference,as=rs.floating.style;as.setProperty("--radix-popper-available-width",`${vl}px`),as.setProperty("--radix-popper-available-height",`${yl}px`),as.setProperty("--radix-popper-anchor-width",`${Cs}px`),as.setProperty("--radix-popper-anchor-height",`${Es}px`)}})),vt&&(0,jm.x7)({element:vt,padding:fe}),O3({arrowWidth:Pi,arrowHeight:mn}),Mt&&(0,il.Cp)(Z({strategy:"referenceHidden"},jr))]}),[vd,gl]=cy(ri),Ut=rd(gt);ad(()=>{Oi&&(Ut==null||Ut())},[Oi,Ut]);const N=(I=ns.arrow)===null||I===void 0?void 0:I.x,wc=(F=ns.arrow)===null||F===void 0?void 0:F.y,Gu=((U=ns.arrow)===null||U===void 0?void 0:U.centerOffset)!==0,[nn,Oa]=(0,R.useState)();return ad(()=>{di&&Oa(window.getComputedStyle(di).zIndex)},[di]),(0,R.createElement)("div",{ref:If.setFloating,"data-radix-popper-content-wrapper":"",style:ge(Z({},zn),{transform:Oi?zn.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:nn,["--radix-popper-transform-origin"]:[(G=ns.transformOrigin)===null||G===void 0?void 0:G.x,(W=ns.transformOrigin)===null||W===void 0?void 0:W.y].join(" ")}),dir:y.dir},(0,R.createElement)(M3,{scope:ie,placedSide:vd,onArrowChange:xi,arrowX:N,arrowY:wc,shouldHideArrow:Gu},(0,R.createElement)(J.div,(0,Gt.Z)({"data-side":vd,"data-align":gl},jt,{ref:$t,style:ge(Z({},jt.style),{animation:Oi?void 0:"none",opacity:(K=ns.hide)!==null&&K!==void 0&&K.referenceHidden?0:void 0})}))))}),ly="PopperArrow",D3={top:"bottom",right:"left",bottom:"top",left:"right"},dy=(0,R.forwardRef)(function(b,S){const G=b,{__scopePopper:E}=G,I=Cn(G,["__scopePopper"]),F=T3(ly,E),U=D3[F.placedSide];return(0,R.createElement)("span",{ref:F.onArrowChange,style:{position:"absolute",left:F.arrowX,top:F.arrowY,[U]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[F.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[F.placedSide],visibility:F.shouldHideArrow?"hidden":void 0}},(0,R.createElement)(C3,(0,Gt.Z)({},I,{ref:S,style:ge(Z({},I.style),{display:"block"})})))});function P3(y){return y!==null}const O3=y=>({name:"transformOrigin",options:y,fn(b){var S,E,I,F,U;const{placement:G,rects:W,middlewareData:K}=b,ue=((S=K.arrow)===null||S===void 0?void 0:S.centerOffset)!==0,me=ue?0:y.arrowWidth,_e=ue?0:y.arrowHeight,[ke,fe]=cy(G),q={start:"0%",center:"50%",end:"100%"}[fe],Me=((E=(I=K.arrow)===null||I===void 0?void 0:I.x)!==null&&E!==void 0?E:0)+me/2,Oe=((F=(U=K.arrow)===null||U===void 0?void 0:U.y)!==null&&F!==void 0?F:0)+_e/2;let tt="",Mt="";return ke==="bottom"?(tt=ue?q:`${Me}px`,Mt=`${-_e}px`):ke==="top"?(tt=ue?q:`${Me}px`,Mt=`${W.floating.height+_e}px`):ke==="right"?(tt=`${-_e}px`,Mt=ue?q:`${Oe}px`):ke==="left"&&(tt=`${W.floating.width+_e}px`,Mt=ue?q:`${Oe}px`),{data:{x:tt,y:Mt}}}});function cy(y){const[b,S="center"]=y.split("-");return[b,S]}const I3=Wm,R3=sy,z3=oy,L3=dy;function B3(y,b){return(0,R.useReducer)((S,E)=>{const I=b[S][E];return I!=null?I:S},y)}const $m=y=>{const{present:b,children:S}=y,E=uy(b),I=typeof S=="function"?S({present:E.isPresent}):R.Children.only(S),F=Ae(E.ref,I.ref);return typeof S=="function"||E.isPresent?(0,R.cloneElement)(I,{ref:F}):null};$m.displayName="Presence";function uy(y){const[b,S]=(0,R.useState)(),E=(0,R.useRef)({}),I=(0,R.useRef)(y),F=(0,R.useRef)("none"),U=y?"mounted":"unmounted",[G,W]=B3(U,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,R.useEffect)(()=>{const K=Uh(E.current);F.current=G==="mounted"?K:"none"},[G]),ad(()=>{const K=E.current,ie=I.current;if(ie!==y){const me=F.current,_e=Uh(K);y?W("MOUNT"):_e==="none"||(K==null?void 0:K.display)==="none"?W("UNMOUNT"):W(ie&&me!==_e?"ANIMATION_OUT":"UNMOUNT"),I.current=y}},[y,W]),ad(()=>{if(b){const K=ue=>{const _e=Uh(E.current).includes(ue.animationName);ue.target===b&&_e&&(0,st.flushSync)(()=>W("ANIMATION_END"))},ie=ue=>{ue.target===b&&(F.current=Uh(E.current))};return b.addEventListener("animationstart",ie),b.addEventListener("animationcancel",K),b.addEventListener("animationend",K),()=>{b.removeEventListener("animationstart",ie),b.removeEventListener("animationcancel",K),b.removeEventListener("animationend",K)}}else W("ANIMATION_END")},[b,W]),{isPresent:["mounted","unmountSuspended"].includes(G),ref:(0,R.useCallback)(K=>{K&&(E.current=getComputedStyle(K)),S(K)},[])}}function Uh(y){return(y==null?void 0:y.animationName)||"none"}function F3({prop:y,defaultProp:b,onChange:S=()=>{}}){const[E,I]=N3({defaultProp:b,onChange:S}),F=y!==void 0,U=F?y:E,G=rd(S),W=(0,R.useCallback)(K=>{if(F){const ue=typeof K=="function"?K(y):K;ue!==y&&G(ue)}else I(K)},[F,y,I,G]);return[U,W]}function N3({defaultProp:y,onChange:b}){const S=(0,R.useState)(y),[E]=S,I=(0,R.useRef)(E),F=rd(b);return(0,R.useEffect)(()=>{I.current!==E&&(F(E),I.current=E)},[E,I,F]),S}const j3="VisuallyHidden",Zm=(0,R.forwardRef)((y,b)=>(0,R.createElement)(J.span,(0,Gt.Z)({},y,{ref:b,style:Z({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},y.style)}))),hy=Zm,[Jd,Vh]=Z1("Tooltip",[Hm]),Mi=Hm(),U3="TooltipProvider",hr=700,yo="tooltip.open",[nl,Qa]=Jd(U3),V3=y=>{const{__scopeTooltip:b,delayDuration:S=hr,skipDelayDuration:E=300,disableHoverableContent:I=!1,children:F}=y,[U,G]=(0,R.useState)(!0),W=(0,R.useRef)(!1),K=(0,R.useRef)(0);return(0,R.useEffect)(()=>{const ie=K.current;return()=>window.clearTimeout(ie)},[]),(0,R.createElement)(nl,{scope:b,isOpenDelayed:U,delayDuration:S,onOpen:(0,R.useCallback)(()=>{window.clearTimeout(K.current),G(!1)},[]),onClose:(0,R.useCallback)(()=>{window.clearTimeout(K.current),K.current=window.setTimeout(()=>G(!0),E)},[E]),isPointerInTransitRef:W,onPointerInTransitChange:(0,R.useCallback)(ie=>{W.current=ie},[]),disableHoverableContent:I},F)},gu="Tooltip",[eD,Us]=Jd(gu),rl=y=>{const{__scopeTooltip:b,children:S,open:E,defaultOpen:I=!1,onOpenChange:F,disableHoverableContent:U,delayDuration:G}=y,W=Qa(gu,y.__scopeTooltip),K=Mi(b),[ie,ue]=(0,R.useState)(null),me=ny(),_e=(0,R.useRef)(0),ke=U!=null?U:W.disableHoverableContent,fe=G!=null?G:W.delayDuration,q=(0,R.useRef)(!1),[Me=!1,Oe]=F3({prop:E,defaultProp:I,onChange:jt=>{jt?(W.onOpen(),document.dispatchEvent(new CustomEvent(yo))):W.onClose(),F==null||F(jt)}}),tt=(0,R.useMemo)(()=>Me?q.current?"delayed-open":"instant-open":"closed",[Me]),Mt=(0,R.useCallback)(()=>{window.clearTimeout(_e.current),q.current=!1,Oe(!0)},[Oe]),li=(0,R.useCallback)(()=>{window.clearTimeout(_e.current),Oe(!1)},[Oe]),gt=(0,R.useCallback)(()=>{window.clearTimeout(_e.current),_e.current=window.setTimeout(()=>{q.current=!0,Oe(!0)},fe)},[fe,Oe]);return(0,R.useEffect)(()=>()=>window.clearTimeout(_e.current),[]),(0,R.createElement)(I3,K,(0,R.createElement)(eD,{scope:b,contentId:me,open:Me,stateAttribute:tt,trigger:ie,onTriggerChange:ue,onTriggerEnter:(0,R.useCallback)(()=>{W.isOpenDelayed?gt():Mt()},[W.isOpenDelayed,gt,Mt]),onTriggerLeave:(0,R.useCallback)(()=>{ke?li():window.clearTimeout(_e.current)},[li,ke]),onOpen:Mt,onClose:li,disableHoverableContent:ke},S))},sd="TooltipTrigger",Hh=(0,R.forwardRef)((y,b)=>{const me=y,{__scopeTooltip:S}=me,E=Cn(me,["__scopeTooltip"]),I=Us(sd,S),F=Qa(sd,S),U=Mi(S),G=(0,R.useRef)(null),W=Ae(b,G,I.onTriggerChange),K=(0,R.useRef)(!1),ie=(0,R.useRef)(!1),ue=(0,R.useCallback)(()=>K.current=!1,[]);return(0,R.useEffect)(()=>()=>document.removeEventListener("pointerup",ue),[ue]),(0,R.createElement)(R3,(0,Gt.Z)({asChild:!0},U),(0,R.createElement)(J.button,(0,Gt.Z)({"aria-describedby":I.open?I.contentId:void 0,"data-state":I.stateAttribute},E,{ref:W,onPointerMove:js(y.onPointerMove,_e=>{_e.pointerType!=="touch"&&!ie.current&&!F.isPointerInTransitRef.current&&(I.onTriggerEnter(),ie.current=!0)}),onPointerLeave:js(y.onPointerLeave,()=>{I.onTriggerLeave(),ie.current=!1}),onPointerDown:js(y.onPointerDown,()=>{K.current=!0,document.addEventListener("pointerup",ue,{once:!0})}),onFocus:js(y.onFocus,()=>{K.current||I.onOpen()}),onBlur:js(y.onBlur,I.onClose),onClick:js(y.onClick,I.onClose)})))}),Gh="TooltipPortal",[H3,vu]=Jd(Gh,{forceMount:void 0}),yu=y=>{const{__scopeTooltip:b,forceMount:S,children:E,container:I}=y,F=Us(Gh,b);return(0,R.createElement)(H3,{scope:b,forceMount:S},(0,R.createElement)($m,{present:S||F.open},(0,R.createElement)(Xt,{asChild:!0,container:I},E)))},On="TooltipContent",Wh=(0,R.forwardRef)((y,b)=>{const S=vu(On,y.__scopeTooltip),G=y,{forceMount:E=S.forceMount,side:I="top"}=G,F=Cn(G,["forceMount","side"]),U=Us(On,y.__scopeTooltip);return(0,R.createElement)($m,{present:E||U.open},U.disableHoverableContent?(0,R.createElement)($h,(0,Gt.Z)({side:I},F,{ref:b})):(0,R.createElement)(Ym,(0,Gt.Z)({side:I},F,{ref:b})))}),Ym=(0,R.forwardRef)((y,b)=>{const S=Us(On,y.__scopeTooltip),E=Qa(On,y.__scopeTooltip),I=(0,R.useRef)(null),F=Ae(b,I),[U,G]=(0,R.useState)(null),{trigger:W,onClose:K}=S,ie=I.current,{onPointerInTransitChange:ue}=E,me=(0,R.useCallback)(()=>{G(null),ue(!1)},[ue]),_e=(0,R.useCallback)((ke,fe)=>{const q=ke.currentTarget,Me={x:ke.clientX,y:ke.clientY},Oe=bu(Me,q.getBoundingClientRect()),tt=Zh(Me,Oe),Mt=W3(fe.getBoundingClientRect()),li=Km([...tt,...Mt]);G(li),ue(!0)},[ue]);return(0,R.useEffect)(()=>()=>me(),[me]),(0,R.useEffect)(()=>{if(W&&ie){const ke=q=>_e(q,ie),fe=q=>_e(q,W);return W.addEventListener("pointerleave",ke),ie.addEventListener("pointerleave",fe),()=>{W.removeEventListener("pointerleave",ke),ie.removeEventListener("pointerleave",fe)}}},[W,ie,_e,me]),(0,R.useEffect)(()=>{if(U){const ke=fe=>{const q=fe.target,Me={x:fe.clientX,y:fe.clientY},Oe=(W==null?void 0:W.contains(q))||(ie==null?void 0:ie.contains(q)),tt=!fy(Me,U);Oe?me():tt&&(me(),K())};return document.addEventListener("pointermove",ke),()=>document.removeEventListener("pointermove",ke)}},[W,ie,U,K,me]),(0,R.createElement)($h,(0,Gt.Z)({},y,{ref:F}))}),[G3,qh]=Jd(gu,{isInside:!1}),$h=(0,R.forwardRef)((y,b)=>{const ue=y,{__scopeTooltip:S,children:E,"aria-label":I,onEscapeKeyDown:F,onPointerDownOutside:U}=ue,G=Cn(ue,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]),W=Us(On,S),K=Mi(S),{onClose:ie}=W;return(0,R.useEffect)(()=>(document.addEventListener(yo,ie),()=>document.removeEventListener(yo,ie)),[ie]),(0,R.useEffect)(()=>{if(W.trigger){const me=_e=>{const ke=_e.target;ke!=null&&ke.contains(W.trigger)&&ie()};return window.addEventListener("scroll",me,{capture:!0}),()=>window.removeEventListener("scroll",me,{capture:!0})}},[W.trigger,ie]),(0,R.createElement)(Fm,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:F,onPointerDownOutside:U,onFocusOutside:me=>me.preventDefault(),onDismiss:ie},(0,R.createElement)(z3,(0,Gt.Z)({"data-state":W.stateAttribute},K,G,{ref:b,style:ge(Z({},G.style),{"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"})}),(0,R.createElement)(be,null,E),(0,R.createElement)(G3,{scope:S,isInside:!0},(0,R.createElement)(hy,{id:W.contentId,role:"tooltip"},I||E))))}),al="TooltipArrow",Xm=(0,R.forwardRef)((y,b)=>{const U=y,{__scopeTooltip:S}=U,E=Cn(U,["__scopeTooltip"]),I=Mi(S);return qh(al,S).isInside?null:(0,R.createElement)(L3,(0,Gt.Z)({},I,E,{ref:b}))});function bu(y,b){const S=Math.abs(b.top-y.y),E=Math.abs(b.bottom-y.y),I=Math.abs(b.right-y.x),F=Math.abs(b.left-y.x);switch(Math.min(S,E,I,F)){case F:return"left";case I:return"right";case S:return"top";case E:return"bottom";default:throw new Error("unreachable")}}function Zh(y,b,S=5){const E=[];switch(b){case"top":E.push({x:y.x-S,y:y.y+S},{x:y.x+S,y:y.y+S});break;case"bottom":E.push({x:y.x-S,y:y.y-S},{x:y.x+S,y:y.y-S});break;case"left":E.push({x:y.x+S,y:y.y-S},{x:y.x+S,y:y.y+S});break;case"right":E.push({x:y.x-S,y:y.y-S},{x:y.x-S,y:y.y+S});break}return E}function W3(y){const{top:b,right:S,bottom:E,left:I}=y;return[{x:I,y:b},{x:S,y:b},{x:S,y:E},{x:I,y:E}]}function fy(y,b){const{x:S,y:E}=y;let I=!1;for(let F=0,U=b.length-1;F<b.length;U=F++){const G=b[F].x,W=b[F].y,K=b[U].x,ie=b[U].y;W>E!=ie>E&&S<(K-G)*(E-W)/(ie-W)+G&&(I=!I)}return I}function Km(y){const b=y.slice();return b.sort((S,E)=>S.x<E.x?-1:S.x>E.x?1:S.y<E.y?-1:S.y>E.y?1:0),Qm(b)}function Qm(y){if(y.length<=1)return y.slice();const b=[];for(let E=0;E<y.length;E++){const I=y[E];for(;b.length>=2;){const F=b[b.length-1],U=b[b.length-2];if((F.x-U.x)*(I.y-U.y)>=(F.y-U.y)*(I.x-U.x))b.pop();else break}b.push(I)}b.pop();const S=[];for(let E=y.length-1;E>=0;E--){const I=y[E];for(;S.length>=2;){const F=S[S.length-1],U=S[S.length-2];if((F.x-U.x)*(I.y-U.y)>=(F.y-U.y)*(I.x-U.x))S.pop();else break}S.push(I)}return S.pop(),b.length===1&&S.length===1&&b[0].x===S[0].x&&b[0].y===S[0].y?b:b.concat(S)}const q3=null,$3=rl,py=Hh,Jm=null,my=Wh,Yh=Xm;function Z3(y,b){if(y==null)return{};var S={},E=Object.keys(y),I,F;for(F=0;F<E.length;F++)I=E[F],!(b.indexOf(I)>=0)&&(S[I]=y[I]);return S}function Zi(y,b){if(y==null)return{};var S=Z3(y,b),E,I;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(y);for(I=0;I<F.length;I++)E=F[I],!(b.indexOf(E)>=0)&&Object.prototype.propertyIsEnumerable.call(y,E)&&(S[E]=y[E])}return S}let an;(function(y){y[y.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",y[y.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",y[y.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",y[y.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",y[y.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",y[y.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",y[y.THEME_ERROR=6]="THEME_ERROR",y[y.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",y[y.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",y[y.EMPTY_KEY=9]="EMPTY_KEY"})(an||(an={}));const eg={[an.UNSUPPORTED_INPUT]:(y,b)=>[`An input with type \`${y}\` input was found at path \`${b}\` but it's not supported yet.`],[an.NO_COMPONENT_FOR_TYPE]:(y,b)=>[`Type \`${y}\` found at path \`${b}\` can't be displayed in panel because no component supports it yet.`],[an.UNKNOWN_INPUT]:(y,b)=>[`input at path \`${y}\` is not recognized.`,b],[an.DUPLICATE_KEYS]:(y,b,S)=>[`Key \`${y}\` of path \`${b}\` already exists at path \`${S}\`. Even nested keys need to be unique. Rename one of the keys.`],[an.ALREADY_REGISTERED_TYPE]:y=>[`Type ${y} has already been registered. You can't register a component with the same type.`],[an.CLIPBOARD_ERROR]:y=>["Error copying the value",y],[an.THEME_ERROR]:(y,b)=>[`Error accessing the theme \`${y}.${b}\` value.`],[an.PATH_DOESNT_EXIST]:y=>[`Error getting the value at path \`${y}\`. There is probably an error in your \`render\` function.`],[an.PATH_DOESNT_EXIST]:y=>[`Error accessing the value at path \`${y}\``],[an.INPUT_TYPE_OVERRIDE]:(y,b,S)=>[`Input at path \`${y}\` already exists with type: \`${b}\`. Its type cannot be overridden with type \`${S}\`.`],[an.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function gy(y,b,...S){const[E,...I]=eg[b](...S);console[y]("LEVA: "+E,...I)}const Vs=gy.bind(null,"warn"),bo=gy.bind(null,"log"),tg=["value"],Y3=["schema"],wu=["value"],vy=[],wo={};function X3(y){let{value:b}=y,S=Zi(y,tg);for(let E of vy){const I=E(b,S);if(I)return I}}function sl(y,b){let{schema:S}=b,E=Zi(b,Y3);if(y in wo){Vs(an.ALREADY_REGISTERED_TYPE,y);return}vy.push((I,F)=>S(I,F)&&y),wo[y]=E}const Ca=()=>"__CUSTOM__PLUGIN__"+Math.random().toString(36).substr(2,9);function xu(y){return y}function MF(y){const b=Ca();return wo[b]=y,S=>({type:b,__customInput:S})}function yy(y,b,S,E){const{normalize:I}=wo[y];if(I)return I(b,S,E);if(typeof b!="object"||!("value"in b))return{value:b};const{value:F}=b,U=Zi(b,wu);return{value:F,settings:U}}function tD(y,b,S,E,I,F){const{sanitize:U}=wo[y];return U?U(b,S,E,I,F):b}function K3(y,b,S){const{format:E}=wo[y];return E?E(b,S):b}function iD(y,b,S){return b in y?Object.defineProperty(y,b,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[b]=S,y}function Q3(y,b){var S=Object.keys(y);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(y);b&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(y,I).enumerable})),S.push.apply(S,E)}return S}function ni(y){for(var b=1;b<arguments.length;b++){var S=arguments[b]!=null?arguments[b]:{};b%2?Q3(Object(S),!0).forEach(function(E){iD(y,E,S[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(S)):Q3(Object(S)).forEach(function(E){Object.defineProperty(y,E,Object.getOwnPropertyDescriptor(S,E))})}return y}const od=(y,b,S)=>y>S?S:y<b?b:y,nD=(y,b)=>String(y).padStart(b,"0"),J3=y=>{if(y===""||typeof y=="number")return y;try{const b=ol(y);if(!isNaN(b))return b}catch(b){}return parseFloat(y)},ek=Math.log(10);function by(y){let b=Math.abs(+String(y).replace(".",""));if(b===0)return .01;for(;b!==0&&b%10===0;)b/=10;const S=Math.floor(Math.log(b)/ek)+1,E=Math.floor(Math.log10(Math.abs(y))),I=Math.pow(10,E-S);return Math.max(I,.001)}const Xh=(y,b,S)=>S===b?0:(od(y,b,S)-b)/(S-b),Kh=(y,b,S)=>y*(S-b)+b,tk=()=>"_"+Math.random().toString(36).substr(2,9),wy=/\(([0-9+\-*/^ .]+)\)/,ig=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,Ea=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,ec=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,Lt=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,ng=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function ol(y){if(isNaN(Number(y)))if(wy.test(y)){const b=y.replace(wy,(S,E)=>String(ol(E)));return ol(b)}else if(ig.test(y)){const b=y.replace(ig,(S,E,I)=>String(Math.pow(Number(E),Number(I))));return ol(b)}else if(Ea.test(y)){const b=y.replace(Ea,(S,E,I)=>String(Number(E)*Number(I)));return ol(b)}else if(ec.test(y)){const b=y.replace(ec,(S,E,I)=>{if(I!=0)return String(Number(E)/Number(I));throw new Error("Division by zero")});return ol(b)}else if(Lt.test(y)){const b=y.replace(Lt,(S,E,I)=>String(Number(E)+Number(I)));return ol(b)}else if(ng.test(y)){const b=y.replace(ng,(S,E,I)=>String(Number(E)-Number(I)));return ol(b)}else return Number(y);return Number(y)}function _u(y,b){return b.reduce((S,E)=>(y&&y.hasOwnProperty(E)&&(S[E]=y[E]),S),{})}function xy(y,b){const S=ni({},y);return b.forEach(E=>E in y&&delete S[E]),S}function _y(y,b){return y.reduce((S,E,I)=>Object.assign(S,{[b[I]]:E}),{})}function rg(y){return Object.prototype.toString.call(y)==="[object Object]"}const Qh=y=>rg(y)&&Object.keys(y).length===0;let Ja;(function(y){y.BUTTON="BUTTON",y.BUTTON_GROUP="BUTTON_GROUP",y.MONITOR="MONITOR",y.FOLDER="FOLDER"})(Ja||(Ja={}));let _s;(function(y){y.SELECT="SELECT",y.IMAGE="IMAGE",y.NUMBER="NUMBER",y.COLOR="COLOR",y.STRING="STRING",y.BOOLEAN="BOOLEAN",y.INTERVAL="INTERVAL",y.VECTOR3D="VECTOR3D",y.VECTOR2D="VECTOR2D"})(_s||(_s={}));const xo=["type","__customInput"],ky=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],_o=["type"];function tc(y,b,S={},E){var I,F;if(typeof y!="object"||Array.isArray(y))return{type:E,input:y,options:ni({key:b,label:b,optional:!1,disabled:!1,order:0},S)};if("__customInput"in y){const{type:li,__customInput:gt}=y,jt=Zi(y,xo);return tc(gt,b,jt,li)}const{render:U,label:G,optional:W,order:K=0,disabled:ie,hint:ue,onChange:me,onEditStart:_e,onEditEnd:ke,transient:fe}=y,q=Zi(y,ky),Me=ni({render:U,key:b,label:G!=null?G:b,hint:ue,transient:fe!=null?fe:!!me,onEditStart:_e,onEditEnd:ke,disabled:ie,optional:W,order:K},S);let{type:Oe}=q,tt=Zi(q,_o);if(Oe=E!=null?E:Oe,Oe in Ja)return{type:Oe,input:tt,options:Me};let Mt;return E&&rg(tt)&&"value"in tt?Mt=tt.value:Mt=Qh(tt)?void 0:tt,{type:Oe,input:Mt,options:ni(ni({},Me),{},{onChange:me,optional:(I=Me.optional)!==null&&I!==void 0?I:!1,disabled:(F=Me.disabled)!==null&&F!==void 0?F:!1})}}function Hs(y,b,S,E){const I=tc(y,b),{type:F,input:U,options:G}=I;if(F)return F in Ja?I:{type:F,input:yy(F,U,S,E),options:G};let W=X3(U);return W?{type:W,input:yy(W,U,S,E),options:G}:(W=X3({value:U}),W?{type:W,input:yy(W,{value:U},S,E),options:G}:!1)}function ko(y,b,S,E,I){const{value:F,type:U,settings:G}=y;y.value=ld({type:U,value:F,settings:G},b,S,E),y.fromPanel=I}const ks=function(b,S,E){this.type="LEVA_ERROR",this.message="LEVA: "+b,this.previousValue=S,this.error=E};function ld({type:y,value:b,settings:S},E,I,F){const U=y!=="SELECT"&&typeof E=="function"?E(b):E;let G;try{G=tD(y,U,S,b,I,F)}catch(W){throw new ks(`The value \`${E}\` did not result in a correct value.`,b,W)}return Fn(G,b)?b:G}const ag=(y,b,S=!1)=>{let E=0;return function(){const I=arguments,F=S&&!E,U=()=>y.apply(this,I);window.clearTimeout(E),E=window.setTimeout(U,b),F&&U()}},Jh=y=>y.shiftKey?5:y.altKey?1/5:1;function ef(y,b){const S=console.error;console.error=()=>{},st.render(y,b),console.error=S}function ik(y){return b=>{y.forEach(S=>{typeof S=="function"?S(b):S!=null&&(S.current=b)})}}const Sy=["value"],So=["min","max"],Ay=y=>{if(typeof y=="number")return!0;if(typeof y=="string"){const b=parseFloat(y);return isNaN(b)?!1:y.substring((""+b).length).trim().length<4}return!1},Cy=(y,{min:b=-1/0,max:S=1/0,suffix:E})=>{const I=parseFloat(y);if(y===""||isNaN(I))throw Error("Invalid number");const F=od(I,b,S);return E?F+E:F},Ey=(y,{pad:b=0,suffix:S})=>{const E=parseFloat(y).toFixed(b);return S?E+S:E},ku=y=>{let{value:b}=y,S=Zi(y,Sy);const{min:E=-1/0,max:I=1/0}=S,F=Zi(S,So);let U=parseFloat(b);const G=typeof b=="string"?b.substring((""+U).length):void 0;U=od(U,E,I);let W=S.step;W||(Number.isFinite(E)?Number.isFinite(I)?W=+(Math.abs(I-E)/100).toPrecision(1):W=+(Math.abs(U-E)/100).toPrecision(1):Number.isFinite(I)&&(W=+(Math.abs(I-U)/100).toPrecision(1)));const K=W?by(W)*10:by(U);W=W||K/10;const ie=Math.round(od(Math.log10(1/K),0,2));return{value:G?U+G:U,settings:ni({initialValue:U,step:W,pad:ie,min:E,max:I,suffix:G},F)}},sg=(y,{step:b,initialValue:S})=>{const E=Math.round((y-S)/b);return S+E*b};var og=Object.freeze({__proto__:null,schema:Ay,sanitize:Cy,format:Ey,normalize:ku,sanitizeStep:sg});function Sn(){return Sn=Object.assign?Object.assign.bind():function(y){for(var b=1;b<arguments.length;b++){var S=arguments[b];for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(y[E]=S[E])}return y},Sn.apply(this,arguments)}const lg=(0,R.createContext)({});function Br(){return(0,R.useContext)(lg)}const tf=(0,R.createContext)(null),nf=(0,R.createContext)(null),My=(0,R.createContext)(null);function es(){return(0,R.useContext)(nf)}function Ty(){return(0,R.useContext)(My)}function rD({children:y,store:b}){return React.createElement(nf.Provider,{value:b},y)}const Dy=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function rf(y,b){const[S,E]=y.split(" "),I={};return S!=="none"&&(I.boxShadow=`${b.inset?"inset ":""}0 0 0 $borderWidths${[b.key]} $colors${S!=="default"&&S||b.borderColor}`),E&&(I.backgroundColor=E),I}const qe={$inputStyle:()=>y=>rf(y,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>y=>rf(y,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>y=>rf(y,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>y=>rf(y,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:qt,css:aD,createTheme:ll,globalCss:dg,keyframes:sD}=Sm({prefix:"leva",theme:Dy(),utils:ni(ni({},qe),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:y=>({"&:focus":qe.$focusStyle()(y)}),$focusWithin:y=>({"&:focus-within":qe.$focusStyle()(y)}),$hover:y=>({"&:hover":qe.$hoverStyle()(y)}),$active:y=>({"&:active":qe.$activeStyle()(y)})})}),nk=dg({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function rk(y){const b=Dy();if(!y)return{theme:b,className:""};Object.keys(y).forEach(E=>{Object.assign(b[E],y[E])});const S=ll(b);return{theme:b,className:S.className}}function Gs(y,b){const{theme:S}=(0,R.useContext)(tf);if(!(y in S)||!(b in S[y]))return Vs(an.THEME_ERROR,y,b),"";let E=b;for(;;){let I=S[y][E];if(typeof I=="string"&&I.charAt(0)==="$")E=I.substr(1);else return I}}const Py=qt("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),cg=qt("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${Py}`]:{paddingLeft:0}}),ug=qt(cg,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),Ar=qt("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),ak=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],sk=["onUpdate"];function af(y){let{innerLabel:b,value:S,onUpdate:E,onChange:I,onKeyDown:F,type:U,id:G,inputType:W="text",rows:K=0}=y,ie=Zi(y,ak);const{id:ue,emitOnEditStart:me,emitOnEditEnd:_e,disabled:ke}=Br(),fe=G||ue,q=(0,R.useRef)(null),Me=K>0,Oe=Me?"textarea":"input",tt=(0,R.useCallback)(gt=>jt=>{const mi=jt.currentTarget.value;gt(mi)},[]);R.useEffect(()=>{const gt=q.current,jt=tt(mi=>{E(mi),_e()});return gt==null||gt.addEventListener("blur",jt),()=>gt==null?void 0:gt.removeEventListener("blur",jt)},[tt,E,_e]);const Mt=(0,R.useCallback)(gt=>{gt.key==="Enter"&&tt(E)(gt)},[tt,E]),li=Object.assign({as:Oe},Me?{rows:K}:{},ie);return R.createElement(Ar,{textArea:Me},b&&typeof b=="string"?R.createElement(cg,null,b):b,R.createElement(Py,Sn({levaType:U,ref:q,id:fe,type:W,autoComplete:"off",spellCheck:"false",value:S,onChange:tt(I),onFocus:()=>me(),onKeyPress:Mt,onKeyDown:F,disabled:ke},li)))}function Oy(y){let{onUpdate:b}=y,S=Zi(y,sk);const E=(0,R.useCallback)(F=>b(J3(F)),[b]),I=(0,R.useCallback)(F=>{const U=F.key==="ArrowUp"?1:F.key==="ArrowDown"?-1:0;if(U){F.preventDefault();const G=F.altKey?.1:F.shiftKey?10:1;b(W=>parseFloat(W)+U*G)}},[b]);return R.createElement(af,Sn({},S,{onUpdate:E,onKeyDown:I,type:"number"}))}const ts=qt("div",{}),fr=qt("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),Ci=qt("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${fr}::after`]:{opacity:.6},[`${ts}:hover > & + ${fr}::after`]:{opacity:.6},[`${ts}:hover > & > svg`]:{opacity:1}}),sf=qt("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${ts}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),hg=qt("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${sf} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),of=qt(hg,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),oD=qt("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),Iy=qt("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),lf=qt("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),df=qt("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${lf}`]:{pointerEvents:"auto"}}}}}),Ry=qt("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),zy=qt("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),Ly=qt(Yh,{fill:"$toolTipBackground"});function fg({children:y}){const{className:b}=(0,R.useContext)(tf);return R.createElement(Lr,{className:b},y)}const pg=["align"];function ok(){const{id:y,disable:b,disabled:S}=Br();return R.createElement(R.Fragment,null,R.createElement(Iy,{id:y+"__disable",type:"checkbox",checked:!S,onChange:()=>b(!S)}),R.createElement("label",{htmlFor:y+"__disable"}))}function lk(y){const{id:b,optional:S,hint:E}=Br(),I=y.htmlFor||(b?{htmlFor:b}:null),F=!E&&typeof y.children=="string"?{title:y.children}:null;return R.createElement(R.Fragment,null,S&&R.createElement(ok,null),E!==void 0?R.createElement($3,null,R.createElement(py,{asChild:!0},R.createElement(lf,Sn({},I,y))),R.createElement(my,{side:"top",sideOffset:2},R.createElement(zy,null,E,R.createElement(Ly,null)))):R.createElement(lf,Sn({},I,F,y)))}function Ss(y){let{align:b}=y,S=Zi(y,pg);const{value:E,label:I,key:F,disabled:U}=Br(),{hideCopyButton:G}=Ty(),W=!G&&F!==void 0,[K,ie]=(0,R.useState)(!1),ue=()=>qi(this,null,function*(){try{yield navigator.clipboard.writeText(JSON.stringify({[F]:E!=null?E:""})),ie(!0)}catch(me){Vs(an.CLIPBOARD_ERROR,{[F]:E})}});return R.createElement(oD,{align:b,onPointerLeave:()=>ie(!1)},R.createElement(lk,S),W&&!U&&R.createElement("div",{title:`Click to copy ${typeof I=="string"?I:F} value`},K?R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},R.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),R.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):R.createElement("svg",{onClick:ue,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},R.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),R.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const dd=["toggled"],dk=qt("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function mg(y){let{toggled:b}=y,S=Zi(y,dd);return R.createElement(dk,Sn({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${b?0:-90}deg)`}},S),R.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const ck=["input"];function Ma(y){let{input:b}=y,S=Zi(y,ck);return b?R.createElement(of,S):R.createElement(hg,S)}function uk({value:y,type:b,settings:S,setValue:E}){const[I,F]=(0,R.useState)(K3(b,y,S)),U=(0,R.useRef)(y),G=(0,R.useRef)(S);G.current=S;const W=(0,R.useCallback)(ie=>F(K3(b,ie,G.current)),[b]),K=(0,R.useCallback)(ie=>{try{E(ie)}catch(ue){const{type:me,previousValue:_e}=ue;if(me!=="LEVA_ERROR")throw ue;W(_e)}},[W,E]);return(0,R.useEffect)(()=>{Fn(y,U.current)||W(y),U.current=y},[y,W]),{displayValue:I,onChange:F,onUpdate:K}}function cf(y,b){const{emitOnEditStart:S,emitOnEditEnd:E}=Br();return zm(I=>{I.first&&(document.body.classList.add("leva__panel__dragged"),S==null||S());const F=y(I);return I.last&&(document.body.classList.remove("leva__panel__dragged"),E==null||E()),F},b)}function lD(y){const b=(0,R.useRef)(null),S=(0,R.useRef)(null),E=(0,R.useRef)(!1);return(0,R.useEffect)(()=>{const I=ag(()=>{b.current.width=b.current.offsetWidth*window.devicePixelRatio,b.current.height=b.current.offsetHeight*window.devicePixelRatio,y(b.current,S.current)},250);return window.addEventListener("resize",I),E.current||(I(),E.current=!0),()=>window.removeEventListener("resize",I)},[y]),(0,R.useEffect)(()=>{S.current=b.current.getContext("2d")},[]),[b,S]}function Su(){const y=(0,R.useRef)(null),b=(0,R.useRef)({x:0,y:0}),S=(0,R.useCallback)(E=>{Object.assign(b.current,E),y.current&&(y.current.style.transform=`translate3d(${b.current.x}px, ${b.current.y}px, 0)`)},[]);return[y,S]}const gg=["__refCount"],vg=(y,b)=>{if(!y[b])return null;const S=y[b];return Zi(S,gg)};function By(y){const b=es(),[S,E]=(0,R.useState)(vg(b.getData(),y)),I=(0,R.useCallback)(K=>b.setValueAtPath(y,K,!0),[y,b]),F=(0,R.useCallback)(K=>b.setSettingsAtPath(y,K),[y,b]),U=(0,R.useCallback)(K=>b.disableInputAtPath(y,K),[y,b]),G=(0,R.useCallback)(()=>b.emitOnEditStart(y),[y,b]),W=(0,R.useCallback)(()=>b.emitOnEditEnd(y),[y,b]);return(0,R.useEffect)(()=>{E(vg(b.getData(),y));const K=b.useStore.subscribe(ie=>vg(ie.data,y),E,{equalityFn:Ii});return()=>K()},[b,y]),[S,{set:I,setSettings:F,disable:U,storeId:b.storeId,emitOnEditStart:G,emitOnEditEnd:W}]}const hk=qt("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),yg=qt("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),uf=qt("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),dl=qt("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),pr=qt("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function Fy({value:y,min:b,max:S,onDrag:E,step:I,initialValue:F}){const U=(0,R.useRef)(null),G=(0,R.useRef)(null),W=(0,R.useRef)(0),K=Gs("sizes","scrubberWidth"),ie=cf(({event:me,first:_e,xy:[ke],movement:[fe],memo:q})=>{if(_e){const{width:Oe,left:tt}=U.current.getBoundingClientRect();W.current=Oe-parseFloat(K),q=(me==null?void 0:me.target)===G.current?y:Kh((ke-tt)/Oe,b,S)}const Me=q+Kh(fe/W.current,0,S-b);return E(sg(Me,{step:I,initialValue:F})),q}),ue=Xh(y,b,S);return R.createElement(dl,Sn({ref:U},ie()),R.createElement(yg,null,R.createElement(pr,{style:{left:0,right:`${(1-ue)*100}%`}})),R.createElement(uf,{ref:G,style:{left:`calc(${ue} * (100% - ${K}))`}}))}const ic=R.memo(({label:y,onUpdate:b,step:S,innerLabelTrim:E})=>{const[I,F]=(0,R.useState)(!1),U=cf(({active:G,delta:[W],event:K,memo:ie=0})=>(F(G),ie+=W/2,Math.abs(ie)>=1&&(b(ue=>parseFloat(ue)+Math.floor(ie)*S*Jh(K)),ie=0),ie));return R.createElement(ug,Sn({dragging:I,title:y.length>1?y:""},U()),y.slice(0,E))});function hf({label:y,id:b,displayValue:S,onUpdate:E,onChange:I,settings:F,innerLabelTrim:U=1}){const G=U>0&&R.createElement(ic,{label:y,step:F.step,onUpdate:E,innerLabelTrim:U});return R.createElement(Oy,{id:b,value:String(S),onUpdate:E,onChange:I,innerLabel:G})}function Ny(){const y=Br(),{label:b,value:S,onUpdate:E,settings:I,id:F}=y,{min:U,max:G}=I,W=G!==1/0&&U!==-1/0;return R.createElement(Ma,{input:!0},R.createElement(Ss,null,b),R.createElement(hk,{hasRange:W},W&&R.createElement(Fy,Sn({value:parseFloat(S),onDrag:E},I)),R.createElement(hf,Sn({},y,{id:F,label:"value",innerLabelTrim:W?0:1}))))}const{sanitizeStep:jy}=og,Uy=Zi(og,["sanitizeStep"]);var Vy=ni({component:Ny},Uy),gk=Object.freeze({__proto__:null,schema:(y,b)=>jn().schema({options:jn().passesAnyOf(jn().object(),jn().array())}).test(b),sanitize:(y,{values:b})=>{if(b.indexOf(y)<0)throw Error("Selected value doesn't match Select options");return y},format:(y,{values:b})=>b.indexOf(y),normalize:y=>{let{value:b,options:S}=y,E,I;return Array.isArray(S)?(I=S,E=S.map(F=>String(F))):(I=Object.values(S),E=Object.keys(S)),"value"in y?I.includes(b)||(E.unshift(String(b)),I.unshift(b)):b=I[0],Object.values(S).includes(b)||(S[String(b)]=b),{value:b,settings:{keys:E,values:I}}}});const Hy=qt("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),bg=qt("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),vk=qt("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${bg}:focus + &`]:{$focusStyle:""},[`${bg}:hover + &`]:{$hoverStyle:""}});function wg({displayValue:y,value:b,onUpdate:S,id:E,settings:I,disabled:F}){const{keys:U,values:G}=I,W=(0,R.useRef)();return b===G[y]&&(W.current=U[y]),R.createElement(Hy,null,R.createElement(bg,{id:E,value:y,onChange:K=>S(G[Number(K.currentTarget.value)]),disabled:F},U.map((K,ie)=>R.createElement("option",{key:K,value:ie},K))),R.createElement(vk,null,W.current),R.createElement(mg,{toggled:!0}))}function yk(){const{label:y,value:b,displayValue:S,onUpdate:E,id:I,disabled:F,settings:U}=Br();return R.createElement(Ma,{input:!0},R.createElement(Ss,null,y),R.createElement(wg,{id:I,value:b,displayValue:S,onUpdate:E,settings:U,disabled:F}))}var bk=ni({component:yk},gk),Gy=Object.freeze({__proto__:null,schema:y=>jn().string().test(y),sanitize:y=>{if(typeof y!="string")throw Error("Invalid string");return y},normalize:({value:y,editable:b=!0,rows:S=!1})=>({value:y,settings:{editable:b,rows:typeof S=="number"?S:S?5:0}})});const ff=["displayValue","onUpdate","onChange","editable"],xg=qt("div",{whiteSpace:"pre-wrap"});function _g(y){let{displayValue:b,onUpdate:S,onChange:E,editable:I=!0}=y,F=Zi(y,ff);return I?R.createElement(af,Sn({value:b,onUpdate:S,onChange:E},F)):R.createElement(xg,null,b)}function Wy(){const{label:y,settings:b,displayValue:S,onUpdate:E,onChange:I}=Br();return R.createElement(Ma,{input:!0},R.createElement(Ss,null,y),R.createElement(_g,Sn({displayValue:S,onUpdate:E,onChange:I},b)))}var qy=ni({component:Wy},Gy),wk=Object.freeze({__proto__:null,schema:y=>jn().boolean().test(y),sanitize:y=>{if(typeof y!="boolean")throw Error("Invalid boolean");return y}});const Zy=qt("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function xk({value:y,onUpdate:b,id:S,disabled:E}){return R.createElement(Zy,null,R.createElement("input",{id:S,type:"checkbox",checked:y,onChange:I=>b(I.currentTarget.checked),disabled:E}),R.createElement("label",{htmlFor:S},R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},R.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function _k(){const{label:y,value:b,onUpdate:S,disabled:E,id:I}=Br();return R.createElement(Ma,{input:!0},R.createElement(Ss,null,y),R.createElement(xk,{value:b,onUpdate:S,id:I,disabled:E}))}var Yy=ni({component:_k},wk);const kk=["locked"];function Sk({value:y,id:b,valueKey:S,settings:E,onUpdate:I,innerLabelTrim:F}){const U=(0,R.useRef)(y[S]);U.current=y[S];const G=(0,R.useCallback)(K=>I({[S]:ld({type:"NUMBER",value:U.current,settings:E},K)}),[I,E,S]),W=uk({type:"NUMBER",value:y[S],settings:E,setValue:G});return R.createElement(hf,{id:b,label:S,value:y[S],displayValue:W.displayValue,onUpdate:W.onUpdate,onChange:W.onChange,settings:E,innerLabelTrim:F})}const Xy=qt("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function mf(y){let{locked:b}=y,S=Zi(y,kk);return R.createElement("svg",Sn({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},S),b?R.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):R.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function gf({value:y,onUpdate:b,settings:S,innerLabelTrim:E}){const{id:I,setSettings:F}=Br(),{lock:U,locked:G}=S;return R.createElement(Xy,{withLock:U},U&&R.createElement(mf,{locked:G,onClick:()=>F({locked:!G})}),Object.keys(y).map((W,K)=>R.createElement(Sk,{id:K===0?I:`${I}.${W}`,key:W,valueKey:W,value:y,settings:S[W],onUpdate:b,innerLabelTrim:E})))}const Ky=(y,b)=>{const S={};let E=0,I=1/0;Object.entries(y).forEach(([F,U])=>{S[F]=ku(ni({value:U},b[F])).settings,E=Math.max(E,S[F].step),I=Math.min(I,S[F].pad)});for(let F in S){const{step:U,min:G,max:W}=b[F]||{};!isFinite(U)&&(!isFinite(G)||!isFinite(W))&&(S[F].step=E,S[F].pad=I)}return S},Cu=["lock"],Qy=["value"];function Ak(y){const b=jn().array().length(y).every.number(),S=E=>{if(!E||typeof E!="object")return!1;const I=Object.values(E);return I.length===y&&I.every(F=>isFinite(F))};return E=>b.test(E)||S(E)}function Ck(y){return Array.isArray(y)?"array":"object"}function Eu(y,b,S){return Ck(y)===b?y:b==="array"?Object.values(y):_y(y,S)}const Jy=(y,b,S)=>{const E=Eu(y,"object",b.keys);for(let U in E)E[U]=Cy(E[U],b[U]);const I=Object.keys(E);let F={};if(I.length===b.keys.length)F=E;else{const U=Eu(S,"object",b.keys);if(I.length===1&&b.locked){const G=I[0],W=E[G],K=U[G],ie=K!==0?W/K:1;for(let ue in U)ue===G?F[G]=W:F[ue]=U[ue]*ie}else F=ni(ni({},U),E)}return Eu(F,b.format,b.keys)},Ek=(y,b)=>Eu(y,"object",b.keys),Mk=y=>!!y&&("step"in y||"min"in y||"max"in y);function Tk(y,b,S=[]){const{lock:E=!1}=b,I=Zi(b,Cu),F=Array.isArray(y)?"array":"object",U=F==="object"?Object.keys(y):S,G=Eu(y,"object",U),W=Mk(I)?U.reduce((ie,ue)=>Object.assign(ie,{[ue]:I}),{}):I,K=Ky(G,W);return{value:F==="array"?y:G,settings:ni(ni({},K),{},{format:F,keys:U,lock:E,locked:!1})}}function eb(y){return{schema:Ak(y.length),normalize:b=>{let{value:S}=b,E=Zi(b,Qy);return Tk(S,E,y)},format:(b,S)=>Ek(b,S),sanitize:(b,S,E)=>Jy(b,S,E)}}var Dk={grad:.9,turn:360,rad:360/(2*Math.PI)},Ws=function(y){return typeof y=="string"?y.length>0:typeof y=="number"},mr=function(y,b,S){return b===void 0&&(b=0),S===void 0&&(S=Math.pow(10,b)),Math.round(S*y)/S+0},is=function(y,b,S){return b===void 0&&(b=0),S===void 0&&(S=1),y>S?S:y>b?y:b},tb=function(y){return(y=isFinite(y)?y%360:0)>0?y:y+360},kg=function(y){return{r:is(y.r,0,255),g:is(y.g,0,255),b:is(y.b,0,255),a:is(y.a)}},vf=function(y){return{r:mr(y.r),g:mr(y.g),b:mr(y.b),a:mr(y.a,3)}},ib=/^#([0-9a-f]{3,8})$/i,Mu=function(y){var b=y.toString(16);return b.length<2?"0"+b:b},nb=function(y){var b=y.r,S=y.g,E=y.b,I=y.a,F=Math.max(b,S,E),U=F-Math.min(b,S,E),G=U?F===b?(S-E)/U:F===S?2+(E-b)/U:4+(b-S)/U:0;return{h:60*(G<0?G+6:G),s:F?U/F*100:0,v:F/255*100,a:I}},Pk=function(y){var b=y.h,S=y.s,E=y.v,I=y.a;b=b/360*6,S/=100,E/=100;var F=Math.floor(b),U=E*(1-S),G=E*(1-(b-F)*S),W=E*(1-(1-b+F)*S),K=F%6;return{r:255*[E,G,U,U,W,E][K],g:255*[W,E,E,G,U,U][K],b:255*[U,U,W,E,E,G][K],a:I}},rb=function(y){return{h:tb(y.h),s:is(y.s,0,100),l:is(y.l,0,100),a:is(y.a)}},Sg=function(y){return{h:mr(y.h),s:mr(y.s),l:mr(y.l),a:mr(y.a,3)}},ab=function(y){return Pk((S=(b=y).s,{h:b.h,s:(S*=((E=b.l)<50?E:100-E)/100)>0?2*S/(E+S)*100:0,v:E+S,a:b.a}));var b,S,E},Tu=function(y){return{h:(b=nb(y)).h,s:(I=(200-(S=b.s))*(E=b.v)/100)>0&&I<200?S*E/100/(I<=100?I:200-I)*100:0,l:I/2,a:b.a};var b,S,E,I},Ok=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ik=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Rk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,uD=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,sb={string:[[function(y){var b=ib.exec(y);return b?(y=b[1]).length<=4?{r:parseInt(y[0]+y[0],16),g:parseInt(y[1]+y[1],16),b:parseInt(y[2]+y[2],16),a:y.length===4?mr(parseInt(y[3]+y[3],16)/255,2):1}:y.length===6||y.length===8?{r:parseInt(y.substr(0,2),16),g:parseInt(y.substr(2,2),16),b:parseInt(y.substr(4,2),16),a:y.length===8?mr(parseInt(y.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(y){var b=Rk.exec(y)||uD.exec(y);return b?b[2]!==b[4]||b[4]!==b[6]?null:kg({r:Number(b[1])/(b[2]?100/255:1),g:Number(b[3])/(b[4]?100/255:1),b:Number(b[5])/(b[6]?100/255:1),a:b[7]===void 0?1:Number(b[7])/(b[8]?100:1)}):null},"rgb"],[function(y){var b=Ok.exec(y)||Ik.exec(y);if(!b)return null;var S,E,I=rb({h:(S=b[1],E=b[2],E===void 0&&(E="deg"),Number(S)*(Dk[E]||1)),s:Number(b[3]),l:Number(b[4]),a:b[5]===void 0?1:Number(b[5])/(b[6]?100:1)});return ab(I)},"hsl"]],object:[[function(y){var b=y.r,S=y.g,E=y.b,I=y.a,F=I===void 0?1:I;return Ws(b)&&Ws(S)&&Ws(E)?kg({r:Number(b),g:Number(S),b:Number(E),a:Number(F)}):null},"rgb"],[function(y){var b=y.h,S=y.s,E=y.l,I=y.a,F=I===void 0?1:I;if(!Ws(b)||!Ws(S)||!Ws(E))return null;var U=rb({h:Number(b),s:Number(S),l:Number(E),a:Number(F)});return ab(U)},"hsl"],[function(y){var b=y.h,S=y.s,E=y.v,I=y.a,F=I===void 0?1:I;if(!Ws(b)||!Ws(S)||!Ws(E))return null;var U=function(G){return{h:tb(G.h),s:is(G.s,0,100),v:is(G.v,0,100),a:is(G.a)}}({h:Number(b),s:Number(S),v:Number(E),a:Number(F)});return Pk(U)},"hsv"]]},ob=function(y,b){for(var S=0;S<b.length;S++){var E=b[S][0](y);if(E)return[E,b[S][1]]}return[null,void 0]},lb=function(y){return typeof y=="string"?ob(y.trim(),sb.string):typeof y=="object"&&y!==null?ob(y,sb.object):[null,void 0]},zk=function(y){return lb(y)[1]},nc=function(y,b){var S=Tu(y);return{h:S.h,s:is(S.s+100*b,0,100),l:S.l,a:S.a}},Ag=function(y){return(299*y.r+587*y.g+114*y.b)/1e3/255},yf=function(y,b){var S=Tu(y);return{h:S.h,s:S.s,l:is(S.l+100*b,0,100),a:S.a}},Du=function(){function y(b){this.parsed=lb(b)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return y.prototype.isValid=function(){return this.parsed!==null},y.prototype.brightness=function(){return mr(Ag(this.rgba),2)},y.prototype.isDark=function(){return Ag(this.rgba)<.5},y.prototype.isLight=function(){return Ag(this.rgba)>=.5},y.prototype.toHex=function(){return b=vf(this.rgba),S=b.r,E=b.g,I=b.b,U=(F=b.a)<1?Mu(mr(255*F)):"","#"+Mu(S)+Mu(E)+Mu(I)+U;var b,S,E,I,F,U},y.prototype.toRgb=function(){return vf(this.rgba)},y.prototype.toRgbString=function(){return b=vf(this.rgba),S=b.r,E=b.g,I=b.b,(F=b.a)<1?"rgba("+S+", "+E+", "+I+", "+F+")":"rgb("+S+", "+E+", "+I+")";var b,S,E,I,F},y.prototype.toHsl=function(){return Sg(Tu(this.rgba))},y.prototype.toHslString=function(){return b=Sg(Tu(this.rgba)),S=b.h,E=b.s,I=b.l,(F=b.a)<1?"hsla("+S+", "+E+"%, "+I+"%, "+F+")":"hsl("+S+", "+E+"%, "+I+"%)";var b,S,E,I,F},y.prototype.toHsv=function(){return b=nb(this.rgba),{h:mr(b.h),s:mr(b.s),v:mr(b.v),a:mr(b.a,3)};var b},y.prototype.invert=function(){return Qr({r:255-(b=this.rgba).r,g:255-b.g,b:255-b.b,a:b.a});var b},y.prototype.saturate=function(b){return b===void 0&&(b=.1),Qr(nc(this.rgba,b))},y.prototype.desaturate=function(b){return b===void 0&&(b=.1),Qr(nc(this.rgba,-b))},y.prototype.grayscale=function(){return Qr(nc(this.rgba,-1))},y.prototype.lighten=function(b){return b===void 0&&(b=.1),Qr(yf(this.rgba,b))},y.prototype.darken=function(b){return b===void 0&&(b=.1),Qr(yf(this.rgba,-b))},y.prototype.rotate=function(b){return b===void 0&&(b=15),this.hue(this.hue()+b)},y.prototype.alpha=function(b){return typeof b=="number"?Qr({r:(S=this.rgba).r,g:S.g,b:S.b,a:b}):mr(this.rgba.a,3);var S},y.prototype.hue=function(b){var S=Tu(this.rgba);return typeof b=="number"?Qr({h:b,s:S.s,l:S.l,a:S.a}):mr(S.h)},y.prototype.isEqual=function(b){return this.toHex()===Qr(b).toHex()},y}(),Qr=function(y){return y instanceof Du?y:new Du(y)},db=[],Lk=function(y){y.forEach(function(b){db.indexOf(b)<0&&(b(Du,sb),db.push(b))})},hD=function(){return new Du({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};function Bk(y,b){var S={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},E={};for(var I in S)E[S[I]]=I;var F={};y.prototype.toName=function(U){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var G,W,K=E[this.toHex()];if(K)return K;if(U!=null&&U.closest){var ie=this.toRgb(),ue=1/0,me="black";if(!F.length)for(var _e in S)F[_e]=new y(S[_e]).toRgb();for(var ke in S){var fe=(G=ie,W=F[ke],Math.pow(G.r-W.r,2)+Math.pow(G.g-W.g,2)+Math.pow(G.b-W.b,2));fe<ue&&(ue=fe,me=ke)}return me}},b.string.push([function(U){var G=U.toLowerCase(),W=G==="transparent"?"#0000":S[G];return W?new y(W).toRgb():null},"name"])}function Vn(){return(Vn=Object.assign||function(y){for(var b=1;b<arguments.length;b++){var S=arguments[b];for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(y[E]=S[E])}return y}).apply(this,arguments)}function rc(y,b){if(y==null)return{};var S,E,I={},F=Object.keys(y);for(E=0;E<F.length;E++)b.indexOf(S=F[E])>=0||(I[S]=y[S]);return I}function ac(y){var b=(0,R.useRef)(y),S=(0,R.useRef)(function(E){b.current&&b.current(E)});return b.current=y,S.current}var sc=function(y,b,S){return b===void 0&&(b=0),S===void 0&&(S=1),y>S?S:y<b?b:y},Pu=function(y){return"touches"in y},Cg=function(y){return y&&y.ownerDocument.defaultView||self},bf=function(y,b,S){var E=y.getBoundingClientRect(),I=Pu(b)?function(F,U){for(var G=0;G<F.length;G++)if(F[G].identifier===U)return F[G];return F[0]}(b.touches,S):b;return{left:sc((I.pageX-(E.left+Cg(y).pageXOffset))/E.width),top:sc((I.pageY-(E.top+Cg(y).pageYOffset))/E.height)}},Eg=function(y){!Pu(y)&&y.preventDefault()},wf=R.memo(function(y){var b=y.onMove,S=y.onKey,E=rc(y,["onMove","onKey"]),I=(0,R.useRef)(null),F=ac(b),U=ac(S),G=(0,R.useRef)(null),W=(0,R.useRef)(!1),K=(0,R.useMemo)(function(){var _e=function(q){Eg(q),(Pu(q)?q.touches.length>0:q.buttons>0)&&I.current?F(bf(I.current,q,G.current)):fe(!1)},ke=function(){return fe(!1)};function fe(q){var Me=W.current,Oe=Cg(I.current),tt=q?Oe.addEventListener:Oe.removeEventListener;tt(Me?"touchmove":"mousemove",_e),tt(Me?"touchend":"mouseup",ke)}return[function(q){var Me=q.nativeEvent,Oe=I.current;if(Oe&&(Eg(Me),!function(Mt,li){return li&&!Pu(Mt)}(Me,W.current)&&Oe)){if(Pu(Me)){W.current=!0;var tt=Me.changedTouches||[];tt.length&&(G.current=tt[0].identifier)}Oe.focus(),F(bf(Oe,Me,G.current)),fe(!0)}},function(q){var Me=q.which||q.keyCode;Me<37||Me>40||(q.preventDefault(),U({left:Me===39?.05:Me===37?-.05:0,top:Me===40?.05:Me===38?-.05:0}))},fe]},[U,F]),ie=K[0],ue=K[1],me=K[2];return(0,R.useEffect)(function(){return me},[me]),R.createElement("div",Vn({},E,{onTouchStart:ie,onMouseDown:ie,className:"react-colorful__interactive",ref:I,onKeyDown:ue,tabIndex:0,role:"slider"}))}),oc=function(y){return y.filter(Boolean).join(" ")},xf=function(y){var b=y.color,S=y.left,E=y.top,I=E===void 0?.5:E,F=oc(["react-colorful__pointer",y.className]);return R.createElement("div",{className:F,style:{top:100*I+"%",left:100*S+"%"}},R.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:b}}))},In=function(y,b,S){return b===void 0&&(b=0),S===void 0&&(S=Math.pow(10,b)),Math.round(S*y)/S},Fk={grad:.9,turn:360,rad:360/(2*Math.PI)},cb=function(y){return Iu(Mg(y))},Mg=function(y){return y[0]==="#"&&(y=y.substring(1)),y.length<6?{r:parseInt(y[0]+y[0],16),g:parseInt(y[1]+y[1],16),b:parseInt(y[2]+y[2],16),a:y.length===4?In(parseInt(y[3]+y[3],16)/255,2):1}:{r:parseInt(y.substring(0,2),16),g:parseInt(y.substring(2,4),16),b:parseInt(y.substring(4,6),16),a:y.length===8?In(parseInt(y.substring(6,8),16)/255,2):1}},ub=function(y,b){return b===void 0&&(b="deg"),Number(y)*(Fk[b]||1)},hb=function(y){var b=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(y);return b?Tg({h:ub(b[1],b[2]),s:Number(b[3]),l:Number(b[4]),a:b[5]===void 0?1:Number(b[5])/(b[6]?100:1)}):{h:0,s:0,v:0,a:1}},fb=hb,Tg=function(y){var b=y.s,S=y.l;return{h:y.h,s:(b*=(S<50?S:100-S)/100)>0?2*b/(S+b)*100:0,v:S+b,a:y.a}},pb=function(y){return vb(dc(y))},lc=function(y){var b=y.s,S=y.v,E=y.a,I=(200-b)*S/100;return{h:In(y.h),s:In(I>0&&I<200?b*S/100/(I<=100?I:200-I)*100:0),l:In(I/2),a:In(E,2)}},_f=function(y){var b=lc(y);return"hsl("+b.h+", "+b.s+"%, "+b.l+"%)"},kf=function(y){var b=lc(y);return"hsla("+b.h+", "+b.s+"%, "+b.l+"%, "+b.a+")"},dc=function(y){var b=y.h,S=y.s,E=y.v,I=y.a;b=b/360*6,S/=100,E/=100;var F=Math.floor(b),U=E*(1-S),G=E*(1-(b-F)*S),W=E*(1-(1-b+F)*S),K=F%6;return{r:In(255*[E,G,U,U,W,E][K]),g:In(255*[W,E,E,G,U,U][K]),b:In(255*[U,U,W,E,E,G][K]),a:In(I,2)}},mb=function(y){var b=/hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(y);return b?cc({h:ub(b[1],b[2]),s:Number(b[3]),v:Number(b[4]),a:b[5]===void 0?1:Number(b[5])/(b[6]?100:1)}):{h:0,s:0,v:0,a:1}},Nk=mb,Dg=function(y){var b=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(y);return b?Iu({r:Number(b[1])/(b[2]?100/255:1),g:Number(b[3])/(b[4]?100/255:1),b:Number(b[5])/(b[6]?100/255:1),a:b[7]===void 0?1:Number(b[7])/(b[8]?100:1)}):{h:0,s:0,v:0,a:1}},gb=Dg,Ou=function(y){var b=y.toString(16);return b.length<2?"0"+b:b},vb=function(y){var b=y.r,S=y.g,E=y.b,I=y.a,F=I<1?Ou(In(255*I)):"";return"#"+Ou(b)+Ou(S)+Ou(E)+F},Iu=function(y){var b=y.r,S=y.g,E=y.b,I=y.a,F=Math.max(b,S,E),U=F-Math.min(b,S,E),G=U?F===b?(S-E)/U:F===S?2+(E-b)/U:4+(b-S)/U:0;return{h:In(60*(G<0?G+6:G)),s:In(F?U/F*100:0),v:In(F/255*100),a:I}},cc=function(y){return{h:In(y.h),s:In(y.s),v:In(y.v),a:In(y.a,2)}},Pg=R.memo(function(y){var b=y.hue,S=y.onChange,E=oc(["react-colorful__hue",y.className]);return R.createElement("div",{className:E},R.createElement(wf,{onMove:function(I){S({h:360*I.left})},onKey:function(I){S({h:sc(b+360*I.left,0,360)})},"aria-label":"Hue","aria-valuenow":In(b),"aria-valuemax":"360","aria-valuemin":"0"},R.createElement(xf,{className:"react-colorful__hue-pointer",left:b/360,color:_f({h:b,s:100,v:100,a:1})})))}),Og=R.memo(function(y){var b=y.hsva,S=y.onChange,E={backgroundColor:_f({h:b.h,s:100,v:100,a:1})};return R.createElement("div",{className:"react-colorful__saturation",style:E},R.createElement(wf,{onMove:function(I){S({s:100*I.left,v:100-100*I.top})},onKey:function(I){S({s:sc(b.s+100*I.left,0,100),v:sc(b.v-100*I.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+In(b.s)+"%, Brightness "+In(b.v)+"%"},R.createElement(xf,{className:"react-colorful__saturation-pointer",top:1-b.v/100,left:b.s/100,color:_f(b)})))}),Ao=function(y,b){if(y===b)return!0;for(var S in y)if(y[S]!==b[S])return!1;return!0},cd=function(y,b){return y.replace(/\s/g,"")===b.replace(/\s/g,"")},Ig=function(y,b){return y.toLowerCase()===b.toLowerCase()||Ao(Mg(y),Mg(b))};function Rg(y,b,S){var E=ac(S),I=(0,R.useState)(function(){return y.toHsva(b)}),F=I[0],U=I[1],G=(0,R.useRef)({color:b,hsva:F});(0,R.useEffect)(function(){if(!y.equal(b,G.current.color)){var K=y.toHsva(b);G.current={hsva:K,color:b},U(K)}},[b,y]),(0,R.useEffect)(function(){var K;Ao(F,G.current.hsva)||y.equal(K=y.fromHsva(F),G.current.color)||(G.current={hsva:F,color:K},E(K))},[F,y,E]);var W=(0,R.useCallback)(function(K){U(function(ie){return Object.assign({},ie,K)})},[]);return[F,W]}var zg,jk=typeof window!="undefined"?R.useLayoutEffect:R.useEffect,Uk=function(){return zg||de.nc},Lg=function(y){zg=y},yb=new Map,bb=function(y){jk(function(){var b=y.current?y.current.ownerDocument:document;if(b!==void 0&&!yb.has(b)){var S=b.createElement("style");S.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,yb.set(b,S);var E=Uk();E&&S.setAttribute("nonce",E),b.head.appendChild(S)}},[])},cl=function(y){var b=y.className,S=y.colorModel,E=y.color,I=E===void 0?S.defaultColor:E,F=y.onChange,U=rc(y,["className","colorModel","color","onChange"]),G=(0,R.useRef)(null);bb(G);var W=Rg(S,I,F),K=W[0],ie=W[1],ue=oc(["react-colorful",b]);return R.createElement("div",Vn({},U,{ref:G,className:ue}),R.createElement(Og,{hsva:K,onChange:ie}),R.createElement(Pg,{hue:K.h,onChange:ie,className:"react-colorful__last-control"}))},wb={defaultColor:"000",toHsva:cb,fromHsva:function(y){return pb({h:y.h,s:y.s,v:y.v,a:1})},equal:Ig},fD=function(y){return e.createElement(cl,Vn({},y,{colorModel:wb}))},Vk=function(y){var b=y.className,S=y.hsva,E=y.onChange,I={backgroundImage:"linear-gradient(90deg, "+kf(Object.assign({},S,{a:0}))+", "+kf(Object.assign({},S,{a:1}))+")"},F=oc(["react-colorful__alpha",b]),U=In(100*S.a);return R.createElement("div",{className:F},R.createElement("div",{className:"react-colorful__alpha-gradient",style:I}),R.createElement(wf,{onMove:function(G){E({a:G.left})},onKey:function(G){E({a:sc(S.a+G.left)})},"aria-label":"Alpha","aria-valuetext":U+"%","aria-valuenow":U,"aria-valuemin":"0","aria-valuemax":"100"},R.createElement(xf,{className:"react-colorful__alpha-pointer",left:S.a,color:kf(S)})))},ul=function(y){var b=y.className,S=y.colorModel,E=y.color,I=E===void 0?S.defaultColor:E,F=y.onChange,U=rc(y,["className","colorModel","color","onChange"]),G=(0,R.useRef)(null);bb(G);var W=Rg(S,I,F),K=W[0],ie=W[1],ue=oc(["react-colorful",b]);return R.createElement("div",Vn({},U,{ref:G,className:ue}),R.createElement(Og,{hsva:K,onChange:ie}),R.createElement(Pg,{hue:K.h,onChange:ie}),R.createElement(Vk,{hsva:K,onChange:ie,className:"react-colorful__last-control"}))},Hk={defaultColor:"0001",toHsva:cb,fromHsva:pb,equal:Ig},Gk=function(y){return e.createElement(ul,Vn({},y,{colorModel:Hk}))},xb={defaultColor:{h:0,s:0,l:0,a:1},toHsva:Tg,fromHsva:lc,equal:Ao},Wk=function(y){return e.createElement(ul,Vn({},y,{colorModel:xb}))},qk={defaultColor:"hsla(0, 0%, 0%, 1)",toHsva:hb,fromHsva:kf,equal:cd},pD=function(y){return e.createElement(ul,Vn({},y,{colorModel:qk}))},$k={defaultColor:{h:0,s:0,l:0},toHsva:function(y){return Tg({h:y.h,s:y.s,l:y.l,a:1})},fromHsva:function(y){return{h:(b=lc(y)).h,s:b.s,l:b.l};var b},equal:Ao},_b=function(y){return e.createElement(cl,Vn({},y,{colorModel:$k}))},kb={defaultColor:"hsl(0, 0%, 0%)",toHsva:fb,fromHsva:_f,equal:cd},Zk=function(y){return e.createElement(cl,Vn({},y,{colorModel:kb}))},Yk={defaultColor:{h:0,s:0,v:0,a:1},toHsva:function(y){return y},fromHsva:cc,equal:Ao},mD=function(y){return e.createElement(ul,Vn({},y,{colorModel:Yk}))},Xk={defaultColor:"hsva(0, 0%, 0%, 1)",toHsva:mb,fromHsva:function(y){var b=cc(y);return"hsva("+b.h+", "+b.s+"%, "+b.v+"%, "+b.a+")"},equal:cd},Bg=function(y){return e.createElement(ul,Vn({},y,{colorModel:Xk}))},Kk={defaultColor:{h:0,s:0,v:0},toHsva:function(y){return{h:y.h,s:y.s,v:y.v,a:1}},fromHsva:function(y){var b=cc(y);return{h:b.h,s:b.s,v:b.v}},equal:Ao},Qk=function(y){return e.createElement(cl,Vn({},y,{colorModel:Kk}))},Sb={defaultColor:"hsv(0, 0%, 0%)",toHsva:Nk,fromHsva:function(y){var b=cc(y);return"hsv("+b.h+", "+b.s+"%, "+b.v+"%)"},equal:cd},Jr=function(y){return e.createElement(cl,Vn({},y,{colorModel:Sb}))},Jk={defaultColor:{r:0,g:0,b:0,a:1},toHsva:Iu,fromHsva:dc,equal:Ao},eS=function(y){return R.createElement(ul,Vn({},y,{colorModel:Jk}))},Ab={defaultColor:"rgba(0, 0, 0, 1)",toHsva:Dg,fromHsva:function(y){var b=dc(y);return"rgba("+b.r+", "+b.g+", "+b.b+", "+b.a+")"},equal:cd},gD=function(y){return e.createElement(ul,Vn({},y,{colorModel:Ab}))},tS={defaultColor:{r:0,g:0,b:0},toHsva:function(y){return Iu({r:y.r,g:y.g,b:y.b,a:1})},fromHsva:function(y){return{r:(b=dc(y)).r,g:b.g,b:b.b};var b},equal:Ao},iS=function(y){return R.createElement(cl,Vn({},y,{colorModel:tS}))},nS={defaultColor:"rgb(0, 0, 0)",toHsva:gb,fromHsva:function(y){var b=dc(y);return"rgb("+b.r+", "+b.g+", "+b.b+")"},equal:cd},vD=function(y){return e.createElement(cl,Vn({},y,{colorModel:nS}))},Cb=/^#?([0-9A-F]{3,8})$/i,Eb=function(y){var b=y.color,S=b===void 0?"":b,E=y.onChange,I=y.onBlur,F=y.escape,U=y.validate,G=y.format,W=y.process,K=rc(y,["color","onChange","onBlur","escape","validate","format","process"]),ie=o(function(){return F(S)}),ue=ie[0],me=ie[1],_e=ac(E),ke=ac(I),fe=a(function(Me){var Oe=F(Me.target.value);me(Oe),U(Oe)&&_e(W?W(Oe):Oe)},[F,W,U,_e]),q=a(function(Me){U(Me.target.value)||me(F(S)),ke(Me)},[S,F,U,ke]);return n(function(){me(F(S))},[S,F]),e.createElement("input",Vn({},K,{value:G?G(ue):ue,spellCheck:"false",onChange:fe,onBlur:q}))},Fg=function(y){return"#"+y},yD=function(y){var b=y.prefixed,S=y.alpha,E=rc(y,["prefixed","alpha"]),I=a(function(U){return U.replace(/([^0-9A-F]+)/gi,"").substring(0,S?8:6)},[S]),F=a(function(U){return function(G,W){var K=Cb.exec(G),ie=K?K[1].length:0;return ie===3||ie===6||!!W&&ie===4||!!W&&ie===8}(U,S)},[S]);return e.createElement(Eb,Vn({},E,{escape:I,format:b?Fg:void 0,process:Fg,validate:F}))},rS=de(40507),pn=de.n(rS),Ta=de(99938),aS=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Ru(y,b){var S=sS(y);if(typeof S.path!="string"){var E=y.webkitRelativePath;Object.defineProperty(S,"path",{value:typeof b=="string"?b:typeof E=="string"&&E.length>0?E:y.name,writable:!1,configurable:!1,enumerable:!0})}return S}function sS(y){var b=y.name,S=b&&b.lastIndexOf(".")!==-1;if(S&&!y.type){var E=b.split(".").pop().toLowerCase(),I=aS.get(E);I&&Object.defineProperty(y,"type",{value:I,writable:!1,configurable:!1,enumerable:!0})}return y}var oS=[".DS_Store","Thumbs.db"];function Ng(y){return(0,Ta.mG)(this,void 0,void 0,function(){return(0,Ta.Jh)(this,function(b){return Sf(y)&&lS(y)?[2,hS(y.dataTransfer,y.type)]:dS(y)?[2,cS(y)]:Array.isArray(y)&&y.every(function(S){return"getFile"in S&&typeof S.getFile=="function"})?[2,uS(y)]:[2,[]]})})}function lS(y){return Sf(y.dataTransfer)}function dS(y){return Sf(y)&&Sf(y.target)}function Sf(y){return typeof y=="object"&&y!==null}function cS(y){return jg(y.target.files).map(function(b){return Ru(b)})}function uS(y){return(0,Ta.mG)(this,void 0,void 0,function(){var b;return(0,Ta.Jh)(this,function(S){switch(S.label){case 0:return[4,Promise.all(y.map(function(E){return E.getFile()}))];case 1:return b=S.sent(),[2,b.map(function(E){return Ru(E)})]}})})}function hS(y,b){return(0,Ta.mG)(this,void 0,void 0,function(){var S,E;return(0,Ta.Jh)(this,function(I){switch(I.label){case 0:return y===null?[2,[]]:y.items?(S=jg(y.items).filter(function(F){return F.kind==="file"}),b!=="drop"?[2,S]:[4,Promise.all(S.map(fS))]):[3,2];case 1:return E=I.sent(),[2,Mb(Tb(E))];case 2:return[2,Mb(jg(y.files).map(function(F){return Ru(F)}))]}})})}function Mb(y){return y.filter(function(b){return oS.indexOf(b.name)===-1})}function jg(y){if(y===null)return[];for(var b=[],S=0;S<y.length;S++){var E=y[S];b.push(E)}return b}function fS(y){if(typeof y.webkitGetAsEntry!="function")return Db(y);var b=y.webkitGetAsEntry();return b&&b.isDirectory?hl(b):Db(y)}function Tb(y){return y.reduce(function(b,S){return(0,Ta.fl)(b,Array.isArray(S)?Tb(S):[S])},[])}function Db(y){var b=y.getAsFile();if(!b)return Promise.reject(y+" is not a File");var S=Ru(b);return Promise.resolve(S)}function pS(y){return(0,Ta.mG)(this,void 0,void 0,function(){return(0,Ta.Jh)(this,function(b){return[2,y.isDirectory?hl(y):mS(y)]})})}function hl(y){var b=y.createReader();return new Promise(function(S,E){var I=[];function F(){var U=this;b.readEntries(function(G){return(0,Ta.mG)(U,void 0,void 0,function(){var W,K,ie;return(0,Ta.Jh)(this,function(ue){switch(ue.label){case 0:if(G.length)return[3,5];ue.label=1;case 1:return ue.trys.push([1,3,,4]),[4,Promise.all(I)];case 2:return W=ue.sent(),S(W),[3,4];case 3:return K=ue.sent(),E(K),[3,4];case 4:return[3,6];case 5:ie=Promise.all(G.map(pS)),I.push(ie),F(),ue.label=6;case 6:return[2]}})})},function(G){E(G)})}F()})}function mS(y){return(0,Ta.mG)(this,void 0,void 0,function(){return(0,Ta.Jh)(this,function(b){return[2,new Promise(function(S,E){y.file(function(I){var F=Ru(I,y.fullPath);S(F)},function(I){E(I)})})]})})}var Pb=de(67715);function Ug(y,b){var S=Object.keys(y);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(y);b&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(y,I).enumerable})),S.push.apply(S,E)}return S}function Vg(y){for(var b=1;b<arguments.length;b++){var S=arguments[b]!=null?arguments[b]:{};b%2?Ug(Object(S),!0).forEach(function(E){Hg(y,E,S[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(S)):Ug(Object(S)).forEach(function(E){Object.defineProperty(y,E,Object.getOwnPropertyDescriptor(S,E))})}return y}function Hg(y,b,S){return b in y?Object.defineProperty(y,b,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[b]=S,y}function Af(y){"@babel/helpers - typeof";return Af=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},Af(y)}function Gg(y,b){return vS(y)||gS(y,b)||Ib(y,b)||Ob()}function Ob(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ib(y,b){if(y){if(typeof y=="string")return Wg(y,b);var S=Object.prototype.toString.call(y).slice(8,-1);if(S==="Object"&&y.constructor&&(S=y.constructor.name),S==="Map"||S==="Set")return Array.from(y);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return Wg(y,b)}}function Wg(y,b){(b==null||b>y.length)&&(b=y.length);for(var S=0,E=new Array(b);S<b;S++)E[S]=y[S];return E}function gS(y,b){var S=y==null?null:typeof Symbol!="undefined"&&y[Symbol.iterator]||y["@@iterator"];if(S!=null){var E=[],I=!0,F=!1,U,G;try{for(S=S.call(y);!(I=(U=S.next()).done)&&(E.push(U.value),!(b&&E.length===b));I=!0);}catch(W){F=!0,G=W}finally{try{!I&&S.return!=null&&S.return()}finally{if(F)throw G}}return E}}function vS(y){if(Array.isArray(y))return y}var Rb="file-invalid-type",zb="file-too-large",Lb="file-too-small",Bb="too-many-files",bD={FileInvalidType:Rb,FileTooLarge:zb,FileTooSmall:Lb,TooManyFiles:Bb},yS=function(b){b=Array.isArray(b)&&b.length===1?b[0]:b;var S=Array.isArray(b)?"one of ".concat(b.join(", ")):b;return{code:Rb,message:"File type must be ".concat(S)}},Fb=function(b){return{code:zb,message:"File is larger than ".concat(b," ").concat(b===1?"byte":"bytes")}},qg=function(b){return{code:Lb,message:"File is smaller than ".concat(b," ").concat(b===1?"byte":"bytes")}},bS={code:Bb,message:"Too many files"};function zu(y,b){var S=y.type==="application/x-moz-file"||(0,Pb.Z)(y,b);return[S,S?null:yS(b)]}function Nb(y,b,S){if(fl(y.size))if(fl(b)&&fl(S)){if(y.size>S)return[!1,Fb(S)];if(y.size<b)return[!1,qg(b)]}else{if(fl(b)&&y.size<b)return[!1,qg(b)];if(fl(S)&&y.size>S)return[!1,Fb(S)]}return[!0,null]}function fl(y){return y!=null}function wS(y){var b=y.files,S=y.accept,E=y.minSize,I=y.maxSize,F=y.multiple,U=y.maxFiles;return!F&&b.length>1||F&&U>=1&&b.length>U?!1:b.every(function(G){var W=zu(G,S),K=Gg(W,1),ie=K[0],ue=Nb(G,E,I),me=Gg(ue,1),_e=me[0];return ie&&_e})}function Cf(y){return typeof y.isPropagationStopped=="function"?y.isPropagationStopped():typeof y.cancelBubble!="undefined"?y.cancelBubble:!1}function Ef(y){return y.dataTransfer?Array.prototype.some.call(y.dataTransfer.types,function(b){return b==="Files"||b==="application/x-moz-file"}):!!y.target&&!!y.target.files}function wD(y){return Af(y)==="object"&&y!==null&&y.kind==="file"}function jb(y){y.preventDefault()}function Fr(y){return y.indexOf("MSIE")!==-1||y.indexOf("Trident/")!==-1}function xS(y){return y.indexOf("Edge/")!==-1}function _S(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Fr(y)||xS(y)}function sn(){for(var y=arguments.length,b=new Array(y),S=0;S<y;S++)b[S]=arguments[S];return function(E){for(var I=arguments.length,F=new Array(I>1?I-1:0),U=1;U<I;U++)F[U-1]=arguments[U];return b.some(function(G){return!Cf(E)&&G&&G.apply(void 0,[E].concat(F)),Cf(E)})}}function ea(){return"showOpenFilePicker"in window}function kS(y){return y=typeof y=="string"?y.split(","):y,[{description:"everything",accept:Array.isArray(y)?y.filter(function(b){return b==="audio/*"||b==="video/*"||b==="image/*"||b==="text/*"||/\w+\/[-+.\w]+/g.test(b)}).reduce(function(b,S){return Vg(Vg({},b),{},Hg({},S,[]))},{}):{}}]}function Ub(y){return y instanceof DOMException&&(y.name==="AbortError"||y.code===y.ABORT_ERR)}function SS(y){return y instanceof DOMException&&(y.name==="SecurityError"||y.code===y.SECURITY_ERR)}var AS=["children"],CS=["open"],ES=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],MS=["refKey","onChange","onClick"];function TS(y){return PS(y)||Lu(y)||Vb(y)||DS()}function DS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lu(y){if(typeof Symbol!="undefined"&&y[Symbol.iterator]!=null||y["@@iterator"]!=null)return Array.from(y)}function PS(y){if(Array.isArray(y))return ud(y)}function $g(y,b){return uc(y)||IS(y,b)||Vb(y,b)||OS()}function OS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vb(y,b){if(y){if(typeof y=="string")return ud(y,b);var S=Object.prototype.toString.call(y).slice(8,-1);if(S==="Object"&&y.constructor&&(S=y.constructor.name),S==="Map"||S==="Set")return Array.from(y);if(S==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(S))return ud(y,b)}}function ud(y,b){(b==null||b>y.length)&&(b=y.length);for(var S=0,E=new Array(b);S<b;S++)E[S]=y[S];return E}function IS(y,b){var S=y==null?null:typeof Symbol!="undefined"&&y[Symbol.iterator]||y["@@iterator"];if(S!=null){var E=[],I=!0,F=!1,U,G;try{for(S=S.call(y);!(I=(U=S.next()).done)&&(E.push(U.value),!(b&&E.length===b));I=!0);}catch(W){F=!0,G=W}finally{try{!I&&S.return!=null&&S.return()}finally{if(F)throw G}}return E}}function uc(y){if(Array.isArray(y))return y}function Da(y,b){var S=Object.keys(y);if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(y);b&&(E=E.filter(function(I){return Object.getOwnPropertyDescriptor(y,I).enumerable})),S.push.apply(S,E)}return S}function Rn(y){for(var b=1;b<arguments.length;b++){var S=arguments[b]!=null?arguments[b]:{};b%2?Da(Object(S),!0).forEach(function(E){Mf(y,E,S[E])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(S)):Da(Object(S)).forEach(function(E){Object.defineProperty(y,E,Object.getOwnPropertyDescriptor(S,E))})}return y}function Mf(y,b,S){return b in y?Object.defineProperty(y,b,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[b]=S,y}function Tf(y,b){if(y==null)return{};var S=Zg(y,b),E,I;if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(y);for(I=0;I<F.length;I++)E=F[I],!(b.indexOf(E)>=0)&&Object.prototype.propertyIsEnumerable.call(y,E)&&(S[E]=y[E])}return S}function Zg(y,b){if(y==null)return{};var S={},E=Object.keys(y),I,F;for(F=0;F<E.length;F++)I=E[F],!(b.indexOf(I)>=0)&&(S[I]=y[I]);return S}var Yg=(0,R.forwardRef)(function(y,b){var S=y.children,E=Tf(y,AS),I=ta(E),F=I.open,U=Tf(I,CS);return(0,R.useImperativeHandle)(b,function(){return{open:F}},[F]),R.createElement(R.Fragment,null,S(Rn(Rn({},U),{},{open:F})))});Yg.displayName="Dropzone";var hc={disabled:!1,getFilesFromEvent:Ng,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};Yg.defaultProps=hc,Yg.propTypes={children:pn().func,accept:pn().oneOfType([pn().string,pn().arrayOf(pn().string)]),multiple:pn().bool,preventDropOnDocument:pn().bool,noClick:pn().bool,noKeyboard:pn().bool,noDrag:pn().bool,noDragEventsBubbling:pn().bool,minSize:pn().number,maxSize:pn().number,maxFiles:pn().number,disabled:pn().bool,getFilesFromEvent:pn().func,onFileDialogCancel:pn().func,onFileDialogOpen:pn().func,useFsAccessApi:pn().bool,onDragEnter:pn().func,onDragLeave:pn().func,onDragOver:pn().func,onDrop:pn().func,onDropAccepted:pn().func,onDropRejected:pn().func,validator:pn().func};var qs=null,qn={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function ta(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=Rn(Rn({},hc),y),S=b.accept,E=b.disabled,I=b.getFilesFromEvent,F=b.maxSize,U=b.minSize,G=b.multiple,W=b.maxFiles,K=b.onDragEnter,ie=b.onDragLeave,ue=b.onDragOver,me=b.onDrop,_e=b.onDropAccepted,ke=b.onDropRejected,fe=b.onFileDialogCancel,q=b.onFileDialogOpen,Me=b.useFsAccessApi,Oe=b.preventDropOnDocument,tt=b.noClick,Mt=b.noKeyboard,li=b.noDrag,gt=b.noDragEventsBubbling,jt=b.validator,mi=(0,R.useMemo)(function(){return typeof q=="function"?q:pl},[q]),di=(0,R.useMemo)(function(){return typeof fe=="function"?fe:pl},[fe]),Ot=(0,R.useRef)(null),$t=(0,R.useRef)(null),vt=(0,R.useReducer)($n,qn),xi=$g(vt,2),Bi=xi[0],Pi=xi[1],mn=Bi.isFocused,_t=Bi.isFileDialogActive,Yn=Bi.draggedFiles,na=(0,R.useRef)(typeof window!="undefined"&&window.isSecureContext&&Me&&ea()),Zs=function(){!na.current&&_t&&setTimeout(function(){if($t.current){var ui=$t.current.files;ui.length||(Pi({type:"closeDialog"}),di())}},300)};(0,R.useEffect)(function(){return window.addEventListener("focus",Zs,!1),function(){window.removeEventListener("focus",Zs,!1)}},[$t,_t,di,na]);var jr=(0,R.useRef)([]),If=function(ui){Ot.current&&Ot.current.contains(ui.target)||(ui.preventDefault(),jr.current=[])};(0,R.useEffect)(function(){return Oe&&(document.addEventListener("dragover",jb,!1),document.addEventListener("drop",If,!1)),function(){Oe&&(document.removeEventListener("dragover",jb),document.removeEventListener("drop",If))}},[Ot,Oe]);var zn=(0,R.useCallback)(function(bt){bt.preventDefault(),bt.persist(),rs(bt),jr.current=[].concat(TS(jr.current),[bt.target]),Ef(bt)&&Promise.resolve(I(bt)).then(function(ui){Cf(bt)&&!gt||(Pi({draggedFiles:ui,isDragActive:!0,type:"setDraggedFiles"}),K&&K(bt))})},[I,K,gt]),ri=(0,R.useCallback)(function(bt){bt.preventDefault(),bt.persist(),rs(bt);var ui=Ef(bt);if(ui&&bt.dataTransfer)try{bt.dataTransfer.dropEffect="copy"}catch(Xn){}return ui&&ue&&ue(bt),!1},[ue,gt]),Oi=(0,R.useCallback)(function(bt){bt.preventDefault(),bt.persist(),rs(bt);var ui=jr.current.filter(function(Kn){return Ot.current&&Ot.current.contains(Kn)}),Xn=ui.indexOf(bt.target);Xn!==-1&&ui.splice(Xn,1),jr.current=ui,!(ui.length>0)&&(Pi({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),Ef(bt)&&ie&&ie(bt))},[Ot,ie,gt]),ns=(0,R.useCallback)(function(bt,ui){var Xn=[],Kn=[];bt.forEach(function(Ra){var Wu=zu(Ra,S),Ys=$g(Wu,2),qu=Ys[0],Ur=Ys[1],Ms=Nb(Ra,U,F),xc=$g(Ms,2),_c=xc[0],Xs=xc[1],$u=jt?jt(Ra):null;if(qu&&_c&&!$u)Xn.push(Ra);else{var kc=[Ur,Xs];$u&&(kc=kc.concat($u)),Kn.push({file:Ra,errors:kc.filter(function(bv){return bv})})}}),(!G&&Xn.length>1||G&&W>=1&&Xn.length>W)&&(Xn.forEach(function(Ra){Kn.push({file:Ra,errors:[bS]})}),Xn.splice(0)),Pi({acceptedFiles:Xn,fileRejections:Kn,type:"setFiles"}),me&&me(Xn,Kn,ui),Kn.length>0&&ke&&ke(Kn,ui),Xn.length>0&&_e&&_e(Xn,ui)},[Pi,G,S,U,F,W,me,_e,ke,jt]),vd=(0,R.useCallback)(function(bt){bt.preventDefault(),bt.persist(),rs(bt),jr.current=[],Ef(bt)&&Promise.resolve(I(bt)).then(function(ui){Cf(bt)&&!gt||ns(ui,bt)}),Pi({type:"reset"})},[I,ns,gt]),gl=(0,R.useCallback)(function(){if(na.current){Pi({type:"openDialog"}),mi();var bt={multiple:G,types:kS(S)};window.showOpenFilePicker(bt).then(function(ui){return I(ui)}).then(function(ui){ns(ui,null),Pi({type:"closeDialog"})}).catch(function(ui){Ub(ui)?(di(ui),Pi({type:"closeDialog"})):SS(ui)&&(na.current=!1,$t.current&&($t.current.value=null,$t.current.click()))});return}$t.current&&(Pi({type:"openDialog"}),mi(),$t.current.value=null,$t.current.click())},[Pi,mi,di,Me,ns,S,G]),Ut=(0,R.useCallback)(function(bt){!Ot.current||!Ot.current.isEqualNode(bt.target)||(bt.key===" "||bt.key==="Enter"||bt.keyCode===32||bt.keyCode===13)&&(bt.preventDefault(),gl())},[Ot,gl]),N=(0,R.useCallback)(function(){Pi({type:"focus"})},[]),wc=(0,R.useCallback)(function(){Pi({type:"blur"})},[]),Gu=(0,R.useCallback)(function(){tt||(_S()?setTimeout(gl,0):gl())},[tt,gl]),nn=function(ui){return E?null:ui},Oa=function(ui){return Mt?null:nn(ui)},Ia=function(ui){return li?null:nn(ui)},rs=function(ui){gt&&ui.stopPropagation()},Do=(0,R.useMemo)(function(){return function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ui=bt.refKey,Xn=ui===void 0?"ref":ui,Kn=bt.role,Ra=bt.onKeyDown,Wu=bt.onFocus,Ys=bt.onBlur,qu=bt.onClick,Ur=bt.onDragEnter,Ms=bt.onDragOver,xc=bt.onDragLeave,_c=bt.onDrop,Xs=Tf(bt,ES);return Rn(Rn(Mf({onKeyDown:Oa(sn(Ra,Ut)),onFocus:Oa(sn(Wu,N)),onBlur:Oa(sn(Ys,wc)),onClick:nn(sn(qu,Gu)),onDragEnter:Ia(sn(Ur,zn)),onDragOver:Ia(sn(Ms,ri)),onDragLeave:Ia(sn(xc,Oi)),onDrop:Ia(sn(_c,vd)),role:typeof Kn=="string"&&Kn!==""?Kn:"button"},Xn,Ot),!E&&!Mt?{tabIndex:0}:{}),Xs)}},[Ot,Ut,N,wc,Gu,zn,ri,Oi,vd,Mt,li,E]),vl=(0,R.useCallback)(function(bt){bt.stopPropagation()},[]),yl=(0,R.useMemo)(function(){return function(){var bt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ui=bt.refKey,Xn=ui===void 0?"ref":ui,Kn=bt.onChange,Ra=bt.onClick,Wu=Tf(bt,MS),Ys=Mf({accept:S,multiple:G,type:"file",style:{display:"none"},onChange:nn(sn(Kn,vd)),onClick:nn(sn(Ra,vl)),tabIndex:-1},Xn,$t);return Rn(Rn({},Ys),Wu)}},[$t,S,G,vd,E]),Cs=Yn.length,Es=Cs>0&&wS({files:Yn,accept:S,minSize:U,maxSize:F,multiple:G,maxFiles:W}),as=Cs>0&&!Es;return Rn(Rn({},Bi),{},{isDragAccept:Es,isDragReject:as,isFocused:mn&&!E,getRootProps:Do,getInputProps:yl,rootRef:Ot,inputRef:$t,open:nn(gl)})}function $n(y,b){switch(b.type){case"focus":return Rn(Rn({},y),{},{isFocused:!0});case"blur":return Rn(Rn({},y),{},{isFocused:!1});case"openDialog":return Rn(Rn({},qn),{},{isFileDialogActive:!0});case"closeDialog":return Rn(Rn({},y),{},{isFileDialogActive:!1});case"setDraggedFiles":var S=b.isDragActive,E=b.draggedFiles;return Rn(Rn({},y),{},{draggedFiles:E,isDragActive:S});case"setFiles":return Rn(Rn({},y),{},{acceptedFiles:b.acceptedFiles,fileRejections:b.fileRejections});case"reset":return Rn({},qn);default:return y}}function pl(){}function Hb(y){let b;const S=new Set,E=(K,ie)=>{const ue=typeof K=="function"?K(b):K;if(ue!==b){const me=b;b=ie?ue:Object.assign({},b,ue),S.forEach(_e=>_e(b,me))}},I=()=>b,F=(K,ie=I,ue=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let me=ie(b);function _e(){const ke=ie(b);if(!ue(me,ke)){const fe=me;K(me=ke,fe)}}return S.add(_e),()=>S.delete(_e)},W={setState:E,getState:I,subscribe:(K,ie,ue)=>ie||ue?F(K,ie,ue):(S.add(K),()=>S.delete(K)),destroy:()=>S.clear()};return b=y(E,I,W),W}const Xg=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?R.useEffect:R.useLayoutEffect;function zS(y){const b=typeof y=="function"?Hb(y):y,S=(E=b.getState,I=Object.is)=>{const[,F]=(0,R.useReducer)(q=>q+1,0),U=b.getState(),G=(0,R.useRef)(U),W=(0,R.useRef)(E),K=(0,R.useRef)(I),ie=(0,R.useRef)(!1),ue=(0,R.useRef)();ue.current===void 0&&(ue.current=E(U));let me,_e=!1;(G.current!==U||W.current!==E||K.current!==I||ie.current)&&(me=E(U),_e=!I(ue.current,me)),Xg(()=>{_e&&(ue.current=me),G.current=U,W.current=E,K.current=I,ie.current=!1});const ke=(0,R.useRef)(U);Xg(()=>{const q=()=>{try{const Oe=b.getState(),tt=W.current(Oe);K.current(ue.current,tt)||(G.current=Oe,ue.current=tt,F())}catch(Oe){ie.current=!0,F()}},Me=b.subscribe(q);return b.getState()!==ke.current&&q(),Me},[]);const fe=_e?me:ue.current;return(0,R.useDebugValue)(fe),fe};return Object.assign(S,b),S[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const E=[S,b];return{next(){const I=E.length<=0;return{value:E.shift(),done:I}}}},S}var fc=Object.defineProperty,Gb=Object.getOwnPropertySymbols,LS=Object.prototype.hasOwnProperty,Wb=Object.prototype.propertyIsEnumerable,Kg=(y,b,S)=>b in y?fc(y,b,{enumerable:!0,configurable:!0,writable:!0,value:S}):y[b]=S,BS=(y,b)=>{for(var S in b||(b={}))LS.call(b,S)&&Kg(y,S,b[S]);if(Gb)for(var S of Gb(b))Wb.call(b,S)&&Kg(y,S,b[S]);return y};const xD=(y,b)=>(S,E,I)=>(I.dispatch=F=>(S(U=>y(U,F),!1,F),F),I.dispatchFromDevtools=!0,BS({dispatch:(...F)=>I.dispatch(...F)},b));function _D(y,b){return(S,E,I)=>{var F;let U=!1;typeof b=="string"&&!U&&(console.warn("[zustand devtools middleware]: passing `name` as directly will be not allowed in next majorpass the `name` in an object `{ name: ... }` instead"),U=!0);const G=b===void 0?{name:void 0,anonymousActionType:void 0}:typeof b=="string"?{name:b}:b;typeof((F=G==null?void 0:G.serialize)==null?void 0:F.options)!="undefined"&&console.warn("[zustand devtools middleware]: `serialize.options` is deprecated, just use `serialize`");let W;try{W=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__}catch(fe){}if(!W)return typeof window!="undefined"&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),y(S,E,I);let K=Object.create(W.connect(G)),ie=!1;Object.defineProperty(I,"devtools",{get:()=>(ie||(console.warn("[zustand devtools middleware] `devtools` property on the store is deprecated it will be removed in the next major.\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly"),ie=!0),K),set:fe=>{ie||(console.warn("[zustand devtools middleware] `api.devtools` is deprecated, it will be removed in the next major.\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly"),ie=!0),K=fe}});let ue=!1;Object.defineProperty(K,"prefix",{get:()=>(ue||(console.warn("[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\nWe no longer prefix the actions/names"+G.name===void 0?", pass the `name` option to create a separate instance of devtools for each store.":", because the `name` option already creates a separate instance of devtools for each store."),ue=!0),""),set:()=>{ue||(console.warn("[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\nWe no longer prefix the actions/names"+G.name===void 0?", pass the `name` option to create a separate instance of devtools for each store.":", because the `name` option already creates a separate instance of devtools for each store."),ue=!0)}});let me=!0;I.setState=(fe,q,Me)=>{S(fe,q),me&&K.send(Me===void 0?{type:G.anonymousActionType||"anonymous"}:typeof Me=="string"?{type:Me}:Me,E())};const _e=(...fe)=>{const q=me;me=!1,S(...fe),me=q},ke=y(I.setState,E,I);if(K.init(ke),I.dispatchFromDevtools&&typeof I.dispatch=="function"){let fe=!1;const q=I.dispatch;I.dispatch=(...Me)=>{Me[0].type==="__setState"&&!fe&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),fe=!0),q(...Me)}}return K.subscribe(fe=>{var q;switch(fe.type){case"ACTION":if(typeof fe.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Qg(fe.payload,Me=>{if(Me.type==="__setState"){_e(Me.state);return}I.dispatchFromDevtools&&typeof I.dispatch=="function"&&I.dispatch(Me)});case"DISPATCH":switch(fe.payload.type){case"RESET":return _e(ke),K.init(I.getState());case"COMMIT":return K.init(I.getState());case"ROLLBACK":return Qg(fe.state,Me=>{_e(Me),K.init(I.getState())});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Qg(fe.state,Me=>{_e(Me)});case"IMPORT_STATE":{const{nextLiftedState:Me}=fe.payload,Oe=(q=Me.computedStates.slice(-1)[0])==null?void 0:q.state;if(!Oe)return;_e(Oe),K.send(null,Me);return}case"PAUSE_RECORDING":return me=!me}return}}),ke}}const Qg=(y,b)=>{let S;try{S=JSON.parse(y)}catch(E){console.error("[zustand devtools middleware] Could not parse the received json",E)}S!==void 0&&b(S)},qb=y=>(b,S,E)=>{const I=E.subscribe;return E.subscribe=(U,G,W)=>{let K=U;if(G){const ie=(W==null?void 0:W.equalityFn)||Object.is;let ue=U(E.getState());K=me=>{const _e=U(me);if(!ie(ue,_e)){const ke=ue;G(ue=_e,ke)}},W!=null&&W.fireImmediately&&G(ue,ue)}return I(K)},y(b,S,E)},FS=(y,b)=>(S,E,I)=>Object.assign({},y,b(S,E,I));var NS=Object.defineProperty,$b=Object.getOwnPropertySymbols,jS=Object.prototype.hasOwnProperty,US=Object.prototype.propertyIsEnumerable,Zb=(y,b,S)=>b in y?NS(y,b,{enumerable:!0,configurable:!0,writable:!0,value:S}):y[b]=S,pc=(y,b)=>{for(var S in b||(b={}))jS.call(b,S)&&Zb(y,S,b[S]);if($b)for(var S of $b(b))US.call(b,S)&&Zb(y,S,b[S]);return y};const Df=y=>b=>{try{const S=y(b);return S instanceof Promise?S:{then(E){return Df(E)(S)},catch(E){return this}}}catch(S){return{then(E){return this},catch(E){return Df(E)(S)}}}},kD=(y,b)=>(S,E,I)=>{let F=pc({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:q=>q,version:0,merge:(q,Me)=>pc(pc({},Me),q)},b);(F.blacklist||F.whitelist)&&console.warn(`The ${F.blacklist?"blacklist":"whitelist"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);let U=!1;const G=new Set,W=new Set;let K;try{K=F.getStorage()}catch(q){}if(K)K.removeItem||console.warn(`[zustand persist middleware] The given storage for item '${F.name}' does not contain a 'removeItem' method, which will be required in v4.`);else return y((...q)=>{console.warn(`[zustand persist middleware] Unable to update item '${F.name}', the given storage is currently unavailable.`),S(...q)},E,I);const ie=Df(F.serialize),ue=()=>{const q=F.partialize(pc({},E()));F.whitelist&&Object.keys(q).forEach(tt=>{var Mt;!((Mt=F.whitelist)!=null&&Mt.includes(tt))&&delete q[tt]}),F.blacklist&&F.blacklist.forEach(tt=>delete q[tt]);let Me;const Oe=ie({state:q,version:F.version}).then(tt=>K.setItem(F.name,tt)).catch(tt=>{Me=tt});if(Me)throw Me;return Oe},me=I.setState;I.setState=(q,Me)=>{me(q,Me),ue()};const _e=y((...q)=>{S(...q),ue()},E,I);let ke;const fe=()=>{var q;if(!K)return;U=!1,G.forEach(Oe=>Oe(E()));const Me=((q=F.onRehydrateStorage)==null?void 0:q.call(F,E()))||void 0;return Df(K.getItem.bind(K))(F.name).then(Oe=>{if(Oe)return F.deserialize(Oe)}).then(Oe=>{if(Oe)if(typeof Oe.version=="number"&&Oe.version!==F.version){if(F.migrate)return F.migrate(Oe.state,Oe.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return Oe.state}).then(Oe=>{var tt;return ke=F.merge(Oe,(tt=E())!=null?tt:_e),S(ke,!0),ue()}).then(()=>{Me==null||Me(ke,void 0),U=!0,W.forEach(Oe=>Oe(ke))}).catch(Oe=>{Me==null||Me(void 0,Oe)})};return I.persist={setOptions:q=>{F=pc(pc({},F),q),q.getStorage&&(K=q.getStorage())},clearStorage:()=>{var q;(q=K==null?void 0:K.removeItem)==null||q.call(K,F.name)},rehydrate:()=>fe(),hasHydrated:()=>U,onHydrate:q=>(G.add(q),()=>{G.delete(q)}),onFinishHydration:q=>(W.add(q),()=>{W.delete(q)})},fe(),ke||_e};var Jg=de(31378),VS=de.n(Jg);const ev=(...y)=>y.filter(Boolean).join(".");function HS(y){const b=y.split(".");return[b.pop(),b.join(".")||void 0]}function GS(y,b){return Object.entries(_u(y,b)).reduce((S,[,{value:E,disabled:I,key:F}])=>(S[F]=I?void 0:E,S),{})}function Yb(y,b){const S=(0,R.useRef)();return(b?Fn:Ii)(y,S.current)||(S.current=y),S.current}function Xb(y,b){return(0,R.useMemo)(y,Yb(b,!0))}function WS(y){const b=(0,R.useRef)(null),S=(0,R.useRef)(null),E=(0,R.useRef)(!0);return(0,R.useLayoutEffect)(()=>{y||(b.current.style.height="0px",b.current.style.overflow="hidden")},[]),(0,R.useEffect)(()=>{if(E.current){E.current=!1;return}let I;const F=b.current,U=()=>{y&&(F.style.removeProperty("height"),F.style.removeProperty("overflow"),S.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};F.addEventListener("transitionend",U,{once:!0});const{height:G}=S.current.getBoundingClientRect();return F.style.height=G+"px",y||(F.style.overflow="hidden",I=window.setTimeout(()=>F.style.height="0px",50)),()=>{F.removeEventListener("transitionend",U),clearTimeout(I)}},[y]),{wrapperRef:b,contentRef:S}}const Co=y=>{const[b,S]=(0,R.useState)(y.getVisiblePaths());return(0,R.useEffect)(()=>{S(y.getVisiblePaths());const E=y.useStore.subscribe(y.getVisiblePaths,S,{equalityFn:Ii});return()=>E()},[y]),b};function qS(y,b,S){return y.useStore(I=>{const F=ni(ni({},S),I.data);return GS(F,b)},Ii)}function Kb(y=3){const b=(0,R.useRef)(null),S=(0,R.useRef)(null),[E,I]=(0,R.useState)(!1),F=(0,R.useCallback)(()=>I(!0),[]),U=(0,R.useCallback)(()=>I(!1),[]);return(0,R.useLayoutEffect)(()=>{if(E){const{bottom:G,top:W,left:K}=b.current.getBoundingClientRect(),{height:ie}=S.current.getBoundingClientRect(),ue=G+ie>window.innerHeight-40?"up":"down";S.current.style.position="fixed",S.current.style.zIndex="10000",S.current.style.left=K+"px",ue==="down"?S.current.style.top=G+y+"px":S.current.style.bottom=window.innerHeight-W+y+"px"}},[y,E]),{popinRef:b,wrapperRef:S,shown:E,show:F,hide:U}}Lk([Bk]);const $S={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};jn.extend({color:()=>y=>Qr(y).isValid()});const ZS=y=>jn().color().test(y);function Qb(y,{format:b,hasAlpha:S,isString:E}){const I=$S[b]+(E&&b!=="hex"?"String":""),F=y[I]();return typeof F=="object"&&!S?xy(F,["a"]):F}const tv=(y,b)=>{const S=Qr(y);if(!S.isValid())throw Error("Invalid color");return Qb(S,b)};var iv=Object.freeze({__proto__:null,schema:ZS,sanitize:tv,format:(y,b)=>Qb(Qr(y),ni(ni({},b),{},{isString:!0,format:"hex"})),normalize:({value:y})=>{const b=zk(y),S=b==="name"?"hex":b,E=typeof y=="object"?"a"in y:b==="hex"&&y.length===8||/^(rgba)|(hsla)|(hsva)/.test(y),I={format:S,hasAlpha:E,isString:typeof y=="string"};return{value:tv(y,I),settings:I}}});const nv=qt("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),Bu=qt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),Eo=qt("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function Nn(y,b){return b!=="rgb"?Qr(y).toRgb():y}function rv({value:y,displayValue:b,settings:S,onUpdate:E}){const{emitOnEditStart:I,emitOnEditEnd:F}=Br(),{format:U,hasAlpha:G}=S,{popinRef:W,wrapperRef:K,shown:ie,show:ue,hide:me}=Kb(),_e=(0,R.useRef)(0),[ke,fe]=(0,R.useState)(()=>Nn(y,U)),q=G?eS:iS,Me=()=>{fe(Nn(y,U)),ue(),I()},Oe=()=>{me(),F(),window.clearTimeout(_e.current)},tt=()=>{_e.current=window.setTimeout(Oe,500)};return(0,R.useEffect)(()=>()=>window.clearTimeout(_e.current),[]),R.createElement(R.Fragment,null,R.createElement(nv,{ref:W,active:ie,onClick:()=>Me(),style:{color:b}}),ie&&R.createElement(fg,null,R.createElement(Ry,{onPointerUp:Oe}),R.createElement(Eo,{ref:K,onMouseEnter:()=>window.clearTimeout(_e.current),onMouseLeave:Mt=>Mt.buttons===0&&tt()},R.createElement(q,{color:ke,onChange:E}))))}function on(){const{value:y,displayValue:b,label:S,onChange:E,onUpdate:I,settings:F}=Br();return R.createElement(Ma,{input:!0},R.createElement(Ss,null,S),R.createElement(Bu,null,R.createElement(rv,{value:y,displayValue:b,onChange:E,onUpdate:I,settings:F}),R.createElement(af,{value:b,onChange:E,onUpdate:I})))}var Jb=ni({component:on},iv);function av(){const{label:y,displayValue:b,onUpdate:S,settings:E}=Br();return R.createElement(Ma,{input:!0},R.createElement(Ss,null,y),R.createElement(gf,{value:b,settings:E,onUpdate:S}))}var yi=ni({component:av},eb(["x","y","z"]));const YS=qt("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),vc=qt("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function Nr({value:y,settings:b,onUpdate:S}){const E=(0,R.useRef)(),I=(0,R.useRef)(0),F=(0,R.useRef)(0),U=(0,R.useRef)(1),[G,W]=(0,R.useState)(!1),[K,ie]=(0,R.useState)(!1),[ue,me]=Su(),_e=(0,R.useRef)(null),ke=(0,R.useRef)(null);(0,R.useLayoutEffect)(()=>{if(G){const{top:vt,left:xi,width:Bi,height:Pi}=_e.current.getBoundingClientRect();ke.current.style.left=xi+Bi/2+"px",ke.current.style.top=vt+Pi/2+"px"}},[G]);const{keys:[fe,q],joystick:Me}=b,Oe=Me==="invertY"?1:-1,{[fe]:{step:tt},[q]:{step:Mt}}=b,li=Gs("sizes","joystickWidth"),gt=Gs("sizes","joystickHeight"),jt=parseFloat(li)*.8/2,mi=parseFloat(gt)*.8/2,di=(0,R.useCallback)(()=>{E.current||(ie(!0),I.current&&me({x:I.current*jt}),F.current&&me({y:F.current*-mi}),E.current=window.setInterval(()=>{S(vt=>{const xi=tt*I.current*U.current,Bi=Oe*Mt*F.current*U.current;return Array.isArray(vt)?{[fe]:vt[0]+xi,[q]:vt[1]+Bi}:{[fe]:vt[fe]+xi,[q]:vt[q]+Bi}})},16))},[jt,mi,S,me,tt,Mt,fe,q,Oe]),Ot=(0,R.useCallback)(()=>{window.clearTimeout(E.current),E.current=void 0,ie(!1)},[]);(0,R.useEffect)(()=>{function vt(xi){U.current=Jh(xi)}return window.addEventListener("keydown",vt),window.addEventListener("keyup",vt),()=>{window.clearTimeout(E.current),window.removeEventListener("keydown",vt),window.removeEventListener("keyup",vt)}},[]);const $t=cf(({first:vt,active:xi,delta:[Bi,Pi],movement:[mn,_t]})=>{vt&&W(!0);const Yn=od(mn,-jt,jt),na=od(_t,-mi,mi);I.current=Math.abs(mn)>Math.abs(Yn)?Math.sign(mn-Yn):0,F.current=Math.abs(_t)>Math.abs(na)?Math.sign(na-_t):0;let Zs=y[fe],jr=y[q];xi?(I.current||(Zs+=Bi*tt*U.current,me({x:Yn})),F.current||(jr-=Oe*Pi*Mt*U.current,me({y:na})),I.current||F.current?di():Ot(),S({[fe]:Zs,[q]:jr})):(W(!1),I.current=0,F.current=0,me({x:0,y:0}),Ot())});return R.createElement(YS,Sn({ref:_e},$t()),G&&R.createElement(fg,null,R.createElement(vc,{ref:ke,isOutOfBounds:K},R.createElement("div",null),R.createElement("span",{ref:ue}))))}const XS=qt("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function KS(){const{label:y,displayValue:b,onUpdate:S,settings:E}=Br();return R.createElement(Ma,{input:!0},R.createElement(Ss,null,y),R.createElement(XS,{withJoystick:!!E.joystick},E.joystick&&R.createElement(Nr,{value:b,settings:E,onUpdate:S}),R.createElement(gf,{value:b,settings:E,onUpdate:S})))}const ew=["joystick"],tw=eb(["x","y"]),Mo=y=>{let{joystick:b=!0}=y,S=Zi(y,ew);const{value:E,settings:I}=tw.normalize(S);return{value:E,settings:ni(ni({},I),{},{joystick:b})}};var ia=ni(ni({component:KS},tw),{},{normalize:Mo}),hd=Object.freeze({__proto__:null,sanitize:y=>{if(y!==void 0){if(y instanceof File)try{return URL.createObjectURL(y)}catch(b){return}if(typeof y=="string"&&y.indexOf("blob:")===0)return y;throw Error("Invalid image format [undefined | blob |\xA0File].")}},schema:(y,b)=>typeof b=="object"&&"image"in b,normalize:({image:y})=>({value:y})});const QS=qt("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),Pa=qt("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),JS=qt("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),eA=qt("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),fd=qt("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),pd=qt("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function tA(){const{label:y,value:b,onUpdate:S,disabled:E}=Br(),{popinRef:I,wrapperRef:F,shown:U,show:G,hide:W}=Kb(),K=(0,R.useCallback)(ke=>{ke.length&&S(ke[0])},[S]),ie=(0,R.useCallback)(ke=>{ke.stopPropagation(),S(void 0)},[S]),{getRootProps:ue,getInputProps:me,isDragAccept:_e}=ta({maxFiles:1,accept:"image/*",onDrop:K,disabled:E});return R.createElement(Ma,{input:!0},R.createElement(Ss,null,y),R.createElement(QS,null,R.createElement(JS,{ref:I,hasImage:!!b,onPointerDown:()=>!!b&&G(),onPointerUp:W,style:{backgroundImage:b?`url(${b})`:"none"}}),U&&!!b&&R.createElement(fg,null,R.createElement(Ry,{onPointerUp:W,style:{cursor:"pointer"}}),R.createElement(eA,{ref:F,style:{backgroundImage:`url(${b})`}})),R.createElement(Pa,ue({isDragAccept:_e}),R.createElement("input",me()),R.createElement(fd,null,_e?"drop image":"click or drop")),R.createElement(pd,{onClick:ie,disabled:!b})))}var iA=ni({component:tA},hd);const Fu=jn().number(),nA=(y,b)=>jn().array().length(2).every.number().test(y)&&jn().schema({min:Fu,max:Fu}).test(b),Nu=y=>({min:y[0],max:y[1]}),Pf=(y,{bounds:[b,S]},E)=>{const I=Array.isArray(y)?Nu(y):y,F={min:E[0],max:E[1]},{min:U,max:G}=ni(ni({},F),I);return[od(Number(U),b,Math.max(b,G)),od(Number(G),Math.min(S,U),S)]};var sv=Object.freeze({__proto__:null,schema:nA,format:Nu,sanitize:Pf,normalize:({value:y,min:b,max:S})=>{const E={min:b,max:S},I=Ky(Nu(y),{min:E,max:E}),F=[b,S],U=ni(ni({},I),{},{bounds:F});return{value:Pf(Nu(y),U,y),settings:U}}});const ov=["value","bounds","onDrag"],nw=["bounds"],rw=qt("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function aw(y){let{value:b,bounds:[S,E],onDrag:I}=y,F=Zi(y,ov);const U=(0,R.useRef)(null),G=(0,R.useRef)(null),W=(0,R.useRef)(null),K=(0,R.useRef)(0),ie=Gs("sizes","scrubberWidth"),ue=cf(({event:ke,first:fe,xy:[q],movement:[Me],memo:Oe={}})=>{if(fe){const{width:Mt,left:li}=U.current.getBoundingClientRect();K.current=Mt-parseFloat(ie);const gt=(ke==null?void 0:ke.target)===G.current||(ke==null?void 0:ke.target)===W.current;Oe.pos=Kh((q-li)/Mt,S,E);const jt=Math.abs(Oe.pos-b.min)-Math.abs(Oe.pos-b.max);Oe.key=jt<0||jt===0&&Oe.pos<=b.min?"min":"max",gt&&(Oe.pos=b[Oe.key])}const tt=Oe.pos+Kh(Me/K.current,0,E-S);return I({[Oe.key]:jy(tt,F[Oe.key])}),Oe}),me=`calc(${Xh(b.min,S,E)} * (100% - ${ie} - 8px) + 4px)`,_e=`calc(${1-Xh(b.max,S,E)} * (100% - ${ie} - 8px) + 4px)`;return R.createElement(dl,Sn({ref:U},ue()),R.createElement(yg,null,R.createElement(pr,{style:{left:me,right:_e}})),R.createElement(uf,{position:"left",ref:G,style:{left:me}}),R.createElement(uf,{position:"right",ref:W,style:{right:_e}}))}function sw(){const{label:y,displayValue:b,onUpdate:S,settings:E}=Br(),I=Zi(E,nw);return R.createElement(R.Fragment,null,R.createElement(Ma,{input:!0},R.createElement(Ss,null,y),R.createElement(rw,null,R.createElement(aw,Sn({value:b},E,{onDrag:S})),R.createElement(gf,{value:b,settings:I,onUpdate:S,innerLabelTrim:0}))))}var rA=ni({component:sw},sv);const ow=()=>{const y=new Map;return{on:(b,S)=>{let E=y.get(b);E===void 0&&(E=new Set,y.set(b,E)),E.add(S)},off:(b,S)=>{const E=y.get(b);E!==void 0&&(E.delete(S),E.size===0&&y.delete(b))},emit:(b,...S)=>{const E=y.get(b);if(E!==void 0)for(const I of E)I(...S)}}},lw=["type","value"],dw=["onChange","transient","onEditStart","onEditEnd"],lv=function(){const b=zS(qb(()=>({data:{}}))),S=ow();this.storeId=tk(),this.useStore=b;const E={},I=new Set;this.getVisiblePaths=()=>{const U=this.getData(),G=Object.keys(U),W=[];Object.entries(E).forEach(([ie,ue])=>{ue.render&&G.some(me=>me.indexOf(ie)===0)&&!ue.render(this.get)&&W.push(ie+".")});const K=[];return I.forEach(ie=>{ie in U&&U[ie].__refCount>0&&W.every(ue=>ie.indexOf(ue)===-1)&&(!U[ie].render||U[ie].render(this.get))&&K.push(ie)}),K},this.setOrderedPaths=U=>{U.forEach(G=>I.add(G))},this.orderPaths=U=>(this.setOrderedPaths(U),U),this.disposePaths=U=>{b.setState(G=>{const W=G.data;return U.forEach(K=>{if(K in W){const ie=W[K];ie.__refCount--,ie.__refCount===0&&ie.type in Ja&&delete W[K]}}),{data:W}})},this.dispose=()=>{b.setState(()=>({data:{}}))},this.getFolderSettings=U=>E[U]||{},this.getData=()=>b.getState().data,this.addData=(U,G)=>{b.setState(W=>{const K=W.data;return Object.entries(U).forEach(([ie,ue])=>{let me=K[ie];if(me){const{type:_e,value:ke}=ue,fe=Zi(ue,lw);_e!==me.type?Vs(an.INPUT_TYPE_OVERRIDE,_e):((me.__refCount===0||G)&&Object.assign(me,fe),me.__refCount++)}else K[ie]=ni(ni({},ue),{},{__refCount:1})}),{data:K}})},this.setValueAtPath=(U,G,W)=>{b.setState(K=>{const ie=K.data;return ko(ie[U],G,U,this,W),{data:ie}})},this.setSettingsAtPath=(U,G)=>{b.setState(W=>{const K=W.data;return K[U].settings=ni(ni({},K[U].settings),G),{data:K}})},this.disableInputAtPath=(U,G)=>{b.setState(W=>{const K=W.data;return K[U].disabled=G,{data:K}})},this.set=(U,G)=>{b.setState(W=>{const K=W.data;return Object.entries(U).forEach(([ie,ue])=>{try{ko(K[ie],ue,void 0,void 0,G)}catch(me){}}),{data:K}})},this.getInput=U=>{try{return this.getData()[U]}catch(G){Vs(an.PATH_DOESNT_EXIST,U)}},this.get=U=>{var G;return(G=this.getInput(U))===null||G===void 0?void 0:G.value},this.emitOnEditStart=U=>{S.emit(`onEditStart:${U}`,this.get(U),U,ni(ni({},this.getInput(U)),{},{get:this.get}))},this.emitOnEditEnd=U=>{S.emit(`onEditEnd:${U}`,this.get(U),U,ni(ni({},this.getInput(U)),{},{get:this.get}))},this.subscribeToEditStart=(U,G)=>{const W=`onEditStart:${U}`;return S.on(W,G),()=>S.off(W,G)},this.subscribeToEditEnd=(U,G)=>{const W=`onEditEnd:${U}`;return S.on(W,G),()=>S.off(W,G)};const F=(U,G,W)=>{const K={};return Object.entries(U).forEach(([ie,ue])=>{if(ie==="")return Vs(an.EMPTY_KEY);let me=ev(G,ie);if(ue.type===Ja.FOLDER){const _e=F(ue.schema,me,W);Object.assign(K,_e),me in E||(E[me]=ue.settings)}else if(ie in W)Vs(an.DUPLICATE_KEYS,ie,me,W[ie].path);else{const _e=Hs(ue,ie,me,K);if(_e){const{type:ke,options:fe,input:q}=_e,{onChange:Me,transient:Oe,onEditStart:tt,onEditEnd:Mt}=fe,li=Zi(fe,dw);K[me]=ni(ni(ni({type:ke},li),q),{},{fromPanel:!0}),W[ie]={path:me,onChange:Me,transient:Oe,onEditStart:tt,onEditEnd:Mt}}else Vs(an.UNKNOWN_INPUT,me,ue)}}),K};this.getDataFromSchema=U=>{const G={};return[F(U,"",G),G]}},dv=new lv;function cw(){return(0,R.useMemo)(()=>new lv,[])}const uw={collapsed:!1};function hw(y,b){return{type:Ja.FOLDER,schema:y,settings:ni(ni({},uw),b)}}const fw={disabled:!1};function aA(y,b){return{type:SpecialInputs.BUTTON,onClick:y,settings:_objectSpread2(_objectSpread2({},fw),b)}}function sA(y){return{type:SpecialInputs.BUTTON_GROUP,opts:y}}const pw={graph:!1,interval:100};function oA(y,b){return{type:SpecialInputs.MONITOR,objectOrFn:y,settings:_objectSpread2(_objectSpread2({},pw),b)}}const cv=y=>"__levaInput"in y,mw=(y,b)=>{const S={},E=b?b.toLowerCase():null;return y.forEach(I=>{const[F,U]=HS(I);(!E||F.toLowerCase().indexOf(E)>-1)&&VS()(S,U,{[F]:{__levaInput:!0,path:I}})}),S},gw=["type","label","path","valueKey","value","settings","setValue","disabled"];function uv(y){let{type:b,label:S,path:E,valueKey:I,value:F,settings:U,setValue:G,disabled:W}=y,K=Zi(y,gw);const{displayValue:ie,onChange:ue,onUpdate:me}=uk({type:b,value:F,settings:U,setValue:G}),_e=wo[b].component;return _e?R.createElement(lg.Provider,{value:ni({key:I,path:E,id:""+E,label:S,displayValue:ie,value:F,onChange:ue,onUpdate:me,settings:U,setValue:G,disabled:W},K)},R.createElement(df,{disabled:W},R.createElement(_e,null))):(Vs(an.NO_COMPONENT_FOR_TYPE,b,E),null)}const lA=qt("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function vw({onClick:y,settings:b,label:S}){const E=es();return R.createElement(Ma,null,R.createElement(lA,{disabled:b.disabled,onClick:()=>y(E.get)},S))}const yw=qt("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),bw=qt("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),ww=({label:y,opts:b})=>{let S=typeof y=="string"&&y.trim()===""?null:y,E=b;return typeof b.opts=="object"&&(E.label!==void 0&&(S=b.label),E=b.opts),{label:S,opts:E}};function xw(y){const{label:b,opts:S}=ww(y),E=es();return R.createElement(Ma,{input:!!b},b&&R.createElement(Ss,null,b),R.createElement(yw,null,Object.entries(S).map(([I,F])=>R.createElement(bw,{key:I,onClick:()=>F(E.get)},I))))}const hv=qt("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),ju=100;function Of(y,b){y.push(b),y.length>ju&&y.shift()}const fv=(0,R.forwardRef)(function({initialValue:y},b){const S=Gs("colors","highlight3"),E=Gs("colors","elevation2"),I=Gs("colors","highlight1"),[F,U]=(0,R.useMemo)(()=>[Qr(I).alpha(.4).toRgbString(),Qr(I).alpha(.1).toRgbString()],[I]),G=(0,R.useRef)([y]),W=(0,R.useRef)(y),K=(0,R.useRef)(y),ie=(0,R.useRef)(),ue=(0,R.useCallback)((ke,fe)=>{if(!ke)return;const{width:q,height:Me}=ke,Oe=new Path2D,tt=q/ju,Mt=Me*.05;for(let jt=0;jt<G.current.length;jt++){const mi=Xh(G.current[jt],W.current,K.current),di=tt*jt,Ot=Me-mi*(Me-Mt*2)-Mt;Oe.lineTo(di,Ot)}fe.clearRect(0,0,q,Me);const li=new Path2D(Oe);li.lineTo(tt*(G.current.length+1),Me),li.lineTo(0,Me),li.lineTo(0,0);const gt=fe.createLinearGradient(0,0,0,Me);gt.addColorStop(0,F),gt.addColorStop(1,U),fe.fillStyle=gt,fe.fill(li),fe.strokeStyle=E,fe.lineJoin="round",fe.lineWidth=14,fe.stroke(Oe),fe.strokeStyle=S,fe.lineWidth=2,fe.stroke(Oe)},[S,E,F,U]),[me,_e]=lD(ue);return(0,R.useImperativeHandle)(b,()=>({frame:ke=>{(W.current===void 0||ke<W.current)&&(W.current=ke),(K.current===void 0||ke>K.current)&&(K.current=ke),Of(G.current,ke),ie.current=requestAnimationFrame(()=>ue(me.current,_e.current))}}),[me,_e,ue]),(0,R.useEffect)(()=>()=>cancelAnimationFrame(ie.current),[]),R.createElement(hv,{ref:me})}),md=y=>Number.isFinite(y)?y.toPrecision(2):y.toString(),bc=(0,R.forwardRef)(function({initialValue:y},b){const[S,E]=(0,R.useState)(md(y));return(0,R.useImperativeHandle)(b,()=>({frame:I=>E(md(I))}),[]),R.createElement("div",null,S)});function Uu(y){return typeof y=="function"?y():y.current}function pv({label:y,objectOrFn:b,settings:S}){const E=(0,R.useRef)(),I=(0,R.useRef)(Uu(b));return(0,R.useEffect)(()=>{const F=window.setInterval(()=>{var U;document.hidden||(U=E.current)===null||U===void 0||U.frame(Uu(b))},S.interval);return()=>window.clearInterval(F)},[b,S.interval]),R.createElement(Ma,{input:!0},R.createElement(Ss,{align:"top"},y),S.graph?R.createElement(fv,{ref:E,initialValue:I.current}):R.createElement(bc,{ref:E,initialValue:I.current}))}const dA=["type","label","key"],$s={[Ja.BUTTON]:vw,[Ja.BUTTON_GROUP]:xw,[Ja.MONITOR]:pv},ci=R.memo(({path:y})=>{const[b,{set:S,setSettings:E,disable:I,storeId:F,emitOnEditStart:U,emitOnEditEnd:G}]=By(y);if(!b)return null;const{type:W,label:K,key:ie}=b,ue=Zi(b,dA);if(W in Ja){const me=$s[W];return R.createElement(me,Sn({label:K,path:y},ue))}return W in wo?R.createElement(uv,Sn({key:F+y,type:W,label:K,storeId:F,path:y,valueKey:ie,setValue:S,setSettings:E,disable:I,emitOnEditStart:U,emitOnEditEnd:G},ue)):(bo(an.UNSUPPORTED_INPUT,W,y),null)});function To({toggle:y,toggled:b,name:S}){return R.createElement(Ci,{onClick:()=>y()},R.createElement(mg,{toggled:b}),R.createElement("div",null,S))}const _w=({name:y,path:b,tree:S})=>{const E=es(),I=ev(b,y),{collapsed:F,color:U}=E.getFolderSettings(I),[G,W]=(0,R.useState)(!F),K=(0,R.useRef)(null),ie=Gs("colors","folderWidgetColor"),ue=Gs("colors","folderTextColor");return(0,R.useLayoutEffect)(()=>{K.current.style.setProperty("--leva-colors-folderWidgetColor",U||ie),K.current.style.setProperty("--leva-colors-folderTextColor",U||ue)},[U,ie,ue]),R.createElement(ts,{ref:K},R.createElement(To,{name:y,toggled:G,toggle:()=>W(me=>!me)}),R.createElement(kw,{parent:I,tree:S,toggled:G}))},kw=R.memo(({isRoot:y=!1,fill:b=!1,flat:S=!1,parent:E,tree:I,toggled:F})=>{const{wrapperRef:U,contentRef:G}=WS(F),W=es(),K=([ue,me])=>{var _e;return(cv(me)?(_e=W.getInput(me.path))===null||_e===void 0?void 0:_e.order:W.getFolderSettings(ev(E,ue)).order)||0},ie=Object.entries(I).sort((ue,me)=>K(ue)-K(me));return R.createElement(fr,{ref:U,isRoot:y,fill:b,flat:S},R.createElement(sf,{ref:G,isRoot:y,toggled:F},ie.map(([ue,me])=>cv(me)?R.createElement(ci,{key:me.path,valueKey:me.valueKey,path:me.path}):R.createElement(_w,{key:ue,name:ue,path:E,tree:me}))))}),cA=qt("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${of}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),As=40,gd=qt("i",{$flexCenter:"",width:As,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),mv=qt("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),uA=qt("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${gd}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),gv=qt("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),hA=qt("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:As}}}}),Sw=R.forwardRef(({setFilter:y,toggle:b},S)=>{const[E,I]=(0,R.useState)(""),F=(0,R.useMemo)(()=>ag(y,250),[y]),U=()=>{y(""),I("")},G=W=>{const K=W.currentTarget.value;b(!0),I(K)};return(0,R.useEffect)(()=>{F(E)},[E,F]),R.createElement(R.Fragment,null,R.createElement(gv,{ref:S,value:E,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:W=>W.stopPropagation(),onChange:G}),R.createElement(gd,{onClick:()=>U(),style:{visibility:E?"visible":"hidden"}},R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},R.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function vv({setFilter:y,onDrag:b,onDragStart:S,onDragEnd:E,toggle:I,toggled:F,title:U,drag:G,filterEnabled:W,from:K}){const[ie,ue]=(0,R.useState)(!1),me=(0,R.useRef)(null);(0,R.useEffect)(()=>{var ke,fe;ie?(ke=me.current)===null||ke===void 0||ke.focus():(fe=me.current)===null||fe===void 0||fe.blur()},[ie]);const _e=cf(({offset:[ke,fe],first:q,last:Me})=>{b({x:ke,y:fe}),q&&S({x:ke,y:fe}),Me&&E({x:ke,y:fe})},{filterTaps:!0,from:({offset:[ke,fe]})=>[(K==null?void 0:K.x)||ke,(K==null?void 0:K.y)||fe]});return(0,R.useEffect)(()=>{const ke=fe=>{fe.key==="L"&&fe.shiftKey&&fe.metaKey&&ue(q=>!q)};return window.addEventListener("keydown",ke),()=>window.removeEventListener("keydown",ke)},[]),R.createElement(R.Fragment,null,R.createElement(mv,{mode:G?"drag":void 0},R.createElement(gd,{active:!F,onClick:()=>I()},R.createElement(mg,{toggled:F,width:12,height:8})),R.createElement(hA,Sn({},G?_e():{},{drag:G,filterEnabled:W}),U===void 0&&G?R.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},R.createElement("circle",{cx:"2",cy:"2",r:"2"}),R.createElement("circle",{cx:"14",cy:"2",r:"2"}),R.createElement("circle",{cx:"26",cy:"2",r:"2"}),R.createElement("circle",{cx:"2",cy:"12",r:"2"}),R.createElement("circle",{cx:"14",cy:"12",r:"2"}),R.createElement("circle",{cx:"26",cy:"12",r:"2"})):U),W&&R.createElement(gd,{active:ie,onClick:()=>ue(ke=>!ke)},R.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},R.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),R.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),R.createElement(uA,{toggled:ie},R.createElement(Sw,{ref:me,setFilter:y,toggle:I})))}const Cr=["store","hidden","theme","collapsed"];function Er(y){let{store:b,hidden:S=!1,theme:E,collapsed:I=!1}=y,F=Zi(y,Cr);const U=Xb(()=>rk(E),[E]),[G,W]=(0,R.useState)(!I),K=typeof I=="object"?!I.collapsed:G,ie=(0,R.useMemo)(()=>typeof I=="object"?ue=>{typeof ue=="function"?I.onChange(!ue(!I.collapsed)):I.onChange(!ue)}:W,[I]);return!b||S?null:R.createElement(tf.Provider,{value:U},R.createElement(Aw,Sn({store:b},F,{toggled:K,setToggle:ie,rootClass:U.className})))}const Aw=R.memo(({store:y,rootClass:b,fill:S=!1,flat:E=!1,neverHide:I=!1,oneLineLabels:F=!1,titleBar:U={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:G=!1,toggled:W,setToggle:K})=>{var ie,ue;const me=Co(y),[_e,ke]=(0,R.useState)(""),fe=(0,R.useMemo)(()=>mw(me,_e),[me,_e]),[q,Me]=Su(),Oe=I||me.length>0,tt=typeof U=="object"&&U.title||void 0,Mt=typeof U=="object"&&(ie=U.drag)!==null&&ie!==void 0?ie:!0,li=typeof U=="object"&&(ue=U.filter)!==null&&ue!==void 0?ue:!0,gt=typeof U=="object"&&U.position||void 0,jt=typeof U=="object"&&U.onDrag||void 0,mi=typeof U=="object"&&U.onDragStart||void 0,di=typeof U=="object"&&U.onDragEnd||void 0;return R.useEffect(()=>{Me({x:gt==null?void 0:gt.x,y:gt==null?void 0:gt.y})},[gt,Me]),nk(),R.createElement(My.Provider,{value:{hideCopyButton:G}},R.createElement(cA,{ref:q,className:b,fill:S,flat:E,oneLineLabels:F,hideTitleBar:!U,style:{display:Oe?"block":"none"}},U&&R.createElement(vv,{onDrag:Ot=>{Me(Ot),jt==null||jt(Ot)},onDragStart:Ot=>mi==null?void 0:mi(Ot),onDragEnd:Ot=>di==null?void 0:di(Ot),setFilter:ke,toggle:Ot=>K($t=>Ot!=null?Ot:!$t),toggled:W,title:tt,drag:Mt,filterEnabled:li,from:gt}),Oe&&R.createElement(nf.Provider,{value:y},R.createElement(kw,{isRoot:!0,fill:S,flat:E,tree:fe,toggled:W}))))}),Vu=["isRoot"];let ml=!1,gr=null;function Zn(y){let{isRoot:b=!1}=y,S=Zi(y,Vu);return(0,R.useEffect)(()=>(ml=!0,!b&&gr&&(gr.remove(),gr=null),()=>{b||(ml=!1)}),[b]),R.createElement(Er,Sn({store:dv},S))}function yv(y){(0,R.useEffect)(()=>{y&&!ml&&(gr||(gr=document.getElementById("leva__root")||Object.assign(document.createElement("div"),{id:"leva__root"}),document.body&&(document.body.appendChild(gr),ef(R.createElement(Zn,{isRoot:!0}),gr))),ml=!0)},[y])}const fA=["store"];function pA(y){let{store:b}=y,S=Zi(y,fA);const E=es(),I=b===void 0?E:b;return R.createElement(Er,Sn({store:I},S))}function Hu(y,b,S,E,I){let F,U,G,W,K;return typeof y=="string"?(U=y,F=b,Array.isArray(S)?K=S:S&&("store"in S?(W=S,K=E):(G=S,Array.isArray(E)?K=E:(W=E,K=I)))):(F=y,Array.isArray(b)?K=b:(W=b,K=S)),{schema:F,folderName:U,folderSettings:G,hookSettings:W,deps:K||[]}}function mA(y,b,S,E,I){const{folderName:F,schema:U,folderSettings:G,hookSettings:W,deps:K}=Hu(y,b,S,E,I),ie=typeof U=="function",ue=(0,R.useRef)(!1),me=(0,R.useRef)(!0),_e=Xb(()=>{ue.current=!0;const $t=typeof U=="function"?U():U;return F?{[F]:hw($t,G)}:$t},K),ke=!(W!=null&&W.store);yv(ke);const[fe]=(0,R.useState)(()=>(W==null?void 0:W.store)||dv),[q,Me]=(0,R.useMemo)(()=>fe.getDataFromSchema(_e),[fe,_e]),[Oe,tt,Mt,li,gt]=(0,R.useMemo)(()=>{const $t=[],vt=[],xi={},Bi={},Pi={};return Object.values(Me).forEach(({path:mn,onChange:_t,onEditStart:Yn,onEditEnd:na,transient:Zs})=>{$t.push(mn),_t?(xi[mn]=_t,Zs||vt.push(mn)):vt.push(mn),Yn&&(Bi[mn]=Yn),na&&(Pi[mn]=na)}),[$t,vt,xi,Bi,Pi]},[Me]),jt=(0,R.useMemo)(()=>fe.orderPaths(Oe),[Oe,fe]),mi=qS(fe,tt,q),di=(0,R.useCallback)($t=>{const vt=Object.entries($t).reduce((xi,[Bi,Pi])=>Object.assign(xi,{[Me[Bi].path]:Pi}),{});fe.set(vt,!1)},[fe,Me]),Ot=(0,R.useCallback)($t=>fe.get(Me[$t].path),[fe,Me]);return(0,R.useEffect)(()=>{const $t=!me.current&&ue.current;return fe.addData(q,$t),me.current=!1,ue.current=!1,()=>fe.disposePaths(jt)},[fe,jt,q]),(0,R.useEffect)(()=>{const $t=[];return Object.entries(Mt).forEach(([vt,xi])=>{xi(fe.get(vt),vt,ni({initial:!0,get:fe.get},fe.getInput(vt)));const Bi=fe.useStore.subscribe(Pi=>{const mn=Pi.data[vt];return[mn.disabled?void 0:mn.value,mn]},([Pi,mn])=>xi(Pi,vt,ni({initial:!1,get:fe.get},mn)),{equalityFn:Ii});$t.push(Bi)}),()=>$t.forEach(vt=>vt())},[fe,Mt]),(0,R.useEffect)(()=>{const $t=[];return Object.entries(li).forEach(([vt,xi])=>$t.push(fe.subscribeToEditStart(vt,xi))),Object.entries(gt).forEach(([vt,xi])=>$t.push(fe.subscribeToEditEnd(vt,xi))),()=>$t.forEach(vt=>vt())},[li,gt,fe]),ie?[mi,di,Ot]:mi}sl(_s.SELECT,bk),sl(_s.IMAGE,iA),sl(_s.NUMBER,Vy),sl(_s.COLOR,Jb),sl(_s.STRING,qy),sl(_s.BOOLEAN,Yy),sl(_s.INTERVAL,rA),sl(_s.VECTOR3D,yi),sl(_s.VECTOR2D,ia)},31378:function(ii,oi,de){"use strict";var st=de(12723),R=de(12793),ht=de(33780),Gt=de(78930);ii.exports=function(X,Ae,yt){if(!st(X))throw new TypeError("expected an object");if(typeof Ae!="string"||yt==null)return R.apply(null,arguments);if(typeof yt=="string")return Gt(X,Ae,yt),X;var Ft=ht(X,Ae);return st(yt)&&st(Ft)&&(yt=R({},Ft,yt)),Gt(X,Ae,yt),X}},12793:function(ii,oi,de){"use strict";var st=de(12723),R=de(21603);function ht(Ae,yt){for(var Ft=arguments.length,be=0;++be<Ft;){var Et=arguments[be];St(Et)&&R(Et,Gt,Ae)}return Ae}function Gt(Ae,yt){if(X(yt)){var Ft=this[yt];St(Ae)&&St(Ft)?ht(Ft,Ae):this[yt]=Ae}}function St(Ae){return st(Ae)&&!Array.isArray(Ae)}function X(Ae){return Ae!=="__proto__"&&Ae!=="constructor"&&Ae!=="prototype"}ii.exports=ht},31926:function(ii,oi,de){"use strict";var st=this&&this.__extends||function(){var hi=function(wi,Xe){return hi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Re,It){Re.__proto__=It}||function(Re,It){for(var Qi in It)Object.prototype.hasOwnProperty.call(It,Qi)&&(Re[Qi]=It[Qi])},hi(wi,Xe)};return function(wi,Xe){if(typeof Xe!="function"&&Xe!==null)throw new TypeError("Class extends value "+String(Xe)+" is not a constructor or null");hi(wi,Xe);function Re(){this.constructor=wi}wi.prototype=Xe===null?Object.create(Xe):(Re.prototype=Xe.prototype,new Re)}}(),R=this&&this.__assign||function(){return R=Object.assign||function(hi){for(var wi,Xe=1,Re=arguments.length;Xe<Re;Xe++){wi=arguments[Xe];for(var It in wi)Object.prototype.hasOwnProperty.call(wi,It)&&(hi[It]=wi[It])}return hi},R.apply(this,arguments)},ht=this&&this.__createBinding||(Object.create?function(hi,wi,Xe,Re){Re===void 0&&(Re=Xe);var It=Object.getOwnPropertyDescriptor(wi,Xe);(!It||("get"in It?!wi.__esModule:It.writable||It.configurable))&&(It={enumerable:!0,get:function(){return wi[Xe]}}),Object.defineProperty(hi,Re,It)}:function(hi,wi,Xe,Re){Re===void 0&&(Re=Xe),hi[Re]=wi[Xe]}),Gt=this&&this.__setModuleDefault||(Object.create?function(hi,wi){Object.defineProperty(hi,"default",{enumerable:!0,value:wi})}:function(hi,wi){hi.default=wi}),St=this&&this.__importStar||function(hi){if(hi&&hi.__esModule)return hi;var wi={};if(hi!=null)for(var Xe in hi)Xe!=="default"&&Object.prototype.hasOwnProperty.call(hi,Xe)&&ht(wi,hi,Xe);return Gt(wi,hi),wi},X=this&&this.__rest||function(hi,wi){var Xe={};for(var Re in hi)Object.prototype.hasOwnProperty.call(hi,Re)&&wi.indexOf(Re)<0&&(Xe[Re]=hi[Re]);if(hi!=null&&typeof Object.getOwnPropertySymbols=="function")for(var It=0,Re=Object.getOwnPropertySymbols(hi);It<Re.length;It++)wi.indexOf(Re[It])<0&&Object.prototype.propertyIsEnumerable.call(hi,Re[It])&&(Xe[Re[It]]=hi[Re[It]]);return Xe};Object.defineProperty(oi,"__esModule",{value:!0});var Ae=St(de(75271)),yt=13,Ft=9,be=8,Et=89,tn=90,fn=77,Jo=57,J=219,xn=222,Yr=192,mo=27,Xt=100,Lr=3e3,_n=typeof window!="undefined"&&"navigator"in window&&/Win/i.test(navigator.platform),Fn=typeof window!="undefined"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),Ii="npm__react-simple-code-editor__textarea",ur=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(Ii,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(Ii,` {
    color: transparent !important;
  }

  .`).concat(Ii,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),$d=function(hi){st(wi,hi);function wi(){var Xe=hi!==null&&hi.apply(this,arguments)||this;return Xe.state={capture:!0},Xe._recordCurrentState=function(){var Re=Xe._input;if(Re){var It=Re.value,Qi=Re.selectionStart,$i=Re.selectionEnd;Xe._recordChange({value:It,selectionStart:Qi,selectionEnd:$i})}},Xe._getLines=function(Re,It){return Re.substring(0,It).split(`
`)},Xe._recordChange=function(Re,It){var Qi,$i,la;It===void 0&&(It=!1);var da=Xe._history,ca=da.stack,Ji=da.offset;if(ca.length&&Ji>-1){Xe._history.stack=ca.slice(0,Ji+1);var Li=Xe._history.stack.length;if(Li>Xt){var Dn=Li-Xt;Xe._history.stack=ca.slice(Dn,Li),Xe._history.offset=Math.max(Xe._history.offset-Dn,0)}}var En=Date.now();if(It){var Sr=Xe._history.stack[Xe._history.offset];if(Sr&&En-Sr.timestamp<Lr){var Xr=/[^a-z0-9]([a-z0-9]+)$/i,Fs=(Qi=Xe._getLines(Sr.value,Sr.selectionStart).pop())===null||Qi===void 0?void 0:Qi.match(Xr),ws=($i=Xe._getLines(Re.value,Re.selectionStart).pop())===null||$i===void 0?void 0:$i.match(Xr);if(Fs!=null&&Fs[1]&&(!((la=ws==null?void 0:ws[1])===null||la===void 0)&&la.startsWith(Fs[1]))){Xe._history.stack[Xe._history.offset]=R(R({},Re),{timestamp:En});return}}}Xe._history.stack.push(R(R({},Re),{timestamp:En})),Xe._history.offset++},Xe._updateInput=function(Re){var It=Xe._input;It&&(It.value=Re.value,It.selectionStart=Re.selectionStart,It.selectionEnd=Re.selectionEnd,Xe.props.onValueChange(Re.value))},Xe._applyEdits=function(Re){var It=Xe._input,Qi=Xe._history.stack[Xe._history.offset];Qi&&It&&(Xe._history.stack[Xe._history.offset]=R(R({},Qi),{selectionStart:It.selectionStart,selectionEnd:It.selectionEnd})),Xe._recordChange(Re),Xe._updateInput(Re)},Xe._undoEdit=function(){var Re=Xe._history,It=Re.stack,Qi=Re.offset,$i=It[Qi-1];$i&&(Xe._updateInput($i),Xe._history.offset=Math.max(Qi-1,0))},Xe._redoEdit=function(){var Re=Xe._history,It=Re.stack,Qi=Re.offset,$i=It[Qi+1];$i&&(Xe._updateInput($i),Xe._history.offset=Math.min(Qi+1,It.length-1))},Xe._handleKeyDown=function(Re){var It=Xe.props,Qi=It.tabSize,$i=It.insertSpaces,la=It.ignoreTabKey,da=It.onKeyDown;if(!(da&&(da(Re),Re.defaultPrevented))){Re.keyCode===mo&&Re.currentTarget.blur();var ca=Re.currentTarget,Ji=ca.value,Li=ca.selectionStart,Dn=ca.selectionEnd,En=($i?" ":"	").repeat(Qi);if(Re.keyCode===Ft&&!la&&Xe.state.capture)if(Re.preventDefault(),Re.shiftKey){var Sr=Xe._getLines(Ji,Li),Xr=Sr.length-1,Fs=Xe._getLines(Ji,Dn).length-1,ws=Ji.split(`
`).map(function(go,el){return el>=Xr&&el<=Fs&&go.startsWith(En)?go.substring(En.length):go}).join(`
`);if(Ji!==ws){var jn=Sr[Xr];Xe._applyEdits({value:ws,selectionStart:jn!=null&&jn.startsWith(En)?Li-En.length:Li,selectionEnd:Dn-(Ji.length-ws.length)})}}else if(Li!==Dn){var Sr=Xe._getLines(Ji,Li),_i=Sr.length-1,Wn=Xe._getLines(Ji,Dn).length-1,jn=Sr[_i];Xe._applyEdits({value:Ji.split(`
`).map(function(Kr,_a){return _a>=_i&&_a<=Wn?En+Kr:Kr}).join(`
`),selectionStart:jn&&/\S/.test(jn)?Li+En.length:Li,selectionEnd:Dn+En.length*(Wn-_i+1)})}else{var ft=Li+En.length;Xe._applyEdits({value:Ji.substring(0,Li)+En+Ji.substring(Dn),selectionStart:ft,selectionEnd:ft})}else if(Re.keyCode===be){var Yl=Li!==Dn,Ih=Ji.substring(0,Li);if(Ih.endsWith(En)&&!Yl){Re.preventDefault();var ft=Li-En.length;Xe._applyEdits({value:Ji.substring(0,Li-En.length)+Ji.substring(Dn),selectionStart:ft,selectionEnd:ft})}}else if(Re.keyCode===yt){if(Li===Dn){var xs=Xe._getLines(Ji,Li).pop(),wa=xs==null?void 0:xs.match(/^\s+/);if(wa!=null&&wa[0]){Re.preventDefault();var Xl=`
`+wa[0],ft=Li+Xl.length;Xe._applyEdits({value:Ji.substring(0,Li)+Xl+Ji.substring(Dn),selectionStart:ft,selectionEnd:ft})}}}else if(Re.keyCode===Jo||Re.keyCode===J||Re.keyCode===xn||Re.keyCode===Yr){var xa=void 0;Re.keyCode===Jo&&Re.shiftKey?xa=["(",")"]:Re.keyCode===J?Re.shiftKey?xa=["{","}"]:xa=["[","]"]:Re.keyCode===xn?Re.shiftKey?xa=['"','"']:xa=["'","'"]:Re.keyCode===Yr&&!Re.shiftKey&&(xa=["`","`"]),Li!==Dn&&xa&&(Re.preventDefault(),Xe._applyEdits({value:Ji.substring(0,Li)+xa[0]+Ji.substring(Li,Dn)+xa[1]+Ji.substring(Dn),selectionStart:Li,selectionEnd:Dn+2}))}else(Fn?Re.metaKey&&Re.keyCode===tn:Re.ctrlKey&&Re.keyCode===tn)&&!Re.shiftKey&&!Re.altKey?(Re.preventDefault(),Xe._undoEdit()):(Fn?Re.metaKey&&Re.keyCode===tn&&Re.shiftKey:_n?Re.ctrlKey&&Re.keyCode===Et:Re.ctrlKey&&Re.keyCode===tn&&Re.shiftKey)&&!Re.altKey?(Re.preventDefault(),Xe._redoEdit()):Re.keyCode===fn&&Re.ctrlKey&&(!Fn||Re.shiftKey)&&(Re.preventDefault(),Xe.setState(function(go){return{capture:!go.capture}}))}},Xe._handleChange=function(Re){var It=Re.currentTarget,Qi=It.value,$i=It.selectionStart,la=It.selectionEnd;Xe._recordChange({value:Qi,selectionStart:$i,selectionEnd:la},!0),Xe.props.onValueChange(Qi)},Xe._history={stack:[],offset:-1},Xe._input=null,Xe}return wi.prototype.componentDidMount=function(){this._recordCurrentState()},Object.defineProperty(wi.prototype,"session",{get:function(){return{history:this._history}},set:function(Xe){this._history=Xe.history},enumerable:!1,configurable:!0}),wi.prototype.render=function(){var Xe=this,Re=this.props,It=Re.value,Qi=Re.style,$i=Re.padding,la=Re.highlight,da=Re.textareaId,ca=Re.textareaClassName,Ji=Re.autoFocus,Li=Re.disabled,Dn=Re.form,En=Re.maxLength,Sr=Re.minLength,Xr=Re.name,Fs=Re.placeholder,ws=Re.readOnly,jn=Re.required,_i=Re.onClick,Wn=Re.onFocus,ft=Re.onBlur,Yl=Re.onKeyUp,Ih=Re.onKeyDown,xs=Re.onValueChange,wa=Re.tabSize,Xl=Re.insertSpaces,xa=Re.ignoreTabKey,go=Re.preClassName,el=X(Re,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),Kr={paddingTop:typeof $i=="object"?$i.top:$i,paddingRight:typeof $i=="object"?$i.right:$i,paddingBottom:typeof $i=="object"?$i.bottom:$i,paddingLeft:typeof $i=="object"?$i.left:$i},_a=la(It);return Ae.createElement("div",R({},el,{style:R(R({},oa.container),Qi)}),Ae.createElement("pre",R({className:go,"aria-hidden":"true",style:R(R(R({},oa.editor),oa.highlight),Kr)},typeof _a=="string"?{dangerouslySetInnerHTML:{__html:_a+"<br />"}}:{children:_a})),Ae.createElement("textarea",{ref:function(ka){return Xe._input=ka},style:R(R(R({},oa.editor),oa.textarea),Kr),className:Ii+(ca?" ".concat(ca):""),id:da,value:It,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:_i,onKeyUp:Yl,onFocus:Wn,onBlur:ft,disabled:Li,form:Dn,maxLength:En,minLength:Sr,name:Xr,placeholder:Fs,readOnly:ws,required:jn,autoFocus:Ji,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),Ae.createElement("style",{dangerouslySetInnerHTML:{__html:ur}}))},wi.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},wi}(Ae.Component);oi.default=$d;var oa={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}}},78930:function(ii,oi,de){"use strict";var st=de(69593),R=de(48396),ht=de(76805),Gt=de(63566);ii.exports=function(X,Ae,yt){if(!Gt(X)||(Array.isArray(Ae)&&(Ae=[].concat.apply([],Ae).join(".")),typeof Ae!="string"))return X;for(var Ft=st(Ae,{sep:".",brackets:!0}).filter(St),be=Ft.length,Et=-1,tn=X;++Et<be;){var fn=Ft[Et];if(Et!==be-1){Gt(tn[fn])||(tn[fn]={}),tn=tn[fn];continue}ht(tn[fn])&&ht(yt)?tn[fn]=R({},tn[fn],yt):tn[fn]=yt}return X};function St(X){return X!=="__proto__"&&X!=="constructor"&&X!=="prototype"}},69593:function(ii,oi,de){"use strict";var st=de(85582);ii.exports=function(St,X,Ae){if(typeof St!="string")throw new TypeError("expected a string");typeof X=="function"&&(Ae=X,X=null),typeof X=="string"&&(X={sep:X});var yt=st({sep:"."},X),Ft=yt.quotes||['"',"'","`"],be;yt.brackets===!0?be={"<":">","(":")","[":"]","{":"}"}:yt.brackets&&(be=yt.brackets);var Et=[],tn=[],fn=[""],Jo=yt.sep,J=St.length,xn=-1,Yr;function mo(){if(be&&tn.length)return be[tn[tn.length-1]]}for(;++xn<J;){var Xt=St[xn],Lr=St[xn+1],_n={val:Xt,idx:xn,arr:fn,str:St};if(Et.push(_n),Xt==="\\"){_n.val=Gt(yt,St,xn)===!0?Xt+Lr:Lr,_n.escaped=!0,typeof Ae=="function"&&Ae(_n),fn[fn.length-1]+=_n.val,xn++;continue}if(be&&be[Xt]){tn.push(Xt);var Fn=mo(),Ii=xn+1;if(St.indexOf(Fn,Ii+1)!==-1)for(;tn.length&&Ii<J;){var ur=St[++Ii];if(ur==="\\"){ur++;continue}if(Ft.indexOf(ur)!==-1){Ii=R(St,ur,Ii+1);continue}if(Fn=mo(),tn.length&&St.indexOf(Fn,Ii+1)===-1)break;if(be[ur]){tn.push(ur);continue}Fn===ur&&tn.pop()}if(Yr=Ii,Yr===-1){fn[fn.length-1]+=Xt;continue}Xt=St.slice(xn,Yr+1),_n.val=Xt,_n.idx=xn=Yr}if(Ft.indexOf(Xt)!==-1){if(Yr=R(St,Xt,xn+1),Yr===-1){fn[fn.length-1]+=Xt;continue}ht(Xt,yt)===!0?Xt=St.slice(xn,Yr+1):Xt=St.slice(xn+1,Yr),_n.val=Xt,_n.idx=xn=Yr}if(typeof Ae=="function"&&(Ae(_n,Et),Xt=_n.val,xn=_n.idx),_n.val===Jo&&_n.split!==!1){fn.push("");continue}fn[fn.length-1]+=_n.val}return fn};function R(St,X,Ae,yt){var Ft=St.indexOf(X,Ae);return St.charAt(Ft-1)==="\\"?R(St,X,Ft+1):Ft}function ht(St,X){return X.keepDoubleQuotes===!0&&St==='"'||X.keepSingleQuotes===!0&&St==="'"?!0:X.keepQuotes}function Gt(St,X,Ae){return typeof St.keepEscaping=="function"?St.keepEscaping(X,Ae):St.keepEscaping===!0||X[Ae+1]==="\\"}}}]);
}());